<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-logo.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-logo.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-logo.png">
  <link rel="mask-icon" href="/images/favicon-logo.png" color="#222">
  <meta name="google-site-verification" content="4ub2lNf2WEkusifo-b7xbJIm2G5xxYUczDoWOFGp-NM">
  <meta name="msvalidate.01" content="C2030D8E2452D4B39AED09488E55F2DF">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"wqdy.top","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.10.0","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js"></script>

  <meta name="description" content="分享各类资源、经验与技巧">
<meta property="og:type" content="website">
<meta property="og:title" content="我全都要">
<meta property="og:url" content="https://wqdy.top/page/15/index.html">
<meta property="og:site_name" content="我全都要">
<meta property="og:description" content="分享各类资源、经验与技巧">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="c">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://wqdy.top/page/15/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/15/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>我全都要</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-112496567-1"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-112496567-1","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?0a902dd83e2d4f1aebaeaa0bafe307a0"></script>





<!-- google 分析 -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9068539038073295"
     crossorigin="anonymous"></script>


  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">我全都要</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">搞快点</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-前端"><a href="/c/frontend/" rel="section"><i class="fab fa-html5 fa-fw"></i>前端</a></li>
        <li class="menu-item menu-item-软件"><a href="/c/software/" rel="section"><i class="fas fa-th-large fa-fw"></i>软件</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fas fa-archive fa-fw"></i>归档</a></li>
        <li class="menu-item menu-item-面试"><span class="exturl" data-url="aHR0cHM6Ly9tcy53cWR5LnRvcA=="><i class="fas fa-archive fa-fw"></i>面试</span></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="c"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">c</p>
  <div class="site-description" itemprop="description">分享各类资源、经验与技巧</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">158</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">82</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2N1aWxvbmdqaW4=" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;cuilongjin"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wqdy.top/400.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="c">
      <meta itemprop="description" content="分享各类资源、经验与技巧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我全都要">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/400.html" class="post-title-link" itemprop="url">浏览器的工作原理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <date title="创建时间：2018-11-30" itemprop="dateCreated datePublished" datetime="2018-11-30T22:14:52+00:00">2018-11-30</date>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/c/frontend/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="浏览器的组成"><a href="#浏览器的组成" class="headerlink" title="浏览器的组成"></a>浏览器的组成</h2><p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@img/img/20210102203825.png"></p>
<ul>
<li>用户界面－ 包括地址栏、后退&#x2F;前进按钮、书签目录等，也就是你所看到的除了用来显示你所请求页面的主窗口之外的其他部分</li>
<li>浏览器引擎－ 用来查询及操作渲染引擎的接口</li>
<li>渲染引擎（浏览器内核）－ 用来显示请求的内容，例如，如果请求内容为 html，它负责解析 html 及 css，并将解析后的结果显示出来</li>
<li>网络－ 用来完成网络调用，例如 http 请求，它具有平台无关的接口，可以在不同平台上工作</li>
<li>UI 后端－ 用来绘制类似组合选择框及对话框等基本组件，具有不特定于某个平台的通用接口，底层使用操作系统的用户接口</li>
<li>JS 解释器－ 用来解释执行 JS 代码</li>
<li>数据存储－ 属于持久层，浏览器需要在硬盘中保存类似 cookie 的各种数据，HTML5 定义了 Storage 技术，这是一种轻量级完整的客户端存储技术</li>
</ul>
<h2 id="主流的渲染引擎"><a href="#主流的渲染引擎" class="headerlink" title="主流的渲染引擎"></a>主流的渲染引擎</h2><blockquote>
<p>浏览器的渲染引擎也叫排版引擎，或者是<strong>浏览器内核</strong></p>
</blockquote>
<p>主流的 渲染引擎 有</p>
<ul>
<li><strong>Chrome 浏览器</strong>: Blink 引擎（WebKit 的一个分支）。</li>
<li><strong>Safari 浏览器</strong>: WebKit 引擎，windows 版本 2008 年 3 月 18 日推出正式版，但苹果已于 2012 年 7 月 25 日停止开发 Windows 版的 Safari。</li>
<li><strong>FireFox 浏览器</strong>: Gecko 引擎。</li>
<li><strong>Opera 浏览器</strong>: Blink 引擎(早期版使用 Presto 引擎）。</li>
<li><strong>Internet Explorer 浏览器</strong>: Trident 引擎。</li>
<li><strong>Microsoft Edge 浏览器</strong>: EdgeHTML 引擎（Trident 的一个分支）。</li>
</ul>
<h2 id="渲染引擎工作原理"><a href="#渲染引擎工作原理" class="headerlink" title="渲染引擎工作原理"></a>渲染引擎工作原理</h2><p>渲染引擎解析的基本流程：</p>
<ol>
<li><p>解析 HTML 构建 <code>Dom树</code>，同时解析所有的 css 样式，构建 css 规则。DOM 是 W3C 组织推荐的处理可扩展置标语言的标准编程接口。</p>
</li>
<li><p>根据 DOM 树和 css 规则合并构建 <code>渲染树</code></p>
<ul>
<li>DOM 树上的节点没有样式的，渲染树的节点有样式的</li>
<li>渲染树上的节点都是需要渲染的，所以渲染树上没有像<code>head</code>标签 或 <code>display: none</code>这样的元素，但是它们在 Dom 树中</li>
</ul>
</li>
<li><p>对渲染树进行布局，定位坐标和大小、确定是否换行、确定 position、overflow、z-index 等等，这个过程叫<code>layout</code> 或 <code>reflow</code>。</p>
</li>
<li><p>绘制渲染树，调用操作系统底层 API(UI Backend)进行绘图操作。</p>
</li>
</ol>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@img/img/20210102203846.png"></p>
<p><strong>webkit 内核工作流程</strong></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@img/img/20210102203907.png"></p>
<p><strong>gecko 内核工作流程</strong></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@img/img/20210102203924.jpeg"></p>
<p>结论：浏览器能够解析 HTML 文件，并且显示到页面中。所以我们写的文件能够使用浏览器打开并且能够看到效果。</p>
<h1 id="重绘与回流"><a href="#重绘与回流" class="headerlink" title="重绘与回流"></a>重绘与回流</h1><h2 id="重绘与回流-1"><a href="#重绘与回流-1" class="headerlink" title="重绘与回流"></a>重绘与回流</h2><p><code>回流(reflow)</code>: 又叫重排，当 render tree 中的一部分(或全部)因为元素的规模尺寸，布局，隐藏等改变而需要重新构建。</p>
<p><code>重绘(repaint)</code>：当 render tree 中的一些元素需要更新属性，而这些属性只是影响元素的外观，风格，而不会影响布局的，比如 background-color。</p>
<ol>
<li>每个页面至少需要一次回流+重绘</li>
<li>回流必将引起重绘</li>
</ol>
<p>回流什么时候发生？</p>
<p>1、添加或者删除可见的 DOM 元素</p>
<p>2、元素位置改变</p>
<p>3、元素尺寸改变——边距、填充、边框、宽度和高度</p>
<p>4、内容改变——比如文本改变或者图片大小改变而引起的计算值宽度和高度改变</p>
<p>5、页面渲染初始化</p>
<p>6、浏览器窗口尺寸改变——resize 事件发生时</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span></span><br><span class="line">s.<span class="property">padding</span> = <span class="string">&#x27;2px&#x27;</span> <span class="comment">// 回流+重绘</span></span><br><span class="line">s.<span class="property">border</span> = <span class="string">&#x27;1px solid red&#x27;</span> <span class="comment">// 再一次 回流+重绘</span></span><br><span class="line">s.<span class="property">color</span> = <span class="string">&#x27;blue&#x27;</span> <span class="comment">// 再一次重绘</span></span><br><span class="line">s.<span class="property">backgroundColor</span> = <span class="string">&#x27;#ccc&#x27;</span> <span class="comment">// 再一次 重绘</span></span><br><span class="line">s.<span class="property">fontSize</span> = <span class="string">&#x27;14px&#x27;</span> <span class="comment">// 再一次 回流+重绘</span></span><br><span class="line"><span class="comment">// 添加node，再一次 回流+重绘</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(<span class="variable language_">document</span>.<span class="title function_">createTextNode</span>(<span class="string">&#x27;abc!&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h2 id="聪明的浏览器"><a href="#聪明的浏览器" class="headerlink" title="聪明的浏览器"></a>聪明的浏览器</h2><blockquote>
<p>从上个实例代码中可以看到几行简单的 JS 代码就引起了 6 次左右的回流、重绘。而且我们也知道回流的花销也不小，如果每句 JS 操作都去回流重绘的话，浏览器可能就会受不了。所以很多浏览器都会优化这些操作，浏览器会维护 1 个队列，把所有会引起回流、重绘的操作放入这个队列，等队列中的操作到了一定的数量或者到了一定的时间间隔，浏览器就会 flush 队列，进行一个批处理。这样就会让多次的回流、重绘变成一次回流重绘。</p>
</blockquote>
<p>虽然有了浏览器的优化，但有时候我们写的一些代码可能会强制浏览器提前 flush 队列，这样浏览器的优化可能就起不到作用了。当你向浏览器请求一些 style 信息的时候，就会让浏览器 flush 队列，比如：</p>
<ol>
<li><p>offsetTop, offsetLeft, offsetWidth, offsetHeight</p>
</li>
<li><p>scrollTop&#x2F;Left&#x2F;Width&#x2F;Height</p>
</li>
<li><p>clientTop&#x2F;Left&#x2F;Width&#x2F;Height</p>
</li>
<li><p>width,height</p>
</li>
<li><p>请求了 getComputedStyle(), 或者 IE 的 currentStyle</p>
</li>
</ol>
<h2 id="如何性能优化"><a href="#如何性能优化" class="headerlink" title="如何性能优化"></a>如何性能优化</h2><blockquote>
<p>减少回流与重绘的次数，就需要简单对渲染树的操作</p>
</blockquote>
<ol>
<li>直接使用 <code>className</code> 修改样式，少用 style 设置样式</li>
<li>让要操作的元素进行”离线处理”，处理完后一起更新<ul>
<li>使用 <code>DocumentFragment</code> 进行缓存操作，引发一次回流和重绘</li>
<li>使用 <code>display:none</code> 技术，只引发两次回流和重绘</li>
</ul>
</li>
<li>将需要多次重排的元素，position 属性设为 absolute 或 fixed，这样此元素就脱离了文档流，它的变化不会影响到其他元素为动画的 HTML 元素，例如动画，那么修改他们的 CSS 是会大大减小 reflow</li>
<li><strong>完成功能是前提，在完成功能的情况下想着优化代码</strong></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wqdy.top/395.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="c">
      <meta itemprop="description" content="分享各类资源、经验与技巧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我全都要">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/395.html" class="post-title-link" itemprop="url">HTML5</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <date title="创建时间：2018-11-23" itemprop="dateCreated datePublished" datetime="2018-11-23T22:10:49+00:00">2018-11-23</date>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/c/frontend/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="什么是-HTML5"><a href="#什么是-HTML5" class="headerlink" title="什么是 HTML5"></a>什么是 HTML5</h2><blockquote>
<p>HTML5 并不仅仅是作为 <strong>HTML 标记语言的一个最新版本</strong>， 更重要的是它<strong>制定了 web 应用开发的一系列标准</strong>，成为第一个将 web 作为应用开发平台的 HTML 语言。</p>
</blockquote>
<p>HTML5 定义了一系列新元素，如 <strong>新语义标签、多媒体标</strong> 签等，可以帮助开发者开发更加丰富的应用，同时有令人眼花缭乱的 css3，还提供了一些 Javascript API，如地理定位、重力感应、硬件访问等，可以在浏览器内实现类原生应用，制作 webApp，甚至结合 Canvas 我们可开发网页游戏</p>
<p>我们日常讨论的 H5 其实指的是一个泛称，它是由<strong>HTML5+CSS3+javascript</strong> 等技术组合而成的一个应用开发平台</p>
<h2 id="HTML5-的历史"><a href="#HTML5-的历史" class="headerlink" title="HTML5 的历史"></a>HTML5 的历史</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. WHATWG: Web Hypertext Application Technology Working。 WHATWG成立的原因是W3C意图放弃HTML，而力图发展XML技术</span><br><span class="line">2. HTML5 的第一份正式草案已于2008年1月22日公布</span><br><span class="line">3. 2014年10月29日，万维网联盟宣布，经过接近8年的艰苦努力，该标准规范终于制定完成</span><br></pre></td></tr></table></figure>

<p>思考：问什么 HTML5 在 2008 年就发布草案了，到 2014 年才火起来？</p>
<p>因为移动端的推动，HTML 在老的浏览器上兼容性很严重，并且 HTML5 很多新特性其实就是为移动端而出现的，可以说<strong>HTML5 是为移动端而生的</strong></p>
<h1 id="HTML5-语义化标签"><a href="#HTML5-语义化标签" class="headerlink" title="HTML5 语义化标签"></a>HTML5 语义化标签</h1><h2 id="常用语义化标签"><a href="#常用语义化标签" class="headerlink" title="常用语义化标签"></a>常用语义化标签</h2><blockquote>
<p>在 HTML5 之前，我们布局大多使用 div，但是 div 并没有语义化，HTML5 推出了一系列的语义化标签，可以用来表示 header、footer 等。</p>
</blockquote>
<p>HTML5 新的语义化标签</p>
<p><code>header</code> 头部、<code>nav</code> 导航、<code>footer</code> 底部、<code>aside</code> 侧边栏、<code>article</code> 文章、<code>section</code> 区块、<code>main</code> 主体区域</p>
<p>本质上新语义标签与<code>&lt;div&gt;</code>、<code>&lt;span&gt;</code>没有区别，只是其具有语义性，使用时除了在 HTML 结构上需要注意外，其它和普通标签的使用无任何差别，<code>&lt;nav&gt;</code>完全可以理解成<code>&lt;div class=&quot;nav&quot;&gt;</code>。不要好奇，它只是一个标签！就是增加了语义性，更加利于 SEO 的优化。</p>
<p>html5 还推出了一些其他的标签：<span class="exturl" data-url="aHR0cDovL3d3dy53M3NjaG9vbC5jb20uY24vdGFncy9pbmRleC5hc3A=">http://www.w3school.com.cn/tags/index.asp</span></p>
<h2 id="兼容性处理"><a href="#兼容性处理" class="headerlink" title="兼容性处理"></a>兼容性处理</h2><p>IE678 不识别这个标签</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;header&#x27;</span>) <span class="comment">// 创建这个标签即可让IE678识别</span></span><br><span class="line"><span class="comment">// 创建的标签默认是行内样式。</span></span><br><span class="line"><span class="comment">// 还需给标签加一个 display:block 的属性。</span></span><br></pre></td></tr></table></figure>

<p>借助 <code>html5shiv.js</code></p>
<blockquote>
<p>我们每次都要去创建标签，并且还需要设置 display：block 属性，非常麻烦，因此我们可以引入一个第三方 js 文件，这个 js 文件的功能就是创建元素和设置 display 属性。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- [if lte IE 8] &gt;  // lte ==&gt; 小于等于</span></span><br><span class="line"><span class="comment">&lt;script src=&quot;js/html5shiv.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">&lt;! [endif] --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 当 ie 浏览器的版本小于等于8的时候，才会引入 html5shiv.js --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- css hack --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 条件注释 IE独有的注释 --&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="类名操作-重点"><a href="#类名操作-重点" class="headerlink" title="类名操作(重点)"></a>类名操作(重点)</h1><blockquote>
<p>js 在 H5 中给所有的 DOM 对象新增了一个属性 classList</p>
<p>classList 是一个集合，会存储某个元素上所有的类名，使用 classList 来替代 className 操作 class 类</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 添加类</span></span><br><span class="line">div.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;classname&#x27;</span>)</span><br><span class="line"><span class="comment">// 移除类</span></span><br><span class="line">div.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;classname&#x27;</span>)</span><br><span class="line"><span class="comment">// 切换类</span></span><br><span class="line">div.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&#x27;classname&#x27;</span>)</span><br><span class="line"><span class="comment">// 判断类</span></span><br><span class="line">div.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;classname&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>【tab 栏案例】</p>
<h1 id="自定义属性操作（重点）"><a href="#自定义属性操作（重点）" class="headerlink" title="自定义属性操作（重点）"></a>自定义属性操作（重点）</h1><blockquote>
<p>H5 规定，以后但凡给标签增加自定义属性，都应该用 <code>data-</code> 开头 (规范)</p>
<p>H5 给所有的 DOM 对象增加了一个 <code>dataset</code> 的属性，这个属性中会包含所有 data- 开头的属性</p>
</blockquote>
<ul>
<li>html 5 中操作自定义属性 <code>dataset</code> 属性</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span> <span class="attr">data-name</span>=<span class="string">&quot;zs&quot;</span> <span class="attr">data-age</span>=<span class="string">&quot;10&quot;</span> <span class="attr">data-user-name</span>=<span class="string">&quot;ls&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#box&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">dataset</span>) <span class="comment">// DOMStringMap &#123;name: &#x27;zs&#x27;, age: &#x27;10&#x27;, userName: &#x27;ls&#x27;&#125;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">dataset</span>.<span class="property">name</span>) <span class="comment">// zs</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">dataset</span>[<span class="string">&#x27;age&#x27;</span>]) <span class="comment">// 10</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">dataset</span>.<span class="property">userName</span>) <span class="comment">// ls</span></span></span><br><span class="line"><span class="language-javascript">  box.<span class="property">dataset</span>.<span class="property">aaBb</span> = <span class="string">&#x27;cc&#x27;</span> <span class="comment">// 在html结构中或添加 data-aa-bb=&quot;cc&quot; 的自定义属性</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong>html 中属性是忽略大小写的，相当于是小写字母，如果需要大写，应使用中划线 <code>-</code> 进行分隔，在 js 中会转换成驼峰的形式，如<code>data-user-name ==&gt; userName</code></p>
<ul>
<li>jquery 中操作自定义属性</li>
</ul>
<p>jquery 并没有把 <code>data-</code> 当成自定义属性来用，jq 中封装了 <code>data()</code> 方法</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">data-id</span>=<span class="string">&quot;1&quot;</span> <span class="attr">data-name</span>=<span class="string">&quot;zs&quot;</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span> <span class="attr">data-a</span>=<span class="string">&#x27;&#123;&quot;b&quot;:&quot;c&quot;&#125;&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>($(<span class="string">&#x27;#box&#x27;</span>).<span class="title function_">data</span>()) <span class="comment">// &#123;id: 1, name: &quot;zs&quot;&#125;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// console.log($(&#x27;#box&#x27;).attr()) // error</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">dataset</span>) <span class="comment">// DOMStringMap&#123;id: &quot;1&quot;, name: &quot;zs&quot;&#125;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>($(<span class="string">&#x27;#box&#x27;</span>).<span class="title function_">data</span>(<span class="string">&#x27;id&#x27;</span>)) <span class="comment">// 1 =&gt; 获取到自定义属性</span></span></span><br><span class="line"><span class="language-javascript">  $(<span class="string">&#x27;#box&#x27;</span>).<span class="title function_">data</span>(<span class="string">&#x27;id&#x27;</span>, <span class="number">2</span>) <span class="comment">// 并不会修改原标签中的自定义属性</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>($(<span class="string">&#x27;#box&#x27;</span>).<span class="title function_">data</span>(<span class="string">&#x27;id&#x27;</span>)) <span class="comment">// 2 =&gt; html中data-id依然是1</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>($(<span class="string">&#x27;#box&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&#x27;data-id&#x27;</span>)) <span class="comment">// 1</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">dataset</span>[<span class="string">&#x27;id&#x27;</span>]) <span class="comment">// 1 =&gt; 获取到的还是原来的 data-id</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  $(<span class="string">&#x27;#box&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&#x27;data-id&#x27;</span>, <span class="number">3</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>($(<span class="string">&#x27;#box&#x27;</span>).<span class="title function_">data</span>(<span class="string">&#x27;id&#x27;</span>)) <span class="comment">// 3</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">dataset</span>[<span class="string">&#x27;id&#x27;</span>]) <span class="comment">// 3</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 属性里使用json语法，但通过data()设置的不能解析成对象</span></span></span><br><span class="line"><span class="language-javascript">  $(<span class="string">&#x27;#box&#x27;</span>).<span class="title function_">data</span>(<span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;&#123;&quot;e&quot;:&quot;f&quot;&#125;&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>($(<span class="string">&#x27;#box&#x27;</span>).<span class="title function_">data</span>(<span class="string">&#x27;a&#x27;</span>)) <span class="comment">// &#123;b: &quot;c&quot;&#125; =&gt; 对象</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>($(<span class="string">&#x27;#box&#x27;</span>).<span class="title function_">data</span>(<span class="string">&#x27;d&#x27;</span>)) <span class="comment">// &#x27;&#123;&quot;e&quot;:&quot;f&quot;&#125;&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  $(<span class="string">&#x27;#box&#x27;</span>).<span class="title function_">removeData</span>() <span class="comment">// 删除之前通过 data() 方法设置的数据</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>!&gt; jq 的 data() 方法内部使用了缓存来实现，该方法设置的属性只能通过该方法获取，在 html 页面中看不到属性值，通过原生 dataset 属性也获取不到值</p>
<h1 id="网络状态"><a href="#网络状态" class="headerlink" title="网络状态"></a>网络状态</h1><blockquote>
<p>在移动端，我们经常需要检测设置是在线还是离线，HTML5 为此定义了一个 navigator.onLine 属性，这个属性用于检测设备是否联网。<strong>navigator.onLine</strong> 在不同浏览器中有细微的差别。</p>
</blockquote>
<h2 id="网络状态-1"><a href="#网络状态-1" class="headerlink" title="网络状态"></a>网络状态</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">navigator.onLine 返回用户当前的网络状况，是一个布尔值</span><br><span class="line">1. 如果浏览器连不上网(包括局域网)，就是离线状态，也就是脱机状态，会返回 false</span><br><span class="line">2. 否则就是在线状态，返回 true</span><br></pre></td></tr></table></figure>

<p><strong>注意：返回 true 不一定就是说一定能访问互联网，因为有可能连接的是局域网。但是返回 false 则表示一定连不上网。</strong></p>
<h2 id="监听网络变化"><a href="#监听网络变化" class="headerlink" title="监听网络变化"></a>监听网络变化</h2><blockquote>
<p>为了更好的确定网络是否连接，HTML5 还定义了两个事件，用于监听网络状态的变化。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 网络连接时会被调用</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;online&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;online&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当网络断开时会被调用</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;offline&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;offline&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="地理位置"><a href="#地理位置" class="headerlink" title="地理位置"></a>地理位置</h1><blockquote>
<p>在 HTML 规范中，增加了获取用户地理信息的 API，这样使得我们可以基于用户位置开发互联网应用，即基于位置服务 LBS(Location Base Service)</p>
</blockquote>
<h2 id="隐私"><a href="#隐私" class="headerlink" title="隐私"></a>隐私</h2><p>HTML5 规范提供了一套保护用户隐私的机制。必须先得到用户明确许可，才能获取用户的位置信息。<strong>在获取地理位置之前，会询问用户，只有在获得许可之后，才能获取到用户的位置信息。</strong></p>
<p>H5 提供的获取地理位置信息并不是特别的精确，会一定的误差，如果需要非常精确的定位，还是需要使用安卓或者 ios，访问基于操作系统的方法。 （小程序）</p>
<h2 id="相关的方法"><a href="#相关的方法" class="headerlink" title="相关的方法"></a>相关的方法</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// successCallback:获取成功后会调用,并返回一个position对象，里面包含了地理位置信息</span></span><br><span class="line"><span class="comment">// 获取失败了会调用，并返回error对象，里面包含了错误信息。</span></span><br><span class="line"><span class="comment">// 获取当前的地理位置信息</span></span><br><span class="line">navigator.<span class="property">geolocation</span>.<span class="title function_">getCurrentPosition</span>(successCallback, errorCallback)</span><br><span class="line"><span class="comment">// 重复的获取当前的地理位置信息</span></span><br><span class="line">navigator.<span class="property">geolocation</span>.<span class="title function_">watchPosition</span>(successCallback, errorCallback)</span><br></pre></td></tr></table></figure>

<p>实例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">navigator.<span class="property">geolocation</span>.<span class="title function_">getCurrentPosition</span>(</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">position</span>) &#123;</span><br><span class="line">    <span class="comment">// 定位成功会调用该方</span></span><br><span class="line">    <span class="comment">// 法谷歌浏览器进行了限制，看不到，可以再IE浏览器下查看</span></span><br><span class="line">    <span class="comment">// position.coords.latitude 纬度</span></span><br><span class="line">    <span class="comment">// position.coords.longitude 经度</span></span><br><span class="line">    <span class="comment">// position.coords.accuracy 精度</span></span><br><span class="line">    <span class="comment">// position.coords.altitude 海拔高度</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// 定位失败会调用该方法</span></span><br><span class="line">    <span class="comment">// error 是错误信息</span></span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><strong>苹果浏览器对 webkit 定位权限进行了修改，所有定位请求的页面必须是 https 协议的。</strong></p>
<h2 id="百度地图、高德地图、腾讯地图"><a href="#百度地图、高德地图、腾讯地图" class="headerlink" title="百度地图、高德地图、腾讯地图"></a>百度地图、高德地图、腾讯地图</h2><blockquote>
<p>仅仅获取到经纬度对于用户来说意义并不大，因为用户也不知道经度和纬度表示的是地球上的哪一个地方，因为我们可以结合百度地图，准确的将用户的位置显示出来。</p>
</blockquote>
<p>百度地图官网：<span class="exturl" data-url="aHR0cDovL2xic3l1bi5iYWlkdS5jb20v">http://lbsyun.baidu.com/</span></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. 在开发中，找到 javascript API</span><br><span class="line">2. 直接查看示例 demo</span><br><span class="line">3. 复制相应的代码，替换掉秘钥就行，秘钥只需创建一个新的应用就可以了</span><br></pre></td></tr></table></figure>

<h1 id="web-存储"><a href="#web-存储" class="headerlink" title="web 存储"></a>web 存储</h1><blockquote>
<p>在代码执行的时候，数据都是存储在内存中的，当页面关闭或者浏览器关闭的时候，内存就被释放掉了。数据只有存储在硬盘上，才不会被释放。</p>
</blockquote>
<h2 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h2><p>特点：</p>
<ul>
<li>在浏览器端的存储数据的容器</li>
<li>大小 4k</li>
<li>生命周期，默认会话级别，但是可以设置过期时间</li>
<li>cookie 中的数据可以在同一个网站的页面共享</li>
<li>cookie 中的数据，在请求时会进行自动携带</li>
<li>不同浏览器的 cookie 不能共享</li>
<li>cookie 是以字符串形式存在的，这个字符串有固定的格式：key&#x3D;value;key1&#x3D;value1；在获取 cookie 内容时，一般需要通过正则或者字符串的方法进行处理，转换成对象，最终得到数据</li>
<li>一般用于存储 sessionId，可以实现登录状态保持 (会话保持)</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&#x27;name=zhangsan&#x27;</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&#x27;age=18&#x27;</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&#x27;sex=23&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置过期时间</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&#x27;sex=12;max-age=3600&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取cookie</span></span><br><span class="line"><span class="keyword">var</span> result = <span class="variable language_">document</span>.<span class="property">cookie</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br></pre></td></tr></table></figure>

<h2 id="WebStorage"><a href="#WebStorage" class="headerlink" title="WebStorage"></a>WebStorage</h2><blockquote>
<p>HTML5 规范提出使用 sessionStorage 和 localStorage 存储数据。设置、读取、删除操作很方便</p>
</blockquote>
<ul>
<li><p>sessionStorage 和 localStorage 特点</p>
<ul>
<li>都保存在客户端</li>
<li>大小为 5M 左右</li>
<li>使用方法相同</li>
<li>以键值对的方式，存储字符串格式的数据</li>
</ul>
</li>
<li><p>sessionStorage 和 localStorage 区别</p>
<ul>
<li>sessionStorage 生命周期默认为一个会话周期，且不能设置周期，一旦关闭浏览器，就销毁了，不能在多个窗口下共享数据</li>
<li>localStorage 永久生效，除非手动删除，可以多个窗口共享</li>
</ul>
</li>
<li><p>使用方法</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setItem</span>(key, value) <span class="comment">// 设置存储内容</span></span><br><span class="line"><span class="title function_">getItem</span>(key) <span class="comment">// 读取存储内容</span></span><br><span class="line"><span class="title function_">removeItem</span>(key) <span class="comment">// 删除键值为key的存储内容</span></span><br><span class="line"><span class="title function_">clear</span>() <span class="comment">// 清空所有存储内容（谨慎使用）</span></span><br></pre></td></tr></table></figure>

<p>存取复杂数据类型：先将复杂数据转换成 JSON 字符串 <code>JSON.stringify(obj/arr)</code> 在进行存储；使用时将 JSON 字符串转换成复杂数据类型 <code>JSON.parse( jsonStr )</code></p>
<p>【案例-换肤效果】</p>
<h2 id="Cookie-和-WebStorage-比较"><a href="#Cookie-和-WebStorage-比较" class="headerlink" title="Cookie 和 WebStorage 比较"></a>Cookie 和 WebStorage 比较</h2><p><strong>cookie</strong></p>
<ul>
<li>大小受限</li>
<li>用户可以操作（禁用）cookie，使功能受限</li>
<li>安全性较低</li>
<li>有些状态不可能保存在客户端。</li>
<li>每次访问都要传送 cookie 给服务器，浪费带宽</li>
</ul>
<p><strong>WebStorage</strong></p>
<ul>
<li>存储空间更大：cookie 为 4KB，而 WebStorage 是 5MB</li>
<li>WebStorage 不会传送到服务器，存储在本地的数据可以直接获取，速度更快，并且减少了客户端和服务器端的交互，节省了网络流量</li>
<li>对于那种只需要在用户浏览一组页面期间保存而关闭浏览器后就可以丢弃的数据，sessionStorage 会非常方便</li>
<li>安全性：WebStorage 不会随着 HTTP header 发送到服务器端，所以安全性相对于 cookie 来说比较高一些，不会担心截获，但是仍然存在伪造问题</li>
<li>WebStorage 提供了一些方法，数据操作比 cookie 方便</li>
</ul>
<h1 id="自定义播放器"><a href="#自定义播放器" class="headerlink" title="自定义播放器"></a>自定义播放器</h1><p>全屏切换 API：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// requestFullScreen 这个方法还没有标准化，需要添加私有前缀</span></span><br><span class="line">video.<span class="title function_">requestFullScreen</span>()</span><br><span class="line">video.<span class="title function_">webkitRequestFullScreen</span>()</span><br><span class="line">video.<span class="title function_">mozRequestFullScreen</span>()</span><br></pre></td></tr></table></figure>

<p>video&#x2F;audio 属性：</p>
<ul>
<li>currentTime: 设置或返回音频&#x2F;视频中的当前播放位置（以秒计）</li>
<li>duration: 返回当前音频&#x2F;视频的长度（以秒计）</li>
<li>autoplay: 默认 false 设置或返回是否在加载完成后随即播放音频&#x2F;视频</li>
<li>volume: 设置或返回音频&#x2F;视频的音量</li>
<li>paused: 设置或返回音频&#x2F;视频是否暂停， true 指示音频&#x2F;视频已暂停</li>
</ul>
<p>方法：</p>
<ul>
<li><p>load(): 重新加载音频&#x2F;视频元素</p>
</li>
<li><p>play(): 开始播放音频&#x2F;视频</p>
</li>
<li><p>pause(): 暂停当前播放的音频&#x2F;视频</p>
</li>
</ul>
<p>事件：</p>
<ul>
<li>timeupdate: 播放进度更改时触发</li>
</ul>
<p>参考文档<br><span class="exturl" data-url="aHR0cDovL3d3dy53M3NjaG9vbC5jb20uY24vdGFncy9odG1sX3JlZl9hdWRpb192aWRlb19kb20uYXNw">http://www.w3school.com.cn/tags/html_ref_audio_video_dom.asp</span></p>
<p>推荐：<span class="exturl" data-url="aHR0cHM6Ly93d3cuYXdlc29tZXMuY24vcmVwby92aWRlb2pzL3ZpZGVvLWpz">https://www.awesomes.cn/repo/videojs/video-js</span></p>
<h1 id="文件读取"><a href="#文件读取" class="headerlink" title="文件读取"></a>文件读取</h1><blockquote>
<p>通过 FileReader 对象我们可以读取本地存储的文件（用户通过 input:file 上传的文件），可以使用 File 对象来指定所要读取的文件或数据。其中 File 对象可以是来自用户在一个<code>&lt;input&gt;</code>元素上选择文件后返回的 FileList 对象，也可以来自由拖放操作生成的 DataTransfer</p>
</blockquote>
<h2 id="files"><a href="#files" class="headerlink" title="files"></a>files</h2><p>对于 file 类型的 input 框，在这个 DOM 对象中，存在一个 files 属性，这个属性是 FileList 对象，是一个伪数组，里面存储着上传的所有文件，当 input 框指定了 multiple 属性之后，就可以上传多个文件了。</p>
<p>也就是说，通过 files 这个属性，我们就可以获取到所有上传的文件。</p>
<h2 id="file-对象"><a href="#file-对象" class="headerlink" title="file 对象"></a>file 对象</h2><p>File 对象中包含了文件的最后修改时间、文件名、文件类型等信息。</p>
<h2 id="FileReader-对象"><a href="#FileReader-对象" class="headerlink" title="FileReader 对象"></a>FileReader 对象</h2><p>FileReader 是一个 HTML5 新增的对象，用于读取文件（必须通过 input:file 上传）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> file = input.<span class="property">files</span>[<span class="number">0</span>]</span><br><span class="line"><span class="comment">// 创建一个fileReader对象</span></span><br><span class="line"><span class="keyword">var</span> fr = <span class="keyword">new</span> <span class="title class_">FileReader</span></span><br><span class="line"><span class="comment">// 读取文件的两个方法</span></span><br><span class="line">fr.<span class="title function_">readAsText</span>(file) 以文本的方式读取文件 ,文本文件</span><br><span class="line">fr.<span class="title function_">readAsDataURL</span>(file) 以<span class="title class_">DataURL</span>形式读取文件，图片，视频</span><br><span class="line"><span class="comment">// 文件读取完成事件：</span></span><br><span class="line">fr.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">// 当文件读取完成，可以通过result属性获取结果</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(fr.<span class="property">result</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>案例：图片预览</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. FileReader 是异步的</span></span><br><span class="line"><span class="keyword">var</span> file = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;file&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box&#x27;</span>)</span><br><span class="line">file.<span class="title function_">addEventListener</span>(<span class="string">&#x27;change&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">dir</span>(<span class="variable language_">this</span>) <span class="comment">// file 中files 属性里面存储了所有上传的文件</span></span><br><span class="line">  <span class="comment">// 这个data就是我们上传的那个文件</span></span><br><span class="line">  <span class="keyword">var</span> data = file.<span class="property">files</span>[<span class="number">0</span>]</span><br><span class="line">  <span class="comment">// 1. 创建一个文件读取器</span></span><br><span class="line">  <span class="keyword">var</span> fr = <span class="keyword">new</span> <span class="title class_">FileReader</span>()</span><br><span class="line">  <span class="comment">// 2. 让文件读取器读取整个文件</span></span><br><span class="line">  fr.<span class="title function_">readAsDataURL</span>(data)</span><br><span class="line">  <span class="comment">// 3. 等待文件读取完</span></span><br><span class="line">  <span class="comment">// onload：文件读取完成后，就会触发</span></span><br><span class="line">  fr.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 通过 fr.result 就可以获取到最终的结果</span></span><br><span class="line">    <span class="keyword">var</span> img = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">    img.<span class="property">src</span> = fr.<span class="property">result</span></span><br><span class="line">    box.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    box.<span class="title function_">appendChild</span>(img)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 2. URL.createObjectURL(file)  缺点： 1. 试验中  2. 同步（阻塞）</span></span><br><span class="line"><span class="keyword">var</span> file = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;file&#x27;</span>)</span><br><span class="line">file.<span class="title function_">addEventListener</span>(<span class="string">&#x27;change&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> data = <span class="variable language_">this</span>.<span class="property">files</span>[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">var</span> result = <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(data)</span><br><span class="line">  img.<span class="property">src</span> = result</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wqdy.top/1632.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="c">
      <meta itemprop="description" content="分享各类资源、经验与技巧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我全都要">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/1632.html" class="post-title-link" itemprop="url">CSS3 基础</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <date title="创建时间：2018-11-23" itemprop="dateCreated datePublished" datetime="2018-11-23T14:28:51+00:00">2018-11-23</date>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/c/frontend/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>如同人类的的进化一样，CSS3 是 CSS2 的“进化”版本，在 CSS2 基础上，<strong>增强</strong>  或 <strong>新增</strong>  了许多特性， 弥补了 CSS2 的众多不足之处，使得 Web 开发变得更为高效和便捷。</p>
<h2 id="现状"><a href="#现状" class="headerlink" title="现状"></a>现状</h2><ul>
<li>PC 端浏览器支持程度差，需要添加私有前缀</li>
<li>移动端支持优于 PC 端</li>
<li>不断改进中</li>
<li>应用相对广泛</li>
</ul>
<p>关于私有前缀：</p>
<blockquote>
<p>在标准还未确定时，部分浏览器已经根据最初草案实现了部分功能，为了与之后确定下来的标准进行兼容，所以每种浏览器使用了自己的私有前缀与标准进行区分，当标准确立后，各大浏览器将逐步支持不带前缀的 css3 新属性</p>
<p>目前已有很多私有前缀可以不写了，但为了兼容老版本的浏览器，可以仍沿用私有前缀和标准方法，逐渐过渡</p>
<p>一般来说，CSS3 主要是为移动端而生的，因此我们在移动端没必要写太多的前缀，因为移动端的 ios 和 Android 的浏览器都是 webkit 内核</p>
<p>谷歌、苹果浏览器：<code>-webkit-</code><br>火狐浏览器：<code>-moz-</code><br>IE 浏览器：<code>-ms-</code><br>欧朋浏览器：<code>-o-</code></p>
<p>一般工作中不用去加，会通过打包工具 webpack 自动添加</p>
</blockquote>
<h2 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h2><h2 id="阴影"><a href="#阴影" class="headerlink" title="阴影"></a>阴影</h2><ul>
<li>text-shadow: 文字阴影</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">语法：text-shadow：none | &lt;shadow&gt; [ , &lt;shadow&gt; ]*</span><br><span class="line">  &lt;shadow&gt; =&gt; &lt;length&gt;&#123;2,3&#125; &amp;&amp; &lt;color&gt;?</span><br><span class="line">text-shadow：水平偏移 垂直偏移 羽化大小 颜色</span><br><span class="line">水平偏移 垂直偏移 可以为负值，羽化大小可选且不可为负</span><br><span class="line">可以设置多组阴影值，用逗号隔开</span><br></pre></td></tr></table></figure>

<ul>
<li>box-shadow: 边框阴影</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">语法：box-shadow：none | &lt;shadow&gt; [ , &lt;shadow&gt; ]*</span><br><span class="line">  &lt;shadow&gt; =&gt; inset? &amp;&amp; &lt;length&gt;&#123;2,4&#125; &amp;&amp; &lt;color&gt;?</span><br><span class="line"></span><br><span class="line">box-shadow：水平偏移 垂直偏移 羽化大小 阴影外延 颜色</span><br><span class="line">水平偏移、垂直偏移、阴影外延可以为负值，羽化大小、阴影外延可选，羽化大小不允许负值</span><br><span class="line">可以设置多组阴影值，用逗号隔开</span><br><span class="line">inset：设置对象的阴影类型为内阴影。该值为空时，则对象的阴影类型为外阴影</span><br></pre></td></tr></table></figure>

<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>background-size</p>
<p>bakground-clip</p>
<p>background-origin</p>
<h2 id="渐变"><a href="#渐变" class="headerlink" title="渐变"></a>渐变</h2><h3 id="线性渐变"><a href="#线性渐变" class="headerlink" title="线性渐变"></a>线性渐变</h3><blockquote>
<p>linear-gradient() 指沿着某条直线朝一个方向产生的渐变效果</p>
<p>渐变实际上相当与一张图片，因为需要加给 background-image 才会生效</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 最简单的渐变 颜色至少两个 方向默认从上到下 */</span></span><br><span class="line"><span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(red, green);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设定渐变的方向 */</span></span><br><span class="line"><span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(to right, red, green);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 也可以设定渐变的角度 */</span></span><br><span class="line"><span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, red, green);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设定渐变的范围 */</span></span><br><span class="line"><span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(to right, red <span class="number">20%</span>, green <span class="number">80%</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 每一个区间表示渐变颜色的范围 */</span></span><br><span class="line">background-image: <span class="built_in">linear-gradient</span>(to right, red <span class="number">20%</span>, green <span class="number">20%</span>)</span><br></pre></td></tr></table></figure>

<h3 id="径向渐变"><a href="#径向渐变" class="headerlink" title="径向渐变"></a>径向渐变</h3><blockquote>
<p>radial-gradient 指从一个中心点开始沿着四周产生渐变效果</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 最简单的渐变 */</span></span><br><span class="line"><span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(red, green);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 指定圆的半径和圆心 */</span></span><br><span class="line"><span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(<span class="number">200px</span> at center, red, green);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 指定椭圆 */</span></span><br><span class="line"><span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(<span class="number">200px</span> <span class="number">80px</span> at center, red, green);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 指定范围 */</span></span><br><span class="line"><span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(<span class="number">200px</span> at center, green <span class="number">50%</span>, red <span class="number">50%</span>);</span><br></pre></td></tr></table></figure>

<h2 id="盒子模型"><a href="#盒子模型" class="headerlink" title="盒子模型"></a>盒子模型</h2><blockquote>
<p>CSS3 中可以通过 box-sizing 来指定盒模型，即可指定为 content-box、border-box，这样我们计算盒子大小的方式就发生了改变</p>
</blockquote>
<p>可以分成两种情况：</p>
<ul>
<li>box-sizing: border-box 计算方式为 content &#x3D; width – border - padding</li>
<li>box-sizing: content-box 计算方式为 content &#x3D; width</li>
</ul>
<h2 id="calc-函数"><a href="#calc-函数" class="headerlink" title="calc() 函数"></a>calc() 函数</h2><p>用于动态计算长度值</p>
<ul>
<li>注意：运算符前后都需要保留一个空格，例如：<code>width: calc(100% - 10px)</code></li>
<li>任何长度值都可以使用 calc() 函数进行计算</li>
<li>calc() 函数支持 <code>+</code> 、<code>-</code>、 <code>*</code> 、<code>/</code> 运算</li>
<li>calc() 函数使用标准的数学运算优先级规则</li>
</ul>
<h2 id="过渡"><a href="#过渡" class="headerlink" title="过渡"></a>过渡</h2><ul>
<li>过渡的属性</li>
</ul>
<p>如果两个状态发生改变，没有过渡，效果是瞬间变化的，如果加上了过渡，那么这个过程就会有动画的效果，整个状态变化的过程是由浏览器来完成的，我们只需要关注开始状态与结束状态即可</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* transition-property：设置过渡属性 默认值为 all 表示全部*/</span></span><br><span class="line"><span class="comment">/* 多个用逗号分隔 */</span></span><br><span class="line"><span class="attribute">transition-property</span>: all;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* transition-duration:设置过渡时间 */</span></span><br><span class="line"><span class="attribute">transition-duration</span>: <span class="number">1s</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* transition-delay：设置过渡延时 */</span></span><br><span class="line"><span class="attribute">transition-delay</span>: <span class="number">2s</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* transition-timing-function:设置过渡的速度 */</span></span><br><span class="line"><span class="comment">/* linear(匀速)，ease(平滑)，ease-in，ease-out，ease-in-out， steps(10)(分步动画) */</span></span><br><span class="line"><span class="attribute">transition-timing-function</span>: linear;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：</p>
<ol>
<li>过渡必须要有两个状态的变化</li>
<li>过渡除了可以加到初始的状态，可以加到 hover 状态，但效果不一样，如果加到 hover 状态，回来就没有过渡了</li>
</ol>
</blockquote>
<ul>
<li>属性合写</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 属性 时间 延时 速度 */</span></span><br><span class="line"><span class="comment">/* 多个过渡用逗号隔开 */</span></span><br><span class="line"><span class="attribute">transition</span>: width <span class="number">1s</span> <span class="number">3s</span> linear, border-radius <span class="number">3s</span>;</span><br></pre></td></tr></table></figure>

<h2 id="2D-转换"><a href="#2D-转换" class="headerlink" title="2D 转换"></a>2D 转换</h2><blockquote>
<p>transform: 转换，是 CSS3 最具颠覆性的几个特性之一，既可以用于 2D 转换，也可以用于 3D 转换</p>
<p>transform: 2D 转换，元素在平面上实现移动、旋转、缩放、斜切等操作</p>
</blockquote>
<h3 id="scale-缩放"><a href="#scale-缩放" class="headerlink" title="scale 缩放"></a>scale 缩放</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">scaleX</span>(<span class="number">0.5</span>); <span class="comment">/* 让宽度变化 */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">scaleY</span>(<span class="number">0.5</span>); <span class="comment">/* 让高度变化，注意不能写多个transform，不然会覆盖 */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.5</span>); <span class="comment">/* 让宽度和高度同时变化 */</span></span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li><p>scale 接收的值是倍数，因此没有单位</p>
</li>
<li><p>scale 是一个值时，宽度高度会等比例同事缩放</p>
</li>
<li><p>scale 缩放时内部内容也会缩放</p>
</li>
<li><blockquote>
<p>可以通过 transition-origin 设定缩放原点 （可以是数值或方位词 top、left…)</p>
</blockquote>
</li>
</ul>
<h3 id="translate-平移"><a href="#translate-平移" class="headerlink" title="translate 平移"></a>translate 平移</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">100px</span>);</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">100px</span>);</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">100px</span>, <span class="number">100px</span>);</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">50%</span>, <span class="number">50%</span>);</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li>translate 的值可以是 px，也可以是百分比，如果是百分比，那么参照的是<strong>自身的宽高</strong></li>
<li>translate 移动的元素并不会影响其他盒子，类似于相对定位</li>
</ul>
<h3 id="rotate-旋转"><a href="#rotate-旋转" class="headerlink" title="rotate 旋转"></a>rotate 旋转</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>); <span class="comment">/* 旋转360度 */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">360deg</span>); <span class="comment">/* 逆时针旋转360度 */</span></span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li>单位是 deg，角度，不是 px</li>
<li>正值顺时针转，负值逆时针转</li>
<li>可以通过 transition-origin 设定旋转原点</li>
</ul>
<blockquote>
<p>rotate 旋转会让坐标轴也跟着旋转</p>
</blockquote>
<h3 id="skew-斜切-变形"><a href="#skew-斜切-变形" class="headerlink" title="skew 斜切(变形)"></a>skew 斜切(变形)</h3><p>skew 在实际开发中，是用的最少的一个属性。一般来说，x 和 y 只会倾斜其中的一个</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 在水平方向倾斜30deg */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">skewX</span>(<span class="number">30deg</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 在垂直方向倾斜30deg */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">skewY</span>(<span class="number">30deg</span>);</span><br></pre></td></tr></table></figure>

<p>【案例：扫光效果.html】</p>
<h3 id="transform-origin-转换原点"><a href="#transform-origin-转换原点" class="headerlink" title="transform-origin 转换原点"></a>transform-origin 转换原点</h3><blockquote>
<p>通过 transform-origin 可以设置转换的中心原点</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transform-origin</span>: center center;</span><br><span class="line"><span class="attribute">transform-origin</span>: <span class="number">40px</span> <span class="number">40px</span>;</span><br></pre></td></tr></table></figure>

<h3 id="转换合写问题"><a href="#转换合写问题" class="headerlink" title="转换合写问题"></a>转换合写问题</h3><blockquote>
<p>transform 属性只能写一个，如果写了多个会覆盖，属性的值可以写多个， 用空格隔开即可</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">800px</span>) <span class="built_in">scale</span>(<span class="number">1.5</span>) <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>transform 属性可以连写，但是顺序对效果影响的，因为它会在第一个效果的基础上执行第二个效果，然后执行第三个效果（通常会把 rotate 放后面）</li>
<li>如果对 transform 进行过度效果的时候，初始状态和结束状态要一一对应</li>
</ul>
<p>【案例：盾牌打散与合并效果.html】</p>
<h2 id="3D-转换"><a href="#3D-转换" class="headerlink" title="3D 转换"></a>3D 转换</h2><p>思考：2D 与 3D 的区别？</p>
<h3 id="坐标轴"><a href="#坐标轴" class="headerlink" title="坐标轴"></a>坐标轴</h3><blockquote>
<p>用 X、Y、Z 分别表示空间的 3 个维度，三条轴互相垂直。<strong>注意+Y 是向下的</strong></p>
</blockquote>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@img/img/20210102204311.png"></p>
<h3 id="perspective-透视"><a href="#perspective-透视" class="headerlink" title="perspective 透视"></a>perspective 透视</h3><blockquote>
<p>电脑显示屏是一个 2D 的平面，因为我们看不出来旋转的方向，通过 perspective 属性，可以定义 3D 元素距视图的距离，单位是 px。</p>
<p>说白了，设置了 perspective 属性后，就有了进大远小的效果了，在视觉上，让我们能看出来 3d 的效果。</p>
<p>注意：当为元素定义 perspective 属性时，其子元素会获得透视效果，而不是元素本身。</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">perspective</span>：<span class="number">500px</span>;</span><br></pre></td></tr></table></figure>

<p>对于我们眼睛来说，离我们越近的房子，我们会感觉到这个房子越大，离我们越远的房子，就会感觉越小，其实房子的大小都是一样的，只是在视觉上的一种不同。</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@img/img/20210102204343.png"></p>
<h3 id="rotate-旋转-1"><a href="#rotate-旋转-1" class="headerlink" title="rotate 旋转"></a>rotate 旋转</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>); <span class="comment">/* 让元素在平面2D中旋转，相当于沿着Z轴旋转 */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotateX</span>(<span class="number">45deg</span>); <span class="comment">/* 让元素沿着X轴转45度 */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">45deg</span>); <span class="comment">/* 让元素沿着Y轴转45度 */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotateZ</span>(<span class="number">45deg</span>); <span class="comment">/* 让元素沿着Z轴转45度 */</span></span><br></pre></td></tr></table></figure>

<p>【3D 旋转.html】</p>
<h3 id="translate-平移-1"><a href="#translate-平移-1" class="headerlink" title="translate 平移"></a>translate 平移</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 沿着X轴的正方向移动45px */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">45px</span>);</span><br><span class="line"><span class="comment">/* 沿着Y轴的正方向移动45px */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">45px</span>);</span><br><span class="line"><span class="comment">/* 沿着Z轴的正方向移动45px */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translateZ</span>(<span class="number">45px</span>);</span><br></pre></td></tr></table></figure>

<p>【3D 平移.html】</p>
<p>【立方体.html】</p>
<h3 id="transform-style"><a href="#transform-style" class="headerlink" title="transform-style"></a>transform-style</h3><p>transform-style 属性规定如何在 3D 空间中呈现被嵌套的元素。注意这个属性只能给父元素添加</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">flat: 默认值，<span class="number">2</span>d显示</span><br><span class="line">preserve-<span class="number">3</span>d: <span class="number">3</span>d显示</span><br></pre></td></tr></table></figure>

<p>transform-style 与 perspective 区别</p>
<ul>
<li>透视：透视只是相当于设置了一个距离，辅助我们查看 3D 效果的工具</li>
<li>preserve-3d：给父盒子添加，让子元素保留 3D 的位置，说白了，只有设置了 preserve-3d，这个元素才能被称之为 3d 元素</li>
<li>一个 3d 元素可以没有 perspective，但是不能没有 transform-style</li>
</ul>
<p>【3D 导航案例.html】</p>
<p>【切割轮播图案例】</p>
<p>【3D 相册案例】</p>
<h3 id="过渡结束事件"><a href="#过渡结束事件" class="headerlink" title="过渡结束事件"></a>过渡结束事件</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 给最后一个ul添加过渡结束事件（节流阀）</span></span><br><span class="line">uls[uls.<span class="property">length</span> - <span class="number">1</span>].<span class="title function_">addEventListener</span>(<span class="string">&#x27;transitionend&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  isCanAnimate = <span class="literal">true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h2><blockquote>
<p>动画可以通过设置多个节点来精确控制一个或者一组动画，常用来实现复杂的动画效果</p>
</blockquote>
<p>动画与过渡的区别：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">过渡必须触发，需要两个状态的改变。</span><br><span class="line">动画可以一直运行下去，不需要触发。实现效果与过渡差不多</span><br></pre></td></tr></table></figure>

<p>使用一个动画的基本步骤：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1.通过 @keyframes 指定动画序列</span><br><span class="line">2.通过百分比或者 from/to 将动画分割成多个节点</span><br><span class="line">3.在各个节点中分别定义样式</span><br><span class="line">4.通过 animation 将动画应用于相应的元素</span><br></pre></td></tr></table></figure>

<h3 id="animation"><a href="#animation" class="headerlink" title="animation"></a>animation</h3><p>animation 是一个复合属性，一共有 8 个参数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">animation-name: 动画名称，由@keyframes定义的</span><br><span class="line">animation-duration: 动画的持续时间 默认0s</span><br><span class="line">animation-timing-function: 动画的过渡类型 ease(默认) linear steps</span><br><span class="line">animation-delay: 动画的延迟时间 默认0s</span><br><span class="line">animation-iteration-count: 动画的循环次数 默认1次  infinite：无限循环</span><br><span class="line">animation-direction: 设置动画在循环中的方向 normal：正向(默认) reverse(反向) alternate(往复循环)</span><br><span class="line">animation-fill-mode: 设置动画结束时的状态 none：默认 backwards：动画结束时停留在开始状态 forwards: 动画结束时停留在结束的状态</span><br><span class="line">animation-play-state: 设置动画的状态。running：运动(默认) paused：暂停</span><br></pre></td></tr></table></figure>

<h3 id="动画库的使用"><a href="#动画库的使用" class="headerlink" title="动画库的使用"></a>动画库的使用</h3><p><span class="exturl" data-url="aHR0cHM6Ly9kYW5lZGVuLmdpdGh1Yi5pby9hbmltYXRlLmNzcy8=">https://daneden.github.io/animate.css/</span></p>
<h2 id="字体图标"><a href="#字体图标" class="headerlink" title="字体图标"></a>字体图标</h2><p>我们经常把网页常用的一些小的图标，做成精灵图，然后通过 background-position 去调整位置，但是这个需要引入图片，并且图片大小改变之后会失真。在 CSS3 中可以使用字体图片，即使用图标跟使用文字一样</p>
<p>优点：</p>
<p>1、将所有图标打包成字体库，减少请求</p>
<p>2、具有矢量性，可保证清晰度，可以修改文字的颜色或者样式</p>
<p>3、使用灵活，便于维护</p>
<p>阿里巴巴矢量图标：<span class="exturl" data-url="aHR0cDovL3d3dy5pY29uZm9udC5jbi8=">http://www.iconfont.cn/</span></p>
<p>Font Awesome 使用 <span class="exturl" data-url="aHR0cDovL2ZvbnRhd2Vzb21lLmRhc2hnYW1lLmNvbS8=">http://fontawesome.dashgame.com/</span></p>
<h2 id="弹性布局-伸缩布局"><a href="#弹性布局-伸缩布局" class="headerlink" title="弹性布局(伸缩布局)"></a>弹性布局(伸缩布局)</h2><blockquote>
<p>布局：其实就是调整元素在水平和垂直方向上的布局方式</p>
</blockquote>
<p>CSS3 在布局方面做了非常大的改进，使得我们对块级元素的布局排列变得十分灵活，适应性非常强，其强大的伸缩性，在响应式开中可以发挥极大的作用。</p>
<p>当给一个盒子设置了 display：flex 之后，这个盒子就有了 <strong>主轴</strong> 和 <strong>侧轴</strong> 的概念<br>主轴：默认是水平方向向右，子元素在主轴上排列<br>侧轴：与主轴垂直的轴称作侧轴，默认是垂直方向向下</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@img/img/20210102204407.png"></p>
<h3 id="给容器设置的样式"><a href="#给容器设置的样式" class="headerlink" title="给容器设置的样式"></a>给容器设置的样式</h3><ul>
<li>flex-direction</li>
</ul>
<p>用来调整主轴的方向，默认是水平方向，可选值有：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">row：主轴方向为水平向右（默认）</span><br><span class="line">column：主轴方向为竖直向下</span><br><span class="line">row-reverse: 主轴方向为水平向左</span><br><span class="line">column-reverse: 主轴方向是竖直向上</span><br></pre></td></tr></table></figure>

<ul>
<li>justify-content</li>
</ul>
<p>用来设置子元素在 <strong>主轴方向的对齐方式</strong> ，可选的值有：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">flex</span>-start: 弹性盒子元素将向起始位置对齐</span><br><span class="line">flex-end: 弹性盒子元素将向结束位置对齐</span><br><span class="line">center: 弹性盒子元素将向行中间位置对齐</span><br><span class="line">space-between: 第一个贴左边，最后一个贴右边，其他盒子均分，保证每个盒子之间的空隙是相等的</span><br><span class="line">space-around: 弹性盒子元素会平均地分布在行里（不会贴边）</span><br></pre></td></tr></table></figure>

<ul>
<li>align-items</li>
</ul>
<p>用于调整 <strong>侧轴的对其方式</strong> ，可选的值有：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">flex</span>-start：元素在侧轴的起始位置对其</span><br><span class="line"><span class="attribute">flex</span>-end：元素在侧轴的结束位置对其</span><br><span class="line">center：元素在侧轴上居中对其</span><br><span class="line">stretch：元素的高度会被拉伸到最大（不能给死高度）</span><br></pre></td></tr></table></figure>

<ul>
<li>flex-wrap</li>
</ul>
<p>控制 flex 容器是单行或者多行，默认不换行</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">nowrap：不换行（默认），会压缩子盒子的宽度</span><br><span class="line">wrap：当宽度不够的时候，会换行</span><br></pre></td></tr></table></figure>

<ul>
<li>align-content</li>
</ul>
<p>用来设置多行时侧轴的排列方式</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">flex</span>-start：各行向侧轴的起始位置堆叠</span><br><span class="line"><span class="attribute">flex</span>-end：各行向弹性盒容器的结束位置堆叠</span><br><span class="line">center：各行向弹性盒容器的中间位置堆叠</span><br><span class="line">space-between：第一行贴上边，最后一个行贴下边,其他行在弹性盒容器中平均分布</span><br><span class="line">space-around：各行在侧轴中平均分布</span><br><span class="line">stretch：拉伸，不设置高度的情况下</span><br></pre></td></tr></table></figure>

<p>align-items 与 align-content 的区别</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">align-items</span>调整的是侧轴的对其方式，不换行一般用align-itemsalign-<span class="attribute">content</span>: 必须是多行才生效，如果单行，没有效果。换行了就用 align-content;</span><br></pre></td></tr></table></figure>

<p>!&gt; 上述属性都是给父盒子设置的，这些样式影响的是所有的子元素，接下来的几个属性是给子盒子设置的，用来单独设置子元素的样式</p>
<h3 id="给子元素设置的样式"><a href="#给子元素设置的样式" class="headerlink" title="给子元素设置的样式"></a>给子元素设置的样式</h3><ul>
<li>flex</li>
</ul>
<p>用来设置子盒子如何分配主轴剩余空间</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">flex</span>: <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>order</li>
</ul>
<p>定义项目的排列顺序。数值越小，排列越靠前，默认为 0。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">order</span>: <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>align-self</li>
</ul>
<p>align-self 用于设置当前元素在侧轴的位置，是给子元素设置，优先级比 align-items 的优先级高</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">取值与 <span class="attribute">align-items</span> 的取值一样</span><br></pre></td></tr></table></figure>

<p>阮一峰的博客<span class="exturl" data-url="aHR0cDovL3d3dy5ydWFueWlmZW5nLmNvbS9ibG9nLzIwMTUvMDcvZmxleC1ncmFtbWFyLmh0bWw=">http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html</span></p>
<p>【案例：6 面神骰】</p>
<p>【案例：携程网】</p>
<p>【案例：360 浏览器】</p>
<h1 id="other"><a href="#other" class="headerlink" title="other"></a>other</h1><p>微调元素</p>
<ul>
<li>margin-top: - ;</li>
<li>transform: translateY();</li>
<li>position: relative; top: - ;</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wqdy.top/416.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="c">
      <meta itemprop="description" content="分享各类资源、经验与技巧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我全都要">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/416.html" class="post-title-link" itemprop="url">编码规范及配置 ESLint</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <date title="创建时间：2018-11-15" itemprop="dateCreated datePublished" datetime="2018-11-15T22:25:23+00:00">2018-11-15</date>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/c/frontend/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="编码规范"><a href="#编码规范" class="headerlink" title="编码规范"></a>编码规范</h1><blockquote>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FpcmJuYi9qYXZhc2NyaXB0">Airbnb JavaScript Style Guide</span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL3N0eWxlZ3VpZGUvanNndWlkZQ==">Google JavaScript Style Guide</span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3N0YW5kYXJkL3N0YW5kYXJk">JavaScript Standard Style Guide</span></p>
</blockquote>
<blockquote>
<p><span class="exturl" data-url="aHR0cHM6Ly9jbi5lc2xpbnQub3JnLw==">ESLint</span></p>
</blockquote>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzIwMjk4MzQ1L2Fuc3dlci80OTU1MTE0Mg==">JavaScript 语句后应该加分号么？</span></p>
<h2 id="Vue-ESLint-Prettier"><a href="#Vue-ESLint-Prettier" class="headerlink" title="Vue + ESLint + Prettier"></a><code>Vue + ESLint + Prettier</code></h2><p>[vue 官方风格指南(<span class="exturl" data-url="aHR0cHM6Ly9jbi52dWVqcy5vcmcvdjIvc3R5bGUtZ3VpZGUvKV0=">https://cn.vuejs.org/v2/style-guide/)]</span></p>
<h3 id="安装-node"><a href="#安装-node" class="headerlink" title="安装 node"></a>安装 <code>node</code></h3><p><span class="exturl" data-url="aHR0cHM6Ly9ub2RlanMub3JnL3poLWNuLw==">https://nodejs.org/zh-cn/</span></p>
<h3 id="配置-ESlint"><a href="#配置-ESlint" class="headerlink" title="配置 ESlint"></a>配置 <code>ESlint</code></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install eslint -g</span><br><span class="line">$ npm install eslint-plugin-html -g</span><br><span class="line"></span><br><span class="line">$ eslint -v</span><br><span class="line">$ eslint --init</span><br><span class="line"></span><br><span class="line"><span class="comment"># google 标准</span></span><br><span class="line"><span class="comment"># $ npm install eslint-config-google -g</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># airbnb 标准</span></span><br><span class="line"><span class="comment"># $ npm install eslint-config-airbnb eslint-plugin-jsx-a11y eslint-plugin-import eslint-plugin-react -g</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># standard 标准</span></span><br><span class="line">$ npm install eslint-plugin-standard eslint-config-standard eslint-plugin-node eslint-plugin-promise -g</span><br><span class="line"></span><br><span class="line"><span class="comment"># vue</span></span><br><span class="line">$ npm install eslint-plugin-vue -g</span><br><span class="line"></span><br><span class="line"><span class="comment"># es6 语法支持</span></span><br><span class="line">$ npm install babel-eslint vue-eslint-parser -g</span><br></pre></td></tr></table></figure>

<p><code>.eslintrc.json</code> 文件</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// plugin与extend的区别：extend提供的是eslint现有规则的一系列预设</span></span><br><span class="line">  <span class="comment">// 而plugin则提供了除预设之外的自定义规则，当你在eslint的规则里找不到合适的的时候</span></span><br><span class="line">  <span class="attr">&quot;extends&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;google&quot;</span><span class="punctuation">,</span> <span class="string">&quot;plugin: vue/essential&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;plugins&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;html&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;parserOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;sourceType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;module&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;rules&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;valid-jsdoc&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;require-jsdoc&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;no-var&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;vars-on-top&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eqeqeq&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;space-before-function-paren&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="string">&quot;always&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;semi&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="string">&quot;never&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;comma-dangle&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="string">&quot;never&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;linebreak-style&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="string">&quot;unix&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;no-invalid-this&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;max-len&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;prefer-const&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;arrow-parens&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;extends&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;standard&quot;</span><span class="punctuation">,</span> <span class="string">&quot;plugin:vue/essential&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// &quot;extends&quot;: [&quot;standard&quot;, &quot;plugin:vue/recommended&quot;],</span></span><br><span class="line">  <span class="attr">&quot;plugins&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;html&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;parser&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue-eslint-parser&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;parserOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;parser&quot;</span><span class="punctuation">:</span> <span class="string">&quot;babel-eslint&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;ecmaVersion&quot;</span><span class="punctuation">:</span> <span class="number">6</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;sourceType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;module&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;env&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;browser&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;node&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;rules&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;no-new&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;no-undef&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;no-unused-vars&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;space-before-function-paren&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="string">&quot;always&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eqeqeq&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;handle-callback-err&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;no-useless-escape&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;new-cap&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;vue/name-property-casing&quot;</span><span class="punctuation">:</span> <span class="number">0</span> <span class="comment">// vue</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>vscode 插件安装 <code>ESLint</code></p>
<p>vscode 配置 <code>User Settings</code></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;javascript.validate.enable&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;typescript.validate.enable&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;eslint.nodePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C:\\Program Files\\nodejs\\node.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;eslint.options&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;configFile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C:/Users/C/.vscode/.eslintrc.json&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;eslint.alwaysShowStatus&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;eslint.autoFixOnSave&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;eslint.validate&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;javascript&quot;</span><span class="punctuation">,</span> <span class="string">&quot;javascriptreact&quot;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;language&quot;</span><span class="punctuation">:</span> <span class="string">&quot;html&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;autoFix&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;language&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;autoFix&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span> <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="配置-prettier"><a href="#配置-prettier" class="headerlink" title="配置 prettier"></a>配置 prettier</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install prettier -g</span><br><span class="line">$ npm install eslint-plugin-prettier -g</span><br></pre></td></tr></table></figure>

<p>vscode 插件安装 <code>prettier</code></p>
<p>vscode 配置 <code>User Settings</code></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// 禁用默认html格式化</span></span><br><span class="line">  <span class="attr">&quot;html.format.enable&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">&quot;prettier.semi&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;prettier.singleQuote&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;prettier.jsxSingleQuote&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;prettier.eslintIntegration&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;prettier.htmlWhitespaceSensitivity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ignore&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 标签换行长度</span></span><br><span class="line">  <span class="attr">&quot;prettier.printWidth&quot;</span><span class="punctuation">:</span> <span class="number">800</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;prettier.bracketSpacing&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>vuter</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;vetur.format.defaultFormatter.js&quot;</span><span class="punctuation">:</span> <span class="string">&quot;none&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// HTML Default Formatter</span></span><br><span class="line">  <span class="attr">&quot;vetur.format.defaultFormatter.html&quot;</span><span class="punctuation">:</span> <span class="string">&quot;prettyhtml&quot;</span></span><br><span class="line">  <span class="attr">&quot;vetur.format.defaultFormatterOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;prettyhtml&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;printWidth&quot;</span><span class="punctuation">:</span> <span class="number">1000</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;singleQuote&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;wrapAttributes&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;sortAttributes&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="配置-eslint-校验-typescript"><a href="#配置-eslint-校验-typescript" class="headerlink" title="配置 eslint 校验 typescript"></a>配置 eslint 校验 typescript</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install eslint typescript @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint-config-alloy -g</span><br></pre></td></tr></table></figure>

<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0FsbG95VGVhbS9lc2xpbnQtY29uZmlnLWFsbG95Lw==">https://github.com/AlloyTeam/eslint-config-alloy/</span></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;extends&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;standard&quot;</span><span class="punctuation">,</span> <span class="string">&quot;alloy&quot;</span><span class="punctuation">,</span> <span class="string">&quot;alloy/typescript&quot;</span><span class="punctuation">,</span> <span class="string">&quot;plugin:vue/essential&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;plugins&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;html&quot;</span><span class="punctuation">,</span> <span class="string">&quot;typescript&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// &quot;parser&quot;: &quot;@typescript-eslint/parser&quot;,</span></span><br><span class="line">  <span class="attr">&quot;parserOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;parser&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@typescript-eslint/parser&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// &quot;parser&quot;: &quot;babel-eslint&quot;,</span></span><br><span class="line">    <span class="attr">&quot;ecmaVersion&quot;</span><span class="punctuation">:</span> <span class="number">6</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;sourceType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;module&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;env&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;browser&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;node&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;commonjs&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;rules&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;no-new&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;no-undef&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;no-unused-vars&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;no-var&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="string">&quot;always&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;space-before-function-paren&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="string">&quot;always&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;typescript/class-name-casing&quot;</span><span class="punctuation">:</span> <span class="number">2</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="ESLint-规则列表"><a href="#ESLint-规则列表" class="headerlink" title="ESLint 规则列表"></a>ESLint 规则列表</h2><p><code>.eslintrc.json</code> 规则值：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;off&quot;或者0    // 关闭规则关闭</span><br><span class="line">&quot;warn&quot;或者1   // 在打开的规则作为警告（不影响退出代码）</span><br><span class="line">&quot;error&quot;或者2  // 把规则作为一个错误（退出代码触发时为1</span><br></pre></td></tr></table></figure>

<p>忽略检测警告</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 忽略检测下一行</span></span><br><span class="line"><span class="comment">/* eslint-disable-next-line */</span></span><br><span class="line"><span class="comment">// 忽略当前整个文件</span></span><br><span class="line"><span class="comment">/* eslint-disable */</span></span><br><span class="line"><span class="comment">// 忽略 no-new 规则</span></span><br><span class="line"><span class="comment">/* eslint-disable no-new */</span></span><br></pre></td></tr></table></figure>

<p><span class="exturl" data-url="aHR0cHM6Ly9lc2xpbnQub3JnL2RvY3MvcnVsZXMv">规则列表 https://eslint.org/docs/rules/</span></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;rules&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;no-alert&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//禁止使用alert confirm prompt</span></span><br><span class="line">  <span class="attr">&quot;no-array-constructor&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止使用数组构造器</span></span><br><span class="line">  <span class="attr">&quot;no-bitwise&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//禁止使用按位运算符</span></span><br><span class="line">  <span class="attr">&quot;no-caller&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span><span class="comment">//禁止使用arguments.caller或arguments.callee</span></span><br><span class="line">  <span class="attr">&quot;no-catch-shadow&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止catch子句参数与外部作用域变量同名</span></span><br><span class="line">  <span class="attr">&quot;no-class-assign&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止给类赋值</span></span><br><span class="line">  <span class="attr">&quot;no-cond-assign&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止在条件表达式中使用赋值语句</span></span><br><span class="line">  <span class="attr">&quot;no-console&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止使用console</span></span><br><span class="line">  <span class="attr">&quot;no-const-assign&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止修改const声明的变量</span></span><br><span class="line">  <span class="attr">&quot;no-constant-condition&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止在条件中使用常量表达式 if(true) if(1)</span></span><br><span class="line">  <span class="attr">&quot;no-continue&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//禁止使用continue</span></span><br><span class="line">  <span class="attr">&quot;no-control-regex&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止在正则表达式中使用控制字符</span></span><br><span class="line">  <span class="attr">&quot;no-debugger&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止使用debugger</span></span><br><span class="line">  <span class="attr">&quot;no-delete-var&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//不能对var声明的变量使用delete操作符</span></span><br><span class="line">  <span class="attr">&quot;no-div-regex&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span><span class="comment">//不能使用看起来像除法的正则表达式/=foo/</span></span><br><span class="line">  <span class="attr">&quot;no-dupe-keys&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//在创建对象字面量时不允许键重复 &#123;a:1,a:1&#125;</span></span><br><span class="line">  <span class="attr">&quot;no-dupe-args&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//函数参数不能重复</span></span><br><span class="line">  <span class="attr">&quot;no-duplicate-case&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//switch中的case标签不能重复</span></span><br><span class="line">  <span class="attr">&quot;no-else-return&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//如果if语句里面有return,后面不能跟else语句</span></span><br><span class="line">  <span class="attr">&quot;no-empty&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//块语句中的内容不能为空</span></span><br><span class="line">  <span class="attr">&quot;no-empty-character-class&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//正则表达式中的[]内容不能为空</span></span><br><span class="line">  <span class="attr">&quot;no-empty-label&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止使用空label</span></span><br><span class="line">  <span class="attr">&quot;no-eq-null&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止对null使用==或!=运算符</span></span><br><span class="line">  <span class="attr">&quot;no-eval&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span><span class="comment">//禁止使用eval</span></span><br><span class="line">  <span class="attr">&quot;no-ex-assign&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止给catch语句中的异常参数赋值</span></span><br><span class="line">  <span class="attr">&quot;no-extend-native&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止扩展native对象</span></span><br><span class="line">  <span class="attr">&quot;no-extra-bind&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止不必要的函数绑定</span></span><br><span class="line">  <span class="attr">&quot;no-extra-boolean-cast&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止不必要的bool转换</span></span><br><span class="line">  <span class="attr">&quot;no-extra-parens&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止非必要的括号</span></span><br><span class="line">  <span class="attr">&quot;no-extra-semi&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止多余的冒号</span></span><br><span class="line">  <span class="attr">&quot;no-fallthrough&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span><span class="comment">//禁止switch穿透</span></span><br><span class="line">  <span class="attr">&quot;no-floating-decimal&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止省略浮点数中的0 .5 3.</span></span><br><span class="line">  <span class="attr">&quot;no-func-assign&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止重复的函数声明</span></span><br><span class="line">  <span class="attr">&quot;no-implicit-coercion&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span><span class="comment">//禁止隐式转换</span></span><br><span class="line">  <span class="attr">&quot;no-implied-eval&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止使用隐式eval</span></span><br><span class="line">  <span class="attr">&quot;no-inline-comments&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//禁止行内备注</span></span><br><span class="line">  <span class="attr">&quot;no-inner-declarations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="string">&quot;functions&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//禁止在块语句中使用声明（变量或函数）</span></span><br><span class="line">  <span class="attr">&quot;no-invalid-regexp&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止无效的正则表达式</span></span><br><span class="line">  <span class="attr">&quot;no-invalid-this&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止无效的this，只能用在构造器，类，对象字面量</span></span><br><span class="line">  <span class="attr">&quot;no-irregular-whitespace&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//不能有不规则的空格</span></span><br><span class="line">  <span class="attr">&quot;no-iterator&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止使用__iterator__ 属性</span></span><br><span class="line">  <span class="attr">&quot;no-label-var&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//label名不能与var声明的变量名相同</span></span><br><span class="line">  <span class="attr">&quot;no-labels&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止标签声明</span></span><br><span class="line">  <span class="attr">&quot;no-lone-blocks&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止不必要的嵌套块</span></span><br><span class="line">  <span class="attr">&quot;no-lonely-if&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止else语句内只有if语句</span></span><br><span class="line">  <span class="attr">&quot;no-loop-func&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span><span class="comment">//禁止在循环中使用函数（如果没有引用外部变量不形成闭包就可以）</span></span><br><span class="line">  <span class="attr">&quot;no-mixed-requires&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="keyword">false</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//声明时不能混用声明类型</span></span><br><span class="line">  <span class="attr">&quot;no-mixed-spaces-and-tabs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="keyword">false</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//禁止混用tab和空格</span></span><br><span class="line">  <span class="attr">&quot;linebreak-style&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="string">&quot;windows&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//换行风格</span></span><br><span class="line">  <span class="attr">&quot;no-multi-spaces&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span><span class="comment">//不能用多余的空格</span></span><br><span class="line">  <span class="attr">&quot;no-multi-str&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//字符串不能用\换行</span></span><br><span class="line">  <span class="attr">&quot;no-multiple-empty-lines&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span><span class="attr">&quot;max&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//空行最多不能超过2行</span></span><br><span class="line">  <span class="attr">&quot;no-native-reassign&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//不能重写native对象</span></span><br><span class="line">  <span class="attr">&quot;no-negated-in-lhs&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//in 操作符的左边不能有!</span></span><br><span class="line">  <span class="attr">&quot;no-nested-ternary&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//禁止使用嵌套的三目运算</span></span><br><span class="line">  <span class="attr">&quot;no-new&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span><span class="comment">//禁止在使用new构造一个实例后不赋值</span></span><br><span class="line">  <span class="attr">&quot;no-new-func&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span><span class="comment">//禁止使用new Function</span></span><br><span class="line">  <span class="attr">&quot;no-new-object&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止使用new Object()</span></span><br><span class="line">  <span class="attr">&quot;no-new-require&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止使用new require</span></span><br><span class="line">  <span class="attr">&quot;no-new-wrappers&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止使用new创建包装实例，new String new Boolean new Number</span></span><br><span class="line">  <span class="attr">&quot;no-obj-calls&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//不能调用内置的全局对象，比如Math() JSON()</span></span><br><span class="line">  <span class="attr">&quot;no-octal&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止使用八进制数字</span></span><br><span class="line">  <span class="attr">&quot;no-octal-escape&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止使用八进制转义序列</span></span><br><span class="line">  <span class="attr">&quot;no-param-reassign&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止给参数重新赋值</span></span><br><span class="line">  <span class="attr">&quot;no-path-concat&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//node中不能使用__dirname或__filename做路径拼接</span></span><br><span class="line">  <span class="attr">&quot;no-plusplus&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//禁止使用++，--</span></span><br><span class="line">  <span class="attr">&quot;no-process-env&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//禁止使用process.env</span></span><br><span class="line">  <span class="attr">&quot;no-process-exit&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//禁止使用process.exit()</span></span><br><span class="line">  <span class="attr">&quot;no-proto&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止使用__proto__属性</span></span><br><span class="line">  <span class="attr">&quot;no-redeclare&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止重复声明变量</span></span><br><span class="line">  <span class="attr">&quot;no-regex-spaces&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止在正则表达式字面量中使用多个空格 /foo bar/</span></span><br><span class="line">  <span class="attr">&quot;no-restricted-modules&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//如果禁用了指定模块，使用就会报错</span></span><br><span class="line">  <span class="attr">&quot;no-return-assign&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span><span class="comment">//return 语句中不能有赋值表达式</span></span><br><span class="line">  <span class="attr">&quot;no-script-url&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//禁止使用javascript:void(0)</span></span><br><span class="line">  <span class="attr">&quot;no-self-compare&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//不能比较自身</span></span><br><span class="line">  <span class="attr">&quot;no-sequences&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//禁止使用逗号运算符</span></span><br><span class="line">  <span class="attr">&quot;no-shadow&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//外部作用域中的变量不能与它所包含的作用域中的变量或参数同名</span></span><br><span class="line">  <span class="attr">&quot;no-shadow-restricted-names&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//严格模式中规定的限制标识符不能作为声明时的变量名使用</span></span><br><span class="line">  <span class="attr">&quot;no-spaced-func&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//函数调用时 函数名与()之间不能有空格</span></span><br><span class="line">  <span class="attr">&quot;no-sparse-arrays&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止稀疏数组， [1,,2]</span></span><br><span class="line">  <span class="attr">&quot;no-sync&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//nodejs 禁止同步方法</span></span><br><span class="line">  <span class="attr">&quot;no-ternary&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//禁止使用三目运算符</span></span><br><span class="line">  <span class="attr">&quot;no-trailing-spaces&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span><span class="comment">//一行结束后面不要有空格</span></span><br><span class="line">  <span class="attr">&quot;no-this-before-super&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//在调用super()之前不能使用this或super</span></span><br><span class="line">  <span class="attr">&quot;no-throw-literal&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止抛出字面量错误 throw &quot;error&quot;;</span></span><br><span class="line">  <span class="attr">&quot;no-undef&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span><span class="comment">//不能有未定义的变量</span></span><br><span class="line">  <span class="attr">&quot;no-undef-init&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//变量初始化时不能直接给它赋值为undefined</span></span><br><span class="line">  <span class="attr">&quot;no-undefined&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//不能使用undefined</span></span><br><span class="line">  <span class="attr">&quot;no-unexpected-multiline&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//避免多行表达式</span></span><br><span class="line">  <span class="attr">&quot;no-underscore-dangle&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span><span class="comment">//标识符不能以_开头或结尾</span></span><br><span class="line">  <span class="attr">&quot;no-unneeded-ternary&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止不必要的嵌套 var isYes = answer === 1 ? true : false;</span></span><br><span class="line">  <span class="attr">&quot;no-unreachable&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//不能有无法执行的代码</span></span><br><span class="line">  <span class="attr">&quot;no-unused-expressions&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止无用的表达式</span></span><br><span class="line">  <span class="attr">&quot;no-unused-vars&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span><span class="attr">&quot;vars&quot;</span><span class="punctuation">:</span> <span class="string">&quot;all&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="string">&quot;after-used&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//不能有声明后未被使用的变量或参数</span></span><br><span class="line">  <span class="attr">&quot;no-use-before-define&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//未定义前不能使用</span></span><br><span class="line">  <span class="attr">&quot;no-useless-call&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止不必要的call和apply</span></span><br><span class="line">  <span class="attr">&quot;no-void&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁用void操作符</span></span><br><span class="line">  <span class="attr">&quot;no-var&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//禁用var，用let和const代替</span></span><br><span class="line">  <span class="attr">&quot;no-warning-comments&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;terms&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;todo&quot;</span><span class="punctuation">,</span> <span class="string">&quot;fixme&quot;</span><span class="punctuation">,</span> <span class="string">&quot;xxx&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="attr">&quot;location&quot;</span><span class="punctuation">:</span> <span class="string">&quot;start&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//不能有警告备注</span></span><br><span class="line">  <span class="attr">&quot;no-with&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁用with</span></span><br><span class="line">  <span class="attr">&quot;array-bracket-spacing&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="string">&quot;never&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//是否允许非空数组里面有多余的空格</span></span><br><span class="line">  <span class="attr">&quot;arrow-parens&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//箭头函数用小括号括起来</span></span><br><span class="line">  <span class="attr">&quot;arrow-spacing&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//=&gt;的前/后括号</span></span><br><span class="line">  <span class="attr">&quot;accessor-pairs&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//在对象中使用getter/setter</span></span><br><span class="line">  <span class="attr">&quot;block-scoped-var&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//块语句中使用var</span></span><br><span class="line">  <span class="attr">&quot;brace-style&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span> <span class="string">&quot;1tbs&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//大括号风格</span></span><br><span class="line">  <span class="attr">&quot;callback-return&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span><span class="comment">//避免多次调用回调什么的</span></span><br><span class="line">  <span class="attr">&quot;camelcase&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//强制驼峰法命名</span></span><br><span class="line">  <span class="attr">&quot;comma-dangle&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="string">&quot;never&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//对象字面量项尾不能有逗号</span></span><br><span class="line">  <span class="attr">&quot;comma-spacing&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//逗号前后的空格</span></span><br><span class="line">  <span class="attr">&quot;comma-style&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="string">&quot;last&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//逗号风格，换行时在行首还是行尾</span></span><br><span class="line">  <span class="attr">&quot;complexity&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="number">11</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//循环复杂度</span></span><br><span class="line">  <span class="attr">&quot;computed-property-spacing&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="string">&quot;never&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//是否允许计算后的键名什么的</span></span><br><span class="line">  <span class="attr">&quot;consistent-return&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//return 后面是否允许省略</span></span><br><span class="line">  <span class="attr">&quot;consistent-this&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="string">&quot;that&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//this别名</span></span><br><span class="line">  <span class="attr">&quot;constructor-super&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//非派生类不能调用super，派生类必须调用super</span></span><br><span class="line">  <span class="attr">&quot;curly&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="string">&quot;all&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//必须使用 if()&#123;&#125; 中的&#123;&#125;</span></span><br><span class="line">  <span class="attr">&quot;default-case&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//switch语句最后必须有default</span></span><br><span class="line">  <span class="attr">&quot;dot-location&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//对象访问符的位置，换行的时候在行首还是行尾</span></span><br><span class="line">  <span class="attr">&quot;dot-notation&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;allowKeywords&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span> <span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//避免不必要的方括号</span></span><br><span class="line">  <span class="attr">&quot;eol-last&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//文件以单一的换行符结束</span></span><br><span class="line">  <span class="attr">&quot;eqeqeq&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//必须使用全等</span></span><br><span class="line">  <span class="attr">&quot;func-names&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//函数表达式必须有名字</span></span><br><span class="line">  <span class="attr">&quot;func-style&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="string">&quot;declaration&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//函数风格，规定只能使用函数声明/函数表达式</span></span><br><span class="line">  <span class="attr">&quot;generator-star-spacing&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//生成器函数*的前后空格</span></span><br><span class="line">  <span class="attr">&quot;guard-for-in&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//for in循环要用if语句过滤</span></span><br><span class="line">  <span class="attr">&quot;handle-callback-err&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//nodejs 处理错误</span></span><br><span class="line">  <span class="attr">&quot;id-length&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//变量名长度</span></span><br><span class="line">  <span class="attr">&quot;indent&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//缩进风格</span></span><br><span class="line">  <span class="attr">&quot;init-declarations&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//声明时必须赋初值</span></span><br><span class="line">  <span class="attr">&quot;key-spacing&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;beforeColon&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span> <span class="attr">&quot;afterColon&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span> <span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//对象字面量中冒号的前后空格</span></span><br><span class="line">  <span class="attr">&quot;lines-around-comment&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//行前/行后备注</span></span><br><span class="line">  <span class="attr">&quot;max-depth&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//嵌套块深度</span></span><br><span class="line">  <span class="attr">&quot;max-len&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="number">80</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//字符串最大长度</span></span><br><span class="line">  <span class="attr">&quot;max-nested-callbacks&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//回调嵌套深度</span></span><br><span class="line">  <span class="attr">&quot;max-params&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//函数最多只能有3个参数</span></span><br><span class="line">  <span class="attr">&quot;max-statements&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//函数内最多有几个声明</span></span><br><span class="line">  <span class="attr">&quot;new-cap&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//函数名首行大写必须使用new方式调用，首行小写必须用不带new方式调用</span></span><br><span class="line">  <span class="attr">&quot;new-parens&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//new时必须加小括号</span></span><br><span class="line">  <span class="attr">&quot;newline-after-var&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//变量声明后是否需要空一行</span></span><br><span class="line">  <span class="attr">&quot;object-curly-spacing&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="string">&quot;never&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//大括号内是否允许不必要的空格</span></span><br><span class="line">  <span class="attr">&quot;object-shorthand&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//强制对象字面量缩写语法</span></span><br><span class="line">  <span class="attr">&quot;one-var&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span><span class="comment">//连续声明</span></span><br><span class="line">  <span class="attr">&quot;operator-assignment&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="string">&quot;always&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//赋值运算符 += -=什么的</span></span><br><span class="line">  <span class="attr">&quot;operator-linebreak&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="string">&quot;after&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//换行时运算符在行尾还是行首</span></span><br><span class="line">  <span class="attr">&quot;padded-blocks&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//块语句内行首行尾是否要空行</span></span><br><span class="line">  <span class="attr">&quot;prefer-const&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//首选const</span></span><br><span class="line">  <span class="attr">&quot;prefer-spread&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//首选展开运算</span></span><br><span class="line">  <span class="attr">&quot;prefer-reflect&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//首选Reflect的方法</span></span><br><span class="line">  <span class="attr">&quot;quotes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span> <span class="string">&quot;single&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//引号类型 `` &quot;&quot; &#x27;&#x27;</span></span><br><span class="line">  <span class="attr">&quot;quote-props&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="string">&quot;always&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//对象字面量中的属性名是否强制双引号</span></span><br><span class="line">  <span class="attr">&quot;radix&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//parseInt必须指定第二个参数</span></span><br><span class="line">  <span class="attr">&quot;id-match&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//命名检测</span></span><br><span class="line">  <span class="attr">&quot;require-yield&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//生成器函数必须有yield</span></span><br><span class="line">  <span class="attr">&quot;semi&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="string">&quot;always&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//语句强制分号结尾</span></span><br><span class="line">  <span class="attr">&quot;semi-spacing&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span><span class="attr">&quot;before&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span> <span class="attr">&quot;after&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//分号前后空格</span></span><br><span class="line">  <span class="attr">&quot;sort-vars&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//变量声明时排序</span></span><br><span class="line">  <span class="attr">&quot;space-after-keywords&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="string">&quot;always&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//关键字后面是否要空一格</span></span><br><span class="line">  <span class="attr">&quot;space-before-blocks&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="string">&quot;always&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//不以新行开始的块&#123;前面要不要有空格</span></span><br><span class="line">  <span class="attr">&quot;space-before-function-paren&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="string">&quot;always&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//函数定义时括号前面要不要有空格</span></span><br><span class="line">  <span class="attr">&quot;space-in-parens&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="string">&quot;never&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//小括号里面要不要有空格</span></span><br><span class="line">  <span class="attr">&quot;space-infix-ops&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//中缀操作符周围要不要有空格</span></span><br><span class="line">  <span class="attr">&quot;space-return-throw-case&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//return throw case后面要不要加空格</span></span><br><span class="line">  <span class="attr">&quot;space-unary-ops&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">0</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;words&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span> <span class="attr">&quot;nonwords&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span> <span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//一元运算符的前/后要不要加空格</span></span><br><span class="line">  <span class="attr">&quot;spaced-comment&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//注释风格要不要有空格什么的</span></span><br><span class="line">  <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//使用严格模式</span></span><br><span class="line">  <span class="attr">&quot;use-isnan&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//禁止比较时使用NaN，只能用isNaN()</span></span><br><span class="line">  <span class="attr">&quot;valid-jsdoc&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//jsdoc规则</span></span><br><span class="line">  <span class="attr">&quot;valid-typeof&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//必须使用合法的typeof的值</span></span><br><span class="line">  <span class="attr">&quot;vars-on-top&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span><span class="comment">//var必须放在作用域顶部</span></span><br><span class="line">  <span class="attr">&quot;wrap-iife&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="string">&quot;inside&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//立即执行函数表达式的小括号风格</span></span><br><span class="line">  <span class="attr">&quot;wrap-regex&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span><span class="comment">//正则表达式字面量用小括号包起来</span></span><br><span class="line">  <span class="attr">&quot;yoda&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span> <span class="string">&quot;never&quot;</span><span class="punctuation">]</span><span class="comment">//禁止尤达条件</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wqdy.top/1646.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="c">
      <meta itemprop="description" content="分享各类资源、经验与技巧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我全都要">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/1646.html" class="post-title-link" itemprop="url">ajax 笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <date title="创建时间：2018-11-03" itemprop="dateCreated datePublished" datetime="2018-11-03T14:32:32+00:00">2018-11-03</date>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/c/frontend/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>我们使用 php 动态渲染页面时，有很多比较麻烦的地方。</p>
<ul>
<li>在前端写好页面以后，需要后台进行修改，意味这后端程序员也需要懂前端的知识，其实渲染的工作应该交给前端来做。</li>
<li>前端没有写好页面的话，后端无法开始工作，需要等待前端的页面完成之后才能开始工作，拖延项目的进度。</li>
<li>这种渲染，属于同步渲染，先获取数据, 如果数据获取的慢了, 会严重影响整个页面渲染速度, 且数据更新需要页面刷新</li>
</ul>
<h1 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h1><blockquote>
<p>即 Asynchronous [e’sɪŋkrənəs] Javascript And XML， AJAX 不是一门新的语言，而是对现有技术的综合利用。 本质是在 HTTP 协议的基础上以异步的方式与服务器进行通信</p>
</blockquote>
<h2 id="同步与异步"><a href="#同步与异步" class="headerlink" title="同步与异步"></a>同步与异步</h2><p><strong>同步和异步概念：</strong></p>
<p>同步：指的就是事情要一件一件做。等做完前一件才能做后一件任务</p>
<p>异步：不受当前任务的影响，两件事情同时进行，做一件事情时，不影响另一件事情的进行</p>
<p>编程中：异步程序代码执行时不会阻塞其它程序代码执行，从而提升整体执行效率</p>
<p><strong>网页异步应用：</strong></p>
<ol>
<li>验证你的用户名是否已经存在（一边输入，一边获取你的信息，和后台比对）。</li>
<li>百度搜索提示，及相关内容展示（一边输入，一边找出了你可能要的内容）。</li>
<li>新浪微博评论（异步加载）。</li>
</ol>
<p>XMLHttpRequest 可以以异步方式的请求数据处理程序, 可实现对网页的部分更新， 而不是刷新整个页面</p>
<h2 id="XMLHttpRequest-对象"><a href="#XMLHttpRequest-对象" class="headerlink" title="XMLHttpRequest 对象"></a>XMLHttpRequest 对象</h2><blockquote>
<p>浏览器内建对象，用于与服务器通信(交换数据) ， 由此我们便可实现对网页的部分更新，而不是刷新整个页面。这个请求是异步的，即在往服务器发送请求时，并不会阻碍程序的运行，浏览器会继续渲染后续的结构。</p>
</blockquote>
<h3 id="发送-get-请求"><a href="#发送-get-请求" class="headerlink" title="发送 get 请求"></a>发送 get 请求</h3><p>XMLHttpRequest 以异步的方式发送 HTTP 请求，因此在发送请求时，一样需要遵循 HTTP 协议。</p>
<p><strong>使用 XMLHttpRequest 发送 get 请求的步骤</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 创建一个 XMLHttpRequest 对象</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 设置请求行</span></span><br><span class="line"><span class="comment">// 第一个参数:请求方式  get/post</span></span><br><span class="line"><span class="comment">// 第二个参数:请求的地址 需要在url后面拼上参数列表</span></span><br><span class="line"><span class="comment">// 第三个参数：true 为异步，false为同步，默认为true，设为false没有意义</span></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;01.php?name=zs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 设置请求头(get不用设置)</span></span><br><span class="line"><span class="comment">// 请求头中可以设置 Content-Type,用以说明请求主体的内容是如何编码</span></span><br><span class="line"><span class="comment">// get 请求时没有请求体,无需设置请求头</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 设置请求体</span></span><br><span class="line"><span class="comment">// get 请求的请求体为空,因为参数列表拼接到 url 后面了</span></span><br><span class="line">xhr.<span class="title function_">send</span>(<span class="literal">null</span>) <span class="comment">// 参数为 null 或什么都不写</span></span><br></pre></td></tr></table></figure>

<p>注意点 :</p>
<ul>
<li>get 请求，设置请求行时，需要把参数列表拼接到 url 后面</li>
<li>get 请求不用设置请求头，不用说明请求主体的编码方式</li>
<li>get 请求的请求体为 null</li>
</ul>
<h3 id="发送-post-请求"><a href="#发送-post-请求" class="headerlink" title="发送 post 请求"></a>发送 post 请求</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 创建一个 XMLHttpRequest 对象</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 设置请求行 post请求的参数列表在请求体</span></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;post&#x27;</span>, <span class="string">&#x27;02.php&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 设置请求头, post 请求必须要设置 content-type, 标记请求体内容的解析方式</span></span><br><span class="line"><span class="comment">// 如果不设置请求头,请求能够发送出去，但是后端无法解析获取数据</span></span><br><span class="line">xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 设置请求体</span></span><br><span class="line">xhr.<span class="title function_">send</span>(<span class="string">&#x27;name=Jepson&amp;age=18&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>注意点 :</p>
<ul>
<li>post 请求，设置请求行时，不拼接参数列表</li>
<li>post 必须设置请求头中的 content-type 为 <code>application/x-www-form-urlencoded</code>， 标记请求体解析方式</li>
<li>post 请求需要将参数列表设置到请求体中</li>
</ul>
<h3 id="获取响应-readyState"><a href="#获取响应-readyState" class="headerlink" title="获取响应 readyState"></a>获取响应 readyState</h3><p><code>readyState</code>：记录了 XMLHttpRequest 对象的当前状态</p>
<p>readyState 有五种可能的值：</p>
<ul>
<li>xhr.readyState &#x3D; 0 时，UNSENT open 尚未调用</li>
<li>xhr.readyState &#x3D; 1 时，OPENED open 已调用</li>
<li>xhr.readyState &#x3D; 2 时，HEADERS_RECEIVED 接收到头信息</li>
<li>xhr.readyState &#x3D; 3 时，LOADING 接收到响应主体</li>
<li><code>xhr.readyState = 4</code> 时，DONE 响应完成</li>
</ul>
<p>HTTP 响应分为 3 个部分，状态行、响应头、响应体。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 给xhr注册一个 onreadystatechange 事件，当 xhr 的状态发生状态发生改变时，会触发这个事件。</span></span><br><span class="line"><span class="comment">// onreadystatechange 只会监听 2， 3， 4 的状态变化</span></span><br><span class="line">xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">readyState</span>)</span><br><span class="line">  <span class="keyword">if</span> (xhr.<span class="property">readyState</span> == <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="comment">//1. 获取状态行</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;状态行:&#x27;</span> + xhr.<span class="property">status</span>) <span class="comment">// 成功返回 200</span></span><br><span class="line">    <span class="keyword">if</span> (xhr.<span class="property">status</span> == <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="comment">//2. 获取响应头</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;所有的响应头:&#x27;</span> + xhr.<span class="title function_">getAllResponseHeaders</span>())</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;指定响应头:&#x27;</span> + xhr.<span class="title function_">getResponseHeader</span>(<span class="string">&#x27;content-type&#x27;</span>))</span><br><span class="line">      <span class="comment">//3. 获取响应体</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">responseText</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><p>【判断用户名是否存在】</p>
<p>【用户登录案例】</p>
<p>【聊天机器人案例】</p>
<h2 id="数据交互"><a href="#数据交互" class="headerlink" title="数据交互"></a>数据交互</h2><blockquote>
<p>浏览器端只是负责用户的交互和数据的收集以及展示，真正的数据都是存储在服务器端的。</p>
<p>我们现在通过 ajax 的确可以返回一些简单的数据（一个字符串），但是在实际开发过程中，肯定会会设计到大量的复杂类型的数据传输，比如数组、对象等，但是每个编程语言的语法都不一样。</p>
<p>因此我们会采用通过的数据交换格式（ <code>XML</code> 、<code>JSON</code> ）来进行数据的交互。</p>
</blockquote>
<h3 id="XML-了解即可"><a href="#XML-了解即可" class="headerlink" title="XML(了解即可)"></a>XML(了解即可)</h3><p><strong>什么是 XML</strong></p>
<ul>
<li>XML 指可扩展标记语言（EXtensible Markup Language）</li>
<li>XML 是一种标记语言，很类似 HTML</li>
<li>XML 的设计宗旨是传输数据，而非显示数据</li>
<li>XML 标签没有被预定义。您需要自行定义标签。</li>
</ul>
<p><strong>语法规范</strong></p>
<ul>
<li>第一行必须是版本信息</li>
<li>必须有一个根元素（有且仅有一个）</li>
<li>标签不可有空格、不可以数字或 . 开头、大小写敏感</li>
<li>不可交叉嵌套，都是双标签，如果是单标签，必须闭合</li>
<li>属性双引号（浏览器自动修正成双引号了）</li>
<li>特殊符号要使用实体</li>
<li>注释和 HTML 一样</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">students</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">student</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>张三<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">age</span>&gt;</span>18<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gender</span>&gt;</span>男<span class="tag">&lt;/<span class="name">gender</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">desc</span>&gt;</span>路人甲<span class="tag">&lt;/<span class="name">desc</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">student</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">student</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>李四<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">age</span>&gt;</span>20<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gender</span>&gt;</span>男<span class="tag">&lt;/<span class="name">gender</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">desc</span>&gt;</span>路人乙<span class="tag">&lt;/<span class="name">desc</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">student</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">students</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>php 获取 xml 文件的内容</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 注意: 如果需要返回 xml 数据, 需要将 content-type 改成 text/xml, 不然浏览器以 text/html 解析</span></span><br><span class="line"><span class="title function_ invoke__">header</span>( <span class="string">&#x27;content-type:text/xml;charset=utf-8&#x27;</span> );</span><br><span class="line"><span class="comment">// file_get_content 用于获取文件的内容</span></span><br><span class="line"><span class="comment">// 参数: 文件的路径</span></span><br><span class="line"><span class="variable">$result</span> = <span class="title function_ invoke__">file_get_content</span>( <span class="string">&quot;data.xml&quot;</span> );</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$result</span>;</span><br></pre></td></tr></table></figure>

<p><strong>js 解析 xml</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取服务端返回的 xml 数据，需要使用 xhr.responseXML，这是一个 document 对象，可以使用 DOM 中的方法查找元素。</span></span><br><span class="line"><span class="keyword">var</span> data = xhr.<span class="property">responseXML</span></span><br><span class="line"><span class="comment">// 获取所有的学生</span></span><br><span class="line"><span class="keyword">var</span> students = data.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;student&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>缺点：虽然可以描述和传输复杂数据，但是其解析过于复杂, 并且体积较大，所以实现开发已经很少使用了</p>
<h3 id="JSON-数据"><a href="#JSON-数据" class="headerlink" title="JSON 数据"></a>JSON 数据</h3><p><code>JSON</code> (JavaScript Object Notation, JS 对象标记) 是一种轻量级的数据交换格式。它基于 ECMAScript 规范，采用独立于编程语言的文本格式来存储和表示数据</p>
<ul>
<li>数据在键值对中</li>
<li>数据由逗号分隔(最后一个 键值对不能带逗号)</li>
<li>花括号保存对象，方括号保存数组</li>
<li>键和值使用双引号</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">a</span>: <span class="string">&#x27;Hello&#x27;</span>, <span class="attr">b</span>: <span class="string">&#x27;World&#x27;</span> &#125; <span class="comment">// 这是一个对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 这是一个 JSON 字符串，本质是一个字符串</span></span><br><span class="line"><span class="keyword">var</span> json = <span class="string">&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>JSON 数据在不同语言进行传输时，类型为字符串，不同的语言各自也都对应有解析方法，解析完成后就能很方便的使用了</strong></p>
<h4 id="php-处理-json"><a href="#php-处理-json" class="headerlink" title="php 处理 json"></a>php 处理 json</h4><ul>
<li>php 关联数组 &#x3D;&#x3D;&gt; json ( json_encode )</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// php的关联数组</span></span><br><span class="line"><span class="variable">$obj</span> = <span class="keyword">array</span>(</span><br><span class="line">  <span class="string">&quot;a&quot;</span> =&gt; <span class="string">&quot;hello&quot;</span>,</span><br><span class="line">  <span class="string">&quot;b&quot;</span> =&gt; <span class="string">&quot;world&quot;</span>,</span><br><span class="line">  <span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;鹏鹏&quot;</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">// json字符串</span></span><br><span class="line"><span class="variable">$json</span> = <span class="title function_ invoke__">json_encode</span>( <span class="variable">$obj</span> );</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$json</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>json &#x3D;&#x3D;&gt; php 对象&#x2F;关联数组 ( json_decode )</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$json</span> = <span class="string">&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span>; <span class="comment">// json字符串</span></span><br><span class="line"><span class="comment">// 第一个参数：json字符串</span></span><br><span class="line"><span class="comment">// 第二个参数：</span></span><br><span class="line"><span class="comment">// false，将json转换成对象(默认)</span></span><br><span class="line"><span class="comment">// true：将json转换成数组(推荐)</span></span><br><span class="line"><span class="variable">$obj</span> = <span class="title function_ invoke__">json_decode</span>(<span class="variable">$json</span>,<span class="literal">true</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$obj</span>[<span class="string">&#x27;a&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过json文件获取到的内容就是一个json字符串。</span></span><br><span class="line"><span class="variable">$data</span> = <span class="title function_ invoke__">file_get_contents</span>(<span class="string">&quot;data.json&quot;</span>);</span><br><span class="line"><span class="comment">// 将json转换成数组</span></span><br><span class="line"><span class="variable">$result</span> = <span class="title function_ invoke__">json_decode</span>(<span class="variable">$data</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$result</span>);</span><br></pre></td></tr></table></figure>

<h4 id="JS-处理-json"><a href="#JS-处理-json" class="headerlink" title="JS 处理 json"></a>JS 处理 json</h4><ul>
<li><code>JSON.stringify(obj)</code> ：JS 对象 &#x3D;&#x3D;&gt; JSON 字符串</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">a</span>: <span class="string">&#x27;Hello&#x27;</span>, <span class="attr">b</span>: <span class="string">&#x27;World&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">var</span> result = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj) <span class="comment">// &#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>JSON.parse(obj)</code> ：JSON 字符串 &#x3D;&#x3D;&gt; JS 对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> json = <span class="string">&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(json) <span class="comment">// &#123;a: &#x27;Hello&#x27;, b: &#x27;World&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<p>【案例：获取表格数据.html】</p>
<h2 id="兼容性处理-了解-不用处理"><a href="#兼容性处理-了解-不用处理" class="headerlink" title="兼容性处理 (了解, 不用处理)"></a>兼容性处理 (了解, 不用处理)</h2><p>现在一般最多兼容到 IE8, 这里以后见到了知道是在处理兼容性就行了</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="literal">null</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title class_">XMLHttpRequest</span>) &#123;</span><br><span class="line">  <span class="comment">//现代浏览器 IE7+</span></span><br><span class="line">  xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">//老版本的 Internet Explorer （IE5 和 IE6）使用 ActiveX 对象：</span></span><br><span class="line">  xmlHttp = <span class="keyword">new</span> <span class="title class_">ActiveXObject</span>(<span class="string">&#x27;Microsoft.XMLHTTP&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="封装-ajax-工具函数"><a href="#封装-ajax-工具函数" class="headerlink" title="封装 ajax 工具函数"></a>封装 ajax 工具函数</h2><blockquote>
<p>每次发送 ajax 请求，其实步骤都是一样的，重复了大量代码，我们完全可以封装成一个工具函数</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1. 创建xhr对象</span></span><br><span class="line"><span class="comment">//2. 设置请求行</span></span><br><span class="line"><span class="comment">//3. 设置请求头</span></span><br><span class="line"><span class="comment">//3. 设置请求体</span></span><br><span class="line"><span class="comment">//4. 监听响应状态</span></span><br><span class="line"><span class="comment">//5. 获取响应内容</span></span><br></pre></td></tr></table></figure>

<h3 id="参数提取"><a href="#参数提取" class="headerlink" title="参数提取"></a>参数提取</h3><table>
<thead>
<tr>
<th>参数名</th>
<th>参数类型</th>
<th>描述</th>
<th>传值</th>
<th>默认值</th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td>string</td>
<td>请求方式</td>
<td>get&#x2F;post</td>
<td>只要不传 post，就是 get</td>
</tr>
<tr>
<td>url</td>
<td>string</td>
<td>请求地址</td>
<td>接口地址</td>
<td>如果不传地址，不发送请求</td>
</tr>
<tr>
<td>async</td>
<td>boolean</td>
<td>是否异步</td>
<td>true&#x2F;fase</td>
<td>只要不传 false，那就是 true，异步请求</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求数据</td>
<td><code>&#123;key:value,key1:value2&#125;</code></td>
<td>需要把这个对象拼接成参数的格式 uname&#x3D;hucc&amp;upass&#x3D;12345</td>
</tr>
<tr>
<td>dataType</td>
<td>string</td>
<td>返回的数据类型</td>
<td>xml&#x2F;json&#x2F;text</td>
<td>text</td>
</tr>
<tr>
<td>success</td>
<td>function</td>
<td>响应成功时调用</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>error</td>
<td>function</td>
<td>响应失败时调用</td>
<td>-</td>
<td>-</td>
</tr>
</tbody></table>
<h3 id="参数检测"><a href="#参数检测" class="headerlink" title="参数检测"></a>参数检测</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 要求参数obj必须传递，否则直接不发送请求</span></span><br><span class="line"><span class="keyword">if</span> (!obj || <span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 如果type传递的是post，那就发送post请求，否则发送get请求</span></span><br><span class="line"><span class="keyword">var</span> type = obj.<span class="property">type</span> == <span class="string">&#x27;post&#x27;</span> ? <span class="string">&#x27;post&#x27;</span> : <span class="string">&#x27;get&#x27;</span></span><br><span class="line"><span class="keyword">var</span> url = obj.<span class="property">url</span></span><br><span class="line"><span class="keyword">if</span> (!url) &#123;</span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 只有当async传递了false，才会发送同步请求，不然只发送异步请求</span></span><br><span class="line"><span class="keyword">var</span> <span class="keyword">async</span> = obj.<span class="property">async</span> == <span class="literal">false</span> ? <span class="literal">false</span> : <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h3 id="完整版本"><a href="#完整版本" class="headerlink" title="完整版本"></a>完整版本</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> $ = &#123;</span><br><span class="line">  <span class="attr">ajax</span>: <span class="keyword">function</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="comment">// 如果options参数没有传递，直接返回。</span></span><br><span class="line">    <span class="keyword">if</span> (!options || <span class="keyword">typeof</span> options !== <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 处理默认参数</span></span><br><span class="line">    <span class="comment">// 如果参数不是post，那就默认为get</span></span><br><span class="line">    <span class="keyword">var</span> type = options.<span class="property">type</span> === <span class="string">&#x27;post&#x27;</span> ? <span class="string">&#x27;post&#x27;</span> : <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    <span class="comment">// 如果没有传url，直接返回</span></span><br><span class="line">    <span class="keyword">var</span> url = option.<span class="property">url</span></span><br><span class="line">    <span class="keyword">if</span> (!url) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 如果参数不是 false，那就默认是 true，发异步请求</span></span><br><span class="line">    <span class="keyword">var</span> <span class="keyword">async</span> = options.<span class="property">async</span> == <span class="literal">false</span> ? <span class="literal">false</span> : <span class="literal">true</span></span><br><span class="line">    <span class="comment">// 把 option.data 对象中的数据拼接成键值对的字符串</span></span><br><span class="line">    <span class="keyword">var</span> data = <span class="variable language_">this</span>.<span class="title function_">getData</span>(options.<span class="property">data</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置请求行</span></span><br><span class="line">    <span class="comment">// 如果是get请求，并且要上传参数，需要把参数拼接到url后面</span></span><br><span class="line">    <span class="keyword">if</span> (type === <span class="string">&#x27;get&#x27;</span>) &#123;</span><br><span class="line">      url += <span class="string">&#x27;?&#x27;</span> + data</span><br><span class="line">      data = <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    xhr.<span class="title function_">open</span>(type, url, <span class="keyword">async</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置请求头</span></span><br><span class="line">    <span class="keyword">if</span> (type === <span class="string">&#x27;post&#x27;</span>) &#123;</span><br><span class="line">      xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 设置请求参数</span></span><br><span class="line">    xhr.<span class="title function_">send</span>(data)</span><br><span class="line"></span><br><span class="line">    xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (xhr.<span class="property">readyState</span> == <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (xhr.<span class="property">status</span> == <span class="number">200</span>) &#123;</span><br><span class="line">          <span class="comment">//判断一下,如果dataType的值是json,就转成js对象.如果是xml,就返回dom对象,其他都是普通文本</span></span><br><span class="line">          <span class="keyword">if</span> (options.<span class="property">dateType</span> === <span class="string">&#x27;json&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> result = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(xhr.<span class="property">responseText</span>)</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (option.<span class="property">dataType</span> === <span class="string">&#x27;xml&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> result = xhr.<span class="property">responseXML</span></span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> result = xhr.<span class="property">responseText</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">/*执行成功函数*/</span></span><br><span class="line">          options.<span class="property">success</span> &amp;&amp; options.<span class="title function_">success</span>(result)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          options.<span class="property">error</span> &amp;&amp; options.<span class="title function_">error</span>()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getData</span>: <span class="keyword">function</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="comment">// 将obj对象转换成参数</span></span><br><span class="line">    <span class="comment">// 将对象转换成参数列表</span></span><br><span class="line">    <span class="keyword">if</span> (!obj || <span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> arr = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> obj) &#123;</span><br><span class="line">      arr.<span class="title function_">push</span>(k + <span class="string">&#x27;=&#x27;</span> + obj[k])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr.<span class="title function_">join</span>(<span class="string">&#x27;&amp;&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>【登录案例】</p>
<h2 id="jQuery-中的-ajax-方法"><a href="#jQuery-中的-ajax-方法" class="headerlink" title="jQuery 中的 ajax 方法"></a>jQuery 中的 ajax 方法</h2><blockquote>
<p>jQuery 为我们提供了更强大的 Ajax 封装</p>
</blockquote>
<h3 id="ajax"><a href="#ajax" class="headerlink" title="$.ajax"></a>$.ajax</h3><p>参数列表</p>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>取值</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>url</td>
<td>接口地址</td>
<td></td>
<td>url:”02.php”</td>
</tr>
<tr>
<td>type</td>
<td>请求方式</td>
<td>get&#x2F;post</td>
<td>type:”get”</td>
</tr>
<tr>
<td>timeout</td>
<td>超时时间</td>
<td>单位毫秒</td>
<td>timeout:5000</td>
</tr>
<tr>
<td>dataType</td>
<td>服务器返回的格式</td>
<td>json&#x2F;xml&#x2F;text(默认)</td>
<td>dataType:”json”</td>
</tr>
<tr>
<td>data</td>
<td>发送的请求数据</td>
<td>对象</td>
<td>data:{name:”zs”, age:18}</td>
</tr>
<tr>
<td>beforeSend</td>
<td>调用前的回调函数</td>
<td>function(){}</td>
<td>beforeSend:function(){ alert(1) }</td>
</tr>
<tr>
<td>success</td>
<td>成功的回调函数</td>
<td>function (data) {}</td>
<td>success:function (data) {}</td>
</tr>
<tr>
<td>error</td>
<td>失败的回调函数</td>
<td>function (error) {}</td>
<td>error:function(data) {}</td>
</tr>
<tr>
<td>complete</td>
<td>完成后的回调函数</td>
<td>function () {}</td>
<td>complete:function () {}</td>
</tr>
</tbody></table>
<p>使用示例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;get&#x27;</span>, <span class="comment">// 请求类型</span></span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;02.php&#x27;</span>, <span class="comment">// 请求地址</span></span><br><span class="line">  <span class="attr">data</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;, <span class="comment">// 请求数据</span></span><br><span class="line">  <span class="attr">dataType</span>: <span class="string">&#x27;json&#x27;</span>, <span class="comment">// 希望接受的数据类型</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">5000</span>, <span class="comment">// 设置超时时间</span></span><br><span class="line">  <span class="attr">beforeSend</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// alert(&quot;发送前调用&quot;);</span></span><br><span class="line">    <span class="comment">// jq的ajax方法中beforeSend函数中如果执行了return false,那么请求就不发送了</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="comment">// 如果有 dataType:&quot;json&quot;，或后台有header(content-type: text/json)，res就是已经转换好的js对象</span></span><br><span class="line">    <span class="comment">// alert(&quot;成功时调用&quot;);</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">error</span>: <span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// alert(&quot;失败时调用&quot;);</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">complete</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// alert(&quot;请求完成时调用&quot;); // 不管成功失败都会执行</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>【案例：登录案例.html】</p>
<h2 id="接口化开发"><a href="#接口化开发" class="headerlink" title="接口化开发"></a>接口化开发</h2><p>请求地址即所谓的接口，通常我们所说的接口化开发，其实是指一个接口对应一个功能， 并且严格约束了<strong>请求参数</strong> 和<strong>响应结果</strong> 的格式，这样前后端在开发过程中，可以减少不必要的讨论， 从而并行开发，可以极大的提升开发效率，另外一个好处，当网站进行改版后，服务端接口进行调整时，并不影响到前端的功能。</p>
<h3 id="获取短信验证码"><a href="#获取短信验证码" class="headerlink" title="获取短信验证码"></a>获取短信验证码</h3><p>【案例：register】</p>
<p><strong>需求文档(产品)</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">总需求：点击获取验证码按钮，向服务端发送请求, 调用服务器端短信接口, 服务器端根据传参, 调用第三方短信接口, 给手机发送验证码</span><br><span class="line"></span><br><span class="line">需求<span class="number">1</span>：格式校验</span><br><span class="line">(<span class="number">1</span>) 手机号码不能为空   如果为空提示<span class="string">&quot;手机号不能为空&quot;</span></span><br><span class="line">(<span class="number">2</span>) 手机号码格式必须正确, 提示<span class="string">&quot;请输入正确的手机号码&quot;</span></span><br><span class="line"></span><br><span class="line">需求<span class="number">2</span>：点击发送时，按钮显示为<span class="string">&quot;发送中&quot;</span>,并且不能重复提交请求</span><br><span class="line"></span><br><span class="line">需求<span class="number">3</span>：根据不同的响应结果，进行响应。</span><br><span class="line">(<span class="number">1</span>)如果接口调用成功</span><br><span class="line">  如果响应代码为<span class="number">100</span>，倒计时</span><br><span class="line">  如果响应代码为<span class="number">101</span>，提示手机号重复</span><br><span class="line">(<span class="number">2</span>)如果接口调用失败，告诉用户<span class="string">&quot;服务器繁忙，请稍候再试&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>接口文档</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">接口说明：获取短信验证码</span><br><span class="line">接口地址：getCode.<span class="property">php</span></span><br><span class="line">请求方式：get</span><br><span class="line">接口传参：mobile 手机号</span><br><span class="line">返回类型  json</span><br><span class="line">接口返回：&#123;</span><br><span class="line">			<span class="string">&quot;code&quot;</span>:<span class="string">&quot;101&quot;</span>,</span><br><span class="line">			<span class="string">&quot;msg&quot;</span>:<span class="string">&quot;手机号码存在&quot;</span>,</span><br><span class="line">			<span class="string">&quot;mobile&quot;</span>:<span class="string">&quot;18511249258&quot;</span></span><br><span class="line">		&#125;</span><br><span class="line">参数说明: code 当前业务逻辑的处理成功失败的标识  <span class="number">100</span>:成功   <span class="number">101</span>:手机号码存在</span><br><span class="line">		 msg  当前系统返回给前端提示</span><br><span class="line">		 mobile  当前的手机号码</span><br></pre></td></tr></table></figure>

<h3 id="注册接口"><a href="#注册接口" class="headerlink" title="注册接口"></a>注册接口</h3><p>【案例：register】</p>
<p><strong>表单序列化</strong> serialize</p>
<p>jquery 提供了一个<code>serialize()</code>方法序列化表单，说白就是将表单中带有 name 属性的所有参数拼成一个格式为<code>name=value&amp;name1=value1</code>这样的字符串。方便我们获取表单的数据。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// serialize 方法将表单参数序列化成一个字符串。必须指定 name 属性</span></span><br><span class="line"><span class="comment">// name=pp&amp;pass=123456&amp;repass=123456&amp;mobile=15751776629&amp;code=1234</span></span><br><span class="line">$(<span class="string">&#x27;form&#x27;</span>).<span class="title function_">serialize</span>()</span><br></pre></td></tr></table></figure>

<p>jquery 的 ajax 方法，data 参数能够直接识别表单序列化的数据</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$.<span class="title function_">post</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;register.php&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: $(<span class="string">&#x27;form&#x27;</span>).<span class="title function_">serialize</span>(),</span><br><span class="line">  <span class="attr">dataType</span>: <span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">  <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">info</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(info)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>需求文档</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">注册功能</span><br><span class="line">总需求：点击注册按钮，向服务端发送请求</span><br><span class="line"></span><br><span class="line">需求<span class="number">1</span>:表单校验</span><br><span class="line">    <span class="number">1.1</span> 用户名不能为空，否则提示<span class="string">&quot;请输入用户名&quot;</span></span><br><span class="line">    <span class="number">1.2</span> 密码不能为空，否则提示<span class="string">&quot;请输入密码&quot;</span></span><br><span class="line">    <span class="number">1.3</span> 确认密码必须与密码一直，否则提示<span class="string">&quot;确认密码与密码不一致&quot;</span></span><br><span class="line">    <span class="number">1.4</span> 手机号码不能为空，否则提示<span class="string">&quot;请输入手机号码&quot;</span>;</span><br><span class="line">    <span class="number">1.5</span> 手机号码格式必须正确，否则提示<span class="string">&quot;手机号格式错误&quot;</span></span><br><span class="line">    <span class="number">1.6</span> 短信验证码必须是<span class="number">4</span>位的数字，否则提示<span class="string">&quot;验证码格式错误&quot;</span></span><br><span class="line"></span><br><span class="line">需求<span class="number">2</span>：点击注册按钮时，按钮显示为<span class="string">&quot;注册中...&quot;</span>,并且不能重复提交请求</span><br><span class="line"></span><br><span class="line">需求<span class="number">3</span>：根据不同响应结果，处理响应</span><br><span class="line">	<span class="number">3.1</span> 接口调用成功</span><br><span class="line">        <span class="number">100</span> 提示用户注册成功，3s后跳转到首页</span><br><span class="line">        <span class="number">101</span> 提示用户<span class="string">&quot;用户名已经存在&quot;</span></span><br><span class="line">        <span class="number">102</span> 提示用户<span class="string">&quot;验证码错误&quot;</span></span><br><span class="line">    <span class="number">3.2</span> 接口调用失败，提示<span class="string">&quot;服务器繁忙，请稍后再试&quot;</span>,恢复按钮的值</span><br></pre></td></tr></table></figure>

<p><strong>接口文档</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">接口说明：注册</span><br><span class="line">接口地址：register.<span class="property">php</span></span><br><span class="line">请求方式：post</span><br><span class="line">接口传参：<span class="attr">name</span>:用户名 <span class="attr">pass</span>:密码 <span class="attr">code</span>:验证码  <span class="attr">mobile</span>:手机号</span><br><span class="line">返回类型  json</span><br><span class="line">接口返回：&#123;</span><br><span class="line">			<span class="string">&quot;code&quot;</span>:<span class="string">&quot;100&quot;</span>,</span><br><span class="line">			<span class="string">&quot;msg&quot;</span>:<span class="string">&quot;注册成功&quot;</span>,</span><br><span class="line">			<span class="string">&quot;name&quot;</span>:<span class="string">&quot;Jepson&quot;</span></span><br><span class="line">		&#125;</span><br><span class="line">参数说明:</span><br><span class="line">      code 当前业务逻辑的处理成功失败的标识  <span class="number">100</span>:成功  <span class="number">101</span>:用户存在 <span class="number">102</span>:验证码错误</span><br><span class="line">      msg  当前系统返回给前端提示</span><br><span class="line">      <span class="attr">name</span>: 注册的用户名</span><br></pre></td></tr></table></figure>

<h2 id="模板引擎"><a href="#模板引擎" class="headerlink" title="模板引擎"></a>模板引擎</h2><blockquote>
<p>是为了使用户界面与业务数据（内容）分离而产生的，它可以生成特定格式的文档，用于网站的模板引擎就会生成一个标准的 HTML 文档。</p>
</blockquote>
<h3 id="为什么要使用模板引擎"><a href="#为什么要使用模板引擎" class="headerlink" title="为什么要使用模板引擎"></a>为什么要使用模板引擎</h3><p>我们通过 ajax 获取到数据后，需要把数据渲染到页面，在学习模板引擎前，我们的做法是大量的拼接字符串，对于结构简单的页面，这么做还行 ，但是如果页面结构很复杂，使用拼串的话<strong>代码可阅读性非常的差，而且非常容易出错，后期代码维护也是相当的麻烦。</strong></p>
<p>总结来说拼串渲染两大缺点：</p>
<ol>
<li>js 中大量充斥着 html 结构拼串代码， 很冗余，可读性差</li>
<li>字符串拼接很麻烦， 且维护起来也很麻烦， 容易出错</li>
</ol>
<h3 id="常见的模板引擎"><a href="#常见的模板引擎" class="headerlink" title="常见的模板引擎"></a>常见的模板引擎</h3><p>BaiduTemplate：<span class="exturl" data-url="aHR0cDovL3RhbmdyYW0uYmFpZHUuY29tL0JhaWR1VGVtcGxhdGUv">http://tangram.baidu.com/BaiduTemplate/</span><br>velocity.js：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NoZXBoZXJkd2luZC92ZWxvY2l0eS5qcy8=">https://github.com/shepherdwind/velocity.js/</span><br>ArtTemplate：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2F1aS9hcnRUZW1wbGF0ZQ==">https://github.com/aui/artTemplate</span></p>
<p>artTemplate 是使用最广泛，效率最高的模板引擎，需要大家掌握。</p>
<h3 id="artTemplate"><a href="#artTemplate" class="headerlink" title="artTemplate"></a>artTemplate</h3><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2F1aS9hcnQtdGVtcGxhdGU=">github 地址</span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9hdWkuZ2l0aHViLmlvL2FydC10ZW1wbGF0ZS9kb2NzLw==">中文 api 地址</span></p>
<h4 id="artTemplate-的基本使用"><a href="#artTemplate-的基本使用" class="headerlink" title="artTemplate 的基本使用"></a>artTemplate 的基本使用</h4><p><strong>1. 引入模板引擎的 js 文件</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script src=<span class="string">&#x27;template-web.js&#x27;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>2. 准备模板</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  指定了type为text/html后，这一段script标签并不会解析，也不会显示。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/html&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myTmp&quot;</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名：隔壁老王<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>年龄：18<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>技能：查水表<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>描述：年轻力气壮<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>3. 准备数据</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//3. 准备数据,数据是后台获取的，可以随时变化</span></span><br><span class="line"><span class="keyword">var</span> json = &#123;</span><br><span class="line">  <span class="attr">userName</span>: <span class="string">&#x27;隔壁老王&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">  <span class="attr">skill</span>: <span class="string">&#x27;查水表&#x27;</span>,</span><br><span class="line">  <span class="attr">desc</span>: <span class="string">&#x27;年轻气壮&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>4. 将模板与数据进行绑定</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//第一个参数：模板的id</span></span><br><span class="line"><span class="comment">//第二个参数：数据</span></span><br><span class="line"><span class="comment">//返回值：根据模板生成的字符串。</span></span><br><span class="line"><span class="keyword">var</span> html = <span class="title function_">template</span>(<span class="string">&#x27;myTmp&#x27;</span>, json)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(html)</span><br></pre></td></tr></table></figure>

<p><strong>5. 修改模板</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/html&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myTmp&quot;</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名：</span><span class="template-variable">&#123;&#123;<span class="name">userName</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>年龄：</span><span class="template-variable">&#123;&#123;<span class="name">age</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>技能：</span><span class="template-variable">&#123;&#123;<span class="name">skill</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>描述：</span><span class="template-variable">&#123;&#123;<span class="name">desc</span>&#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>6. 将数据显示到页面</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">div.<span class="property">innerHTML</span> = html</span><br></pre></td></tr></table></figure>

<h4 id="artTemplate-标准语法"><a href="#artTemplate-标准语法" class="headerlink" title="artTemplate 标准语法"></a>artTemplate 标准语法</h4><p><strong>if 语法</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;&#123;if gender=&#x27;男&#x27;&#125;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;man&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123;else&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;woman&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;/if&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>each 语法</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  1. &#123;&#123;each data&#125;&#125;  可以通过$value 和 $index获取值和下标</span></span><br><span class="line"><span class="comment">  2. &#123;&#123;each data v i&#125;&#125;  自己指定值为v，下标为i</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">&#123;&#123;each data v i&#125;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123;v.url&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;v.src&#125;&#125;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;v.content&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">&#123;&#123;/each&#125;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//如果返回的数据是个数组，必须使用对象进行包裹，因为在&#123;&#123;&#125;&#125;中只写书写对象的属性。</span></span><br><span class="line"><span class="keyword">var</span> html = <span class="title function_">template</span>(<span class="string">&#x27;navTmp&#x27;</span>, &#123; <span class="attr">data</span>: info &#125;)</span><br></pre></td></tr></table></figure>

<h2 id="瀑布流案例"><a href="#瀑布流案例" class="headerlink" title="瀑布流案例"></a>瀑布流案例</h2><h3 id="封装-jQuery-瀑布流插件"><a href="#封装-jQuery-瀑布流插件" class="headerlink" title="封装 jQuery 瀑布流插件"></a>封装 jQuery 瀑布流插件</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 特点分析：</span></span><br><span class="line"><span class="comment">// 1. 跟以前将的瀑布流不一样的是，这次的瀑布流固定版心为1200px</span></span><br><span class="line"><span class="comment">// 2. 瀑布流固定摆放5列，每一列的宽度固定为232px。</span></span><br><span class="line"><span class="comment">// 思路分析：</span></span><br><span class="line"><span class="comment">// 1. 计算每一列之间的缝隙</span></span><br><span class="line"><span class="comment">// 2. 初始化一个数组，用户存储每一列的高度 [0,0,0,0,0]</span></span><br><span class="line"><span class="comment">// 3. 查找数组的最小列，每次都把图片定位到最小列的位置</span></span><br><span class="line"><span class="comment">// 4. 更新数组最小列的高度（加上定位过来的图片的高度）</span></span><br></pre></td></tr></table></figure>

<p>代码参考：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$.fn.<span class="property">waterfall</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> $box = $(<span class="variable language_">this</span>)</span><br><span class="line">  <span class="keyword">var</span> $item = $box.<span class="title function_">children</span>()</span><br><span class="line">  <span class="keyword">var</span> boxWidth = $box.<span class="title function_">width</span>() <span class="comment">//父盒子的宽度</span></span><br><span class="line">  <span class="keyword">var</span> itemWidth = <span class="number">232</span> <span class="comment">//每个盒子固定宽度为232</span></span><br><span class="line">  <span class="keyword">var</span> columns = <span class="number">5</span> <span class="comment">//固定摆放5列</span></span><br><span class="line">  <span class="keyword">var</span> gap = (boxWidth - columns * itemWidth) / (columns - <span class="number">1</span>) <span class="comment">//缝隙的宽度 10</span></span><br><span class="line">  <span class="keyword">var</span> arr = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>] <span class="comment">//初始化数组</span></span><br><span class="line">  $item.<span class="title function_">each</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//查找最小列</span></span><br><span class="line">    <span class="keyword">var</span> min = arr[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">var</span> minIndex = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (min &gt; arr[i]) &#123;</span><br><span class="line">        min = arr[i]</span><br><span class="line">        minIndex = i</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//设置位置</span></span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">css</span>(&#123;</span><br><span class="line">      <span class="attr">left</span>: minIndex * (itemWidth + gap),</span><br><span class="line">      <span class="attr">top</span>: min</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//更新数组</span></span><br><span class="line">    arr[minIndex] = min + $(<span class="variable language_">this</span>).<span class="title function_">outerHeight</span>() + gap</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="瀑布流完整版"><a href="#瀑布流完整版" class="headerlink" title="瀑布流完整版"></a>瀑布流完整版</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 需求分析：</span></span><br><span class="line"><span class="comment">// 1. 页面刚开始，没有任何一张图片。因此需要从通过ajax获取图片</span></span><br><span class="line"><span class="comment">// 2. 使用模版引擎将获取到的数据渲染到页面</span></span><br><span class="line"><span class="comment">// 3. 因为图片路径是从服务端获取的，加载需要时间，需要等待图片加载完成后才能使用瀑布流进行布局。</span></span><br><span class="line"><span class="comment">// 4. 给window注册scroll事件，当触底时，需要动态的加载图片。</span></span><br><span class="line"><span class="comment">// 5. 加载时，显示加载中的提示信息，并且要求不能重复发送ajax请求</span></span><br><span class="line"><span class="comment">// 6. 当服务端返回图片数量为0时，提示用户没有更多数据。</span></span><br></pre></td></tr></table></figure>

<h2 id="同源与跨域"><a href="#同源与跨域" class="headerlink" title="同源与跨域"></a>同源与跨域</h2><h3 id="同源"><a href="#同源" class="headerlink" title="同源"></a>同源</h3><h4 id="同源策略的基本概念"><a href="#同源策略的基本概念" class="headerlink" title="同源策略的基本概念"></a>同源策略的基本概念</h4><blockquote>
<p>1995 年，同源政策由 Netscape 公司引入浏览器。目前，所有浏览器都实行这个政策。<br>同源策略：最初，它的含义是指，A 网页设置的 Cookie，B 网页不能打开，除非这两个网页”同源”。所谓”同源”指的是”三个相同”：协议相同、域名相同、端口相同</p>
</blockquote>
<h4 id="同源策略的目的"><a href="#同源策略的目的" class="headerlink" title="同源策略的目的"></a>同源策略的目的</h4><blockquote>
<p>同源政策的目的，是为了保证用户信息的安全，防止恶意的网站窃取数据。</p>
</blockquote>
<h4 id="同源策略的限制范围"><a href="#同源策略的限制范围" class="headerlink" title="同源策略的限制范围"></a>同源策略的限制范围</h4><blockquote>
<p>随着互联网的发展，“同源策略”越来越严格，目前，如果非同源，以下三种行为都将收到限制。</p>
</blockquote>
<ol>
<li>Cookie、LocalStorage 和 IndexDB 无法读取</li>
<li>DOM 无法获得</li>
<li>AJAX 请求响应被拦截</li>
</ol>
<p>虽然这些限制是很有必要的，但是也给我们日常开发带来不好的影响。比如实际开发过程中，往往都会把服务器端架设到一台甚至是一个集群的服务器中，把客户端页面放到另外一个单独的服务器。那么这时候就会出现不同源的情况，如果我们知道两个网站都是安全的话，我们是希望两个不同源的网站之间可以相互请求数据的。这就需要使用到 <strong>跨域</strong> 。</p>
<h3 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h3><h4 id="jsonp-无兼容性问题"><a href="#jsonp-无兼容性问题" class="headerlink" title="jsonp( 无兼容性问题 )"></a>jsonp( 无兼容性问题 )</h4><blockquote>
<p><code>JSONP(JSON with Padding)</code> 可用于解决主流浏览器的跨域数据访问的问题。</p>
<p>原理：服务端返回一个定义好的 js 函数的调用，并且将服务器的数据以该函数参数的形式传递过来，这个方法需要前后端配合</p>
</blockquote>
<ul>
<li><code>script</code>  标签是不受同源策略的限制的，它可以载入任意地方的 JavaScript 文件。类似的还有<code>img</code>和<code>link</code>标签</li>
</ul>
<h5 id="jsonp-演化过程-1"><a href="#jsonp-演化过程-1" class="headerlink" title="jsonp 演化过程 1"></a>jsonp 演化过程 1</h5><p>php 文件</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&quot;content-type:text/html;charset=utf-8&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;alert(1111)&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>html 文件</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://www.api.com/testjs.php&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>原理：其实 src 的路径是什么文件不重要，无论引入 js 文件还是 php 文件，最后返回给浏览器的都是字符串，因此我们 script 标签是可以引入一个 php 文件的。</p>
<h5 id="jsonp-演化过程-2"><a href="#jsonp-演化过程-2" class="headerlink" title="jsonp 演化过程 2"></a>jsonp 演化过程 2</h5><p>php 文件</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&quot;content-type:text/html;charset=utf-8&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;var a = 118;&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>html 文件</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://www.api.com/testjs.php&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// a打印出来了118</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>我们现在做到了一件事情，从不同源的 php 文件中获取到了数据</strong></p>
<p>缺点：获取数据的 script 标签必须写在使用的 script 标签的前面，必须保证先有数据才能对数据进行渲染。</p>
<h5 id="jsonp-演化过程-3"><a href="#jsonp-演化过程-3" class="headerlink" title="jsonp 演化过程 3"></a>jsonp 演化过程 3</h5><p>php 代码</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&quot;content-type:text/html;charset=utf-8&quot;</span>);</span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>(</span><br><span class="line">  <span class="string">&quot;name&quot;</span>=&gt;<span class="string">&quot;zs&quot;</span>,</span><br><span class="line">  <span class="string">&quot;age&quot;</span>=&gt;<span class="number">18</span></span><br><span class="line">);</span><br><span class="line"><span class="variable">$result</span> = <span class="title function_ invoke__">json_encode</span>(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 这是一段js函数的调用的代码，$result就是我们想要的数据</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;func(<span class="subst">$result</span>)&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>js 代码</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">func</span>(<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://www.api.com/testjs.php&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>缺点：后端必须知道前端声明的方法的名字，后端才能调用。</p>
<h5 id="jsonp-演化过程-4"><a href="#jsonp-演化过程-4" class="headerlink" title="jsonp 演化过程 4"></a>jsonp 演化过程 4</h5><p>php 代码</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&quot;content-type:text/html;charset=utf-8&quot;</span>);</span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>(</span><br><span class="line">  <span class="string">&quot;name&quot;</span>=&gt;<span class="string">&quot;zs&quot;</span>,</span><br><span class="line">  <span class="string">&quot;age&quot;</span>=&gt;<span class="number">18</span></span><br><span class="line">);</span><br><span class="line"><span class="variable">$result</span> = <span class="title function_ invoke__">json_encode</span>(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 这是一 段js函数的调用的代码，$result就是我们想要的数据</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$_GET</span>[<span class="string">&#x27;callback&#x27;</span>].<span class="string">&quot;(<span class="subst">$result</span>)&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>javascript 代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> button = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>)</span><br><span class="line">button.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>)</span><br><span class="line">  script.<span class="property">src</span> = <span class="string">&#x27;http://www.api.com/testjs.php?callback=fun&#x27;</span></span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(script)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>jsonp 的原理就是 <strong>借助 script 标签 src 请求资源时，不受同源策略的限制</strong></li>
<li>在服务端返回一个函数的调用，将数据作为当前调用函数的实参</li>
<li>在浏览器端，声明一个全局函数，通过形参就可以获取到服务端返回的对应的值</li>
</ol>
<h4 id="jquery-对于-jsonp-的封装"><a href="#jquery-对于-jsonp-的封装" class="headerlink" title="jquery 对于 jsonp 的封装"></a>jquery 对于 jsonp 的封装</h4><p>!&gt; jsonp 仅支持 get 请求</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用起来相当的简单，跟普通的get请求没有任何的区别，只需要把 dataType 固定成 jsonp 即可</span></span><br><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;http://www.Jepson.com/testjs.php&#x27;</span>,</span><br><span class="line">  <span class="attr">dataType</span>: <span class="string">&#x27;jsonp&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">uname</span>: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">    <span class="attr">upass</span>: <span class="string">&#x27;123456&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">info</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(info)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="XMLHttpRequest2-0"><a href="#XMLHttpRequest2-0" class="headerlink" title="XMLHttpRequest2.0"></a>XMLHttpRequest2.0</h2><blockquote>
<p>XMLHttpRequest 是一个 javascript 内置对象，使得 Javascript 可以进行异步的 HTTP 通信。2008 年 2 月，就提出了 XMLHttpRequest Level 2 草案。</p>
</blockquote>
<p>老版本的 XMLHttpRequest 的缺点：</p>
<ol>
<li>仅支持传输文本数据，无法传输二进制文件，比如图片视频等。</li>
<li>传输数据时，没有进度信息，只能提示完成与否。</li>
<li>受到了”同源策略”的限制</li>
</ol>
<p>新版本的功能：</p>
<ol>
<li>可以设置 timeout 超时时间</li>
<li>可以使用 formData 对象管理表单数据</li>
<li>允许请求不同域名下的数据（跨域）</li>
<li>支持上传二进制文件</li>
<li>可以获取数据传输的进度信息</li>
</ol>
<p><strong>注意：我们现在使用 new XMLHttpRequest 创建的对象就是 2.0 对象了，我们之前学的是 1.0 的语法，现在学习一些 2.0 的新特性即可。</strong></p>
<h3 id="timeout-设置超时"><a href="#timeout-设置超时" class="headerlink" title="timeout 设置超时"></a>timeout 设置超时</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">xhr.<span class="property">timeout</span> = <span class="number">3000</span> <span class="comment">// 设置超时时间</span></span><br><span class="line">xhr.<span class="property">ontimeout</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;请求超时&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="formData-管理表单数据"><a href="#formData-管理表单数据" class="headerlink" title="formData 管理表单数据"></a>formData 管理表单数据</h3><p>formData 对象类似于 jquery 的 serialize 方法，序列化表单，实现表单的异步提交</p>
<p>!&gt; 但 serialize 方法无法实现文件上传</p>
<p>使用：</p>
<ol>
<li>实例化一个 formData 对象， new FormData(form); form 就是表单元素，DOM 对象</li>
<li>formData 对象可以直接作为 xhr.send(formData) 的参数。注意此时数据是以二进制的形式进行传输。</li>
<li>formData 有一个 append 方法，可以添加参数。formData.append(“id”, “1111”);</li>
<li>这种方式只能以 <strong>post</strong> 形式传递，不需要设置请求头，浏览器会自动为我们设置一个合适的请求头。</li>
</ol>
<p>代码示例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 使用formData必须发送post请求</span></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;post&#x27;</span>, <span class="string">&#x27;02-formData.php&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 获取表单元素</span></span><br><span class="line"><span class="keyword">var</span> form = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#myForm&#x27;</span>)</span><br><span class="line"><span class="comment">// 3. 创建form对象，可以直接作为send的参数。</span></span><br><span class="line"><span class="keyword">var</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>(form)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. formData可以使用append方法添加参数</span></span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. 发送，不需要指定请求头，浏览器会自动选择合适的请求头</span></span><br><span class="line">xhr.<span class="title function_">send</span>(formData)</span><br></pre></td></tr></table></figure>

<p>如果要获取 <code>formData</code> 中的数据，可以使用 <code>formData.get(&#39;&#39;)</code> 获取</p>
<h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3><blockquote>
<p>以前，文件上传需要借助表单进行上传，但是表单上传是同步的，也就是说文件上传时，页面需要提交和刷新，用户体验不友好，xhr2.0 中的 formData 对象支持文件的异步上传。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>()</span><br><span class="line"><span class="comment">// 获取上传的文件，传递到后端</span></span><br><span class="line"><span class="keyword">var</span> file = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;file&#x27;</span>).<span class="property">files</span>[<span class="number">0</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">dir</span>(file)</span><br><span class="line">formData.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, file)</span><br><span class="line">xhr.<span class="title function_">send</span>(formData)</span><br><span class="line"></span><br><span class="line">$(<span class="string">&#x27;#upload&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;change&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// FormData 用于管理表单数据的</span></span><br><span class="line">  <span class="keyword">var</span> form = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#form1&#x27;</span>)</span><br><span class="line">  <span class="keyword">var</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>(form)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 发送给服务器</span></span><br><span class="line">  <span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line">  xhr.<span class="title function_">open</span>(<span class="string">&#x27;post&#x27;</span>, <span class="string">&#x27;upload.php&#x27;</span>)</span><br><span class="line">  xhr.<span class="title function_">send</span>(formData) <span class="comment">// 直接发送 formData</span></span><br><span class="line"></span><br><span class="line">  xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (xhr.<span class="property">readyState</span> == <span class="number">4</span> &amp;&amp; xhr.<span class="property">status</span> == <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> r = xhr.<span class="property">responseText</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// jquery</span></span><br><span class="line">$(<span class="string">&#x27;#upload&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;change&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 准备要上传的数据</span></span><br><span class="line">  <span class="keyword">var</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>()</span><br><span class="line">  <span class="comment">// 如果 formData 中有文件对象了，就不需要再添加了</span></span><br><span class="line">  formData.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, <span class="variable language_">this</span>.<span class="property">files</span>[<span class="number">0</span>])</span><br><span class="line">  <span class="comment">// 发送 AJAX 请求，上传文件</span></span><br><span class="line">  $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;upload.php&#x27;</span>,</span><br><span class="line">    <span class="attr">contentType</span>: <span class="literal">false</span>, <span class="comment">// 设置编码类型</span></span><br><span class="line">    <span class="attr">processData</span>: <span class="literal">false</span>, <span class="comment">// 设置传递值方式</span></span><br><span class="line">    <span class="attr">data</span>: formData,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (res.<span class="property">success</span>) &#123;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>!&gt; 如果使用 <code>$.ajax</code> 发送 ， 需要添加如下两项参数<br>​ <code>contentType: false,</code> 设置编码类型<br>​ <code>processData: false,</code> 设置传递值方式</p>
<h3 id="显示文件进度信息"><a href="#显示文件进度信息" class="headerlink" title="显示文件进度信息"></a>显示文件进度信息</h3><p>xhr2.0 还支持获取上传文件的进度信息，因此我们可以根据进度信息可以实时的显示文件的上传进度。</p>
<ol>
<li>需要注册 <code>xhr.upload.onprogress = function(e)&#123;&#125;</code> 事件，用于监听文件上传的进度。注意：需要在 send 之前注册。</li>
<li>上传的进度信息会存储事件对象 e 中</li>
<li><code>e.loaded</code> 表示已上传的大小；<code>e.total</code> 表示整个文件的大小</li>
</ol>
<p>代码参考：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">xhr.<span class="property">upload</span>.<span class="property">onprogress</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">  inner.<span class="property">style</span>.<span class="property">width</span> = ((e.<span class="property">loaded</span> / e.<span class="property">total</span>) * <span class="number">100</span>).<span class="title function_">toFixed</span>(<span class="number">2</span>) + <span class="string">&#x27;%&#x27;</span></span><br><span class="line">  span.<span class="property">innerHTML</span> = ((e.<span class="property">loaded</span> / e.<span class="property">total</span>) * <span class="number">100</span>).<span class="title function_">toFixed</span>(<span class="number">2</span>) + <span class="string">&#x27;%&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// toFixed(2) 保留两位小数</span></span><br><span class="line"></span><br><span class="line">xhr.<span class="title function_">send</span>(formData)</span><br></pre></td></tr></table></figure>

<p>默认上传文件限制 8M，需要配置 php.ini，允许 php 上传大文件</p>
<h3 id="跨域资源共享-CORS"><a href="#跨域资源共享-CORS" class="headerlink" title="跨域资源共享(CORS)"></a>跨域资源共享(CORS)</h3><h4 id="CORS-的使用"><a href="#CORS-的使用" class="headerlink" title="CORS 的使用"></a>CORS 的使用</h4><blockquote>
<p>新版本的 XMLHttpRequest 对象，可以向不同域名的服务器发出 HTTP 请求。这叫做<span class="exturl" data-url="aHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Dcm9zcy1PcmlnaW5fUmVzb3VyY2VfU2hhcmluZw==">跨域资源共享</span>（Cross-origin resource sharing，简称 CORS）。</p>
</blockquote>
<p>跨域资源共享（CORS）的前提</p>
<ul>
<li>浏览器支持这个功能( 兼容性 IE10+ )</li>
<li>服务器必须允许这种跨域</li>
</ul>
<p>服务器允许跨域的代码：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 允许所有的域名访问这个接口</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&quot;Access-Control-Allow-Origin:*&quot;</span>);</span><br><span class="line"><span class="comment">// 允许 www.abc.com 这个域名访问这个接口</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&quot;Access-Control-Allow-Origin:http://www.abc.com&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="CORS-的具体流程（了解）"><a href="#CORS-的具体流程（了解）" class="headerlink" title="CORS 的具体流程（了解）"></a>CORS 的具体流程（了解）</h4><ol>
<li><p>浏览器发送跨域请求</p>
</li>
<li><p>服务器端收到一个跨域请求后，在响应头中添加 Access-Control-Allow-Origin Header 资源权限配置。发送响应</p>
</li>
<li><p>浏览器收到响应后，查看是否设置了<code>header(&#39;Access-Control-Allow-Origin:请求源域名或者*&#39;);</code></p>
<p>如果当前域已经得到授权，则将结果返回给浏览器，否则浏览器忽略此次响应</p>
</li>
</ol>
<p>结论：</p>
<ol>
<li><strong>跨域行为是浏览器行为，响应是回来了, 只是浏览器安全机制做了限制, 对于跨域响应内容进行了忽略。</strong></li>
<li><strong>服务器与服务器之间是不存在跨域问题的</strong></li>
</ol>
<h4 id="jsonp-与-cors-的对比"><a href="#jsonp-与-cors-的对比" class="headerlink" title="jsonp 与 cors 的对比"></a>jsonp 与 cors 的对比</h4><ul>
<li>jsonp 兼容性好，老版本浏览器也支持，但是 jsonp 仅支持 get 请求，发送的数据量有限，使用麻烦</li>
<li>cors 需要浏览器支持 cors 功能才行。使用简单，<strong>只要服务端设置允许跨域，对于客户端来说，跟普通的 get、post 请求并没有什么区别</strong></li>
<li>跨域的安全性问题：<strong>因为跨域是需要服务端配合控制的</strong> ，也就是说不论 jsonp 还是 cors，如果没有服务端的允许，浏览器是没法做到跨域的</li>
</ul>
<p>【案例：图灵机器人】</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wqdy.top/1652.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="c">
      <meta itemprop="description" content="分享各类资源、经验与技巧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我全都要">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/1652.html" class="post-title-link" itemprop="url">javascript 高级</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <date title="创建时间：2018-10-18" itemprop="dateCreated datePublished" datetime="2018-10-18T14:34:36+00:00">2018-10-18</date>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/c/frontend/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@img/img/20210102204500.png"></p>
<h2 id="沙箱模式"><a href="#沙箱模式" class="headerlink" title="沙箱模式"></a>沙箱模式</h2><p>沙箱其实就是一个独立的环境，这个环境中任何的改变，都不会对外部环境产生影响</p>
<p>函数自调用一样，在自调用函数内部的变量是不会影响到外部的，因此<strong>函数自调用模式也叫沙箱模式</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">;(<span class="keyword">function</span>(<span class="params"><span class="variable language_">window</span></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> fn = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;这是fn函数&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)(<span class="variable language_">window</span>)</span><br></pre></td></tr></table></figure>

<ol>
<li>代码写在自调用函数里面，减少全局污染</li>
<li>想要在外面使用 fn 函数，可将 fn 暴露到全局 <code>window.fn = fn;</code> 将 fn 函数的地址赋值给了 window 上的 fn 属性</li>
<li>一般，我们一个 js 文件只会暴露一个核心的功能（函数、方法）： 目的还是为了减少全局污染</li>
</ol>
<h2 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h2><ul>
<li>语法：<code>&#39;use strict&#39;</code></li>
<li>作用：让 js 引擎以更加严格的模式执行 js 代码</li>
<li>最佳实践：在某个函数内部开启严格模式，而不是在全局环境中开启</li>
<li>注意：<ul>
<li>严格模式只对当前作用域起作用</li>
<li>应该<strong>在当前作用域最顶端使用<code>use strict</code>，否则严格模式无效</strong></li>
</ul>
</li>
<li>使用严格模式好处：<ul>
<li>规范</li>
<li>提高代码执行效率</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 严格模式应该配合沙箱模式一起使用。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 沙箱模式 + 严格模式：</span></span><br><span class="line">;(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="string">&#x27;use strict&#x27;</span></span><br><span class="line"></span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<h3 id="严格模式规定"><a href="#严格模式规定" class="headerlink" title="严格模式规定"></a>严格模式规定</h3><ul>
<li>变量必须显示声明</li>
<li>函数参数不能重名</li>
<li>禁止使用八进制</li>
<li>不能使用保留字作为变量名称：<code>implements, interface, let, package, private, protected, public, static, yield</code></li>
<li>如果不符合上述规范，会直接报错</li>
</ul>
<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><blockquote>
<p>正则表达式(regular expression)描述了一种字符串匹配的模式（pattern），可以用来检查一个串是否含有某种子串（数据验证）、将匹配的子串替换（数据删除或替换）或者从某个串中取出符合某个条件的子串等（数据提取）</p>
</blockquote>
<h3 id="创建正则表达式"><a href="#创建正则表达式" class="headerlink" title="创建正则表达式"></a>创建正则表达式</h3><ul>
<li>构造函数的方式</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// RegExp(regular expression)</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="regexp">/a/</span>) <span class="comment">// 匹配字母中有 a</span></span><br></pre></td></tr></table></figure>

<ul>
<li>正则字面量</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/a/</span></span><br></pre></td></tr></table></figure>

<p>正则有 test 方法，作用是测试字符串是否符合正则表达式的规律，如果符合， 返回 true</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;abc&#x27;</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(reg.<span class="title function_">test</span>(<span class="string">&#x27;def&#x27;</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h3><blockquote>
<p>正则表达式由一些普通字符和元字符组成，普通字符包括大小写字母、数字等，而元字符则具有特殊的含义</p>
</blockquote>
<h4 id="常见元字符"><a href="#常见元字符" class="headerlink" title="常见元字符"></a>常见元字符</h4><p><code>\d</code> 匹配一个数字字符。等价于 <code>[0-9]</code></p>
<p><code>\D</code> 匹配一个非数字字符。等价于 <code>[^0-9]</code></p>
<p><code>\w</code> 匹配包括下划线的任何单词字符。等价于<code>[A-Za-z0-9_]</code></p>
<p><code>\W</code> 匹配任何非单词字符。等价于 <code>[^A-Za-z0-9_]</code></p>
<p><code>\s</code> 匹配任何空白字符，包括空格、制表符、换页符等等。等价于 <code>[\f\n\r\t\v]</code></p>
<p><code>\S</code> 匹配任何非空白字符。等价于 <code>[^\f\n\r\t\v]</code></p>
<p><code>\</code> 将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。例如， <code>n</code> 匹配字符 <code>n</code>。<code>\n</code> 匹配换行符。<code>\\</code> 匹配 <code>\</code>，<code>\(</code> 则匹配 <code>(</code>。</p>
<p><code>.</code> 匹配除换行符 <code>\n</code> 之外的任何单字符。要匹配包括 ‘\n’ 在内的任何字符，可用<code>(.|\n)</code></p>
<p><code>|</code> 指明两项之间的一个选择。，优先级最低，| 的左右都是单独的整体</p>
<p><code>()</code> 优先级最高，标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。使用 $0…$9 属性。要匹配这些字符，请使用 <code>\(</code> 和 <code>\)</code> 。每个()就是一个子匹配 ‘\1’和’$1’用来指定第一个子匹配</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">/f|boot/ <span class="comment">// 匹配 `f` 和 `boot`</span></span><br><span class="line"><span class="regexp">/(f|b)oot/</span> <span class="comment">// 匹配 `foot` 和 `boot`</span></span><br></pre></td></tr></table></figure>

<h4 id="空白字符"><a href="#空白字符" class="headerlink" title="空白字符"></a>空白字符</h4><ul>
<li><code>\f</code> 匹配一个换页符</li>
<li><code>\n</code> 匹配一个换行符</li>
<li><code>\r</code> 匹配一个回车符</li>
<li><code>\t</code> 匹配一个制表符</li>
<li><code>\v</code> 匹配一个垂直制表符</li>
</ul>
<h4 id="字符类的元字符"><a href="#字符类的元字符" class="headerlink" title="字符类的元字符"></a>字符类的元字符</h4><ul>
<li><code>[]</code> 在正则表达式中表示 <strong>单个</strong> 字符的位置，[] 里面写这个位置可以出现的字符</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">;<span class="regexp">/[abc]/</span> <span class="comment">// 匹配 a,b,c 任意一个字符</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>[^]</code> 在中扩号中的 <code>^</code> 表示非的意思</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ^ 在方括号表达式开头中使用，此时它表示不接受该字符集合</span></span><br><span class="line">;<span class="regexp">/[^abc]/</span> <span class="comment">// 匹配除了a, b, c以外的其他字符</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>[a-z]</code> <code>[1-9]</code>表示范围</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">;<span class="regexp">/[a-z]/</span> <span class="comment">// 小写字母</span></span><br><span class="line">;<span class="regexp">/[A-Z]/</span> <span class="comment">// 大写字母</span></span><br><span class="line">;<span class="regexp">/[0-9]/</span> <span class="comment">// 数字</span></span><br><span class="line">;<span class="regexp">/[a-zA-Z0-9]/</span> <span class="comment">// 所有的小写字母和大写字母以及数字</span></span><br></pre></td></tr></table></figure>

<h4 id="边界类元字符"><a href="#边界类元字符" class="headerlink" title="边界类元字符"></a>边界类元字符</h4><blockquote>
<p>我们前面学习的正则只要有满足的条件的就会返回 true，并不能做到精确的匹配。</p>
</blockquote>
<ul>
<li><p><code>^</code> 匹配输入字符串的开始位置</p>
</li>
<li><p><code>$</code> 匹配输入字符串的结尾位置</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">;<span class="regexp">/^chuan/</span> <span class="comment">// 以chuan开头</span></span><br><span class="line">;<span class="regexp">/chuan$/</span> <span class="comment">// 以chuan结尾</span></span><br><span class="line">;<span class="regexp">/^chuan$/</span> <span class="comment">// 精确匹配 chuan</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 精确匹配chuan,表示必须是这个</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="regexp">/^chuan$/</span>.<span class="title function_">test</span>(<span class="string">&#x27;chuanchuan&#x27;</span>)) <span class="comment">// fasle</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>以后表单校验要精确匹配</p>
</blockquote>
<ul>
<li><code>\b</code> 匹配一个字边界，即字与空格间的位置。如果它位于要匹配的字符串的开始，它在单词的开始处查找匹配项。如果它位于字符串的结尾，它在单词的结尾处查找匹配项。<br><code>/\bCha/</code> : 匹配 Chapter 的开头三个字符<br><code>/ter\b/</code> : 匹配 Chapter 的结尾三个字符</li>
<li><code>\B</code> 表示非单词边界。位置并不重要，因为匹配不关心究竟是单词的开头还是结尾。<br><code>/\Bapt/</code> 表达式匹配 Chapter 中的字符串 apt，但不匹配 aptitude 中的字符串 apt</li>
</ul>
<h4 id="量词类元字符"><a href="#量词类元字符" class="headerlink" title="量词类元字符"></a>量词类元字符</h4><blockquote>
<p>量词用来控制出现的次数，一般来说量词和边界会一起使用</p>
</blockquote>
<ul>
<li><code>*</code> 匹配前面的子表达式零次或多次，等价于 <code>&#123;0,&#125;</code></li>
<li><code>+</code> 匹配前面的子表达式一次或多次，等价于 <code>&#123;1,&#125;</code></li>
<li><code>?</code> 匹配前面的子表达式零次或一次，等价于 <code>&#123;0,1&#125;</code> 。当该字符紧跟在任何一个其他限制符 (<code>*</code>, <code>+</code>,<code>?</code>, <code>&#123;n&#125;</code>, <code>&#123;n,&#125;</code>, <code>&#123;n,m&#125;)</code> 后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串</li>
<li><code>&#123;n&#125;</code> n 是一个非负整数。匹配确定的 <code>n</code> 次</li>
<li><code>&#123;n,&#125;</code> n 是一个非负整数。至少匹配 <code>n</code> 次</li>
<li><code>&#123;n,m&#125;</code> <code>m</code> 和 <code>n</code> 均为非负整数，其中<code>n</code> &lt;&#x3D; <code>m</code>。最少匹配 <code>n</code> 次且最多匹配 <code>m</code> 次</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &#123;&#125; 就近修饰单个字符</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="regexp">/chuan&#123;2&#125;/</span>.<span class="title function_">test</span>(<span class="string">&#x27;chuanchuan&#x27;</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="regexp">/(chuan)&#123;2&#125;/</span>.<span class="title function_">test</span>(<span class="string">&#x27;chuanchuan&#x27;</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="regexp">/chuan&#123;2&#125;/</span>.<span class="title function_">test</span>(<span class="string">&#x27;chuann&#x27;</span>)) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="其他字符"><a href="#其他字符" class="headerlink" title="其他字符"></a>其他字符</h4><ul>
<li><code>g</code> 全局标记，指定将该表达式应用到输入字符串中能够查找到的尽可能多的匹配</li>
<li><code>i</code> 标记指定不区分大小写。表达式的结尾处</li>
<li><code>m</code> 表明可以进行多行匹配，但是这个只有当使用^和$模式时才会起作用，在其他的模式中，加不加入 m 都可以进行多行匹配</li>
</ul>
<h3 id="优先级"><a href="#优先级" class="headerlink" title="优先级"></a>优先级</h3><p>从高到低的优先级顺序：</p>
<ol>
<li><strong><code>\</code></strong> 转义符</li>
<li><strong><code>()</code></strong>, <strong><code>(?:)</code></strong> , <strong><code>(?=)</code></strong>, <strong><code>[]</code></strong> 圆括号和方括号</li>
<li><strong><code>*</code></strong>, <strong><code>+</code></strong> , <strong><code>?</code></strong>, <strong><code>&#123;n&#125;</code></strong>, <strong><code>&#123;n,&#125;</code></strong>, <strong><code>&#123;n,m&#125;</code></strong> 限定符</li>
<li><strong><code>^</code></strong>, <strong><code>$</code></strong>, <strong><code>\任何元字符、任何字符</code></strong> 定位点和序列（即：位置和顺序）</li>
<li><strong><code>|</code></strong> 替换，”或”操作</li>
</ol>
<blockquote>
<p>字符具有高于替换运算符的优先级，使得”m|food”匹配”m”或”food”。若要匹配”mood”或”food”，请使用括号创建子表达式，从而产生”(m|f)ood”。</p>
</blockquote>
<h3 id="正则的使用"><a href="#正则的使用" class="headerlink" title="正则的使用"></a>正则的使用</h3><h4 id="字符串使用正则"><a href="#字符串使用正则" class="headerlink" title="字符串使用正则"></a>字符串使用正则</h4><ul>
<li><code>replace()</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;   123AD  asadf   asadfasf  adf  &#x27;</span></span><br><span class="line"><span class="comment">// 1. 替换掉字符串中的所有空白</span></span><br><span class="line"><span class="keyword">var</span> str2 = str.<span class="title function_">replace</span>(<span class="regexp">/\s/g</span>, <span class="string">&#x27;&#x27;</span>) <span class="comment">// g: global, 全局搜索</span></span><br><span class="line"><span class="comment">// 2. 将所有的ad替换成xx</span></span><br><span class="line"><span class="keyword">var</span> str2 = str.<span class="title function_">replace</span>(<span class="regexp">/ad/g</span>, <span class="string">&#x27;xx&#x27;</span>)</span><br><span class="line"><span class="comment">// 3. 将所有的ad/AD替换成xx</span></span><br><span class="line"><span class="keyword">var</span> str2 = str.<span class="title function_">replace</span>(<span class="regexp">/ad/gi</span>, <span class="string">&#x27;xx&#x27;</span>) <span class="comment">// i： ignore 忽略大小写</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;abc,efg,123,abc,123,a&#x27;</span></span><br><span class="line"><span class="comment">// 4. 所有的逗号替换成句号</span></span><br><span class="line"><span class="keyword">var</span> str2 = str.<span class="title function_">replace</span>(<span class="regexp">/,/g</span>, <span class="string">&#x27;。&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> jsonStr = <span class="string">&#x27;[&#123;&quot;name&quot;:&quot;张三&quot;,score:80&#125;,&#123;&quot;name&quot;:&quot;张三&quot;,score:90&#125;,&#123;&quot;name&quot;:&quot;张三&quot;,score:81&#125;]&#x27;</span></span><br><span class="line"><span class="comment">// 5. 把所有成绩都修改成100分</span></span><br><span class="line"><span class="keyword">var</span> str2 = jsonStr.<span class="title function_">replace</span>(<span class="regexp">/\d&#123;1,2&#125;/g</span>, <span class="string">&#x27;100&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>match()</code> &#x3D;&#x3D;&gt; 匹配， 匹配符合正则表达式的字符</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str2 = <span class="string">&#x27;zs的手机号是18938383838, ls的手机号13989907890， ww的手机号是13848962389，zl的手机号是18970890908&#x27;</span></span><br><span class="line"><span class="comment">// 需求： 匹配出来所有的手机号, 返回一个数组</span></span><br><span class="line"><span class="keyword">var</span> str3 = str2.<span class="title function_">match</span>(<span class="regexp">/1[3-9]\d&#123;9&#125;/g</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str3)</span><br></pre></td></tr></table></figure>

<h4 id="正则的方法"><a href="#正则的方法" class="headerlink" title="正则的方法"></a>正则的方法</h4><ul>
<li><p>test() &#x3D;&#x3D;&gt; 测试字符串是否符合正则表达式的规律，符合，就返回 true</p>
</li>
<li><p>exec() &#x3D;&#x3D;&gt; 提取，提取字符串中符合正则表达式的字符，需要用括号分组， 如果没有进行分组，返回的是符合整个正则表达式的字符</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;今天是2018-10-16，我这里的需求是提取出年月日&#x27;</span></span><br><span class="line"><span class="comment">// var reg = /\d&#123;4&#125;-\d&#123;2&#125;-\d&#123;2&#125;/;  ==&gt;  符合整个正则表达式的字符</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/(\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)/</span> <span class="comment">// ==&gt; 有分组存在 ，默认组名为 undefined</span></span><br><span class="line"><span class="keyword">var</span> reg2 = <span class="regexp">/(?&lt;year&gt;\d&#123;4&#125;)-(?&lt;month&gt;\d&#123;2&#125;)-(?&lt;day&gt;\d&#123;2&#125;)/</span> <span class="comment">// ?&lt;组名&gt; 添加组名</span></span><br><span class="line"><span class="keyword">var</span> ret = reg.<span class="title function_">exec</span>(str) <span class="comment">// 提取出分组的内容以下标的形式存在返回的数组里面</span></span><br><span class="line"><span class="keyword">var</span> ret2 = reg2.<span class="title function_">exec</span>(str)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ret)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ret2)</span><br><span class="line"><span class="comment">// index 代表 匹配到 ret 在 str 中的下标</span></span><br></pre></td></tr></table></figure>

<h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><ul>
<li><code>[xyz]</code> 字符集合。匹配所包含的任意一个字符。例如， <code>[abc]</code> 可以匹配 “plain” 中的 ‘a’</li>
<li><code>[^xyz]</code> 负值字符集合。匹配未包含的任意字符。例如， <code>[^abc]</code> 可以匹配 “plain” 中的’p’、’l’、’i’、’n’</li>
<li><code>[a-z]</code> 匹配所有小写字母</li>
<li><code>[-a-z]</code> 或 <code>[a-z-]</code> 匹配所有小写字母和 <code>-</code></li>
<li><code>[A-Za-z0-9]</code> 匹配任何大写字母小写字母和数字</li>
<li><code>\b([a-z]+)\1\b/gi</code> 一个单词连续出现的位置</li>
<li>将通用资源指示符 (URI) 分解为其组件</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;https://www.baidu.com:80/index.html&#x27;</span></span><br><span class="line"><span class="keyword">var</span> patt1 = <span class="regexp">/(\w+):\/\/([^/:]+)(:\d*)?([^# ]*)/</span></span><br><span class="line">arr = str.<span class="title function_">match</span>(patt1)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">write</span>(arr[i])</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;&lt;br&gt;&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// https://www.baidu.com:80/index.html</span></span><br><span class="line"><span class="comment">// https</span></span><br><span class="line"><span class="comment">// www.baidu.com</span></span><br><span class="line"><span class="comment">// :80</span></span><br><span class="line"><span class="comment">// /index.html</span></span><br></pre></td></tr></table></figure>

<h4 id="后向引用"><a href="#后向引用" class="headerlink" title="后向引用"></a>后向引用</h4><p><strong><code>后向引用</code></strong> 正则表达式一个最重要的特性就是将匹配成功的模式的某部分进行存储供以后使用这一能力</p>
<p>对一个正则表达式模式或部分模式两边添加圆括号将导致相关匹配存储到一个临时缓冲区中，所捕获的每个子匹配都按照在正则表达式模式中从左到右出现的顺序存储。缓冲区编号从 1 开始，最多可存储 99 个捕获的子表达式。每个缓冲区都可以使用 <code>\n</code> 访问，其中 n 为一个标识特定缓冲区的一位或两位十进制数。</p>
<p>可以使用非捕获元字符 <code>?:</code>、<code>?=</code> 或 <code>?!</code> 来忽略对这部分正则表达式的保存</p>
<p><code>?:</code> 非获取匹配。匹配但不获取匹配结果，不存储供以后使用。这在使用 “或” 字符 (|) 来组合一个模式的各个部分是很有用。例如， <code>industr(?:y|ies)</code> 就是一个比 <code>industry|industries</code> 更简略的表达式</p>
<p><code>?=</code> 正向预查。在任何匹配的字符串开始处匹配查找字符串。非获取匹配，不获取供以后使用。例如，’Windows (?&#x3D;95|98|NT|2000)’ 能匹配 “Windows 2000” 中的 “Windows” ，但不能匹配 “Windows 3.1” 中的 “Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始</p>
<p><code>?!</code> 负向预查，在任何不匹配的字符串开始处匹配查找字符串。非获取匹配，不获取供以后使用。例如’Windows (?!95|98|NT|2000)’ 能匹配 “Windows 3.1” 中的 “Windows”，但不能匹配 “Windows 2000” 中的 “Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始</p>
<p>后向引用一个最简单，最有用的应用是提供了确定文字中连续出现两个相同单词的位置的能力。请看下面的句子： Is is the cost of of gasoline going up up? 根据所写内容，上面的句子明显存在单词多次重复的问题。如果能有一种方法无需查找每个单词的重复现象就能修改该句子就好了。下面的 JScript 正则表达式使用一个子表达式就可以实现这一功能</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ss = <span class="string">&#x27;Is is the cost of of gasoline going up up?&#x27;</span></span><br><span class="line"><span class="keyword">var</span> re = <span class="regexp">/\b([a-z]+) \1\b/gim</span></span><br><span class="line"><span class="keyword">var</span> rv = ss.<span class="title function_">replace</span>(re, <span class="string">&#x27;$1&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>在这个示例中，子表达式就是圆括号之间的每一项。所捕获的表达式包括一个或多个字母字符，即由<code>[a-z]+</code>所指定的。该正则表达式的第二部分是对前面所捕获的子匹配的引用，也就是由附加表达式所匹配的第二次出现的单词。<code>\1</code>用来指定第一个子匹配。单词边界元字符确保只检测单独的单词。如果不这样，则诸如 “is issued” 或 “this is” 这样的短语都会被该表达式不正确地识别。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wqdy.top/1658.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="c">
      <meta itemprop="description" content="分享各类资源、经验与技巧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我全都要">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/1658.html" class="post-title-link" itemprop="url">Web Api</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <date title="创建时间：2018-09-20" itemprop="dateCreated datePublished" datetime="2018-09-20T14:38:17+00:00">2018-09-20</date>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/c/frontend/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Web-Api-基本概念"><a href="#Web-Api-基本概念" class="headerlink" title="Web Api 基本概念"></a>Web Api 基本概念</h1><p><strong>API</strong>（Application Programming Interface,应用程序编程接口）</p>
<p><strong>API 是一些预先定义的方法，这些方法能够实现某些特定的功能</strong></p>
<ul>
<li>任何开发语言都会提供自己的 API</li>
<li>API 的特征输入和输出(参数&#x2F;返回值)</li>
</ul>
<p>通俗的讲，API 就是编程语言给我提供的一些 <code>工具</code>，通过这些<code>工具</code>，我们可以非常轻易的完成一些功能。</p>
<p><strong>Web API</strong> : 是浏览器提供的 <strong>一套操作网页(web)的方法(API)</strong>, 通过这套 API 我们可以非常轻松的操作<code>页面的元素</code>和<code>浏览器的一些功能</code></p>
<p>**ECMAScript - JavaScript 的核心 **</p>
<ul>
<li>ECMAScript 是一套标准, 规范了语言的基本语法和数据类型</li>
<li>与具体实现无关</li>
</ul>
<p><strong>DOM</strong> - 文档对象模型</p>
<ul>
<li>一套操作页面元素的 API</li>
<li>通过 DOM 提供的 API 可以获取&#x2F;操作网页上的元素</li>
</ul>
<p><strong>BOM - 浏览器对象模型</strong></p>
<ul>
<li>一套操作浏览器功能的 API</li>
<li>通过 BOM 可以操作浏览器窗口, 比如刷新、控制浏览器跳转等</li>
</ul>
<h1 id="DOM-文档对象模型"><a href="#DOM-文档对象模型" class="headerlink" title="DOM 文档对象模型"></a>DOM 文档对象模型</h1><h2 id="DOM-基本概念"><a href="#DOM-基本概念" class="headerlink" title="DOM 基本概念"></a>DOM 基本概念</h2><blockquote>
<p>DOM ( Document Object Model ) 文档对象模型，是<code>W3C组织</code>推荐的一套操作网页元素的 API</p>
</blockquote>
<p>DOM 又称为文档树模型，因为整个 HTML 文档是一个树形的结构</p>
<p><strong>DOM 中常见的概念</strong> :</p>
<ul>
<li><p><strong>文档 <code>document</code></strong> : 一个网页可以称为文档；（换句话说：操作页面，其实就是操作 document）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>)</span><br><span class="line"><span class="comment">// DOM 会把整个网页当成一个对象，我们操作这个网页，只要操作这个document对象</span></span><br><span class="line"><span class="comment">// DOM 会把网页中的所有的东西都当作对象</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>节点<code>node</code></strong> : 网页中的所有内容都是节点 (标签、属性、文本)</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">  ul: 标签节点 class=&quot;box&quot;: 属性节点</span><br><span class="line">  <span class="comment">&lt;!-- 这是一些测试 --&gt;</span></span><br><span class="line">  注释节点</span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  测试:文本节点</span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>元素 <code>element</code></strong> : 网页中的<strong>标签节点</strong></li>
</ul>
<h2 id="获取元素的方法"><a href="#获取元素的方法" class="headerlink" title="获取元素的方法"></a>获取元素的方法</h2><ul>
<li><strong>document.getElementById()</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过id 获取元素</span></span><br><span class="line"><span class="comment">// 参数 : 字符串类型的id</span></span><br><span class="line"><span class="comment">// 返回值 : 一个元素（dom对象）</span></span><br><span class="line"><span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">dir</span>(div) <span class="comment">// 以对象的形式显示</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(div) <span class="comment">// 以内容的形式显示</span></span><br></pre></td></tr></table></figure>

<p>​ <strong>关于<code>console.log()</code>和<code>console.dir()</code>的区别</strong></p>
<p>​ <code>console.log()</code> ：打印一个元素的时候，是以标签的形式进行展示的</p>
<p>​ <code>console.dir()</code> ：打印一个元素的时候，是以对象的形式进行展示的</p>
<ul>
<li><strong>getElementsByClassName()</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过类名获取元素</span></span><br><span class="line"><span class="comment">// 参数：字符串类型的类名</span></span><br><span class="line"><span class="comment">// 返回值：伪数组</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;class&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>getElementsByTagName()</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过标签名获取元素</span></span><br><span class="line"><span class="comment">// 参数：标签名字符串</span></span><br><span class="line"><span class="comment">// 返回值：伪数组</span></span><br><span class="line"><span class="keyword">var</span> ps = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;p&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>getElementsByName()</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过name属性值获取元素</span></span><br><span class="line"><span class="comment">// 参数 : name值</span></span><br><span class="line"><span class="comment">// 返回值 : 伪数组</span></span><br><span class="line"><span class="keyword">var</span> ps = <span class="variable language_">document</span>.<span class="title function_">getElementsByName</span>(<span class="string">&#x27;aa&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>querySelector()</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 根据css选择器获取元素 (重点)</span></span><br><span class="line"><span class="comment">// 参数：是一个css选择器</span></span><br><span class="line"><span class="comment">// 返回值：只会返回一个对象，如果有很多个，会返回第一个</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#box&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>querySelectorAll()</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 根据css选择器获取元素 (重点)</span></span><br><span class="line"><span class="comment">// 参数：是一个css选择器</span></span><br><span class="line"><span class="comment">// 返回值：伪数组</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.box&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>注意事项</strong></p>
<ul>
<li><p><code>getElementById()</code> 只能由 <code>document</code> 调用，如果通过其他元素调用会报错，其他方法可由已经获取到的 dom 对象调用</p>
</li>
<li><p><code>querySelector</code>和 <code>getElementById</code>如果获取不到元素会返回 null；<code>getElementsByClassName</code> 、<code>getElementsByTagName</code> 、<code>getElementsByName</code> 、<code>querySelectorAll</code> 如果没有获取到元素也会返回一个伪数组，只不过伪数组长度为 0</p>
</li>
<li><p>伪数组不是数组，不能使用属性的方法，但是可以跟数组一样进行遍历和使用下标进行操作；伪数组不能直接注册事件，需要遍历后拿到标签再注册事件</p>
</li>
<li><p>在 DOM 中, 获取元素操作需要写在 html 内容的后面，保证页面加载完成之后才能获取到内容</p>
</li>
</ul>
<h2 id="事件学习"><a href="#事件学习" class="headerlink" title="事件学习"></a>事件学习</h2><h3 id="认识事件"><a href="#认识事件" class="headerlink" title="认识事件"></a>认识事件</h3><blockquote>
<p>事件：理解为浏览器的感知系统 , 触发 –&gt; 响应机制，javascript 是基于事件驱动的</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 点击事件</span></span><br><span class="line"><span class="comment">// 结构 : 事件源.onclick = function () &#123;..&#125;</span></span><br></pre></td></tr></table></figure>

<p>事件三要素 : 事件源 + 事件名称 + 事件处理函数</p>
<ul>
<li>事件源 : 给谁注册事件 ( 按钮 btn )</li>
<li>事件名称 : 注册了什么事件 ( click 事件 )</li>
<li>事件处理函数 : 事件触发后要执行的代码(函数形式)</li>
</ul>
<p>注意：事件处理函数并不会立马执行，而是当事件触发的时候才会执行（浏览器会自动调用）</p>
<p>注册事件的基本语法 :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box&#x27;</span>)</span><br><span class="line"><span class="comment">//on:当  click:点击   当按钮被点击的时候触发</span></span><br><span class="line">box.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;代码会在box被点击后执行&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>两种按钮</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>点亮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;哈&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">都是可点击的普通按钮，一个是文字显示在标签内容里, 而且还可以放其他标签，一个是文字显示在vaue中</span><br></pre></td></tr></table></figure>

<h3 id="焦点事件"><a href="#焦点事件" class="headerlink" title="焦点事件"></a>焦点事件</h3><ul>
<li><code>focus</code> : 获得焦点</li>
<li><code>blur</code> : 失去焦点</li>
</ul>
<h3 id="鼠标事件"><a href="#鼠标事件" class="headerlink" title="鼠标事件"></a>鼠标事件</h3><ul>
<li><code>click</code> : 单击</li>
<li><code>dblclick</code> ：双击</li>
<li><code>mouseover/mouseout</code> : 进入&#x2F;离开元素</li>
<li><code>mouseenter/mouseleave</code> : 进入&#x2F;离开元素</li>
<li><code>mousedown</code> ：按下</li>
<li><code>mouseup</code> ：抬起&#x2F;释放</li>
<li><code>mousemove</code> ：移动</li>
</ul>
<h3 id="键盘事件"><a href="#键盘事件" class="headerlink" title="键盘事件"></a>键盘事件</h3><ul>
<li><code>keydown/keypress</code> ：按下</li>
<li><code>keyup</code>： 释放</li>
</ul>
<h3 id="事件中的-this"><a href="#事件中的-this" class="headerlink" title="事件中的 this"></a>事件中的 this</h3><blockquote>
<p>this 指向注册事件的事件源</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn&#x27;</span>)</span><br><span class="line">btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 给 btn 注册的事件，因此 this 表示 btn</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">value</span> = <span class="string">&#x27;哈哈&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1. 给多个按钮注册点击事件，点击的那个变成红色 --&gt;</span></span><br><span class="line">.red &#123; background: red &#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 给多个按钮注册点击事件，点击的那个变成红色，其他的恢复默认</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> btns = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;button&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; btns.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">    btns[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// console.log(i) // 点击按钮时打印 2</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// btns[i].className = &#x27;red&#x27; // 此时 i = 2，报错</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; btns.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">        btns[i].<span class="property">className</span> = <span class="string">&#x27;&#x27;</span> <span class="comment">// 恢复默认样式 ，排他思想</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">className</span> = <span class="string">&#x27;red&#x27;</span> <span class="comment">// 给自己添加样式</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// 2. 点击按钮，显示对应的图片 1-6</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;第一张&quot;</span> <span class="attr">title</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;img&quot;</span> <span class="attr">src</span>=<span class="string">&quot;images/1.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="阻止浏览器默认行为"><a href="#阻止浏览器默认行为" class="headerlink" title="阻止浏览器默认行为"></a>阻止浏览器默认行为</h2><blockquote>
<p>对于 a 标签来说，默认的行为就是进行页面跳转，如果不想让 a 标签进行跳转，可以在注册事件中使用<code>return false</code></p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://www.baidu.com&quot;</span>&gt;</span>这是a<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> link = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;link&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  link.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">alert</span>(<span class="string">&#x27;呵呵&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 阻止页面跳转</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>e.preventDefault() 只会阻止浏览器的默认行为，并不会停止函数执行</li>
<li>return false 后的代码不在执行</li>
<li>在 jQuery 中，<code>return false</code>在调用时会执行 3 个单独的操作：</li>
<li><code>event.preventDefault()</code></li>
<li><code>event.stopPropagation()</code></li>
<li>停止回调执行并在调用时立即返回</li>
</ol>
<h2 id="属性操作"><a href="#属性操作" class="headerlink" title="属性操作"></a>属性操作</h2><ul>
<li>在 DOM 中，页面标签的属性和 DOM 对象的属性是一一对应的，因此我们可以通过修改 DOM 对象的属性来修改标签的属性</li>
</ul>
<h3 id="普通标签属性"><a href="#普通标签属性" class="headerlink" title="普通标签属性"></a>普通标签属性</h3><ul>
<li><p>常见的属性有：src、title、src、href、class、id 等</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在 js 中 class 是关键字，因此对应的是 className 属性</span></span><br><span class="line">div.<span class="property">className</span> = <span class="string">&#x27;hg&#x27;</span> <span class="comment">// 修改类名会把原类名直接覆盖掉</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="表单属性操作"><a href="#表单属性操作" class="headerlink" title="表单属性操作"></a>表单属性操作</h3><ul>
<li>常见的表单属性有：disabled、type、value、checked、selected</li>
<li>对于 disabled、checked、selected 三个属性来说，比较特殊。在 DOM 对象中，这些属性是一个布尔类型的属性，值只有 true 或者 false</li>
</ul>
<p>!&gt; reset() 方法可把表单中的元素重置为它们的默认值</p>
<p>【案例：禁用文本框】</p>
<p>【案例：随机下拉框选中】</p>
<p>【案例：表格全选案例】</p>
<h3 id="标签的自定义属性"><a href="#标签的自定义属性" class="headerlink" title="标签的自定义属性"></a>标签的自定义属性</h3><blockquote>
<p>我们之前讨论的属性，都是 HTML 规范中，标签本来就有的属性，对于标签自定义的一些属性，比较特殊</p>
</blockquote>
<p>在 html 页面中，定义一个自定义属性</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span> <span class="attr">aa</span>=<span class="string">&quot;bb&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在对应的 DOM 对象中是不存在的，在 DOM 对象中只会存在固定的那些属性</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">aa</span>) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<p><strong>attribute 方法</strong></p>
<blockquote>
<p>attribute 系列方法用于设置标签的属性，不管是自定义的还是固有的属性</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取标签的属性</span></span><br><span class="line">box.<span class="title function_">getAttribute</span>(属性名)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置标签的属性</span></span><br><span class="line">box.<span class="title function_">setAttribute</span>(属性名, 属性值)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移除标签的属性</span></span><br><span class="line">box.<span class="title function_">removeAttribute</span>(属性名)</span><br></pre></td></tr></table></figure>

<p>区别 :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &lt;div a=&quot;1&quot; id=&quot;box&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 直接给标签里只能添加固有的属性 title 等 标签+对象里都有显示</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 给标签添加自定义属性--标签上显示</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">a</span>) <span class="comment">// undefined =&gt; 对象中不显示</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="title function_">getAttribute</span>(<span class="string">&#x27;a&#x27;</span>)) <span class="comment">// 1 =&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 给对象添加自定义属性 -- 标签中不显示</span></span><br><span class="line">box.<span class="property">b</span> = <span class="number">2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">b</span>) <span class="comment">// 2 =&gt; 对象中显示</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="title function_">getAttribute</span>(<span class="string">&#x27;b&#x27;</span>)) <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. Attribute方法</span></span><br><span class="line">box.<span class="title function_">setAttribute</span>(<span class="string">&#x27;c&#x27;</span>, <span class="number">3</span>) <span class="comment">// 标签中显示</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">dir</span>(box)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">c</span>) <span class="comment">// undefined =&gt;对象中不显示</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="title function_">getAttribute</span>(<span class="string">&#x27;c&#x27;</span>)) <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">attributes</span>) <span class="comment">// &#123;0: a, 1: id, 2: c, a: a, id: id, c: c, length: 3&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">attributes</span>.<span class="property">c</span>) <span class="comment">// c=&#x27;3&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="tab-栏案例-重点"><a href="#tab-栏案例-重点" class="headerlink" title="tab 栏案例 (重点)"></a>tab 栏案例 (重点)</h3><p><strong>[案例：获取当前元素的索引]</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 方式1：</span></span><br><span class="line"><span class="comment">// 存</span></span><br><span class="line">btns[i].<span class="title function_">setAttribute</span>(<span class="string">&#x27;index&#x27;</span>, i)</span><br><span class="line"><span class="comment">// 取</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="title function_">getAttribute</span>(<span class="string">&#x27;index&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式2：</span></span><br><span class="line"><span class="comment">// 存</span></span><br><span class="line">btns[i].<span class="property">index</span> = i</span><br><span class="line"><span class="comment">// 取</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">index</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 区别在于: 第一个显示在标签内  第二个不显示在标签内 推荐第二种</span></span><br></pre></td></tr></table></figure>

<p><strong>【案例：tab 栏切换】</strong></p>
<h2 id="标签的内容属性"><a href="#标签的内容属性" class="headerlink" title="标签的内容属性"></a>标签的内容属性</h2><h3 id="innerText-和-innerHTML"><a href="#innerText-和-innerHTML" class="headerlink" title="innerText 和 innerHTML"></a>innerText 和 innerHTML</h3><ul>
<li>共同点 : 都是用来获取和设置标签的内容的</li>
<li>区别：<ul>
<li>innerHTML 能够识别标签，标签能够生效</li>
<li>innerText 只识别文本，标签会被转义</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line"><span class="comment">// 获取内容</span></span><br><span class="line"><span class="comment">// 获取标签内容的时候，只会获取文本，标签扔掉了</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">innerText</span>) <span class="comment">// 哈哈</span></span><br><span class="line"><span class="comment">// 获取标签内容的时候，不管标签还是文本，都能获取到</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">innerHTML</span>) <span class="comment">// &lt;h1&gt;哈哈&lt;/h1&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置内容</span></span><br><span class="line"><span class="comment">// 设置标签内容的时候，覆盖原来内容，对标签进行转义</span></span><br><span class="line">div.<span class="property">innerText</span> = <span class="string">&#x27;&lt;h1&gt;嘿嘿&lt;/h1&gt;&#x27;</span></span><br><span class="line"><span class="comment">// 设置内容的时候，覆盖原来内容，标签也能生效，浏览器能解析这个标签</span></span><br><span class="line">div.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;h1&gt;嘿嘿&lt;/h1&gt;&#x27;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>浏览器兼容性：指网页在各种浏览器上的显示效果不一致。或者是一些属性和方法在低版本的浏览器中不支持</p>
</blockquote>
<ul>
<li>innerText 是 IE 提出来的属性，因此低版本的火狐浏览器不支持这个属性。</li>
<li>火狐有一个 textContent 属性，效果跟 innerText 一样，但是 IE678 不支持这个属性</li>
</ul>
<p>书写 innerText 的兼容性代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getInnerText</span>(<span class="params">element</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> element.<span class="property">innerText</span> === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> element.<span class="property">innerText</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> element.<span class="property">textContent</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="行内样式操作（style-属性）"><a href="#行内样式操作（style-属性）" class="headerlink" title="行内样式操作（style 属性）"></a>行内样式操作（style 属性）</h2><blockquote>
<p>标签不仅可以通过 class 属性操作样式 (嵌套样式)，还可以通过 style 属性操作样式 (行内样式)。</p>
<p>同样的 DOM 对象可以通过 className 操作样式 (嵌套样式)，也可以通过 style 属性操作样 (行内样式)。</p>
<p>css : 嵌套样式 &#x3D;&gt; js : 类名 div.className &#x3D; ‘red’</p>
<p>css : 行内样式 &#x3D;&gt; js : style 对象 div.style.color &#x3D; ‘red’</p>
</blockquote>
<h3 id="样式属性"><a href="#样式属性" class="headerlink" title="样式属性"></a>样式属性</h3><ul>
<li>style 属性是一个对象，里面存储了所有行内样式的键值对</li>
<li>style 属性只能获取和设置<strong>行内样式</strong>，嵌套样式通过 style 获取不到</li>
<li>如果样式的名字带 <code>-</code> ，比如 background-color ，在 style 对象中使用 backgroundColor &#x3D;&gt; （因为 <code>-</code> 在 js 中不是一个合法的标识符）</li>
<li>style 设置的样式是行内样式，优先级要高于通过 className 设置的样式</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;color:red;background-color:blue;&quot;</span>&gt;</span>哈哈<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line"><span class="comment">// 获取样式</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">style</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">style</span>.<span class="property">color</span>) <span class="comment">// red</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置样式</span></span><br><span class="line">div.<span class="property">style</span>.<span class="property">width</span> = <span class="string">&#x27;200px&#x27;</span></span><br><span class="line">div.<span class="property">style</span>.<span class="property">height</span> = <span class="string">&#x27;200px&#x27;</span></span><br><span class="line">div.<span class="property">style</span>.<span class="property">fontSize</span> = <span class="string">&#x27;100px&#x27;</span></span><br><span class="line">div.<span class="property">className</span> = <span class="string">&#x27;box&#x27;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>getComputedStyle 获取元素计算后的样式</strong></p>
<p>语法： <code>window.getComputedStyle( 获取的元素， 伪类)</code></p>
<p>​ 伪类 &#x3D;&#x3D;&gt; ::after ::before，如果写上了伪类，表示要获取元素的伪类的样式，如果不需要获取的话，该参数写 null</p>
<p>​ 返回值： 返回一个样式对象</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line"><span class="comment">// 获取元素自身的</span></span><br><span class="line"><span class="keyword">var</span> ret = <span class="variable language_">window</span>.<span class="title function_">getComputedStyle</span>(div, <span class="literal">null</span>).<span class="property">fontSize</span></span><br><span class="line"><span class="keyword">var</span> ret1 = <span class="variable language_">window</span>.<span class="title function_">getComputedStyle</span>(div, <span class="literal">null</span>).<span class="property">backgroundColor</span></span><br><span class="line"><span class="comment">// 推荐：对于复合样式，需要获取什么样式，写具体的样式名，这样能更好的兼容更多浏览器</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取伪类的</span></span><br><span class="line"><span class="keyword">var</span> ret2 = <span class="variable language_">window</span>.<span class="title function_">getComputedStyle</span>(div, <span class="string">&#x27;::after&#x27;</span>).<span class="property">width</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="关于-body-的样式操作"><a href="#关于-body-的样式操作" class="headerlink" title="关于 body 的样式操作"></a>关于 body 的样式操作</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bd = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(bd) <span class="comment">// 通过 querySelector 获取 body 元素</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="property">body</span>) <span class="comment">// 直接获取 body 元素</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">documentElement</span> <span class="comment">// 可以获取 html 元素</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">head</span> <span class="comment">// 直接获取 head 元素</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">title</span> <span class="comment">// 获取的是 title 中的文本</span></span><br></pre></td></tr></table></figure>

<p><strong>【案例：开关灯案例】</strong></p>
<p><strong>【案例：随机背景颜色案例】</strong></p>
<p><strong>【案例：百度换肤】</strong></p>
<h3 id="关于-cssText-了解"><a href="#关于-cssText-了解" class="headerlink" title="关于 cssText (了解)"></a>关于 cssText (了解)</h3><blockquote>
<p>使用 cssText 可以设置 style 的属性值</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 100px; height: 100px&quot;</span>&gt;</span>哈哈哈<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 优点：可以一次性设置多个值</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 缺点：会覆盖整个style属性且不利于阅读</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  div.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&#x27;background:red;color:yellow&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="节点操作-超级重要"><a href="#节点操作-超级重要" class="headerlink" title="节点操作 (超级重要)"></a>节点操作 (超级重要)</h2><h3 id="节点属性-了解"><a href="#节点属性-了解" class="headerlink" title="节点属性 (了解)"></a>节点属性 (了解)</h3><p><strong>节点分类：</strong></p>
<p>​ 元素节点、文本节点、属性节点、注释节点</p>
<p><strong>节点常用的属性</strong></p>
<ul>
<li><p>childNodes : 获取所有的子节点</p>
</li>
<li><p><strong>nodeType</strong>:  节点类型：元素节点 &#x3D; 1 属性-2(过时) 注释-8 文本-3</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQVBJL05vZGUvbm9kZVR5cGU=">nodeType 链接-MDN</span></p>
</li>
<li><p><strong>nodeName</strong>: 节点名称</p>
</li>
<li><p><strong>nodeValue</strong>: 节点值</p>
</li>
</ul>
<h3 id="节点查找-重点"><a href="#节点查找-重点" class="headerlink" title="节点查找 (重点)"></a>节点查找 (重点)</h3><h4 id="孩子节点"><a href="#孩子节点" class="headerlink" title="孩子节点"></a>孩子节点</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 下面是li --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>导航1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>导航2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>导航3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>导航4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> ul = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;ul&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 获取ul所有的子节点（包括了元素节点和其他很多类型的节点，基本不常用）</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ul.<span class="property">childNodes</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 获取第一个子节点  (不常用)</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ul.<span class="property">firstChild</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 获取最后一个子节点  (不常用)</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ul.<span class="property">lastChild</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 获取所有的子元素，兼容性：IE678会把注释节点算上</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ul.<span class="property">children</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 获取第一个子元素 有兼容性问题（IE678）</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ul.<span class="property">firstElementChild</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 获取最后一个子元素 有兼容性问题（IE678）</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ul.<span class="property">lastElementChild</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 获取第n个子元素 有兼容性问题（IE678）</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(ul.<span class="property">children</span>[n])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="兄弟节点"><a href="#兄弟节点" class="headerlink" title="兄弟节点"></a>兄弟节点</h4><ul>
<li><code>nextSibling</code> : 下一个兄弟节点 (基本不常用)</li>
<li><code>nextElementSibling</code> : 下一个兄弟元素（IE678 不兼容）</li>
<li><code>previousSibling</code> : 上一个兄弟节点 (基本不常用)</li>
<li><code>previousElementSibling</code> : 上一个兄弟元素 有兼容性问题 可以封装一个兼容性方法</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>导航1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p&quot;</span>&gt;</span>导航2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>导航3<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> p2 = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.p&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(p2)</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(p2.<span class="property">nextSibling</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(p2.<span class="property">nextElementSibling</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(p2.<span class="property">previousSibling</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(p2.<span class="property">previousElementSibling</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>【案例 1：表单校验】</strong></p>
<h4 id="父亲节点"><a href="#父亲节点" class="headerlink" title="父亲节点"></a>父亲节点</h4><ul>
<li><code>parentNode</code> : 父节点（没有兼容性问题）</li>
<li><code>parentElement</code> : 父元素</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">div.parentNode // 获取父节点</span><br></pre></td></tr></table></figure>

<h3 id="添加节点-重点"><a href="#添加节点-重点" class="headerlink" title="添加节点 (重点)"></a>添加节点 (重点)</h3><h4 id="appendChild"><a href="#appendChild" class="headerlink" title="appendChild()"></a>appendChild()</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 作用：在子元素的最后添加一个元素</span></span><br><span class="line"><span class="comment">// 语法：parent.appendChild(newChild)</span></span><br><span class="line"><span class="comment">// 父元素.appendChild(新子元素)</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>注意</strong> : 如果 newChild 已经存在于 DOM 树中，则它会被从原始位置删除</p>
</blockquote>
<h3 id="insertBefore"><a href="#insertBefore" class="headerlink" title="insertBefore()"></a>insertBefore()</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 作用：在某个子元素之前添加一个元素</span></span><br><span class="line"><span class="comment">// 语法：parent.insertBefore(newChild, refChild)</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>必须要父节点来调用，newChild 为需要添加的那个节点，refChild 为添加到哪一个节点的前面</li>
<li>没有 <code>insertAfter()</code></li>
</ol>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 将元素添加到最后</span></span><br><span class="line">div.<span class="title function_">appendChild</span>(p) <span class="comment">// (常用)</span></span><br><span class="line">div.<span class="title function_">insertBefore</span>(p, <span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将元素添加到 s1 之前(常用)</span></span><br><span class="line">div.<span class="title function_">insertBefore</span>(p, s1)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将元素添加到 s1 之后</span></span><br><span class="line"><span class="comment">// 没有 insertAfter</span></span><br><span class="line">div.<span class="title function_">insertBefore</span>(p, s1.<span class="property">nextElementSibling</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将元素添加到最前</span></span><br><span class="line">div.<span class="title function_">insertBefore</span>(p, div.<span class="property">children</span>[<span class="number">0</span>]) <span class="comment">// (常用)</span></span><br><span class="line">div.<span class="title function_">insertBefore</span>(p, div.<span class="property">firstElementChild</span>)</span><br></pre></td></tr></table></figure>

<h3 id="克隆节点-重点"><a href="#克隆节点-重点" class="headerlink" title="克隆节点 (重点)"></a>克隆节点 (重点)</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法：var newNode = 节点.cloneNode([isDeep])</span></span><br><span class="line"><span class="comment">// isDeep参数：false / true</span></span><br><span class="line"><span class="comment">// false：默认值：是浅复制，只会复制标签节点本身，不会复制节点的孩子</span></span><br><span class="line"><span class="comment">// true:   深度复制，会复制标签，还会复制标签的所有内容</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>克隆出来的节点跟原来的节点没有关系了，修改了也不会相互影响</li>
<li>如果克隆的节点带了 id，我们需要给 id 重新设置一个值，不让 id 冲突</li>
</ol>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> newNode = div.<span class="title function_">cloneNode</span>(<span class="literal">true</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(newNode)</span><br></pre></td></tr></table></figure>

<h3 id="创建节点-3-种方式-重点"><a href="#创建节点-3-种方式-重点" class="headerlink" title="创建节点(3 种方式) (重点)"></a>创建节点(3 种方式) (重点)</h3><h4 id="document-write（基本不用）"><a href="#document-write（基本不用）" class="headerlink" title="document.write（基本不用）"></a>document.write（基本不用）</h4><p>可以生成新的节点，但是不推荐使用。如果页面已经加载完成了，再用 document.write 写内容的话，会把之前的页面给覆盖掉</p>
<blockquote>
<p>原理：页面从上往下加载的时候，会开启一个文档流，当页面加载完，文档流就会关闭。document.write 的本意就是在文档流上写入内容。如果页面没加载完成，文档流还是开着的，document.write 直接在这个文档流上写东西，如果页面加载完成了，还是用 document.write 写东西，会重新开启一个新的文档流，往新的文档流上写东西，旧的文档流就被新的文档流覆盖了。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;呵呵&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="innerHTML-偶尔用"><a href="#innerHTML-偶尔用" class="headerlink" title="innerHTML (偶尔用)"></a>innerHTML (偶尔用)</h4><p>innerHTML 也可以创建节点</p>
<blockquote>
<p>使用 innerHTML 创建节点时，如果原来有内容的话，会把原先的内容覆盖</p>
<p>慎用：很容易出现效率问题</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">div.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;h1&gt;哈哈&lt;/h1&gt;&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="createElement-常用"><a href="#createElement-常用" class="headerlink" title="createElement (常用)"></a>createElement (常用)</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法：var element = document.createElement(&#x27;tagName&#x27;)</span></span><br><span class="line"><span class="comment">// 返回：一个元素</span></span><br><span class="line"><span class="comment">// 需要配合 appendChild 和 innerText 来使用</span></span><br><span class="line"><span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> h1 = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;h1&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(h1)</span><br><span class="line">h1.<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">h1.<span class="property">innerText</span> = <span class="string">&#x27;哈&#x27;</span></span><br><span class="line">div.<span class="title function_">appendChild</span>(h1)</span><br></pre></td></tr></table></figure>

<h3 id="删除节点-重点"><a href="#删除节点-重点" class="headerlink" title="删除节点 (重点)"></a>删除节点 (重点)</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法：parent.removeChild(child)</span></span><br><span class="line"><span class="comment">// 解析：父元素.removeChild(子元素)</span></span><br><span class="line"><span class="comment">// 功能：由父元素调用，删除里面的一个子元素</span></span><br><span class="line"></span><br><span class="line">div.<span class="title function_">removeChild</span>(p)</span><br><span class="line">p.<span class="property">parentNode</span>.<span class="title function_">removeChild</span>(p)</span><br></pre></td></tr></table></figure>

<p><strong>【案例 : 节点操作-删除节点】</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> 使用 children 和 <span class="title class_">TagName</span>  =&gt;  需要配合 i--</span><br><span class="line"><span class="comment">// 原因 :动态计算 , 每删除一个,都会重新分配一次下标</span></span><br><span class="line"><span class="number">2.</span> 使用 <span class="title function_">querySelectorAll</span>(<span class="string">&#x27;li&#x27;</span>) =&gt;  ok的</span><br><span class="line"><span class="comment">// 原因 : 静态计算</span></span><br></pre></td></tr></table></figure>

<p><strong>[案例 : 许愿墙案例]</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">功能<span class="number">1</span>: 克隆<span class="number">10</span>个tip, 并且随机分布</span><br><span class="line">功能<span class="number">2</span>: 点击提高层级</span><br><span class="line">功能<span class="number">3</span>: 点击x, 删除当前tip</span><br><span class="line">功能<span class="number">4</span>: 双击tip头部, 删除当前tip</span><br></pre></td></tr></table></figure>

<h3 id="替换节点"><a href="#替换节点" class="headerlink" title="替换节点"></a>替换节点</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法：</span></span><br><span class="line"><span class="comment">// newChild 为用来替换 oldChild 的新节点</span></span><br><span class="line">parentNode.<span class="title function_">replaceChild</span>(newChild, oldChild)</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>注意</strong> : 如果 newChild 已经存在于 DOM 树中，则它会被从原始位置删除</p>
</blockquote>
<h3 id="节点操作综合案例"><a href="#节点操作综合案例" class="headerlink" title="节点操作综合案例"></a>节点操作综合案例</h3><p>【动态生成表格】</p>
<h1 id="BOM"><a href="#BOM" class="headerlink" title="BOM"></a>BOM</h1><blockquote>
<p>BOM（Browser Object Model）：浏览器对象模型，提供了一套操作浏览器功能的工具</p>
</blockquote>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@img/img/20210102205413.png"></p>
<p><strong>重点</strong> ：定时器、 offset 系列</p>
<h2 id="window"><a href="#window" class="headerlink" title="window"></a><code>window</code></h2><ul>
<li>window 对象是一个全局对象，也可以说是 JavaScript 中的顶级对象</li>
<li>所有定义在全局作用域中的变量、函数都会变成 window 对象的属性和方法</li>
<li>像 document、alert()、console.log() 这些都是 window 的属性，其实 BOM 中基本所有的属性和方法都是 window 的</li>
<li>window 对象下的属性和方法调用的时候可以省略 window</li>
</ul>
<h3 id="onload（掌握）"><a href="#onload（掌握）" class="headerlink" title=".onload（掌握）"></a>.onload（掌握）</h3><blockquote>
<p>window.onload 事件会在 <strong>窗体加载完成</strong> 后执行，通常我们称之为入口函数。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">//代码会在窗体加载完成后执行。</span></span><br><span class="line">  <span class="comment">//窗体加载完成 包括文档树(DOM html)的加载、还有图片、文件的加载完成。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果有图片加载，那么代码一定要写到 window.onload 里面，否则会出现图片没有加载完成，获取到的宽度和高度不对的情况。</p>
<p>浏览器会对页面的加载做优化，在加载图片的时候，图片的引入会延迟。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;img src=<span class="string">&quot;./01.png&quot;</span> alt=<span class="string">&quot;&quot;</span>&gt;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> img = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(img.<span class="property">width</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(img.<span class="property">height</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="open-与-close-了解"><a href="#open-与-close-了解" class="headerlink" title=".open() 与 .close() (了解)"></a>.open() 与 .close() (了解)</h3><ul>
<li>window.open() 打开一个窗口</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法：window.open(url, [name], [features])</span></span><br><span class="line"><span class="comment">// 参数1：需要载入的 url 地址</span></span><br><span class="line"><span class="comment">// 参数2：新窗口的名称或者 targt 属性</span></span><br><span class="line"><span class="comment">// _blank:如果指定为 _blank，表示在新的窗口打开</span></span><br><span class="line"><span class="comment">// 参数3：窗口的属性，指定窗口的大小</span></span><br><span class="line"><span class="comment">// 返回值：会返回刚刚创建的那个窗口，在 window.close() 时使用</span></span><br><span class="line"><span class="comment">// 示例：</span></span><br><span class="line"><span class="keyword">var</span> newWin = <span class="variable language_">window</span>.<span class="title function_">open</span>(<span class="string">&#x27;http://www.baidu.com&#x27;</span>, <span class="string">&#x27;_blank&#x27;</span>, <span class="string">&#x27;width=300,height=300&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数配置：https://developer.mozilla.org/zh-CN/docs/Web/API/Window/open</span></span><br></pre></td></tr></table></figure>

<ul>
<li>window.close() 关闭窗口</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">newWin.<span class="title function_">close</span>() <span class="comment">// newWin 是刚刚创建的那个窗口</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">close</span>() <span class="comment">// 把当前窗口给关闭</span></span><br></pre></td></tr></table></figure>

<h2 id="延时器与定时器-重点"><a href="#延时器与定时器-重点" class="headerlink" title="延时器与定时器 (重点)"></a>延时器与定时器 (重点)</h2><h3 id="setTimeout-延时器"><a href="#setTimeout-延时器" class="headerlink" title="setTimeout 延时器"></a>setTimeout 延时器</h3><blockquote>
<p>可以在延迟一定时间后执行指定的代码</p>
</blockquote>
<p><strong>设置延时器</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法: setTimeOut(callback,time)</span></span><br><span class="line"><span class="comment">// 参数1: 回调函数, 时间到了就会执行</span></span><br><span class="line"><span class="comment">// 参数2: 延时的时间  毫秒为单位 1s = 1000毫秒</span></span><br><span class="line"><span class="comment">// 返回 : 延时器的id,用于清除</span></span><br><span class="line"><span class="keyword">var</span> timer = <span class="title function_">setTimeOut</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">//1秒后将执行一次</span></span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure>

<p><strong>清除延时器</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法 : clearTimeOut(timerId)</span></span><br><span class="line"><span class="comment">// 参数 : 延时器id</span></span><br><span class="line"><span class="comment">// 示例 :</span></span><br><span class="line"><span class="title function_">clearTimeOut</span>(timer) <span class="comment">// 清除上面定义的延时器</span></span><br></pre></td></tr></table></figure>

<h3 id="setInterval-定时器"><a href="#setInterval-定时器" class="headerlink" title="setInterval 定时器"></a>setInterval 定时器</h3><blockquote>
<p>setInterval 方法重复调用一个函数或执行一个代码段，在每次调用之间具有固定的时间间隔。 (每隔一段时间执行一段代码)</p>
<p>定时器除非清除，否则会一直执行下去。</p>
</blockquote>
<p><strong>设置定时器</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法 :var timerId = setInterval(func,dealy)</span></span><br><span class="line"><span class="comment">// 参数1 ： 重复执行的函数</span></span><br><span class="line"><span class="comment">// 参数2 : 每次间隔的毫秒数</span></span><br><span class="line"><span class="comment">// 返回 : 定时器的id,  用于清除</span></span><br><span class="line"><span class="comment">// 示例 :</span></span><br><span class="line"><span class="keyword">var</span> timer = <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 1s 之后开始重复执行</span></span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure>

<p><strong>清除定时器</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法 : clearInterval(intervalId)</span></span><br><span class="line"><span class="comment">// 参数 : 定时器id</span></span><br><span class="line"><span class="comment">// 示例 :</span></span><br><span class="line"><span class="built_in">clearInterval</span>(timerId) <span class="comment">// 清除上面的定时器</span></span><br></pre></td></tr></table></figure>

<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><p>【短信验证码案例.html】</p>
<h2 id="location-对象"><a href="#location-对象" class="headerlink" title="location 对象"></a>location 对象</h2><blockquote>
<p>location 对象也是 window 的一个属性</p>
<p>location 其实对应的就是浏览器中的地址栏</p>
</blockquote>
<h3 id="常用属性和方法"><a href="#常用属性和方法" class="headerlink" title="常用属性和方法"></a>常用属性和方法</h3><ul>
<li>location.href : 控制地址栏的地址，实现页面跳转</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  location.<span class="property">href</span> = <span class="string">&#x27;http://www.baidu.com&#x27;</span> <span class="comment">// 点击页面跳转到百度首页</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>[案例 : 注册成功，3 秒后跳转]</p>
<blockquote>
<p><strong>页面跳转：</strong></p>
<p><code>location.href = &#39;url地址&#39;</code></p>
<p><code>location.assign(&#39;url地址&#39;)</code></p>
<p><code>location.replace(&#39;url地址&#39;)</code> (不记录历史)</p>
</blockquote>
<ul>
<li>location.reload() 让页面重新加载</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  location.<span class="title function_">reload</span>() <span class="comment">// 重新刷新</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>location 的其他值</p>
<blockquote>
<p><code>http://www.bbb.com:8080/index.html?id=666&amp;psd=123#xxx</code></p>
<ul>
<li>location.hash &#x2F;&#x2F;哈希值 其实就是锚点 &#x3D;&#x3D;&gt; #xxx</li>
<li>location.host &#x2F;&#x2F;服务器 服务器名+端口号 &#x3D;&gt; <span class="exturl" data-url="aHR0cDovL3d3dy5iYmIuY29tOjgwODAv">www.bbb.com:8080</span></li>
<li>location.hostname &#x2F;&#x2F;服务器名 &#x3D;&gt; <span class="exturl" data-url="aHR0cDovL3d3dy5iYmIuY29tLw==">www.bbb.com</span></li>
<li>location.pathname &#x2F;&#x2F;路径名 &#x3D;&gt; index.html</li>
<li>location.port &#x2F;&#x2F;端口 &#x3D;&gt; 8080</li>
<li>location.protocol &#x2F;&#x2F;协议 &#x3D;&gt; http</li>
<li><strong>location.search</strong> &#x2F;&#x2F;参数 &#x3D;&gt; ?id&#x3D;666&amp;psd&#x3D;123</li>
</ul>
</blockquote>
</li>
</ul>
<h2 id="其他对象"><a href="#其他对象" class="headerlink" title="其他对象"></a>其他对象</h2><ul>
<li>history 对象表示页面的历史</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 随便打开一个网页 可以演示</span></span><br><span class="line"><span class="comment">// 后退：</span></span><br><span class="line">history.<span class="title function_">back</span>()</span><br><span class="line">history.<span class="title function_">go</span>(-<span class="number">1</span>)</span><br><span class="line"><span class="comment">// 前进：</span></span><br><span class="line">history.<span class="title function_">forward</span>()</span><br><span class="line">history.<span class="title function_">go</span>(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>screen 对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(screen.<span class="property">width</span>) <span class="comment">// 屏幕的宽度</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(screen.<span class="property">height</span>) <span class="comment">// 屏幕的高度</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(screen.<span class="property">availWidth</span>) <span class="comment">// 浏览器可占用的宽度</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(screen.<span class="property">availHeight</span>) <span class="comment">// 浏览器可占用的高度</span></span><br></pre></td></tr></table></figure>

<h2 id="缓动动画"><a href="#缓动动画" class="headerlink" title="缓动动画"></a>缓动动画</h2><h3 id="缓动动画初体验"><a href="#缓动动画初体验" class="headerlink" title="缓动动画初体验"></a>缓动动画初体验</h3><p>动画公式 :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> step = (target - current) / <span class="number">10</span></span><br><span class="line">current += step</span><br></pre></td></tr></table></figure>

<p>[案例演示 : ]</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. 三步走</span><br><span class="line">- 获取当前位置</span><br><span class="line">- 累加小碎步</span><br><span class="line">- 重复赋值回去</span><br><span class="line">2. 定时器</span><br></pre></td></tr></table></figure>

<p><strong>缺点</strong> : 打开控制台, 查看盒子的结构行内样式 left, 发现并没有跑到 400px, 只能跑到 396.4&#x2F;395.5</p>
<p><strong>原因</strong> : offsetLeft 获取值的时候, 只会获取整数 , (对小数部分会四舍五入,整数有时候往上取整,有时候往下取整); <strong>可以在获取的 offset 地方打印查看</strong></p>
<h3 id="缓动动画-移动-400-位置"><a href="#缓动动画-移动-400-位置" class="headerlink" title="缓动动画 - 移动 400 位置"></a>缓动动画 - 移动 400 位置</h3><p>动画公式 :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> step = (target - current) / <span class="number">10</span></span><br><span class="line">step = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(step) <span class="comment">// 往上取整</span></span><br><span class="line">current += step</span><br><span class="line"></span><br><span class="line"><span class="comment">// 为什么往上取整 :</span></span><br><span class="line"><span class="comment">// 1. 如果不取整，赋值为小数的话,下次取值还是会取个 整数回来，这就是之前的缺点</span></span><br><span class="line"><span class="comment">// 2. 往上取整的额原因是：(400-395)/10 = 0.5 如果往下取整为0，那就不会走了，所以</span></span><br><span class="line"><span class="comment">// 为了保证可以走，往上取整 取 1  步数 为 1</span></span><br></pre></td></tr></table></figure>

<p>案例演示 注意点 :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>查看位置 : left有时候为 <span class="number">395.5</span>/ <span class="number">396.4</span></span><br><span class="line"><span class="number">2.</span>打印: <span class="function"><span class="params">offsetLeft</span>  =&gt;</span> <span class="number">395</span> / <span class="number">396</span></span><br><span class="line"><span class="number">3.</span>step为整数  往上取整</span><br></pre></td></tr></table></figure>

<h3 id="缓动动画-回到-0-点位置"><a href="#缓动动画-回到-0-点位置" class="headerlink" title="缓动动画 - 回到 0 点位置"></a>缓动动画 - 回到 0 点位置</h3><p>动画公式 :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> step = (target - current) / <span class="number">10</span></span><br><span class="line">step = <span class="title class_">Math</span>.<span class="title function_">floor</span>(step) <span class="comment">//往下取整</span></span><br><span class="line">current += step</span><br><span class="line"></span><br><span class="line"><span class="comment">// 为什么往下取整 :</span></span><br><span class="line"><span class="comment">// 1. 如果不取整，赋值为小数的话,下次取值还是会取个整数回来，这就是之前的缺点</span></span><br><span class="line"><span class="comment">// 2. 往上取整的额原因是 : (0-5)/10 = -0.5 如果往上取整为0  那就不会走了，所以</span></span><br><span class="line"><span class="comment">// 为了保证可以走，往下取整 : 取 -1    步数 为 -1</span></span><br></pre></td></tr></table></figure>

<p>案例演示注意点 :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> 先把盒子 设置 left : 400px 位置;  回到<span class="number">0</span>位置</span><br><span class="line"><span class="number">2.</span> 查看位置 : left有时候为 <span class="number">4.5</span></span><br><span class="line"><span class="number">3.</span> 打印: <span class="function"><span class="params">offsetLeft</span>  =&gt;</span> <span class="number">5</span></span><br><span class="line"><span class="number">4.</span> step为整数  往下取整</span><br></pre></td></tr></table></figure>

<h3 id="缓动动画-封装函数"><a href="#缓动动画-封装函数" class="headerlink" title="缓动动画 - 封装函数"></a>缓动动画 - 封装函数</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">animate</span>(<span class="params">element, target</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (element.<span class="property">timerId</span>) &#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(element.<span class="property">timerId</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  element.<span class="property">timerId</span> = <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 1. 获取当前位置</span></span><br><span class="line">    <span class="keyword">var</span> current = element.<span class="property">offsetLeft</span></span><br><span class="line">    <span class="comment">// 2. 累加小碎步</span></span><br><span class="line">    <span class="keyword">var</span> step = (target - current) / <span class="number">10</span></span><br><span class="line">    <span class="comment">// 往上取整 ? 为什么，因为 0.5 如果网下取整也是0 ，不会走</span></span><br><span class="line">    step = step &gt; <span class="number">0</span> ? <span class="title class_">Math</span>.<span class="title function_">ceil</span>(step) : <span class="title class_">Math</span>.<span class="title function_">floor</span>(step)</span><br><span class="line">    current += step <span class="comment">// 1</span></span><br><span class="line">    <span class="comment">// 3. 重新赋值</span></span><br><span class="line">    element.<span class="property">style</span>.<span class="property">left</span> = current + <span class="string">&#x27;px&#x27;</span> <span class="comment">//400</span></span><br><span class="line">    <span class="keyword">if</span> (current == target) &#123;</span><br><span class="line">      <span class="built_in">clearInterval</span>(element.<span class="property">timerId</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">15</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>[案例 : 筋斗云]</p>
<p>[案例：开机提示关闭]</p>
<h2 id="事件对象"><a href="#事件对象" class="headerlink" title="事件对象"></a>事件对象</h2><h3 id="事件对象的概述"><a href="#事件对象的概述" class="headerlink" title="事件对象的概述"></a>事件对象的概述</h3><blockquote>
<p>在<strong>触发某个事件</strong>的时候，都会产生一个<strong>事件对象 Event</strong>，这个对象中<strong>包含所有与事件相关的一些信息</strong>，包括触发事件的元素，事件的类型以及其他与事件相关的信息</p>
</blockquote>
<p><strong>鼠标</strong>事件<strong>触发</strong>时，事件对象中会包含<strong>鼠标的位置信息</strong>。</p>
<p><strong>键盘</strong>事件<strong>触发</strong>时，事件对象中会包含<strong>按下的键相关的信息</strong>。</p>
<h3 id="获取事件对象"><a href="#获取事件对象" class="headerlink" title="获取事件对象"></a>获取事件对象</h3><p><strong>现代浏览器获取 : (掌握)</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 给一个形参即可</span></span><br><span class="line">btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">  <span class="comment">// e 就是事件对象，里面包含了事件触发时的一些信息</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(e)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>低版本浏览器 (ie678): (了解)</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// IE678 通过 window.event 获取事件对象</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">event</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>兼容性 :</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">  <span class="comment">// 只要用到了事件对象，就要记得处理浏览器兼容性</span></span><br><span class="line">  <span class="comment">// 低版本IE event 不存在为undefined</span></span><br><span class="line">  e = e || <span class="variable language_">window</span>.<span class="property">event</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="事件对象的常用属性"><a href="#事件对象的常用属性" class="headerlink" title="事件对象的常用属性"></a>事件对象的常用属性</h3><blockquote>
<p>事件对象中有很多很多的属性，但是很多属性并不常用。我们经常用到的是<strong>鼠标位置信息</strong>和<strong>键盘码</strong>相关的信息</p>
</blockquote>
<h4 id="鼠标位置信息"><a href="#鼠标位置信息" class="headerlink" title="鼠标位置信息"></a>鼠标位置信息</h4><ul>
<li><code>clientX</code> 与 <code>clientY</code> ： 相对于<strong>浏览器可视区</strong>左上角的位置（不随滚动条滚动而改变）</li>
<li><code>pageX</code> 与 <code>pageY</code> ：相对于<strong>网页内容</strong>（文档 document）左上角的位置</li>
<li><code>screenX</code> 与 <code>screenY</code> ：相对于<strong>屏幕</strong>左上角的位置</li>
<li><code>offsetX</code> 与 <code>offsetY</code> ：鼠标相对于<strong>事件源</strong>左上角的位置</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">onmousemove</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">clientX</span>, e.<span class="property">clientY</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">pageX</span>, e.<span class="property">pageY</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">screenX</span>, e.<span class="property">screenY</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@img/img/20210102205438.png"></p>
<p><strong>[案例 : 拖拽案例]</strong></p>
<h4 id="键盘码"><a href="#键盘码" class="headerlink" title="键盘码"></a>键盘码</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 键盘按下的那个键的键盘码</span></span><br><span class="line">e.<span class="property">keyCode</span></span><br></pre></td></tr></table></figure>

<h3 id="注册事件的两种方式"><a href="#注册事件的两种方式" class="headerlink" title="注册事件的两种方式"></a>注册事件的两种方式</h3><h4 id="on-事件名称"><a href="#on-事件名称" class="headerlink" title="on + 事件名称"></a>on + 事件名称</h4><blockquote>
<p>onclick、onmouseover 这种 on+事件名称的方式注册事件几乎所有的浏览器都支持</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 注册事件</span></span><br><span class="line">box.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 事件处理程序</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 移除事件</span></span><br><span class="line">box.<span class="property">onclick</span> = <span class="literal">null</span></span><br></pre></td></tr></table></figure>

<p>on+事件名称注册事件的缺点：同一个元素同一类型的事件，只能注册一个，如果注册了多个，会出现覆盖问题</p>
<h4 id="addEventListener"><a href="#addEventListener" class="headerlink" title="addEventListener"></a>addEventListener</h4><blockquote>
<p>现代浏览器支持的注册事件的新方式，这种方式注册的事件不会出现覆盖问题</p>
</blockquote>
<p><strong>addEventListener 的语法</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// type：事件的类型：click mouseover  字符串类型，不带 on</span></span><br><span class="line"><span class="comment">// fn：函数，每次点击，执行这个函数</span></span><br><span class="line"><span class="comment">// useCapture: 可选，true：事件在捕获阶段执行，false: 事件在冒泡阶段执行(默认)</span></span><br><span class="line">element.<span class="title function_">addEventListener</span>(type, fn, useCapture)</span><br><span class="line">btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;哈哈&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>removeEventListen 的语法</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// type：事件的类型</span></span><br><span class="line"><span class="comment">// fn：要移除的那个函数</span></span><br><span class="line">element.<span class="title function_">removeEventListener</span>(type, fn)</span><br><span class="line">btn.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;click&#x27;</span>, fn)</span><br><span class="line"><span class="comment">// 注意 : 如果想让注册的事件能移除，不能用匿名函数</span></span><br></pre></td></tr></table></figure>

<p>低版本浏览器兼容问题: (了解)</p>
<blockquote>
<p>IE678 不支持 addEventListener 与 removeEventListen 两个方法，但是支持 attachEvent 与 detachEvnet</p>
</blockquote>
<p>attachEvent 的用法：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// type: 事件类型，需要加上on</span></span><br><span class="line"><span class="comment">// fn: 需要执行的那个事件</span></span><br><span class="line"><span class="title function_">attachEvent</span>(type, fn)</span><br><span class="line">btn.<span class="title function_">attachEvent</span>(<span class="string">&#x27;onclick&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;哈哈&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>detachEvent 的用法：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">detachEvent</span>(type, fn)</span><br></pre></td></tr></table></figure>

<h4 id="兼容性封装（了解）"><a href="#兼容性封装（了解）" class="headerlink" title="兼容性封装（了解）"></a>兼容性封装（了解）</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 添加事件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">addEvent</span>(<span class="params">element, type, fn</span>) &#123;</span><br><span class="line">  <span class="comment">// 能力检测</span></span><br><span class="line">  <span class="keyword">if</span> (element.<span class="property">addEventListener</span>) &#123;</span><br><span class="line">    element.<span class="title function_">addEventListener</span>(type, fn)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.<span class="property">attachEvent</span>) &#123;</span><br><span class="line">    element.<span class="title function_">attachEvent</span>(<span class="string">&#x27;on&#x27;</span> + type, fn)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 如果都不行，那就用on方式</span></span><br><span class="line">    element[<span class="string">&#x27;on&#x27;</span> + type] = fn</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移除事件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">removeEvent</span>(<span class="params">element, type, fn</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (element.<span class="property">removeEventListener</span>) &#123;</span><br><span class="line">    element.<span class="title function_">removeEventListener</span>(type, fn, <span class="literal">false</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.<span class="property">detachEvent</span>) &#123;</span><br><span class="line">    element.<span class="title function_">detachEvent</span>(<span class="string">&#x27;on&#x27;</span> + type, fn)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    element[<span class="string">&#x27;on&#x27;</span> + type] = <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="事件流"><a href="#事件流" class="headerlink" title="事件流"></a>事件流</h2><h3 id="事件冒泡"><a href="#事件冒泡" class="headerlink" title="事件冒泡"></a>事件冒泡</h3><p>当一个元素的事件被触发时，同样的事件将会在该元素的所有祖先元素中依次被触发。这一过程被称为冒泡</p>
<p>说白了就是：<strong>当我们触发了子元素的某个事件后，父元素对应的事件也会触发</strong></p>
<p>on 创建的事件默认为冒泡，无法修改</p>
<p><strong>[案例 : 弹窗案例]</strong></p>
<p><strong>阻止事件冒泡</strong> <code>e.stopPropagation()</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">box.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">  e.<span class="title function_">stopPropagation</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数1：true =&gt; 捕获， false =&gt; 冒泡（默认）</span></span><br><span class="line">box.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;, 参数<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p><code>event.stopImmediatePropagation</code></p>
<p>阻止事件冒泡并且阻止相同事件的其他侦听器被调用<br>如果有多个相同类型事件的事件监听函数绑定到同一个元素，当该类型的事件触发时，它们会按照被添加的顺序执行。如果其中某个监听函数执行了 <code>event.stopImmediatePropagation()</code> 方法，则当前元素剩下的监听函数将不会被执行</p>
<p>阻止事件冒泡的兼容性封装</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">stopPropagation</span>(<span class="params">e</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (e &amp;&amp; e.<span class="property">stopPropagation</span>) &#123;</span><br><span class="line">    e.<span class="title function_">stopPropagation</span>() <span class="comment">// 标准浏览器</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">cancelBubble</span> = <span class="literal">true</span> <span class="comment">// 兼容 IE</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="事件捕获"><a href="#事件捕获" class="headerlink" title="事件捕获"></a>事件捕获</h3><p>事件冒泡是 ie 提出来的</p>
<p>路径 : 触发事件的目标元素(son) &gt; you &gt; father &gt; body &gt; document</p>
<p>事件捕获是火狐提出来的</p>
<p>路径 : document &gt; body &gt; father &gt; you &gt; 触发事件的目标元素 (son)</p>
<p>解析 : 事件的处理将从 DOM 层次的根开始，而不是从触发事件的目标元素开始，事件被从目标元素的所有祖先元素依次往下传递</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 当 addEventListener 第三个参数为 true 时，表示事件捕获</span></span><br><span class="line">arr[i].<span class="title function_">addEventListener</span>(</span><br><span class="line">  <span class="string">&#x27;click&#x27;</span>,</span><br><span class="line">  <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">true</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="事件流的三个阶段"><a href="#事件流的三个阶段" class="headerlink" title="事件流的三个阶段"></a>事件流的三个阶段</h3><ol>
<li>事件的捕获阶段</li>
<li>事件的目标阶段（触发自己的事件）</li>
<li>事件的冒泡阶段</li>
</ol>
<p>事件有三个阶段 :</p>
<ul>
<li>捕获事件和冒泡事件都存在的话，首先发生的是捕获阶段，然后是目标阶段，最后才是冒泡阶段</li>
<li>addEventListener 第三个参数为是否捕获</li>
<li>如果为 true 时，表示该事件在捕获阶段发生</li>
<li>如果为 false 时，表示该事件在冒泡阶段发生</li>
<li>某一个事件只会执行一次</li>
</ul>
<h2 id="三大系列"><a href="#三大系列" class="headerlink" title="三大系列"></a>三大系列</h2><h3 id="offset-系列-重要"><a href="#offset-系列-重要" class="headerlink" title="offset 系列 (重要)"></a>offset 系列 (重要)</h3><blockquote>
<p>offset 系列用于用于<strong>获取元素自身的大小和位置</strong>，在 webapi 中有广泛应用<br>offset 系列主要有：offsetHeight、offsetWidth、offsetParent、offsetLeft、offsetTop</p>
</blockquote>
<p><strong>offsetHeight 与 offsetWidth</strong></p>
<ul>
<li>获取元素真实的高度和宽度 （内容大小 + border + padding）（关注盒子本身，不关注盒子内部内容）</li>
<li>获取到的是数值类型，方便计算</li>
<li>offsetHeight 与 offsetWidth 是只读属性，不能设置</li>
</ul>
<blockquote>
<p>style.height 与 style.width</p>
<ul>
<li>只能获取和设置行内样式</li>
<li>不包括内边距、边框和外边距</li>
<li>获取到的是字符串类型，需要转换</li>
</ul>
</blockquote>
<p><strong>offsetParent</strong></p>
<ul>
<li>获取离当前元素最近的<strong>定位父元素</strong>(absolute、relative)，如果没有，那就找 body</li>
</ul>
<blockquote>
<p>parentNode : 父节点（没有兼容性问题）</p>
<p>parentElement : 父元素</p>
</blockquote>
<p><strong>offsetLeft 与 offsetTop</strong></p>
<ul>
<li>获取元素自身与 offsetParent 真实的距离</li>
<li>获取到的是数值类型，方便计算</li>
<li>只读属性，只能获取，不能设置</li>
</ul>
<blockquote>
<p>style.left 与 style.top</p>
<ul>
<li>只能获取和设置行内样式</li>
<li>获取到的是字符串，需要转换</li>
</ul>
</blockquote>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@img/img/20210102205502.png"></p>
<h3 id="scroll-系列"><a href="#scroll-系列" class="headerlink" title="scroll 系列"></a>scroll 系列</h3><blockquote>
<p>scroll 系列是用来获取<strong>盒子内容的大小和位置</strong></p>
<p>scroll 系列主要有 : scrollWidth、scrollHeight、scrollLeft、scrollTop</p>
</blockquote>
<p><strong>scrollWidth 与 scrollHeight</strong></p>
<ul>
<li>scrollWidth 与 scrollHeight 是盒子内容的宽度和高度。与盒子大小无关，仅仅与<strong>盒子的内容</strong>有关系（padding + 内容）</li>
<li>如果内容没有溢出，scrollHeight 就是盒子高度 (scrollWidth 同理) &#x3D;&gt; 与 clientHeight、clientWidth 相同</li>
<li>如果内容超过盒子，scrollHieght 就是内容高度 (scrollWidth 同理)</li>
</ul>
<p><strong>scrollTop</strong></p>
<ul>
<li>scrollTop 用于获取内容垂直滚动的像素数。如果没有滚动条，那么 scrollTop 值是 0</li>
<li>内容超过盒子，盒子设置 overflow: scroll 就可出现滚动条</li>
<li>此属性是可读写的</li>
</ul>
<p><strong>scrollLeft</strong></p>
<ul>
<li>scrollLeft 用于获取内容水平滚动的像素数</li>
<li>此属性是可读写的</li>
<li>浏览器切忌这种出现水平滚动条，用户体验极差，避免</li>
</ul>
<p><strong>scrollX 与 scrollY</strong></p>
<ul>
<li><p>只读属性</p>
</li>
<li><p>scrollY：文档在垂直方向已滚动的像素值<br>pageYOffset 属性是 scrollY 属性的别名<br>为了跨浏览器兼容，请使用 window.pageYOffset 代替 window.scrollY</p>
</li>
</ul>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@img/img/20210102205527.png"></p>
<p><strong>onscroll 事件</strong></p>
<p>对于有滚动条的盒子，可以使用 onscroll 注册滚动事件，每滚动一像素，就会触发该事件</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> div = doucment.<span class="title function_">getElementById</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">div.<span class="property">onscroll</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">scrollLeft</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">scrollTop</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>场景 : 获取页面被卷去的高度和宽度</strong></p>
<blockquote>
<p>通常来说，scroll 家族用的最多的地方就是用来获取页面 <strong>被卷去的高度</strong>，非常的常用</p>
</blockquote>
<ul>
<li>对于老式的浏览器，需要获取 html 或者 body 的 scrollTop</li>
<li>对于现在浏览器，使用 window.pageYOffset 进行获取</li>
</ul>
<p>页面被卷去的高度和宽度的兼容性封装</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 给整个页面注册滚动事件</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">onscroll</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> scrollTop = <span class="variable language_">window</span>.<span class="property">pageYOffset</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> || <span class="number">0</span></span><br><span class="line">  <span class="keyword">var</span> scrollLeft = <span class="variable language_">window</span>.<span class="property">pageXOffset</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollLeft</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollLeft</span> || <span class="number">0</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(scrollLeft, scrollTop)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>[案例 : 固定导航案例]</strong></p>
<h3 id="client-家族"><a href="#client-家族" class="headerlink" title="client 家族"></a>client 家族</h3><blockquote>
<p>clien t 家族用于获取盒子可视区的大小 (内容 + padding)</p>
<p>client 家族有 clientWidth、clientHeight、clientLeft、clientTop</p>
</blockquote>
<p><strong>clientWidth、clientHeight 可视区宽高</strong></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@img/img/20210102205558.png"></p>
<p><strong>clientTop</strong> 与 <strong>clientLeft</strong> 完全没有用，他们就是 borderTop 与 borderLeft</p>
<p><strong>onresize 事件：onresize 事件会在窗口被调整大小的时候发生。</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onresize</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 事件处理程序</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>场景 : client 系列一般用来获取页面的可视区宽高</strong></p>
<blockquote>
<p>低版本浏览器 : 获取的 html 和 body</p>
<p>高版本的浏览器 : window.innerWidth (掌握)（只读属性）</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 因为求的是窗口大小所以用 window</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onresize</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> W = <span class="variable language_">window</span>.<span class="property">innerWidth</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientWidth</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(W)</span><br><span class="line">  <span class="keyword">var</span> H = <span class="variable language_">window</span>.<span class="property">innerHeight</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientHeight</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(H)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wqdy.top/428.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="c">
      <meta itemprop="description" content="分享各类资源、经验与技巧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我全都要">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/428.html" class="post-title-link" itemprop="url">sublime 插件、快捷键</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <date title="创建时间：2018-09-12" itemprop="dateCreated datePublished" datetime="2018-09-12T22:32:42+00:00">2018-09-12</date>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/c/%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">教程</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><ul>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9wYWNrYWdlY29udHJvbC5pby9wYWNrYWdlcy9TdWJsaW1lJTIwVHV0b3I=">Sublime Tutor</span> ：键盘快捷方式教程<br>Help &gt; Sublime Tutor</p>
</li>
<li><p>AlignTab ：自定义快捷键</p>
</li>
</ul>
<h2 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h2><ul>
<li><code>Ctrl + X</code> 如果已经选中文本，则剪切该文本。如果未选中任何文本，则剪切光标所在行</li>
<li><code>Ctrl + Z</code> 撤消</li>
<li><code>Ctrl + Shift + V</code> 缩进粘贴</li>
<li><code>Ctrl + Shift + Z</code> 或 <code>Ctrl + Y</code> 恢复</li>
<li><code>Ctrl + L</code> Select line - Repeat to select next lines</li>
<li><code>Ctrl + D</code> Select word - Repeat select others occurrences</li>
<li><code>Ctrl + Shift + D</code> 如果已经选中文本，则复制该文本。如果未选中任何文本，则复制光标所在行</li>
<li><code>Ctrl + Enter</code> Insert line after</li>
<li><code>Ctrl + Shift + Enter</code> Insert line before</li>
<li><code>Alt + F3</code> 选择所有相同单词的实例</li>
<li><code>Tab</code> 或 <code>Ctrl + ]</code> 缩进</li>
<li><code>Shift + Tab</code> 或 <code>Ctrl + [</code> 取消缩进</li>
<li><code>Ctrl + Shift + K</code> Delete Line</li>
<li><code>Ctrl + KK</code> Delete from cursor to end of line</li>
<li><code>Ctrl + K + Backspace</code> Delete from cursor to start of line</li>
<li><code>Alt + Shift + W</code> 使用标签包裹选中部分</li>
<li><code>Ctrl + ←</code> 移动光标至上一个词</li>
<li><code>Ctrl + →</code> 移动光标至下一个词</li>
<li><code>Ctrl + Shift + ↓</code> Move line&#x2F;selection down</li>
<li><code>Ctrl + Shift + ↑</code> Move line&#x2F;selection up</li>
<li><code>Home</code> 移动光标至行首</li>
<li><code>End</code> 移动光标至行尾</li>
<li><code>Ctrl + Home</code> 移动光标至文档开头</li>
<li><code>Ctrl + End</code> 移动光标至文档结尾</li>
<li><code>Ctrl + M</code> 跳转到左&#x2F;右圆括号、方括号、大括号</li>
<li><code>Ctrl + Shift + M</code> 选择括号内的内容</li>
<li><code>Ctrl + R</code> 跳转到定义</li>
<li><code>Ctrl + /</code> Comment&#x2F;un-comment current line</li>
<li><code>Ctrl + Shift + /</code> Block comment current selection</li>
<li><code>Ctrl + N</code> 新建标签</li>
<li><code>Ctrl + PgUp</code> 向左切换标签</li>
<li><code>Ctrl + PgDn</code> 向右切换标签</li>
<li><code>Ctrl + W</code> 关闭标签</li>
<li><code>Ctrl + Shift + T</code> 重新打开标签</li>
<li><code>Shift + 鼠标右键</code> 竖向选择</li>
<li><code>Ctrl + Shift + &#39;</code> 选择与光标关联的开始和结束标签</li>
<li><code>Ctrl + Shift + A</code> 选择容器内内容</li>
<li><code>Ctrl + Shift + ;</code> 移除与你的光标相关的父标签(清除标记)</li>
<li><code>Ctrl + Shift + Y</code> 计算数学表达式</li>
<li><code>Alt + ↓&amp;↑</code> 以 0.1 的步长改变数字</li>
<li><code>Alt + Shift + ↓&amp;↑</code> 以 10 的步长改变数字</li>
<li><code>Ctrl + ↓&amp;↑</code> 以 1 的步长改变数字</li>
<li><code>Ctrl+K+U</code> <code>Ctrl+K+L</code> 改变大小写</li>
</ul>
<p><span class="exturl" data-url="aHR0cDovL3N1YmxpbWUuZW1wdHlzdGFjay5uZXQv">http://sublime.emptystack.net/</span></p>
<h2 id="issues"><a href="#issues" class="headerlink" title="issues"></a>issues</h2><ol>
<li></li>
</ol>
<blockquote>
<p>“Error: 404 Not Found<br>Sorry, the requested URL ‘<span class="exturl" data-url="aHR0cDovLzEyNy4wLjAuMTo1MTAwNC92aWV3LzI5Jw==">http://127.0.0.1:51004/view/29&#39;</span> caused an error:<br>‘buffer_id(29) is not valid (closed or unsupported file format)’<br>NOTE: If you run multiple instances of Sublime Text, you may want to adjust the server_port option in order to get this plugin work again.”</p>
</blockquote>
<p>Quick Fix 1: Remove Strikethrough Extension</p>
<p><code>Sublime Text &gt; Preferences &gt; Package Settings &gt; OmniMarkupPreviewer &gt; Settings - User</code><br>paste the following to remove the strikeout package.</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"> &#123;</span><br><span class="line">  &#x27;renderer_options-markdownrenderer&#x27;: &#123;</span><br><span class="line">    &quot;extensions&quot;:[<span class="string">&quot;tables&quot;</span>,<span class="string">&quot;fenced_code&quot;</span>,<span class="string">&quot;codehilite&quot;</span>] ;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Quick Fix 2: Fix the Strikethrough Extension (if you need it)</p>
<p>Find the python-markdown sublime package.</p>
<p><code>/Packages/OmniMarkupPreviewer/OmniMarkupLib/Renderers/libs/mdx_strikeout.py</code></p>
<p>Replace the makeExtension() method with the following:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">makeExtension</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">    <span class="keyword">return</span> StrikeoutExtension(*args, **kwargs)</span><br><span class="line">Save, quit <span class="keyword">and</span> reload Sublime Text.</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wqdy.top/426.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="c">
      <meta itemprop="description" content="分享各类资源、经验与技巧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我全都要">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/426.html" class="post-title-link" itemprop="url">Markdown 语法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <date title="创建时间：2018-09-12" itemprop="dateCreated datePublished" datetime="2018-09-12T22:31:19+00:00">2018-09-12</date>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/c/%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">教程</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Markdown-基本语法"><a href="#Markdown-基本语法" class="headerlink" title="Markdown 基本语法"></a>Markdown 基本语法</h2><p>待…</p>
<h2 id="Markdown-使用技巧"><a href="#Markdown-使用技巧" class="headerlink" title="Markdown 使用技巧"></a>Markdown 使用技巧</h2><h3 id="换行"><a href="#换行" class="headerlink" title="换行"></a>换行</h3><ul>
<li>方法 1：连续两个以上空格+回车</li>
<li>方法 2：使用 html 语言换行标签：<code>&lt;br&gt;</code></li>
</ul>
<h3 id="居中"><a href="#居中" class="headerlink" title="居中"></a>居中</h3><ul>
<li>使用 align 属性</li>
<li>使用<code>&lt;center&gt;</code>标签（HTML5 不支持）</li>
</ul>
<h3 id="首行缩进两个字符"><a href="#首行缩进两个字符" class="headerlink" title="首行缩进两个字符"></a>首行缩进两个字符</h3><ul>
<li><code>&amp;nbsp;</code> 不换行空格，全称 No-Break Space</li>
<li><code>&amp;ensp;</code> 半角的空格，全称是 En Space</li>
<li><code>&amp;emsp;</code> 全角的空格，全称是 Em Space，占据的宽度正好是 1 个中文宽度</li>
</ul>
<h3 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h3><ul>
<li><code>*斜体*或_斜体_</code></li>
<li><code>**粗体**</code></li>
<li><code>***加粗斜体***</code></li>
<li><code>~~删除线~~</code></li>
<li>字号与颜色：使用内嵌 HTML</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">&quot;#0099ff&quot;</span> <span class="attr">size</span>=<span class="string">&quot;3&quot;</span> <span class="attr">face</span>=<span class="string">&quot;黑体&quot;</span>&gt;</span>color=#0099ff size=3 face=&quot;黑体&quot;<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>效果：<font color=#0099ff size=3 face="黑体">color&#x3D;#0099ff size&#x3D;3 face&#x3D;”黑体”</font></p>
<h3 id="背景色"><a href="#背景色" class="headerlink" title="背景色"></a>背景色</h3><p>使用内嵌 HTML 借助 table，tr，td 等表格标签的 bgcolor 属性</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;orange&quot;</span>&gt;</span>背景色是：orange<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>效果：<table><tr><td bgcolor=orange>背景色是：orange</td></tr></table></p>
<h3 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h3><p>在一行中用三个以上的星号 <code>*</code> 、减号 <code>-</code> 、底线 <code>_</code> 来建立一个分隔线，中间用空格隔开，行内不能有其他东西。（除第一个符号的左侧最多添加三个空格外三个相同符号两侧可以添加任意多个空格）</p>
<h3 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h3><h4 id="文字"><a href="#文字" class="headerlink" title="文字"></a>文字</h4><ul>
<li>行内式：<code>[文字](url &quot;title&quot;)</code></li>
<li>参考式：<code>[文字][1]</code> <code>[1]:url &quot;title&quot;</code></li>
<li>自动链接：<code>&lt;url&gt;</code>，将链接用&lt;&gt;包起来，Markdown 会自动把它转成链接。</li>
</ul>
<h3 id="图片："><a href="#图片：" class="headerlink" title="图片："></a>图片：</h3><ul>
<li>行内式：<code>![alt_text](url &quot;title&quot;)</code></li>
</ul>
<blockquote>
<p><code>alt_text</code>：图片的 alt 标签，用来描述图片的关键词，可以不写。最初的本意是当图片因为某种原因不能被显示时而出现的替代文字，后来又被用于 SEO，可以方便搜索引擎根据 <code>alt_text</code> 里面的关键词搜索到图片。 url：可以是图片的本地地址或者是网址。”title”：鼠标悬置于图片上会出现的标题文字，可以不写。</p>
</blockquote>
<ul>
<li><p>参考式：同上</p>
</li>
<li><p>使用 img 标签：<code>&lt;img src=&quot;&quot; width=&quot;&quot; height=&quot;&quot;&gt;</code>，<code>&lt;div align=center&gt;&lt;/div&gt;</code> 实现居中</p>
</li>
</ul>
<h3 id="折叠按钮"><a href="#折叠按钮" class="headerlink" title="折叠按钮"></a>折叠按钮</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">details</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">summary</span>&gt;</span></span><br><span class="line">    点击展开</span><br><span class="line">  <span class="tag">&lt;/<span class="name">summary</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 内部展示内容 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">details</span>&gt;</span></span><br></pre></td></tr></table></figure>

<details>
  <summary>
    点击展开
  </summary>

<p>设置小三角样式：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">summary</span>::-webkit-details-marker &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#42b983</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</details>

<h2 id="Markdown-编辑器"><a href="#Markdown-编辑器" class="headerlink" title="Markdown 编辑器"></a>Markdown 编辑器</h2><p><span class="exturl" data-url="aHR0cHM6Ly93d3cudHlwb3JhLmlvLw==">typora</span></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://wqdy.top/421.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="c">
      <meta itemprop="description" content="分享各类资源、经验与技巧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我全都要">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/421.html" class="post-title-link" itemprop="url">git 版本控制系统</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <date title="创建时间：2018-09-12" itemprop="dateCreated datePublished" datetime="2018-09-12T22:28:19+00:00">2018-09-12</date>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/c/frontend/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="为什么要有版本控制系统"><a href="#为什么要有版本控制系统" class="headerlink" title="为什么要有版本控制系统"></a>为什么要有版本控制系统</h2><p>在开发过程中，经常需要对一个文件进行修改甚至删除，但是我们又希望能够保存这个文件的历史记录，如果通过备份，那么管理起来会非常的复杂</p>
<h2 id="什么是版本控制系统"><a href="#什么是版本控制系统" class="headerlink" title="什么是版本控制系统"></a>什么是版本控制系统</h2><blockquote>
<p>版本控制系统（Version Control System）:是一种记录一个或若干文件内容变化，以便将来查阅特定版本修订情况的系统。</p>
</blockquote>
<p>版本控制系统不仅可以应用于软件源代码的文本文件，而且可以对任何类型的文件进行版本控制。</p>
<h2 id="版本控制系统的分类"><a href="#版本控制系统的分类" class="headerlink" title="版本控制系统的分类"></a>版本控制系统的分类</h2><p>参考文章：<span class="exturl" data-url="aHR0cHM6Ly9naXQtc2NtLmNvbS9ib29rL3poL3YxLyVFOCVCNSVCNyVFNiVBRCVBNS0lRTUlODUlQjMlRTQlQkElOEUlRTclODklODglRTYlOUMlQUMlRTYlOEUlQTclRTUlODglQjY=">关于版本控制的介绍</span></p>
<h3 id="本地版本控制系统"><a href="#本地版本控制系统" class="headerlink" title="本地版本控制系统"></a>本地版本控制系统</h3><p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@img/img/20210102202248.png"></p>
<p>本地版本控制系统就是在一台机器上，记录版本的不同变化，保证内容不会丢失</p>
<ol>
<li>如果多人开发，每个人都在不同的系统和电脑上开发，没办法协同工作。</li>
</ol>
<h3 id="集中式版本控制系統"><a href="#集中式版本控制系統" class="headerlink" title="集中式版本控制系統"></a>集中式版本控制系統</h3><p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@img/img/20210102202303.png"></p>
<p><code>svn</code> 是集中式的版本控制系统，集中式版本控制系统都有一个单一的集中管理的服务器（中央服务器），保存所有文件的修订版本，而协同工作的人们都通过客户端连到这台服务器，取出最新的文件或者提交更新。</p>
<ol>
<li>需要一个中央服务器来管理代码的的版本和备份</li>
<li>所有的用户电脑都是从中央服务器获取代码或者是将本地的代码提交到中央服务器</li>
<li>依赖与网络环境，如果连不上中央服务器，就无法提交和获取代码。</li>
</ol>
<h3 id="分布式版本控制系统"><a href="#分布式版本控制系统" class="headerlink" title="分布式版本控制系统"></a>分布式版本控制系统</h3><p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@img/img/20210102202325.png"></p>
<p><code>git</code> 是分布式的版本控制系统。分布式版本控制系统的客户端并不只提取最新版本的文件快照，而是把代码仓库完整地镜像下来。这么一来，任何一处协同工作用的服务器发生故障，事后都可以用任何一个镜像出来的本地仓库恢复。因为每一次的提取操作，实际上都是一次对代码仓库的完整备份</p>
<ol>
<li>需要一台服务器作为代码仓库</li>
<li>每个用户电脑都是一个服务器（代码仓库），并且和代码仓库是镜像的，用户修改和获取代码都是提交到自己的服务器当中。</li>
<li>不需要网络就可以进行工作。</li>
<li>当连接网络时，用户可以选择将自己的服务器与代码仓库进行同步。</li>
</ol>
<h1 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h1><p><span class="exturl" data-url="aHR0cHM6Ly9naXQtc2NtLmNvbS9ib29rL3poL3Yy">git 官方中文文档</span></p>
<h2 id="Git-核心概念"><a href="#Git-核心概念" class="headerlink" title="Git 核心概念"></a>Git 核心概念</h2><ul>
<li><p>**<code>WorkSpace</code>**：<br>工作区，即从仓库中 checkout 出来的，需要通过 Git 进行版本控制的目录和文件，可以简单的理解为在电脑里真实看到的文件</p>
</li>
<li><p>**<code>Stage(Index)</code>**：<br>暂存区，或者叫做待提交更新区；在提交进入 Repository 之前，可以把所有的更新放在暂存区, 用 <code>git add</code> 的文件都在这里</p>
</li>
<li><p>**<code>Repository(Remote/Local)</code>**：<br>仓库，一个存放在远端&#x2F;本地的版本库，用 <code>git commit</code> 提交的文件就到 Local Repository,用 <code>git push</code> 提交的文件就到 Remote Repository</p>
</li>
<li><p>**<code>.git</code>**：存放 Git 管理信息的目录，初始化仓库的时候会自动创建</p>
</li>
</ul>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@img/img/20210102202341.jpeg"></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@img/img/20210102202402.png"></p>
<h2 id="Git-初始设置"><a href="#Git-初始设置" class="headerlink" title="Git 初始设置"></a>Git 初始设置</h2><h3 id="设置用户名和邮箱"><a href="#设置用户名和邮箱" class="headerlink" title="设置用户名和邮箱"></a>设置用户名和邮箱</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 用户名使用英文</span></span><br><span class="line"><span class="comment"># --global 全局设置</span></span><br><span class="line">git config --global user.name <span class="string">&#x27;your_name&#x27;</span></span><br><span class="line">git config --global user.email <span class="string">&#x27;your_email@example.com&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看账号信息</span></span><br><span class="line">git config --list</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重置信息</span></span><br><span class="line">git config --<span class="built_in">unset</span> -- user.name</span><br></pre></td></tr></table></figure>

<p>全局设置会在 <code>~/.gitconfig</code> 中以如下形式输出设置文件，可以直接编辑这个文件来修改设置</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[user]</span><br><span class="line">name = your_name</span><br><span class="line">email = your_email@example.com</span><br></pre></td></tr></table></figure>

<p>每个仓库的 Git 配置文件都放在 <code>.git/config</code> 文件中，可以直接修改此文件<br><code>$ cat .git/config</code> 查看配置文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解决中文变成数字加百分号，也可以在设置中将编码修改为 utf-8</span></span><br><span class="line">git config --global core.quotepath <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h3 id="设置-SSH-Key"><a href="#设置-SSH-Key" class="headerlink" title="设置 SSH Key"></a>设置 SSH Key</h3><p>GitHub 上连接已有仓库时的认证，是通过使用了 SSH 的公开密钥认证方式进行的。现在我们来创建公开密钥认证所需的 SSH Key，并将其添加至 GitHub</p>
<p>运行下面的命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;your_email@example.com&quot;</span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key(/Users/your_user_directory/.ssh/id_rsa):按回车键</span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):输入密码</span><br><span class="line">Enter same passphrase again:再次输入密码</span><br></pre></td></tr></table></figure>

<p>输入密码后会出现以下结果</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Your identification has been saved <span class="keyword">in</span> /Users/your_user_directory/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /Users/your_user_directory/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:SHA256:hbn1zPihlVDe/Y2FvzzZU8l+AOSlVRlaOmro/nTQDGg cui3155@gmail.com(fingerprint值+your_email@example.com)</span><br><span class="line">The key<span class="string">&#x27;s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 2048]----+</span></span><br><span class="line"><span class="string">|            o o++|</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="string">|        . . .   +|</span></span><br><span class="line"><span class="string">|         ...     |</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br></pre></td></tr></table></figure>

<p><code>id_rsa</code> 文件是私有密钥，<code>id_rsa.pub</code> 是公开密钥</p>
<h3 id="添加公开密钥"><a href="#添加公开密钥" class="headerlink" title="添加公开密钥"></a>添加公开密钥</h3><p>在 GitHub 中添加公开密钥，今后就可以用私有密钥进行认证了<br>点击右上角的账户设定按钮（Account Settings），选择 SSH Keys 菜单。点击 AddSSH Key 之后，在 Title 中输入适当的密钥名称。Key 部分请粘贴 id_rsa.pub 文件里的内容</p>
<p><code>id_rsa.pub</code> 的内容可以用如下方法查看</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> ~/.ssh/id_rsa.pub</span><br><span class="line">ssh-rsa公开密钥的内容your_email@example.com</span><br></pre></td></tr></table></figure>

<p>完成以上设置后，就可以用手中的私人密钥与 GitHub 进行认证和通信了</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh -T git@github.com</span><br><span class="line">The authenticity of host <span class="string">&#x27;github.com (192.30.255.113)&#x27;</span> can<span class="string">&#x27;t be established.</span></span><br><span class="line"><span class="string">RSA key fingerprint is (fingerprint值).</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no)?输入yes</span></span><br><span class="line"><span class="string">Warning: Permanently added &#x27;</span>github.com,192.30.255.113<span class="string">&#x27; (RSA) to the list of known hosts.</span></span><br><span class="line"><span class="string">Enter passphrase for key &#x27;</span>/c/Users/C.DESKTOP-3S4APJ4/.ssh/id_rsa<span class="string">&#x27;:</span></span><br></pre></td></tr></table></figure>

<p>出现如下结果即为成功</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Hi cuilongjin! You<span class="string">&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span></span><br></pre></td></tr></table></figure>

<h3 id="提高命令输出的可读性"><a href="#提高命令输出的可读性" class="headerlink" title="提高命令输出的可读性"></a>提高命令输出的可读性</h3><p>将 <code>color.ui</code> 设置为 <code>auto</code> 可以让命令的输出拥有更高的可读性</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global color.ui <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p><code>~/.gitconfig</code> 中会增加下面一行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[color]</span><br><span class="line">ui = <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>这样一来，各种命令的输出就会变得更容易分辨。</p>
<h3 id="文件名大小写问题"><a href="#文件名大小写问题" class="headerlink" title="文件名大小写问题"></a>文件名大小写问题</h3><p>git 默认对文件名大小写不敏感</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 设置 git 大小写敏感</span></span><br><span class="line">git config core.ignorecase <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者先删除文件在添加进去</span></span><br></pre></td></tr></table></figure>

<h3 id="设置头像"><a href="#设置头像" class="headerlink" title="设置头像"></a>设置头像</h3><p>通过 Gravatar 服务</p>
<h3 id="配置别名"><a href="#配置别名" class="headerlink" title="配置别名"></a>配置别名</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 配置 st 别名表示 status</span></span><br><span class="line">git config --global alias.st status</span><br><span class="line"></span><br><span class="line">git config --global alias.co checkout</span><br><span class="line">git config --global alias.ci commit</span><br><span class="line">git config --global alias.br branch</span><br><span class="line">git config --global alias.unstage <span class="string">&#x27;reset HEAD&#x27;</span></span><br><span class="line">git config --global alias.last <span class="string">&#x27;log -1&#x27;</span></span><br><span class="line"></span><br><span class="line">git config --global alias.lg <span class="string">&quot;log --color --graph --pretty=format:&#x27;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#x27; --abbrev-commit&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="搭建-Git-服务器"><a href="#搭建-Git-服务器" class="headerlink" title="搭建 Git 服务器"></a>搭建 Git 服务器</h3><p><span class="exturl" data-url="aHR0cHM6Ly93d3cubGlhb3h1ZWZlbmcuY29tL3dpa2kvMDAxMzczOTUxNjMwNTkyOTYwNmRkMTgzNjEyNDg1NzhjNjdiODA2N2M4YzAxN2IwMDAvMDAxMzc1ODM3NzAzNjA1NzliYzRiNDU4ZjA0NGNlN2FmZWQzZGY1NzkxMjNlY2EwMDA=">搭建 Git 服务器</span></p>
<h3 id="配置多用户"><a href="#配置多用户" class="headerlink" title="配置多用户"></a>配置多用户</h3><p>根据不同邮箱生成对应的私钥公钥</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C email</span><br></pre></td></tr></table></figure>

<p>将公钥上传到对应的用户账号中</p>
<p>在 <code>.ssh</code> 目录创建 <code>config</code> 文件，配置私钥对应的服务器，每个账号单独配置一个 Host，每个 Host 要取一个别名，每个 Host 主要配置 HostName 和 IdentityFile 两个属性即可</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line"># 配置用户1</span><br><span class="line">Host github</span><br><span class="line">HostName github.com</span><br><span class="line">IdentityFile ~/.ssh/id_rsa_github</span><br><span class="line">User cuilongjin</span><br><span class="line"></span><br><span class="line"># 配置用户2</span><br><span class="line">Host gitlab</span><br><span class="line">HostName git.gitlab.net</span><br><span class="line">IdentityFile ~/.ssh/id_rsa_gitlab</span><br><span class="line">User cuilongjin</span><br></pre></td></tr></table></figure>

<p>Host 的名字可以任意，不过这个会影响 git 相关命令，例如：</p>
<p>Host mygithub 这样定义的话，命令如下</p>
<p><code>git clone git@mygithub:cuilongjin/cuilongjin.git</code></p>
<p>即 git@ 后面紧跟的名字改为 mygithub</p>
<p>执行 <code>ssh -T git@github</code>、<code>ssh -T git@gitlab</code> 测试是否成功</p>
<p>配置局部 git 用户名和邮箱，如果没有局部配置，默认用全局配置</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config user.name <span class="string">&quot;Your name&quot;</span></span><br><span class="line">git config user.email <span class="string">&quot;your_email@gmail.com&quot;</span></span><br></pre></td></tr></table></figure>

<p>或者直接找到 <code>.git/config</code> 文件，添加</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[user]</span><br><span class="line">name = Your name</span><br><span class="line">email = your_email@gmail.com</span><br></pre></td></tr></table></figure>

<h2 id="Git-基本操作"><a href="#Git-基本操作" class="headerlink" title="Git 基本操作"></a>Git 基本操作</h2><h3 id="git-init"><a href="#git-init" class="headerlink" title="git init"></a>git init</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> project</span><br><span class="line"><span class="built_in">cd</span> project</span><br><span class="line">git init</span><br></pre></td></tr></table></figure>

<p>如果初始化成功，执行了 <code>git init</code> 命令的目录下就会生成 <code>.git</code> 目录。这个 <code>.git</code> 目录里存储着管理当前目录内容所需的仓库数据</p>
<blockquote>
<p><code>mkdir project</code> 命令创建 project 空文件夹</p>
</blockquote>
<ul>
<li><code>pwd</code> 命令用于显示当前目录</li>
</ul>
<h3 id="git-add"><a href="#git-add" class="headerlink" title="git add"></a>git add</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将指定文件夹添加到暂存区（目录中的所有文件，包括新增/修改/删除的文件）--not-all 忽略删除的</span></span><br><span class="line">git add 目录名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将 指定文件 添加到暂存区 （文件可以是新增/修改/删除的）</span></span><br><span class="line">git add README.md</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将当前目录下所有的js文件添加到暂存区（文件可以是新增/修改的，不包括删除的）</span></span><br><span class="line">git add *.js</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加当前目录及子目录下件 （文件可以是新增/修改/删除的）</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加当前仓库下所有的文件 （文件可以是新增/修改/删除的）</span></span><br><span class="line">git add -A</span><br><span class="line">git add --all</span><br></pre></td></tr></table></figure>

<h3 id="git-commit"><a href="#git-commit" class="headerlink" title="git commit"></a>git commit</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将文件从暂存区提交到仓库</span></span><br><span class="line">git commit -m <span class="string">&#x27;提交说明&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果是一个已经暂存过的文件，可以快速提交，如果是未追踪的文件，那么命令将不生效。</span></span><br><span class="line">git commit -a -m <span class="string">&#x27;提交说明&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改最近的一次提交说明， 如果提交说明不小心输错了，可以使用这个命令</span></span><br><span class="line">git commit --amend -m <span class="string">&#x27;提交说明&#x27;</span></span><br></pre></td></tr></table></figure>

<p>-m 参数后的 <code>&#39;First commit&#39;</code> 称作提交信息，是对这个提交的概述,如果想要记述得更加详细，请不加 <code>-m</code> ，直接执行 <code>git commit</code> 命令，执行后编辑器就会启动。<br>在编辑器中记述提交信息的格式如下:<br>​ 第一行：用一行文字简述提交的更改内容<br>​ 第二行：空行<br>​ 第三行以后：记述更改的原因和详细内容</p>
<h3 id="git-status"><a href="#git-status" class="headerlink" title="git status"></a>git status</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 建立 README.md 文件作为管理对象</span></span><br><span class="line"><span class="built_in">touch</span> README.md</span><br><span class="line">git status</span><br><span class="line"></span><br><span class="line"><span class="comment"># 简化日志输出格式</span></span><br><span class="line">git stauts -s (short)</span><br></pre></td></tr></table></figure>

<p><code>git status</code> 命令可以让我们时刻掌握仓库当前的状态，但不能看到具体修改了什么内容，需要用 <code>git diff</code> 这个命令来查看具体修改内容。</p>
<h3 id="git-diff"><a href="#git-diff" class="headerlink" title="git diff"></a>git diff</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看当前工作树和最新add之间（暂存区）的差别（difference）</span></span><br><span class="line">git diff</span><br><span class="line"><span class="comment"># 如果尚未用 `git add` 命令向暂存区添加任何东西，则程序只会显示工作树与最新提交状态之间的差别</span></span><br><span class="line"><span class="comment"># “+”号标出的是新添加的行，被删除的行则用“-”号标出</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看README.md文件的修改</span></span><br><span class="line">git diff -- README.md</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看工作树和最新提交的差别</span></span><br><span class="line">git diff HEAD</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看暂存区与仓库区的不同</span></span><br><span class="line">git diff --cached</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看两个版本之间的不同</span></span><br><span class="line">git diff c265262 de4845b</span><br></pre></td></tr></table></figure>

<blockquote>
<p>HEAD 是指向当前分支中最新一次提交的指针</p>
</blockquote>
<h3 id="git-log"><a href="#git-log" class="headerlink" title="git log"></a>git log</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 显示当前版本之前的提交信息</span></span><br><span class="line">git <span class="built_in">log</span></span><br><span class="line">commit 9f129bae19b2c82fb4e98cde5890e52a6c546922</span><br><span class="line">Author: cuilongjin &lt;cuilongjin@gmail.com&gt;</span><br><span class="line">Date: Sun Oct 8 22:08:39 2017 +0900</span><br><span class="line">    First commit</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只显示提交信息的第一行</span></span><br><span class="line">git <span class="built_in">log</span> --pretty=oneline <span class="comment"># 完整显示版本号</span></span><br><span class="line">git <span class="built_in">log</span> --oneline  <span class="comment"># 只显示前7位版本号</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示指定目录、文件的日志</span></span><br><span class="line">git <span class="built_in">log</span> 目录名或文件名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示文件的改动（q键退出命令）</span></span><br><span class="line">git <span class="built_in">log</span> -p 文件名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示所有曾经提交的版本（包括被删除的）</span></span><br><span class="line">git reflog</span><br><span class="line"></span><br><span class="line"><span class="comment"># 图表形式显示</span></span><br><span class="line">git <span class="built_in">log</span> --graph --pretty=<span class="string">&#x27;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an %ae&gt;%Creset&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a>git reset</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git reset -h		<span class="string">&#x27;查看帮助&#x27;</span></span><br><span class="line">--mixed				<span class="string">&#x27;reset HEAD and index&#x27;</span>(默认)</span><br><span class="line">--soft				<span class="string">&#x27;reset only HEAD&#x27;</span></span><br><span class="line">--hard  			<span class="string">&#x27;reset HEAD, index and working tree&#x27;</span></span><br><span class="line">--merge 			<span class="string">&#x27;reset HEAD, index and working tree&#x27;</span></span><br><span class="line">--keep 				<span class="string">&#x27;reset HEAD but keep local changes&#x27;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li><code>HEAD</code> 表示当前版本，上一个版本就是 <code>HEAD^</code> ，上上一个版本就是 <code>HEAD^^</code> ，当然往上 100 个版本写 100 个^比较容易数不过来，所以写成 <code>HEAD~100</code></li>
<li>使用 <code>commit_id</code> 回退 , <code>git reflog</code> 用来记录你的每一次命令和 <code>commit_id</code></li>
</ol>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git reset --soft HEAD^</span><br><span class="line">git reset --hard commit_id</span><br><span class="line">git reset HEAD [file]</span><br></pre></td></tr></table></figure>

<h3 id="git-checkout-–file"><a href="#git-checkout-–file" class="headerlink" title="git checkout –file"></a>git checkout –file</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout -- README.md</span><br></pre></td></tr></table></figure>

<p>把 README.md 文件在 <code>工作区的修改全部撤销</code> ，<strong>用版本库里的版本替换工作区的版本</strong></p>
<p>这里有两种情况：</p>
<ol>
<li><p>一种是 README.md 自修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态</p>
</li>
<li><p>一种是 README.md 已经添加到暂存区后，又作了修改，现在撤销修改就回到添加到暂存区后的状态</p>
</li>
</ol>
<p>总之，就是让这个文件回到最近一次 git commit 或 git add 时的状态，可用于<strong>撤销文件修改或恢复误删文件</strong></p>
<h3 id="git-remote"><a href="#git-remote" class="headerlink" title="git remote"></a>git remote</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git remote add origin git@github.com:cuilongjin/git_test.git</span><br></pre></td></tr></table></figure>

<p>添加后，远程库的名字就是 origin，这是 Git 默认的叫法，也可以改成别的，但是 origin 这个名字一看就知道是远程库</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看远程库的信息</span></span><br><span class="line">git remote -v</span><br><span class="line">origin  git@github.com:cuilongjin/git_test.git (fetch)</span><br><span class="line">origin  git@github.com:cuilongjin/git_test.git (push)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看指定远程库的详细信息</span></span><br><span class="line">git remote show &lt;远程库&gt;</span><br></pre></td></tr></table></figure>

<p>上面显示了可以抓取和推送的 origin 的地址。如果没有推送权限，就看不到 push 的地址</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 删除已有的 GitHub 远程库</span></span><br><span class="line">git remote <span class="built_in">rm</span> origin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改远程库名称</span></span><br><span class="line">git remote rename &lt;原远程库名&gt; &lt;新远程库名&gt;</span><br></pre></td></tr></table></figure>

<h3 id="git-pull"><a href="#git-pull" class="headerlink" title="git pull"></a>git pull</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 获取远程仓库的更新，并且与本地的分支进行合并</span></span><br><span class="line">git pull &lt;远程仓库名&gt; &lt;远程分支名&gt;:&lt;本地分支名&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果远程分支是与当前分支合并，则冒号后面的部分可以省略</span></span><br><span class="line">git pull origin next 等同于 git fetch origin &amp;&amp; git merge origin/next</span><br><span class="line"></span><br><span class="line"><span class="comment"># 远程主机删除了某个分支，默认情况下，git pull 不会在拉取远程分支的时候，删除对应的本地分支</span></span><br><span class="line"><span class="comment"># 加上参数 -p 就会在本地删除远程已经删除的分支</span></span><br><span class="line">$ git pull -p</span><br><span class="line"><span class="comment"># 等同于下面的命令</span></span><br><span class="line">$ git fetch --prune origin</span><br><span class="line">$ git fetch -p</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并 pull 两个不同的项目出现 fatal: refusing to merge unrelated histories</span></span><br><span class="line">git pull origin master ----allow-unrelated-histories</span><br></pre></td></tr></table></figure>

<h3 id="git-push"><a href="#git-push" class="headerlink" title="git push"></a>git push</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git push &lt;远程仓库名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一次推送分支时，加上 -u 参数，git 会把本地分支和远程分支关联起来，在以后的推送或者拉取时就可以简化命令</span></span><br><span class="line">git push -u origin master</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果没有本地分支，表示删除远程分支</span></span><br><span class="line">git push origin :master</span><br><span class="line"><span class="comment"># 等同于</span></span><br><span class="line">$ git push origin --delete master</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以强制覆盖的方式推送修改后的 repo （重新上传 repo）（不指定分支即所有分支）</span></span><br><span class="line">git push origin --force --all</span><br></pre></td></tr></table></figure>

<blockquote>
<p>remote: error: GH007: Your push would publish a private email address.<br>解决方法——<span class="exturl" data-url="aHR0cDovL2dpdGh1Yi5jb20vc2V0dGluZ3MvZW1haWxz">http://github.com/settings/emails</span> 把 Keep my email address private 这一项去掉勾选即可。</p>
</blockquote>
<p>如果推送失败，则因为远程分支比你的本地更新，需要先用 <code>git pull</code> 拉取远程的新提交</p>
<h3 id="git-clone"><a href="#git-clone" class="headerlink" title="git clone"></a>git clone</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:cuilongjin/仓库名.git [指定文件夹]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认远程主机为 origin ， -o 指定主机名</span></span><br><span class="line">git <span class="built_in">clone</span> --o origin1 git@github.com:cuilongjin/仓库名.git</span><br></pre></td></tr></table></figure>

<p>Git 支持多种协议，包括 https，但通过 ssh 支持的原生 git 协议速度最快</p>
<p>从远程库 clone 时，默认情况下，只能看到本地的 master 分支<br>要在 dev 分支上开发，就必须创建远程 origin 的 dev 分支到本地，于是用这个命令创建本地 dev 分支</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout -b dev origin/dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定本地 dev 分支与远程 origin/dev 分支的链接</span></span><br><span class="line">git branch --set-upstream dev origin/dev</span><br></pre></td></tr></table></figure>

<p>克隆指定分支</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># git clone -b|--branch 分支名或tag名 仓库地址</span></span><br></pre></td></tr></table></figure>

<h3 id="git-fetch"><a href="#git-fetch" class="headerlink" title="git fetch"></a>git fetch</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将某个远程仓库的更新，全部取回本地。默认取回所有分支（branch）的更新</span></span><br><span class="line">git fetch &lt;远程仓库&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 取回特定分支的更新</span></span><br><span class="line">git fetch &lt;远程仓库&gt; &lt;分支名&gt;</span><br></pre></td></tr></table></figure>

<p>git fetch 和 git pull 区别</p>
<ul>
<li><p>git pull 获取远程仓库的更新，并且与本地的分支进行合并</p>
</li>
<li><p>git fetch 所取回的更新，在本地主机上要用 “远程仓库&#x2F;分支名” 的形式读取，即不会与本地分支合并</p>
</li>
</ul>
<h3 id="git-忽视文件"><a href="#git-忽视文件" class="headerlink" title="git 忽视文件"></a>git 忽视文件</h3><p>在仓库中，有些文件是不想被 git 管理的，比如数据的配置密码、写代码的一些思路等。git 可以通过配置从而达到忽视掉一些文件，这样这些文件就可以不用提交了</p>
<p>忽略文件的原则是：</p>
<ul>
<li>忽略操作系统自动生成的文件，比如缩略图等</li>
<li>忽略编译生成的中间文件、可执行文件等，也就是如果一个文件是通过另一个文件自动生成的，那自动生成的文件就没必要放进版本库，比如 Java 编译产生的 .class 文件</li>
<li>忽略你自己的带有敏感信息的配置文件，比如存放口令的配置文件</li>
</ul>
<p>在仓库的根目录创建一个 <code>.gitignore</code> 的文件，文件名是固定的</p>
<p>将不需要被 git 管理的文件路径添加到 <code>.gitignore</code> 中，把 <code>.gitignore</code> 也提交到 Git，Git 就会自动忽略这些文件</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line"># 忽视 index.txt 文件</span><br><span class="line">index.txt</span><br><span class="line"></span><br><span class="line"># 忽视 .gitignore 文件</span><br><span class="line">.gitignore</span><br><span class="line"></span><br><span class="line"># 忽视 css 下的 index.css 文件</span><br><span class="line">css/index.css</span><br><span class="line"></span><br><span class="line"># 忽视 css 下的所有的 css 文件</span><br><span class="line">css/*.css</span><br><span class="line"></span><br><span class="line"># 忽视 css 下的所有文件</span><br><span class="line">css/*.*</span><br><span class="line"></span><br><span class="line"># 忽视 css 文件夹</span><br><span class="line">css</span><br></pre></td></tr></table></figure>

<p>GitHub 已经为我们准备了各种配置文件 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2dpdGh1Yi9naXRpZ25vcmU=">https://github.com/github/gitignore</span></p>
<p>强制添加被 .gitignore 忽略的文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 强制添加被.gitignore忽略的文件</span></span><br><span class="line">git add -f &lt;file&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查哪个规则忽略了此文件，以便修订规则</span></span><br><span class="line">git check-ignore -v &lt;file&gt;</span><br><span class="line">.gitignore:x:xxx.xx    xxxxxx</span><br></pre></td></tr></table></figure>

<h3 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h3><p>在 git 中，分支实质上仅仅是一个指针，每次代码提交后，这个分支指针就会向后移动，保证一直指向最后一次提交的的版本。git 中使用 HEAD 指向当前分支</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch</span><br><span class="line">* master</span><br><span class="line"></span><br><span class="line">-r 参数查看远程分支</span><br><span class="line">-a 查看所有分支(远程分支会用红色表示出来)</span><br></pre></td></tr></table></figure>

<p><code>*</code>（星号）表示当前所在的分支</p>
<ul>
<li>git checkout -b 创建、切换分支</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 以 branch 为基础创建名为 feature-A 的分支</span></span><br><span class="line">git checkout -b feature-A &lt;branch&gt;</span><br></pre></td></tr></table></figure>

<p>连续执行下面两条命令也能收到同样效果</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建 feature-A 分支</span></span><br><span class="line">git branch feature-A</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将当前分支切换为 feature-A 分支</span></span><br><span class="line">git checkout feature-A</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换回上一个分支</span></span><br><span class="line">git checkout -</span><br></pre></td></tr></table></figure>

<ul>
<li>git branch -d 删除分支</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 删除本地 feature-A 分支</span></span><br><span class="line">git branch -d feature-A</span><br><span class="line"></span><br><span class="line"><span class="comment"># 强行删除本地 feature-A 分支</span></span><br><span class="line">git branch -D feature-A</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除远程 feature-A 分支</span></span><br><span class="line">git push origin :feature-A</span><br><span class="line">或 git push origin --delete feature-A</span><br></pre></td></tr></table></figure>

<ul>
<li>git branch -m 重命名分支</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 重命名本地分支</span></span><br><span class="line">git branch -m old_branch new_branch</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重命名远程分支</span></span><br><span class="line"><span class="comment"># 重命名本地分支 -&gt; 删除远程分支 -&gt; 推送到远程分支</span></span><br></pre></td></tr></table></figure>

<h3 id="git-merge"><a href="#git-merge" class="headerlink" title="git merge"></a>git merge</h3><p>合并分支</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将 feature-A 合并到 master 上</span></span><br><span class="line"><span class="comment"># 首先切换到 master 分支，然后执行</span></span><br><span class="line">git merge [--squash] [--no-ff] -m <span class="string">&quot;描述&quot;</span> feature-A</span><br><span class="line">--squash <span class="comment"># 只是将&lt;branch&gt;中的修改内容迁移过来，而不保留其中的commit历史</span></span><br><span class="line">--no-ff <span class="comment"># 创建合并提交，为了在历史记录中明确记录下本次分支合并</span></span><br></pre></td></tr></table></figure>

<h3 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 把当前工作现场“储藏”起来</span></span><br><span class="line">git stash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看存储的工作现场</span></span><br><span class="line">git stash list</span><br></pre></td></tr></table></figure>

<p>恢复工作现场</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 恢复工作现场，stash 内容并不删除</span></span><br><span class="line">git stash apply</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除 stash 内容</span></span><br><span class="line">git stash drop</span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复的同时把 stash 内容也删了</span></span><br><span class="line">git stash pop</span><br></pre></td></tr></table></figure>

<p>恢复指定的 stash，用命令：<code>git stash apply stash@&#123;0&#125;</code></p>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cubGlhb3h1ZWZlbmcuY29tL3dpa2kvMDAxMzczOTUxNjMwNTkyOTYwNmRkMTgzNjEyNDg1NzhjNjdiODA2N2M4YzAxN2IwMDAvMDAxMzc1ODQwMDM4OTM5YzI5MTQ2N2NjN2M3NDdiMTgxMGFhYjJmYjg4NjM1MDgwMDA=">廖雪峰 Git 教程创建与合并分支</span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cubGlhb3h1ZWZlbmcuY29tL3dpa2kvMDAxMzczOTUxNjMwNTkyOTYwNmRkMTgzNjEyNDg1NzhjNjdiODA2N2M4YzAxN2IwMDAvMDAxMzc1ODQxMDM2NDQ1N2I5ZTNkODIxZjQyNDRiZWIwZmQ2OWM2MWExODVhZTAwMDA=">廖雪峰 Git 教程分支管理策略</span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cubGlhb3h1ZWZlbmcuY29tL3dpa2kvMDAxMzczOTUxNjMwNTkyOTYwNmRkMTgzNjEyNDg1NzhjNjdiODA2N2M4YzAxN2IwMDAvMDAxMzc2MDIzNTkxNzg3OTRkOTY2OTIzZTVjNDEzNGJjOGJmOThkZmIwM2FlYTMwMDA=">廖雪峰 Git 教程 Bug 分支</span></p>
<h3 id="git-tag"><a href="#git-tag" class="headerlink" title="git tag"></a>git tag</h3><ul>
<li>创建标签</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 首先切换到需要打标签的分支上</span></span><br><span class="line"><span class="comment"># 默认标签是打在最新提交的 commit 上的</span></span><br><span class="line">git tag v1.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对指定某一次提交打标签</span></span><br><span class="line">git tag v1.0 &lt;commit <span class="built_in">id</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建带有说明的标签，用 -a 指定标签名，-m 指定说明文字</span></span><br><span class="line">git tag -a v1.0 -m <span class="string">&quot;version1.0 released&quot;</span> &lt;commit <span class="built_in">id</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过 -s 用私钥签名一个标签(需配置gpg密钥对)</span></span><br><span class="line">git tag -s v1.0 -m <span class="string">&quot;signed version1.0 released&quot;</span> &lt;commit <span class="built_in">id</span>&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>查看标签</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看所有标签</span></span><br><span class="line">git tag</span><br><span class="line">v1.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有标签信息</span></span><br><span class="line">git show</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看 v1.0 标签信息</span></span><br><span class="line">git show v1.0</span><br><span class="line">commit <span class="built_in">id</span>:xxx</span><br><span class="line">Author:xxx</span><br><span class="line">Date:xxx</span><br></pre></td></tr></table></figure>

<ul>
<li>推送标签到远程</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 推送 v1.0 标签到远程</span></span><br><span class="line">git push origin v1.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送全部尚未推送的本地标签到远程</span></span><br><span class="line">git push origin --tags</span><br></pre></td></tr></table></figure>

<ul>
<li>删除标签</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 删除本地标签 v1.0</span></span><br><span class="line">git tag -d v1.0</span><br><span class="line"><span class="comment"># 删除远程标签 v1.0</span></span><br><span class="line">git push origin :refs/tags/v1.0</span><br><span class="line">或 git push origin --delete tag v1.0</span><br></pre></td></tr></table></figure>

<h2 id="git-仓库分离"><a href="#git-仓库分离" class="headerlink" title="git 仓库分离"></a>git 仓库分离</h2><p>将一个 git 仓库里的一部分文件转出作为一个独立的仓库并保留提交记录 commit log</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 这就是那个大仓库 big-project</span><br><span class="line">git clone git@github.com:**/big-project.git</span><br><span class="line">cd big-project</span><br><span class="line"># 把所有 `source/page` 目录下的相关提交整理为一个新的分支 page</span><br><span class="line">git subtree split -P source/page -b page</span><br><span class="line"># 另建一个新目录并初始化为 git 仓库</span><br><span class="line">mkdir ../page</span><br><span class="line">cd ../page</span><br><span class="line">git init</span><br><span class="line"># 拉取旧仓库的 page 分支到当前的 master 分支</span><br><span class="line">git pull ../big-project page</span><br></pre></td></tr></table></figure>

<h2 id="快速克隆大项目"><a href="#快速克隆大项目" class="headerlink" title="快速克隆大项目"></a>快速克隆大项目</h2><p>克隆单个分支</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --branch &lt;branch_name&gt; &lt;remote-address&gt;</span><br></pre></td></tr></table></figure>

<p>只克隆最新的提交记录</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> &lt;remote-address&gt; --depth 1</span><br></pre></td></tr></table></figure>

<p>– depth 代表克隆的深度，–depth 1 代表只克隆最新一次提交记录以及这次提交之后的最新内容，不克隆历史提交，所造成的影响就是不能查看历史提交记录</p>
<p>克隆单个分支的最新一次提交</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone --branch &lt;branch_name&gt; &lt;remote-address&gt; --depth 1</span><br></pre></td></tr></table></figure>

<h2 id="git-修改提交历史"><a href="#git-修改提交历史" class="headerlink" title="git 修改提交历史"></a>git 修改提交历史</h2><p>修改最后一条 commit</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git commit --amend</span><br></pre></td></tr></table></figure>

<p>修改多条 commit</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git rebase -i HEAD~3 修改最近三次提交</span><br><span class="line">git rebase -i --root 修改所有提交</span><br><span class="line"></span><br><span class="line">git rebase -i  [startpoint]  [endpoint] 指定了一个编辑区间（不包含[startpoint]），如果不指定[endpoint]，则该区间的终点默认是当前分支 HEAD 所指向的 commit</span><br><span class="line"></span><br><span class="line"><span class="comment"># edit 模式下</span></span><br><span class="line">git commit --amend --author=<span class="string">&quot;author &lt;email&gt;&quot;</span> <span class="comment"># 修改提交人信息</span></span><br><span class="line">git commit --amend  --<span class="built_in">date</span>=<span class="string">&quot;commit_time&quot;</span> <span class="comment"># 修改时间 时间格式 Sat, 24 Dec 2016 18:12:09 +0800</span></span><br></pre></td></tr></table></figure>

<p>Commands</p>
<p><strong>p</strong>, pick &#x3D; use commit: 直接使用 commit 不做任何修改，其中 p 是 pick 的缩写，以下雷同</p>
<p><strong>r</strong>, reword &#x3D; use commit, but edit the commit message: 使用 commit，修改 commit 注释</p>
<p><strong>e</strong>, edit &#x3D; use commit, but stop for amending :使用 commit，但是遇到此命令时会停止合并，可以修改提交信息</p>
<p><strong>s</strong>, squash &#x3D; use commit, but meld into previous commit: 使用 commit，但是会合并到前一个 commit 中，默认保留所有的 commit 注释，并变为可以修改状态</p>
<p><strong>f</strong>, fixup &#x3D; like “squash”, but discard this commit’s log message：和 squash 类似，但是会抛弃 commit 的 log 信息</p>
<p><strong>x</strong>, exec &#x3D; run command (the rest of the line) using shell：使用 shell 运行命令</p>
<p><strong>d</strong>, drop &#x3D; remove commit：丢弃 commit，（并删除该提交所做的修改）</p>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC82N2YyMGQxOTYwNWE=">https://www.jianshu.com/p/67f20d19605a</span></p>
<h2 id="git-bisect"><a href="#git-bisect" class="headerlink" title="git-bisect"></a>git-bisect</h2><p>git 有一个以二分法帮助定位问题的命令——bisect。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 开始二分查找问题</span></span><br><span class="line">git bisect start</span><br><span class="line"><span class="comment"># 标记当前有问题</span></span><br><span class="line">git bisect bad</span><br><span class="line"><span class="comment"># 标记哪个 commit 或 tag 时是没问题的</span></span><br><span class="line">git bisect good v1.0.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 此时 git 会 checkout 两个点之间的某个 commit，</span></span><br><span class="line"><span class="comment"># 如果此时还是有问题：</span></span><br><span class="line">git bisect bad</span><br><span class="line"><span class="comment"># 如果此时没有问题：</span></span><br><span class="line">git bisect good</span><br><span class="line"><span class="comment"># 接着 git 会 checkout 下一个「有问题」和「没问题」之间的 commit</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 直到定位到问题，git 会提示：xxxxxxx is first bad commit</span></span><br></pre></td></tr></table></figure>

<p>参考：<span class="exturl" data-url="aHR0cHM6Ly9naXQtc2NtLmNvbS9ib29rL3poL3YyL0dpdC0lRTUlQjclQTUlRTUlODUlQjctJUU0JUJEJUJGJUU3JTk0JUE4LUdpdC0lRTglQjAlODMlRTglQUYlOTU=">https://git-scm.com/book/zh/v2/Git-工具-使用-Git-调试</span></p>
<h2 id="git-filter-branch"><a href="#git-filter-branch" class="headerlink" title="git filter-branch"></a>git filter-branch</h2><p>彻底删除不需要的文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 删除 ./node_modules 目录</span></span><br><span class="line">git filter-branch -f --prune-empty --index-filter <span class="string">&quot;git rm --cached --ignore-unmatch -fr ./node_modules&quot;</span> -- --all</span><br></pre></td></tr></table></figure>

<p>修改提交用户名</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git filter-branch -f --env-filter <span class="string">&quot;GIT_AUTHOR_NAME=your new author name&quot;</span> -- --all</span><br></pre></td></tr></table></figure>

<p>修改提交邮箱</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git filter-branch -f --env-filter <span class="string">&quot;GIT_AUTHOR_EMAIL=your new author email&quot;</span> -- --all</span><br></pre></td></tr></table></figure>

<h2 id="other"><a href="#other" class="headerlink" title="other"></a>other</h2><h3 id="git-add-的时候遇到warning-LF-will-be-replaced-by-CRLF-in-……-96"><a href="#git-add-的时候遇到warning-LF-will-be-replaced-by-CRLF-in-……-96" class="headerlink" title="git add .的时候遇到warning: LF will be replaced by CRLF in ……&#96;"></a>git add .<code>的时候遇到</code>warning: LF will be replaced by CRLF in ……&#96;</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config core.autocrlf</span><br><span class="line">git config --global core.autocrlf <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># true：添加文件到git仓库时，git将其视为文本文件。他将把crlf变成lf</span></span><br><span class="line"><span class="comment"># false：line-endings将不做转换操作。文本文件保持原来的样子</span></span><br><span class="line"><span class="comment"># input：把crlf转成lf，当有人Check代码时还是lf方式。因此在window操作系统下，不要使用这个设置</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CRLF (carriagereturnlinefeed)：表示句尾使用回车换行两个字符(即Windows编程时使用&quot;\r\n&quot;换行)</span></span><br><span class="line"><span class="comment"># LF(line feed)：表示句尾只使用换行(Unix Style)</span></span><br><span class="line"><span class="comment"># CR：表示只使用回车</span></span><br></pre></td></tr></table></figure>

<h3 id="Git-永久删除文件-包括历史记录"><a href="#Git-永久删除文件-包括历史记录" class="headerlink" title="Git 永久删除文件(包括历史记录)"></a>Git 永久删除文件(包括历史记录)</h3><p><span class="exturl" data-url="aHR0cHM6Ly9oZWxwLmdpdGh1Yi5jb20vYXJ0aWNsZXMvcmVtb3Zpbmctc2Vuc2l0aXZlLWRhdGEtZnJvbS1hLXJlcG9zaXRvcnkv">https://help.github.com/articles/removing-sensitive-data-from-a-repository/</span></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 在仓库的根目录执行</span></span><br><span class="line">git filter-branch --force --index-filter <span class="string">&#x27;git rm --cached --ignore-unmatch 文件路径&#x27;</span> --prune-empty --tag-name-filter <span class="built_in">cat</span> -- --all</span><br><span class="line"><span class="comment"># 文件路径相对于git仓库根目录</span></span><br><span class="line"><span class="comment"># 删除文件夹 添加 -r 命令</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 以强制覆盖的方式推送修改后的 repo （不指定分支即所有分支）（重新上传 repo）</span></span><br><span class="line">git push origin --force --all</span><br><span class="line"></span><br><span class="line"><span class="comment"># 强制推送 tags</span></span><br><span class="line">git push origin --force --tags</span><br><span class="line"></span><br><span class="line"><span class="comment"># 清理和回收空间</span></span><br><span class="line"><span class="built_in">rm</span> -rf .git/refs/original/</span><br><span class="line">git reflog expire --expire=now --all</span><br><span class="line">git gc --prune=now</span><br><span class="line">git gc --aggressive --prune=now</span><br></pre></td></tr></table></figure>

<p>重新<span class="exturl" data-url="aHR0cHM6Ly9naXQtc2NtLmNvbS9ib29rL2VuL0dpdC1CcmFuY2hpbmctUmViYXNpbmc=">绑定</span>，而不是合并创建的旧（受污染）存储库历史记录中的任何分支</p>
<ul>
<li>git 修改已提交的某一次的邮箱和用户信息</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git filter-branch -f --env-filter \</span><br><span class="line"><span class="string">&quot;GIT_AUTHOR_NAME=&#x27;Newname&#x27;; GIT_AUTHOR_EMAIL=&#x27;newemail&#x27;; \</span></span><br><span class="line"><span class="string">GIT_COMMITTER_NAME=&#x27;committed-name&#x27;; GIT_COMMITTER_EMAIL=&#x27;committed-email&#x27;;&quot;</span> HEAD</span><br></pre></td></tr></table></figure>

<h3 id="fork-的项目-A-与原项目-B-保持同步"><a href="#fork-的项目-A-与原项目-B-保持同步" class="headerlink" title="fork 的项目( A )与原项目 (B) 保持同步"></a>fork 的项目( A )与原项目 (B) 保持同步</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将 A 克隆到本地做中转</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加 B 远程仓库地址并拉取</span></span><br><span class="line">git remote add update &lt;B 远程仓库地址&gt;</span><br><span class="line">git fetch update master:updated</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并并解决冲突</span></span><br><span class="line">git merge updated</span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以直接合并远程分支</span></span><br><span class="line">git merge update/master</span><br></pre></td></tr></table></figure>

<h3 id="远程分支删除以后，本地显示仍然存在的解决办法"><a href="#远程分支删除以后，本地显示仍然存在的解决办法" class="headerlink" title="远程分支删除以后，本地显示仍然存在的解决办法"></a>远程分支删除以后，本地显示仍然存在的解决办法</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 显示所有分支：</span></span><br><span class="line">git branch -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 命令查看远程分支和本地分支的对应关系</span></span><br><span class="line">git remote show origin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 会看到</span></span><br><span class="line">refs/remotes/origin/&lt;branch&gt; stale (use <span class="string">&#x27;git remote prune&#x27;</span> to remove)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行下面命令同步删除</span></span><br><span class="line">git remote prune origin</span><br><span class="line">或者</span><br><span class="line">git fetch -p</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/14/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><span class="page-number current">15</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/16/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2015 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">c</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>本站为个人博客，站内所有软件资源均收集自互联网，本站仅做免费分享，不出售。本站内所有软件资源仅限个人用于学习和研究目的，不得将上述内容用于商业或者非法用途，否则，一切后果请用户自负。本站内所有软件必须在下载后的24个小时之内，从您的电脑中彻底删除。本站对任何资源不提供技术支持，遇到问题请自行研究或购买正版。本站信息来自网络，版权争议与本站无关。访问和下载本站内容，说明您已同意上述条款。


    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>



  <script src="/js/third-party/fancybox.js"></script>


  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"cuilongjin/hexo-blog","issue_term":"pathname","theme":"github-light"}</script>
<script src="/js/third-party/comments/utterances.js"></script>

</body>
</html>
