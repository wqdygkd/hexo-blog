<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Adobe Zii 苹果Mac端Adobe软件通用破解工具</title>
    <url>/2021.html</url>
    <content><![CDATA[<p>软件简介：</p>
<p><a href="https://www.adobezii.com/">Adobe Zii</a> 是一个苹果 Ma 端 Adobe 全家桶的通用破解程序，支持 CC 2019，CC 2020，CC 2021。</p>
<p>安装说明：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. 关闭您的互联网连接</span><br><span class="line">2. 安装 Adobe 软件，并点击试用</span><br><span class="line">3. 然后关闭所有 Adobe 软件，启动 Adobe Zii 最新版本</span><br><span class="line">4. 点击“PATCH或DRG”按钮，Zii Patcher 将扫描并修补 MAC 中已安装的所有可访问的 Adobe 软件程序</span><br></pre></td></tr></table></figure>

<p>版本：</p>
<p>Adobe Zii 6.0.6 版本可在 Adobe CC 2021 上运行，完美支持以下版本：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Adobe Acrobat DC v20.012.20048 – 20.013.20074</span><br><span class="line">Adobe After Effects 2020 v17.5-17.6</span><br><span class="line">Adobe Animate 2021 v21.0.0 – 21.0.2</span><br><span class="line">Adobe Audition 2020 v13.0.11 – 13.0.13</span><br><span class="line">Adobe Bridge 2021 v11.0.1</span><br><span class="line">Adobe Character Animator 2020 v3.4</span><br><span class="line">Adobe Dimension v3.4.1</span><br><span class="line">Adobe Dreamweaver 2021 v21.0.0 – 21.1.0</span><br><span class="line">Adobe Illustrator 2021 v25.0.0 – 25.1.0</span><br><span class="line">Adobe InCopy 2021 v16.0.0 – 16.0.2</span><br><span class="line">Adobe InDesign 2021 v16.0.0 – 16.0.2</span><br><span class="line">Adobe Lightroom Classic v10.0 – 10.1.1</span><br><span class="line">Adobe Media Encoder 2020 v14.5 – 14.8</span><br><span class="line">Adobe Photoshop 2021 v22.0.0 – 22.1.1</span><br><span class="line">Adobe Prelude 2020 v9.0.1 – 9.0.3</span><br><span class="line">Adobe Premiere Pro 2020 v14.5 – 14.8</span><br><span class="line">Adobe Premiere Rush v1.5.34 – 1.5.44</span><br><span class="line">Adobe XD v34.0.12 – 36.0.32</span><br><span class="line">Adobe Photoshop Elements 2021</span><br><span class="line">Adobe Premiere Elements 2021</span><br></pre></td></tr></table></figure>

<p>Adobe Zii 5.3.1 版本可在 Adobe CC 2020 上运行，完美支持以下版本：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Adobe Acrobat DC v19.021.20047 – 20.012.20048</span><br><span class="line">Adobe Acrobat DC v19.021.20047 – 20.012.20048</span><br><span class="line">Adobe After Effects 2020 v17.0 – 17.1.4</span><br><span class="line">Adobe Animate 2020 v20.0 – 20.5.1</span><br><span class="line">Adobe Audition 2020 v13.0 – 13.0.10</span><br><span class="line">Adobe Bridge 2020 v10.0 – 10.1.1</span><br><span class="line">Adobe Character Animator 2020 v3.0 – 3.3.1</span><br><span class="line">Adobe Dimension v3.0 – 3.4</span><br><span class="line">Adobe Dreamweaver 2020 v20.0-20.2</span><br><span class="line">Adobe Illustrator 2020 v24.0-24.3</span><br><span class="line">Adobe InCopy 2020 v15.0-15.1.2</span><br><span class="line">Adobe InDesign 2020 v15.0-15.1.2</span><br><span class="line">Adobe Lightroom Classic v9.0 – 9.4</span><br><span class="line">Adobe Media Encoder 2020 v14.0 – 14.4</span><br><span class="line">Adobe Photoshop 2020 v21.0-21.2.4</span><br><span class="line">Adobe Prelude 2020 v9.0 – 9.0.1</span><br><span class="line">Adobe Premiere Pro 2020 v14.0-14.4</span><br><span class="line">Adobe Premiere Rush v1.2.12 – 1.5.29</span><br><span class="line">Adobe XD v24.0 – 33.1.12</span><br><span class="line">Adobe Photoshop Elements 2020 – 2020.1（内部版本20200120.m.139570）</span><br><span class="line">Adobe Premiere Elements 2020 – 2020.1</span><br></pre></td></tr></table></figure>

<p>Adobe Zii 4.5.0 版本可在 Adobe CC 2019 上运行，完美支持以下版本：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">整个Adobe CC 2015 任何版本</span><br><span class="line">Adobe CC 2017 任何版本</span><br><span class="line">Adobe CC 2018 任何版本</span><br><span class="line">Adobe CC 2019 任何版本</span><br><span class="line">Adobe Acrobat DC 19.x – 19.021.20049</span><br><span class="line">Adobe Illustrator CC 2019 v23.1.1</span><br><span class="line">Adobe InCopy CC 2019 v14.0.2</span><br><span class="line">Adobe InDesign CC 2019 v14.0.3</span><br><span class="line">Adobe Prelude CC 2019 v8.1.1</span><br><span class="line">Adobe Premiere Pro CC 2019 v13.1.5</span><br><span class="line">Adobe Premiere Rush CC v1.2.8</span><br><span class="line">Adobe Photoshop CC 2019 v20.0.7</span><br><span class="line">Adobe After Effects CC 2019 v16.1.3</span><br><span class="line">Adobe Media Encoder CC 2019 v13.1.5</span><br><span class="line">Adobe Lightroom Classic CC 2019 v8.4.1</span><br><span class="line">Adobe Lightroom CC 2019 v2.3</span><br><span class="line">Adobe Audition CC 2019 v12.1.5</span><br><span class="line">Adobe Bridge CC 2019 v9.1.0.338</span><br><span class="line">Adobe Dreamweaver CC 2019 v19.2.1</span><br><span class="line">Adobe XD CC v23.1.32.2</span><br><span class="line">Adobe Character Animator CC 2019 v2.1.1</span><br><span class="line">Adobe Animate CC 2019 v19.2.1</span><br><span class="line">Acrobat DC v19.010.20099</span><br><span class="line">Adobe Dimension CC v2.1</span><br><span class="line">Adobe Premiere Rush CC v1.1</span><br></pre></td></tr></table></figure>

<p>下载链接：<a href="https://pan.baidu.com/s/1kDYtpIpNhc2emRZ_zR_vvg">百度云</a></p>
]]></content>
      <categories>
        <category>软件</category>
      </categories>
      <tags>
        <tag>adobe</tag>
        <tag>软件</tag>
        <tag>破解</tag>
      </tags>
  </entry>
  <entry>
    <title>AutoRclone 配合 Gclone 在 Google Drive 账号之间、谷歌团队盘之间快速拷贝、传输学习资料</title>
    <url>/1472.html</url>
    <content><![CDATA[<h3 id="将实现的功能"><a href="#将实现的功能" class="headerlink" title="将实现的功能"></a>将实现的功能</h3><p>从本地服务器传输到 Google Team Drive<br>从他人分享的链接拷贝到 Google Team Drive<br>从一个 Google Team Drive 传输到另一个 Google Team Drive<br>以上都不受 750G 流量限制</p>
<p>如果没有团队盘，可以参考<a href="https://wqdy.top/1207.html">这里</a>自助申请</p>
<p>本文以 ubuntu 为例，当然直接在本地 Windows 上也是可以的</p>
<h3 id="安装-Python3"><a href="#安装-Python3" class="headerlink" title="安装 Python3"></a>安装 Python3</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-get install git python3 python3-pip -y</span><br></pre></td></tr></table></figure>

<blockquote>
<p>若出现如下问题</p>
<p>Command “python setup.py egg_info” failed with error code 1 in /tmp/pip-build-bx50pf21/progress/<br>You are using pip version 8.1.1, however version 20.1.1 is available.<br>You should consider upgrading via the ‘pip install –upgrade pip’ command.</p>
<p>解决：更新 pip3</p>
<p><code>pip3 install --upgrade pip</code></p>
</blockquote>
<h3 id="安装-AutoRclone"><a href="#安装-AutoRclone" class="headerlink" title="安装 AutoRclone"></a>安装 AutoRclone</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/xyou365/AutoRclone &amp;&amp; <span class="built_in">cd</span> AutoRclone &amp;&amp; pip3 install -r requirements.txt</span><br></pre></td></tr></table></figure>

<h3 id="生成-Service-Accounts"><a href="#生成-Service-Accounts" class="headerlink" title="生成 Service Accounts"></a>生成 Service Accounts</h3><p>打开链接：<a href="https://developers.google.com/drive/api/v3/quickstart/python">https://developers.google.com/drive/api/v3/quickstart/python</a></p>
<p>登陆 google 账号，点击 <code>Enable the Drive API</code>，在弹出的页面中勾选 yes ，点击 NEXT，</p>
<p>稍等片刻，继续点击 CREATE，出现如下页面表示成功</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102201708.png"></p>
<p>点击 <code>DOWNLOAD CLIENT CONFIGUTATION</code> 按钮，下载 <code>credentials.json</code> 文件，然后将下载的 <code>credentials.json</code> 放到 AutoRclone 目录下</p>
<p>如果你用的是 Xshell 可以使用 rz 来上传文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt install lrzsz -y</span><br><span class="line">rz <span class="comment"># 回车会打开窗口，选择文件上传即可</span></span><br><span class="line">rz 文件 <span class="comment"># 下载文件</span></span><br></pre></td></tr></table></figure>

<p>之后分三种情况</p>
<p>1、之前没有创建过项目</p>
<p>直接运行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python3 gen_sa_accounts.py --quick-setup 5</span><br></pre></td></tr></table></figure>

<p>以上命令含义：创建 6 个项目（项目0到项目5），开启相关的服务，创建 600 个 service accounts，将 600 个 service accounts 的授权文件下载到 accounts 文件夹下面</p>
<p>2、已有 N 个项目，需要创建新的</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python3 gen_sa_accounts.py --quick-setup 2 --new-only</span><br></pre></td></tr></table></figure>

<p>以上命令含义：额外创建 2 个项目（项目 N+1 到项目 N+2），开启相关的服务，创建 200 个 service accounts（2 个项目，每个项目 100 个），将 200 个 service accounts 的授权文件下载到 accounts 文件夹下面</p>
<p>3、使用已有项目，不创建新的</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python3 gen_sa_accounts.py --quick-setup -1</span><br></pre></td></tr></table></figure>

<p>注意以上命令会覆盖掉已有的 service accounts</p>
<p>我这里是第一种情况，运行 <code>python3 gen_sa_accounts.py --quick-setup 1</code>，创建两个项目</p>
<blockquote>
<p>出现如下报错</p>
<p><code>/usr/local/lib/python3.5/dist-packages/requests/__init__.py:91: RequestsDependencyWarning: urllib3 (1.13.1) or chardet (3.0.4) doesn&#39;t match a supported version!</code></p>
<p>解决方法，安装 requests 模块</p>
<p><code>sudo pip3 install requests</code></p>
</blockquote>
<p>出现如下图</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102201740.png"></p>
<p>打开链接，并登陆你的 Google 账号（提示不安全，不用管，一路允许）</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102201805.png"></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102201823.png"></p>
<p>得到授权代码</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102201844.png"></p>
<p>复制生成的 code 到终端，回车</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102201900.png"></p>
<p>如上图所示，显示<code>Press Enter to retry</code>, 原因是谷歌账号未开启 Service Usage API，复制提供的链接地址，到浏览器打开，开启 Service Usage API 服务</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102201955.png"></p>
<p>启用成功后回车，等待完成</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102202016.png"></p>
<p>接着，你就会发现你的 AutoRclone 文件下面的 accounts 文件夹下会有很多的 json 文件。</p>
<h3 id="将-service-accounts-加入-Google-Groups"><a href="#将-service-accounts-加入-Google-Groups" class="headerlink" title="将 service accounts 加入 Google Groups"></a>将 service accounts 加入 Google Groups</h3><blockquote>
<p>可以直接将 service accounts 加入到Team Drive<br><code>python3 add_to_team_drive.py -d SharedTeamDriveSrcID</code><br>为了便于管理 service accounts，我们创建 Google Group，将 Google Group 邮箱添加到 Team Drive</p>
</blockquote>
<p>我们这一步需要将刚刚生成的数以百计的 Service Accounts 添加到 Google Group 中</p>
<h4 id="创建-Google-Group"><a href="#创建-Google-Group" class="headerlink" title="创建 Google Group"></a>创建 Google Group</h4><p>打开链接：<a href="https://groups.google.com/">https://groups.google.com/</a> ，创建群组：</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102202037.png"></p>
<h4 id="批量提取-Service-Accounts"><a href="#批量提取-Service-Accounts" class="headerlink" title="批量提取 Service Accounts"></a>批量提取 Service Accounts</h4><blockquote>
<p>如果是 GSuite Admin 账号，可以使用如下方式直接添加进群组</p>
<ol>
<li>将生成的json文件保存到 credentials 文件夹中</li>
<li>在管理控制台中为您的组织创建组。创建群组后，您将拥有一个例如的地址<a href="mailto:&#115;&#x61;&#64;&#x79;&#111;&#117;&#114;&#x64;&#111;&#109;&#97;&#105;&#110;&#x2e;&#x63;&#111;&#109;">&#115;&#x61;&#64;&#x79;&#111;&#117;&#114;&#x64;&#111;&#109;&#97;&#105;&#110;&#x2e;&#x63;&#111;&#109;</a></li>
<li>运行 <code>python3 add_to_google_group.py -g sa@yourdomain.com</code></li>
</ol>
</blockquote>
<p>对于普通账号，生成 Service Accounts 后，直接运行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cat ~/AutoRclone/accounts/*.json | grep <span class="string">&quot;client_email&quot;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>| tr -d <span class="string">&#x27;,&quot;&#x27;</span> | sed <span class="string">&#x27;N;N;N;N;N;N;N;N;N;/^$/d;G&#x27;</span> &gt; ~/email.txt</span><br></pre></td></tr></table></figure>

<p>运行后，会自动提取 Service Accounts 邮箱账户，并保存到 ~/email.txt 文件中，同时还很贴心地每 10 个邮箱账户就隔开一行，方便复制。</p>
<h4 id="添加到-Google-Group"><a href="#添加到-Google-Group" class="headerlink" title="添加到 Google Group"></a>添加到 Google Group</h4><p>将 email.txt 文件下载到本地</p>
<p>回到 Group 页面，右上角 管理成员：</p>
<p>左侧 直接添加成员，将 Service Accounts 邮箱复制粘贴 10 个，点击 添加：<br>(注意每次只能添加 10 个，每 24 小时只能添加 100 个)</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102202108.png"></p>
<p>重复以上步骤，将 100 个邮箱添加进去</p>
<h4 id="将-Google-Group-邮箱添加到-Team-Drive"><a href="#将-Google-Group-邮箱添加到-Team-Drive" class="headerlink" title="将 Google Group 邮箱添加到 Team Drive"></a>将 Google Group 邮箱添加到 Team Drive</h4><p>点击关于，找到群组邮箱：</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102202125.png"></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102202138.png"></p>
<p>复制下来，添加到 Google Team Drive 成员中</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102202159.png"></p>
<p>添加完成后，基本就完成所有设置了</p>
<h3 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h3><p>首先将 service accounts 加入到目标 Team Drive</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/AutoRclone</span><br><span class="line"><span class="comment"># 将以下 SharedTeamDriveDstID 替换为你团队盘 ID</span></span><br><span class="line">python3 add_to_team_drive.py -d SharedTeamDriveDstID</span><br></pre></td></tr></table></figure>

<blockquote>
<p>查看团队盘 ID：</p>
<p>打开你的团队盘，查看浏览器上的链接，比如：</p>
<p><a href="https://drive.google.com/drive/u/2/folders/0AICYh4X7BkjVUk9PVA">https://drive.google.com/drive/u/2/folders/0AICYh4X7BkjVUk9PVA</a></p>
<p>以上链接中，0AICYh4X7BkjVUk9PVA 就是 ID</p>
</blockquote>
<p>回车后，再次回车：</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102202221.png"></p>
<h4 id="直接使用"><a href="#直接使用" class="headerlink" title="直接使用"></a>直接使用</h4><p>先安装 rclone</p>
<p>rclone 安装教程可以参考 <a href="https://wqdy.top/1243.html">https://wqdy.top/1243.html</a></p>
<ul>
<li>Linux 环境</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl https://rclone.org/install.sh | sudo bash</span><br></pre></td></tr></table></figure>

<ul>
<li>Windows 环境</li>
</ul>
<p>直接去 <a href="https://rclone.org/">rclone 官网</a>下载 rclone，然后最好将 rclone.exe 所在目录加入系统环境变量</p>
<p>如若将共享链接（<a href="https://drive.google.com/drive/u/2/folders/10zOvIf8yBmIuZgBfC3rcDKWHIlODZjXF%EF%BC%89%E9%87%8C%E7%9A%84%E6%96%87%E4%BB%B6%E4%BF%9D%E5%AD%98%E5%88%B0%E8%87%AA%E5%B7%B1%E7%9A%84">https://drive.google.com/drive/u/2/folders/10zOvIf8yBmIuZgBfC3rcDKWHIlODZjXF）里的文件保存到自己的</a> Team Drive 中的 myfolder 文件夹中</p>
<p>则命令为</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python3 rclone_sa_magic.py -s 10zOvIf8yBmIuZgBfC3rcDKWHIlODZjXF -d 0AICYh4X7BkjVUk9PVA -dp myfolder -b 1 -e 600</span><br></pre></td></tr></table></figure>

<p>详细的使用命令可以看这里：<a href="https://github.com/xyou365/AutoRclone#step-5-start-your-task">https://github.com/xyou365/AutoRclone#step-5-start-your-task</a></p>
<h4 id="配合-Gclone-使用"><a href="#配合-Gclone-使用" class="headerlink" title="配合 Gclone 使用"></a>配合 Gclone 使用</h4><p>gclone 其实就是 rclone 的加强版，为 Google Drive 操作增加自动切换账户和命令行根目录 id 操作支持，其他功能与原版 rclone 相同</p>
<h5 id="安装-gclone"><a href="#安装-gclone" class="headerlink" title="安装 gclone"></a>安装 gclone</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bash &lt;(wget -qO- https://git.io/gclone.sh)</span><br></pre></td></tr></table></figure>

<p>你可以选择将 gclone 重命名为 rclone，方便使用：cp /usr/bin/gclone /usr/bin/rclone</p>
<p>以下内容都是以没有重命名为例，如果你进行了重命名，将以下命令中出现的 gclone 改为 rclone</p>
<h5 id="配置-gclone"><a href="#配置-gclone" class="headerlink" title="配置 gclone"></a>配置 gclone</h5><p>首先需要先记下 /root/AutoRclone/accounts/ 中的其中一个文件：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ls /root/AutoRclone/accounts</span><br></pre></td></tr></table></figure>

<p>回车后会显示很多 .json 后缀的文件名，复制其中一个文件名，记下文件路径，比如：</p>
<p><code>/root/AutoRclone/accounts/0120894537c1c99c605fe240141af661b44d0c22.json</code></p>
<p>然后进行 gclone 的配置</p>
<p>gclone 在使用上跟 rclone 是一致的，配置过程也几乎一样，可以参考 <a href="https://rclone.org/drive/">https://rclone.org/drive/</a></p>
<p>运行以下命令进行配置：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gclone config</span><br></pre></td></tr></table></figure>

<p>配置过程中，需要注意的是，当出现 service_account_file 选项时，填入以上记下的 .json 文件</p>
<p>当出现 service_account_file_path 时，填入 /root/AutoRclone/accounts/</p>
<p>记住配置的 name：gdrive</p>
<p>之后就配置完成了</p>
<h5 id="使用-gclone-复制文件"><a href="#使用-gclone-复制文件" class="headerlink" title="使用 gclone 复制文件"></a>使用 gclone 复制文件</h5><p>作者 Github 提供的文档：<a href="https://github.com/donwa/gclone/blob/master/README_zh.md">https://github.com/donwa/gclone/blob/master/README_zh.md</a></p>
<p>复制共享链接文件到团队盘</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gclone copy gdrive:&#123;目录id&#125; gdrive:&#123;目录id&#125; --drive-server-side-across-configs -v</span><br></pre></td></tr></table></figure>

<p>以上命令中:</p>
<p>gdrive 是你配置 gclone 时设置的 name</p>
<p>目录 id 是共享链接中链接中的最后部分，比如：<a href="https://drive.google.com/drive/u/2/folders/1gVAP22Ug5fz0pSe4THZV10078UbNaTob%EF%BC%8C1gVAP22Ug5fz0pSe4THZV10078UbNaTob">https://drive.google.com/drive/u/2/folders/1gVAP22Ug5fz0pSe4THZV10078UbNaTob，1gVAP22Ug5fz0pSe4THZV10078UbNaTob</a> 就是目录 id</p>
<p>–drive-server-side-across-configs 用于谷歌盘之间传输时使用，不走服务器流量，传输速度也更快</p>
<p>-v 用于查看传输过程的 ERROR，NOTICE 和 INFO 消息</p>
<blockquote>
<p> 日志级别<br>-q - 仅生成 ERROR 消息。<br>-v - 生成 ERROR，NOTICE 和 INFO 消息，推荐此项。<br>-vv - 生成 ERROR，NOTICE，INFO和 DEBUG 消息。<br>–log-level LEVEL - 标志控制日志级别。</p>
<p>输出日志到文件<br>使用 –log-file=FILE 将 Error，Info 和 Debug 消息以及标准错误重定向到 FILE，这里的 FILE 是你指定的日志文件路径。</p>
</blockquote>
<p>命令使用示例：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gclone copy gdrive:&#123;18SukoSc0ni0nyU779w82eoo_deLKfbZR&#125; gdrive:&#123;1j4z3UH1thdNB8dOhTUgb0uRHxQaDYL1T&#125; --drive-server-side-across-configs -v</span><br></pre></td></tr></table></figure>

<p>目标位置除了使用 id 外，也可以直接使用目录，比如：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gclone copy gdrive:&#123;18SukoSc0ni0nyU779w82eoo_deLKfbZR&#125; gdrive:movie/电影合集 --drive-server-side-across-configs -v</span><br></pre></td></tr></table></figure>

<p>传输本地文件到团队盘</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gclone copy /root/Downloads/xxx gdrive:movie/电影合集 -v</span><br></pre></td></tr></table></figure>

<h3 id="常见报错"><a href="#常见报错" class="headerlink" title="常见报错"></a>常见报错</h3><ul>
<li>报错 <code>Failed to copy: failed to make directory: googleapi: Error 404: File not found: 1n-Ya6sagIrGskenJIzWcmKE1ATjxeqYx., notFound</code></li>
</ul>
<p>有可能是源日流量 10T 被榨干了</p>
<ul>
<li>报错 <code>googleapi: Error 403: The file limit for this shared drive has been exceeded., teamDriveFileLimitExceeded</code></li>
</ul>
<p>团队盘有限制 40w 文件/文件夹，回收站中的文件也计算在 40w 之内，可以新增团队盘，或删除小文件并删除回收站</p>
<p>谷歌云端硬盘 API 不公开清空回收站的方法，但它有一个删除方法可以永久删除文件，而不经过回收站</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https:&#x2F;&#x2F;developers.google.com&#x2F;drive&#x2F;v2&#x2F;reference&#x2F;files&#x2F;delete</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>Google Drive</tag>
        <tag>AutoRclone</tag>
        <tag>Gclone</tag>
      </tags>
  </entry>
  <entry>
    <title>JetBrains 系列产品激活工具</title>
    <url>/2016.html</url>
    <content><![CDATA[<p>下载地址：</p>
<p>适用于2020.3.1及以下版本<br>链接：<a href="https://pan.baidu.com/s/1VXTHaC2ChvXb6l5YA9iApw">https://pan.baidu.com/s/1VXTHaC2ChvXb6l5YA9iApw</a><br>提取码：wqdy</p>
]]></content>
      <tags>
        <tag>JetBrains</tag>
      </tags>
  </entry>
  <entry>
    <title>SEO工具之Xenu-网站死链接检测</title>
    <url>/411.html</url>
    <content><![CDATA[<p>网站建立的时间久了，有时候删除过期的文章，会造成链接无法正常访问，或者网站使用了图床，图片不能正常访问等。如果一个网站存在大量死链接，会严重影响用户的正常浏览，也影响搜索引擎爬取网站，对网站优化排名不利</p>
<p>Xenu是一款出色的网站死链接检测工具，检测网页中的链接、图片、js、css等是否存在损坏的链接</p>
<p>xenu 下载 <a href="http://home.snafu.de/tilman/xenulink.html">http://home.snafu.de/tilman/xenulink.html</a></p>
]]></content>
      <categories>
        <category>wordpress</category>
      </categories>
      <tags>
        <tag>seo</tag>
      </tags>
  </entry>
  <entry>
    <title>google 浏览器插件离线安装方法</title>
    <url>/372.html</url>
    <content><![CDATA[<p>谷歌浏览器扩展程序管理页面 chrome://extensions/</p>
<h4 id="方式一-crx"><a href="#方式一-crx" class="headerlink" title="方式一 .crx"></a>方式一 <code>.crx</code></h4><p>打开扩展程序管理页面，将 .crx 格式插件拖入浏览器即可</p>
<p>若安装时出现“程序包无效 CRX-HEADER-INVALID”的报错信息，或出现 <code>该扩展程序未列在 Chrome 网上应用店中，并可能是在您不知情的情况下添加的</code>，且插件无法启用，可使用方式二安装</p>
<h4 id="方式二-zip"><a href="#方式二-zip" class="headerlink" title="方式二 .zip"></a>方式二 <code>.zip</code></h4><p>将 .crx 插件后缀改成 .zip，或下载 .zip 格式插件</p>
<p>扩展程序管理页面，开启开发者模式，再按 F5 刷新一下，将 .zip 格式插件拖入浏览器，或者将 .zip 格式插件解压，点击加载已解压的扩展程序</p>
<h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><p>禁用 Chrome 的“请停用以开发者模式运行的扩展程序”提示的<a href="https://mp.weixin.qq.com/s?__biz=MzAwOTk3Mjg4Mg==&mid=100000085&idx=1&sn=17e6fb5c4db0f4dc3fbe840d71fd04d8&chksm=1b563ca82c21b5be85e337c94a7474857847fdc2af96845165206df11acd69a454d08f8ecbd5#rd">方法</a></p>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>chrome</tag>
      </tags>
  </entry>
  <entry>
    <title>dux 主题自定义代码高亮-使用 highlight.js</title>
    <url>/338.html</url>
    <content><![CDATA[<blockquote>
<p>dux 主题默认使用 <a href="https://github.com/google/code-prettify">Google Code Prettify</a> 实现代码高亮</p>
</blockquote>
<h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>在 <a href="https://highlightjs.org/">highlight 官网</a>下载 js 和 css 文件</p>
<p>可以使用官网提供的 <a href="https://highlightjs.org/download/">CDN 链接</a>，也可以根据需要定制自己需要的语言</p>
<p>选择自己喜欢的<a href="https://highlightjs.org/static/demo/">主题</a>，在<a href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/%7D">这里</a>进行下载</p>
<p>将 <code>highlight.main.js</code> 文件放到主题的 <code>/js/libs/</code> 文件夹中</p>
<h3 id="编辑主题文件"><a href="#编辑主题文件" class="headerlink" title="编辑主题文件"></a>编辑主题文件</h3><p>编辑 <code>/js/loader.js</code> 文件，将 <code>highlight.min.js</code> 引入</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">tbquire.config(&#123;</span><br><span class="line">  baseUrl: jsui.uri + &#x27;/js&#x27;,</span><br><span class="line">  urlArgs: &#x27;ver=&#x27; + jsui.ver,</span><br><span class="line">  paths: &#123;</span><br><span class="line">    &#x27;swiper&#x27;        : &#x27;libs/swiper.min&#x27;,</span><br><span class="line">    &#x27;jquery.cookie&#x27; : &#x27;libs/jquery.cookie.min&#x27;,</span><br><span class="line">    &#x27;jsrender&#x27;      : &#x27;libs/jsrender.min&#x27;,</span><br><span class="line">    &#x27;router&#x27;        : &#x27;libs/router.min&#x27;,</span><br><span class="line">    &#x27;lazyload&#x27;      : &#x27;libs/lazyload.min&#x27;,</span><br><span class="line">    &#x27;prettyprint&#x27;   : &#x27;libs/prettyprint&#x27;,</span><br><span class="line"><span class="addition">+   &#x27;highlight&#x27;     : &#x27;libs/highlight.min&#x27;,</span></span><br><span class="line">    &#x27;ias&#x27;           : &#x27;libs/ias.min&#x27;,</span><br><span class="line">    &#x27;main&#x27;          : &#x27;main&#x27;,</span><br><span class="line">    &#x27;comment&#x27;       : &#x27;comment&#x27;,</span><br><span class="line">    &#x27;user&#x27;          : &#x27;user&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>编辑 <code>/js/main.js</code> 注释掉 prettyprint 部分</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">/*</span><br><span class="line"> * prettyprint</span><br><span class="line"> * <span class="comment">====================================================</span></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line"><span class="deletion">-$(&#x27;pre&#x27;).each(function()&#123;</span></span><br><span class="line"><span class="deletion">-    if( !$(this).attr(&#x27;style&#x27;) ) $(this).addClass(&#x27;prettyprint&#x27;)</span></span><br><span class="line"><span class="deletion">-&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-if( $(&#x27;.prettyprint&#x27;).length )&#123;</span></span><br><span class="line"><span class="deletion">-    tbquire([&#x27;prettyprint&#x27;], function(prettyprint) &#123;</span></span><br><span class="line"><span class="deletion">-        prettyPrint()</span></span><br><span class="line"><span class="deletion">-    &#125;)</span></span><br><span class="line"><span class="deletion">-&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+/*</span></span><br><span class="line"><span class="addition">+ * highlight</span></span><br><span class="line"><span class="addition">+ * ====================================================</span></span><br><span class="line"><span class="addition">+*/</span></span><br><span class="line"><span class="addition">+</span></span><br><span class="line"><span class="addition">+$(&#x27;pre code&#x27;).forEach((block) =&gt; &#123;</span></span><br><span class="line"><span class="addition">+  tbquire([&#x27;highlight&#x27;], function() &#123;</span></span><br><span class="line"><span class="addition">+    hljs.highlightBlock(block)</span></span><br><span class="line"><span class="addition">+&#125;)</span></span><br></pre></td></tr></table></figure>

<p>此时 highlight 脚本已经生效，接下来就是应用 highlight 样式</p>
<h3 id="应用-highlight-样式"><a href="#应用-highlight-样式" class="headerlink" title="应用 highlight 样式"></a>应用 highlight 样式</h3><p>你可以选择将下载好的 css 文件打开，将样式拷贝到 /libs/css/main.css 文件中</p>
<p>也可以在 <code>wordpress后台-外观-自定义-添加额外css</code> 中为主题定义样式</p>
]]></content>
      <categories>
        <category>wordpress</category>
      </categories>
      <tags>
        <tag>wordpress</tag>
      </tags>
  </entry>
  <entry>
    <title>github 下载加速--解决克隆 github 仓库时速度慢的问题</title>
    <url>/890.html</url>
    <content><![CDATA[<h2 id="修改-host-方式"><a href="#修改-host-方式" class="headerlink" title="修改 host 方式"></a>修改 host 方式</h2><p>访问 <a href="http://tool.chinaz.com/dns">http://tool.chinaz.com/dns</a> 或 <a href="https://www.ipaddress.com/">https://www.ipaddress.com/</a></p>
<p>查询以下三个链接的 DNS 解析地址</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">github.com</span><br><span class="line">assets-cdn.github.com</span><br><span class="line">github.global.ssl.fastly.net</span><br></pre></td></tr></table></figure>

<p>找到 TTL 值最小的 IP，修改系统 Hosts 文件</p>
<p>之后刷新系统 DNS 缓存</p>
<p>Windows+X 打开系统命令行（管理员身份）或 powershell</p>
<p>运行 ipconfig /flushdns 手动刷新系统 DNS 缓存。</p>
<h2 id="利用国内代码管理平台中转"><a href="#利用国内代码管理平台中转" class="headerlink" title="利用国内代码管理平台中转"></a>利用国内代码管理平台中转</h2><p>利用码云(gitee)</p>
<p>新建仓库-导入已有仓库 将 github 仓库 clone 到 gitee 中</p>
<p>如果项目中有子模块，同理也需要 clone 到 gitee 中，同时修改主仓库中的 .gitmodules 文件，将子模块的地址修改为 gitee 地址</p>
<h2 id="使用-GitHubDesktop-客户端"><a href="#使用-GitHubDesktop-客户端" class="headerlink" title="使用 GitHubDesktop 客户端"></a>使用 GitHubDesktop 客户端</h2><h2 id="使用代理"><a href="#使用代理" class="headerlink" title="使用代理"></a>使用代理</h2><p>仅仅开代理是不行的，需要单独配置</p>
<p>如果使用 HTTPS 协议克隆需要如下配置</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 设置代理</span></span><br><span class="line">git config --global http.proxy socks5://127.0.0.1:1080</span><br><span class="line">git config --global https.proxy socks5://127.0.0.1:1080</span><br><span class="line"></span><br><span class="line"><span class="comment">#取消代理</span></span><br><span class="line">git config --global --<span class="built_in">unset</span> http.proxy</span><br><span class="line">git config --global --<span class="built_in">unset</span> https.proxy</span><br></pre></td></tr></table></figure>

<p>使用 SSH 协议克隆需要如下配置</p>
<p>修改.ssh/config</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">Hostname github.com</span><br><span class="line">ProxyCommand connect -S 127.0.0.1:1080 %h %p</span><br></pre></td></tr></table></figure>

<p>1080 端口换成你本地代理客户端的 socks 端口</p>
<h2 id="github-com-cnpmjs-org-镜像站"><a href="#github-com-cnpmjs-org-镜像站" class="headerlink" title="github.com.cnpmjs.org 镜像站"></a>github.com.cnpmjs.org 镜像站</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/vuejs/vue.git</span><br><span class="line"><span class="comment"># 改为</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com.cnpmjs.org/vuejs/vue.git</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>GoIndex 部署 CloudFlare Workers 实现无需科学上网访问 Google Drive 文件</title>
    <url>/1223.html</url>
    <content><![CDATA[<p>04/27 更新 解决 workers 无法正常访问</p>
<p>作者删除了 github 仓库， GoIndex 依赖的 js 资源加载失败，导致网页打开是一片空白</p>
<p>解决方法；</p>
<p>首先到 GitHub Fork 一份 goindex，可以直接 fork <a href="https://github.com/cuilongjin/goindex">我的</a>，</p>
<p>登录 CF，打开 workers，选中项目，找到以下代码，我的是在 21 行，替换成有效的即可（可以是你 fork 的，也可以直接使用我的）</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;//cdn.jsdelivr.net/combine/gh/jquery/jquery@3.2/dist/jquery.min.js,gh/donwa/goindex@$&#123;authConfig.version&#125;/themes/$&#123;authConfig.theme&#125;/app.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>替换成</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;//cdn.jsdelivr.net/combine/gh/jquery/jquery@3.2/dist/jquery.min.js,gh/cuilongjin/goindex/themes/$&#123;authConfig.theme&#125;/app.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>原文</p>
<p>利用 GoIndex 程序，以及 CloudFlare，可以将 Google Drive 文件以目录形式（类似 OneIndex 部署 OneDrive 网盘）列出，可直链调用网盘图片、音频、视频文件等，也可以下载，流量走 CloudFlare ，网速由 CloudFlare 决定</p>
<p>项目地址： <a href="https://github.com/donwa/goindex">https://github.com/donwa/goindex</a></p>
<p>demo： <a href="https://index.gd.workers.dev/">https://index.gd.workers.dev/</a></p>
<p>安装部署方案 1</p>
<p>1、在本地安装 rclone<br>2、按照 <a href="https://rclone.org/drive/">https://rclone.org/drive/</a> 流程进行授权<br>3、执行 rclone config file 查看 rclone.conf 路径。找到 root_folder_id 和 refresh_token 记录下来<br>4、下载 <a href="https://github.com/donwa/goindex">https://github.com/donwa/goindex</a> 中的 index.js 并填入 root 和 refresh_token<br>5、复制代码 到 CloudFlare 部署</p>
<p>安装部署方案 2</p>
<p>作者不会记录 refresh_token，但为避免纠纷，建议有条件的同学使用方案 1 进行部署<br>1、访问<a href="https://install.gd.workers.dev/">https://install.gd.workers.dev/</a><br>2、授权认证后，生成部署代码<br>3、复制代码 到 CloudFlare 部署</p>
<p>目录 id：例如 google 网盘链接为<code>https://drive.google.com/drive/folders/1rrDnupW_1qxRnQf-jy_0PN_GqNK8SEk2</code>，则目录 id 为 <code>1rrDnupW_1qxRnQf-jy_0PN_GqNK8SEk2</code></p>
<p>部署 CloudFlare</p>
<p>绑定自定义域名</p>
<p><a href="https://github.com/donwa/goindex/issues/4">https://github.com/donwa/goindex/issues/4</a></p>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
  </entry>
  <entry>
    <title>google TeamDrive 免费无限容量团队盘申请</title>
    <url>/1207.html</url>
    <content><![CDATA[<p>Google Drive 团队盘，不是增加你本身空间，是增加一个团队盘在你名下，你账号是 15G 依然是 15G，但是存在团队盘里的不算你的占用。</p>
<p>申请地址：<br><a href="http://leon.educationhost.cloud/">http://leon.educationhost.cloud/</a><br><a href="https://td.fastio.me/">https://td.fastio.me/</a><br><a href="https://gd.zxd.workers.dev/">https://gd.zxd.workers.dev/</a> All Saints CofE Junior School<br><a href="https://teamdrive.xcpx.workers.dev/">https://teamdrive.xcpx.workers.dev/</a> swccd.edu<br><a href="https://gd.404edu.workers.dev/">https://gd.404edu.workers.dev/</a> 台灣教育部</p>
<p>输入团队盘名称，随便你自己取，建议英文格式。Gmail 邮箱地址建议用自己的小号。弄好这两样后点击提交即可，等提示创建成功就 OK 了。</p>
<p>登陆 Google Drive 后你会发现在 My Drive(我的云端硬盘) 下面多出了一个 Shared drives(共享云端硬盘) 的菜单按钮</p>
<p>无限空间方式：</p>
<ul>
<li>教育版无限空间</li>
</ul>
<ol>
<li>卖给你支持 GApps 的学校的邮箱账号密码，简单直接，没啥好说的，登上去就有了</li>
<li>不给你邮箱，让你提供自己的 Gmail 账号，然后他给你拉进去。详细讲就是他新开一个“share drive”然后把你拉进去，你们俩就共享这个“share drive”的无限空间了。(记得将自己设置成管理员，并把拉你的人从 share drive 中删除)</li>
</ol>
<p>如果买了邮箱也建议自己按照上面方式 2 那样给自己的 Gmail 分配无限空间，因为买的教育邮箱可能来路不正，可能被封，而分配出去的 share drive 是不受影响的。</p>
<ul>
<li>从 G Suit 获取的无限空间<br>跟上面的教育网那个类似的，只是是商业的用途，按月交钱，不同档次支持的用户数不同。同样是把你拉进去就可以用无限空间了。这玩意儿人家只要不续费了你就完犊子了。管理员是可以随意查看账号中的内容</li>
</ul>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>Google Drive</tag>
      </tags>
  </entry>
  <entry>
    <title>Jellyfin开启硬件加速</title>
    <url>/1424.html</url>
    <content><![CDATA[<p>之前使用群晖 Docker 折腾 Jellyfin，解决了个人音视频收藏的基本需求，但仍有不足，比如说视频播放的时候，CPU 占用会很高（软解吃 CPU），并且会卡顿。</p>
<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>1、查看系统是否支持显卡硬解转码</p>
<p>使用 SSH 登录群晖系统，运行命令<code>ls /dev/dri</code>，若输出 card0、renderD128，则说明支持显卡硬解。</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102202420.png"></p>
<p>2、给容器提权</p>
<p>在群群 Docker 容器中找到 Jellyfin 的容器，编辑容器的常规设置，必须勾选使用高权限执行容器。</p>
<p>3、添加环境</p>
<p>在环境中添加两项，分别是 <code>PUID</code> 值填写为 <code>0</code> ，<code>PGID</code> 值填写为 <code>0</code></p>
<p>4、启用 <code>VAAPI</code> 硬件加速</p>
<p>Docker 中启动容器，打开 Jellyfin 网页端，依次进入控制台-&gt;播放，在硬件选项中选择 VAAPI 保存设置即可。</p>
<h4 id="使用效果"><a href="#使用效果" class="headerlink" title="使用效果"></a>使用效果</h4><p>前后对比：</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102202439.png"></p>
<p>可以看到 CPU 占用明显降低了，播放也不卡顿了，效果还是非常明显的。</p>
]]></content>
      <categories>
        <category>NAS</category>
      </categories>
      <tags>
        <tag>jellyfin</tag>
      </tags>
  </entry>
  <entry>
    <title>magnetW一款开源的磁力链接聚合搜索工具--支持win/mac</title>
    <url>/1289.html</url>
    <content><![CDATA[<p>开源地址：<a href="https://github.com/xiandanin/magnetW">https://github.com/xiandanin/magnetW</a><br>下载地址：<a href="https://github.com/xiandanin/magnetW/releases">https://github.com/xiandanin/magnetW/releases</a></p>
<p>欢迎 star</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102203211.gif"></p>
]]></content>
      <categories>
        <category>软件</category>
      </categories>
  </entry>
  <entry>
    <title>Markdown 语法</title>
    <url>/426.html</url>
    <content><![CDATA[<h2 id="Markdown-基本语法"><a href="#Markdown-基本语法" class="headerlink" title="Markdown 基本语法"></a>Markdown 基本语法</h2><p>待…</p>
<h2 id="Markdown-使用技巧"><a href="#Markdown-使用技巧" class="headerlink" title="Markdown 使用技巧"></a>Markdown 使用技巧</h2><h3 id="换行"><a href="#换行" class="headerlink" title="换行"></a>换行</h3><ul>
<li>方法 1：连续两个以上空格+回车</li>
<li>方法 2：使用 html 语言换行标签：<code>&lt;br&gt;</code></li>
</ul>
<h3 id="居中"><a href="#居中" class="headerlink" title="居中"></a>居中</h3><ul>
<li>使用 align 属性</li>
<li>使用<code>&lt;center&gt;</code>标签（HTML5 不支持）</li>
</ul>
<h3 id="首行缩进两个字符"><a href="#首行缩进两个字符" class="headerlink" title="首行缩进两个字符"></a>首行缩进两个字符</h3><ul>
<li><code>&amp;nbsp;</code> 不换行空格，全称 No-Break Space</li>
<li><code>&amp;ensp;</code> 半角的空格，全称是 En Space</li>
<li><code>&amp;emsp;</code> 全角的空格，全称是 Em Space，占据的宽度正好是 1 个中文宽度</li>
</ul>
<h3 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h3><ul>
<li><code>*斜体*或_斜体_</code></li>
<li><code>**粗体**</code></li>
<li><code>***加粗斜体***</code></li>
<li><code>~~删除线~~</code></li>
<li>字号与颜色：使用内嵌 HTML</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">&quot;#0099ff&quot;</span> <span class="attr">size</span>=<span class="string">&quot;3&quot;</span> <span class="attr">face</span>=<span class="string">&quot;黑体&quot;</span>&gt;</span>color=#0099ff size=3 face=&quot;黑体&quot;<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>效果：<font color=#0099ff size=3 face="黑体">color=#0099ff size=3 face=”黑体”</font></p>
<h3 id="背景色"><a href="#背景色" class="headerlink" title="背景色"></a>背景色</h3><p>使用内嵌 HTML 借助 table，tr，td 等表格标签的 bgcolor 属性</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;orange&quot;</span>&gt;</span>背景色是：orange<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>效果：<table><tr><td bgcolor=orange>背景色是：orange</td></tr></table></p>
<h3 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h3><p>在一行中用三个以上的星号 <code>*</code> 、减号 <code>-</code> 、底线 <code>_</code> 来建立一个分隔线，中间用空格隔开，行内不能有其他东西。（除第一个符号的左侧最多添加三个空格外三个相同符号两侧可以添加任意多个空格）</p>
<h3 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h3><h4 id="文字"><a href="#文字" class="headerlink" title="文字"></a>文字</h4><ul>
<li>行内式：<code>[文字](url &quot;title&quot;)</code></li>
<li>参考式：<code>[文字][1]</code> <code>[1]:url &quot;title&quot;</code></li>
<li>自动链接：<code>&lt;url&gt;</code>，将链接用&lt;&gt;包起来，Markdown 会自动把它转成链接。</li>
</ul>
<h3 id="图片："><a href="#图片：" class="headerlink" title="图片："></a>图片：</h3><ul>
<li>行内式：<code>![alt_text](url &quot;title&quot;)</code></li>
</ul>
<blockquote>
<p><code>alt_text</code>：图片的 alt 标签，用来描述图片的关键词，可以不写。最初的本意是当图片因为某种原因不能被显示时而出现的替代文字，后来又被用于 SEO，可以方便搜索引擎根据 <code>alt_text</code> 里面的关键词搜索到图片。 url：可以是图片的本地地址或者是网址。”title”：鼠标悬置于图片上会出现的标题文字，可以不写。</p>
</blockquote>
<ul>
<li><p>参考式：同上</p>
</li>
<li><p>使用 img 标签：<code>&lt;img src=&quot;&quot; width=&quot;&quot; height=&quot;&quot;&gt;</code>，<code>&lt;div align=center&gt;&lt;/div&gt;</code> 实现居中</p>
</li>
</ul>
<h3 id="折叠按钮"><a href="#折叠按钮" class="headerlink" title="折叠按钮"></a>折叠按钮</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">details</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">summary</span>&gt;</span></span><br><span class="line">    点击展开</span><br><span class="line">  <span class="tag">&lt;/<span class="name">summary</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 内部展示内容 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">details</span>&gt;</span></span><br></pre></td></tr></table></figure>

<details>
  <summary>
    点击展开
  </summary>

<p>设置小三角样式：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">summary</span>::-webkit-details-marker &#123;</span><br><span class="line">  color: <span class="number">#42b983</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</details>

<h2 id="Markdown-编辑器"><a href="#Markdown-编辑器" class="headerlink" title="Markdown 编辑器"></a>Markdown 编辑器</h2><p><a href="https://www.typora.io/">typora</a></p>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>收集整理一些微软windows和office激活工具</title>
    <url>/936.html</url>
    <content><![CDATA[<h2 id="HWIDGEN"><a href="#HWIDGEN" class="headerlink" title="HWIDGEN"></a>HWIDGEN</h2><p>是一款由国外 Nsane 论坛会员 s1ave77 制作的 Windows 10 数字权利激活工具，可以自动获取 Windows 10 数字许可证</p>
<p><a href="https://support.microsoft.com/zh-cn/help/12440/windows-10-activate">数字许可证</a>（在 Windows 10 版本 1511 中称为数字授权）是 Windows 10 的一种激活方法，该方法不需要输入产品密钥。在同一台电脑上主要硬件（应该是 CPU 和主板）不变化的情况下，重新安装系统时无需再次输入密钥，系统会在自动连接到微软服务器进行激活。</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102203303.png"></p>
<h3 id="支持的-win10-版本："><a href="#支持的-win10-版本：" class="headerlink" title="支持的 win10 版本："></a>支持的 win10 版本：</h3><p>家庭版（HWID/KMS3）<br>家庭单语言版（HWID/KMS3）<br>专业版（HWID/KMS3）<br>专业教育版（HWID/KMS3）<br>专业工作站版（HWID/KMS3）<br>教育版（HWID/KMS3）<br>企业版（HWID/KMS3）<br>企业版 S 2015（HWID）<br>企业版 S 2016（HWID/KMS3）<br>企业版 S（KMS19™）</p>
<h3 id="下载地址"><a href="#下载地址" class="headerlink" title="下载地址"></a>下载地址</h3><p><a href="https://www.aiowares.com/showthread.php?tid=246">https://www.aiowares.com/showthread.php?tid=246</a></p>
<p>百度云：链接：<a href="https://pan.baidu.com/s/111rJZHaOFJrpOdOKXW5Vcw">https://pan.baidu.com/s/111rJZHaOFJrpOdOKXW5Vcw</a> 提取码：3o1c</p>
<h2 id="W10-数字许可激活-C-版"><a href="#W10-数字许可激活-C-版" class="headerlink" title="W10 数字许可激活 C#版"></a>W10 数字许可激活 C#版</h2><p>是一款由吾爱破解论坛 angelkyo 编写的 Windows 10 数字权利激活工具，跟 HWIDGen 类似</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102203321.png"></p>
<h3 id="下载地址-1"><a href="#下载地址-1" class="headerlink" title="下载地址"></a>下载地址</h3><p><a href="https://www.52pojie.cn/thread-742884-1-1.html">https://www.52pojie.cn/thread-742884-1-1.html</a></p>
<p>百度云：链接：<a href="https://pan.baidu.com/s/1OsoR_Zpu_BF7m0Plw8mUEA">https://pan.baidu.com/s/1OsoR_Zpu_BF7m0Plw8mUEA</a> 提取码：a1ru</p>
<h2 id="离线-KMS-激活工具-HEU-KMS-Activator-v19-6-2-正式版"><a href="#离线-KMS-激活工具-HEU-KMS-Activator-v19-6-2-正式版" class="headerlink" title="离线 KMS 激活工具 HEU KMS Activator v19.6.2 正式版"></a>离线 KMS 激活工具 HEU KMS Activator v19.6.2 正式版</h2><p>一款简洁高效的 KMS 激活工具，适用于 Windows、Office 及 VL 版本，无需联网即可一键激活，离线全自动激活软件，</p>
<p>KMS 服务是微软公司对 Windows 以及 Office 等的批量授权服务，可以利用 KMS 激活局域网中的产品。而这款工具是利用在系统内部搭建 KMS 服务器，因此无论是 Windows 还是 Office 都可轻易进行激活。</p>
<h3 id="功能："><a href="#功能：" class="headerlink" title="功能："></a>功能：</h3><p>Heu KMS 几乎支持所有 Vl 批量授权版本<br>可以通过搭建内置的 KMS 服务器进行手动激活产品<br>支持对 Windows 系统以及 Office 办公软件备份激活信息</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102203343.png"></p>
<h3 id="下载地址-2"><a href="#下载地址-2" class="headerlink" title="下载地址"></a>下载地址</h3><p>百度云：链接：<a href="https://pan.baidu.com/s/1gAGqEHEMjUa4IDx4tYNXag">https://pan.baidu.com/s/1gAGqEHEMjUa4IDx4tYNXag</a> 提取码：vrfc</p>
<h2 id="Microsoft-激活脚本（MAS）："><a href="#Microsoft-激活脚本（MAS）：" class="headerlink" title="Microsoft 激活脚本（MAS）："></a>Microsoft 激活脚本（MAS）：</h2><p>一组脚本，用于使用 HWID / KMS38 /在线 KMS 激活方法激活 Microsoft 产品，重点是开放源代码，较少的防病毒检测和用户友好性。<br>原贴地址（需要登录）：<a href="https://www.nsaneforums.com/topic/316668-microsoft-activation-scripts/">https://www.nsaneforums.com/topic/316668-microsoft-activation-scripts/</a></p>
<h3 id="开源地址"><a href="#开源地址" class="headerlink" title="开源地址"></a>开源地址</h3><p><a href="https://gitlab.com/massgrave/microsoft-activation-scripts">https://gitlab.com/massgrave/microsoft-activation-scripts</a><br><a href="https://github.com/massgravel/Microsoft-Activation-Scripts">https://github.com/massgravel/Microsoft-Activation-Scripts</a></p>
<h3 id="下载地址-3"><a href="#下载地址-3" class="headerlink" title="下载地址"></a>下载地址</h3><p><a href="https://github.com/massgravel/Microsoft-Activation-Scripts/releases">https://github.com/massgravel/Microsoft-Activation-Scripts/releases</a></p>
<p>百度云：链接：<a href="https://pan.baidu.com/s/1JKEYAfgJj9msfW81bhbKjw">https://pan.baidu.com/s/1JKEYAfgJj9msfW81bhbKjw</a> 提取码：21di</p>
]]></content>
      <categories>
        <category>软件</category>
      </categories>
      <tags>
        <tag>软件</tag>
        <tag>office</tag>
        <tag>windows</tag>
        <tag>激活</tag>
      </tags>
  </entry>
  <entry>
    <title>Scrcpy - 开源免费在电脑显示手机画面并控制手机的工具(投屏/录屏/免 Root)</title>
    <url>/1813.html</url>
    <content><![CDATA[<h2 id="Scrcpy"><a href="#Scrcpy" class="headerlink" title="Scrcpy"></a>Scrcpy</h2><p>github: <a href="https://github.com/Genymobile/scrcpy">https://github.com/Genymobile/scrcpy</a></p>
<p>Scrcpy 可以将安卓手机的画面投屏到电脑桌面显示上并进行操控。简单地说，就是可以让你在电脑上控制手机！它支持鼠标控制、键盘输入、电脑剪切板复制粘贴、拖放文件传输到手机、以及拖放 APK 文件进行安装。跨平台支持 Win、Mac、Linux，可通过 USB 数据线或 WiFi 进行连接</p>
<p>Scrcpy 投屏效果非常理想，画面清晰流畅，基本无明显延迟，可以自定义视频码率，支持自动横屏，操作很灵敏，实用性非常的高</p>
<p>你可以方便地利用 Scrcpy 来测试 APP 应用、玩游戏、高效完成一些需要在手机上进行的复杂工作、更高效地办公；也能更方便地进行 Android 屏幕录像、截屏；甚至还能方便你上班时摸鱼划水。应用场景非常多，无论是开发者还是普通个人用户都相当的实用。如果经常有电脑上操控手机的需求，那么 Scrcpy 可谓是妥妥的神器！</p>
<p>Scrcpy 是一款命令行工具，没有图形界面，无需 ROOT 手机，也不需在手机上安装 APP，只需在系统设置里启用“USB 调试”( adb 调试) 即可</p>
<h2 id="几款-Scrcpy-GUI-工具"><a href="#几款-Scrcpy-GUI-工具" class="headerlink" title="几款 Scrcpy-GUI 工具"></a>几款 Scrcpy-GUI 工具</h2><p>Scrcpy 本身是个命令行软件，对很多人来说用起来并不是那么方便……。</p>
<p><strong>Scrcpy-GUI</strong></p>
<p>Scrcpy-GUI 是一个能专门为 Scrcpy 提供可视化的操作界面的外挂工具</p>
<p>Scrcpy-GUI 也是免费开源的，同时也能跨平台支持 Windows、macOS 和 Linux 等系统</p>
<p>github：<a href="https://github.com/Tomotoes/scrcpy-gui">https://github.com/Tomotoes/scrcpy-gui</a></p>
<p>使用文档： <a href="https://github.com/Tomotoes/scrcpy-gui/blob/master/README.zh_CN.md">https://github.com/Tomotoes/scrcpy-gui/blob/master/README.zh_CN.md</a></p>
<p>Scrcpy-GUI 只是图形界面（它不包含 Scrcpy 本身），你需要先安装好 Scrcpy，之后就能使用 GUI 界面进行连接使用了</p>
<p><strong>Scrcpy_GUI 酷安@晨钟酱</strong></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102203423.png"></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102203440.png"></p>
<p>下载链接</p>
<p>百度云：<a href="https://pan.baidu.com/s/14f8ffCapvPrU2eMWwBWK0A">https://pan.baidu.com/s/14f8ffCapvPrU2eMWwBWK0A</a> 提取码：64l0</p>
<p><a href="https://www.coolapk.com/feed/15973938?shareKey=YWE5NWFkMTg1N2Y2NWU1ODFlOWQ~&amp;shareUid=739982&amp;shareFrom=com.coolapk.market_10.0.1">https://www.coolapk.com/feed/15973938?shareKey=YWE5NWFkMTg1N2Y2NWU1ODFlOWQ~&amp;shareUid=739982&amp;shareFrom=com.coolapk.market_10.0.1</a></p>
<p><strong>安卓投屏</strong></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102203457.png"></p>
<p>下载地址</p>
<p>蓝奏云：<a href="https://www.lanzous.com/b009vk8ze">https://www.lanzous.com/b009vk8ze</a> 密码:gu2t</p>
<p>百度云：<a href="https://pan.baidu.com/s/1E41IIgyU1vvERkhxFh0eGg">https://pan.baidu.com/s/1E41IIgyU1vvERkhxFh0eGg</a> 提取码：zfqd</p>
]]></content>
      <categories>
        <category>软件</category>
      </categories>
      <tags>
        <tag>安卓</tag>
        <tag>投屏</tag>
      </tags>
  </entry>
  <entry>
    <title>Snap2HTML – 生成 html 文件列表</title>
    <url>/1857.html</url>
    <content><![CDATA[<p>Snap2HTML 可以帮你将硬盘下的文件整理成一个 html 格式的树状视图列表，类似于 Windows 资源管理器，带有文件大小、日期、数量等常用信息，右上角还提供了搜索功能，方便你去整理或查找，或者是向基友们分享一下你的收藏</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102203522.png"></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102203541.png"></p>
<p>github地址 <a href="https://github.com/rlv-dan/Snap2HTML">https://github.com/rlv-dan/Snap2HTML</a></p>
<p>官网地址 <a href="https://www.rlvision.com/snap2html/about.php">https://www.rlvision.com/snap2html/about.php</a></p>
<p>百度云链接: <a href="https://pan.baidu.com/s/1XVvgMX4TKTOZSvEay8xvnQ">https://pan.baidu.com/s/1XVvgMX4TKTOZSvEay8xvnQ</a> 提取码: pbi3</p>
]]></content>
      <categories>
        <category>软件</category>
      </categories>
  </entry>
  <entry>
    <title>sublime 插件、快捷键</title>
    <url>/428.html</url>
    <content><![CDATA[<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><ul>
<li><p><a href="https://packagecontrol.io/packages/Sublime%20Tutor">Sublime Tutor</a> ：键盘快捷方式教程<br>Help &gt; Sublime Tutor</p>
</li>
<li><p>AlignTab ：自定义快捷键</p>
</li>
</ul>
<h2 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h2><ul>
<li><code>Ctrl + X</code> 如果已经选中文本，则剪切该文本。如果未选中任何文本，则剪切光标所在行</li>
<li><code>Ctrl + Z</code> 撤消</li>
<li><code>Ctrl + Shift + V</code> 缩进粘贴</li>
<li><code>Ctrl + Shift + Z</code> 或 <code>Ctrl + Y</code> 恢复</li>
<li><code>Ctrl + L</code> Select line - Repeat to select next lines</li>
<li><code>Ctrl + D</code> Select word - Repeat select others occurrences</li>
<li><code>Ctrl + Shift + D</code> 如果已经选中文本，则复制该文本。如果未选中任何文本，则复制光标所在行</li>
<li><code>Ctrl + Enter</code> Insert line after</li>
<li><code>Ctrl + Shift + Enter</code> Insert line before</li>
<li><code>Alt + F3</code> 选择所有相同单词的实例</li>
<li><code>Tab</code> 或 <code>Ctrl + ]</code> 缩进</li>
<li><code>Shift + Tab</code> 或 <code>Ctrl + [</code> 取消缩进</li>
<li><code>Ctrl + Shift + K</code> Delete Line</li>
<li><code>Ctrl + KK</code> Delete from cursor to end of line</li>
<li><code>Ctrl + K + Backspace</code> Delete from cursor to start of line</li>
<li><code>Alt + Shift + W</code> 使用标签包裹选中部分</li>
<li><code>Ctrl + ←</code> 移动光标至上一个词</li>
<li><code>Ctrl + →</code> 移动光标至下一个词</li>
<li><code>Ctrl + Shift + ↓</code> Move line/selection down</li>
<li><code>Ctrl + Shift + ↑</code> Move line/selection up</li>
<li><code>Home</code> 移动光标至行首</li>
<li><code>End</code> 移动光标至行尾</li>
<li><code>Ctrl + Home</code> 移动光标至文档开头</li>
<li><code>Ctrl + End</code> 移动光标至文档结尾</li>
<li><code>Ctrl + M</code> 跳转到左/右圆括号、方括号、大括号</li>
<li><code>Ctrl + Shift + M</code> 选择括号内的内容</li>
<li><code>Ctrl + R</code> 跳转到定义</li>
<li><code>Ctrl + /</code> Comment/un-comment current line</li>
<li><code>Ctrl + Shift + /</code> Block comment current selection</li>
<li><code>Ctrl + N</code> 新建标签</li>
<li><code>Ctrl + PgUp</code> 向左切换标签</li>
<li><code>Ctrl + PgDn</code> 向右切换标签</li>
<li><code>Ctrl + W</code> 关闭标签</li>
<li><code>Ctrl + Shift + T</code> 重新打开标签</li>
<li><code>Shift + 鼠标右键</code> 竖向选择</li>
<li><code>Ctrl + Shift + &#39;</code> 选择与光标关联的开始和结束标签</li>
<li><code>Ctrl + Shift + A</code> 选择容器内内容</li>
<li><code>Ctrl + Shift + ;</code> 移除与你的光标相关的父标签(清除标记)</li>
<li><code>Ctrl + Shift + Y</code> 计算数学表达式</li>
<li><code>Alt + ↓&amp;↑</code> 以 0.1 的步长改变数字</li>
<li><code>Alt + Shift + ↓&amp;↑</code> 以 10 的步长改变数字</li>
<li><code>Ctrl + ↓&amp;↑</code> 以 1 的步长改变数字</li>
<li><code>Ctrl+K+U</code> <code>Ctrl+K+L</code> 改变大小写</li>
</ul>
<p><a href="http://sublime.emptystack.net/">http://sublime.emptystack.net/</a></p>
<h2 id="issues"><a href="#issues" class="headerlink" title="issues"></a>issues</h2><p>1.</p>
<blockquote>
<p>“Error: 404 Not Found<br>Sorry, the requested URL ‘<a href="http://127.0.0.1:51004/view/29&#39;">http://127.0.0.1:51004/view/29&#39;</a> caused an error:<br>‘buffer_id(29) is not valid (closed or unsupported file format)’<br>NOTE: If you run multiple instances of Sublime Text, you may want to adjust the server_port option in order to get this plugin work again.”</p>
</blockquote>
<p>Quick Fix 1: Remove Strikethrough Extension</p>
<p><code>Sublime Text &gt; Preferences &gt; Package Settings &gt; OmniMarkupPreviewer &gt; Settings - User</code><br>paste the following to remove the strikeout package.</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"> &#123;</span><br><span class="line">  &#x27;renderer_options-markdownrenderer&#x27;: &#123;</span><br><span class="line">    &quot;extensions&quot;:[<span class="string">&quot;tables&quot;</span>,<span class="string">&quot;fenced_code&quot;</span>,<span class="string">&quot;codehilite&quot;</span>] ;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Quick Fix 2: Fix the Strikethrough Extension (if you need it)</p>
<p>Find the python-markdown sublime package.</p>
<p><code>/Packages/OmniMarkupPreviewer/OmniMarkupLib/Renderers/libs/mdx_strikeout.py</code></p>
<p>Replace the makeExtension() method with the following:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">makeExtension</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">    <span class="keyword">return</span> StrikeoutExtension(*args, **kwargs)</span><br><span class="line">Save, quit <span class="keyword">and</span> reload Sublime Text.</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>sublime</tag>
      </tags>
  </entry>
  <entry>
    <title>telegram ss ip 名单</title>
    <url>/236.html</url>
    <content><![CDATA[<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">91.108.56.0&#x2F;22</span><br><span class="line">91.108.4.0&#x2F;22</span><br><span class="line">109.239.140.0&#x2F;24</span><br><span class="line">149.154.160.0&#x2F;20</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>telegram</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu 下关于 Transmission daemon 的安装与配置</title>
    <url>/1449.html</url>
    <content><![CDATA[<h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>Transmission 是一个强大的 BitTorrent 开源客户端，<a href="https://www.transmissionbt.com/">官方网站</a>上提供了多个版本可以下载，包括：Mac、GTK+、QT、web 版本。</p>
<p>Transmission 支持 DHT、Magnet Link、uTP 以及 PEX 等特性。尤其是支持 Magnet Link 磁力链接下载十分重要，因为目前网上很多资源都是采用这种方式来分享的，而不是传统的.torrent 文件</p>
<p>在 Ubuntu 的发行版中，Transmission 软件包下面包含多个套件，这些套件的名字很容易搞混淆，它们分别是：</p>
<ul>
<li>transmission-gtk: GTK+界面的 Transmission BT 客户端。</li>
<li>transmission-qt: QT 界面的 Transmission BT 客户端。</li>
<li>transmission-cli: 命令行界面的 Transmission BT 客户端，与 QT、GTK+版本功能一样，是命令行下一个完备的 BT 客户端。</li>
<li>transmission-daemon: 是一个 Transmission 的后台守护程序，本身不具备操作指令，只能通过 Web 客户端或者 transmission-remote-cli 来进行控制。这个程序特别适合安装在服务器上或者嵌入式系统中，以及一些没有显示器的设备上。</li>
<li>transmission-remote-cli: 用来控制 transmission-daemon 的命令套件，本身不具备下载 BT 的功能，只能够配合 daemon 使用。</li>
</ul>
<p>这些套件不必都安装上，根据我的需求，只需要安装 transmission-daemon 即可</p>
<h3 id="Transmission-的安装"><a href="#Transmission-的安装" class="headerlink" title="Transmission 的安装"></a>Transmission 的安装</h3><p>打开终端，输入以下命令安装：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install transmission-daemon</span><br></pre></td></tr></table></figure>

<p>安装过程中会顺带把 transmission-cli 也安装上，安装完毕后系统会多出如下一些命令行工具</p>
<ul>
<li>transmission-cli： 独立的命令行客户端。</li>
<li>transmission-create： 用来建立.torrent 种子文件的命令行工具。</li>
<li>transmission-daemon： 后台守护程序。</li>
<li>transmission-edit： 用来修改.torrent 种子文件的 announce URL。</li>
<li>transmission-remote： 控制 daemon 的程序。</li>
<li>transmission-show：查看.torrent 文件的信息。</li>
</ul>
<p>安装好后，Transmission-daemon 有一些默认设置(<a href="https://trac.transmissionbt.com/wiki/UnixServer/Debian">参考链接</a>)。</p>
<p>默认配置目录清单</p>
<p>启动初始化脚本 /etc/init.d/transmission-daemon<br>基本配置文件 /etc/default/transmission-daemon<br>详细配置文件目录 /var/lib/transmsision-daemon/info/settings.json<br>下载存储目录 /var/lib/transmission-daemon/downloads</p>
<p>settings.json： 主要的配置文件，设置 daemon 的各项参数，包括 RPC 的用户名密码配置。它实际上是一个符号链接，指向的原始文件是/etc/transmission-daemon/settings.json。里面的参数解释可以参考官网的配置说明。<br>torrents/： 用户存放.torrent 种子文件的目录,凡是添加到下载任务的种子，都存放在这里。.torrent 的命名包含,种子文件本身的名字和种子的 SHA1 HASH 值。<br>resume/： 存放了.resume 文件，.resume 文件包含了一个种子的信息，例如该文件哪些部分被下载了，下载的数据存储的位置等等。<br>blocklists/： 存储被屏蔽的 peer 的地址。<br>dht.dat： 存储 DHT 节点信息。</p>
<p>如果使用另外一个用户来运行 transmission-daemon 的话，会在该用户的目录下，创建一个.config/transmission-daemon 的文件夹，配置目录 <a href="https://github.com/transmission/transmission/wiki/Configuration-Files">https://github.com/transmission/transmission/wiki/Configuration-Files</a></p>
<h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 启动</span></span><br><span class="line">sudo service transmission-daemon start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止</span></span><br><span class="line">sudo service transmission-daemon stop</span><br></pre></td></tr></table></figure>

<h3 id="Transmission-的配置"><a href="#Transmission-的配置" class="headerlink" title="Transmission 的配置"></a>Transmission 的配置</h3><p>配置主要是通过修改/var/lib/transmission-daemon/info/settings.json 文件中的参数来实现的。<br>注意：在编辑 Transmission 的配置文件的时候，需要先关闭 daemon 进程，否则编辑的参数将会被恢复到原来的状态。</p>
<h4 id="配置-RPC"><a href="#配置-RPC" class="headerlink" title="配置 RPC"></a>配置 RPC</h4><p>最关键的就是要配置 RPC，因为无论是 Web 界面还是 CLI 都是通过 RPC 协议和 daemon 来进行交互的。</p>
<p>打开文件/var/lib/transmission-daemon/info/settings.json，修改配置参数如下：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;rpc-authentication-required&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;rpc-bind-address&quot;</span>: <span class="string">&quot;0.0.0.0&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;rpc-enabled&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;rpc-host-whitelist&quot;</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// rpc 主机白名单</span></span><br><span class="line">  <span class="attr">&quot;rpc-host-whitelist-enabled&quot;</span>: <span class="literal">true</span>, <span class="comment">//rpc 主机白名单是否开启，若需要任意主机都能访问，建议false</span></span><br><span class="line">  <span class="attr">&quot;rpc-password&quot;</span>: <span class="string">&quot;123456&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;rpc-port&quot;</span>: <span class="number">9091</span>,</span><br><span class="line">  <span class="attr">&quot;rpc-url&quot;</span>: <span class="string">&quot;/transmission/&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;rpc-username&quot;</span>: <span class="string">&quot;transmission&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;rpc-whitelist&quot;</span>: <span class="string">&quot;*&quot;</span>, <span class="comment">// rpc 主机白名单</span></span><br><span class="line">  <span class="attr">&quot;rpc-whitelist-enabled&quot;</span>: <span class="literal">true</span> <span class="comment">//rpc 主机白名单是否开启，若需要任意主机都能访问，建议false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我将用户名设置为了 transmission，密码设置为了 123456，whitelist 设置成了”*”，表示任何 IP 都可以通过 RPC 协议访问这个 daemon。需要注意的是 password 设置成了明文。当启动 daemon 之后，daemon 会自动检测密码设置。如果发现密码配置被修改了，daemon 会自动计算修改后的密码的 HASH 值，并用这个 HASH 值替换掉配置文件中的明文密码，这样会更安全。</p>
<p>输入<code>service transmission-daemon start</code>启动程序后，打开 settings.json，会看到 rpc-password 一项被改为了 HASH 值。</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;rpc-password&quot;</span>: <span class="string">&quot;&#123;5f4bd5498bddd9aa2ad8f4d475dcebe23e9d8c8bsorspnUE&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>settings.json 里面还有很多参数可以配置，包括上传/下载速度的限制、DHT 的配置、端口设置等等，详细的参数解释可以参考<a href="https://trac.transmissionbt.com/wiki/EditConfigFiles">官网的配置说明</a></p>
<h3 id="使用-Web-界面控制-Transmission-daemon"><a href="#使用-Web-界面控制-Transmission-daemon" class="headerlink" title="使用 Web 界面控制 Transmission daemon"></a>使用 Web 界面控制 Transmission daemon</h3><p>经过上述配置后，我们就可以通过 Web 界面来访问和控制 Transmission daemon 了。在浏览器里面输入以下地址</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:9091&#x2F;transmission&#x2F;web&#x2F;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>浏览器提示你输入刚才配置的用户名和密码，就可以成功登陆 Web 管理界面。界面和桌面版的 GUI 程序有点像，操作起来很方便。</p>
<h3 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h3><p>在本机使用 <code>http://&lt;your.server.ip.addr&gt;:9091/transmission/web/</code> 访问出现 403:Forbidden 解决<br>修改配置</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;rpc-whitelist&quot;</span>: <span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;rpc-whitelist-enabled&quot;</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将 <code>rpc-whitelist</code>设置为 <code>&quot;*&quot;</code>或将 <code>rpc-whitelist-enabled</code> 设置为 <code>false</code></p>
<p>在局域网其他机器上使用 <code>http://&lt;your.server.ip.addr&gt;:9091/transmission/web/</code> 访问时无法访问解决<br>修改配置</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;rpc-host-whitelist&quot;</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// rpc 主机白名单</span></span><br><span class="line">  <span class="attr">&quot;rpc-host-whitelist-enabled&quot;</span>: <span class="literal">true</span> <span class="comment">//rpc 主机白名单是否开启，若需要任意主机都能访问，建议false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将 <code>rpc-host-whitelist</code>设置为 <code>&quot;*&quot;</code>或将 <code>rpc-host-whitelist-enabled</code> 设置为 <code>false</code></p>
<p>原始界面，没有汉化，也比较简单，可以使用 <a href="https://github.com/ronggang/transmission-web-control">transmission-web-control</a> 加强 Transmission Web 的操作能力</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget -N  https://github.com/ronggang/transmission-web-control/raw/master/release/install-tr-control-cn.sh</span><br><span class="line">bash install-tr-control-cn.sh</span><br></pre></td></tr></table></figure>

<p>安装完成之后刷新浏览器即可看到新的 ui，如果没有看到可能是浏览器缓存，ctrl + f5 强制刷新一下，如果还是没有看到，<br>可以尝试使用 root 用户运行</p>
<p>或尝试使用</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bash install-tr-control-cn.sh /usr/share/transmission</span><br></pre></td></tr></table></figure>

<p>/usr/share/transmission 为 Transmission Web 所在目录</p>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
  </entry>
  <entry>
    <title>UsbEAm Hosts Editor [多平台 hosts 修改] V3.50</title>
    <url>/1853.html</url>
    <content><![CDATA[<p>UsbEAm Hosts Editor 是一款能够提升 origin、steam、uplay 等游戏平台下载速度的工具，同时也可以有效的解决一些游戏或者平台出现的各种网络错误，帮玩家能够顺利的登录平台，顺利进行游戏。</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102203606.png"></p>
<p>UsbEAm Hosts Editor 还可以为 github 加速，提高网页浏览的速度和代码下载的速度</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102203624.png"></p>
<p>使用方法：</p>
<ul>
<li><p>点击左下角的游戏手柄（或者点击鼠标右键），弹出菜单</p>
</li>
<li><p>在弹出的菜单上选择要检测的项目。里面包含了多个流行的游戏平台，每个平台还有下载、浏览等子菜单</p>
</li>
<li><p>接着会出现一大堆 IP，先别急着去用，先点击 <code>检测延迟</code>，然后选择延迟最低的地址，点击应用选中即可</p>
</li>
<li><p>也可以点击 <code>编辑Hosts</code>，手工对 Hosts 进行编辑</p>
</li>
</ul>
<p>如果某些安全软件弹出阻止情况，请忽略放过，不然无法修改</p>
<p>软件下载</p>
<p>百度云：<a href="https://pan.baidu.com/s/1CYNEbqxkH-8vzdxWDOOE2g">https://pan.baidu.com/s/1CYNEbqxkH-8vzdxWDOOE2g</a> 提取码：p1ee</p>
]]></content>
      <categories>
        <category>软件</category>
      </categories>
      <tags>
        <tag>hosts</tag>
      </tags>
  </entry>
  <entry>
    <title>v2ray 搭建配置教程</title>
    <url>/226.html</url>
    <content><![CDATA[<h2 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h2><p><a href="https://github.com/v2ray/v2ray-core">V2Ray 项目地址</a></p>
<p><a href="https://www.v2ray.com/">v2ray 用户手册</a></p>
<p><a href="https://v2fly.org/">v2ray 用户手册</a> <a href="https://github.com/v2fly/v2fly-github-io">github</a></p>
<p><a href="https://guide.v2fly.org/">V2Ray 白话文指南</a> <a href="https://github.com/v2fly/v2ray-step-by-step/tree/transifex/zh_CN">github</a></p>
<p><a href="https://intmainreturn0.com/v2ray-config-gen/">在线配置生成</a></p>
<p><a href="https://github.com/sprov065/v2-ui">v2ray web面板 v2-ui</a></p>
<p><a href="https://github.com/Anankke/SSPanel-Uim">SSPanel-Uim</a> 节点管理面板/用户管理系统</p>
<p><a href="https://blog.anank.ke/w/SSPanel_with_DROP_DATABASE_BT">使用宝塔部署 SSPanel 魔改版</a></p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="一键脚本安装"><a href="#一键脚本安装" class="headerlink" title="一键脚本安装"></a>一键脚本安装</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bash &lt;(curl -s -L https://git.io/v2ray.sh)</span><br></pre></td></tr></table></figure>

<p>安装完成后，输入 v2ray 即可管理 V2Ray</p>
<p>管理命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">v2ray info <span class="comment"># 查看 V2Ray 配置信息</span></span><br><span class="line">v2ray config <span class="comment"># 修改 V2Ray 配置</span></span><br><span class="line">v2ray link <span class="comment"># 生成 V2Ray 配置文件链接</span></span><br><span class="line">v2ray infolink <span class="comment"># 生成 V2Ray 配置信息链接</span></span><br><span class="line">v2ray qr <span class="comment"># 生成 V2Ray 配置二维码链接</span></span><br><span class="line">v2ray ss <span class="comment"># 修改 Shadowsocks 配置</span></span><br><span class="line">v2ray ssinfo <span class="comment"># 查看 Shadowsocks 配置信息</span></span><br><span class="line">v2ray ssqr <span class="comment"># 生成 Shadowsocks 配置二维码链接</span></span><br><span class="line">v2ray status <span class="comment"># 查看 V2Ray 运行状态</span></span><br><span class="line">v2ray start <span class="comment"># 启动 V2Ray</span></span><br><span class="line">v2ray stop <span class="comment"># 停止 V2Ray</span></span><br><span class="line">v2ray restart <span class="comment"># 重启 V2Ray</span></span><br><span class="line">v2ray <span class="built_in">log</span> <span class="comment"># 查看 V2Ray 运行日志</span></span><br><span class="line">v2ray update <span class="comment"># 更新 V2Ray</span></span><br><span class="line">v2ray update.sh <span class="comment"># 更新 V2Ray 管理脚本</span></span><br><span class="line">v2ray uninstall <span class="comment"># 卸载 V2Ray</span></span><br></pre></td></tr></table></figure>

<h3 id="官方脚本"><a href="#官方脚本" class="headerlink" title="官方脚本"></a>官方脚本</h3><p><a href="https://v2ray.com/chapter_00/install.html">官方脚本</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装</span></span><br><span class="line">bash &lt;(curl -L -s https://install.direct/go.sh)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装完成后记住 PORT UUID，忘记也没关系可以使用下面命令查看</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动</span></span><br><span class="line">systemctl start v2ray</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看端口 Port</span></span><br><span class="line">cat /etc/v2ray/config.json | grep port</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看 id (UUID)</span></span><br><span class="line">cat /etc/v2ray/config.json | grep id</span><br></pre></td></tr></table></figure>

<h3 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h3><p>如果脚本不支持卸载，可使用以下方法手动卸载</p>
<p>其中 systemd 和 sysv 二选一，取决于你的系统</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#停用并卸载服务(systemd)</span></span><br><span class="line">systemctl stop v2ray</span><br><span class="line">systemctl <span class="built_in">disable</span> v2ray</span><br><span class="line"></span><br><span class="line"><span class="comment">#停用并卸载服务(sysv)</span></span><br><span class="line">service v2ray stop</span><br><span class="line">update-rc.d -f v2ray remove</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除文件</span></span><br><span class="line"><span class="comment"># 配置文件</span></span><br><span class="line">rm -rf /etc/v2ray/*</span><br><span class="line"><span class="comment"># 程序</span></span><br><span class="line">rm -rf /usr/bin/v2ray/*</span><br><span class="line"><span class="comment"># 日志</span></span><br><span class="line">rm -rf /var/<span class="built_in">log</span>/v2ray/*</span><br><span class="line"><span class="comment"># systemd 启动项</span></span><br><span class="line">rm -rf /lib/systemd/system/v2ray.service</span><br><span class="line"><span class="comment"># sysv 启动项</span></span><br><span class="line">rm -rf /etc/init.d/v2ray</span><br></pre></td></tr></table></figure>

<h3 id="Nginx-WebSocket-TLS"><a href="#Nginx-WebSocket-TLS" class="headerlink" title="Nginx + WebSocket + TLS"></a>Nginx + WebSocket + TLS</h3><p>参考：<a href="https://guide.v2fly.org/advanced/wss_and_web.html">https://guide.v2fly.org/advanced/wss_and_web.html</a></p>
<p>V2Ray 脚本可直接使用 Caddy 配置 WebSocket + TLS 传输协议，但是如果想在 vps 上同时使用 nginx 跑一个小博客，那么会导致 caddy 和 nginx 监听端口时发生冲突，这显然不是我们想要的</p>
<p>所以就要将 TLS 部分放到 nginx 程序里面去实现</p>
<h4 id="首先使用官方脚本安装好服务端程序"><a href="#首先使用官方脚本安装好服务端程序" class="headerlink" title="首先使用官方脚本安装好服务端程序"></a>首先使用官方脚本安装好服务端程序</h4><h4 id="申请-SSL-证书"><a href="#申请-SSL-证书" class="headerlink" title="申请 SSL 证书"></a>申请 SSL 证书</h4><blockquote>
<p>如果使用宝塔面板，可以通过面板一键生成 ssl 证书，快速配置 <code>nginx+ssl</code></p>
</blockquote>
<p>申请免费 SSL 证书参考<a href="https://wqdy.top/1909.html">这里</a></p>
<h4 id="nginx-配置"><a href="#nginx-配置" class="headerlink" title="nginx 配置"></a>nginx 配置</h4><blockquote>
<p>如果使用宝塔面板，可以通过面板一键生成 ssl 证书，快速配置 <code>nginx+ssl</code></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen 443 ssl;</span><br><span class="line">  listen [::]:443 ssl;</span><br><span class="line">  server_name           aaa.com; # 域名</span><br><span class="line"></span><br><span class="line">  # 配置ssl</span><br><span class="line">  ssl_certificate       &#x2F;etc&#x2F;letsencrypt&#x2F;aaa.com.crt; # 证书</span><br><span class="line">  ssl_certificate_key   &#x2F;etc&#x2F;letsencrypt&#x2F;aaa.com.key; # 密钥</span><br><span class="line">  ssl_session_timeout 1d;</span><br><span class="line">  ssl_session_cache shared:MozSSL:10m;</span><br><span class="line">  ssl_session_tickets off;</span><br><span class="line">  ssl_protocols         TLSv1.2 TLSv1.3;</span><br><span class="line">  ssl_ciphers           ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;</span><br><span class="line">  ssl_prefer_server_ciphers off;</span><br><span class="line">  #</span><br><span class="line"></span><br><span class="line">  location &#x2F;ray &#123; # 与 V2Ray 服务端配置中的 path 保持一致</span><br><span class="line">    if ($http_upgrade !&#x3D; &quot;websocket&quot;) &#123; # WebSocket协商失败时返回404</span><br><span class="line">      return 404;</span><br><span class="line">    &#125;</span><br><span class="line">    proxy_redirect off;</span><br><span class="line">    proxy_pass http:&#x2F;&#x2F;127.0.0.1:2333; # 假设 WebSocket 监听在环回地址的 2333 端口上</span><br><span class="line">    proxy_http_version 1.1;</span><br><span class="line">    proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">    proxy_set_header Connection &quot;upgrade&quot;;</span><br><span class="line">    proxy_set_header Host $host;</span><br><span class="line">    # Show real IP in v2ray access.log</span><br><span class="line">    proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="v2ray-服务端配置"><a href="#v2ray-服务端配置" class="headerlink" title="v2ray 服务端配置"></a>v2ray 服务端配置</h4><p>/etc/v2ray/config.json</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;inbounds&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;port&quot;</span>: <span class="number">2333</span>, <span class="comment">// WebSocket 监听端口</span></span><br><span class="line">      <span class="attr">&quot;listen&quot;</span>: <span class="string">&quot;127.0.0.1&quot;</span>, <span class="comment">// 只监听 127.0.0.1，避免除本机外的机器探测到开放了 22445 端口</span></span><br><span class="line">      <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;vmess&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;clients&quot;</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxx&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;alterId&quot;</span>: <span class="number">32</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">&quot;streamSettings&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;network&quot;</span>: <span class="string">&quot;ws&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;wsSettings&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;/ray&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;outbounds&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;freedom&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;settings&quot;</span>: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="客户端配置"><a href="#客户端配置" class="headerlink" title="客户端配置"></a>客户端配置</h4><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;inbounds&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;port&quot;</span>: <span class="number">1080</span>,</span><br><span class="line">      <span class="attr">&quot;listen&quot;</span>: <span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;socks&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;sniffing&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;enabled&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;destOverride&quot;</span>: [<span class="string">&quot;http&quot;</span>, <span class="string">&quot;tls&quot;</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;auth&quot;</span>: <span class="string">&quot;noauth&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;udp&quot;</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;outbounds&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;vmess&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;vnext&quot;</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">&quot;address&quot;</span>: <span class="string">&quot;aaa.com&quot;</span>, <span class="comment">// nginx server_name</span></span><br><span class="line">            <span class="attr">&quot;port&quot;</span>: <span class="number">443</span>,</span><br><span class="line">            <span class="attr">&quot;users&quot;</span>: [</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxx&quot;</span>, <span class="comment">// 同服务端配合</span></span><br><span class="line">                <span class="attr">&quot;alterId&quot;</span>: <span class="number">32</span> <span class="comment">// 同服务端配合</span></span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">&quot;streamSettings&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;network&quot;</span>: <span class="string">&quot;ws&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;security&quot;</span>: <span class="string">&quot;tls&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;wsSettings&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;/ray&quot;</span> <span class="comment">// 与 V2Ray 服务端配置中的 path 保持一致</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Nginx-vmess-ws-tls-http2-over-tls-一键安装脚本"><a href="#Nginx-vmess-ws-tls-http2-over-tls-一键安装脚本" class="headerlink" title="Nginx+vmess+ws+tls/ http2 over tls 一键安装脚本"></a>Nginx+vmess+ws+tls/ http2 over tls 一键安装脚本</h3><p><a href="https://github.com/wulabing/V2Ray_ws-tls_bash_onekey">https://github.com/wulabing/V2Ray_ws-tls_bash_onekey</a></p>
<h2 id="v2ray-配置好后无法连接解决办法"><a href="#v2ray-配置好后无法连接解决办法" class="headerlink" title="v2ray 配置好后无法连接解决办法"></a>v2ray 配置好后无法连接解决办法</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 检查端口占用情况</span></span><br><span class="line">yum install net-tools</span><br><span class="line">netstat -apn | grep v2ray</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发现v2ray并没有监听我们的公网IP，只监听了一个IPV6：</span></span><br><span class="line"><span class="comment"># tcp6       0      0 :::40682                :::*                    LISTEN      19553/v2ray</span></span><br><span class="line"><span class="comment"># unix  3      [ ]         STREAM     CONNECTED     80938    19553/v2ray</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改配置文件添加 listen 字段</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># v2ray默认配置文件在/etc/v2ray/conf.json</span></span><br><span class="line"><span class="string">&quot;inbound&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;listen&quot;</span>:<span class="string">&quot;12.34.56.78&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># v2ray 测试配置文件是否正确</span></span><br><span class="line">/usr/bin/v2ray/v2ray --<span class="built_in">test</span> --config /etc/v2ray/config.json</span><br></pre></td></tr></table></figure>

<h2 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h2><p>更多客户端可以参考<a href="https://wqdy.top/228.html">这里</a></p>
<p>macOS：<a href="https://github.com/yanue/V2rayU">V2rayU</a> <a href="https://github.com/Cenmrev/V2RayX">V2RayX</a></p>
<p>Windows：<a href="https://github.com/2dust/v2rayN">v2rayN</a></p>
<p>Android：<a href="https://github.com/2dust/v2rayNG/releases">V2RayNG</a></p>
<p>iOS：Shadowrocket</p>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
  </entry>
  <entry>
    <title>VMware Workstation Pro v16.1.0 虚拟机软件及永久许可证</title>
    <url>/2015.html</url>
    <content><![CDATA[<p>VMware Workstation</p>
<p>官网下载地址</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">VMware Workstation Pro 16.1.0 Build 17198959</span><br><span class="line">https:&#x2F;&#x2F;download3.vmware.com&#x2F;software&#x2F;wkst&#x2F;file&#x2F;VMware-workstation-full-16.1.0-17198959.exe</span><br><span class="line"></span><br><span class="line">VMware Workstation Pro 16.0.0 Build 16894299</span><br><span class="line">https:&#x2F;&#x2F;download3.vmware.com&#x2F;software&#x2F;wkst&#x2F;file&#x2F;VMware-workstation-full-16.0.0-16894299.exe</span><br><span class="line"></span><br><span class="line">VMware Workstation Pro 15.0.0 Build 10134415</span><br><span class="line">https:&#x2F;&#x2F;download3.vmware.com&#x2F;software&#x2F;wkst&#x2F;file&#x2F;VMware-workstation-full-15.0.0-10134415.exe</span><br><span class="line"></span><br><span class="line">VMware Workstation Pro 14.1.3 Build 9474260</span><br><span class="line">https:&#x2F;&#x2F;download3.vmware.com&#x2F;software&#x2F;wkst&#x2F;file&#x2F;VMware-workstation-full-14.1.3-9474260.exe</span><br><span class="line"></span><br><span class="line">VMware Workstation Pro 12.5.9 Build 7535481</span><br><span class="line">https:&#x2F;&#x2F;download3.vmware.com&#x2F;software&#x2F;wkst&#x2F;file&#x2F;VMware-workstation-full-12.5.9-7535481.exe</span><br><span class="line"></span><br><span class="line">VMware Workstation 10.0.7 Build 2844087</span><br><span class="line">https:&#x2F;&#x2F;download3.vmware.com&#x2F;software&#x2F;wkst&#x2F;file&#x2F;VMware-workstation-full-10.0.7-2844087.exe</span><br></pre></td></tr></table></figure>

<p>激活许可证</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">VMware Workstation Pro 16 激活许可证</span><br><span class="line">ZF3R0-FHED2-M80TY-8QYGC-NPKYF</span><br><span class="line">YF390-0HF8P-M81RQ-2DXQE-M2UT6</span><br><span class="line">ZF71R-DMX85-08DQY-8YMNC-PPHV8</span><br><span class="line"></span><br><span class="line">VMware Workstation Pro 15 激活许可证</span><br><span class="line">UY758-0RXEQ-M81WP-8ZM7Z-Y3HDA</span><br><span class="line">VF750-4MX5Q-488DQ-9WZE9-ZY2D6</span><br><span class="line">UU54R-FVD91-488PP-7NNGC-ZFAX6</span><br><span class="line">YC74H-FGF92-081VZ-R5QNG-P6RY4</span><br><span class="line">YC34H-6WWDK-085MQ-JYPNX-NZRA2</span><br><span class="line">FG78K-0UZ15-085TQ-TZQXV-XV0CD</span><br><span class="line">ZA11U-DVY97-M81LP-4MNEZ-X3AW0</span><br><span class="line">YU102-44D86-48D2Z-Z4Q5C-MFAWD</span><br><span class="line">FC7D0-D1YDL-M8DXZ-CYPZE-P2AY6</span><br><span class="line"></span><br><span class="line">VMware Workstation Pro 14 激活许可证</span><br><span class="line">FF31K-AHZD1-H8ETZ-8WWEZ-WUUVA</span><br><span class="line">CV7T2-6WY5Q-48EWP-ZXY7X-QGUWD</span><br><span class="line"></span><br><span class="line">VMware Workstation Pro 12 激活许可证</span><br><span class="line">5A02H-AU243-TZJ49-GTC7K-3C61N</span><br><span class="line">VF5XA-FNDDJ-085GZ-4NXZ9-N20E6</span><br><span class="line">UC5MR-8NE16-H81WY-R7QGV-QG2D8</span><br><span class="line">ZG1WH-ATY96-H80QP-X7PEX-Y30V4</span><br><span class="line">AA3E0-0VDE1-0893Z-KGZ59-QGAVF</span><br><span class="line">ZC3TK-63GE6-481JY-WWW5T-Z7ATA</span><br><span class="line"></span><br><span class="line">VMware Workstation Pro 10 激活许可证</span><br><span class="line">1Z0G9-67285-FZG78-ZL3Q2-234JG</span><br><span class="line">4C4EK-89KDL-5ZFP9-1LA5P-2A0J0</span><br><span class="line">HY086-4T01N-CZ3U0-CV0QM-13DNU</span><br></pre></td></tr></table></figure>

<p>解锁安装 macos</p>
<p>Auto-Unlocker 支持 Pro 16：<a href="https://github.com/paolo-projects/auto-unlocker/releases">https://github.com/paolo-projects/auto-unlocker/releases</a></p>
<p>下载完成后，解压 Unlocker.zip 文件放置于 VMware 根目录，并选择以管理员身份运行 Unlocker.exe 文件</p>
<p>可能需要关闭VMware的一切服务，包括正在运行的VMware</p>
<p>下载地址：<br>链接：<a href="https://pan.baidu.com/s/1pyTC89kIVjIDAocMAZbP4Q">https://pan.baidu.com/s/1pyTC89kIVjIDAocMAZbP4Q</a><br>提取码：wqdy</p>
]]></content>
      <tags>
        <tag>vmware</tag>
      </tags>
  </entry>
  <entry>
    <title>搭建ss服务器</title>
    <url>/224.html</url>
    <content><![CDATA[<h2 id="购买-VPS-服务器"><a href="#购买-VPS-服务器" class="headerlink" title="购买 VPS 服务器"></a>购买 VPS 服务器</h2><p>vultr 注册地址：<a href="https://www.vultr.com/">https://www.vultr.com/</a></p>
<p>利用 <code>ipip</code> 这个网站的 实用工具里的 ping 来全国性的 ping 我们的主机，检测连通性</p>
<h2 id="部署-VPS-服务器"><a href="#部署-VPS-服务器" class="headerlink" title="部署 VPS 服务器"></a>部署 VPS 服务器</h2><h3 id="ssh-工具"><a href="#ssh-工具" class="headerlink" title="ssh 工具"></a>ssh 工具</h3><p><strong>Win：</strong><br>使用软件 PuTTY<br>打开软件<br>Host Name (or IP address) 写你服务器的 IP 地址<br>Port 默认 22<br>Connection type 选择 SSH<br>Open</p>
<p><strong>Mac：</strong><br>默认有 SSH 命令<br>ssh root@IP<br>输入用户名和密码,用户名为 root<br>login as: root<br>root@IP’s password:</p>
<h3 id="安装服务"><a href="#安装服务" class="headerlink" title="安装服务"></a>安装服务</h3><p>CentOS/Debian/Ubuntu ShadowsocksR 单/多端口 一键管理脚本<br><a href="https://doub.io/ss-jc42/">https://doub.io/ss-jc42/</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install wget</span><br><span class="line"></span><br><span class="line">wget -N --no-check-certificate https://softs.fun/Bash/ssr.sh &amp;&amp; chmod +x ssr.sh &amp;&amp; bash ssr.sh</span><br></pre></td></tr></table></figure>

<p>备用脚本：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install wget</span><br><span class="line"></span><br><span class="line">wget -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/ssr.sh &amp;&amp; chmod +x ssr.sh &amp;&amp; bash ssr.sh</span><br></pre></td></tr></table></figure>

<p>复制上面的代码到 VPS 服务器里，按回车键，脚本会自动安装，以后只需要运行 <code>bash ssr.sh</code> 这个快捷命令就可以出现下图的界面进行设置。</p>
<ol>
<li>安装 SSR 服务端</li>
<li>设置端口和密码</li>
<li>设置的加密方式: aes-256-cfb</li>
<li>选择协议插件: auth_sha1_v4</li>
<li>选择混淆插件 plain</li>
</ol>
<p>ShadowsocksR MudbJSON 模式多用户一键脚本 支持流量限制<br><a href="https://doub.io/ss-jc60/">https://doub.io/ss-jc60/</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget -N --no-check-certificate https://softs.fun/Bash/ssrmu.sh &amp;&amp; chmod +x ssrmu.sh &amp;&amp; bash ssrmu.sh</span><br></pre></td></tr></table></figure>

<p>备用下载地址</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/ssrmu.sh &amp;&amp; chmod +x ssrmu.sh &amp;&amp; bash ssrmu.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bash ssrmu.sh</span><br></pre></td></tr></table></figure>

<h2 id="测速脚本官方地址"><a href="#测速脚本官方地址" class="headerlink" title="测速脚本官方地址"></a>测速脚本官方地址</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://raw.githubusercontent.com/oooldking/script/master/superbench.sh</span><br><span class="line">chmod +x superbench.sh</span><br><span class="line">./superbench.sh</span><br></pre></td></tr></table></figure>

<h2 id="加速"><a href="#加速" class="headerlink" title="加速"></a>加速</h2><p><a href="https://ssr.tools/674">锐速/BBR/魔改 BBR/KCPTUN 加速效果对比测试</a></p>
<p>【原版 BBR】</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget --no-check-certificate https://github.com/teddysun/across/raw/master/bbr.sh</span><br><span class="line">chmod +x bbr.sh</span><br><span class="line">./bbr.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启服务器</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证是否安装成功</span></span><br><span class="line">sysctl net.ipv4.tcp_congestion_control</span><br><span class="line"><span class="comment"># 得到如下结果表示安装成功</span></span><br><span class="line">net.ipv4.tcp_congestion_control = bbr</span><br></pre></td></tr></table></figure>

<p>【魔改 BBR】</p>
<p>只有 centos 和 debain 版</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># centos 版</span></span><br><span class="line">wget --no-check-certificate https://raw.githubusercontent.com/tcp-nanqinlang/general/master/General/CentOS/bash/tcp_nanqinlang-1.3.2.sh</span><br><span class="line">bash tcp_nanqinlang-1.3.2.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># debain 版</span></span><br><span class="line">wget --no-check-certificate https://github.com/tcp-nanqinlang/general/releases/download/3.4.2.1/tcp_nanqinlang-fool-1.3.0.sh</span><br><span class="line">bash tcp_nanqinlang-fool-1.3.0.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择 1 安装内核，重启</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行 选择 2 安装并开启算法</span></span><br><span class="line">bash tcp_nanqinlang-1.3.2.sh</span><br><span class="line"><span class="comment"># 选择 2 安装并开启算法</span></span><br></pre></td></tr></table></figure>

<p>【BBRPlus（BBR v2.0）】</p>
<p>Github 项目地址：<a href="https://github.com/cx9208/bbrplus">https://github.com/cx9208/bbrplus</a></p>
<p>一键脚本（仅CentOS）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install wget &amp;&amp; wget <span class="string">&quot;https://github.com/cx9208/bbrplus/raw/master/ok_bbrplus_centos.sh&quot;</span> &amp;&amp; chmod +x ok_bbrplus_centos.sh &amp;&amp; ./ok_bbrplus_centos.sh</span><br></pre></td></tr></table></figure>

<p>等待安装完成，重启，重启之后，按照以下步骤检查是否成功：</p>
<p>执行 uname -r，显示 4.14.129-bbrplus 则切换内核成功</p>
<p>执行 lsmod | grep bbr，显示有 bbrplus 则开启成功</p>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>ss</tag>
      </tags>
  </entry>
  <entry>
    <title>Window 10下终端美化</title>
    <url>/2017.html</url>
    <content><![CDATA[<p>WSL(Ubuntu)/MSYS2/Cygwin/PowerShell7<br>Windows Terminal/Fluent Terminal</p>
<h2 id="Fluent-Terminal-amp-PowerShell-7-amp-oh-my-posh-amp-posh-git"><a href="#Fluent-Terminal-amp-PowerShell-7-amp-oh-my-posh-amp-posh-git" class="headerlink" title="Fluent Terminal &amp; PowerShell 7+ &amp; oh-my-posh &amp; posh-git"></a>Fluent Terminal &amp; PowerShell 7+ &amp; oh-my-posh &amp; posh-git</h2><p><a href="https://github.com/felixse/FluentTerminal/releases">Fluent Terminal</a><br><a href="https://github.com/PowerShell/PowerShell/releases">PowerShell</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/137595941">https://zhuanlan.zhihu.com/p/137595941</a><br><a href="https://zhuanlan.zhihu.com/p/137251716">https://zhuanlan.zhihu.com/p/137251716</a></p>
<h2 id="MSYS2-Windows-Terminal"><a href="#MSYS2-Windows-Terminal" class="headerlink" title="MSYS2 + Windows Terminal"></a>MSYS2 + Windows Terminal</h2><p><a href="https://www.msys2.org/">MSYS2</a><br><a href="https://github.com/microsoft/terminal/releases">Windows Terminal</a></p>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><h4 id="安装-zsh"><a href="#安装-zsh" class="headerlink" title="安装 zsh"></a>安装 zsh</h4><p>打开 MSYS2，</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pacman -Syu</span><br><span class="line">pacman -S zsh</span><br></pre></td></tr></table></figure>

<p>由于 msys2 指定 MSYSCON 为 defterm 时默认是执行bash.exe， 我们把 C:\msys64\msys2_shell.cmd 大概第5行的bash 改成 zsh 即可：</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> &quot;LOGINSHELL=zsh&quot;</span><br></pre></td></tr></table></figure>

<h4 id="安装-oh-my-zsh"><a href="#安装-oh-my-zsh" class="headerlink" title="安装 oh-my-zsh"></a>安装 oh-my-zsh</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果无法安装，使用下面这种方式</span></span><br><span class="line">sh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://cdn.jsdelivr.net/gh/ohmyzsh/ohmyzsh@master/tools/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="安装-Fira-Code-字体"><a href="#安装-Fira-Code-字体" class="headerlink" title="安装 Fira Code 字体"></a>安装 Fira Code 字体</h4><p><a href="https://github.com/tonsky/FiraCode/releases">Fira Code</a></p>
<h4 id="配置到-Windows-Terminal"><a href="#配置到-Windows-Terminal" class="headerlink" title="配置到 Windows Terminal"></a>配置到 Windows Terminal</h4><p>在 settings.json 文件中加入MSYS2的配置</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&quot;profiles&quot;:</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;defaults&quot;</span>:</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// Put settings here that you want to apply to all profiles.</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;list&quot;</span>:</span><br><span class="line">  [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;guid&quot;</span>: <span class="string">&quot;&#123;1c4de342-38b7-51cf-b940-2309a097f589&#125;&quot;</span>, <span class="comment">// 唯一的标识，改成和其他的已有终端不一样</span></span><br><span class="line">      <span class="attr">&quot;hidden&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;MSYS2&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;acrylicOpacity&quot;</span>: <span class="number">0</span>, <span class="comment">// 透明度</span></span><br><span class="line">      <span class="attr">&quot;closeOnExit&quot;</span>: <span class="literal">true</span>, <span class="comment">// 关闭的时候退出命令终端</span></span><br><span class="line">      <span class="attr">&quot;colorScheme&quot;</span>: <span class="string">&quot;Homebrew&quot;</span>, <span class="comment">// 样式配置</span></span><br><span class="line">      <span class="attr">&quot;commandline&quot;</span>: <span class="string">&quot;C:\\msys64\\msys2_shell.cmd -defterm -no-start -here -use-full-path  -mingw64&quot;</span>, <span class="comment">// 重点就是要用这个脚本启动，以及他的参数</span></span><br><span class="line">      <span class="attr">&quot;startingDirectory&quot;</span>: <span class="string">&quot;~&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;cursorColor&quot;</span>: <span class="string">&quot;#FFFFFF&quot;</span>, <span class="comment">// 光标颜色</span></span><br><span class="line">      <span class="attr">&quot;cursorShape&quot;</span>: <span class="string">&quot;bar&quot;</span>, <span class="comment">// 光标形状</span></span><br><span class="line">      <span class="attr">&quot;fontFace&quot;</span>: <span class="string">&quot;Fira Code&quot;</span>, <span class="comment">// 字体配置，选择你电脑上已安装的字体</span></span><br><span class="line">      <span class="attr">&quot;fontSize&quot;</span>: <span class="number">11</span>, <span class="comment">// 终端字体大小</span></span><br><span class="line">      <span class="attr">&quot;historySize&quot;</span>: <span class="number">9001</span>, <span class="comment">// 终端窗口记忆大小</span></span><br><span class="line">      <span class="attr">&quot;icon&quot;</span>: <span class="string">&quot;C:\\msys64\\msys2.ico&quot;</span> <span class="comment">// git 的图</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// Add custom color schemes to this array.</span></span><br><span class="line"><span class="comment">// To learn more about color schemes, visit https://aka.ms/terminal-color-schemes</span></span><br><span class="line">&quot;schemes&quot;: [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Homebrew&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;black&quot;</span>: <span class="string">&quot;#000000&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;red&quot;</span>: <span class="string">&quot;#FC5275&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;green&quot;</span>: <span class="string">&quot;#00a600&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;yellow&quot;</span>: <span class="string">&quot;#999900&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;blue&quot;</span>: <span class="string">&quot;#6666e9&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;purple&quot;</span>: <span class="string">&quot;#b200b2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;cyan&quot;</span>: <span class="string">&quot;#00a6b2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;white&quot;</span>: <span class="string">&quot;#bfbfbf&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;brightBlack&quot;</span>: <span class="string">&quot;#666666&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;brightRed&quot;</span>: <span class="string">&quot;#e50000&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;brightGreen&quot;</span>: <span class="string">&quot;#00d900&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;brightYellow&quot;</span>: <span class="string">&quot;#e5e500&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;brightBlue&quot;</span>: <span class="string">&quot;#0000ff&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;brightPurple&quot;</span>: <span class="string">&quot;#e500e5&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;brightCyan&quot;</span>: <span class="string">&quot;#00e5e5&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;brightWhite&quot;</span>: <span class="string">&quot;#e5e5e5&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;background&quot;</span>: <span class="string">&quot;#283033&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;foreground&quot;</span>: <span class="string">&quot;#00ff00&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="安装-oh-my-zsh-主题"><a href="#安装-oh-my-zsh-主题" class="headerlink" title="安装 oh-my-zsh 主题"></a>安装 oh-my-zsh 主题</h4><p><a href="https://github.com/ohmyzsh/ohmyzsh/wiki/themes">主题列表</a></p>
<p>推荐两款主题</p>
<p><a href="https://github.com/sindresorhus/pure/">pure主题</a><br><a href="https://github.com/agnoster/agnoster-zsh-theme">agnoster</a></p>
<h4 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.oh-my-zsh/plugins</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-autosuggestions</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-syntax-highlighting.git</span><br></pre></td></tr></table></figure>

<p>启用插件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 编辑~/.zshrc</span></span><br><span class="line">vim ~/.zshrc</span><br><span class="line"><span class="comment"># 在plugins后括号里添加安装的插件名字</span></span><br><span class="line">plugins=( git</span><br><span class="line">          zsh-autosuggestions</span><br><span class="line">          zsh-syntax-highlighting</span><br><span class="line">        )</span><br><span class="line"><span class="comment"># 最后刷新</span></span><br><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>zsh</tag>
        <tag>oh-my-zsh</tag>
        <tag>Fluent Terminal</tag>
        <tag>Windows Terminal</tag>
        <tag>PowerShell</tag>
      </tags>
  </entry>
  <entry>
    <title>windows 终端命令行下使用代理</title>
    <url>/1404.html</url>
    <content><![CDATA[<p>20200822更新：只要启用了代理软件，或系统设置（windows设置-网络和Internet-代理-手动设置代理）中配置了代理，powershell 就会走代理，不在需要上面的方式设置，实际上上面的这个脚本也是在系统设置中配置了代理，因为我发现运行上面的脚本，我的系统代理中就多了如下代理</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102203656.png"></p>
<p>前提：在本地代理软件已经打开，并且开启了 http 代理（假设端口1080）</p>
<p>注意</p>
<ul>
<li>一定要加 <code>http://</code>，直接写域名或者 IP 不行</li>
<li>http 和 https 都要设置</li>
<li>cmd，Bash，PowerShell 设置的方式不同</li>
</ul>
<p>cmd 中用 <code>set http_proxy</code> 设置</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># set http_proxy=http://IP:PORT</span></span><br><span class="line"><span class="built_in">set</span> http_proxy=http://127.0.0.1:1080</span><br><span class="line"><span class="built_in">set</span> https_proxy=http://127.0.0.1:1080</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果有用户名密码需要设置，否则不需要设置</span></span><br><span class="line"><span class="built_in">set</span> http_proxy_user=user</span><br><span class="line"><span class="built_in">set</span> http_proxy_pass=pass</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> https_proxy_user=user</span><br><span class="line"><span class="built_in">set</span> https_proxy_pass=pass</span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复</span></span><br><span class="line"><span class="built_in">set</span> http_proxy=</span><br><span class="line"><span class="built_in">set</span> https_proxy=</span><br></pre></td></tr></table></figure>

<p>Bash 中用 <code>export http_proxy</code> 设置</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Ubuntu 下命令为 export</span><br><span class="line">export http_proxy&#x3D;http:&#x2F;&#x2F;127.0.0.1:1080</span><br></pre></td></tr></table></figure>

<p>PowerShell 中按照这样设置:<br>创建 powershell-proxy-set-clear.ps1 文件，内容如下，并执行</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># NOTE: registry keys for IE 8, may vary for other versions</span><br><span class="line">$regPath &#x3D; &#39;HKCU:\Software\Microsoft\Windows\CurrentVersion\Internet Settings&#39;</span><br><span class="line">function Clear-Proxy</span><br><span class="line">&#123;</span><br><span class="line">    Set-ItemProperty -Path $regPath -Name ProxyEnable -Value 0</span><br><span class="line">    Set-ItemProperty -Path $regPath -Name ProxyServer -Value &#39;&#39;</span><br><span class="line">    Set-ItemProperty -Path $regPath -Name ProxyOverride -Value &#39;&#39;</span><br><span class="line"></span><br><span class="line">    [Environment]::SetEnvironmentVariable(&#39;http_proxy&#39;, $null, &#39;User&#39;)</span><br><span class="line">    [Environment]::SetEnvironmentVariable(&#39;https_proxy&#39;, $null, &#39;User&#39;)</span><br><span class="line">&#125;</span><br><span class="line">function Set-Proxy</span><br><span class="line">&#123;</span><br><span class="line">	# 这里改为你的代理地址</span><br><span class="line">    $proxy &#x3D; &#39;http:&#x2F;&#x2F;127.0.0.1:1080&#39;</span><br><span class="line"></span><br><span class="line">    Set-ItemProperty -Path $regPath -Name ProxyEnable -Value 1</span><br><span class="line">    Set-ItemProperty -Path $regPath -Name ProxyServer -Value $proxy</span><br><span class="line">    Set-ItemProperty -Path $regPath -Name ProxyOverride -Value &#39;&lt;local&gt;&#39;</span><br><span class="line"></span><br><span class="line">    [Environment]::SetEnvironmentVariable(&#39;http_proxy&#39;, $proxy, &#39;User&#39;)</span><br><span class="line">    [Environment]::SetEnvironmentVariable(&#39;https_proxy&#39;, $proxy, &#39;User&#39;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Set-Proxy # 设置，取消该行注释</span><br><span class="line"># Clear-Proxy # 清除，取消该行注释</span><br></pre></td></tr></table></figure>


<ul>
<li><p>如果想验证是否成功配置了代理的话，用 ping 命令是不可以的（ping的协议不是https，也不是https，是ICMP协议）</p>
</li>
<li><p>设置的代理只在当前 cmd 窗口下有效，窗口关闭后会失效，新建的窗口也不生效</p>
</li>
</ul>
<p>验证方式</p>
<p><code>curl -vv http://www.google.com</code>，用这条命令来验证，如果返回如下结果表示代理设置成功。</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102203731.png"></p>
<p>参考链接</p>
<p><a href="https://github.com/shadowsocks/shadowsocks-windows/issues/1489">https://github.com/shadowsocks/shadowsocks-windows/issues/1489</a><br><a href="https://gist.github.com/famousgarkin/c5138b1e13ac41920d22">https://gist.github.com/famousgarkin/c5138b1e13ac41920d22</a></p>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
  </entry>
  <entry>
    <title>dux主题修改记录</title>
    <url>/504.html</url>
    <content><![CDATA[<h2 id="给网站添加语言"><a href="#给网站添加语言" class="headerlink" title="给网站添加语言"></a>给网站添加语言</h2><p>打开 <code>theme/dux/header.php</code> 文件，修改如下内容</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line"><span class="deletion">-&lt;html&gt;</span></span><br><span class="line"><span class="addition">+&lt;html lang=&quot;zh&quot;&gt;</span></span><br></pre></td></tr></table></figure>


<h2 id="修改面包屑导航位置"><a href="#修改面包屑导航位置" class="headerlink" title="修改面包屑导航位置"></a>修改面包屑导航位置</h2><p>打开 <code>theme/dux/single.php</code> 文件，修改如下内容</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">&lt;?php get_header(); ?&gt;</span><br><span class="line"><span class="deletion">-&lt;?php if( _hui(&#x27;breadcrumbs_single_s&#x27;) )&#123; ?&gt;</span></span><br><span class="line"><span class="deletion">- &lt;div class=&quot;breadcrumbs&quot;&gt;</span></span><br><span class="line"><span class="deletion">-  &lt;div class=&quot;container&quot;&gt;&lt;?php echo hui_breadcrumbs() ?&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="deletion">- &lt;/div&gt;</span></span><br><span class="line"><span class="deletion">-&lt;?php &#125; ?&gt;</span></span><br><span class="line">&lt;section class=&quot;container&quot;&gt;</span><br><span class="line"><span class="addition">+ &lt;?php if( _hui(&#x27;breadcrumbs_single_s&#x27;) )&#123; ?&gt;</span></span><br><span class="line"><span class="addition">+  &lt;div class=&quot;breadcrumbs&quot;&gt;</span></span><br><span class="line"><span class="addition">+   &lt;div class=&quot;container&quot;&gt;&lt;?php echo hui_breadcrumbs() ?&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="addition">+  &lt;/div&gt;</span></span><br><span class="line"><span class="addition">+ &lt;?php &#125; ?&gt;</span></span><br><span class="line"> &lt;div class=&quot;content-wrap&quot;&gt;</span><br><span class="line"> &lt;div class=&quot;content&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>添加自定义样式</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 面包屑导航 */</span></span><br><span class="line"><span class="selector-class">.breadcrumbs</span> &#123;</span><br><span class="line">	<span class="attribute">box-shadow</span>: none;</span><br><span class="line">	<span class="attribute">background</span>: none;</span><br><span class="line">	<span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>wordpress</category>
      </categories>
      <tags>
        <tag>wordpress</tag>
      </tags>
  </entry>
  <entry>
    <title>WP-China-Yes 解决 wordpress 插件无法更新问题</title>
    <url>/957.html</url>
    <content><![CDATA[<p>去年开始国内无法正常访问 <code>wordpress.org</code>, 一直显示 <code>429 Too Many Requests</code> 错误，所以在我们使用 wordpress 程序的时候会发现无法在线安装主题或者插件，甚至无法更新 WP 版本。</p>
<p>WordPress 官网打不开原因可以参考：<a href="https://www.hostloc.com/thread-597678-5-1.html">https://www.hostloc.com/thread-597678-5-1.html</a></p>
<p>情况大致是因为：</p>
<p><code>wordpress.org</code> 受到了中国大陆流量的攻击，导致 WordPress 的 CDN 提供商屏蔽了中国大陆的流量，大陆用户访问插件主题商城等服务时报 429 错误。</p>
<p>这里推荐一款插件：WP-China-Yes</p>
<p>此插件将全面替换 WordPress 访问官方服务的链接为高速稳定的中国大陆节点，以此加快站点更新版本、安装升级插件主题的速度，并彻底解决 429 报错问题。</p>
<p>插件是开源的</p>
<p>发布地址：<a href="https://www.ibadboy.net/archives/3204.html">https://www.ibadboy.net/archives/3204.html</a><br>下载地址：<a href="https://github.com/wp-china-yes/wp-china-yes/releases">https://github.com/wp-china-yes/wp-china-yes/releases</a></p>
<p>使用：</p>
<p>下载并安装插件后直接启用即可，无需设置，插件会自动接管所有 WP 访问境外服务器的流量。<br>插件不会更改你的 WordPress 程序，若不想使用大陆加速节点，直接停用插件即可。</p>
<p>常见问题：<br>插件/主题更新缓慢甚至超时<br>这种情况在大型包更新的情况下偶尔会出现，原因是第一次访问资源，云存储中还未有相应的镜像，再试一次就会好了。</p>
]]></content>
      <categories>
        <category>wordpress</category>
      </categories>
  </entry>
  <entry>
    <title>如何为 WordPress 文章中的链接自动添加 nofollow</title>
    <url>/554.html</url>
    <content><![CDATA[<p>在 SEO 的角度，我们不宜在网站中设置过多的外链，防止搜索引擎蜘蛛在爬虫你的网站时跳出到其他网站。因此，了解并为外链加上 nofollow 链接是非常有必要的（除非这些外链与你的网站有利益关系，比如是你的其他网站又或者是合作伙伴的网站）。</p>
<h3 id="什么是-nofollow-链接"><a href="#什么是-nofollow-链接" class="headerlink" title="什么是 nofollow 链接"></a>什么是 nofollow 链接</h3><p>Nofollow 链接是带有 rel =”nofollow” HTML 标记的链接。 nofollow 标签可帮助搜索引擎了解要忽略目标链接，并且不会将网页（放置 nofollow 链接）的 PageRank 传递给此类链接。</p>
<p>以下链接类型应该设置为 nofollow 链接：返利链接，赞助商链接，广告链接，社交媒体链接，不可信/不可靠网站内容链接</p>
<h3 id="如何建立-Nofollow-链接"><a href="#如何建立-Nofollow-链接" class="headerlink" title="如何建立 Nofollow 链接"></a>如何建立 Nofollow 链接</h3><p>将下面的代码添加到主题的 <code>functions.php</code> 文件即可：</p>
<p>如果不想直接修改 <code>functions.php</code> 文件，可以使用 <a href="https://wqdy.top/671.html">Code Snippets 插件</a></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 文章外部链接加上nofollow</span></span><br><span class="line">add_filter( <span class="string">&#x27;the_content&#x27;</span>, <span class="string">&#x27;nf_url_parse&#x27;</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">nf_url_parse</span>(<span class="params"> <span class="variable">$content</span> </span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="variable">$regexp</span> = <span class="string">&quot;&lt;a\s[^&gt;]*href=(\&quot;??)([^\&quot; &gt;]*?)\\1[^&gt;]*&gt;&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span>(preg_match_all(<span class="string">&quot;/<span class="subst">$regexp</span>/siU&quot;</span>, <span class="variable">$content</span>, <span class="variable">$matches</span>, PREG_SET_ORDER)) &#123;</span><br><span class="line">    <span class="keyword">if</span>( !<span class="keyword">empty</span>(<span class="variable">$matches</span>) ) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="variable">$srcUrl</span> = get_option(<span class="string">&#x27;siteurl&#x27;</span>);</span><br><span class="line">      <span class="keyword">for</span> (<span class="variable">$i</span>=<span class="number">0</span>; <span class="variable">$i</span> &lt; count(<span class="variable">$matches</span>); <span class="variable">$i</span>++)</span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$tag</span> = <span class="variable">$matches</span>[<span class="variable">$i</span>][<span class="number">0</span>];</span><br><span class="line">        <span class="variable">$tag2</span> = <span class="variable">$matches</span>[<span class="variable">$i</span>][<span class="number">0</span>];</span><br><span class="line">        <span class="variable">$url</span> = <span class="variable">$matches</span>[<span class="variable">$i</span>][<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">        <span class="variable">$noFollow</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// $pattern = &#x27;/target\s*=\s*&quot;\s*_blank\s*&quot;/&#x27;;</span></span><br><span class="line">        <span class="comment">// preg_match($pattern, $tag2, $match, PREG_OFFSET_CAPTURE);</span></span><br><span class="line">        <span class="comment">// if( count($match) &lt; 1 )</span></span><br><span class="line">        <span class="comment">//   $noFollow .= &#x27; target=&quot;_blank&quot; &#x27;;</span></span><br><span class="line"></span><br><span class="line">        <span class="variable">$pattern</span> = <span class="string">&#x27;/rel\s*=\s*&quot;\s*[n|d]ofollow\s*&quot;/&#x27;</span>;</span><br><span class="line">        preg_match(<span class="variable">$pattern</span>, <span class="variable">$tag2</span>, <span class="variable">$match</span>, PREG_OFFSET_CAPTURE);</span><br><span class="line">        <span class="keyword">if</span>( count(<span class="variable">$match</span>) &lt; <span class="number">1</span> )</span><br><span class="line">          <span class="variable">$noFollow</span> .= <span class="string">&#x27; rel=&quot;nofollow&quot; &#x27;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$pos</span> = strpos(<span class="variable">$url</span>,<span class="variable">$srcUrl</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$pos</span> === <span class="literal">false</span>) &#123;</span><br><span class="line">          <span class="variable">$tag</span> = rtrim (<span class="variable">$tag</span>,<span class="string">&#x27;&gt;&#x27;</span>);</span><br><span class="line">          <span class="variable">$tag</span> .= <span class="variable">$noFollow</span>.<span class="string">&#x27;&gt;&#x27;</span>;</span><br><span class="line">          <span class="variable">$content</span> = str_replace(<span class="variable">$tag2</span>,<span class="variable">$tag</span>,<span class="variable">$content</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable">$content</span> = str_replace(<span class="string">&#x27;]]&gt;&#x27;</span>, <span class="string">&#x27;]]&gt;&#x27;</span>, <span class="variable">$content</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="variable">$content</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="检查-nofollow-链接是否生效"><a href="#检查-nofollow-链接是否生效" class="headerlink" title="检查 nofollow 链接是否生效"></a>检查 nofollow 链接是否生效</h3><p><strong>使用浏览器的 <code>检查</code> 功能查看 nofollow 链接</strong></p>
<p>使用浏览器打开页面，移动鼠标光标至你想要检查的链接上方。</p>
<p>右击鼠标按钮，选择 <code>检查</code> 选项 （以 Chrome 为例，不同浏览器选项叫法不太一样）</p>
<p>代码查看窗口将在浏览器的底部/右侧打开。你可以通过查看 HTML 代码查看链接是否添加了 rel=”nofollow”。</p>
<p><strong>使用 Chrome 扩展组件（插件）检查页面 nofollow 链接</strong></p>
<p>下载名为<a href="https://chrome.google.com/webstore/detail/nofollow/dfogidghaigoomjdeacndafapdijmiid?hl=en">NoFollow</a>的 Chrome 扩展组件，安装该插件后重新加载页面，该网页上的所有 nofollow 链接都将会高亮突出显示。</p>
]]></content>
      <categories>
        <category>wordpress</category>
      </categories>
  </entry>
  <entry>
    <title>使用代码方式显示 WordPress 文章最后修改时间</title>
    <url>/690.html</url>
    <content><![CDATA[<p>对于偏技术性的文章，用户更在意文章的更新时间而非发表时间</p>
<p>将如下代码添加到主题函数 function.php 文件中，如果你不会的话，推荐使用这个插件：<a href="https://wqdy.top/671.html">Code Snippets</a></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">wp_last_updated_date</span>(<span class="params"> <span class="variable">$content</span> </span>) </span>&#123;</span><br><span class="line">  <span class="variable">$time</span> = get_the_time(<span class="string">&#x27;U&#x27;</span>);</span><br><span class="line">  <span class="variable">$modified_time</span> = get_the_modified_time(<span class="string">&#x27;U&#x27;</span>);</span><br><span class="line">  <span class="variable">$custom_content</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable">$modified_time</span> &gt;= <span class="variable">$time</span> + <span class="number">86400</span>) &#123;</span><br><span class="line">    <span class="variable">$updated_time</span> = get_the_modified_time(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>);</span><br><span class="line">    <span class="variable">$custom_content</span> .= <span class="string">&#x27;&lt;p class=&quot;last-updated&quot; style=&quot;color: #999;font-size: 12px;&quot;&gt;文章最后更新于&#x27;</span>. <span class="variable">$updated_time</span> .<span class="string">&#x27;，如果失效请留言&lt;/p&gt;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable">$custom_content</span> .= <span class="variable">$content</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable">$custom_content</span>;</span><br><span class="line">&#125;</span><br><span class="line">add_filter( <span class="string">&#x27;the_content&#x27;</span>, <span class="string">&#x27;wp_last_updated_date&#x27;</span> );</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>wordpress</category>
      </categories>
  </entry>
  <entry>
    <title>wordpress 修改文章id</title>
    <url>/1737.html</url>
    <content><![CDATA[<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">update wp_posts <span class="keyword">set</span> id <span class="operator">=</span> <span class="number">430</span> <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">404</span>;</span><br><span class="line">update wp_term_relationships <span class="keyword">set</span> object_id <span class="operator">=</span> <span class="number">430</span> <span class="keyword">where</span> object_id <span class="operator">=</span> <span class="number">404</span>;</span><br><span class="line">update wp_postmeta <span class="keyword">set</span> post_id <span class="operator">=</span> <span class="number">430</span> <span class="keyword">where</span> post_id <span class="operator">=</span> <span class="number">404</span>;</span><br><span class="line">update wp_comments <span class="keyword">set</span> comment_post_ID <span class="operator">=</span> <span class="number">430</span> <span class="keyword">where</span> comment_post_ID <span class="operator">=</span> <span class="number">404</span>;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>wordpress</category>
      </categories>
      <tags>
        <tag>wordpress</tag>
      </tags>
  </entry>
  <entry>
    <title>WordPress 博客绑定多个域名，并实现多个域名独立访问</title>
    <url>/1331.html</url>
    <content><![CDATA[<p>WordPress 博客默认是不能实现多个域名独立访问的，即使我们绑定了多个域名，访问时也会自动跳转到安装站点时默认的域名</p>
<p>我们只需修改站点根目录下的 <code>wp-config.php</code> 文件，添加如下代码：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">define(<span class="string">&#x27;WP_SITEURL&#x27;</span>, <span class="string">&#x27;https://&#x27;</span> . <span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_HOST&#x27;</span>]);</span><br><span class="line">define(<span class="string">&#x27;WP_HOME&#x27;</span>, <span class="string">&#x27;https://&#x27;</span> . <span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_HOST&#x27;</span>]);</span><br></pre></td></tr></table></figure>

<p>即可</p>
]]></content>
      <categories>
        <category>wordpress</category>
      </categories>
      <tags>
        <tag>wordpress</tag>
        <tag>域名</tag>
      </tags>
  </entry>
  <entry>
    <title>wordpress 插件 Code Snippets - 无需修改 functions.php 文件向站点添加自定义代码</title>
    <url>/671.html</url>
    <content><![CDATA[<h3 id="插件介绍"><a href="#插件介绍" class="headerlink" title="插件介绍"></a>插件介绍</h3><p>Code Snippets 是一款可以简单、干净、安全添加 php 代码到你网站的插件，就跟直接写入 functions.php 文件里面的效果一样。</p>
<blockquote>
<p>使用 Code Snippets 添加代码还有一个优点就是添加的代码不会因为你主题文件升级而丢失，而直接写入 functions.php 文件里面升级会被覆盖，还需要手动备份一次。</p>
</blockquote>
<p>直接在后台搜索该插件安装即可</p>
<h3 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h3><h4 id="添加-php-代码"><a href="#添加-php-代码" class="headerlink" title="添加 php 代码"></a>添加 php 代码</h4><p>直接新建一个 snippets 将 php 代码站填进去即可</p>
<h4 id="添加-css-代码"><a href="#添加-css-代码" class="headerlink" title="添加 css 代码"></a>添加 css 代码</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">add_action( <span class="string">&#x27;wp_head&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="meta">?&gt;</span></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* write your CSS code here */</span></span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> &#125; );</span><br></pre></td></tr></table></figure>

<h4 id="添加-js-代码"><a href="#添加-js-代码" class="headerlink" title="添加 js 代码"></a>添加 js 代码</h4><p>默认示例添加 js 代码使用的是 <code>wp_head</code> 函数，这里推荐使用 <code>wp_footer</code>，你可以根据 js 作用自行选择</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在底部添加js代码，</span></span><br><span class="line">add_action( <span class="string">&#x27;wp_footer&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="meta">?&gt;</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* write your JavaScript code here */</span></span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> &#125; );</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>wordpress</category>
      </categories>
  </entry>
  <entry>
    <title>wordpress 站点更换域名</title>
    <url>/386.html</url>
    <content><![CDATA[<p>假设旧域名是a.com，新域名为b.com，修改数据库 sql 如下</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">UPDATE wp_options <span class="keyword">SET</span> option_value <span class="operator">=</span> REPLACE(option_value, <span class="string">&#x27;http://a.com&#x27;</span>, <span class="string">&#x27;http://b.com&#x27;</span>) <span class="keyword">WHERE</span> option_name <span class="operator">=</span> <span class="string">&#x27;home&#x27;</span> <span class="keyword">OR</span> option_name <span class="operator">=</span> <span class="string">&#x27;siteurl&#x27;</span>;</span><br><span class="line"></span><br><span class="line">UPDATE wp_posts <span class="keyword">SET</span> post_content <span class="operator">=</span> REPLACE (post_content, <span class="string">&#x27;http://a.com&#x27;</span>, <span class="string">&#x27;http://b.com&#x27;</span>);</span><br><span class="line"></span><br><span class="line">UPDATE wp_postmeta <span class="keyword">SET</span> meta_value <span class="operator">=</span> REPLACE (meta_value, <span class="string">&#x27;http://a.com&#x27;</span>,<span class="string">&#x27;http://b.com&#x27;</span>);</span><br><span class="line"></span><br><span class="line">UPDATE wp_comments <span class="keyword">SET</span> comment_content <span class="operator">=</span> REPLACE (comment_content, <span class="string">&#x27;http://a.com&#x27;</span>, <span class="string">&#x27;http://b.com&#x27;</span>);</span><br><span class="line"></span><br><span class="line">UPDATE wp_comments <span class="keyword">SET</span> comment_author_url <span class="operator">=</span> REPLACE (comment_author_url, <span class="string">&#x27;http://a.com&#x27;</span>, <span class="string">&#x27;http://b.com&#x27;</span>);</span><br><span class="line"></span><br><span class="line">UPDATE wp_posts <span class="keyword">SET</span> guid <span class="operator">=</span> REPLACE (guid, <span class="string">&#x27;http://a.com&#x27;</span>, <span class="string">&#x27;http://b.com&#x27;</span>) <span class="keyword">WHERE</span> post_type <span class="operator">=</span> <span class="string">&#x27;attachment&#x27;</span>;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>wordpress</category>
      </categories>
      <tags>
        <tag>wordpress</tag>
      </tags>
  </entry>
  <entry>
    <title>解决 WordPress &#39;Briefly unavailable for scheduled maintenance. Check back in a minute.&#39;</title>
    <url>/951.html</url>
    <content><![CDATA[<p>WordPress 在升级程序、主题、插件时，都会先切换到维护模式，也就是显示 ‘Briefly unavailable for scheduled maintenance. Check back in a minute’，如果升级顺利，也就几秒左右就恢复正常；但是如果由于网速不佳等原因导致升级中断，WordPress 就会一直停留在维护模式，不论前台还是后台。</p>
<p>如何解决这个问题呢？</p>
<p>马上通过 FTP 登录你的网站，删除 WordPress 根目录下的 <code>.maintenance</code> ，刷新网页即可。</p>
]]></content>
      <categories>
        <category>wordpress</category>
      </categories>
  </entry>
  <entry>
    <title>WordPress简单实现隐藏外链，外链通过go界面进行跳转</title>
    <url>/1833.html</url>
    <content><![CDATA[<p>网站外链跳转时通过 go 界面进行对 seo 比较友好，既美观又可以避免权重的流失。</p>
<p>简单的实现</p>
<ol>
<li>在 wordpress 的根目录下，新建一个 go.php 文件，在 go.php 里面输入以下代码</li>
</ol>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$t_url</span> = preg_replace(<span class="string">&#x27;/^url=(.*)$/i&#x27;</span>,<span class="string">&#x27;$1&#x27;</span>,<span class="variable">$_SERVER</span>[<span class="string">&quot;QUERY_STRING&quot;</span>]);</span><br><span class="line"><span class="keyword">if</span>(!<span class="keyword">empty</span>(<span class="variable">$t_url</span>)) &#123;</span><br><span class="line">  preg_match(<span class="string">&#x27;/(http|https):\/\//&#x27;</span>,<span class="variable">$t_url</span>,<span class="variable">$matches</span>);</span><br><span class="line">	<span class="keyword">if</span>(<span class="variable">$matches</span>)&#123;</span><br><span class="line">    <span class="variable">$url</span>=<span class="variable">$t_url</span>;</span><br><span class="line">    <span class="variable">$title</span>=<span class="string">&#x27;页面正在安全跳转中,请稍候&#x27;</span>;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    preg_match(<span class="string">&#x27;/\./i&#x27;</span>,<span class="variable">$t_url</span>,<span class="variable">$matche</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$matche</span>)&#123;</span><br><span class="line">      <span class="variable">$url</span>=<span class="string">&#x27;http://&#x27;</span>.<span class="variable">$t_url</span>;</span><br><span class="line">      <span class="variable">$title</span>=<span class="string">&#x27;页面正在安全跳转中,请稍候&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable">$url</span>=<span class="string">&#x27;//wqdy.top/&#x27;</span>;</span><br><span class="line">      <span class="variable">$title</span>=<span class="string">&#x27;参数错误，正在返回首页&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="variable">$title</span>=<span class="string">&#x27;参数缺失，正在返回首页&#x27;</span>;</span><br><span class="line">  <span class="variable">$url</span>=<span class="string">&#x27;//wqdy.top/&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;refresh&quot;</span> content=<span class="string">&quot;1;url=&#x27;&lt;?php echo <span class="subst">$url</span>;?&gt;&#x27;;&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="variable">$title</span>;<span class="meta">?&gt;</span>&lt;/title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">body &#123;background:<span class="comment">#000&#125;</span></span><br><span class="line">.loading &#123;</span><br><span class="line">	-webkit-animation:fadein <span class="number">2</span>s;</span><br><span class="line">	-moz-animation:fadein <span class="number">2</span>s;</span><br><span class="line">	-o-animation:fadein <span class="number">2</span>s;</span><br><span class="line">	animation:fadein <span class="number">2</span>s&#125;</span><br><span class="line">@-moz-keyframes fadein &#123;<span class="keyword">from</span> &#123;opacity:<span class="number">0</span>&#125;</span><br><span class="line">to &#123;opacity:<span class="number">1</span>&#125;&#125;</span><br><span class="line">@-webkit-keyframes fadein &#123;<span class="keyword">from</span> &#123;opacity:<span class="number">0</span>&#125;</span><br><span class="line">to &#123;opacity:<span class="number">1</span>&#125;&#125;</span><br><span class="line">@-o-keyframes fadein &#123;<span class="keyword">from</span> &#123;opacity:<span class="number">0</span>&#125;</span><br><span class="line">to &#123;opacity:<span class="number">1</span>&#125;&#125;</span><br><span class="line">@keyframes fadein &#123;<span class="keyword">from</span> &#123;opacity:<span class="number">0</span>&#125;</span><br><span class="line">to &#123;opacity:<span class="number">1</span>&#125;&#125;</span><br><span class="line">.spinner-wrapper &#123;</span><br><span class="line">	position:absolute;</span><br><span class="line">	top:<span class="number">0</span>;</span><br><span class="line">	left:<span class="number">0</span>;</span><br><span class="line">	z-index:<span class="number">300</span>;</span><br><span class="line">	height:<span class="number">100</span>%;</span><br><span class="line">	min-width:<span class="number">100</span>%;</span><br><span class="line">	min-height:<span class="number">100</span>%;</span><br><span class="line">	background:<span class="comment">#3498db&#125;</span></span><br><span class="line">.spinner-text &#123;</span><br><span class="line">	position:absolute;</span><br><span class="line">	top:<span class="number">50</span>%;</span><br><span class="line">	left:<span class="number">50</span>%;</span><br><span class="line">	margin-left:<span class="number">-200</span>px;</span><br><span class="line">	margin-top: <span class="number">2</span>px;</span><br><span class="line">	color:<span class="comment">#fff;</span></span><br><span class="line">	letter-spacing:<span class="number">1</span>px;</span><br><span class="line">	font-weight:<span class="number">700</span>;</span><br><span class="line">	font-size:<span class="number">36</span>px;</span><br><span class="line">	font-family:Arial&#125;</span><br><span class="line">.spinner &#123;</span><br><span class="line">	position:absolute;</span><br><span class="line">	top:<span class="number">50</span>%;</span><br><span class="line">	left:<span class="number">50</span>%;</span><br><span class="line">	display:block;</span><br><span class="line">	margin-left:<span class="number">-270</span>px;</span><br><span class="line">	width:<span class="number">1</span>px;</span><br><span class="line">	height:<span class="number">1</span>px;</span><br><span class="line">	border:<span class="number">25</span>px solid rgba(<span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">0.2</span>);</span><br><span class="line">	-webkit-border-radius:<span class="number">50</span>px;</span><br><span class="line">	-moz-border-radius:<span class="number">50</span>px;</span><br><span class="line">	border-radius:<span class="number">50</span>px;</span><br><span class="line">	border-left-color:transparent;</span><br><span class="line">	border-right-color:transparent;</span><br><span class="line">	-webkit-animation:spin <span class="number">1.5</span>s infinite;</span><br><span class="line">	-moz-animation:spin <span class="number">1.5</span>s infinite;</span><br><span class="line">	animation:spin <span class="number">1.5</span>s infinite&#125;</span><br><span class="line">@-webkit-keyframes spin &#123;<span class="number">0</span>%,<span class="number">100</span>% &#123;-webkit-transform:rotate(<span class="number">0</span>deg) scale(<span class="number">1</span>)&#125;</span><br><span class="line"><span class="number">50</span>% &#123;-webkit-transform:rotate(<span class="number">720</span>deg) scale(<span class="number">0.6</span>)&#125;&#125;</span><br><span class="line">@-moz-keyframes spin &#123;<span class="number">0</span>%,<span class="number">100</span>% &#123;-moz-transform:rotate(<span class="number">0</span>deg) scale(<span class="number">1</span>)&#125;</span><br><span class="line"><span class="number">50</span>% &#123;-moz-transform:rotate(<span class="number">720</span>deg) scale(<span class="number">0.6</span>)&#125;&#125;</span><br><span class="line">@-o-keyframes spin &#123;<span class="number">0</span>%,<span class="number">100</span>% &#123;-o-transform:rotate(<span class="number">0</span>deg) scale(<span class="number">1</span>)&#125;</span><br><span class="line"><span class="number">50</span>% &#123;-o-transform:rotate(<span class="number">720</span>deg) scale(<span class="number">0.6</span>)&#125;&#125;</span><br><span class="line">@keyframes spin &#123;<span class="number">0</span>%,<span class="number">100</span>% &#123;transform:rotate(<span class="number">0</span>deg) scale(<span class="number">1</span>)&#125;</span><br><span class="line"><span class="number">50</span>% &#123;transform:rotate(<span class="number">720</span>deg) scale(<span class="number">0.6</span>)&#125;&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div class=&quot;loading&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;spinner-wrapper&quot;&gt;</span><br><span class="line">    &lt;span class=&quot;spinner-text&quot;&gt;页面正在安全跳转中,请稍候&lt;/span&gt;</span><br><span class="line">    &lt;span class=&quot;spinner&quot;&gt;&lt;/span&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>则外链跳转形式为： <code>&#123;本站地址&#125;/go.php?&#123;外链地址&#125;</code></p>
<ol start="2">
<li>给外部链接加上 go 跳转，在主题目录下的 functions.php 中添加如下代码</li>
</ol>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">add_filter(<span class="string">&#x27;the_content&#x27;</span>,<span class="string">&#x27;the_content_nofollow&#x27;</span>,<span class="number">999</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">the_content_nofollow</span>(<span class="params"><span class="variable">$content</span></span>) </span>&#123;</span><br><span class="line">  preg_match_all(<span class="string">&#x27;/&lt;a(.*?)href=&quot;(.*?)&quot;(.*?)&gt;/&#x27;</span>,<span class="variable">$content</span>,<span class="variable">$matches</span>);</span><br><span class="line">  <span class="keyword">if</span>(<span class="variable">$matches</span>)&#123;</span><br><span class="line">    <span class="keyword">foreach</span>(<span class="variable">$matches</span>[<span class="number">2</span>] <span class="keyword">as</span> <span class="variable">$val</span>)&#123;</span><br><span class="line">      <span class="keyword">if</span>(strpos(<span class="variable">$val</span>,<span class="string">&#x27;://&#x27;</span>)!==<span class="literal">false</span> &amp;&amp; strpos(<span class="variable">$val</span>,home_url())===<span class="literal">false</span> &amp;&amp; !preg_match(<span class="string">&#x27;/\.(jpg|jepg|png|ico|bmp|gif|tiff)/i&#x27;</span>,<span class="variable">$val</span>))&#123;</span><br><span class="line">        <span class="variable">$content</span>=str_replace(<span class="string">&quot;href=\&quot;<span class="subst">$val</span>\&quot;&quot;</span>, <span class="string">&quot;href=\&quot;&quot;</span>.home_url().<span class="string">&quot;/go.php?url=<span class="subst">$val</span>\&quot; &quot;</span>,<span class="variable">$content</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable">$content</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>wordpress</category>
      </categories>
      <tags>
        <tag>wordpress</tag>
      </tags>
  </entry>
  <entry>
    <title>【学习】科学上网客户端</title>
    <url>/228.html</url>
    <content><![CDATA[<blockquote>
<p>仅仅拥有客户端并不能 FQ，还需要在客户端中添加可用的节点，客户端并不提供节点</p>
</blockquote>
<p>iOS</p>
<p>Shadowrocket(小火箭) 支持 ss、ssr、vmess 协议<br><a href="https://iosipa.ml/">在线安装</a><br><a href="https://ios.eeee.ooo/">在线安装</a><br><a href="https://wohaobang.cn/">共享账号</a></p>
<p>macOS</p>
<p><a href="https://github.com/shadowsocks/ShadowsocksX-NG/releases">ShadowsocksX-NG</a><br><a href="https://www.v2ray.com/">v2ray</a> <a href="https://github.com/v2ray/v2ray-core">github</a></p>
<p><a href="https://github.com/yanue/V2rayU">V2rayU</a><br><a href="https://github.com/Cenmrev/V2RayX">V2RayX</a></p>
<p>Windows</p>
<p><a href="https://github.com/shadowsocks/shadowsocks-windows/releases">Shadowsocks(简称:SS)</a></p>
<p><a href="https://github.com/shadowsocks/v2ray-plugin/releases">shadowsockes v2ray插件</a></p>
<p><a href="https://github.com/shadowsocksr-backup/shadowsocksr-csharp/releases">ShadowsocksR(简称:SSR)</a></p>
<p><a href="https://www.v2ray.com/">v2ray</a> <a href="https://github.com/v2ray/v2ray-core">github地址</a></p>
<p><a href="https://github.com/2dust/v2rayN">v2rayN</a></p>
<p><a href="https://github.com/Qv2ray/Qv2ray">Qv2ray</a> 支持 Linux、macOS、Windows，支持 v2ray/SSR/Trojan/Trojan-Go/NaiveProxy</p>
<p>Android</p>
<p><a href="https://github.com/shadowsocks/shadowsocks-android/releases">Shadowsocks(ss)</a></p>
<p><a href="https://github.com/shadowsocks/v2ray-plugin-android/releases/">shadowsockes v2ray插件</a></p>
<p><a href="https://github.com/eycorsican/kitsunebi-android/releases">Kitsunebi(vmess,ss,socks)</a></p>
<p><a href="https://github.com/2dust/v2rayNG/releases">V2RayNG(vmess,ss,socks)</a></p>
<p><a href="https://github.com/shadowsocksrr/shadowsocksr-android/releases">SSRR(ssr)</a></p>
<p>vmess 免费节点订阅链接</p>
<p><code>https://raw.githubusercontent.com/eycorsican/rule-sets/master/kitsunebi_sub</code></p>
<p><a href="https://github.com/NGC-HenryLee/NGC.SS.JJ">付费机场</a></p>
<p>参考链接 <a href="https://congcong0806.github.io/2018/04/20/SS/">https://congcong0806.github.io/2018/04/20/SS/</a></p>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
  </entry>
  <entry>
    <title>下载神器 Internet Download Manager 中文破解版</title>
    <url>/366.html</url>
    <content><![CDATA[<p><a href="http://www.internetdownloadmanager.com/">Internet Download Manager</a> (简称IDM)  是 Windows 平台老牌而功能强大的多线程下载工具，支持多媒体下载、自动捕获链接、自动识别文件名、静默下载、批量下载、计划下载任务、站点抓取、队列，支持IE, Opera, Firefox, Chrome等所有流行的浏览器，如果启用高级集成，则可以捕获和接管从任何程序的下载。</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210130211514.jpg"></p>
<p>破解版下载地址</p>
<p>Internet Download Manager 6.38.16<br>Internet Download Manager 6.35.18<br>链接：<a href="https://pan.baidu.com/s/1NQmnqEGAfCu416zCwX-ATA">https://pan.baidu.com/s/1NQmnqEGAfCu416zCwX-ATA</a><br>提取码：wqdy</p>
<p>安装说明</p>
<p>下载完成后解压，运行安装程序，安装完就是注册版</p>
<p>配合插件使用</p>
<p>谷歌浏览器插件安装方法：找到你的 IMD 安装目录 注意是安装好后 找到 <code>IDMGCExt.crx</code> <code>IDMGCExt59.crx</code>2 个文件,<br>选择 IDMGCExt.crx 拖动到谷歌浏览器,如果装不上选择 IDMGCExt59.crx 能装上!</p>
<p>提醒：某些网盘无法使用 IDM 下载的解决办法：下载时，按住 Alt 键，再点击下载按钮就不会调用 IDM 了！</p>
<p>有能力的建议支持<a href="https://secure.internetdownloadmanager.com/buy_idm.html">正版</a></p>
]]></content>
      <categories>
        <category>软件</category>
      </categories>
      <tags>
        <tag>idm</tag>
        <tag>下载</tag>
      </tags>
  </entry>
  <entry>
    <title>临时邮箱手机号</title>
    <url>/232.html</url>
    <content><![CDATA[<p>用于注册临时账号，保护隐私</p>
<p>临时邮箱</p>
<p><a href="https://bccto.me/">https://bccto.me/</a><br><a href="https://10minutemail.net/">https://10minutemail.net/</a><br><a href="http://24mail.chacuo.net/">http://24mail.chacuo.net/</a><br><a href="http://www.yopmail.com/zh/">http://www.yopmail.com/zh/</a><br><a href="https://shorttimemail.com/zh-Hans/">https://shorttimemail.com/zh-Hans/</a><br><a href="https://temp-mail.org/zh/">https://temp-mail.org/zh/</a><br><a href="https://t.odmail.cn/">https://t.odmail.cn/</a><br><a href="https://9em.org/">https://9em.org/</a><br><a href="https://maildrop.cc/">https://maildrop.cc</a></p>
<p><a href="https://eskiimo.com/">https://eskiimo.com</a> 匿名发送邮件</p>
<p>短信验证码平台</p>
<p>国内平台<br><a href="https://www.pdflibr.com/">https://www.pdflibr.com</a><br><a href="https://www.visitorsms.com/cn">https://www.visitorsms.com/cn</a><br><a href="https://www.becmd.com/">https://www.becmd.com</a><br><a href="http://www.114sim.com/">http://www.114sim.com</a><br><a href="https://yunduanxin.net/">https://yunduanxin.net</a><br><a href="http://www.smszk.com/">http://www.smszk.com</a><br><a href="http://z-sms.com/">http://z-sms.com</a><br><a href="http://www.shejiinn.com/">http://www.shejiinn.com</a><br><a href="https://sms.cngrok.com/">https://sms.cngrok.com</a></p>
<p>国外平台</p>
<p><a href="https://ch.freephonenum.com/">https://ch.freephonenum.com</a><br><a href="https://smsreceivefree.com/">https://smsreceivefree.com</a><br><a href="https://zh.mytrashmobile.com/">https://zh.mytrashmobile.com</a><br><a href="https://www.receive-sms-online.info/">https://www.receive-sms-online.info</a><br><a href="https://receiveasms.com/">https://receiveasms.com</a><br><a href="https://sms-online.co/receive-free-sms">https://sms-online.co/receive-free-sms</a><br><a href="https://receive-sms.com/">https://receive-sms.com</a></p>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
  </entry>
  <entry>
    <title>优秀的命令行工具</title>
    <url>/2012.html</url>
    <content><![CDATA[<p>tldr<br>快速查看命令的使用示例</p>
<p>安装</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i -g tldr</span><br></pre></td></tr></table></figure>

<p>使用</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看git的使用示例</span></span><br><span class="line">tldr git</span><br></pre></td></tr></table></figure>

<p>thefuck<br>快速修正命令行手误</p>
]]></content>
  </entry>
  <entry>
    <title>使用 github 仓库作为图床，并用 jsDelivr 加速</title>
    <url>/2007.html</url>
    <content><![CDATA[<h2 id="github-JSDelivr"><a href="#github-JSDelivr" class="headerlink" title="github+JSDelivr"></a>github+JSDelivr</h2><ol>
<li><p>创建一个仓库来存储需要存放的静态资源</p>
</li>
<li><p>使用JSDelivr加速加载Github资源</p>
</li>
</ol>
<p>形式为 <code>https://cdn.jsdelivr.net/gh/&#123;Github用户名&#125;/&#123;Github仓库名&#125;@&#123;版本名&#125;/&#123;仓库下资源路径&#125;</code></p>
<p>其中版本名可以是当前仓库的 Release 或分支名</p>
<p>例如 github 链接为</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https:&#x2F;&#x2F;github.com&#x2F;cuilongjin&#x2F;static&#x2F;blob&#x2F;main&#x2F;test.txt</span><br></pre></td></tr></table></figure>

<p>则使用JSDelivr加速链接为</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;cuilongjin&#x2F;static@main&#x2F;test.txt</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>使用 picgo 进行图片上传</li>
</ol>
<blockquote>
<p>picgo 一款图片上传的工具，目前支持SM.MS图床，七牛图床，腾讯云COS，阿里云OSS，Imgur，又拍云，GitHub等图床<br>github地址：<a href="https://github.com/Molunerfinn/PicGo">https://github.com/Molunerfinn/PicGo</a><br>配置手册：<a href="https://picgo.github.io/PicGo-Doc/zh/guide/">https://picgo.github.io/PicGo-Doc/zh/guide/</a><br>插件：<a href="https://github.com/PicGo/Awesome-PicGo">https://github.com/PicGo/Awesome-PicGo</a></p>
</blockquote>
<p>配置 github图床</p>
<p>仓库名为第一步创建的仓库，分支名随意，我的为 main<br>token 获取地址: <a href="https://github.com/settings/tokens%EF%BC%8C%E7%82%B9%E5%87%BB">https://github.com/settings/tokens，点击</a> <code>Generate new token</code> ,复选框为你这个 token 的权限，勾选 <code>repo</code> 即可<br>存储路径为仓库目录，可以随意<br>自定义域名根据需要设置，这里我们设置为 jsdelivr 加速域名，形式为 <code>https://cdn.jsdelivr.net/gh/&#123;Github用户名&#125;/&#123;Github仓库名&#125;@&#123;版本名&#125;</code></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210101223210.png"></p>
<h2 id="使用-npm-JSDelivr"><a href="#使用-npm-JSDelivr" class="headerlink" title="使用 npm+JSDelivr"></a>使用 npm+JSDelivr</h2><p>需要将当前仓库发布为npm包</p>
<p>去 npm 官网注册个账号去,然后</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm login</span><br><span class="line">npm publish</span><br></pre></td></tr></table></figure>

<p>如果你的包名为 <code>@your-name/your-package</code> 时需要 <code>--access public</code> 参数，原因是当包名以 <code>@your-name</code> 开头时，<code>npm publish</code> 会默认发布为私有包，但是 npm 的私有包需要付费</p>
<p>请注意，如果你之前用过淘宝镜像，那么请先手动切回官方源 <code>npm config set registry https://registry.npmjs.org</code></p>
<p>发布成功之后，可以通过以下方式访问文件</p>
<p><code>https://cdn.jsdelivr.net/npm/(yourpackagename)@(version)/(file)</code></p>
<blockquote>
<p>其他一些镜像</p>
<p>unpkg <a href="https://www.unpkg.com/">https://www.unpkg.com</a><br>知乎出品 <a href="https://unpkg.zhimg.com/">https://unpkg.zhimg.com/</a><br>百度 <a href="https://code.bdstatic.com/npm/">https://code.bdstatic.com/npm/</a><br>饿了么 <a href="https://shadow.elemecdn.com/npm/">https://shadow.elemecdn.com/npm/</a></p>
</blockquote>
<p>当文件有更新时，需要更新发布</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 删除指定的版本</span></span><br><span class="line">npm unpublish 包名@版本号</span><br><span class="line"><span class="comment"># 重新发布</span></span><br><span class="line">npm publish</span><br></pre></td></tr></table></figure>

<p>配置 github action 自动发布</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">npm</span> <span class="string">Package</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">publish-npm:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Node</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v2.1.2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;12.x&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">unpublish</span> <span class="string">@cuilongjin/static@1.0.0</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">publish</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">NODE_AUTH_TOKEN:</span> <span class="string">$&#123;&#123;secrets.npm_token&#125;&#125;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>github</tag>
        <tag>图床</tag>
        <tag>jsDelivr</tag>
      </tags>
  </entry>
  <entry>
    <title>免费申请SSL证书，为网站启用 HTTPS</title>
    <url>/1909.html</url>
    <content><![CDATA[<h2 id="Let’s-Encrypt"><a href="#Let’s-Encrypt" class="headerlink" title="Let’s Encrypt"></a>Let’s Encrypt</h2><p>官方网站：<a href="https://letsencrypt.org/">https://letsencrypt.org/</a></p>
<p>现提供通配符 SSL 证书，需使用 certbot 或 acme.sh 手动发行</p>
<h3 id="certbot"><a href="#certbot" class="headerlink" title="certbot"></a>certbot</h3><p>github：<a href="https://github.com/certbot/certbot">https://github.com/certbot/certbot</a></p>
<p>安装 EPEL</p>
<p>EPEL (Extra Packages for Enterprise Linux)是由 Fedora 社区打造，为 RHEL 及衍生发行版如 CentOS、Scientific Linux 等提供额外的软件包</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install epel-release</span><br></pre></td></tr></table></figure>

<p>安装 certbot</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install certbot</span><br></pre></td></tr></table></figure>

<p>申请 SSL 证书</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">certbot certonly --standalone -d www.test.org</span><br></pre></td></tr></table></figure>

<p>证书文件在 /etc/letsencrypt/ 文件夹下</p>
<h3 id="acme-sh"><a href="#acme-sh" class="headerlink" title="acme.sh"></a>acme.sh</h3><p>acme.sh 实现了 acme 协议, 可以从 letsencrypt 生成免费的证书</p>
<p>github：<a href="https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E">https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E</a></p>
<h3 id="宝塔面板"><a href="#宝塔面板" class="headerlink" title="宝塔面板"></a>宝塔面板</h3><p>支持一键配置 <code>宝塔SSL</code>,<code>Let&#39;s Encrypt</code>免费证书</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102184437.png"></p>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2><p>参考文章：</p>
<p><a href="https://teddysun.com/527.html">https://teddysun.com/527.html</a></p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>ssl</tag>
      </tags>
  </entry>
  <entry>
    <title>全网视频万能解析工具、视频下载工具 -- youtube-dl，CR TubeGet，Allavsoft</title>
    <url>/1802.html</url>
    <content><![CDATA[<h3 id="youtube-dl-–-一款犀利的全网视频下载利器"><a href="#youtube-dl-–-一款犀利的全网视频下载利器" class="headerlink" title="youtube-dl – 一款犀利的全网视频下载利器"></a>youtube-dl – 一款犀利的全网视频下载利器</h3><p>github：<a href="https://github.com/ytdl-org/youtube-dl">https://github.com/ytdl-org/youtube-dl</a></p>
<p>下载：<a href="https://github.com/ytdl-org/youtube-dl/releases">https://github.com/ytdl-org/youtube-dl/releases</a></p>
<h3 id="CR-TubeGet-基于-youtube-dl-封装并做功能扩展的一款视频下载软件"><a href="#CR-TubeGet-基于-youtube-dl-封装并做功能扩展的一款视频下载软件" class="headerlink" title="CR TubeGet 基于 youtube-dl 封装并做功能扩展的一款视频下载软件"></a>CR TubeGet 基于 youtube-dl 封装并做功能扩展的一款视频下载软件</h3><p>CR TubeGet 功能：<br>1、支持 2000+站点视频下载，支持 YouTube、BiliBili 等主流视频站点<br>2、支持下载脚本扩展，加入 youtube-dl 不支持的站点下载<br>3、支持 200+播放列表，甚至搜索引擎(google、bing、baidu、yahoo、yandex、ask)之视频搜索列表，支持自定义视频列表<br>4、支持 YouTube 8k 分辨率，支持 Mp3 等音频下载，支持批量下载<br>5、支持视频 URL、文本文件拖放下载，支持剪切板视频 URL 监测功能<br>7、内置视频页面支持快捷下载<br>8、支持 aria2 下载器加速下载，支持 annie、you-get 下载组件<br>9、支持视频格式无损转换、字幕烧录</p>
<p>下载地址</p>
<p>v0.9.2.4 版起，未注册版本只能下载 99 个视频<br>如果希望继续使用免费版本，请下载 v0.9.2.3 版，该没有任何功能上的限制，有着视频下载的基本功能，若您下载油管及 B 站，相信其功能可以满</p>
<p>软件发布官网：<a href="http://www.cr-soft.net/">http://www.cr-soft.net/</a></p>
<p>百度云：<a href="https://pan.baidu.com/s/1E_fGDHhGKn7sWCEt7fMtGQ">https://pan.baidu.com/s/1E_fGDHhGKn7sWCEt7fMtGQ</a> 提取码：m3fk</p>
<h3 id="Allavsoft"><a href="#Allavsoft" class="headerlink" title="Allavsoft"></a>Allavsoft</h3><p>Allavsoft 视频下载器，是一个流行的快速在线视频下载和转换器，可将下载的视频转换为几乎所有流行的视频和音频格式。作为一款国外的软件，支持非常多的国内视频网站下载，包括但不限于优酷、土豆、爱奇艺等，更多支持网站请点击 <a href="https://www.allavsoft.com/how-to/index.html">这里</a> 进行查看。</p>
<p>破解教程 <a href="https://www.bilibili.com/video/av85631611/">https://www.bilibili.com/video/av85631611/</a></p>
<p>下载地址</p>
<p>百度云：<a href="https://pan.baidu.com/s/1VwGCcssxOvn-U4GWFec9KQ">https://pan.baidu.com/s/1VwGCcssxOvn-U4GWFec9KQ</a> 提取码：5r2x</p>
<h3 id="硕鼠下载"><a href="#硕鼠下载" class="headerlink" title="硕鼠下载"></a>硕鼠下载</h3><p><a href="http://www.flvcd.com/">http://www.flvcd.com/</a></p>
]]></content>
      <categories>
        <category>软件</category>
      </categories>
      <tags>
        <tag>下载</tag>
      </tags>
  </entry>
  <entry>
    <title>如何注册美区 PayPal 并绑定美区 Apple ID，以及风控的解决方案</title>
    <url>/234.html</url>
    <content><![CDATA[<p><a href="http://jolson.xyz/2018/11/22/reg-us-pp/">原文</a></p>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
  </entry>
  <entry>
    <title>安装 rclone 并挂载 Google drive</title>
    <url>/1243.html</url>
    <content><![CDATA[<h3 id="安装-rclone-并挂载-Googledrive"><a href="#安装-rclone-并挂载-Googledrive" class="headerlink" title="安装 rclone 并挂载 Googledrive"></a>安装 rclone 并挂载 Googledrive</h3><h3 id="安装-rclone"><a href="#安装-rclone" class="headerlink" title="安装 rclone"></a>安装 rclone</h3><p>Linux 环境</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl https://rclone.org/install.sh | sudo bash</span><br></pre></td></tr></table></figure>

<p>Windows 环境</p>
<p>直接去 rclone 官网下载 rclone，最好将 rclone.exe 所在目录加入系统环境变量</p>
<h3 id="配置-rclone"><a href="#配置-rclone" class="headerlink" title="配置 rclone"></a>配置 rclone</h3><blockquote>
<p>详细配置参考 <a href="https://rclone.org/drive/">https://rclone.org/drive/</a></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">rclone config</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">No remotes found - make a new one</span><br><span class="line">n) New remote</span><br><span class="line">s) Set configuration password</span><br><span class="line">q) Quit config</span><br><span class="line">n&#x2F;s&#x2F;q&gt; n # 新建</span><br><span class="line">name&gt; gdrive # 名称，后面要用到</span><br><span class="line">Type of storage to configure.</span><br><span class="line">Enter a string value. Press Enter for the default (&quot;&quot;).</span><br><span class="line">Choose a number from below, or type in your own value</span><br><span class="line"> 1 &#x2F; 1Fichier</span><br><span class="line">   \ &quot;fichier&quot;</span><br><span class="line"> 2 &#x2F; Alias for an existing remote</span><br><span class="line">   \ &quot;alias&quot;</span><br><span class="line"> 3 &#x2F; Amazon Drive</span><br><span class="line">   \ &quot;amazon cloud drive&quot;</span><br><span class="line"> 4 &#x2F; Amazon S3 Compliant Storage Provider (AWS, Alibaba, Ceph, Digital Ocean, Dreamhost, IBM COS, Minio, etc)</span><br><span class="line">   \ &quot;s3&quot;</span><br><span class="line"> 5 &#x2F; Backblaze B2</span><br><span class="line">   \ &quot;b2&quot;</span><br><span class="line"> 6 &#x2F; Box</span><br><span class="line">   \ &quot;box&quot;</span><br><span class="line"> 7 &#x2F; Cache a remote</span><br><span class="line">   \ &quot;cache&quot;</span><br><span class="line"> 8 &#x2F; Citrix Sharefile</span><br><span class="line">   \ &quot;sharefile&quot;</span><br><span class="line"> 9 &#x2F; Dropbox</span><br><span class="line">   \ &quot;dropbox&quot;</span><br><span class="line">10 &#x2F; Encrypt&#x2F;Decrypt a remote</span><br><span class="line">   \ &quot;crypt&quot;</span><br><span class="line">11 &#x2F; FTP Connection</span><br><span class="line">   \ &quot;ftp&quot;</span><br><span class="line">12 &#x2F; Google Cloud Storage (this is not Google Drive)</span><br><span class="line">   \ &quot;google cloud storage&quot;</span><br><span class="line">13 &#x2F; Google Drive</span><br><span class="line">   \ &quot;drive&quot;</span><br><span class="line">14 &#x2F; Google Photos</span><br><span class="line">   \ &quot;google photos&quot;</span><br><span class="line">15 &#x2F; Hubic</span><br><span class="line">   \ &quot;hubic&quot;</span><br><span class="line">16 &#x2F; In memory object storage system.</span><br><span class="line">   \ &quot;memory&quot;</span><br><span class="line">17 &#x2F; JottaCloud</span><br><span class="line">   \ &quot;jottacloud&quot;</span><br><span class="line">18 &#x2F; Koofr</span><br><span class="line">   \ &quot;koofr&quot;</span><br><span class="line">19 &#x2F; Local Disk</span><br><span class="line">   \ &quot;local&quot;</span><br><span class="line">20 &#x2F; Mail.ru Cloud</span><br><span class="line">   \ &quot;mailru&quot;</span><br><span class="line">21 &#x2F; Mega</span><br><span class="line">   \ &quot;mega&quot;</span><br><span class="line">22 &#x2F; Microsoft Azure Blob Storage</span><br><span class="line">   \ &quot;azureblob&quot;</span><br><span class="line">23 &#x2F; Microsoft OneDrive</span><br><span class="line">   \ &quot;onedrive&quot;</span><br><span class="line">24 &#x2F; OpenDrive</span><br><span class="line">   \ &quot;opendrive&quot;</span><br><span class="line">25 &#x2F; Openstack Swift (Rackspace Cloud Files, Memset Memstore, OVH)</span><br><span class="line">   \ &quot;swift&quot;</span><br><span class="line">26 &#x2F; Pcloud</span><br><span class="line">   \ &quot;pcloud&quot;</span><br><span class="line">27 &#x2F; Put.io</span><br><span class="line">   \ &quot;putio&quot;</span><br><span class="line">28 &#x2F; QingCloud Object Storage</span><br><span class="line">   \ &quot;qingstor&quot;</span><br><span class="line">29 &#x2F; SSH&#x2F;SFTP Connection</span><br><span class="line">   \ &quot;sftp&quot;</span><br><span class="line">30 &#x2F; Sugarsync</span><br><span class="line">   \ &quot;sugarsync&quot;</span><br><span class="line">31 &#x2F; Transparently chunk&#x2F;split large files</span><br><span class="line">   \ &quot;chunker&quot;</span><br><span class="line">32 &#x2F; Union merges the contents of several remotes</span><br><span class="line">   \ &quot;union&quot;</span><br><span class="line">33 &#x2F; Webdav</span><br><span class="line">   \ &quot;webdav&quot;</span><br><span class="line">34 &#x2F; Yandex Disk</span><br><span class="line">   \ &quot;yandex&quot;</span><br><span class="line">35 &#x2F; http Connection</span><br><span class="line">   \ &quot;http&quot;</span><br><span class="line">36 &#x2F; premiumize.me</span><br><span class="line">   \ &quot;premiumizeme&quot;</span><br><span class="line">Storage&gt; 13 # 选择 13 google drive</span><br><span class="line">** See help for drive backend at: https:&#x2F;&#x2F;rclone.org&#x2F;drive&#x2F; **</span><br><span class="line"></span><br><span class="line">Google Application Client Id</span><br><span class="line">Setting your own is recommended.</span><br><span class="line">See https:&#x2F;&#x2F;rclone.org&#x2F;drive&#x2F;#making-your-own-client-id for how to create your own.</span><br><span class="line">If you leave this blank, it will use an internal key which is low performance.</span><br><span class="line">Enter a string value. Press Enter for the default (&quot;&quot;).</span><br><span class="line">client_id&gt; # 默认</span><br><span class="line">Google Application Client Secret</span><br><span class="line">Setting your own is recommended.</span><br><span class="line">Enter a string value. Press Enter for the default (&quot;&quot;).</span><br><span class="line">client_secret&gt; # 默认</span><br><span class="line">Scope that rclone should use when requesting access from drive.</span><br><span class="line">Enter a string value. Press Enter for the default (&quot;&quot;).</span><br><span class="line">Choose a number from below, or type in your own value</span><br><span class="line"> 1 &#x2F; Full access all files, excluding Application Data Folder.</span><br><span class="line">   \ &quot;drive&quot;</span><br><span class="line"> 2 &#x2F; Read-only access to file metadata and file contents.</span><br><span class="line">   \ &quot;drive.readonly&quot;</span><br><span class="line">   &#x2F; Access to files created by rclone only.</span><br><span class="line"> 3 | These are visible in the drive website.</span><br><span class="line">   | File authorization is revoked when the user deauthorizes the app.</span><br><span class="line">   \ &quot;drive.file&quot;</span><br><span class="line">   &#x2F; Allows read and write access to the Application Data folder.</span><br><span class="line"> 4 | This is not visible in the drive website.</span><br><span class="line">   \ &quot;drive.appfolder&quot;</span><br><span class="line">   &#x2F; Allows read-only access to file metadata but</span><br><span class="line"> 5 | does not allow any access to read or download file content.</span><br><span class="line">   \ &quot;drive.metadata.readonly&quot;</span><br><span class="line">scope&gt; 1 # 选1，所有权限</span><br><span class="line">ID of the root folder</span><br><span class="line">Leave blank normally.</span><br><span class="line"></span><br><span class="line">Fill in to access &quot;Computers&quot; folders (see docs), or for rclone to use</span><br><span class="line">a non root folder as its starting point.</span><br><span class="line"></span><br><span class="line">Note that if this is blank, the first time rclone runs it will fill it</span><br><span class="line">in with the ID of the root folder.</span><br><span class="line"></span><br><span class="line">Enter a string value. Press Enter for the default (&quot;&quot;).</span><br><span class="line">root_folder_id&gt; # 默认</span><br><span class="line">Service Account Credentials JSON file path</span><br><span class="line">Leave blank normally.</span><br><span class="line">Needed only if you want use SA instead of interactive login.</span><br><span class="line">Enter a string value. Press Enter for the default (&quot;&quot;).</span><br><span class="line">service_account_file&gt; # 默认</span><br><span class="line">Edit advanced config? (y&#x2F;n)</span><br><span class="line">y) Yes</span><br><span class="line">n) No (default)</span><br><span class="line">y&#x2F;n&gt; # 默认</span><br><span class="line">Remote config</span><br><span class="line">Use auto config?</span><br><span class="line"> * Say Y if not sure</span><br><span class="line"> * Say N if you are working on a remote or headless machine</span><br><span class="line">y) Yes (default)</span><br><span class="line">n) No</span><br><span class="line">y&#x2F;n&gt; n # 如果在远程服务器上配置，记得选 n，否则可能无法正常授权</span><br><span class="line">If your browser doesn&#39;t open automatically go to the following link: http:&#x2F;&#x2F;127.0.0.1:53682&#x2F;auth</span><br><span class="line">Log in and authorize rclone for access</span><br><span class="line">Waiting for code...</span><br><span class="line">Got code</span><br><span class="line">Configure this as a team drive?</span><br><span class="line">y) Yes</span><br><span class="line">n) No</span><br><span class="line">y&#x2F;n&gt; n</span><br><span class="line">--------------------</span><br><span class="line">[remote]</span><br><span class="line">client_id &#x3D;</span><br><span class="line">client_secret &#x3D;</span><br><span class="line">scope &#x3D; drive</span><br><span class="line">root_folder_id &#x3D;</span><br><span class="line">service_account_file &#x3D;</span><br><span class="line">token &#x3D; &#123;&quot;access_token&quot;:&quot;XXX&quot;,&quot;token_type&quot;:&quot;Bearer&quot;,&quot;refresh_token&quot;:&quot;XXX&quot;,&quot;expiry&quot;:&quot;2014-03-16T13:57:58.955387075Z&quot;&#125;</span><br><span class="line">--------------------</span><br><span class="line">y) Yes this is OK</span><br><span class="line">e) Edit this remote</span><br><span class="line">d) Delete this remote</span><br><span class="line">y&#x2F;e&#x2F;d&gt; y</span><br><span class="line">Current remotes:</span><br><span class="line">Name                 Type</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;                 &#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">gdrive               drive</span><br><span class="line"></span><br><span class="line">e) Edit existing remote</span><br><span class="line">n) New remote</span><br><span class="line">d) Delete remote</span><br><span class="line">r) Rename remote</span><br><span class="line">c) Copy remote</span><br><span class="line">s) Set configuration password</span><br><span class="line">q) Quit config</span><br><span class="line">e&#x2F;n&#x2F;d&#x2F;r&#x2F;c&#x2F;s&#x2F;q&gt; q</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong>如果在远程 linux 安装，有些配置(涉及 oauth2 的配置)需要使用浏览器授权，可以使用一下方法配置</p>
<blockquote>
<p>参考：<a href="https://rclone.org/remote_setup/">https://rclone.org/remote_setup/</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Remote config</span><br><span class="line">Use auto config?</span><br><span class="line"> * Say Y if not sure</span><br><span class="line"> * Say N if you are working on a remote or headless machine</span><br><span class="line">y) Yes</span><br><span class="line">n) No</span><br><span class="line">y&#x2F;n&gt; n # 这里选择 n，授权链接会变成如下样式，而不再是 http:&#x2F;&#x2F;127.0.0.1</span><br><span class="line">Please go to the following link: https:&#x2F;&#x2F;accounts.google.com&#x2F;o&#x2F;oauth2&#x2F;auth?access_type&#x3D;offline&amp;client_id&#x3D;202264815644.apps.googleusercontent.com&amp;redirect_uri&#x3D;urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob&amp;response_type&#x3D;code&amp;scope&#x3D;https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive&amp;state&#x3D;J17j_xVz3tAQmV3sMO0xxw</span><br><span class="line">Log in and authorize rclone for access</span><br><span class="line">Enter verification code&gt; # 打开链接登陆授权，将code粘贴到这里</span><br></pre></td></tr></table></figure>

<h3 id="挂载"><a href="#挂载" class="headerlink" title="挂载"></a>挂载</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir -p /home/gdrive</span><br><span class="line"><span class="comment">#gdrive 为上面配置的 name</span></span><br><span class="line"><span class="comment">#/home/gdrive 为挂载到本地的目录</span></span><br><span class="line">/usr/bin/rclone mount gdrive: /home/gdrive \</span><br><span class="line"> --<span class="built_in">umask</span> 0000 \</span><br><span class="line"> --default-permissions \</span><br><span class="line"> --allow-non-empty \</span><br><span class="line"> --allow-other \</span><br><span class="line"> --buffer-size 32M \</span><br><span class="line"> --dir-cache-time 12h \</span><br><span class="line"> --vfs-read-chunk-size 64M \</span><br><span class="line"> --vfs-read-chunk-size-limit 1G &amp;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>报错<br>Fatal error: failed to mount FUSE fs: fusermount: exec: “fusermount”: executable file not found in $PATH<br>解决：安装 fuse<br><code>apt-get install fuse -y</code></p>
</blockquote>
<h3 id="查看挂载"><a href="#查看挂载" class="headerlink" title="查看挂载"></a>查看挂载</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">df -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">gdrive:         1.0P     0  1.0P   0% /home/gdrive</span><br></pre></td></tr></table></figure>

<p>自动挂载</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cat &gt; &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;rclone.service &lt;&lt;EOF</span><br><span class="line">[Unit]</span><br><span class="line">Description&#x3D;Rclone</span><br><span class="line">AssertPathIsDirectory&#x3D;LocalFolder</span><br><span class="line">After&#x3D;network-online.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type&#x3D;simple</span><br><span class="line">ExecStart&#x3D;&#x2F;usr&#x2F;bin&#x2F;rclone mount emby: &#x2F;home&#x2F;gdrive \</span><br><span class="line"> --umask 0000 \</span><br><span class="line"> --default-permissions \</span><br><span class="line"> --allow-non-empty \</span><br><span class="line"> --allow-other \</span><br><span class="line"> --buffer-size 32M \</span><br><span class="line"> --dir-cache-time 12h \</span><br><span class="line"> --vfs-read-chunk-size 64M \</span><br><span class="line"> --vfs-read-chunk-size-limit 1G</span><br><span class="line">ExecStop&#x3D;&#x2F;bin&#x2F;fusermount -u LocalFolder</span><br><span class="line">Restart&#x3D;on-abort</span><br><span class="line">User&#x3D;root</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy&#x3D;default.target</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<p>启动</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl start rclone</span><br></pre></td></tr></table></figure>

<p>开启启动</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> rclone</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>Google Drive</tag>
      </tags>
  </entry>
  <entry>
    <title>常用软件及破解资源合集</title>
    <url>/691.html</url>
    <content><![CDATA[<p>部分破解软件可在<a href="https://t.me/wqdy_channel">TG频道</a>里下载</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>平台</th>
<th>版本</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><a href="https://wqdy.top/366.html">Internet Download Manager</a></td>
<td>Win</td>
<td>6.38.16</td>
<td>下载工具</td>
</tr>
<tr>
<td><a href="https://pan.baidu.com/s/1MLnDNKA3ZBiY-xuZCjMV_w">Eagle</a></td>
<td>Win/Mac</td>
<td>1.8.2</td>
<td>图片管理工具</td>
</tr>
<tr>
<td><a href="https://winscp.net/eng/docs/lang:chs">WinScp</a></td>
<td>Win</td>
<td>5.17.10</td>
<td>Windows 环境下开源图形化 SFTP 客户端</td>
</tr>
<tr>
<td><a href="http://www.chuyu.me/zh-Hans/index.html">Dism++</a></td>
<td>Win</td>
<td>10.1.1001.10(2020-01-18)</td>
<td>系统优化备份工具</td>
</tr>
<tr>
<td><a href="https://pan.baidu.com/s/1FJainInXigwJXqGKShxrAw">ADSafe</a></td>
<td>Win</td>
<td>5.1.921.1800</td>
<td>广告屏蔽工具</td>
</tr>
<tr>
<td><a href="https://pan.baidu.com/s/1QYsFCcmbRxypsvEYskZAug">synergy</a> <a href="https://symless.com/synergy">官网</a></td>
<td>Win</td>
<td>1.5.0-r2278</td>
<td>多台计算机之间共享你的鼠标和键盘</td>
</tr>
<tr>
<td><a href="https://pan.baidu.com/s/1DpuPsjiPxtpbnDRvWd3FjQ">Parallels Desktop</a></td>
<td>Mac</td>
<td>16.1.1</td>
<td>虚拟机</td>
</tr>
<tr>
<td><a href="https://wqdy.top/2015.html">VMware Workstation Pro</a></td>
<td>Win</td>
<td>16.1.0 Build 17198959</td>
<td>虚拟机</td>
</tr>
<tr>
<td><a href="https://zh.snipaste.com/">Snipaste</a></td>
<td>Win/Mac</td>
<td>v2.5.6</td>
<td>截图工具</td>
</tr>
<tr>
<td><a href="https://wqdy.top/1966.html">百度网盘资源下载工具</a></td>
<td>Win</td>
<td></td>
<td>百度网盘资源下载工具合集</td>
</tr>
<tr>
<td><a href="https://wqdy.top/2021.html">Adobe Zii Mac – Universal Adobe CC Patcher</a></td>
<td>Mac</td>
<td>6.0.6</td>
<td>苹果Mac端Adobe软件通用破解工具</td>
</tr>
<tr>
<td><a href="https://www.billfish.cn/">Billfish</a></td>
<td>Win</td>
<td>v1.4.6.12</td>
<td>支持多种格式素材的管理工具</td>
</tr>
<tr>
<td><a href="https://pan.baidu.com/s/1pQB01gLb3JNUL4u9XKgrxQ">fiddler</a></td>
<td>Win</td>
<td>5.0</td>
<td>抓包工具</td>
</tr>
</tbody></table>
<p>待整理</p>
<p>嬴政天下 Adobe 全家桶<br>视频剪辑<br>图片<br>录屏<br>fluent terminal<br>Mem Reduct<br>potplayer<br>RaiDrive<br>typora<br>allavsoft 视频下载<br>Mobile Debug</p>
]]></content>
      <categories>
        <category>软件</category>
      </categories>
      <tags>
        <tag>软件</tag>
        <tag>破解</tag>
      </tags>
  </entry>
  <entry>
    <title>手机端无限制视频播放软件</title>
    <url>/487.html</url>
    <content><![CDATA[<p><a href="http://star.vin/">星雨视频(有广告)</a></p>
<p><a href="https://www.wolong.tv/">卧龙影视(无广告)</a></p>
<p><a href="https://www.ymdy.app/">玉米电影(无广告)</a></p>
<p>为伪装app，即软件图标和名称很奇怪。打开软件如果没有显示播放器相关功能，在后台关闭软件后重新打开</p>
]]></content>
      <categories>
        <category>软件</category>
      </categories>
  </entry>
  <entry>
    <title>斐讯K2P、K2路由器刷机</title>
    <url>/478.html</url>
    <content><![CDATA[<h3 id="PADAVAN（老毛子）固件"><a href="#PADAVAN（老毛子）固件" class="headerlink" title="PADAVAN（老毛子）固件"></a>PADAVAN（老毛子）固件</h3><p><strong>H大固件地址</strong>：<a href="http://opt.cn2qq.com/padavan/">http://opt.cn2qq.com/padavan/</a></p>
<p>k2路由器下载 <code>RT-AC54U-GPIO-1-PSG1218-64M**.trx</code> 文件</p>
<p>K2P各固件的区别，供大家参考：<br>K2P_V5_3.4.3.9-099.trx        这是K2P的MTK平台原版未改版最新v5.0无线驱动固件<br>K2P_DRV_V5_3.4.3.9-099.trx    这是K2P的MTK平台硬改USB最新v5.0无线驱动固件<br>K2P_DRV_512M_3.4.3.9-099.trx  这是K2P的MTK平台硬改512MB内存(RAM)和USB稳定v4.0无线驱动固件<br>K2P_DRV_256M_3.4.3.9-099.trx  这是K2P的MTK平台硬改256MB内存(RAM)和USB稳定v4.0无线驱动固件<br>K2P_DRV_3.4.3.9-099.trx       这是K2P的MTK平台硬改USB稳定v4.0无线驱动固件<br>K2P_3.4.3.9-099.trx           这是K2P的MTK平台原版未改版稳定v4.0无线驱动固件</p>
<p>管理地址：192.168.123.1<br>管理账号：admin<br>管理密码：admin</p>
<p><strong>HANWCKF固件地址</strong> <a href="https://pan.baidu.com/s/1kU8YqrH">https://pan.baidu.com/s/1kU8YqrH</a>  提取码: hmdn</p>
<p>k2p 源码 <a href="https://github.com/hanwckf/rt-n56u">https://github.com/hanwckf/rt-n56u</a></p>
<p><strong>灯大固件</strong>：<a href="http://rom.nanodm.net/">http://rom.nanodm.net/</a></p>
<p><strong>waynezwd的固件地址</strong>：<a href="https://pan.baidu.com/s/1KvlWl4Hr1DwY2N0NxgzeBA">https://pan.baidu.com/s/1KvlWl4Hr1DwY2N0NxgzeBA</a> 提取码: w5e8</p>
<h3 id="高恪免费路由固件"><a href="#高恪免费路由固件" class="headerlink" title="高恪免费路由固件"></a>高恪免费路由固件</h3><p><a href="http://www.gocloud.cn/bbs/forum-51-1.html">http://www.gocloud.cn/bbs/forum-51-1.html</a></p>
<h3 id="lede"><a href="#lede" class="headerlink" title="lede"></a>lede</h3><p>OpenWrt 固件 <a href="https://github.com/coolsnowwolf/lede">https://github.com/coolsnowwolf/lede</a></p>
<p>魔改固件下载 <a href="http://lean.ys168.com/">http://lean.ys168.com/</a></p>
<h3 id="论坛"><a href="#论坛" class="headerlink" title="论坛"></a>论坛</h3><p><a href="https://www.right.com.cn/forum/forum.php">https://www.right.com.cn/forum/forum.php</a></p>
<p><a href="http://www.gocloud.cn/bbs/forum.php">http://www.gocloud.cn/bbs/forum.php</a></p>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>斐讯</tag>
      </tags>
  </entry>
  <entry>
    <title>浏览器中图片另存为时默认保存为jfif格式问题</title>
    <url>/660.html</url>
    <content><![CDATA[<p><a href="https://baike.baidu.com/item/jfif">jfif（JPEG File Interchange Format，JPEG 档案交换格式）</a>格式是一种图片存储格式之一，由 JPEG 格式衍生而来</p>
<p>win10 中，在浏览器中通过图片另存为时发现默认保存为该格式时，说明系统把 JPEG 格式默认为了该格式，可以通过修改注册表还原，具体操作步骤如下：</p>
<ul>
<li><code>WIN</code> + <code>R</code> 打开运行窗口，输入 <code>regedit</code> 回车</li>
<li>找到路径 <code>HKEY_CLASSES_ROOT\MIME\Database\Content Type\image/jpeg</code>，把 <code>extension</code> 的值改成 .jpg，关闭注册表即可</li>
</ul>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
  </entry>
  <entry>
    <title>用 tMM 刮削影片信息，让 KODI、Jellyfin、PLEX、使用本地媒体电影墙！</title>
    <url>/1469.html</url>
    <content><![CDATA[<p>当使用 pt 或者各种 bt 网站，下载了很多电影以后，使用 NAS 上的 plex 或者 jellyfin 刮削不出来海报怎么办？</p>
<p>而今天就将推荐大家使用这款 tinyMediaManager 软件，该软件功能非常强大，可以刮削电影、电影系列、电视剧等，还可以重建nfo文件和批量重名文件、文件夹。支持Win/Mac/Linux。通过他自动匹配家里的电影资源库，让自己的，不论 KODI，还是 jellyfin，还是 emby、plex 都能用上完美的电影墙！</p>
<h2 id="windows-下使用"><a href="#windows-下使用" class="headerlink" title="windows 下使用"></a>windows 下使用</h2><h3 id="下载和安装-tinyMediaManager"><a href="#下载和安装-tinyMediaManager" class="headerlink" title="下载和安装 tinyMediaManager"></a>下载和安装 tinyMediaManager</h3><p>下载地址 <a href="https://www.tinymediamanager.org/download/">https://www.tinymediamanager.org/download/</a></p>
<p>如果提示需要 java 环境，下载安装即可</p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>打开软件</p>
<p>当提示设置影片档案文件夹时，可以先不添加，直接下一步</p>
<p>当提示元数据刮削的时候，选择 <code>themoviedb.org</code>，不管是电影和电视剧都选他即可</p>
<p>打开设置，添加电影和电视剧目录，其他默认</p>
<p>设置好了以后，点击更新</p>
<p>全选已添加的影片信息，点击右键，搜索并刮削所选电影 - 自动匹配：会自动下载封面和影片信息</p>
<p>其中有可能遇到需要您手动搜索的影片，手动搜索一下中文名字即可</p>
<p>当影片完全搜索不出来的时候，也可以到豆瓣电影里面搜索一下这个影片，记住它的 imdb 链接的后面一串数字，比如：tt7286456</p>
<p>直接搜索这个序列号，也是可以获取影片资料的</p>
<p>电视剧的搜索方式和电影的搜索方式是一模一样的，而且电视剧会将每一集都进行信息整理和分类</p>
<p>全部更新完毕后，可以看到影片的文件夹里观看，下载了 nfo 影片信息，海报封面图，logo 等</p>
<h2 id="linux-下使用"><a href="#linux-下使用" class="headerlink" title="linux 下使用"></a>linux 下使用</h2><p>使用docker安装</p>
<p><a href="https://hub.docker.com/r/romancin/tinymediamanager">https://hub.docker.com/r/romancin/tinymediamanager</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker pull romancin/tinymediamanager</span><br><span class="line"></span><br><span class="line">docker run -d --name=tinymediamanager \</span><br><span class="line">-v /share/Container/tinymediamanager/config:/config \</span><br><span class="line">-v /home/gdrive:/media \</span><br><span class="line">-e GROUP_ID=0 -e USER_ID=0 -e TZ=Europe/Madrid \</span><br><span class="line">-p 5800:5800 \</span><br><span class="line">-p 5900:5900 \</span><br><span class="line">romancin/tinymediamanager:latest</span><br></pre></td></tr></table></figure>

<p>浏览以 <code>http://your-host-ip:5800</code> 即可访问 TinyMediaManager GUI</p>
<p>解决中文无法正常显示的问题</p>
<p>添加 ENABLE_CJK_FONT=1 环境变量</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d --name=tinymediamanager \</span><br><span class="line">-v /share/Container/tinymediamanager/config:/config \</span><br><span class="line">-v /home/gdrive:/media \</span><br><span class="line">-e GROUP_ID=0 -e USER_ID=0 -e TZ=Europe/Madrid -e ENABLE_CJK_FONT=1 \</span><br><span class="line">-p 5800:5800 \</span><br><span class="line">-p 5900:5900 \</span><br><span class="line">romancin/tinymediamanager:latest</span><br></pre></td></tr></table></figure>

<h3 id="使用-Jellyfin-加载-tinyMediaManager-整理的影片"><a href="#使用-Jellyfin-加载-tinyMediaManager-整理的影片" class="headerlink" title="使用 Jellyfin 加载 tinyMediaManager 整理的影片"></a>使用 Jellyfin 加载 tinyMediaManager 整理的影片</h3><p>只需要设置 Jellyfin 媒体库，取消掉所有的刮削器即可（一定要取消掉，否则依然会无法显示影片信息，甚至连影片都可能不会出现在影视墙上）</p>
]]></content>
      <categories>
        <category>NAS</category>
      </categories>
      <tags>
        <tag>jellyfin</tag>
        <tag>plex</tag>
      </tags>
  </entry>
  <entry>
    <title>百度网盘资源下载工具合集</title>
    <url>/1966.html</url>
    <content><![CDATA[<p>整理备份百度网盘资源下载工具，低调使用。</p>
<p>2021.01.30 Kinhdown 可用</p>
<p>2020年9月20日 PD卢本伟修改版3.5版本更新</p>
<h2 id="Kinhdown"><a href="#Kinhdown" class="headerlink" title="Kinhdown"></a>Kinhdown</h2><p><a href="https://kinhdown.kinh.cc/">Kinhdown</a><br><a href="https://t.me/KinhDownLoadTG">电报群</a><br><a href="https://t.me/KinhDownLoad">电报频道</a><br>下载地址：<a href="https://www.lanzoux.com/s/KinhDown">蓝奏云</a><br>在线解析：<a href="https://pan.kdbaidu.com/">KD官方</a></p>
<h2 id="PD卢本伟修改版"><a href="#PD卢本伟修改版" class="headerlink" title="PD卢本伟修改版"></a>PD卢本伟修改版</h2><p><a href="https://github.com/PanDownloadServer/Server">github</a><br><a href="https://kurukurumi.tk/">官网</a><br><a href="https://t.me/fixpd">Telegram群</a></p>
<h2 id="无言仰慕不起-稳定版"><a href="#无言仰慕不起-稳定版" class="headerlink" title="无言仰慕不起-稳定版"></a>无言仰慕不起-稳定版</h2><h2 id="PD新城旧梦版"><a href="#PD新城旧梦版" class="headerlink" title="PD新城旧梦版"></a>PD新城旧梦版</h2><p><a href="https://www.itxcjm.top/76/">https://www.itxcjm.top/76/</a></p>
<p>下载地址：<a href="https://wwa.lanzous.com/iTAH9dwl2oh">蓝奏云</a></p>
<h2 id="6盘小白羊版"><a href="#6盘小白羊版" class="headerlink" title="6盘小白羊版"></a>6盘小白羊版</h2><p><a href="https://github.com/liupan1890/xiaobaiyang">github</a></p>
<h2 id="B站MBRjun的网页复刻版"><a href="#B站MBRjun的网页复刻版" class="headerlink" title="B站MBRjun的网页复刻版"></a>B站MBRjun的网页复刻版</h2><p><a href="https://pan.mbrjun.cn/">https://pan.mbrjun.cn/</a> 不支持文件夹下载</p>
<p><a href="https://github.com/yuantuo666/baiduwp-php">github</a></p>
<h2 id="在线解析-已关闭"><a href="#在线解析-已关闭" class="headerlink" title="在线解析(已关闭)"></a>在线解析(已关闭)</h2><p><a href="http://pan.naifei.cc/">http://pan.naifei.cc/</a>?</p>
<h2 id="PanDownload"><a href="#PanDownload" class="headerlink" title="PanDownload"></a>PanDownload</h2><p><a href="http://pandownload.com/">PanDownload</a></p>
]]></content>
      <categories>
        <category>软件</category>
      </categories>
      <tags>
        <tag>下载</tag>
        <tag>百度网盘</tag>
      </tags>
  </entry>
  <entry>
    <title>神级代码注释</title>
    <url>/2008.html</url>
    <content><![CDATA[<p><a href="http://www.asciiworld.com/">http://www.asciiworld.com/</a><br><a href="https://github.com/Blankj/awesome-comment">https://github.com/Blankj/awesome-comment</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> -------------------------</span><br><span class="line">&lt; Just have fun with gist &gt;</span><br><span class="line"> -------------------------</span><br><span class="line">        \   ^__^</span><br><span class="line">         \  (oo)\_______</span><br><span class="line">            (__)\       )\&#x2F;\</span><br><span class="line">                ||----w |</span><br><span class="line">                ||     ||</span><br></pre></td></tr></table></figure>

<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">//When I wrote this, only God and I understood what I was doing</span><br><span class="line">//Now, God only knows</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
  </entry>
  <entry>
    <title>编码规范及配置 ESLint</title>
    <url>/416.html</url>
    <content><![CDATA[<h1 id="编码规范"><a href="#编码规范" class="headerlink" title="编码规范"></a>编码规范</h1><blockquote>
<p><a href="https://github.com/airbnb/javascript">Airbnb JavaScript Style Guide</a></p>
<p><a href="https://google.github.io/styleguide/jsguide">Google JavaScript Style Guide</a></p>
<p><a href="https://github.com/standard/standard">JavaScript Standard Style Guide</a></p>
</blockquote>
<blockquote>
<p><a href="https://cn.eslint.org/">ESLint</a></p>
</blockquote>
<p><a href="https://www.zhihu.com/question/20298345/answer/49551142">JavaScript 语句后应该加分号么？</a></p>
<h2 id="Vue-ESLint-Prettier"><a href="#Vue-ESLint-Prettier" class="headerlink" title="Vue + ESLint + Prettier"></a><code>Vue + ESLint + Prettier</code></h2><p>[vue 官方风格指南(<a href="https://cn.vuejs.org/v2/style-guide/)]">https://cn.vuejs.org/v2/style-guide/)]</a></p>
<h3 id="安装-node"><a href="#安装-node" class="headerlink" title="安装 node"></a>安装 <code>node</code></h3><p><a href="https://nodejs.org/zh-cn/">https://nodejs.org/zh-cn/</a></p>
<h3 id="配置-ESlint"><a href="#配置-ESlint" class="headerlink" title="配置 ESlint"></a>配置 <code>ESlint</code></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install eslint -g</span><br><span class="line">$ npm install eslint-plugin-html -g</span><br><span class="line"></span><br><span class="line">$ eslint -v</span><br><span class="line">$ eslint --init</span><br><span class="line"></span><br><span class="line"><span class="comment"># google 标准</span></span><br><span class="line"><span class="comment"># $ npm install eslint-config-google -g</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># airbnb 标准</span></span><br><span class="line"><span class="comment"># $ npm install eslint-config-airbnb eslint-plugin-jsx-a11y eslint-plugin-import eslint-plugin-react -g</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># standard 标准</span></span><br><span class="line">$ npm install eslint-plugin-standard eslint-config-standard eslint-plugin-node eslint-plugin-promise -g</span><br><span class="line"></span><br><span class="line"><span class="comment"># vue</span></span><br><span class="line">$ npm install eslint-plugin-vue -g</span><br><span class="line"></span><br><span class="line"><span class="comment"># es6 语法支持</span></span><br><span class="line">$ npm install babel-eslint vue-eslint-parser -g</span><br></pre></td></tr></table></figure>

<p><code>.eslintrc.json</code> 文件</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// plugin与extend的区别：extend提供的是eslint现有规则的一系列预设</span></span><br><span class="line">  <span class="comment">// 而plugin则提供了除预设之外的自定义规则，当你在eslint的规则里找不到合适的的时候</span></span><br><span class="line">  <span class="attr">&quot;extends&quot;</span>: [<span class="string">&quot;google&quot;</span>, <span class="string">&quot;plugin: vue/essential&quot;</span>],</span><br><span class="line">  <span class="attr">&quot;plugins&quot;</span>: [<span class="string">&quot;html&quot;</span>],</span><br><span class="line">  <span class="attr">&quot;parserOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;sourceType&quot;</span>: <span class="string">&quot;module&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;rules&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;valid-jsdoc&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">&quot;require-jsdoc&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;no-var&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;vars-on-top&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;eqeqeq&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">&quot;space-before-function-paren&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;always&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;semi&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;never&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;comma-dangle&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;never&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;linebreak-style&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;unix&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;no-invalid-this&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;max-len&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;prefer-const&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;arrow-parens&quot;</span>: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;extends&quot;</span>: [<span class="string">&quot;standard&quot;</span>, <span class="string">&quot;plugin:vue/essential&quot;</span>],</span><br><span class="line">  <span class="comment">// &quot;extends&quot;: [&quot;standard&quot;, &quot;plugin:vue/recommended&quot;],</span></span><br><span class="line">  <span class="attr">&quot;plugins&quot;</span>: [<span class="string">&quot;html&quot;</span>],</span><br><span class="line">  <span class="attr">&quot;parser&quot;</span>: <span class="string">&quot;vue-eslint-parser&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;parserOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;parser&quot;</span>: <span class="string">&quot;babel-eslint&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;ecmaVersion&quot;</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="attr">&quot;sourceType&quot;</span>: <span class="string">&quot;module&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;env&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;browser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;node&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;rules&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;no-new&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;no-undef&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;no-unused-vars&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">&quot;space-before-function-paren&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;always&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;eqeqeq&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;handle-callback-err&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;no-useless-escape&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;new-cap&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;vue/name-property-casing&quot;</span>: <span class="number">0</span> <span class="comment">// vue</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>vscode 插件安装 <code>ESLint</code></p>
<p>vscode 配置 <code>User Settings</code></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;javascript.validate.enable&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">&quot;typescript.validate.enable&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">&quot;eslint.nodePath&quot;</span>: <span class="string">&quot;C:\\Program Files\\nodejs\\node.exe&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;eslint.options&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;configFile&quot;</span>: <span class="string">&quot;C:/Users/C/.vscode/.eslintrc.json&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;eslint.alwaysShowStatus&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;eslint.autoFixOnSave&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;eslint.validate&quot;</span>: [<span class="string">&quot;javascript&quot;</span>, <span class="string">&quot;javascriptreact&quot;</span>, &#123; <span class="attr">&quot;language&quot;</span>: <span class="string">&quot;html&quot;</span>, <span class="attr">&quot;autoFix&quot;</span>: <span class="literal">true</span> &#125;, &#123; <span class="attr">&quot;language&quot;</span>: <span class="string">&quot;vue&quot;</span>, <span class="attr">&quot;autoFix&quot;</span>: <span class="literal">true</span> &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="配置-prettier"><a href="#配置-prettier" class="headerlink" title="配置 prettier"></a>配置 prettier</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install prettier -g</span><br><span class="line">$ npm install eslint-plugin-prettier -g</span><br></pre></td></tr></table></figure>

<p>vscode 插件安装 <code>prettier</code></p>
<p>vscode 配置 <code>User Settings</code></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// 禁用默认html格式化</span></span><br><span class="line">  <span class="attr">&quot;html.format.enable&quot;</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">&quot;prettier.semi&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">&quot;prettier.singleQuote&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;prettier.jsxSingleQuote&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;prettier.eslintIntegration&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;prettier.htmlWhitespaceSensitivity&quot;</span>: <span class="string">&quot;ignore&quot;</span>,</span><br><span class="line">  <span class="comment">// 标签换行长度</span></span><br><span class="line">  <span class="attr">&quot;prettier.printWidth&quot;</span>: <span class="number">800</span>,</span><br><span class="line">  <span class="attr">&quot;prettier.bracketSpacing&quot;</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>vuter</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;vetur.format.defaultFormatter.js&quot;</span>: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">  <span class="comment">// HTML Default Formatter</span></span><br><span class="line">  <span class="attr">&quot;vetur.format.defaultFormatter.html&quot;</span>: <span class="string">&quot;prettyhtml&quot;</span></span><br><span class="line">  <span class="string">&quot;vetur.format.defaultFormatterOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;prettyhtml&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;printWidth&quot;</span>: <span class="number">1000</span>,</span><br><span class="line">      <span class="attr">&quot;singleQuote&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">&quot;wrapAttributes&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">&quot;sortAttributes&quot;</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="配置-eslint-校验-typescript"><a href="#配置-eslint-校验-typescript" class="headerlink" title="配置 eslint 校验 typescript"></a>配置 eslint 校验 typescript</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install eslint typescript @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint-config-alloy -g</span><br></pre></td></tr></table></figure>

<p><a href="https://github.com/AlloyTeam/eslint-config-alloy/">https://github.com/AlloyTeam/eslint-config-alloy/</a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;extends&quot;</span>: [<span class="string">&quot;standard&quot;</span>, <span class="string">&quot;alloy&quot;</span>, <span class="string">&quot;alloy/typescript&quot;</span>, <span class="string">&quot;plugin:vue/essential&quot;</span>],</span><br><span class="line">  <span class="attr">&quot;plugins&quot;</span>: [<span class="string">&quot;html&quot;</span>, <span class="string">&quot;typescript&quot;</span>],</span><br><span class="line">  <span class="comment">// &quot;parser&quot;: &quot;@typescript-eslint/parser&quot;,</span></span><br><span class="line">  <span class="attr">&quot;parserOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;parser&quot;</span>: <span class="string">&quot;@typescript-eslint/parser&quot;</span>,</span><br><span class="line">    <span class="comment">// &quot;parser&quot;: &quot;babel-eslint&quot;,</span></span><br><span class="line">    <span class="attr">&quot;ecmaVersion&quot;</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="attr">&quot;sourceType&quot;</span>: <span class="string">&quot;module&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;env&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;browser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;node&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;commonjs&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;rules&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;no-new&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;no-undef&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;no-unused-vars&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">&quot;no-var&quot;</span>: [<span class="number">0</span>, <span class="string">&quot;always&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;space-before-function-paren&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;always&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;typescript/class-name-casing&quot;</span>: <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ESLint-规则列表"><a href="#ESLint-规则列表" class="headerlink" title="ESLint 规则列表"></a>ESLint 规则列表</h2><p><code>.eslintrc.json</code> 规则值：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;off&quot;或者0    &#x2F;&#x2F; 关闭规则关闭</span><br><span class="line">&quot;warn&quot;或者1   &#x2F;&#x2F; 在打开的规则作为警告（不影响退出代码）</span><br><span class="line">&quot;error&quot;或者2  &#x2F;&#x2F; 把规则作为一个错误（退出代码触发时为1</span><br></pre></td></tr></table></figure>

<p>忽略检测警告</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 忽略检测下一行</span></span><br><span class="line"><span class="comment">/* eslint-disable-next-line */</span></span><br><span class="line"><span class="comment">// 忽略当前整个文件</span></span><br><span class="line"><span class="comment">/* eslint-disable */</span></span><br><span class="line"><span class="comment">// 忽略 no-new 规则</span></span><br><span class="line"><span class="comment">/* eslint-disable no-new */</span></span><br></pre></td></tr></table></figure>

<p><a href="https://eslint.org/docs/rules/">规则列表 https://eslint.org/docs/rules/</a></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&quot;rules&quot;: &#123;</span><br><span class="line">  &quot;no-alert&quot;: 0,//禁止使用alert confirm prompt</span><br><span class="line">  &quot;no-array-constructor&quot;: 2,//禁止使用数组构造器</span><br><span class="line">  &quot;no-bitwise&quot;: 0,//禁止使用按位运算符</span><br><span class="line">  &quot;no-caller&quot;: 1,//禁止使用arguments.caller或arguments.callee</span><br><span class="line">  &quot;no-catch-shadow&quot;: 2,//禁止catch子句参数与外部作用域变量同名</span><br><span class="line">  &quot;no-class-assign&quot;: 2,//禁止给类赋值</span><br><span class="line">  &quot;no-cond-assign&quot;: 2,//禁止在条件表达式中使用赋值语句</span><br><span class="line">  &quot;no-console&quot;: 2,//禁止使用console</span><br><span class="line">  &quot;no-const-assign&quot;: 2,//禁止修改const声明的变量</span><br><span class="line">  &quot;no-constant-condition&quot;: 2,//禁止在条件中使用常量表达式 if(true) if(1)</span><br><span class="line">  &quot;no-continue&quot;: 0,//禁止使用continue</span><br><span class="line">  &quot;no-control-regex&quot;: 2,//禁止在正则表达式中使用控制字符</span><br><span class="line">  &quot;no-debugger&quot;: 2,//禁止使用debugger</span><br><span class="line">  &quot;no-delete-var&quot;: 2,//不能对var声明的变量使用delete操作符</span><br><span class="line">  &quot;no-div-regex&quot;: 1,//不能使用看起来像除法的正则表达式/=foo/</span><br><span class="line">  &quot;no-dupe-keys&quot;: 2,//在创建对象字面量时不允许键重复 &#123;a:1,a:1&#125;</span><br><span class="line">  &quot;no-dupe-args&quot;: 2,//函数参数不能重复</span><br><span class="line">  &quot;no-duplicate-case&quot;: 2,//switch中的case标签不能重复</span><br><span class="line">  &quot;no-else-return&quot;: 2,//如果if语句里面有return,后面不能跟else语句</span><br><span class="line">  &quot;no-empty&quot;: 2,//块语句中的内容不能为空</span><br><span class="line">  &quot;no-empty-character-class&quot;: 2,//正则表达式中的[]内容不能为空</span><br><span class="line">  &quot;no-empty-label&quot;: 2,//禁止使用空label</span><br><span class="line">  &quot;no-eq-null&quot;: 2,//禁止对null使用==或!=运算符</span><br><span class="line">  &quot;no-eval&quot;: 1,//禁止使用eval</span><br><span class="line">  &quot;no-ex-assign&quot;: 2,//禁止给catch语句中的异常参数赋值</span><br><span class="line">  &quot;no-extend-native&quot;: 2,//禁止扩展native对象</span><br><span class="line">  &quot;no-extra-bind&quot;: 2,//禁止不必要的函数绑定</span><br><span class="line">  &quot;no-extra-boolean-cast&quot;: 2,//禁止不必要的bool转换</span><br><span class="line">  &quot;no-extra-parens&quot;: 2,//禁止非必要的括号</span><br><span class="line">  &quot;no-extra-semi&quot;: 2,//禁止多余的冒号</span><br><span class="line">  &quot;no-fallthrough&quot;: 1,//禁止switch穿透</span><br><span class="line">  &quot;no-floating-decimal&quot;: 2,//禁止省略浮点数中的0 .5 3.</span><br><span class="line">  &quot;no-func-assign&quot;: 2,//禁止重复的函数声明</span><br><span class="line">  &quot;no-implicit-coercion&quot;: 1,//禁止隐式转换</span><br><span class="line">  &quot;no-implied-eval&quot;: 2,//禁止使用隐式eval</span><br><span class="line">  &quot;no-inline-comments&quot;: 0,//禁止行内备注</span><br><span class="line">  &quot;no-inner-declarations&quot;: [2, &quot;functions&quot;],//禁止在块语句中使用声明（变量或函数）</span><br><span class="line">  &quot;no-invalid-regexp&quot;: 2,//禁止无效的正则表达式</span><br><span class="line">  &quot;no-invalid-this&quot;: 2,//禁止无效的this，只能用在构造器，类，对象字面量</span><br><span class="line">  &quot;no-irregular-whitespace&quot;: 2,//不能有不规则的空格</span><br><span class="line">  &quot;no-iterator&quot;: 2,//禁止使用__iterator__ 属性</span><br><span class="line">  &quot;no-label-var&quot;: 2,//label名不能与var声明的变量名相同</span><br><span class="line">  &quot;no-labels&quot;: 2,//禁止标签声明</span><br><span class="line">  &quot;no-lone-blocks&quot;: 2,//禁止不必要的嵌套块</span><br><span class="line">  &quot;no-lonely-if&quot;: 2,//禁止else语句内只有if语句</span><br><span class="line">  &quot;no-loop-func&quot;: 1,//禁止在循环中使用函数（如果没有引用外部变量不形成闭包就可以）</span><br><span class="line">  &quot;no-mixed-requires&quot;: [0, false],//声明时不能混用声明类型</span><br><span class="line">  &quot;no-mixed-spaces-and-tabs&quot;: [2, false],//禁止混用tab和空格</span><br><span class="line">  &quot;linebreak-style&quot;: [0, &quot;windows&quot;],//换行风格</span><br><span class="line">  &quot;no-multi-spaces&quot;: 1,//不能用多余的空格</span><br><span class="line">  &quot;no-multi-str&quot;: 2,//字符串不能用\换行</span><br><span class="line">  &quot;no-multiple-empty-lines&quot;: [1, &#123;&quot;max&quot;: 2&#125;],//空行最多不能超过2行</span><br><span class="line">  &quot;no-native-reassign&quot;: 2,//不能重写native对象</span><br><span class="line">  &quot;no-negated-in-lhs&quot;: 2,//in 操作符的左边不能有!</span><br><span class="line">  &quot;no-nested-ternary&quot;: 0,//禁止使用嵌套的三目运算</span><br><span class="line">  &quot;no-new&quot;: 1,//禁止在使用new构造一个实例后不赋值</span><br><span class="line">  &quot;no-new-func&quot;: 1,//禁止使用new Function</span><br><span class="line">  &quot;no-new-object&quot;: 2,//禁止使用new Object()</span><br><span class="line">  &quot;no-new-require&quot;: 2,//禁止使用new require</span><br><span class="line">  &quot;no-new-wrappers&quot;: 2,//禁止使用new创建包装实例，new String new Boolean new Number</span><br><span class="line">  &quot;no-obj-calls&quot;: 2,//不能调用内置的全局对象，比如Math() JSON()</span><br><span class="line">  &quot;no-octal&quot;: 2,//禁止使用八进制数字</span><br><span class="line">  &quot;no-octal-escape&quot;: 2,//禁止使用八进制转义序列</span><br><span class="line">  &quot;no-param-reassign&quot;: 2,//禁止给参数重新赋值</span><br><span class="line">  &quot;no-path-concat&quot;: 0,//node中不能使用__dirname或__filename做路径拼接</span><br><span class="line">  &quot;no-plusplus&quot;: 0,//禁止使用++，--</span><br><span class="line">  &quot;no-process-env&quot;: 0,//禁止使用process.env</span><br><span class="line">  &quot;no-process-exit&quot;: 0,//禁止使用process.exit()</span><br><span class="line">  &quot;no-proto&quot;: 2,//禁止使用__proto__属性</span><br><span class="line">  &quot;no-redeclare&quot;: 2,//禁止重复声明变量</span><br><span class="line">  &quot;no-regex-spaces&quot;: 2,//禁止在正则表达式字面量中使用多个空格 /foo bar/</span><br><span class="line">  &quot;no-restricted-modules&quot;: 0,//如果禁用了指定模块，使用就会报错</span><br><span class="line">  &quot;no-return-assign&quot;: 1,//return 语句中不能有赋值表达式</span><br><span class="line">  &quot;no-script-url&quot;: 0,//禁止使用javascript:void(0)</span><br><span class="line">  &quot;no-self-compare&quot;: 2,//不能比较自身</span><br><span class="line">  &quot;no-sequences&quot;: 0,//禁止使用逗号运算符</span><br><span class="line">  &quot;no-shadow&quot;: 2,//外部作用域中的变量不能与它所包含的作用域中的变量或参数同名</span><br><span class="line">  &quot;no-shadow-restricted-names&quot;: 2,//严格模式中规定的限制标识符不能作为声明时的变量名使用</span><br><span class="line">  &quot;no-spaced-func&quot;: 2,//函数调用时 函数名与()之间不能有空格</span><br><span class="line">  &quot;no-sparse-arrays&quot;: 2,//禁止稀疏数组， [1,,2]</span><br><span class="line">  &quot;no-sync&quot;: 0,//nodejs 禁止同步方法</span><br><span class="line">  &quot;no-ternary&quot;: 0,//禁止使用三目运算符</span><br><span class="line">  &quot;no-trailing-spaces&quot;: 1,//一行结束后面不要有空格</span><br><span class="line">  &quot;no-this-before-super&quot;: 0,//在调用super()之前不能使用this或super</span><br><span class="line">  &quot;no-throw-literal&quot;: 2,//禁止抛出字面量错误 throw &quot;error&quot;;</span><br><span class="line">  &quot;no-undef&quot;: 1,//不能有未定义的变量</span><br><span class="line">  &quot;no-undef-init&quot;: 2,//变量初始化时不能直接给它赋值为undefined</span><br><span class="line">  &quot;no-undefined&quot;: 2,//不能使用undefined</span><br><span class="line">  &quot;no-unexpected-multiline&quot;: 2,//避免多行表达式</span><br><span class="line">  &quot;no-underscore-dangle&quot;: 1,//标识符不能以_开头或结尾</span><br><span class="line">  &quot;no-unneeded-ternary&quot;: 2,//禁止不必要的嵌套 var isYes = answer === 1 ? true : false;</span><br><span class="line">  &quot;no-unreachable&quot;: 2,//不能有无法执行的代码</span><br><span class="line">  &quot;no-unused-expressions&quot;: 2,//禁止无用的表达式</span><br><span class="line">  &quot;no-unused-vars&quot;: [2, &#123;&quot;vars&quot;: &quot;all&quot;, &quot;args&quot;: &quot;after-used&quot;&#125;],//不能有声明后未被使用的变量或参数</span><br><span class="line">  &quot;no-use-before-define&quot;: 2,//未定义前不能使用</span><br><span class="line">  &quot;no-useless-call&quot;: 2,//禁止不必要的call和apply</span><br><span class="line">  &quot;no-void&quot;: 2,//禁用void操作符</span><br><span class="line">  &quot;no-var&quot;: 0,//禁用var，用let和const代替</span><br><span class="line">  &quot;no-warning-comments&quot;: [1, &#123; &quot;terms&quot;: [&quot;todo&quot;, &quot;fixme&quot;, &quot;xxx&quot;], &quot;location&quot;: &quot;start&quot; &#125;],//不能有警告备注</span><br><span class="line">  &quot;no-with&quot;: 2,//禁用with</span><br><span class="line">  &quot;array-bracket-spacing&quot;: [2, &quot;never&quot;],//是否允许非空数组里面有多余的空格</span><br><span class="line">  &quot;arrow-parens&quot;: 0,//箭头函数用小括号括起来</span><br><span class="line">  &quot;arrow-spacing&quot;: 0,//=&gt;的前/后括号</span><br><span class="line">  &quot;accessor-pairs&quot;: 0,//在对象中使用getter/setter</span><br><span class="line">  &quot;block-scoped-var&quot;: 0,//块语句中使用var</span><br><span class="line">  &quot;brace-style&quot;: [1, &quot;1tbs&quot;],//大括号风格</span><br><span class="line">  &quot;callback-return&quot;: 1,//避免多次调用回调什么的</span><br><span class="line">  &quot;camelcase&quot;: 2,//强制驼峰法命名</span><br><span class="line">  &quot;comma-dangle&quot;: [2, &quot;never&quot;],//对象字面量项尾不能有逗号</span><br><span class="line">  &quot;comma-spacing&quot;: 0,//逗号前后的空格</span><br><span class="line">  &quot;comma-style&quot;: [2, &quot;last&quot;],//逗号风格，换行时在行首还是行尾</span><br><span class="line">  &quot;complexity&quot;: [0, 11],//循环复杂度</span><br><span class="line">  &quot;computed-property-spacing&quot;: [0, &quot;never&quot;],//是否允许计算后的键名什么的</span><br><span class="line">  &quot;consistent-return&quot;: 0,//return 后面是否允许省略</span><br><span class="line">  &quot;consistent-this&quot;: [2, &quot;that&quot;],//this别名</span><br><span class="line">  &quot;constructor-super&quot;: 0,//非派生类不能调用super，派生类必须调用super</span><br><span class="line">  &quot;curly&quot;: [2, &quot;all&quot;],//必须使用 if()&#123;&#125; 中的&#123;&#125;</span><br><span class="line">  &quot;default-case&quot;: 2,//switch语句最后必须有default</span><br><span class="line">  &quot;dot-location&quot;: 0,//对象访问符的位置，换行的时候在行首还是行尾</span><br><span class="line">  &quot;dot-notation&quot;: [0, &#123; &quot;allowKeywords&quot;: true &#125;],//避免不必要的方括号</span><br><span class="line">  &quot;eol-last&quot;: 0,//文件以单一的换行符结束</span><br><span class="line">  &quot;eqeqeq&quot;: 2,//必须使用全等</span><br><span class="line">  &quot;func-names&quot;: 0,//函数表达式必须有名字</span><br><span class="line">  &quot;func-style&quot;: [0, &quot;declaration&quot;],//函数风格，规定只能使用函数声明/函数表达式</span><br><span class="line">  &quot;generator-star-spacing&quot;: 0,//生成器函数*的前后空格</span><br><span class="line">  &quot;guard-for-in&quot;: 0,//for in循环要用if语句过滤</span><br><span class="line">  &quot;handle-callback-err&quot;: 0,//nodejs 处理错误</span><br><span class="line">  &quot;id-length&quot;: 0,//变量名长度</span><br><span class="line">  &quot;indent&quot;: [2, 4],//缩进风格</span><br><span class="line">  &quot;init-declarations&quot;: 0,//声明时必须赋初值</span><br><span class="line">  &quot;key-spacing&quot;: [0, &#123; &quot;beforeColon&quot;: false, &quot;afterColon&quot;: true &#125;],//对象字面量中冒号的前后空格</span><br><span class="line">  &quot;lines-around-comment&quot;: 0,//行前/行后备注</span><br><span class="line">  &quot;max-depth&quot;: [0, 4],//嵌套块深度</span><br><span class="line">  &quot;max-len&quot;: [0, 80, 4],//字符串最大长度</span><br><span class="line">  &quot;max-nested-callbacks&quot;: [0, 2],//回调嵌套深度</span><br><span class="line">  &quot;max-params&quot;: [0, 3],//函数最多只能有3个参数</span><br><span class="line">  &quot;max-statements&quot;: [0, 10],//函数内最多有几个声明</span><br><span class="line">  &quot;new-cap&quot;: 2,//函数名首行大写必须使用new方式调用，首行小写必须用不带new方式调用</span><br><span class="line">  &quot;new-parens&quot;: 2,//new时必须加小括号</span><br><span class="line">  &quot;newline-after-var&quot;: 2,//变量声明后是否需要空一行</span><br><span class="line">  &quot;object-curly-spacing&quot;: [0, &quot;never&quot;],//大括号内是否允许不必要的空格</span><br><span class="line">  &quot;object-shorthand&quot;: 0,//强制对象字面量缩写语法</span><br><span class="line">  &quot;one-var&quot;: 1,//连续声明</span><br><span class="line">  &quot;operator-assignment&quot;: [0, &quot;always&quot;],//赋值运算符 += -=什么的</span><br><span class="line">  &quot;operator-linebreak&quot;: [2, &quot;after&quot;],//换行时运算符在行尾还是行首</span><br><span class="line">  &quot;padded-blocks&quot;: 0,//块语句内行首行尾是否要空行</span><br><span class="line">  &quot;prefer-const&quot;: 0,//首选const</span><br><span class="line">  &quot;prefer-spread&quot;: 0,//首选展开运算</span><br><span class="line">  &quot;prefer-reflect&quot;: 0,//首选Reflect的方法</span><br><span class="line">  &quot;quotes&quot;: [1, &quot;single&quot;],//引号类型 `` &quot;&quot; &#x27;&#x27;</span><br><span class="line">  &quot;quote-props&quot;:[2, &quot;always&quot;],//对象字面量中的属性名是否强制双引号</span><br><span class="line">  &quot;radix&quot;: 2,//parseInt必须指定第二个参数</span><br><span class="line">  &quot;id-match&quot;: 0,//命名检测</span><br><span class="line">  &quot;require-yield&quot;: 0,//生成器函数必须有yield</span><br><span class="line">  &quot;semi&quot;: [2, &quot;always&quot;],//语句强制分号结尾</span><br><span class="line">  &quot;semi-spacing&quot;: [0, &#123;&quot;before&quot;: false, &quot;after&quot;: true&#125;],//分号前后空格</span><br><span class="line">  &quot;sort-vars&quot;: 0,//变量声明时排序</span><br><span class="line">  &quot;space-after-keywords&quot;: [0, &quot;always&quot;],//关键字后面是否要空一格</span><br><span class="line">  &quot;space-before-blocks&quot;: [0, &quot;always&quot;],//不以新行开始的块&#123;前面要不要有空格</span><br><span class="line">  &quot;space-before-function-paren&quot;: [0, &quot;always&quot;],//函数定义时括号前面要不要有空格</span><br><span class="line">  &quot;space-in-parens&quot;: [0, &quot;never&quot;],//小括号里面要不要有空格</span><br><span class="line">  &quot;space-infix-ops&quot;: 0,//中缀操作符周围要不要有空格</span><br><span class="line">  &quot;space-return-throw-case&quot;: 2,//return throw case后面要不要加空格</span><br><span class="line">  &quot;space-unary-ops&quot;: [0, &#123; &quot;words&quot;: true, &quot;nonwords&quot;: false &#125;],//一元运算符的前/后要不要加空格</span><br><span class="line">  &quot;spaced-comment&quot;: 0,//注释风格要不要有空格什么的</span><br><span class="line">  &quot;strict&quot;: 2,//使用严格模式</span><br><span class="line">  &quot;use-isnan&quot;: 2,//禁止比较时使用NaN，只能用isNaN()</span><br><span class="line">  &quot;valid-jsdoc&quot;: 0,//jsdoc规则</span><br><span class="line">  &quot;valid-typeof&quot;: 2,//必须使用合法的typeof的值</span><br><span class="line">  &quot;vars-on-top&quot;: 2,//var必须放在作用域顶部</span><br><span class="line">  &quot;wrap-iife&quot;: [2, &quot;inside&quot;],//立即执行函数表达式的小括号风格</span><br><span class="line">  &quot;wrap-regex&quot;: 0,//正则表达式字面量用小括号包起来</span><br><span class="line">  &quot;yoda&quot;: [2, &quot;never&quot;]//禁止尤达条件</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>eslint</tag>
      </tags>
  </entry>
  <entry>
    <title>网站配置SSL后无法访问解决办法</title>
    <url>/450.html</url>
    <content><![CDATA[<ol>
<li><p>开放 443 端口</p>
</li>
<li><p>域名证书有效且配置正确</p>
</li>
<li><p>ssl配置问题</p>
</li>
</ol>
<p>正确启用HTTP/2支持，正确配置ssl_protocols和ssl_ciphers</p>
<p>启用HTTP2并非只在 listen 443 ssl 配置中加入http2就行了，它主要需要两个地方的设置支持：ssl_protocols 和 ssl_ciphers 。</p>
<p>修改如下配置以向后兼容</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">listen 443 ssl http2;</span><br><span class="line"><span class="deletion">- ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;</span></span><br><span class="line"><span class="addition">+ ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;</span></span><br><span class="line">ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;</span><br></pre></td></tr></table></figure>

<p>在线 http2 检测</p>
<p><a href="https://www.rosehosting.com/network-tools/http2-support.html">https://www.rosehosting.com/network-tools/http2-support.html</a></p>
<p><a href="https://myssl.com/http2_check.html">https://myssl.com/http2_check.html</a></p>
<p><a href="https://www.ssllabs.com/ssltest/analyze.html">https://www.ssllabs.com/ssltest/analyze.html</a></p>
<p><img data-src="/wp-content/uploads/2020/03/HTTP2-test.png"><br><img data-src="/wp-content/uploads/2020/03/HTTP2-test-1.png"></p>
]]></content>
      <categories>
        <category>wordpress</category>
      </categories>
      <tags>
        <tag>wordpress</tag>
        <tag>ssl</tag>
      </tags>
  </entry>
  <entry>
    <title>使用群晖Docker安装Jellyfin家庭影院</title>
    <url>/1365.html</url>
    <content><![CDATA[<blockquote>
<p>plex 和 emby，这两个软件是不错，但是因为收费，不得不放弃之。</p>
</blockquote>
<p>jellyfin开源地址：<a href="https://github.com/jellyfin/jellyfin">https://github.com/jellyfin/jellyfin</a></p>
<h3 id="安装-Docker"><a href="#安装-Docker" class="headerlink" title="安装 Docker"></a>安装 Docker</h3><p>在群辉套件中心搜索 docker 并安装</p>
<h3 id="安装-jellyfin"><a href="#安装-jellyfin" class="headerlink" title="安装 jellyfin"></a>安装 jellyfin</h3><ul>
<li><p>打开 docker，点击注册表，搜索 jellyfin，双击第一个进行安装：如果有提示 请选择标签，直接点 latest 选择就好，点击映像，会看到 jellyfin，等待下载完成</p>
</li>
<li><p>进入群晖的文件管理器里面，在 docker 文件夹内新建一个名字叫 jellyfin 的文件夹</p>
</li>
<li><p>打开控制编办，创建共享文件夹，比如 video，用来保存电影</p>
</li>
<li><p>镜像下载好了后，我们进入到映像里，选择下载的 jellyfin，点启动</p>
</li>
<li><p>点击高级设置，然后点击卷，添加文件夹，将 jellyfin 和 video 文件夹都添加上：将<code>video</code>文件夹装载到 <code>/media</code>下，将<code>docker/jellyfin</code> 装载到 <code>/config</code></p>
</li>
</ul>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102184514.png"></p>
<ul>
<li>点击端口设置，默认是 8096，设置一样的即可</li>
</ul>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102184536.png"></p>
<ul>
<li>设置完成后，点击应用 -&gt; 点下一步 -&gt; 点击应用 -&gt;点击容器，可以看到 jellyfin 服务已经运行成功了！</li>
</ul>
<p>docker 下安装 jellyfin 完成</p>
<h3 id="设置-jellyfin"><a href="#设置-jellyfin" class="headerlink" title="设置 jellyfin"></a>设置 jellyfin</h3><ul>
<li><p>在浏览器中输入这个 nas 的 IP 加上端口号 8096，如<code>IP:8096</code>，就进入到了 jellyfin 设置页面，默认是英文，先设置成中文，点击 Next</p>
</li>
<li><p>然后要求设置一下账号和密码，简单设置一下即可，点击 Next</p>
</li>
<li><p>添加媒体库，暂时先不添加，直接点 Next 跳过</p>
</li>
<li><p>然后选择语言，选择 Chinese，然后下面的国家，选择 people’s Republic of china，点击 Next</p>
</li>
<li><p>默认，点击 Next</p>
</li>
<li><p>点击 Finish</p>
</li>
<li><p>这个时候进入到了登录页面，输入用户密码进入到 jellyfin 里面，因为没有设置媒体库，所以没有内容</p>
</li>
</ul>
<h3 id="设置媒体库"><a href="#设置媒体库" class="headerlink" title="设置媒体库"></a>设置媒体库</h3><ul>
<li><p>点击左上角 -&gt; 控制台 -&gt; 媒体库 -&gt; 添加媒体库</p>
</li>
<li><p>这里有一些分类，比如电影，音乐，电视剧等，会刮削一些媒体对应的内容，这里先选择了电影，将右上角的显示高级设置打开，依次设置名称、文件夹、语言，文件夹选择<code>/media</code> 这个文件夹里面你存放电影的文件夹（这个/media，就是我们之前设置的 video 文件夹）</p>
</li>
<li><p>将媒体图像保存到文件夹打勾，这样会将刮削的封面直接放到你电影的文件夹里</p>
</li>
<li><p>其他默认，点击确定后，就开始自动扫描媒体库了，这个过程，会自动根据电影的文件名在网上进行刮削，制作电影墙</p>
</li>
<li><p>扫描媒体是一个很慢的过程，我们再添加一下电视节目的类型，比如电视剧，连续剧都放到这个目录下，还是老规矩，元数据里的全部打勾，将媒体保存到文件夹里也打勾</p>
</li>
<li><p>到此，基础的 jellyfin 就设置好了，只要返回主页就能看到自己的电影了！</p>
</li>
</ul>
<h3 id="插件设置"><a href="#插件设置" class="headerlink" title="插件设置"></a>插件设置</h3><ul>
<li><p>除了媒体库和转码设置，还有一个字幕插件，有些我们下的国外的电影，是没有字幕的，拥有了这个插件，可以进行自动下载匹配的字幕。点击到插件选项，右边往下移，找到 open subtitles 这个， 点击安装版本进行安装</p>
</li>
<li><p>安装后，提示要重启 jellyfin 服务， 我们进入到 docker 里，将这个容器进行重启，重启后，点到插件，就可以看到这个插件了</p>
</li>
<li><p>进入这个插件，填上账号密码就 ok 了，账号没有的话，点击下面的 register 注册一下</p>
</li>
</ul>
<h3 id="其它设置"><a href="#其它设置" class="headerlink" title="其它设置"></a>其它设置</h3><p>端口设置</p>
<p>多用户，权限控制</p>
<h3 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h3><p>演员照片不显示<br>添加host<br>13.225.69.117 api.themoviedb.org</p>
]]></content>
      <categories>
        <category>NAS</category>
      </categories>
      <tags>
        <tag>jellyfin</tag>
        <tag>docker</tag>
        <tag>群辉</tag>
      </tags>
  </entry>
  <entry>
    <title>群辉 NAS docker 中配置 v2ray 客户端</title>
    <url>/1165.html</url>
    <content><![CDATA[<h2 id="安装docker插件-v2ray-映像"><a href="#安装docker插件-v2ray-映像" class="headerlink" title="安装docker插件 + v2ray 映像"></a>安装docker插件 + v2ray 映像</h2><p><strong>注意：X86 架构的 CPU 支持 docker，ARM 架构的 CPU 不支持 docker</strong></p>
<p>在群辉套件中心搜索 <code>docker</code> 并安装</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102184610.png"></p>
<p>打开 docker，搜索 v2ray，双击下载 <code>v2ray/official</code> 即可</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102200946.png"></p>
<p>选择刚刚下载的映像，点击启动</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102202910.png"></p>
<p>输入容器名称，点击高级设置</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102201229.png"></p>
<p>在高级设置中勾选启用自动重新启动和创建桌面快捷方式</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102201257.png"></p>
<p>在卷中添加文件夹，装载路径为 <code>/etc</code>。需要提前在file station 中创建好 <code>docker/v2ray</code> 文件夹</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102201321.png"></p>
<p>在网络中勾选 使用与 Docker Host 相同的网络</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102201343.png"></p>
<p>其他默认，点击应用</p>
<p>点击下一步</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102201404.png"></p>
<p>将 <code>向导完成后运行此容器</code> 取消选中（因为还没有配置文件）。点击应用</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102201429.png"></p>
<h2 id="v2ray-客户端配置文件"><a href="#v2ray-客户端配置文件" class="headerlink" title="v2ray 客户端配置文件"></a>v2ray 客户端配置文件</h2><p>可以用gui客户端中配置好服务器，直接导出客户端配置文件为 <code>config.json</code>，我使用的是 v2rayN</p>
<p>编辑 config.json， 修改 listen 为 0.0.0.0, protocol 为 <code>http</code>，port 随意，也可以不改</p>
<p>在 v2rayN 程序文件夹中 找到 geoip.dat geosite.dat 文件</p>
<p>在刚刚创建的 <code>docker/v2ray</code>文件夹中在创建一个 v2ray 文件夹，将 config.json geoip.dat geosite.dat 三个文件放进去</p>
<p>我的部分 <code>config.json</code> 配置</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;inbounds&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;tag&quot;: &quot;proxy&quot;,</span><br><span class="line">      &quot;port&quot;: 10808,</span><br><span class="line">      &quot;listen&quot;: &quot;0.0.0.0&quot;,</span><br><span class="line">      &quot;protocol&quot;: &quot;http&quot;,</span><br><span class="line">      &quot;sniffing&quot;: &#123;</span><br><span class="line">        &quot;enabled&quot;: true,</span><br><span class="line">        &quot;destOverride&quot;: [</span><br><span class="line">          &quot;http&quot;,</span><br><span class="line">          &quot;tls&quot;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;settings&quot;: &#123;</span><br><span class="line">        &quot;auth&quot;: &quot;noauth&quot;,</span><br><span class="line">        &quot;udp&quot;: true,</span><br><span class="line">        &quot;ip&quot;: null,</span><br><span class="line">        &quot;address&quot;: null,</span><br><span class="line">        &quot;clients&quot;: null</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;streamSettings&quot;: null</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后启动刚刚创建好的 docker 即可</p>
<h3 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h3><p>到这了只是在群辉中安装了 v2ray 客户端，并配置了服务器，还需要手动连接代理，在群辉中，你需要在 控制面板-网络-常规-代理服务器 中添加代理</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102201501.png"></p>
<p>如果你的其他设备想要连接也需要相同的方式手动配置代理</p>
<p>在 win10 设置中，如下图所示位置，代理方式只支持 http 代理（这就是为什么上步中要把protocol改为http）地址为你群规的ip，端口就是上步中设置的端口，配置完之后保存即可</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102201524.png"></p>
<p>手机中同理，在无线中配置代理</p>
<p>如果你想实现只需连接家里无线就可以直接实现科学上网，你需要在路由器中做一些配置，可以参考下文【待整理】</p>
]]></content>
      <categories>
        <category>NAS</category>
      </categories>
  </entry>
  <entry>
    <title>苹果应用共享</title>
    <url>/1334.html</url>
    <content><![CDATA[<h4 id="胖森微信公众号-（共享-AppleId（免费））"><a href="#胖森微信公众号-（共享-AppleId（免费））" class="headerlink" title="胖森微信公众号 （共享 AppleId（免费））"></a>胖森微信公众号 （共享 AppleId（免费））</h4><p>Procreate<br>GoodNotes5<br>P 站助手<br>Shu<br>Quantumult<br>Quantumult X<br>Shadowrocket</p>
<h4 id="aneeo-com-（AppleId）"><a href="#aneeo-com-（AppleId）" class="headerlink" title="aneeo.com （AppleId）"></a>aneeo.com （AppleId）</h4><p>旧版应用<br>AppleId 租用（收费）<br>应用代购</p>
<h4 id="app-ignition-fun-打火机，广告太多不推荐-（在线安装）"><a href="#app-ignition-fun-打火机，广告太多不推荐-（在线安装）" class="headerlink" title="app.ignition.fun 打火机，广告太多不推荐 （在线安装）"></a>app.ignition.fun 打火机，广告太多不推荐 （在线安装）</h4><p>越狱应用</p>
<h4 id="野心玩家-app-ambier-cn-（在线安装）"><a href="#野心玩家-app-ambier-cn-（在线安装）" class="headerlink" title="野心玩家 app.ambier.cn （在线安装）"></a>野心玩家 app.ambier.cn （在线安装）</h4><p>越狱应用 Uncover checkra1n<br>福利应用</p>
<h4 id="bc-工具-id-cydias-top-（在线安装）"><a href="#bc-工具-id-cydias-top-（在线安装）" class="headerlink" title="bc 工具 id.cydias.top （在线安装）"></a>bc 工具 id.cydias.top （在线安装）</h4><p>越狱应用 Uncover checkra1n</p>
<h4 id="有趣工具箱微信小程序-（在线安装）"><a href="#有趣工具箱微信小程序-（在线安装）" class="headerlink" title="有趣工具箱微信小程序 （在线安装）"></a>有趣工具箱微信小程序 （在线安装）</h4><p>越狱应用</p>
<h4 id="宅哥玩机-（在线安装）"><a href="#宅哥玩机-（在线安装）" class="headerlink" title="宅哥玩机 （在线安装）"></a>宅哥玩机 （在线安装）</h4><p>越狱应用<br>福利应用</p>
]]></content>
      <categories>
        <category>软件</category>
      </categories>
  </entry>
  <entry>
    <title>苹果手机越狱相关资源</title>
    <url>/2022.html</url>
    <content><![CDATA[<h3 id="越狱工具"><a href="#越狱工具" class="headerlink" title="越狱工具"></a>越狱工具</h3><p><a href="https://checkra.in/">checkra1n</a>  iPhone 5s -iPhone X, iOS 12.0 and up<br><a href="https://unc0ver.dev/">unc0ver</a>  iOS 11.0 - 13.5</p>
<h3 id="软件源"><a href="#软件源" class="headerlink" title="软件源"></a>软件源</h3><p>Ai-小苹果：<a href="http://apt.cydiabc.top/">http://apt.cydiabc.top</a><br>雷锋源：<a href="http://apt.abcydia.com/">http://apt.abcydia.com</a><br>reprovision 作者源：<a href="https://repo.incendo.ws/">https://repo.incendo.ws</a><br>Flex3官方源：<a href="http://getdelta.co/">http://getdelta.co</a><br>Filza官方源：<a href="http://tigisoftware.com/cydia">http://tigisoftware.com/cydia</a><br>AudioRecorder XS 通话录音官方源：<a href="http://limneos.net/repo">http://limneos.net/repo</a><br>Liberty Lire官方屏蔽越狱源：<a href="http://ryleyangus.com/repo">http://ryleyangus.com/repo</a><br>多⽶米诺⻣骨牌：<a href="http://apt.wxhbts.com/">http://apt.wxhbts.com</a><br>Appsync官方源：<a href="https://cydia.akemi.ai/">https://cydia.akemi.ai</a><br>snowboard官⽅方源：<a href="http://sparkdev.me/">http://sparkdev.me</a><br>贴吧源：<a href="https://apt.cydiaba.cn/">https://apt.cydiaba.cn</a><br>App Admin官⽅方源：<a href="http://beta.unlimapps.com/">http://beta.unlimapps.com</a></p>
]]></content>
      <tags>
        <tag>越狱</tag>
      </tags>
  </entry>
  <entry>
    <title>解决VPS通过SS访问谷歌学术受限</title>
    <url>/222.html</url>
    <content><![CDATA[<p>在网上搜索后发现有可能有以下原因：</p>
<p>1.你的 VPS 被人用来做爬虫爬 Google，IP 被封</p>
<p>2.你的 IPv4 网段有人做爬虫，网段被封</p>
<p>3.你的 IPv6 网段有人做爬虫，网段被封</p>
<p>IPv6 网段被封</p>
<p>强制你的 VPS 用 IPv4 来访问，具体方法在 <code>/etc/sysctl.conf</code> 后追加</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># disable ipv6</span><br><span class="line">net.ipv6.conf.all.disable_ipv6&#x3D;1</span><br><span class="line">net.ipv6.conf.default.disable_ipv6&#x3D;1</span><br><span class="line">net.ipv6.conf.lo.disable_ipv6&#x3D;1</span><br></pre></td></tr></table></figure>

<p>IPv4 网段被封</p>
<p>强制 VPS 使用 IPv6 访问，确认打开 VPS 上的 IPv6 功能，更改 VPS 的 hosts 中指定 Google Schoolar 的 IPv6 地址，编辑<code>/etc/hosts</code>后追加：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">## Scholar</span><br><span class="line">## type &#39;host google.com&#39; to get the correct ipv6 address or</span><br><span class="line">## visit https:&#x2F;&#x2F;github.com&#x2F;lennylxx&#x2F;ipv6-hosts</span><br><span class="line">2404:6800:4004:81a::200e scholar.google.cn</span><br><span class="line">2404:6800:4004:81a::200e scholar.google.com.hk</span><br><span class="line">2404:6800:4004:81a::200e scholar.google.com</span><br><span class="line">2404:6800:4004:81a::200e scholar.l.google.com</span><br></pre></td></tr></table></figure>

<p>更改配置后，重启 SS</p>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>ss</tag>
      </tags>
  </entry>
  <entry>
    <title>解锁网易云音乐客户端变灰歌曲</title>
    <url>/1339.html</url>
    <content><![CDATA[<p>项目地址：<a href="https://github.com/nondanee/UnblockNeteaseMusic">https://github.com/nondanee/UnblockNeteaseMusic</a><br>食用指南：<a href="https://github.com/nondanee/UnblockNeteaseMusic/issues/22">https://github.com/nondanee/UnblockNeteaseMusic/issues/22</a></p>
<p>特性：</p>
<ul>
<li>使用 QQ / 虾米 / 百度 / 酷狗 / 酷我 / 咪咕 / JOOX 音源替换变灰歌曲链接 (默认仅启用一、五、六)</li>
<li>为请求增加 X-Real-IP 参数解锁海外限制，支持指定网易云服务器 IP，支持设置上游 HTTP / HTTPS 代理</li>
<li>完整的流量代理功能 (HTTP / HTTPS)，可直接作为系统代理 (同时支持 PAC)</li>
</ul>
<h3 id="在-windows-本地使用"><a href="#在-windows-本地使用" class="headerlink" title="在 windows 本地使用"></a>在 windows 本地使用</h3><h4 id="安装-node-js"><a href="#安装-node-js" class="headerlink" title="安装 node.js"></a>安装 node.js</h4><p>去 node.js 官网下载安装即可</p>
<h4 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/nondanee/UnblockNeteaseMusic.git <span class="comment">#克隆项目仓库</span></span><br><span class="line"><span class="built_in">cd</span> UnblockNeteaseMusic</span><br><span class="line">node app.js</span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npx @nondanee/unblockneteasemusic</span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ npm install -g @nondanee&#x2F;unblockneteasemusic</span><br><span class="line">$ unblockneteasemusic</span><br></pre></td></tr></table></figure>

<h3 id="网易云客户端连接使用"><a href="#网易云客户端连接使用" class="headerlink" title="网易云客户端连接使用"></a>网易云客户端连接使用</h3><p>在网易云客户端内设置代理：<br>右上角设置 &gt; 自定义代理 &gt; 地址 127.0.0.1 端口 8080<br>确定重启客户端后，即可开始使用</p>
<p>PAC 自动代理脚本地址 <code>http://127.0.0.1:8080/proxy.pac</code></p>
<p>以上是在本地 window 上使用的方法，如果想给手机稳定使用，可以参考如下方式</p>
<h3 id="全端解决方案"><a href="#全端解决方案" class="headerlink" title="全端解决方案"></a>全端解决方案</h3><p>需要一台服务器</p>
<h4 id="安卓等其它设备"><a href="#安卓等其它设备" class="headerlink" title="安卓等其它设备"></a>安卓等其它设备</h4><p>安装 pm2</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm -g install pm2</span><br></pre></td></tr></table></figure>

<p>pm2 部署：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pm2 start app.js --name UnblockNeteaseMusic -- -s -p 8080</span><br></pre></td></tr></table></figure>

<h4 id="ios-设备"><a href="#ios-设备" class="headerlink" title="ios 设备"></a>ios 设备</h4><p>ios 配置经验分享：<a href="https://github.com/nondanee/UnblockNeteaseMusic/issues/368">https://github.com/nondanee/UnblockNeteaseMusic/issues/368</a></p>
<p>ios 需要一个域名，并配置反代</p>
<p>nginx 配置：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">	  listen 443 ssl http2;</span><br><span class="line">	  server_name your_domain; # 改为你自己的域名</span><br><span class="line">	  ssl_certificate 1_your_domain_bundle.crt; # 改为自己申请得到的 crt 文件的名称</span><br><span class="line">	  ssl_certificate_key 2_your_domain.key; # 改为自己申请得到的 key 文件的名称</span><br><span class="line">	  ssl_session_timeout 5m;</span><br><span class="line">	  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">	  ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;</span><br><span class="line">	  ssl_prefer_server_ciphers on;</span><br><span class="line"></span><br><span class="line">	  location &#x2F; &#123;</span><br><span class="line">	    proxy_pass http:&#x2F;&#x2F;localhost:8080; # 代理到 Unblock 服务地址</span><br><span class="line">	  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>pm2 部署：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pm2 start app.js --name UnblockNeteaseMusic -- -s -p 8080 -e https://unblockneteasemusic.ayyy.club</span><br></pre></td></tr></table></figure>

<p>iOS 搭配 Shadowrocket 连接代理</p>
<p>Shadowrocket 右上角加号添加节点 -&gt; 类型选择 HTTP -&gt; 服务器填写你的服务器公网 IP -&gt; 端口填写你启动服务的端口号（默认为 8080） -&gt; 点击配置 -&gt; 点击本地文件 -&gt; default.conf -&gt; 编辑配置</p>
<p>添加三条规则 选项选择你刚刚添加的节点</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">USER-AGENT: NeteaseMusic*</span><br><span class="line">DOMAIN-SUFFIX: 163.com</span><br><span class="line">DOMAIN-SUFFIX: 126.net</span><br></pre></td></tr></table></figure>

<h3 id="pm2-常用命令"><a href="#pm2-常用命令" class="headerlink" title="pm2 常用命令"></a>pm2 常用命令</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pm2 stop UnblockNeteaseMusic <span class="comment"># 停止服务</span></span><br><span class="line">pm2 restart UnblockNeteaseMusic <span class="comment"># 重启服务</span></span><br><span class="line">pm2 pull UnblockNeteaseMusic <span class="comment"># 更新服务到最新代码</span></span><br><span class="line">pm2 show UnblockNeteaseMusic <span class="comment"># 查看服务的参数信息</span></span><br><span class="line">pm2 <span class="built_in">log</span> UnblockNeteaseMusic <span class="comment"># 查看服务日志</span></span><br><span class="line">pm2 ls <span class="comment"># 查看已部署的服务列表</span></span><br><span class="line">pm2 monit <span class="comment"># 监控服务状态</span></span><br><span class="line">pm2 flush <span class="comment"># 清理所有日志文件</span></span><br><span class="line">pm2 update <span class="comment"># 更新 pm2 状态</span></span><br></pre></td></tr></table></figure>

<h3 id="一键打卡刷满-300-听歌量"><a href="#一键打卡刷满-300-听歌量" class="headerlink" title="一键打卡刷满 300 听歌量"></a>一键打卡刷满 300 听歌量</h3><p><a href="https://today.nange.cn/">https://today.nange.cn/</a></p>
<div style="display: none;">
使用方法参考

<p><a href="https://www.nange.cn/unlock-netease-music.html">https://www.nange.cn/unlock-netease-music.html</a></p>
</div>
</div>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>网易云音乐</tag>
      </tags>
  </entry>
  <entry>
    <title>谷歌团队盘使用相关教程合集</title>
    <url>/1944.html</url>
    <content><![CDATA[<h2 id="获取谷歌团队盘"><a href="#获取谷歌团队盘" class="headerlink" title="获取谷歌团队盘"></a>获取谷歌团队盘</h2><p>免费团队盘：<a href="https://wqdy.top/1207.html">https://wqdy.top/1207.html</a></p>
<p>GSuite 教育子号购买：<a href="https://ip.ci/product/5.html">https://ip.ci/product/5.html</a></p>
<h2 id="资源转存"><a href="#资源转存" class="headerlink" title="资源转存"></a>资源转存</h2><h3 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h3><p><a href="https://github.com/rclone/rclone">rclone</a></p>
<p><a href="https://github.com/kapitainsky/RcloneBrowser/releases/">rclone 客户端</a></p>
<p><a href="https://github.com/donwa/gclone">gclone</a> 为 Google Drive 操作增加自动切换账户和命令行根目录 id 操作支持</p>
<p><a href="https://github.com/xyou365/AutoRclone">AutoRclone</a> 解决每日 750G 限制</p>
<p><a href="https://github.com/iwestlin/gd-utils">gd-utils Google Drive 百宝箱</a> 支持统计、去重、telegram bot</p>
<p><a href="https://github.com/fxxkrlab/iCopy">iCopy</a></p>
<p><a href="https://github.com/baranwang/icopy-docker">iCopy Docker 一键启动版</a></p>
<p><a href="https://github.com/botgram/shell-bot">shell-bot</a></p>
<p><a href="https://github.com/cgkings/gclone-assistant">gclone 实用脚本合集</a> 转存 自动分类整理 清空回收站 备份同步</p>
<h3 id="搭建教程"><a href="#搭建教程" class="headerlink" title="搭建教程"></a>搭建教程</h3><p><a href="https://wqdy.top/1472.html">AutoRclone 配合 Gclone 在 Google Drive 账号之间、谷歌团队盘之间快速拷贝、传输学习资料</a></p>
<p><a href="https://blog.csdn.net/wojuzi/article/details/107444216">iCopy 和 fclone 和 TG-bot 构建 gd 转存保姆教程</a></p>
<p><a href="https://www.locmjj.com/366.html">使用 VPS 搭建 fclone_shell_bot 文章转存 Telegram 机器人教程</a></p>
<p><a href="https://blog.000714.xyz/202007/1419.html">第四代谷歌网盘 Clone 术：Fclone</a></p>
<p><a href="https://github.com/cgkings/fclone_shell_bot">FClone 机器人及安装过程</a></p>
<p><a href="https://www.yburger.net/skill/icopy.html">iCopy——让Google Drive文件转存更加简单</a></p>
<h2 id="文件解压"><a href="#文件解压" class="headerlink" title="文件解压"></a>文件解压</h2><p><code>unzip -O GBK -P $(echo -n 密码 | iconv -f utf-8 -t gbk) file.zip</code></p>
<p>解压中文编码文件<br><code>unar -e GBK /gdrive/disk/zidian2/77个WPA密码字典包/\’’*.rar’’</code></p>
<h2 id="在线挂载-GD-网盘"><a href="#在线挂载-GD-网盘" class="headerlink" title="在线挂载 GD 网盘"></a>在线挂载 GD 网盘</h2><p><code>https://github.com/reruin/sharelist</code></p>
<p><code>https://github.com/maple3142/GDIndex</code></p>
<p><code>https://github.com/Aicirou/goindex-theme-acrou</code> 界面不错、多盘、搜索</p>
<p><code>https://github.com/alx-xlx/goindex</code></p>
<p><code>https://github.com/LeeluPradhan/G-Index</code></p>
<p><code>https://github.com/yanzai/goindex</code></p>
<h2 id="资源群组"><a href="#资源群组" class="headerlink" title="资源群组"></a>资源群组</h2><p><a href="https://groups.google.com/forum/#!forum/mailacid">https://groups.google.com/forum/#!forum/mailacid</a> 印尼群组</p>
<p><a href="https://groups.google.com/forum/#!forum/tlob_share">https://groups.google.com/forum/#!forum/tlob_share</a> TLOB 图库群组</p>
<p><a href="https://t.me/newPan">https://t.me/newPan</a> 150T 已整理刮削的小姐姐团队盘</p>
<p><a href="https://t.me/gdurl">https://t.me/gdurl</a> 各种 Google Drive 资源，包括大电影，小电影，电子书，无损音乐等</p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>Linux 测试网速 <a href="https://github.com/chiakge/Linux-NetSpeed">https://github.com/chiakge/Linux-NetSpeed</a></p>
<p>清空及删除团队回收站垃圾箱文件 <code>rclone delete xxx: --drive-trashed-only --drive-use-trash=false --verbose=3 --fast-list</code></p>
<p>在线 查看文件数：<a href="https://gdurl.viegg.com/api/gdrive/count?fid=1lDa7gqv8e6xGKJdmkk-bV0kt2w_07A5r">https://gdurl.viegg.com/api/gdrive/count?fid=1lDa7gqv8e6xGKJdmkk-bV0kt2w_07A5r</a></p>
<p>Colaboratory 脚本运行： <a href="https://colab.research.google.com/">https://colab.research.google.com/</a></p>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>Google Drive</tag>
      </tags>
  </entry>
  <entry>
    <title>谷歌账号无法注册解决方式</title>
    <url>/206.html</url>
    <content><![CDATA[<h4 id="无法注册原因"><a href="#无法注册原因" class="headerlink" title="无法注册原因"></a>无法注册原因</h4><ul>
<li>此电话号码无法用于进行验证</li>
</ul>
<h4 id="解决思路"><a href="#解决思路" class="headerlink" title="解决思路"></a>解决思路</h4><ul>
<li><p>通过其他页面或方式进入谷歌注册入口，如通过 Google Voice 或 Google Analysis 等进入</p>
</li>
<li><p>用安卓手机自带的电子邮件客户端申请</p>
</li>
<li><p>在选择邮箱时，切换 “改用我目前的邮件地址” 为 “注册新的 Gmail 邮箱”</p>
</li>
<li><p>选择适当的语言以及模式（页面左下角语言设置）</p>
</li>
<li><p>Chrome 语言设置为 English-United States</p>
</li>
</ul>
<h4 id="成功案例"><a href="#成功案例" class="headerlink" title="成功案例"></a>成功案例</h4><ul>
<li><p>2019/08/06 小米手机-使用自带的电子邮件客户端-用国内手机号-QQ 邮箱-注册成功</p>
</li>
<li><p>2020/01/05 小米手机-使用自带的电子邮件客户端-用国内手机号-注册新的 Gmail 邮箱-注册成功</p>
</li>
<li><p>2020/01/19 苹果手机-使用自带的邮件客户端-国内手机号-注册新的 Gmail 邮箱-注册成功</p>
</li>
<li><p>2020/12/29 苹果手机-使用自带的邮件客户端-国内手机号(已被使用过)-注册新的 Gmail 邮箱-注册成功</p>
</li>
</ul>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>google</tag>
      </tags>
  </entry>
  <entry>
    <title>使用 axios 导致 cookie 丢失问题</title>
    <url>/402.html</url>
    <content><![CDATA[<p>问题：使用 axios 发送请求会拦截响应头中的 set-cookie，导致 cookie 丢失</p>
<p><a href="https://github.com/axios/axios/issues/953">https://github.com/axios/axios/issues/953</a></p>
<p>在控制台中也找不到 cookie</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(res.headers[<span class="string">&#x27;set-cookie&#x27;</span>]) <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.cookie) <span class="comment">// &#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>解决方式：修改 axios 配置</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">axios.defaults.withCredentials = <span class="literal">true</span> <span class="comment">// 默认是 false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Axios.interceptors.request.use(</span></span><br><span class="line"><span class="comment">//   config =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     config.withCredentials = true // 添加</span></span><br><span class="line"><span class="comment">//     return config</span></span><br><span class="line"><span class="comment">//   &#125;)</span></span><br><span class="line"></span><br><span class="line">axios.create(&#123;</span><br><span class="line">  withCredentials: <span class="literal">true</span> <span class="comment">// 表示跨域请求时是否需要使用凭证 默认 false</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>设置 <code>withCredentials = true</code> 会造成跨域，需要使用代理解决跨域问题</p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>axios</tag>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>axios 取消请求</title>
    <url>/430.html</url>
    <content><![CDATA[<p>原生 js abort() 方法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> A = $.ajax(&#123;&#125;)</span><br><span class="line">A.abort()</span><br></pre></td></tr></table></figure>

<p>Axios 提供了一个 CancelToken 的函数，这是一个构造函数，该函数的作用就是用来取消接口请求的</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  getMsg () &#123;</span><br><span class="line">    <span class="keyword">let</span> CancelToken = axios.CancelToken</span><br><span class="line">    <span class="keyword">let</span> that = <span class="built_in">this</span></span><br><span class="line">    axios.get(<span class="string">&#x27;&#x27;</span>, &#123;</span><br><span class="line">      cancelToken: <span class="keyword">new</span> CancelToken(<span class="function"><span class="keyword">function</span> <span class="title">executor</span>(<span class="params">c</span>) </span>&#123;</span><br><span class="line">        that.cancel = c</span><br><span class="line">        <span class="built_in">console</span>.log(c)</span><br><span class="line">        <span class="comment">// 这个参数 c 就是 CancelToken 构造函数里面自带的取消请求的函数，这里把该函数当参数用</span></span><br><span class="line">      &#125;)</span><br><span class="line">      params: &#123;&#125;</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.items = res.data</span><br><span class="line">    &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  cancelGetMsg () &#123;</span><br><span class="line">    <span class="built_in">this</span>.cancel()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>axios</tag>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>bootstrap 框架</title>
    <url>/390.html</url>
    <content><![CDATA[<p>Bootstrap，来自 Twitter，是目前最受欢迎的前端框架。Bootstrap 是基于 HTML、CSS、JAVASCRIPT 的，它简洁灵活，使得 Web 开发更加快捷</p>
<p><a href="http://www.bootcss.com/">bootstrap 中文网</a></p>
<p>特点：</p>
<ul>
<li>组件简洁大方、代码规范精简、界面自定义性强</li>
<li>Bootstrap 是基于 HTML5 和 CSS3 开发的，它在 jQuery 的基础上进行了更为个性化和人性化的完善，形成一套自己独有的网站风格，并兼容大部分 jQuery 插件</li>
<li>Bootstrap 中包含了丰富的 Web 组件，根据这些组件，可以快速的搭建一个漂亮、功能完备的网站</li>
</ul>
<p>优点：</p>
<ul>
<li>有自己的生态圈，不断的更新迭代</li>
<li>提供了一套简洁、直观、强悍的组件</li>
<li>标准化的 HTML+CSS 编码规范</li>
<li>让开发更简单，提高了开发效率</li>
<li>扩展性强，虽然界面组件样式已经定义好了，我们还可以自定义，修改默认样式</li>
</ul>
<p>版本：</p>
<ul>
<li>2.x.x 停止维护<ul>
<li>优点：兼容性好 IE678</li>
<li>缺点：代码不够简洁、功能不够完善</li>
</ul>
</li>
<li>3.x.x <strong>目前使用最多（H5C3 很多东西）</strong><ul>
<li>优点：稳定，偏向于开发响应式布局，移动设备优先的 WEB 项目</li>
<li>缺点：放弃了 IE67，对 IE8 支持但是界面效果不友好</li>
</ul>
</li>
<li>4.x.x 测试阶段</li>
</ul>
<h2 id="基本模板"><a href="#基本模板" class="headerlink" title="基本模板"></a>基本模板</h2><p>!&gt; 但凡看到 <code>role属性</code> <code>aria-*的属性</code> <code>class=&#39;sr-only&#39;的标签</code> 都可以直接删除，因为是给屏幕阅读器用的</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>bootstrap基本模板<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 引入 bootstrap 的核心样式文件 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;lib/bootstrap/css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- html5shiv 是用来解决 IE8 以下浏览器不支持 HTML5 语义化标签的问题 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- respond 是用来解决 IE8 以下浏览器不支持媒体查询的问题，注意：respond 不支持 file 协议打开 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 条件注释：IE浏览器专属 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--[if lt IE 9]&gt;</span></span><br><span class="line"><span class="comment">    &lt;script src=&quot;html5shiv.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">    &lt;script src=&quot;respond.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">  &lt;![endif]--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>你好，世界！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- bootstrap 依赖于 jquery，因此需要在 bootstrap 之前引入jquery文件 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;lib/jquery/jquery-1.12.4.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 引入 bootstrap 的核心js文件 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;lib/bootstrap/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="全局样式"><a href="#全局样式" class="headerlink" title="全局样式"></a>全局样式</h2><h3 id="normalize-css"><a href="#normalize-css" class="headerlink" title="normalize.css"></a>normalize.css</h3><p>Normalize.css 是一种 CSS reset 的替代方案。经过@necolas 和@jon_neal 花了几百个小时来努力研究不同浏览器的默认样式的差异，这个项目终于变成了现在这样</p>
<p><a href="http://necolas.github.io/normalize.css/">官网</a> <a href="https://github.com/necolas/normalize.css">github 网址</a></p>
<p>normalize 的特点：</p>
<ul>
<li><strong>保护有用的浏览器默认样式</strong>而不是完全去掉它们</li>
<li><strong>一般化的样式</strong>：为大部分 HTML 元素提供</li>
<li><strong>修复浏览器自身的 bug</strong>并保证各浏览器的一致性</li>
<li><strong>优化 CSS 可用性</strong>：用一些小技巧</li>
</ul>
<p><code>Normalize.css</code> 支持包括手机浏览器在内的超多浏览器，同时对 HTML5 元素、排版、列表、嵌入的内容、表单和表格都进行了一般化。尽管这个项目基于一般化的原则，但我们还是在合适的地方使用了更实用的默认值。</p>
<p><a href="http://www.cnblogs.com/webpush/p/4974063.html">Normalize.css 与 CSS reset 区别</a></p>
<h3 id="布局容器"><a href="#布局容器" class="headerlink" title="布局容器"></a>布局容器</h3><p>Bootstrap 需要为页面内容和栅格系统包裹一个 .container 容器。默认带了 15px 的 padding 值</p>
<p><code>.container</code> 类用于固定宽度并支持响应式布局的容器</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>.container-fluid</code> 类用于 100% 宽度，占据全部视口（viewport）的容器</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container-fluid&quot;</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这两种容器类不能互相嵌套</p>
<h3 id="栅格系统"><a href="#栅格系统" class="headerlink" title="栅格系统"></a>栅格系统</h3><p>栅格系统，也叫网格系统，bootstrap 栅格系统把一个盒子分成 12 格</p>
<ul>
<li><p>栅格参数：<code>col-xx-yy</code></p>
<p>xx：<code>lg</code> 大屏(≥1200px)、<code>md</code> 中屏(≥992px)、<code>sm</code> 小屏(≥768px)、<code>xs</code> 超小屏(&lt;768px)</p>
<p>yy：取值范围为 1 - 12 表示占几格</p>
<p><code>col-xx-12</code>：可以省略不写</p>
</li>
<li><p>列偏移：<code>col-xx-offset-yy</code></p>
<p>xx ：lg、md、sm、xs</p>
<p>yy：取值范围为 1 - 12 表示往右偏移几格</p>
<p>列偏移：实际上是给当前元素增加了左侧的边距（margin）</p>
</li>
<li><p>多余列（column）的元素将作为一个整体单元被另起一行排列</p>
</li>
<li><p><code>.row</code>用于抵消 <code>.container</code>容器的 15px 的 padding 值，实际上是给元素添加了 margin: -15px</p>
</li>
<li><p>可以在<code>.row</code>中嵌套<code>column</code></p>
</li>
<li><p>列排序：<code>.col-md-push-*</code> 和 <code>.col-md-pull-*</code></p>
</li>
</ul>
<p>栅格系统常用类（总共 12 列）</p>
<table>
<thead>
<tr>
<th>类名</th>
<th>例子</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>.col-xs-xx</td>
<td>.col-xs-6</td>
<td>在超小屏幕（及以上）生效</td>
</tr>
<tr>
<td>.col-sm-xx</td>
<td>.col-sm-6</td>
<td>在小屏幕（及以上）生效</td>
</tr>
<tr>
<td>.col-md-xx</td>
<td>.col-md-6</td>
<td>在中屏幕（及以上）生效</td>
</tr>
<tr>
<td>.col-lg-xx</td>
<td>.col-lg-3</td>
<td>在大屏幕及生效，占 1/4</td>
</tr>
<tr>
<td>.col-lg-xx</td>
<td>.col-lg-4</td>
<td>在大屏幕及生效，占 1/3</td>
</tr>
<tr>
<td>.col-lg-xx</td>
<td>.col-lg-5</td>
<td>在大屏幕及生效，占 1/2</td>
</tr>
</tbody></table>
<p>【案例：列嵌套.html】</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-4&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 栅格系统无处不在，只要父盒子有宽度，就可以使用栅格系统 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-6&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-6&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>【案例：列偏移.html】</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用 .col-md-offset-* 类可以将列向右侧偏移--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- col-lg-offset-3:在大屏下，这个div将向右侧偏移3个单位 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-6 col-lg-offset-3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="排版"><a href="#排版" class="headerlink" title="排版"></a>排版</h3><p>标题：h1 到 h6 标签、<code>.h1</code> 到 <code>.h6</code> 类、 <code>&lt;small&gt;</code> 标签或 <code>.small</code> 类用来标记副标题</p>
<p>文本：<code>&lt;mark&gt;</code>标记、<code>&lt;del&gt;</code>删除、<code>&lt;s&gt;</code>无用文本、<code>&lt;ins&gt;</code>插入文本、<code>&lt;u&gt;</code>下划线文本、 <code>.small</code> 类或<code>&lt;small&gt;</code> 小号文本、<code>&lt;strong&gt;</code>着重</p>
<p>对齐：<code>text-left</code>、<code>text-center</code>、<code>text-right</code>、<code>text-justify</code>、<code>text-nowrap</code></p>
<h3 id="按钮"><a href="#按钮" class="headerlink" title="按钮"></a>按钮</h3><p><code>&lt;a&gt;</code>、<code>&lt;button&gt;</code> 或 <code>&lt;input&gt;</code></p>
<p>预定义样式：btn、btn-default、btn-primary(蓝)、btn-success(绿)、btn-info(浅蓝)、btn-warning(橙)、btn-danger(红)、btn-link(链接)</p>
<p>尺寸：btn-lg(大)、(默认)、btn-sm(小)、btn-xs(超小)<br>btn-block (块元素 100%宽度)</p>
<p>激活状态：active</p>
<p>禁用状态：button 元素 添加 <code>disabled</code> 属性、链接<code>&lt;a&gt;</code>元素添加 <code>.disabled</code> 类（建议通过 JavaScript 代码来禁止链接的原始功能）</p>
<h3 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h3><p>响应式图片：<code>img-responsive</code></p>
<p>实质是为图片设置了 max-width: 100%;、 height: auto; 和 display: block; 属性</p>
<p>图片形状：<code>img-rounded</code>、<code>img-circle</code>、<code>img-thumbnail</code></p>
<h3 id="辅助类"><a href="#辅助类" class="headerlink" title="辅助类"></a>辅助类</h3><p>文本颜色：<code>text-muted</code>、<code>text-muted</code>、<code>text-primary</code>、<code>text-success</code>、<code>text-info</code>、<code>text-warning</code>、<code>text-danger</code></p>
<p>背景颜色：<code>bg-primary</code>、<code>bg-success</code>、<code>bg-info</code>、<code>bg-warning</code>、<code>bg-danger</code></p>
<p>关闭按钮：<code>&lt;button type=&quot;button&quot; class=&quot;close&quot;&gt;&lt;span&gt;&amp;times;&lt;/span&gt;&lt;/button&gt;</code></p>
<p>三角符号：<code>&lt;span class=&quot;caret&quot;&gt;&lt;/span&gt;</code></p>
<p>快速浮动：<code>pull-left</code>、<code>pull-right</code></p>
<p>让内容块居中：<code>&lt;div class=&quot;center-block&quot;&gt;...&lt;/div&gt;</code></p>
<p>清除浮动：<code>clearfix</code></p>
<p>显示隐藏内容：<code>show</code>、<code>hidden</code>、<code>invisible</code></p>
<h3 id="响应式工具"><a href="#响应式工具" class="headerlink" title="响应式工具"></a>响应式工具</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">	            超小屏 小屏幕 中等屏幕 大屏幕桌面</span><br><span class="line">.visible-xs-*	可见   隐藏   隐藏	  隐藏</span><br><span class="line">.visible-sm-*	隐藏   可见   隐藏	  隐藏</span><br><span class="line">.visible-md-*	隐藏   隐藏   可见	  隐藏</span><br><span class="line">.visible-lg-*	隐藏   隐藏   隐藏	  可见</span><br><span class="line"></span><br><span class="line">.hidden-xs	  隐藏	 可见	  可见	  可见</span><br><span class="line">.hidden-sm	  可见	 隐藏	  可见	  可见</span><br><span class="line">.hidden-md	  可见	 可见	  隐藏	  可见</span><br><span class="line">.hidden-lg    可见	 可见	  可见	  隐藏</span><br></pre></td></tr></table></figure>

<p><code>*</code> -&gt; block inline inline-block</p>
<p>推荐使用 hidden 相关的属性</p>
<h2 id="bootstrap-validator-插件"><a href="#bootstrap-validator-插件" class="headerlink" title="bootstrap-validator 插件"></a>bootstrap-validator 插件</h2><p>基于 bootstrap 的前端校验插件</p>
<p><a href="http://bootstrapvalidator.votintsev.ru/api">http://bootstrapvalidator.votintsev.ru/api</a></p>
<h3 id="引包"><a href="#引包" class="headerlink" title="引包"></a>引包</h3><p>引入 css 文件</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;lib/bootstrap/css/bootstrap.css&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;lib/bootstrap-validator/css/bootstrapValidator.css&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>引入 js 文件</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;lib/jquery/jquery.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;lib/bootstrap/js/bootstrap.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;lib/bootstrap-validator/js/bootstrapValidator.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="初始化表单校验插件"><a href="#初始化表单校验插件" class="headerlink" title="初始化表单校验插件"></a>初始化表单校验插件</h3><p>bootstrap-validator 插件会在表单提交的时候进行校验，如果校验成功了，表单会继续提交，但是如果校验失败了，就会阻止表单的提交</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用表单校验插件</span></span><br><span class="line">$(formSelector).bootstrapValidator(&#123;</span><br><span class="line">  <span class="comment">// 1. 指定不校验的类型，默认为[&#x27;:disabled&#x27;, &#x27;:hidden&#x27;, &#x27;:not(:visible)&#x27;],可以不设置</span></span><br><span class="line">  excluded: [], <span class="comment">// 全部校验</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. 指定校验时的图标显示，默认是bootstrap风格</span></span><br><span class="line">  feedbackIcons: &#123;</span><br><span class="line">    valid: <span class="string">&#x27;glyphicon glyphicon-ok&#x27;</span>,</span><br><span class="line">    invalid: <span class="string">&#x27;glyphicon glyphicon-remove&#x27;</span>,</span><br><span class="line">    validating: <span class="string">&#x27;glyphicon glyphicon-refresh&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. 指定校验字段</span></span><br><span class="line">  fields: &#123;</span><br><span class="line">    username: &#123;</span><br><span class="line">      <span class="comment">// 设置校验规则</span></span><br><span class="line">      validators: &#123;</span><br><span class="line">        <span class="comment">// 不能为空</span></span><br><span class="line">        notEmpty: &#123;</span><br><span class="line">          message: <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        stringLength: &#123;</span><br><span class="line">          min: <span class="number">6</span>,</span><br><span class="line">          max: <span class="number">12</span>,</span><br><span class="line">          message: <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 正则校验</span></span><br><span class="line">        regexp: &#123;</span><br><span class="line">          regexp: <span class="regexp">/^[a-zA-Z0-9_\.]+$/</span>,</span><br><span class="line">          message: <span class="string">&#x27;用户名由数字字母下划线和.组成&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        callback: &#123;&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    password: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="注册表单校验成功的事件"><a href="#注册表单校验成功的事件" class="headerlink" title="注册表单校验成功的事件"></a>注册表单校验成功的事件</h3><p>当表单校验成功时，会触发<code>success.form.bv</code>事件，此时会提交表单，通常我们需要禁止表单的自动提交，使用 ajax 进行表单的提交</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;#form&#x27;</span>).on(<span class="string">&#x27;success.form.bv&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  e.preventDefault()</span><br><span class="line">  <span class="comment">// 使用ajax提交逻辑</span></span><br><span class="line">  $.ajax(&#123;&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="获取-validator-实例-对象"><a href="#获取-validator-实例-对象" class="headerlink" title="获取 validator 实例(对象)"></a>获取 validator 实例(对象)</h3><p>当我们初始化好表单校验插件时，我们可以通过以下方法来获取表单校验的 validator 实例，通过 validator 实例调用一些方法来完成某些功能</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取表单校验实例</span></span><br><span class="line"><span class="keyword">var</span> validator = $(<span class="string">&#x27;#form&#x27;</span>).data(<span class="string">&#x27;bootstrapValidator&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用表单校验实例可以调用一些常用的方法</span></span><br><span class="line">validator.methodName(params)</span><br></pre></td></tr></table></figure>

<h3 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h3><h4 id="重置表单"><a href="#重置表单" class="headerlink" title="重置表单"></a>重置表单</h4><p>重置表单中设置过校验的内容，将隐藏所有错误提示和图标</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 重置表单，隐藏所有的错误提示和图标 传入参数 true 会将内容也清空</span></span><br><span class="line">validator.resetForm()</span><br></pre></td></tr></table></figure>

<h4 id="更新字段的状态"><a href="#更新字段的状态" class="headerlink" title="更新字段的状态"></a>更新字段的状态</h4><p>BootstrapValidator 在用户输入内容的时候，会做校验，当调用 bootstrap 的插件的方法可以手动会改变字段值的状态</p>
<p><code>validator.updateStatus(field*, status*, validator)</code></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>field</code></td>
<td>String|jQuery</td>
<td>The field name or field element</td>
</tr>
<tr>
<td><code>status</code></td>
<td>String</td>
<td>Can be <code>NOT_VALIDATED</code>, <code>VALIDATING</code>, <code>INVALID</code> or <code>VALID</code></td>
</tr>
<tr>
<td><code>validator</code></td>
<td>String</td>
<td>The validator name. If <code>null</code>, the method updates validity result for all validators</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>bootstrap</tag>
      </tags>
  </entry>
  <entry>
    <title>Chrome Developer Tools 使用技巧</title>
    <url>/419.html</url>
    <content><![CDATA[<h3 id="console-log"><a href="#console-log" class="headerlink" title="console.log()"></a>console.log()</h3><p>占位符 %o 它接受对象，%s 接受字符串，%d 表示小数或整数，%c CSS 值的占位符,对应的后面的参数必须是 CSS 语句</p>
<p>如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;%s 的价格是 %d 磅 %d 便士&#x27;</span>, <span class="string">&#x27;衬衫&#x27;</span>, <span class="number">9</span>, <span class="number">15</span>)</span><br></pre></td></tr></table></figure>

<p>输出：衬衫的价格是 9 磅 15 便士</p>
<p>如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;I am a %cbutton&#x27;</span>, <span class="string">&#x27;color: white; background-color: orange; padding: 2px 5px; border-radius: 2px&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>输出：I am a <span style="color: white; background-color: orange; padding: 2px 5px; border-radius: 2px">button</span></p>
<h3 id="console-dir"><a href="#console-dir" class="headerlink" title="console.dir()"></a>console.dir()</h3><h3 id="console-warn"><a href="#console-warn" class="headerlink" title="console.warn()"></a>console.warn()</h3><p>输出警告信息，字的颜色是黄色的，用于区分或过滤掉无用的输出</p>
<h3 id="console-table"><a href="#console-table" class="headerlink" title="console.table()"></a>console.table()</h3><p>将数据以表格的形式输出，对于数据列表的输出更容易观察其数据结构，并且点击输出的表头可以对数据排序</p>
<p>第二个可选参数是需要输出的字段。默认输出所有字段</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.table(data) <span class="comment">// 输出全部</span></span><br><span class="line"><span class="built_in">console</span>.table(data, [<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;price&#x27;</span>]) <span class="comment">// 输出 data 中的 id price 字段</span></span><br></pre></td></tr></table></figure>

<h3 id="console-count"><a href="#console-count" class="headerlink" title="console.count()"></a>console.count()</h3><p>计数器，可以用来统计代码被执行的次数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">if</span> (i % <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.count(<span class="string">&#x27;odds&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">odds: 1</span><br><span class="line">odds: 2</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.countReset() <span class="comment">// 可以使用它重置计数器。</span></span><br></pre></td></tr></table></figure>

<h3 id="console-time"><a href="#console-time" class="headerlink" title="console.time()"></a>console.time()</h3><p>是一个用于跟踪操作时间的专用函数，可以用来跟踪 js 的执行时间</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">  <span class="comment">// do something</span></span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.time()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">  a()</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.timeEnd()</span><br></pre></td></tr></table></figure>

<h3 id="选择-DOM-元素"><a href="#选择-DOM-元素" class="headerlink" title="选择 DOM 元素"></a>选择 DOM 元素</h3><ul>
<li>在谷歌开发控制台中, 可以使用 <code>$(&#39;选择器&#39;)</code> 类似于 jquery 的方式选择 DOM 元素</li>
</ul>
<p><code>$(&#39;&#39;)</code> 等效于 <code>document.querySelector(&#39;&#39;)</code>，这将返回 DOM 中与选择器匹配的第一个元素，可以使用 <code>$$(tagName)</code> 或 <code>$$(.class)</code>，选择 DOM 的所有元素并返回一个数组。可以通过下标获取指定的元素，例如，<code>$$(&#39;.box&#39;)</code> 获取具有类 box 的所有元素，<code>$$(&#39;.box&#39;)[0]</code>和 <code>$$(&#39;.box&#39;)[1]</code>分别获取第一个和第二个元素</p>
<ul>
<li><code>inspect($(&#39;selector&#39;))</code> 将检查与选择器匹配的元素，并转到 Elements 选项卡</li>
</ul>
<ul>
<li><code>$0</code>，<code>$1</code>，<code>$2</code> 等可以获取最近检查过的元素，即通过 <code>$0</code> 即可直接获取当前高亮的元素，<code>$1</code> 可以获取上一个高亮的元素</li>
</ul>
<h3 id="将页面转换为可编辑状态"><a href="#将页面转换为可编辑状态" class="headerlink" title="将页面转换为可编辑状态"></a>将页面转换为可编辑状态</h3><p>在 Console 中输入:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.body.contentEditable = <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>之后页面中的内容即为可编辑状态，可以编辑 DOM 中的任何内容</p>
<h3 id="查找与-DOM-中的元素关联的事件"><a href="#查找与-DOM-中的元素关联的事件" class="headerlink" title="查找与 DOM 中的元素关联的事件"></a>查找与 DOM 中的元素关联的事件</h3><p><code>getEventListeners($(&#39;selector&#39;))</code> 返回一个对象数组，其中包含绑定到该元素的所有事件。你可以展开对象来查看事件</p>
<p>要找到特定事件的侦听器，可以这样做:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">getEventListeners($(<span class="string">&#x27;selector&#x27;</span>)).eventName[<span class="number">0</span>].listener</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将显示与 id 为 btn 的元素的单击事件关联的侦听器</span></span><br><span class="line">getEventListeners($(<span class="string">&#x27;btn&#x27;</span>)).click[<span class="number">0</span>].listener</span><br></pre></td></tr></table></figure>

<p>或</p>
<p>控制台 =&gt; Element =&gt; EventListeners</p>
<p><a href="https://segmentfault.com/q/1010000002892890">https://segmentfault.com/q/1010000002892890</a></p>
<h3 id="监控事件"><a href="#监控事件" class="headerlink" title="监控事件"></a>监控事件</h3><p>监视绑定到 DOM 中特定元素的事件，然后在它们被触发后立即将它们记录在控制台中</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 监控绑定到 &#x27;#box&#x27; 元素的所有事件</span></span><br><span class="line">monitorEvents($(<span class="string">&#x27;#box&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监控绑定到 &#x27;selector&#x27; 元素的 click 事件</span></span><br><span class="line">monitorEvents($(<span class="string">&#x27;#box&#x27;</span>), <span class="string">&#x27;click&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监控绑定到 &#x27;selector&#x27; 元素的 click 和 focus 事件</span></span><br><span class="line">monitorEvents($(<span class="string">&#x27;#box&#x27;</span>), [<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;focus&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">// 停止监视</span></span><br><span class="line">unmonitorEvents($(<span class="string">&#x27;#box&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>检索最后一个结果的值<br><code>$_</code> 表示控制台中最近一次返回的值</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1 + 1</span><br><span class="line">&gt; 2</span><br><span class="line"></span><br><span class="line">$_</span><br><span class="line">&gt; 2</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>chrome</tag>
      </tags>
  </entry>
  <entry>
    <title>Fixed 定位脱离 Viewport 的 bug</title>
    <url>/393.html</url>
    <content><![CDATA[<h3 id="Fixed-定位脱离-Viewport-的-bug"><a href="#Fixed-定位脱离-Viewport-的-bug" class="headerlink" title="Fixed 定位脱离 Viewport 的 bug"></a>Fixed 定位脱离 Viewport 的 bug</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  .outer &#123;</span><br><span class="line"><span class="css">    <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background</span>: yellow;</span></span><br><span class="line">  &#125;</span><br><span class="line">  .mid &#123;</span><br><span class="line"><span class="css">    <span class="attribute">margin</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">0</span>, <span class="number">0</span>);</span></span><br><span class="line"><span class="css">    <span class="attribute">background</span>: greenyellow;</span></span><br><span class="line">  &#125;</span><br><span class="line">  .inner &#123;</span><br><span class="line"><span class="css">    <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="css">    <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background</span>: pink;</span></span><br><span class="line"><span class="css">    <span class="attribute">z-index</span>: <span class="number">1</span></span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mid&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;inner&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>对于声明 transfrom 值非 none 元素，其子元素中若存在 position: fixed 将以声明 transform 的最近祖先作为基准而定位，这是因为 transfrom 值非 none 的元素<a href="http://www.w3.org/TR/css3-2d-transforms/#transform-rendering">定义了一个局部坐标系统</a>，导致 postion: fixed 以此坐标系统计算布局。</p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>css-z-index 堆叠顺序</title>
    <url>/392.html</url>
    <content><![CDATA[<h3 id="9-3-2-堆叠顺序（z-index）"><a href="#9-3-2-堆叠顺序（z-index）" class="headerlink" title="9.3.2 堆叠顺序（z-index）"></a>9.3.2 堆叠顺序（z-index）</h3><p>在使用<strong>定位</strong>布局时，可能会<strong>出现盒子重叠的情况</strong>。加了定位的盒子，默认<strong>后来者居上</strong>， 后面的盒子会压住前面的盒子。</p>
<p>应用 <code>z-index</code> 层叠等级属性可以<strong>调整盒子的堆叠顺序</strong>。</p>
<p><code>z-index</code> 的特性如下：</p>
<ol>
<li><strong>属性值</strong>：<strong>正整数</strong>、<strong>负整数</strong>或 <strong>0</strong>，默认值是 0，数值越大，盒子越靠上</li>
<li>如果<strong>属性值相同</strong>，则按照书写顺序，<strong>后来居上</strong></li>
<li><strong>数字后面无单位</strong></li>
<li>只应用于<strong>相对定位</strong>、<strong>绝对定位</strong>和<strong>固定定位</strong>的元素，其他<strong>标准流</strong>、<strong>浮动</strong>和<strong>静态定位</strong>无效</li>
<li><strong>层叠水平仅在直接父级层叠上下文中进行比较，即层叠上下文 A 中的子元素的层叠水平不会和另一个层叠上下文中的子元素进行比较</strong></li>
</ol>
<p><strong>层叠上下文（stacking context）</strong>：创建层叠上下文的元素自己会成为一个<code>参考对象</code></p>
<p><strong>层叠水平（stacking level）</strong></p>
<p><strong>层叠顺序（stacking order）</strong></p>
<p><strong>满足下面规则的元素将会构造出一个 Stacking Context 结构：</strong></p>
<ul>
<li><code>html</code> 根元素默认会创建层叠上下文</li>
<li><code>position</code>不为<code>static</code>且<code>z-index</code>不是 auto 的元素</li>
<li><code>display</code>为<code>flex</code>且<code>z-index</code>不是 auto 的元素</li>
<li><code>opacity</code>不等于 1</li>
<li><code>transform</code>不等于 none</li>
</ul>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102204249.png"></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;me&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;you&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  .me &#123;</span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line">  .you &#123;</span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">left</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="css">    <span class="attribute">z-index</span>: -<span class="number">1</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>you 在这里和 me 做比较，比较开始，首先 you 寻找参考对象，上一层 me 是吗？显然不是，因为 me 没有触发上面任一条件创建层叠上下文，所以继续往上寻找，找到 html。对于 me，也直接往上找到 html，所以这个例子里 me 和 you 是在以 html 为参考对象进行比较，<strong>换句话说就是在 html 创建的层叠上下文环境中进行比较</strong>！然后按照七阶图，负值 index 在 block 元素之下！所以 me 在 you 之上。</p>
<p>然后我们修改下 me，加个<code>z-index:0;</code> 按照之前的思路演算一遍，you 的参考对象变成 me 了！而 me 仍然是 html，然后 me 和 html 再做比较，me 参考对象是 html，html 的参考对象是 html，OK，在同一上下文了，me 明显高于 html，所以 you 高于 me。</p>
<p>参考链接</p>
<p><a href="https://segmentfault.com/a/1190000005354175?utm_source=tag-newest">元素上下层叠关系总结</a></p>
<p><a href="http://www.cnblogs.com/bfgis/p/5440956.html"> 北风吹雪：不起眼的 z-index 却能牵扯出这么大的学问</a></p>
<p><a href="https://www.zhangxinxu.com/wordpress/2016/01/understand-css-stacking-context-order-z-index/">张鑫旭:深入理解 CSS 中的层叠上下文和层叠顺序</a></p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS3 基础</title>
    <url>/1632.html</url>
    <content><![CDATA[<p>如同人类的的进化一样，CSS3 是 CSS2 的“进化”版本，在 CSS2 基础上，<strong>增强</strong>  或 <strong>新增</strong>  了许多特性， 弥补了 CSS2 的众多不足之处，使得 Web 开发变得更为高效和便捷。</p>
<h2 id="现状"><a href="#现状" class="headerlink" title="现状"></a>现状</h2><ul>
<li>PC 端浏览器支持程度差，需要添加私有前缀</li>
<li>移动端支持优于 PC 端</li>
<li>不断改进中</li>
<li>应用相对广泛</li>
</ul>
<p>关于私有前缀：</p>
<blockquote>
<p>在标准还未确定时，部分浏览器已经根据最初草案实现了部分功能，为了与之后确定下来的标准进行兼容，所以每种浏览器使用了自己的私有前缀与标准进行区分，当标准确立后，各大浏览器将逐步支持不带前缀的 css3 新属性</p>
<p>目前已有很多私有前缀可以不写了，但为了兼容老版本的浏览器，可以仍沿用私有前缀和标准方法，逐渐过渡</p>
<p>一般来说，CSS3 主要是为移动端而生的，因此我们在移动端没必要写太多的前缀，因为移动端的 ios 和 Android 的浏览器都是 webkit 内核</p>
<p>谷歌、苹果浏览器：<code>-webkit-</code><br>火狐浏览器：<code>-moz-</code><br>IE 浏览器：<code>-ms-</code><br>欧朋浏览器：<code>-o-</code></p>
<p>一般工作中不用去加，会通过打包工具 webpack 自动添加</p>
</blockquote>
<h2 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h2><h2 id="阴影"><a href="#阴影" class="headerlink" title="阴影"></a>阴影</h2><ul>
<li>text-shadow: 文字阴影</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">语法：text-shadow：none | &lt;shadow&gt; [ , &lt;shadow&gt; ]*</span><br><span class="line">  &lt;shadow&gt; &#x3D;&gt; &lt;length&gt;&#123;2,3&#125; &amp;&amp; &lt;color&gt;?</span><br><span class="line">text-shadow：水平偏移 垂直偏移 羽化大小 颜色</span><br><span class="line">水平偏移 垂直偏移 可以为负值，羽化大小可选且不可为负</span><br><span class="line">可以设置多组阴影值，用逗号隔开</span><br></pre></td></tr></table></figure>

<ul>
<li>box-shadow: 边框阴影</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">语法：box-shadow：none | &lt;shadow&gt; [ , &lt;shadow&gt; ]*</span><br><span class="line">  &lt;shadow&gt; &#x3D;&gt; inset? &amp;&amp; &lt;length&gt;&#123;2,4&#125; &amp;&amp; &lt;color&gt;?</span><br><span class="line"></span><br><span class="line">box-shadow：水平偏移 垂直偏移 羽化大小 阴影外延 颜色</span><br><span class="line">水平偏移、垂直偏移、阴影外延可以为负值，羽化大小、阴影外延可选，羽化大小不允许负值</span><br><span class="line">可以设置多组阴影值，用逗号隔开</span><br><span class="line">inset：设置对象的阴影类型为内阴影。该值为空时，则对象的阴影类型为外阴影</span><br></pre></td></tr></table></figure>

<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>background-size</p>
<p>bakground-clip</p>
<p>background-origin</p>
<h2 id="渐变"><a href="#渐变" class="headerlink" title="渐变"></a>渐变</h2><h3 id="线性渐变"><a href="#线性渐变" class="headerlink" title="线性渐变"></a>线性渐变</h3><blockquote>
<p>linear-gradient() 指沿着某条直线朝一个方向产生的渐变效果</p>
<p>渐变实际上相当与一张图片，因为需要加给 background-image 才会生效</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 最简单的渐变 颜色至少两个 方向默认从上到下 */</span></span><br><span class="line"><span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(red, green);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设定渐变的方向 */</span></span><br><span class="line"><span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(to right, red, green);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 也可以设定渐变的角度 */</span></span><br><span class="line"><span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, red, green);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设定渐变的范围 */</span></span><br><span class="line"><span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(to right, red <span class="number">20%</span>, green <span class="number">80%</span>)</span><br><span class="line"></span><br><span class="line">/* 每一个区间表示渐变颜色的范围 */</span><br><span class="line">background-image: <span class="built_in">linear-gradient</span>(to right, red <span class="number">20%</span>, green <span class="number">20%</span>)</span><br></pre></td></tr></table></figure>

<h3 id="径向渐变"><a href="#径向渐变" class="headerlink" title="径向渐变"></a>径向渐变</h3><blockquote>
<p>radial-gradient 指从一个中心点开始沿着四周产生渐变效果</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 最简单的渐变 */</span></span><br><span class="line"><span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(red, green);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 指定圆的半径和圆心 */</span></span><br><span class="line"><span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(<span class="number">200px</span> at center, red, green);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 指定椭圆 */</span></span><br><span class="line"><span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(<span class="number">200px</span> <span class="number">80px</span> at center, red, green);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 指定范围 */</span></span><br><span class="line"><span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(<span class="number">200px</span> at center, green <span class="number">50%</span>, red <span class="number">50%</span>);</span><br></pre></td></tr></table></figure>

<h2 id="盒子模型"><a href="#盒子模型" class="headerlink" title="盒子模型"></a>盒子模型</h2><blockquote>
<p>CSS3 中可以通过 box-sizing 来指定盒模型，即可指定为 content-box、border-box，这样我们计算盒子大小的方式就发生了改变</p>
</blockquote>
<p>可以分成两种情况：</p>
<ul>
<li>box-sizing: border-box 计算方式为 content = width – border - padding</li>
<li>box-sizing: content-box 计算方式为 content = width</li>
</ul>
<h2 id="calc-函数"><a href="#calc-函数" class="headerlink" title="calc() 函数"></a>calc() 函数</h2><p>用于动态计算长度值</p>
<ul>
<li>注意：运算符前后都需要保留一个空格，例如：<code>width: calc(100% - 10px)</code></li>
<li>任何长度值都可以使用 calc() 函数进行计算</li>
<li>calc() 函数支持 <code>+</code> 、<code>-</code>、 <code>*</code> 、<code>/</code> 运算</li>
<li>calc() 函数使用标准的数学运算优先级规则</li>
</ul>
<h2 id="过渡"><a href="#过渡" class="headerlink" title="过渡"></a>过渡</h2><ul>
<li>过渡的属性</li>
</ul>
<p>如果两个状态发生改变，没有过渡，效果是瞬间变化的，如果加上了过渡，那么这个过程就会有动画的效果，整个状态变化的过程是由浏览器来完成的，我们只需要关注开始状态与结束状态即可</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* transition-property：设置过渡属性 默认值为 all 表示全部*/</span></span><br><span class="line"><span class="comment">/* 多个用逗号分隔 */</span></span><br><span class="line"><span class="attribute">transition-property</span>: all;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* transition-duration:设置过渡时间 */</span></span><br><span class="line"><span class="attribute">transition-duration</span>: <span class="number">1s</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* transition-delay：设置过渡延时 */</span></span><br><span class="line"><span class="attribute">transition-delay</span>: <span class="number">2s</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* transition-timing-function:设置过渡的速度 */</span></span><br><span class="line"><span class="comment">/* linear(匀速)，ease(平滑)，ease-in，ease-out，ease-in-out， steps(10)(分步动画) */</span></span><br><span class="line"><span class="attribute">transition-timing-function</span>: linear;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：</p>
<ol>
<li>过渡必须要有两个状态的变化</li>
<li>过渡除了可以加到初始的状态，可以加到 hover 状态，但效果不一样，如果加到 hover 状态，回来就没有过渡了</li>
</ol>
</blockquote>
<ul>
<li>属性合写</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 属性 时间 延时 速度 */</span></span><br><span class="line"><span class="comment">/* 多个过渡用逗号隔开 */</span></span><br><span class="line"><span class="attribute">transition</span>: width <span class="number">1s</span> <span class="number">3s</span> linear, border-radius <span class="number">3s</span>;</span><br></pre></td></tr></table></figure>

<h2 id="2D-转换"><a href="#2D-转换" class="headerlink" title="2D 转换"></a>2D 转换</h2><blockquote>
<p>transform: 转换，是 CSS3 最具颠覆性的几个特性之一，既可以用于 2D 转换，也可以用于 3D 转换</p>
<p>transform: 2D 转换，元素在平面上实现移动、旋转、缩放、斜切等操作</p>
</blockquote>
<h3 id="scale-缩放"><a href="#scale-缩放" class="headerlink" title="scale 缩放"></a>scale 缩放</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">scaleX</span>(<span class="number">0.5</span>); <span class="comment">/* 让宽度变化 */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">scaleY</span>(<span class="number">0.5</span>); <span class="comment">/* 让高度变化，注意不能写多个transform，不然会覆盖 */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.5</span>); <span class="comment">/* 让宽度和高度同时变化 */</span></span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li><p>scale 接收的值是倍数，因此没有单位</p>
</li>
<li><p>scale 是一个值时，宽度高度会等比例同事缩放</p>
</li>
<li><p>scale 缩放时内部内容也会缩放</p>
</li>
<li><blockquote>
<p>可以通过 transition-origin 设定缩放原点 （可以是数值或方位词 top、left…)</p>
</blockquote>
</li>
</ul>
<h3 id="translate-平移"><a href="#translate-平移" class="headerlink" title="translate 平移"></a>translate 平移</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">100px</span>);</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">100px</span>);</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">100px</span>, <span class="number">100px</span>);</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">50%</span>, <span class="number">50%</span>);</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li>translate 的值可以是 px，也可以是百分比，如果是百分比，那么参照的是<strong>自身的宽高</strong></li>
<li>translate 移动的元素并不会影响其他盒子，类似于相对定位</li>
</ul>
<h3 id="rotate-旋转"><a href="#rotate-旋转" class="headerlink" title="rotate 旋转"></a>rotate 旋转</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>); <span class="comment">/* 旋转360度 */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">360deg</span>); <span class="comment">/* 逆时针旋转360度 */</span></span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li>单位是 deg，角度，不是 px</li>
<li>正值顺时针转，负值逆时针转</li>
<li>可以通过 transition-origin 设定旋转原点</li>
</ul>
<blockquote>
<p>rotate 旋转会让坐标轴也跟着旋转</p>
</blockquote>
<h3 id="skew-斜切-变形"><a href="#skew-斜切-变形" class="headerlink" title="skew 斜切(变形)"></a>skew 斜切(变形)</h3><p>skew 在实际开发中，是用的最少的一个属性。一般来说，x 和 y 只会倾斜其中的一个</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 在水平方向倾斜30deg */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">skewX</span>(<span class="number">30deg</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 在垂直方向倾斜30deg */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">skewY</span>(<span class="number">30deg</span>);</span><br></pre></td></tr></table></figure>

<p>【案例：扫光效果.html】</p>
<h3 id="transform-origin-转换原点"><a href="#transform-origin-转换原点" class="headerlink" title="transform-origin 转换原点"></a>transform-origin 转换原点</h3><blockquote>
<p>通过 transform-origin 可以设置转换的中心原点</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transform-origin</span>: center center;</span><br><span class="line"><span class="attribute">transform-origin</span>: <span class="number">40px</span> <span class="number">40px</span>;</span><br></pre></td></tr></table></figure>

<h3 id="转换合写问题"><a href="#转换合写问题" class="headerlink" title="转换合写问题"></a>转换合写问题</h3><blockquote>
<p>transform 属性只能写一个，如果写了多个会覆盖，属性的值可以写多个， 用空格隔开即可</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">800px</span>) <span class="built_in">scale</span>(<span class="number">1.5</span>) <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>transform 属性可以连写，但是顺序对效果影响的，因为它会在第一个效果的基础上执行第二个效果，然后执行第三个效果（通常会把 rotate 放后面）</li>
<li>如果对 transform 进行过度效果的时候，初始状态和结束状态要一一对应</li>
</ul>
<p>【案例：盾牌打散与合并效果.html】</p>
<h2 id="3D-转换"><a href="#3D-转换" class="headerlink" title="3D 转换"></a>3D 转换</h2><p>思考：2D 与 3D 的区别？</p>
<h3 id="坐标轴"><a href="#坐标轴" class="headerlink" title="坐标轴"></a>坐标轴</h3><blockquote>
<p>用 X、Y、Z 分别表示空间的 3 个维度，三条轴互相垂直。<strong>注意+Y 是向下的</strong></p>
</blockquote>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102204311.png"></p>
<h3 id="perspective-透视"><a href="#perspective-透视" class="headerlink" title="perspective 透视"></a>perspective 透视</h3><blockquote>
<p>电脑显示屏是一个 2D 的平面，因为我们看不出来旋转的方向，通过 perspective 属性，可以定义 3D 元素距视图的距离，单位是 px。</p>
<p>说白了，设置了 perspective 属性后，就有了进大远小的效果了，在视觉上，让我们能看出来 3d 的效果。</p>
<p>注意：当为元素定义 perspective 属性时，其子元素会获得透视效果，而不是元素本身。</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">perspective</span>：<span class="number">500px</span>;</span><br></pre></td></tr></table></figure>

<p>对于我们眼睛来说，离我们越近的房子，我们会感觉到这个房子越大，离我们越远的房子，就会感觉越小，其实房子的大小都是一样的，只是在视觉上的一种不同。</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102204343.png"></p>
<h3 id="rotate-旋转-1"><a href="#rotate-旋转-1" class="headerlink" title="rotate 旋转"></a>rotate 旋转</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>); <span class="comment">/* 让元素在平面2D中旋转，相当于沿着Z轴旋转 */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotateX</span>(<span class="number">45deg</span>); <span class="comment">/* 让元素沿着X轴转45度 */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">45deg</span>); <span class="comment">/* 让元素沿着Y轴转45度 */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotateZ</span>(<span class="number">45deg</span>); <span class="comment">/* 让元素沿着Z轴转45度 */</span></span><br></pre></td></tr></table></figure>

<p>【3D 旋转.html】</p>
<h3 id="translate-平移-1"><a href="#translate-平移-1" class="headerlink" title="translate 平移"></a>translate 平移</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 沿着X轴的正方向移动45px */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">45px</span>);</span><br><span class="line"><span class="comment">/* 沿着Y轴的正方向移动45px */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">45px</span>);</span><br><span class="line"><span class="comment">/* 沿着Z轴的正方向移动45px */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translateZ</span>(<span class="number">45px</span>);</span><br></pre></td></tr></table></figure>

<p>【3D 平移.html】</p>
<p>【立方体.html】</p>
<h3 id="transform-style"><a href="#transform-style" class="headerlink" title="transform-style"></a>transform-style</h3><p>transform-style 属性规定如何在 3D 空间中呈现被嵌套的元素。注意这个属性只能给父元素添加</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">flat: 默认值，<span class="number">2</span>d显示</span><br><span class="line">preserve-<span class="number">3</span>d: <span class="number">3</span>d显示</span><br></pre></td></tr></table></figure>

<p>transform-style 与 perspective 区别</p>
<ul>
<li>透视：透视只是相当于设置了一个距离，辅助我们查看 3D 效果的工具</li>
<li>preserve-3d：给父盒子添加，让子元素保留 3D 的位置，说白了，只有设置了 preserve-3d，这个元素才能被称之为 3d 元素</li>
<li>一个 3d 元素可以没有 perspective，但是不能没有 transform-style</li>
</ul>
<p>【3D 导航案例.html】</p>
<p>【切割轮播图案例】</p>
<p>【3D 相册案例】</p>
<h3 id="过渡结束事件"><a href="#过渡结束事件" class="headerlink" title="过渡结束事件"></a>过渡结束事件</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 给最后一个ul添加过渡结束事件（节流阀）</span></span><br><span class="line">uls[uls.length - <span class="number">1</span>].addEventListener(<span class="string">&#x27;transitionend&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  isCanAnimate = <span class="literal">true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h2><blockquote>
<p>动画可以通过设置多个节点来精确控制一个或者一组动画，常用来实现复杂的动画效果</p>
</blockquote>
<p>动画与过渡的区别：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">过渡必须触发，需要两个状态的改变。</span><br><span class="line">动画可以一直运行下去，不需要触发。实现效果与过渡差不多</span><br></pre></td></tr></table></figure>

<p>使用一个动画的基本步骤：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1.通过 @keyframes 指定动画序列</span><br><span class="line">2.通过百分比或者 from&#x2F;to 将动画分割成多个节点</span><br><span class="line">3.在各个节点中分别定义样式</span><br><span class="line">4.通过 animation 将动画应用于相应的元素</span><br></pre></td></tr></table></figure>

<h3 id="animation"><a href="#animation" class="headerlink" title="animation"></a>animation</h3><p>animation 是一个复合属性，一共有 8 个参数</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">animation-name: 动画名称，由@keyframes定义的</span><br><span class="line">animation-duration: 动画的持续时间 默认0s</span><br><span class="line">animation-timing-function: 动画的过渡类型 ease(默认) linear steps</span><br><span class="line">animation-delay: 动画的延迟时间 默认0s</span><br><span class="line">animation-iteration-count: 动画的循环次数 默认1次  infinite：无限循环</span><br><span class="line">animation-direction: 设置动画在循环中的方向 normal：正向(默认) reverse(反向) alternate(往复循环)</span><br><span class="line">animation-fill-mode: 设置动画结束时的状态 none：默认 backwards：动画结束时停留在开始状态 forwards: 动画结束时停留在结束的状态</span><br><span class="line">animation-play-state: 设置动画的状态。running：运动(默认) paused：暂停</span><br></pre></td></tr></table></figure>

<h3 id="动画库的使用"><a href="#动画库的使用" class="headerlink" title="动画库的使用"></a>动画库的使用</h3><p><a href="https://daneden.github.io/animate.css/">https://daneden.github.io/animate.css/</a></p>
<h2 id="字体图标"><a href="#字体图标" class="headerlink" title="字体图标"></a>字体图标</h2><p>我们经常把网页常用的一些小的图标，做成精灵图，然后通过 background-position 去调整位置，但是这个需要引入图片，并且图片大小改变之后会失真。在 CSS3 中可以使用字体图片，即使用图标跟使用文字一样</p>
<p>优点：</p>
<p>1、将所有图标打包成字体库，减少请求</p>
<p>2、具有矢量性，可保证清晰度，可以修改文字的颜色或者样式</p>
<p>3、使用灵活，便于维护</p>
<p>阿里巴巴矢量图标：<a href="http://www.iconfont.cn/">http://www.iconfont.cn/</a></p>
<p>Font Awesome 使用 <a href="http://fontawesome.dashgame.com/">http://fontawesome.dashgame.com/</a></p>
<h2 id="弹性布局-伸缩布局"><a href="#弹性布局-伸缩布局" class="headerlink" title="弹性布局(伸缩布局)"></a>弹性布局(伸缩布局)</h2><blockquote>
<p>布局：其实就是调整元素在水平和垂直方向上的布局方式</p>
</blockquote>
<p>CSS3 在布局方面做了非常大的改进，使得我们对块级元素的布局排列变得十分灵活，适应性非常强，其强大的伸缩性，在响应式开中可以发挥极大的作用。</p>
<p>当给一个盒子设置了 display：flex 之后，这个盒子就有了 <strong>主轴</strong> 和 <strong>侧轴</strong> 的概念<br>主轴：默认是水平方向向右，子元素在主轴上排列<br>侧轴：与主轴垂直的轴称作侧轴，默认是垂直方向向下</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102204407.png"></p>
<h3 id="给容器设置的样式"><a href="#给容器设置的样式" class="headerlink" title="给容器设置的样式"></a>给容器设置的样式</h3><ul>
<li>flex-direction</li>
</ul>
<p>用来调整主轴的方向，默认是水平方向，可选值有：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">row：主轴方向为水平向右（默认）</span><br><span class="line">column：主轴方向为竖直向下</span><br><span class="line">row-reverse: 主轴方向为水平向左</span><br><span class="line">column-reverse: 主轴方向是竖直向上</span><br></pre></td></tr></table></figure>

<ul>
<li>justify-content</li>
</ul>
<p>用来设置子元素在 <strong>主轴方向的对齐方式</strong> ，可选的值有：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">flex</span>-start: 弹性盒子元素将向起始位置对齐</span><br><span class="line">flex-end: 弹性盒子元素将向结束位置对齐</span><br><span class="line">center: 弹性盒子元素将向行中间位置对齐</span><br><span class="line">space-between: 第一个贴左边，最后一个贴右边，其他盒子均分，保证每个盒子之间的空隙是相等的</span><br><span class="line">space-around: 弹性盒子元素会平均地分布在行里（不会贴边）</span><br></pre></td></tr></table></figure>

<ul>
<li>align-items</li>
</ul>
<p>用于调整 <strong>侧轴的对其方式</strong> ，可选的值有：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">flex</span>-start：元素在侧轴的起始位置对其</span><br><span class="line"><span class="attribute">flex</span>-end：元素在侧轴的结束位置对其</span><br><span class="line">center：元素在侧轴上居中对其</span><br><span class="line">stretch：元素的高度会被拉伸到最大（不能给死高度）</span><br></pre></td></tr></table></figure>

<ul>
<li>flex-wrap</li>
</ul>
<p>控制 flex 容器是单行或者多行，默认不换行</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">nowrap：不换行（默认），会压缩子盒子的宽度</span><br><span class="line">wrap：当宽度不够的时候，会换行</span><br></pre></td></tr></table></figure>

<ul>
<li>align-content</li>
</ul>
<p>用来设置多行时侧轴的排列方式</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">flex</span>-start：各行向侧轴的起始位置堆叠</span><br><span class="line"><span class="attribute">flex</span>-end：各行向弹性盒容器的结束位置堆叠</span><br><span class="line">center：各行向弹性盒容器的中间位置堆叠</span><br><span class="line">space-between：第一行贴上边，最后一个行贴下边,其他行在弹性盒容器中平均分布</span><br><span class="line">space-around：各行在侧轴中平均分布</span><br><span class="line">stretch：拉伸，不设置高度的情况下</span><br></pre></td></tr></table></figure>

<p>align-items 与 align-content 的区别</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">align-items</span>调整的是侧轴的对其方式，不换行一般用align-itemsalign-<span class="attribute">content</span>: 必须是多行才生效，如果单行，没有效果。换行了就用 align-content;</span><br></pre></td></tr></table></figure>

<p>!&gt; 上述属性都是给父盒子设置的，这些样式影响的是所有的子元素，接下来的几个属性是给子盒子设置的，用来单独设置子元素的样式</p>
<h3 id="给子元素设置的样式"><a href="#给子元素设置的样式" class="headerlink" title="给子元素设置的样式"></a>给子元素设置的样式</h3><ul>
<li>flex</li>
</ul>
<p>用来设置子盒子如何分配主轴剩余空间</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">flex</span>: <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>order</li>
</ul>
<p>定义项目的排列顺序。数值越小，排列越靠前，默认为 0。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">order</span>: <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>align-self</li>
</ul>
<p>align-self 用于设置当前元素在侧轴的位置，是给子元素设置，优先级比 align-items 的优先级高</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">取值与 <span class="attribute">align-items</span> 的取值一样</span><br></pre></td></tr></table></figure>

<p>阮一峰的博客<a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html">http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html</a></p>
<p>【案例：6 面神骰】</p>
<p>【案例：携程网】</p>
<p>【案例：360 浏览器】</p>
<h1 id="other"><a href="#other" class="headerlink" title="other"></a>other</h1><p>微调元素</p>
<ul>
<li>margin-top: - ;</li>
<li>transform: translateY();</li>
<li>position: relative; top: - ;</li>
</ul>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>echarts 柱状图基本配置</title>
    <url>/1145.html</url>
    <content><![CDATA[<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">monthOptions: &#123;</span><br><span class="line">  color: [<span class="string">&#x27;#FFD058&#x27;</span>], <span class="comment">// 设置柱的颜色 会被 series itemStyle color 覆盖</span></span><br><span class="line">  xAxis: [</span><br><span class="line">    &#123;</span><br><span class="line">      data: [<span class="string">&#x27;报备组数&#x27;</span>, <span class="string">&#x27;来访组数&#x27;</span>, <span class="string">&#x27;大定套数&#x27;</span>, <span class="string">&#x27;草签套数&#x27;</span>, <span class="string">&#x27;正签套数&#x27;</span>], <span class="comment">// x轴</span></span><br><span class="line">      axisLabel: &#123;</span><br><span class="line">        inside: <span class="literal">false</span>, <span class="comment">// 在外部显示</span></span><br><span class="line">        textStyle: &#123; <span class="comment">// 设置样式</span></span><br><span class="line">          color: <span class="string">&#x27;rgba(255,255,255,0.5)&#x27;</span>,</span><br><span class="line">          fontSize: <span class="number">15</span>,</span><br><span class="line">          fontFamily: <span class="string">&#x27;PingFang-SC-Regular,PingFang-SC&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      axisTick: &#123; <span class="attr">show</span>: <span class="literal">false</span> &#125;, <span class="comment">// x轴线上的分割点</span></span><br><span class="line">      axisLine: &#123; <span class="attr">show</span>: <span class="literal">false</span> &#125;<span class="comment">// x轴线</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  yAxis: &#123;</span><br><span class="line">    axisLine: &#123; <span class="attr">show</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">    axisTick: &#123; <span class="attr">show</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">    axisLabel: &#123;</span><br><span class="line">      formatter: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span> &#125; <span class="comment">// 去掉y轴显示数字</span></span><br><span class="line">    &#125;,</span><br><span class="line">    splitLine: &#123; <span class="attr">show</span>: <span class="literal">false</span> &#125; <span class="comment">// 水平线</span></span><br><span class="line">  &#125;,</span><br><span class="line">  grid: &#123; <span class="comment">// 间距</span></span><br><span class="line">    left: <span class="string">&#x27;10%&#x27;</span>,</span><br><span class="line">    right: <span class="string">&#x27;10%&#x27;</span>,</span><br><span class="line">    bottom: <span class="string">&#x27;15%&#x27;</span>,</span><br><span class="line">    top: <span class="string">&#x27;15%&#x27;</span>,</span><br><span class="line">    containLabel: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  series: [</span><br><span class="line">    &#123; <span class="comment">// 用于显示阴影</span></span><br><span class="line">      type: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">      itemStyle: &#123;</span><br><span class="line">        color: <span class="string">&#x27;rgba(255,255,255,0.08)&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      barGap: <span class="string">&#x27;-100%&#x27;</span>,</span><br><span class="line">      <span class="comment">// barCategoryGap: &#x27;25%&#x27;,</span></span><br><span class="line">      barWidth: <span class="string">&#x27;15%&#x27;</span>,</span><br><span class="line">      data: [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>]</span><br><span class="line">      <span class="comment">// animation: false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; <span class="comment">// 正常数据</span></span><br><span class="line">      name: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      type: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">      barWidth: <span class="string">&#x27;15%&#x27;</span>,</span><br><span class="line">      data: [],</span><br><span class="line">      itemStyle: &#123; <span class="comment">// 上方显示数值</span></span><br><span class="line">        normal: &#123;</span><br><span class="line">          label: &#123;</span><br><span class="line">            formatter: <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">              <span class="keyword">return</span> formate(val.value)</span><br><span class="line">            &#125;,</span><br><span class="line">            show: <span class="literal">true</span>, <span class="comment">// 开启显示</span></span><br><span class="line">            position: <span class="string">&#x27;top&#x27;</span>, <span class="comment">// 在上方显示</span></span><br><span class="line">            textStyle: &#123; <span class="comment">// 数值样式</span></span><br><span class="line">              color: <span class="string">&#x27;#FFD058&#x27;</span>,</span><br><span class="line">              fontSize: <span class="number">15</span>,</span><br><span class="line">              fontFamily: <span class="string">&#x27;PingFang-SC-Regular,PingFang-SC&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  animationDuration: <span class="number">2000</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>echarts</tag>
      </tags>
  </entry>
  <entry>
    <title>element-ui 实现向下滚动加载</title>
    <url>/1114.html</url>
    <content><![CDATA[<h3 id="自定义封装-vue-指令，实现-select-下拉框滚动加载"><a href="#自定义封装-vue-指令，实现-select-下拉框滚动加载" class="headerlink" title="自定义封装 vue 指令，实现 select 下拉框滚动加载"></a>自定义封装 vue 指令，实现 select 下拉框滚动加载</h3><p>封装 v-loadmore 指令</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.directive(<span class="string">&#x27;loadmore&#x27;</span>, &#123;</span><br><span class="line">  <span class="function"><span class="title">bind</span>(<span class="params">el, binding</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 获取 element-ui 定义好的 scroll 盒子</span></span><br><span class="line">    <span class="keyword">const</span> target = el.querySelector(<span class="string">&#x27;.el-select-dropdown .el-select-dropdown__wrap&#x27;</span>)</span><br><span class="line">    target.addEventListener(<span class="string">&#x27;scroll&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// scrollHeight 获取元素内容高度(只读)</span></span><br><span class="line">      <span class="comment">// scrollTop 获取或者设置元素的滚动高度</span></span><br><span class="line">      <span class="comment">// clientHeight 读取元素的可见高度(只读)</span></span><br><span class="line">      <span class="keyword">const</span> flag = <span class="built_in">this</span>.scrollHeight - <span class="built_in">this</span>.scrollTop &lt;= <span class="built_in">this</span>.clientHeight</span><br><span class="line">      <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">        binding.value()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>使用</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;el-select</span><br><span class="line">  v-loadmore=&quot;loadMore&quot;&gt;</span><br><span class="line">  <span class="tag">&lt;<span class="name">el-option</span>&gt;</span><span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    loadMore () &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (<span class="built_in">this</span>.loadingMore == <span class="literal">false</span>) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.loadingMore = <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span></span></span><br><span class="line">      &#125;</span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (<span class="built_in">this</span>.currentPage &gt; <span class="built_in">this</span>.totlaPage) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span></span></span><br><span class="line">      &#125;</span><br><span class="line"><span class="javascript">      <span class="comment">// 获取数据</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.getData()</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用-vue-infinite-scroll"><a href="#使用-vue-infinite-scroll" class="headerlink" title="使用 vue-infinite-scroll"></a>使用 vue-infinite-scroll</h3><p>github 地址：<a href="https://github.com/ElemeFE/vue-infinite-scroll">https://github.com/ElemeFE/vue-infinite-scroll</a></p>
<p>安装</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i vue-infinite-scroll</span><br></pre></td></tr></table></figure>

<p>使用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// # main.js</span></span><br><span class="line"><span class="keyword">import</span> infiniteScroll <span class="keyword">from</span> <span class="string">&#x27;vue-infinite-scroll&#x27;</span></span><br><span class="line">Vue.use(infiniteScroll)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">v-infinite-scroll</span>=<span class="string">&quot;loadMore&quot;</span> <span class="attr">infinite-scroll-disabled</span>=<span class="string">&quot;busy&quot;</span> <span class="attr">infinite-scroll-distance</span>=<span class="string">&quot;10&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in moveRecord&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    loadMore () &#123;</span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.busy = <span class="literal">true</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, j = <span class="number">10</span>; i &lt; j; i++) &#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.data.push(&#123; <span class="attr">name</span>: count++ &#125;);</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.busy = <span class="literal">false</span>;</span></span><br><span class="line">      &#125;, 1000);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="element-ui-el-scrollbar-组件"><a href="#element-ui-el-scrollbar-组件" class="headerlink" title="element-ui el-scrollbar 组件"></a>element-ui el-scrollbar 组件</h3><p><a href="https://github.com/ElemeFE/element/blob/dev/packages/scrollbar/src/main.js">https://github.com/ElemeFE/element/blob/dev/packages/scrollbar/src/main.js</a></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-scrollbar</span> <span class="attr">style</span>=<span class="string">&quot;height: 200px&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>zs<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-scrollbar</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.el-scrollbar__wrap</span> &#123;</span><br><span class="line">  <span class="attribute">overflow-x</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>Github 开源项目收集</title>
    <url>/356.html</url>
    <content><![CDATA[<h2 id="知识库"><a href="#知识库" class="headerlink" title="知识库"></a>知识库</h2><p><a href="https://github.com/Advanced-Frontend/Daily-Interview-Question/blob/master/datum/summary.md">前端面试题及答案汇总</a></p>
<p><a href="https://github.com/CyC2018/CS-Notes">CS-Notes</a> 技术面试必备基础知识、Leetcode、计算机操作系统、计算机网络、系统设计、Java、Python、C++</p>
<p><a href="https://github.com/xcatliu/typescript-tutorial">TypeScript 入门教程</a></p>
<p><a href="https://github.com/MostlyAdequate/mostly-adequate-guide">js 函数式编程(英文)</a> <a href="https://llh911001.gitbooks.io/mostly-adequate-guide-chinese/content/">中文翻译</a></p>
<p><a href="https://github.com/basarat/typescript-book">TypeScript Deep Dive(英文)</a> <a href="https://github.com/jkchao/typescript-book-chinese">深入理解 TypeScript(中文翻译)</a></p>
<p><a href="https://github.com/zhongsp/TypeScript">TypeScript 手册(官方手册中文翻译版)</a></p>
<p><a href="https://github.com/InterviewMap/CS-Interview-Knowledge-Map">前端进阶之道</a><br><a href="https://yuchengkai.cn/docs/frontend/">前端进阶之道-在线阅读</a></p>
<p><a href="https://ustbhuangyi.github.io/vue-analysis/">Vue.js 技术揭秘</a></p>
<h2 id="工具库"><a href="#工具库" class="headerlink" title="工具库"></a>工具库</h2><p><a href="https://github.com/tsayen/dom-to-image">DOM to Image</a> 使用 HTML5 canvas 从 DOM 节点生成图像</p>
<p><a href="https://github.com/Akryum/v-tooltip">v-tooltip</a></p>
<p><a href="https://github.com/MatteoGabriele/vue-analytics">vue-analytics</a> Vue plugin for Google Analytics</p>
<p><a href="https://github.com/dfahlander/Dexie.js/">Dexie.js</a> A Minimalistic Wrapper for IndexedDB</p>
<p><a href="https://github.com/phodal/2md">2md</a> A Converter for Copy/Paste content to Markdown</p>
<p><a href="https://github.com/markedjs/marked">marked</a> A markdown parser and compiler. Built for speed</p>
<p><a href="https://github.com/CanopyTax/single-spa">single-spa</a> A javascript framework for front-end microservices</p>
<p><a href="https://github.com/pillarjs/path-to-regexp">path-to-regexp</a> Turn a path string such as <code>/user/:name</code> into a regular expression</p>
<p><a href="https://github.com/facebook/draft-js">Draft.js</a> Rich Text Editor Framework for React</p>
<p>Node.js Best Practices <a href="https://github.com/goldbergyoni/nodebestpractices">https://github.com/goldbergyoni/nodebestpractices</a></p>
<p>html5-boilerplate 前端模板 <a href="https://github.com/h5bp/html5-boilerplate">https://github.com/h5bp/html5-boilerplate</a></p>
<p>Airbnb 提供的非常精确和专业的风格指南<br><a href="https://github.com/airbnb/javascript">https://github.com/airbnb/javascript</a></p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>gulp 前端自动化环境</title>
    <url>/422.html</url>
    <content><![CDATA[<h1 id="前端自动化环境"><a href="#前端自动化环境" class="headerlink" title="前端自动化环境"></a>前端自动化环境</h1><p>实现一些简单的功能：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. 版本控制</span><br><span class="line">2. 编译SASS</span><br><span class="line">3. 检查JS</span><br><span class="line">4. 图片合并</span><br><span class="line">5. 压缩CSS</span><br><span class="line">6. 压缩JS</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>这些都是每个 Web 项目在构建、开发阶段需要做的事情。前端自动化构建环境可以把这些重复工作一次配置，多次重复执行，极大的提高开发效率。</p>
<p>构建工具： Gulp、Grunt、Webpack、…</p>
<h2 id="gulp-环境"><a href="#gulp-环境" class="headerlink" title="gulp 环境"></a>gulp 环境</h2><p>Gulp 是基于 Node.js 的，需要要安装 Node.js</p>
<h3 id="安装-4-0-版本"><a href="#安装-4-0-版本" class="headerlink" title="安装 # 4.0 版本"></a>安装 # 4.0 版本</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 检查 node 环境</span></span><br><span class="line">$ node -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># 全局安装 gulp</span></span><br><span class="line">$ npm install -g gulp</span><br><span class="line">$ gulp -v  <span class="comment">#4.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换到你的在项目根文件夹下，运行</span></span><br><span class="line">$ npm install gulp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 gulp 功能插件依赖包</span></span><br><span class="line">$ npm install gulp-less gulp-sass gulp-concat gulp-connect gulp-rename</span><br></pre></td></tr></table></figure>

<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>新建 <code>gulpfile.js</code> 配置文件放在项目根目录下</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// gulp3.x 配置不能直接在 4.0 上使用</span></span><br><span class="line"><span class="comment">// gulp4.0 配置内容</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入 gulp</span></span><br><span class="line"><span class="keyword">const</span> gulp = <span class="built_in">require</span>(<span class="string">&#x27;gulp&#x27;</span>)</span><br><span class="line"><span class="comment">// 引入组件</span></span><br><span class="line"><span class="keyword">const</span> less = <span class="built_in">require</span>(<span class="string">&#x27;gulp-less&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> fileinclude = <span class="built_in">require</span>(<span class="string">&#x27;gulp-file-include&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> connect = <span class="built_in">require</span>(<span class="string">&#x27;gulp-connect&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启动 serve</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">serve</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  connect.server(&#123;</span><br><span class="line">    root: <span class="string">&#x27;./&#x27;</span>,</span><br><span class="line">    port: <span class="string">&#x27;8888&#x27;</span>,</span><br><span class="line">    <span class="comment">// 启用https</span></span><br><span class="line">    <span class="comment">// https: true,</span></span><br><span class="line">    livereload: <span class="literal">true</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 编译 less</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compileLess</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    gulp</span><br><span class="line">      <span class="comment">// &#x27;!./**&#x27; 忽略文件</span></span><br><span class="line">      .src([<span class="string">&#x27;./less/*.less&#x27;</span>, <span class="string">&#x27;!./less/_*.less&#x27;</span>])</span><br><span class="line">      .pipe(less())</span><br><span class="line">      .pipe(gulp.dest(<span class="string">&#x27;./public/css&#x27;</span>))</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// html 刷新</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">refreshHtml</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src(<span class="string">&#x27;./*.html&#x27;</span>).pipe(connect.reload())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入外部 html 文件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compileHtml</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .src([<span class="string">&#x27;./*.html&#x27;</span>, <span class="string">&#x27;!./_*.html&#x27;</span>])</span><br><span class="line">    .pipe(</span><br><span class="line">      fileinclude(&#123;</span><br><span class="line">        prefix: <span class="string">&#x27;@@&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    )</span><br><span class="line">    .pipe(gulp.dest(<span class="string">&#x27;./public&#x27;</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 在 html 中使用 `@@include(&#x27;_header-aside.html&#x27;)` 引入公共 html 结构</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听文件变化</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">watch</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  gulp.watch([<span class="string">&#x27;./less&#x27;</span>], compileLess)</span><br><span class="line">  gulp.watch([<span class="string">&#x27;./image&#x27;</span>], compileImg)</span><br><span class="line">  gulp.watch([<span class="string">&#x27;./js&#x27;</span>], compileJs)</span><br><span class="line">  gulp.watch([<span class="string">&#x27;./*.html&#x27;</span>], compileHtml)</span><br><span class="line">  gulp.watch([<span class="string">&#x27;./public&#x27;</span>], refreshHtml)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认任务，执行 gulp 会自动执行的任务</span></span><br><span class="line">gulp.task(<span class="string">&#x27;default&#x27;</span>, gulp.parallel(serve, watch))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 复制 lib 文件夹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copyLib</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src(<span class="string">&#x27;./lib/**/*&#x27;</span>).pipe(gulp.dest(<span class="string">&#x27;./dest/lib&#x27;</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 清空 dest 文件夹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clean</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> del([<span class="string">&#x27;./dest&#x27;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="运行-gulp-任务"><a href="#运行-gulp-任务" class="headerlink" title="运行 gulp 任务"></a>运行 gulp 任务</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 执行定义的 default 任务</span></span><br><span class="line"><span class="comment"># $ gulp default</span></span><br><span class="line">$ gulp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 单独运行 sass 任务</span></span><br><span class="line">$ gulp less</span><br></pre></td></tr></table></figure>

<p><code>!./**</code> 忽略文件</p>
<p><code>gulp.parallel()</code> –并行运行任务</p>
<p><code>gulp.series()</code> –运行任务序列</p>
<h3 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">其他 gulp 插件参考</span><br><span class="line">gulp-imagemin: 		压缩图片</span><br><span class="line">gulp-minify-css: 	压缩css</span><br><span class="line">gulp-uglify:      压缩js</span><br><span class="line">gulp-concat:    	合并文件</span><br><span class="line">gulp-rename:  		重命名文件</span><br><span class="line">gulp-htmlmin: 		压缩html</span><br><span class="line">gulp-clean:      	清空文件夹</span><br><span class="line">del:              删除文件</span><br></pre></td></tr></table></figure>

<p>gulp-connect 启动服务本机可以打开，局域网下手机打不开解决办法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">connect.server(&#123;</span><br><span class="line">  host: <span class="string">&#x27;0.0.0.0&#x27;</span></span><br><span class="line">  或</span><br><span class="line">  host: <span class="string">&#x27;::&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在 gulp 3.x 版本中报错会暂停监听需重新开启任务，4.0 修复了此问题</p>
<p><a href="https://www.tuicool.com/articles/nAzqiaN">https://www.tuicool.com/articles/nAzqiaN</a></p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>前端自动化</tag>
      </tags>
  </entry>
  <entry>
    <title>将 html 内容转换成图片总结 html2canvas与dom-to-image</title>
    <url>/355.html</url>
    <content><![CDATA[<h3 id="html2canvas"><a href="#html2canvas" class="headerlink" title="html2canvas"></a>html2canvas</h3><p><a href="https://github.com/niklasvh/html2canvas">html2canvas</a></p>
<p>基本使用</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install html2canvas</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> html2canvas <span class="keyword">from</span> <span class="string">&#x27;html2canvas&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line"><span class="comment">// html2canvas(element, options)</span></span><br><span class="line"></span><br><span class="line">html2canvas(<span class="built_in">document</span>.body).then(<span class="function"><span class="keyword">function</span>(<span class="params">canvas</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// document.body.appendChild(canvas)</span></span><br><span class="line">  <span class="keyword">let</span> dataURL = canvas.toDataURL(<span class="string">&#x27;image/png&#x27;</span>) <span class="comment">// dataURL 为 base64 图片</span></span><br><span class="line">  <span class="comment">// var img = new Image()</span></span><br><span class="line">  <span class="comment">// img.src = dataURL</span></span><br><span class="line">  <span class="comment">// document.body.appendChild(img)</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>常用配置使用示例</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">  dpi: <span class="number">192</span>,</span><br><span class="line">  scale: <span class="number">2</span>, <span class="comment">// 放大</span></span><br><span class="line">  <span class="comment">// logging: true, //日志开关，便于查看html2canvas的内部执行流程</span></span><br><span class="line">  useCORS: <span class="literal">true</span> <span class="comment">// 开启跨域配置, (跨域图片，转换的时候会将跨域图片识别为空白,因此需要开启此选项)</span></span><br><span class="line">&#125;</span><br><span class="line">html2canvas(<span class="built_in">document</span>.querySelector(<span class="string">&#x27;#app&#x27;</span>), options).then(<span class="function"><span class="params">canvas</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(canvas)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>html2canvas 生成图片模糊问题</p>
<ol>
<li>html2canvas 第二个参数配置 <code>scale</code> 和 <code>dpi</code>, <a href="https://github.com/niklasvh/html2canvas/pull/1087">参考</a></li>
<li>如果要生成的 dom 中有背景图片，将背景图片换成 div 包裹 img 标签形式，不要通过css设置成background</li>
</ol>
<h3 id="dom-to-image"><a href="#dom-to-image" class="headerlink" title="dom-to-image"></a>dom-to-image</h3><p><a href="https://github.com/tsayen/dom-to-image">dom-to-image</a></p>
<p>基本使用</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install dom-to-image</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* in ES 6 */</span></span><br><span class="line"><span class="keyword">import</span> domtoimage <span class="keyword">from</span> <span class="string">&#x27;dom-to-image&#x27;</span></span><br><span class="line"><span class="comment">/* in ES 5 */</span></span><br><span class="line"><span class="keyword">var</span> domtoimage = <span class="built_in">require</span>(<span class="string">&#x27;dom-to-image&#x27;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> node = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;my-node&#x27;</span>)</span><br><span class="line"></span><br><span class="line">domtoimage</span><br><span class="line">  .toPng(node)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">dataUrl</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> img = <span class="keyword">new</span> Image()</span><br><span class="line">    img.src = dataUrl</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(img)</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">&#x27;oops, something went wrong!&#x27;</span>, error)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p>将 base64 转换成 file 对象用于上传到服务器</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">b64ToFile</span>(<span class="params">dataurl</span>)</span>  &#123;</span><br><span class="line">  <span class="keyword">let</span> arr = dataurl.split(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> mime = arr[<span class="number">0</span>].match(<span class="regexp">/:(.*?);/</span>)[<span class="number">1</span>]</span><br><span class="line">  <span class="keyword">let</span> bstr = atob(arr[<span class="number">1</span>])</span><br><span class="line">  <span class="keyword">let</span> n = bstr.length</span><br><span class="line">  <span class="keyword">let</span> u8arr = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(n)</span><br><span class="line">  <span class="keyword">while</span> (n--) &#123;</span><br><span class="line">      u8arr[n] = bstr.charCodeAt(n)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> file =  <span class="keyword">new</span> File([u8arr], <span class="string">&#x27;filename.png&#x27;</span>, &#123;<span class="attr">type</span>:mime&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>canvas</tag>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title>input file 控件</title>
    <url>/406.html</url>
    <content><![CDATA[<h2 id="限制上传文件类型"><a href="#限制上传文件类型" class="headerlink" title="限制上传文件类型"></a>限制上传文件类型</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;File1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">accept</span>=<span class="string">&quot;.xls,.doc,.txt,.pdf&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<details>
<summary>文件类型</summary>
<pre>
.3gpp audio/3gpp， video/3gpp 3GPP Audio/Video
.ac3 audio/ac3 AC3 Audio
.asf allpication/vnd.ms-asf Advanced Streaming Format
.au audio/basic AU Audio
.css text/css Cascading Style Sheets
.csv text/csv Comma Separated Values
.doc application/msword MS Word Document
.dot application/msword MS Word Template
.dtd application/xml-dtd Document Type Definition
.dwg image/vnd.dwg AutoCAD Drawing Database
.dxf image/vnd.dxf AutoCAD Drawing Interchange Format
.gif image/gif Graphic Interchange Format
.htm text/html HyperText Markup Language
.html text/html HyperText Markup Language
.jp2 image/jp2 JPEG-2000
.jpe image/jpeg JPEG
.jpeg image/jpeg JPEG
.jpg image/jpeg JPEG
.js text/javascript， application/javascript JavaScript
.json application/json JavaScript Object Notation
.mp2 audio/mpeg， video/mpeg MPEG Audio/Video Stream， Layer II
.mp3 audio/mpeg MPEG Audio Stream， Layer III
.mp4 audio/mp4， video/mp4 MPEG-4 Audio/Video
.mpeg video/mpeg MPEG Video Stream， Layer II
.mpg video/mpeg MPEG Video Stream， Layer II
.mpp application/vnd.ms-project MS Project Project
.ogg application/ogg， audio/ogg Ogg Vorbis
.pdf application/pdf Portable Document Format
.png image/png Portable Network Graphics
.pot application/vnd.ms-powerpoint MS PowerPoint Template
.pps application/vnd.ms-powerpoint MS PowerPoint Slideshow
.ppt application/vnd.ms-powerpoint MS PowerPoint Presentation
.rtf application/rtf， text/rtf Rich Text Format
.svf image/vnd.svf Simple Vector Format
.tif image/tiff Tagged Image Format File
.tiff image/tiff Tagged Image Format File
.txt text/plain Plain Text
.wdb application/vnd.ms-works MS Works Database
.wps application/vnd.ms-works Works Text Document
.xhtml application/xhtml+xml Extensible HyperText Markup Language
.xlc application/vnd.ms-excel MS Excel Chart
.xlm application/vnd.ms-excel MS Excel Macro
.xls application/vnd.ms-excel MS Excel Spreadsheet
.xlt application/vnd.ms-excel MS Excel Template
.xlw application/vnd.ms-excel MS Excel Workspace
.xml text/xml， application/xml Extensible Markup Language
.zip aplication/zip Compressed Archive
</pre>
</details>

<h2 id="清空-value"><a href="#清空-value" class="headerlink" title="清空 value"></a>清空 value</h2><p>使用 input file 进行文件上传时，重复选择相同文件时，change 事件不再触发<br>解决方式：手动将 file 的 value 值设置为空</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;file&quot;</span> <span class="attr">accept</span>=<span class="string">&quot;image/gif,image/jpeg&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;uploadFile($event)&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$event.target.value = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="comment">// 或</span></span><br><span class="line"><span class="keyword">var</span> file = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;file&#x27;</span>)</span><br><span class="line">file.value = <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>预解析, async, defer 以及 preload</title>
    <url>/391.html</url>
    <content><![CDATA[<h3 id="预解析"><a href="#预解析" class="headerlink" title="预解析"></a>预解析</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Optimizing_your_pages_for_speculative_parsing">https://developer.mozilla.org/zh-CN/docs/Web/HTML/Optimizing_your_pages_for_speculative_parsing</a></p>
<h3 id="link-标签-ref-属性值-prefetch-preload-用于预加载"><a href="#link-标签-ref-属性值-prefetch-preload-用于预加载" class="headerlink" title="link 标签 ref 属性值 prefetch preload 用于预加载"></a>link 标签 ref 属性值 prefetch preload 用于预加载</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">ref</span>=<span class="string">&quot;preload&quot;</span> <span class="attr">href</span>=<span class="string">&quot;*.js&quot;</span> <span class="attr">as</span>=<span class="string">&quot;script&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- preload需要写上正确的as属性,如果不写或错误，等同于XHR请求，优先级非常低 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;preload&quot;</span> <span class="attr">href</span>=<span class="string">&quot;font.woff&quot;</span> <span class="attr">as</span>=<span class="string">&quot;font&quot;</span> <span class="attr">crossorigin</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 预加载字体你还必须设置crossorigin 属性 --&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>preload 是用于预加载当前页的资源，浏览器会优先加载它们(加载后并不执行，在需要执行的时候再执行)</li>
</ul>
<p>将加载和执行分离开，可不阻塞渲染和 document 的 onload 事件<br>提前加载指定资源，不再出现依赖的 font 字体隔了一段时间才刷出</p>
<ul>
<li><p>prefetch 是用于预加载后续页面使用的资源，浏览器也会加载它们，但优先级不高</p>
</li>
<li><p>避免混用 preload 和 prefetch，混用的话，并不会复用资源，而是会重复加载</p>
</li>
</ul>
<p>插入的脚本（无论在什么位置）在网络优先级中是很低级</p>
<h3 id="script-标签的-defer-和-async-异步加载"><a href="#script-标签的-defer-和-async-异步加载" class="headerlink" title="script 标签的 defer 和 async 异步加载"></a>script 标签的 defer 和 async 异步加载</h3><p>这两个属性都告诉浏览器，它可以 “在后台” 加载脚本的同时继续解析 HTML，并在脚本加载完之后再执行。这样，脚本下载就不会阻塞 DOM 构建和页面渲染了</p>
<p>defer 和 async 之间的不同是他们开始执行脚本的时机的不同</p>
<p>async(H5) 一旦脚本可用，则会异步执行（仅适用于外部脚本） 脚本在它们完成下载完成后的第一时间执行，如果一个指定 async 的脚本很快就完成了下载，那么它的执行会阻塞 DOM 构建以及所有在之后才完成下载的同步脚本。</p>
<p>defer 规定当页面已完成解析后，执行脚本（仅适用于外部脚本） 脚本会按照它在 HTML 中出现的顺序执行，并且不会阻塞解析。</p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML5</title>
    <url>/395.html</url>
    <content><![CDATA[<h2 id="什么是-HTML5"><a href="#什么是-HTML5" class="headerlink" title="什么是 HTML5"></a>什么是 HTML5</h2><blockquote>
<p>HTML5 并不仅仅是作为 <strong>HTML 标记语言的一个最新版本</strong>， 更重要的是它<strong>制定了 web 应用开发的一系列标准</strong>，成为第一个将 web 作为应用开发平台的 HTML 语言。</p>
</blockquote>
<p>HTML5 定义了一系列新元素，如 <strong>新语义标签、多媒体标</strong> 签等，可以帮助开发者开发更加丰富的应用，同时有令人眼花缭乱的 css3，还提供了一些 Javascript API，如地理定位、重力感应、硬件访问等，可以在浏览器内实现类原生应用，制作 webApp，甚至结合 Canvas 我们可开发网页游戏</p>
<p>我们日常讨论的 H5 其实指的是一个泛称，它是由<strong>HTML5+CSS3+javascript</strong> 等技术组合而成的一个应用开发平台</p>
<h2 id="HTML5-的历史"><a href="#HTML5-的历史" class="headerlink" title="HTML5 的历史"></a>HTML5 的历史</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. WHATWG: Web Hypertext Application Technology Working。 WHATWG成立的原因是W3C意图放弃HTML，而力图发展XML技术</span><br><span class="line">2. HTML5 的第一份正式草案已于2008年1月22日公布</span><br><span class="line">3. 2014年10月29日，万维网联盟宣布，经过接近8年的艰苦努力，该标准规范终于制定完成</span><br></pre></td></tr></table></figure>

<p>思考：问什么 HTML5 在 2008 年就发布草案了，到 2014 年才火起来？</p>
<p>因为移动端的推动，HTML 在老的浏览器上兼容性很严重，并且 HTML5 很多新特性其实就是为移动端而出现的，可以说<strong>HTML5 是为移动端而生的</strong></p>
<h1 id="HTML5-语义化标签"><a href="#HTML5-语义化标签" class="headerlink" title="HTML5 语义化标签"></a>HTML5 语义化标签</h1><h2 id="常用语义化标签"><a href="#常用语义化标签" class="headerlink" title="常用语义化标签"></a>常用语义化标签</h2><blockquote>
<p>在 HTML5 之前，我们布局大多使用 div，但是 div 并没有语义化，HTML5 推出了一系列的语义化标签，可以用来表示 header、footer 等。</p>
</blockquote>
<p>HTML5 新的语义化标签</p>
<p><code>header</code> 头部、<code>nav</code> 导航、<code>footer</code> 底部、<code>aside</code> 侧边栏、<code>article</code> 文章、<code>section</code> 区块、<code>main</code> 主体区域</p>
<p>本质上新语义标签与<code>&lt;div&gt;</code>、<code>&lt;span&gt;</code>没有区别，只是其具有语义性，使用时除了在 HTML 结构上需要注意外，其它和普通标签的使用无任何差别，<code>&lt;nav&gt;</code>完全可以理解成<code>&lt;div class=&quot;nav&quot;&gt;</code>。不要好奇，它只是一个标签！就是增加了语义性，更加利于 SEO 的优化。</p>
<p>html5 还推出了一些其他的标签：<a href="http://www.w3school.com.cn/tags/index.asp">http://www.w3school.com.cn/tags/index.asp</a></p>
<h2 id="兼容性处理"><a href="#兼容性处理" class="headerlink" title="兼容性处理"></a>兼容性处理</h2><p>IE678 不识别这个标签</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.createElement(<span class="string">&#x27;header&#x27;</span>) <span class="comment">// 创建这个标签即可让IE678识别</span></span><br><span class="line"><span class="comment">// 创建的标签默认是行内样式。</span></span><br><span class="line"><span class="comment">// 还需给标签加一个 display:block 的属性。</span></span><br></pre></td></tr></table></figure>

<p>借助 <code>html5shiv.js</code></p>
<blockquote>
<p>我们每次都要去创建标签，并且还需要设置 display：block 属性，非常麻烦，因此我们可以引入一个第三方 js 文件，这个 js 文件的功能就是创建元素和设置 display 属性。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- [if lte IE 8] &gt;  // lte ==&gt; 小于等于</span></span><br><span class="line"><span class="comment">&lt;script src=&quot;js/html5shiv.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">&lt;! [endif] --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 当 ie 浏览器的版本小于等于8的时候，才会引入 html5shiv.js --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- css hack --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 条件注释 IE独有的注释 --&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="类名操作-重点"><a href="#类名操作-重点" class="headerlink" title="类名操作(重点)"></a>类名操作(重点)</h1><blockquote>
<p>js 在 H5 中给所有的 DOM 对象新增了一个属性 classList</p>
<p>classList 是一个集合，会存储某个元素上所有的类名，使用 classList 来替代 className 操作 class 类</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 添加类</span></span><br><span class="line">div.classList.add(<span class="string">&#x27;classname&#x27;</span>)</span><br><span class="line"><span class="comment">// 移除类</span></span><br><span class="line">div.classList.remove(<span class="string">&#x27;classname&#x27;</span>)</span><br><span class="line"><span class="comment">// 切换类</span></span><br><span class="line">div.classList.toggle(<span class="string">&#x27;classname&#x27;</span>)</span><br><span class="line"><span class="comment">// 判断类</span></span><br><span class="line">div.classList.contains(<span class="string">&#x27;classname&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>【tab 栏案例】</p>
<h1 id="自定义属性操作（重点）"><a href="#自定义属性操作（重点）" class="headerlink" title="自定义属性操作（重点）"></a>自定义属性操作（重点）</h1><blockquote>
<p>H5 规定，以后但凡给标签增加自定义属性，都应该用 <code>data-</code> 开头 (规范)</p>
<p>H5 给所有的 DOM 对象增加了一个 <code>dataset</code> 的属性，这个属性中会包含所有 data- 开头的属性</p>
</blockquote>
<ul>
<li>html 5 中操作自定义属性 <code>dataset</code> 属性</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span> <span class="attr">data-name</span>=<span class="string">&quot;zs&quot;</span> <span class="attr">data-age</span>=<span class="string">&quot;10&quot;</span> <span class="attr">data-user-name</span>=<span class="string">&quot;ls&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> box = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#box&#x27;</span>)</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(box.dataset) <span class="comment">// DOMStringMap &#123;name: &#x27;zs&#x27;, age: &#x27;10&#x27;, userName: &#x27;ls&#x27;&#125;</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(box.dataset.name) <span class="comment">// zs</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(box.dataset[<span class="string">&#x27;age&#x27;</span>]) <span class="comment">// 10</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(box.dataset.userName) <span class="comment">// ls</span></span></span><br><span class="line"><span class="javascript">  box.dataset.aaBb = <span class="string">&#x27;cc&#x27;</span> <span class="comment">// 在html结构中或添加 data-aa-bb=&quot;cc&quot; 的自定义属性</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong>html 中属性是忽略大小写的，相当于是小写字母，如果需要大写，应使用中划线 <code>-</code> 进行分隔，在 js 中会转换成驼峰的形式，如<code>data-user-name ==&gt; userName</code></p>
<ul>
<li>jquery 中操作自定义属性</li>
</ul>
<p>jquery 并没有把 <code>data-</code> 当成自定义属性来用，jq 中封装了 <code>data()</code> 方法</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">data-id</span>=<span class="string">&quot;1&quot;</span> <span class="attr">data-name</span>=<span class="string">&quot;zs&quot;</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span> <span class="attr">data-a</span>=<span class="string">&#x27;&#123;&quot;b&quot;:&quot;c&quot;&#125;&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log($(<span class="string">&#x27;#box&#x27;</span>).data()) <span class="comment">// &#123;id: 1, name: &quot;zs&quot;&#125;</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">// console.log($(&#x27;#box&#x27;).attr()) // error</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(box.dataset) <span class="comment">// DOMStringMap&#123;id: &quot;1&quot;, name: &quot;zs&quot;&#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log($(<span class="string">&#x27;#box&#x27;</span>).data(<span class="string">&#x27;id&#x27;</span>)) <span class="comment">// 1 =&gt; 获取到自定义属性</span></span></span><br><span class="line"><span class="javascript">  $(<span class="string">&#x27;#box&#x27;</span>).data(<span class="string">&#x27;id&#x27;</span>, <span class="number">2</span>) <span class="comment">// 并不会修改原标签中的自定义属性</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log($(<span class="string">&#x27;#box&#x27;</span>).data(<span class="string">&#x27;id&#x27;</span>)) <span class="comment">// 2 =&gt; html中data-id依然是1</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log($(<span class="string">&#x27;#box&#x27;</span>).attr(<span class="string">&#x27;data-id&#x27;</span>)) <span class="comment">// 1</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(box.dataset[<span class="string">&#x27;id&#x27;</span>]) <span class="comment">// 1 =&gt; 获取到的还是原来的 data-id</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">  $(<span class="string">&#x27;#box&#x27;</span>).attr(<span class="string">&#x27;data-id&#x27;</span>, <span class="number">3</span>)</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log($(<span class="string">&#x27;#box&#x27;</span>).data(<span class="string">&#x27;id&#x27;</span>)) <span class="comment">// 3</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(box.dataset[<span class="string">&#x27;id&#x27;</span>]) <span class="comment">// 3</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="comment">// 属性里使用json语法，但通过data()设置的不能解析成对象</span></span></span><br><span class="line"><span class="javascript">  $(<span class="string">&#x27;#box&#x27;</span>).data(<span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;&#123;&quot;e&quot;:&quot;f&quot;&#125;&#x27;</span>)</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log($(<span class="string">&#x27;#box&#x27;</span>).data(<span class="string">&#x27;a&#x27;</span>)) <span class="comment">// &#123;b: &quot;c&quot;&#125; =&gt; 对象</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log($(<span class="string">&#x27;#box&#x27;</span>).data(<span class="string">&#x27;d&#x27;</span>)) <span class="comment">// &#x27;&#123;&quot;e&quot;:&quot;f&quot;&#125;&#x27;</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">  $(<span class="string">&#x27;#box&#x27;</span>).removeData() <span class="comment">// 删除之前通过 data() 方法设置的数据</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>!&gt; jq 的 data() 方法内部使用了缓存来实现，该方法设置的属性只能通过该方法获取，在 html 页面中看不到属性值，通过原生 dataset 属性也获取不到值</p>
<h1 id="网络状态"><a href="#网络状态" class="headerlink" title="网络状态"></a>网络状态</h1><blockquote>
<p>在移动端，我们经常需要检测设置是在线还是离线，HTML5 为此定义了一个 navigator.onLine 属性，这个属性用于检测设备是否联网。<strong>navigator.onLine</strong> 在不同浏览器中有细微的差别。</p>
</blockquote>
<h2 id="网络状态-1"><a href="#网络状态-1" class="headerlink" title="网络状态"></a>网络状态</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">navigator.onLine 返回用户当前的网络状况，是一个布尔值</span><br><span class="line">1. 如果浏览器连不上网(包括局域网)，就是离线状态，也就是脱机状态，会返回 false</span><br><span class="line">2. 否则就是在线状态，返回 true</span><br></pre></td></tr></table></figure>

<p><strong>注意：返回 true 不一定就是说一定能访问互联网，因为有可能连接的是局域网。但是返回 false 则表示一定连不上网。</strong></p>
<h2 id="监听网络变化"><a href="#监听网络变化" class="headerlink" title="监听网络变化"></a>监听网络变化</h2><blockquote>
<p>为了更好的确定网络是否连接，HTML5 还定义了两个事件，用于监听网络状态的变化。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 网络连接时会被调用</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;online&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">&#x27;online&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当网络断开时会被调用</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;offline&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">&#x27;offline&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="地理位置"><a href="#地理位置" class="headerlink" title="地理位置"></a>地理位置</h1><blockquote>
<p>在 HTML 规范中，增加了获取用户地理信息的 API，这样使得我们可以基于用户位置开发互联网应用，即基于位置服务 LBS(Location Base Service)</p>
</blockquote>
<h2 id="隐私"><a href="#隐私" class="headerlink" title="隐私"></a>隐私</h2><p>HTML5 规范提供了一套保护用户隐私的机制。必须先得到用户明确许可，才能获取用户的位置信息。<strong>在获取地理位置之前，会询问用户，只有在获得许可之后，才能获取到用户的位置信息。</strong></p>
<p>H5 提供的获取地理位置信息并不是特别的精确，会一定的误差，如果需要非常精确的定位，还是需要使用安卓或者 ios，访问基于操作系统的方法。 （小程序）</p>
<h2 id="相关的方法"><a href="#相关的方法" class="headerlink" title="相关的方法"></a>相关的方法</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// successCallback:获取成功后会调用,并返回一个position对象，里面包含了地理位置信息</span></span><br><span class="line"><span class="comment">// 获取失败了会调用，并返回error对象，里面包含了错误信息。</span></span><br><span class="line"><span class="comment">// 获取当前的地理位置信息</span></span><br><span class="line">navigator.geolocation.getCurrentPosition(successCallback, errorCallback)</span><br><span class="line"><span class="comment">// 重复的获取当前的地理位置信息</span></span><br><span class="line">navigator.geolocation.watchPosition(successCallback, errorCallback)</span><br></pre></td></tr></table></figure>

<p>实例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">navigator.geolocation.getCurrentPosition(</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">position</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 定位成功会调用该方</span></span><br><span class="line">    <span class="comment">// 法谷歌浏览器进行了限制，看不到，可以再IE浏览器下查看</span></span><br><span class="line">    <span class="comment">// position.coords.latitude 纬度</span></span><br><span class="line">    <span class="comment">// position.coords.longitude 经度</span></span><br><span class="line">    <span class="comment">// position.coords.accuracy 精度</span></span><br><span class="line">    <span class="comment">// position.coords.altitude 海拔高度</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 定位失败会调用该方法</span></span><br><span class="line">    <span class="comment">// error 是错误信息</span></span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><strong>苹果浏览器对 webkit 定位权限进行了修改，所有定位请求的页面必须是 https 协议的。</strong></p>
<h2 id="百度地图、高德地图、腾讯地图"><a href="#百度地图、高德地图、腾讯地图" class="headerlink" title="百度地图、高德地图、腾讯地图"></a>百度地图、高德地图、腾讯地图</h2><blockquote>
<p>仅仅获取到经纬度对于用户来说意义并不大，因为用户也不知道经度和纬度表示的是地球上的哪一个地方，因为我们可以结合百度地图，准确的将用户的位置显示出来。</p>
</blockquote>
<p>百度地图官网：<a href="http://lbsyun.baidu.com/">http://lbsyun.baidu.com/</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. 在开发中，找到 javascript API</span><br><span class="line">2. 直接查看示例 demo</span><br><span class="line">3. 复制相应的代码，替换掉秘钥就行，秘钥只需创建一个新的应用就可以了</span><br></pre></td></tr></table></figure>

<h1 id="web-存储"><a href="#web-存储" class="headerlink" title="web 存储"></a>web 存储</h1><blockquote>
<p>在代码执行的时候，数据都是存储在内存中的，当页面关闭或者浏览器关闭的时候，内存就被释放掉了。数据只有存储在硬盘上，才不会被释放。</p>
</blockquote>
<h2 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h2><p>特点：</p>
<ul>
<li>在浏览器端的存储数据的容器</li>
<li>大小 4k</li>
<li>生命周期，默认会话级别，但是可以设置过期时间</li>
<li>cookie 中的数据可以在同一个网站的页面共享</li>
<li>cookie 中的数据，在请求时会进行自动携带</li>
<li>不同浏览器的 cookie 不能共享</li>
<li>cookie 是以字符串形式存在的，这个字符串有固定的格式：key=value;key1=value1；在获取 cookie 内容时，一般需要通过正则或者字符串的方法进行处理，转换成对象，最终得到数据</li>
<li>一般用于存储 sessionId，可以实现登录状态保持 (会话保持)</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.cookie = <span class="string">&#x27;name=zhangsan&#x27;</span></span><br><span class="line"><span class="built_in">document</span>.cookie = <span class="string">&#x27;age=18&#x27;</span></span><br><span class="line"><span class="built_in">document</span>.cookie = <span class="string">&#x27;sex=23&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置过期时间</span></span><br><span class="line"><span class="built_in">document</span>.cookie = <span class="string">&#x27;sex=12;max-age=3600&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取cookie</span></span><br><span class="line"><span class="keyword">var</span> result = <span class="built_in">document</span>.cookie</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br></pre></td></tr></table></figure>

<h2 id="WebStorage"><a href="#WebStorage" class="headerlink" title="WebStorage"></a>WebStorage</h2><blockquote>
<p>HTML5 规范提出使用 sessionStorage 和 localStorage 存储数据。设置、读取、删除操作很方便</p>
</blockquote>
<ul>
<li><p>sessionStorage 和 localStorage 特点</p>
<ul>
<li>都保存在客户端</li>
<li>大小为 5M 左右</li>
<li>使用方法相同</li>
<li>以键值对的方式，存储字符串格式的数据</li>
</ul>
</li>
<li><p>sessionStorage 和 localStorage 区别</p>
<ul>
<li>sessionStorage 生命周期默认为一个会话周期，且不能设置周期，一旦关闭浏览器，就销毁了，不能在多个窗口下共享数据</li>
<li>localStorage 永久生效，除非手动删除，可以多个窗口共享</li>
</ul>
</li>
<li><p>使用方法</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">setItem(key, value) <span class="comment">// 设置存储内容</span></span><br><span class="line">getItem(key) <span class="comment">// 读取存储内容</span></span><br><span class="line">removeItem(key) <span class="comment">// 删除键值为key的存储内容</span></span><br><span class="line">clear() <span class="comment">// 清空所有存储内容（谨慎使用）</span></span><br></pre></td></tr></table></figure>

<p>存取复杂数据类型：先将复杂数据转换成 JSON 字符串 <code>JSON.stringify(obj/arr)</code> 在进行存储；使用时将 JSON 字符串转换成复杂数据类型 <code>JSON.parse( jsonStr )</code></p>
<p>【案例-换肤效果】</p>
<h2 id="Cookie-和-WebStorage-比较"><a href="#Cookie-和-WebStorage-比较" class="headerlink" title="Cookie 和 WebStorage 比较"></a>Cookie 和 WebStorage 比较</h2><p><strong>cookie</strong></p>
<ul>
<li>大小受限</li>
<li>用户可以操作（禁用）cookie，使功能受限</li>
<li>安全性较低</li>
<li>有些状态不可能保存在客户端。</li>
<li>每次访问都要传送 cookie 给服务器，浪费带宽</li>
</ul>
<p><strong>WebStorage</strong></p>
<ul>
<li>存储空间更大：cookie 为 4KB，而 WebStorage 是 5MB</li>
<li>WebStorage 不会传送到服务器，存储在本地的数据可以直接获取，速度更快，并且减少了客户端和服务器端的交互，节省了网络流量</li>
<li>对于那种只需要在用户浏览一组页面期间保存而关闭浏览器后就可以丢弃的数据，sessionStorage 会非常方便</li>
<li>安全性：WebStorage 不会随着 HTTP header 发送到服务器端，所以安全性相对于 cookie 来说比较高一些，不会担心截获，但是仍然存在伪造问题</li>
<li>WebStorage 提供了一些方法，数据操作比 cookie 方便</li>
</ul>
<h1 id="自定义播放器"><a href="#自定义播放器" class="headerlink" title="自定义播放器"></a>自定义播放器</h1><p>全屏切换 API：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// requestFullScreen 这个方法还没有标准化，需要添加私有前缀</span></span><br><span class="line">video.requestFullScreen()</span><br><span class="line">video.webkitRequestFullScreen()</span><br><span class="line">video.mozRequestFullScreen()</span><br></pre></td></tr></table></figure>

<p>video/audio 属性：</p>
<ul>
<li>currentTime: 设置或返回音频/视频中的当前播放位置（以秒计）</li>
<li>duration: 返回当前音频/视频的长度（以秒计）</li>
<li>autoplay: 默认 false 设置或返回是否在加载完成后随即播放音频/视频</li>
<li>volume: 设置或返回音频/视频的音量</li>
<li>paused: 设置或返回音频/视频是否暂停， true 指示音频/视频已暂停</li>
</ul>
<p>方法：</p>
<ul>
<li><p>load(): 重新加载音频/视频元素</p>
</li>
<li><p>play(): 开始播放音频/视频</p>
</li>
<li><p>pause(): 暂停当前播放的音频/视频</p>
</li>
</ul>
<p>事件：</p>
<ul>
<li>timeupdate: 播放进度更改时触发</li>
</ul>
<p>参考文档<br><a href="http://www.w3school.com.cn/tags/html_ref_audio_video_dom.asp">http://www.w3school.com.cn/tags/html_ref_audio_video_dom.asp</a></p>
<p>推荐：<a href="https://www.awesomes.cn/repo/videojs/video-js">https://www.awesomes.cn/repo/videojs/video-js</a></p>
<h1 id="文件读取"><a href="#文件读取" class="headerlink" title="文件读取"></a>文件读取</h1><blockquote>
<p>通过 FileReader 对象我们可以读取本地存储的文件（用户通过 input:file 上传的文件），可以使用 File 对象来指定所要读取的文件或数据。其中 File 对象可以是来自用户在一个<code>&lt;input&gt;</code>元素上选择文件后返回的 FileList 对象，也可以来自由拖放操作生成的 DataTransfer</p>
</blockquote>
<h2 id="files"><a href="#files" class="headerlink" title="files"></a>files</h2><p>对于 file 类型的 input 框，在这个 DOM 对象中，存在一个 files 属性，这个属性是 FileList 对象，是一个伪数组，里面存储着上传的所有文件，当 input 框指定了 multiple 属性之后，就可以上传多个文件了。</p>
<p>也就是说，通过 files 这个属性，我们就可以获取到所有上传的文件。</p>
<h2 id="file-对象"><a href="#file-对象" class="headerlink" title="file 对象"></a>file 对象</h2><p>File 对象中包含了文件的最后修改时间、文件名、文件类型等信息。</p>
<h2 id="FileReader-对象"><a href="#FileReader-对象" class="headerlink" title="FileReader 对象"></a>FileReader 对象</h2><p>FileReader 是一个 HTML5 新增的对象，用于读取文件（必须通过 input:file 上传）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> file = input.files[<span class="number">0</span>]</span><br><span class="line"><span class="comment">// 创建一个fileReader对象</span></span><br><span class="line"><span class="keyword">var</span> fr = <span class="keyword">new</span> FileReader</span><br><span class="line"><span class="comment">// 读取文件的两个方法</span></span><br><span class="line">fr.readAsText(file) 以文本的方式读取文件 ,文本文件</span><br><span class="line">fr.readAsDataURL(file) 以DataURL形式读取文件，图片，视频</span><br><span class="line"><span class="comment">// 文件读取完成事件：</span></span><br><span class="line">fr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// 当文件读取完成，可以通过result属性获取结果</span></span><br><span class="line">  <span class="built_in">console</span>.log(fr.result)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>案例：图片预览</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. FileReader 是异步的</span></span><br><span class="line"><span class="keyword">var</span> file = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;file&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;box&#x27;</span>)</span><br><span class="line">file.addEventListener(<span class="string">&#x27;change&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.dir(<span class="built_in">this</span>) <span class="comment">// file 中files 属性里面存储了所有上传的文件</span></span><br><span class="line">  <span class="comment">// 这个data就是我们上传的那个文件</span></span><br><span class="line">  <span class="keyword">var</span> data = file.files[<span class="number">0</span>]</span><br><span class="line">  <span class="comment">// 1. 创建一个文件读取器</span></span><br><span class="line">  <span class="keyword">var</span> fr = <span class="keyword">new</span> FileReader()</span><br><span class="line">  <span class="comment">// 2. 让文件读取器读取整个文件</span></span><br><span class="line">  fr.readAsDataURL(data)</span><br><span class="line">  <span class="comment">// 3. 等待文件读取完</span></span><br><span class="line">  <span class="comment">// onload：文件读取完成后，就会触发</span></span><br><span class="line">  fr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 通过 fr.result 就可以获取到最终的结果</span></span><br><span class="line">    <span class="keyword">var</span> img = <span class="built_in">document</span>.createElement(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">    img.src = fr.result</span><br><span class="line">    box.innerHTML = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    box.appendChild(img)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 2. URL.createObjectURL(file)  缺点： 1. 试验中  2. 同步（阻塞）</span></span><br><span class="line"><span class="keyword">var</span> file = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;file&#x27;</span>)</span><br><span class="line">file.addEventListener(<span class="string">&#x27;change&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> data = <span class="built_in">this</span>.files[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">var</span> result = URL.createObjectURL(data)</span><br><span class="line">  img.src = result</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title>jquery-fileupload 插件</title>
    <url>/413.html</url>
    <content><![CDATA[<p>github 地址：<a href="https://github.com/blueimp/jQuery-File-Upload">https://github.com/blueimp/jQuery-File-Upload</a></p>
<p>中文文档：<a href="http://www.jq22.com/jquery-info230">http://www.jq22.com/jquery-info230</a></p>
<h2 id="引包"><a href="#引包" class="headerlink" title="引包"></a>引包</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- jquery-fileupload依赖与jquery --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- jquery ui小部件，上传插件依赖了jquery ui的小部件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vendor/jquery.ui.widget.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 如果上传图片需要跨域，那么需要引入这个js文件，如果不跨域，则不需要引入 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/jquery.iframe-transport.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- jquery上传插件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/jquery.fileupload.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="html-结构"><a href="#html-结构" class="headerlink" title="html 结构"></a>html 结构</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- name指定图片上传时的name属性 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- data-url指定图片上传时的接口地址 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- multiple指定多文件上传 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;fileupload&quot;</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;files&quot;</span> <span class="attr">data-url</span>=<span class="string">&quot;server/php/&quot;</span> <span class="attr">multiple</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>multiple 上传多文件（实质上是发送多次单文件异步上传请求）</p>
<h2 id="js-代码"><a href="#js-代码" class="headerlink" title="js 代码"></a>js 代码</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;#fileupload&#x27;</span>).fileupload(&#123;</span><br><span class="line">  dataType: <span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">  <span class="comment">// e：事件对象</span></span><br><span class="line">  <span class="comment">// data：图片上传后的对象，通过data.result.picAddr 可以获取上传后的图片地址</span></span><br><span class="line">  done: <span class="function"><span class="keyword">function</span>(<span class="params">e, data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>jquery</tag>
      </tags>
  </entry>
  <entry>
    <title>jquery 中 AJAX 的全局事件</title>
    <url>/414.html</url>
    <content><![CDATA[<h2 id="jquery-中-AJAX-的全局事件"><a href="#jquery-中-AJAX-的全局事件" class="headerlink" title="jquery 中 AJAX 的全局事件"></a>jquery 中 AJAX 的全局事件</h2><blockquote>
<p>ajax 提供了 6 个全局函数，会被页面中所有的 ajax 请求触发，在不同时间点会触发不同的全局事件。</p>
</blockquote>
<p><a href="https://api.jquery.com/category/ajax/global-ajax-event-handlers/">https://api.jquery.com/category/ajax/global-ajax-event-handlers/</a></p>
<p>在页面中会有很多的 ajax 请求，但是这些 ajax 请求都有相同的消息机制，比如我们需要在 ajax 请求发送之前弹出了一个提示框，提示”正在读取数据….” 在 ajax 请求成功时显示”获取数据成功…”,在 ajax 结束后隐藏提示框。如果不使用全局事件，那么需要在每一个 ajax 的 beforeSend、success、complete 回调函数中都加上相同的代码。</p>
<ul>
<li>jquery 的全局事件需要给 <code>document</code> 注册（固定写法）</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ajaxStart(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>全局事件的执行时机</li>
</ul>
<ol>
<li><code>ajaxStart</code>： 在第一个 ajax 请求开始时触发 first start</li>
<li><code>ajaxSend</code>： 在一个 ajax 请求开始之前触发（在 beforeSend 回调函数之后）one start</li>
<li><code>ajaxSuccess</code>： 在一个 ajax 请求成功之后触发（在 success 回调函数之后触发）one success</li>
<li><code>ajaxComplete</code>： 在一个 ajax 请求完成时触发（在 complete 回调函数之后触发） one complete</li>
<li><code>ajaxError</code>： 在一个 ajax 请求失败时触发（在 error 回调函数之后触发）</li>
<li><code>ajaxStop</code>： 在所有的 ajax 请求完成之后触发 all complete</li>
</ol>
<p>若<code>$.ajax()</code> global 参数设置为 false，则 ajax 全局事件不会被触发，global 参数默认为 true</p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>jquery</tag>
        <tag>ajax</tag>
      </tags>
  </entry>
  <entry>
    <title>+0 -0 Number.NaN NaN undefined null &#39;&#39;  相等性判断</title>
    <url>/397.html</url>
    <content><![CDATA[<h2 id="主要区分-0-和-0、NaN-和-NaN-在不同情况下的相等性区别"><a href="#主要区分-0-和-0、NaN-和-NaN-在不同情况下的相等性区别" class="headerlink" title="主要区分 +0 和 -0、NaN 和 NaN 在不同情况下的相等性区别"></a>主要区分 <code>+0</code> 和 <code>-0</code>、<code>NaN</code> 和 <code>NaN</code> 在不同情况下的相等性区别</h2><p><code>==</code> <code>===</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(+<span class="number">0</span> === -<span class="number">0</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">NaN</span> == <span class="literal">NaN</span>) <span class="comment">// false NaN 不与任何值相等，包括自身</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">undefined</span> == <span class="literal">null</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">undefined</span> === <span class="literal">null</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">NaN</span> === <span class="literal">NaN</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>.NaN === <span class="literal">NaN</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>Object.is() 方法判断两个值是否是相同的值。比较时不会做类型转换，这与 <code>==</code> <code>===</code> 运算符的判定方式都不一样</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Object</span>.is(+<span class="number">0</span>, -<span class="number">0</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="number">0</span>, -<span class="number">0</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="number">0</span>, +<span class="number">0</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is(-<span class="number">0</span>, -<span class="number">0</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="literal">undefined</span>, <span class="literal">undefined</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="literal">null</span>, <span class="literal">null</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="built_in">Number</span>.NaN, <span class="built_in">Number</span>.NaN) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="built_in">Number</span>.NaN, <span class="literal">NaN</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="literal">NaN</span>, <span class="literal">NaN</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="literal">NaN</span>, <span class="number">0</span> / <span class="number">0</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>在 Set， Map 内部，两个 NaN 是相等, +0 和 -0 也是相等的</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="literal">NaN</span>, <span class="literal">NaN</span>, <span class="literal">undefined</span>, <span class="literal">undefined</span>, +<span class="number">0</span>, -<span class="number">0</span>, &#123;&#125;, &#123;&#125;]</span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> <span class="built_in">Set</span>(a) <span class="comment">// &#123;NaN, undefined, 0, &#123;&#125;, &#123;&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<p>总结：</p>
<ul>
<li>比较运算符中 <code>+0</code> 和 <code>-0</code> 是相等的、<code>NaN</code> 和 <code>NaN</code>是不等的</li>
<li>Object.is() 方法中 <code>+0</code> 和 <code>-0</code> 是不相等的、<code>NaN</code> 和 <code>NaN</code>是相等的</li>
<li>在 Set， Map 内部， <code>+0</code> 和 <code>-0</code> 是相等的、<code>NaN</code> 和 <code>NaN</code> 也是相等的</li>
</ul>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>addEventListener 以及 vue 中的 .passive 修饰符</title>
    <url>/403.html</url>
    <content><![CDATA[<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener">https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener</a></p>
<p>添加事件</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line">target.addEventListener(type, listener[, useCapture])</span><br><span class="line"><span class="comment">// type: 事件的类型: click mouseover  字符串类型，不带 on</span></span><br><span class="line"><span class="comment">// listener: 函数，每次点击，执行这个函数</span></span><br><span class="line"><span class="comment">// useCapture: 可选，true: 事件在捕获阶段执行，false: 事件在冒泡阶段执行(默认)</span></span><br><span class="line"></span><br><span class="line">target.addEventListener(type, listener[, options])</span><br></pre></td></tr></table></figure>

<p>options 可选，可用的选项如下：<br>capture: Boolean，默认 false，等价于以前的 useCapture 参数<br>once: Boolean，默认 false，如果是 true，表示 listener 在添加之后最多只调用一次。 listener 也会在其被调用之后自动移除<br>passive: Boolean，默认 false，设置为 true 时，表示 listener 永远不会调用 preventDefault() 如果 listener 仍然调用了这个函数，客户端将会忽略它并抛出一个控制台警告。</p>
<p>浏览器无法预先知道一个监听器会不会调用 preventDefault()，它能做的只有等监听器执行完后再去执行默认行为，而监听器执行是要耗时的，有些甚至耗时很明显，这样就会导致页面卡顿</p>
<p><code>.passive</code> 修饰符尤其能够提升移动端的性能<br><a href="https://cn.vuejs.org/v2/guide/events.html#%E4%BA%8B%E4%BB%B6%E4%BF%AE%E9%A5%B0%E7%AC%A6">vue .passive 事件修饰符</a></p>
<p>移除事件</p>
<p>removeEventListener</p>
<p>在第三个参数是布尔值的时候，addEventListener(“foo”, listener, true) 添加的监听器，必须用 removeEventListener(“foo”, listener, true) 才能删除掉, 因为这个监听器也有可能还注册在了冒泡阶段, 如果第三个参数为 false 则直接通过 removeEventListener(“foo”, listener) 就可以删除</p>
<p>通过 addEventListener(“foo”, listener, {capture: true}) 添加的监听器删除时也同样需要添加 {capture: true} 来删除，当然 {capture: true} 换成 true 也可以</p>
<p>通过 addEventListener(“foo”, listener, {passive: true}) 添加的监听器直接通过 removeEventListener(“foo”, listener) 就可以删除了<br>因为一个监听器同时是 passive 和非 passive（以及同时是 once 和非 once）是说不通的，如果你添加了多个，那么后添加的会忽略</p>
<p>removeEventListener(“foo”, listener, {capture: true}) // {capture: true} 必须加，当然 {capture: true} 换成 true 也可以</p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>Date对象使用及常用的时间格式化代码块--获取本周,本月,本季度,本年,上月,上周,上季度,去年等</title>
    <url>/249.html</url>
    <content><![CDATA[<h2 id="Date-对象"><a href="#Date-对象" class="headerlink" title="Date 对象"></a>Date 对象</h2><h2 id="整理一些时间格式化的方法"><a href="#整理一些时间格式化的方法" class="headerlink" title="整理一些时间格式化的方法"></a>整理一些时间格式化的方法</h2><p>1.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 时间格式化</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;date&#125;</span> </span>timeStamp 要格式化的时间对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;string&#125;</span> </span>2019年10月31日 16:22</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">format_date</span>(<span class="params">timeStamp</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(timeStamp)</span><br><span class="line">  <span class="keyword">return</span> date.getFullYear() + <span class="string">&#x27;年&#x27;</span> + prefix_zero(date.getMonth() + <span class="number">1</span>) + <span class="string">&#x27;月&#x27;</span> + prefix_zero(date.getDate()) + <span class="string">&#x27;日 &#x27;</span> + prefix_zero(date.getHours()) + <span class="string">&#x27;:&#x27;</span> + prefix_zero(date.getMinutes())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数字格式化</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> </span>num 要格式化的数值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;string&#125;</span> </span>把小于10的数值前面加上0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">prefix_zero</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> num &gt;= <span class="number">10</span> ? num : <span class="string">&#x27;0&#x27;</span> + num</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 昨天的字符串格式时间</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;string&#125;</span> </span>返回当前时间 - 1天</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getYesterday</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">  d.setDate(d.getDate() - <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">return</span> d.toLocaleString()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 明天的字符串格式时间</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;string&#125;</span> </span>返回当前时间 + 1天</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> getTomorrow = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">  d.setDate(d.getDate() + <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">return</span> d.toLocalString()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获得本周的开始日期</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> </span>start 不传默认一周以周日开始 1 表示以周一开始</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;date&#125;</span> </span>timeStamp 时间戳</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getWeekDate</span>(<span class="params">start = <span class="number">0</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&#x27;2019-12-15&#x27;</span>)</span><br><span class="line">  <span class="keyword">let</span> D = d.getDate()</span><br><span class="line">  <span class="keyword">if</span> (start == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> d.setDate(D - d.getDay())</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> W = d.getDay() || <span class="number">6</span></span><br><span class="line">    <span class="keyword">return</span> d.setDate(D - W + <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获得最近一周时间段</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;date[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getLastWeek</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">  <span class="keyword">let</span> D = d.getDate()</span><br><span class="line">  d.setDate(D - <span class="number">7</span>)</span><br><span class="line">  <span class="keyword">return</span> [d, <span class="keyword">new</span> <span class="built_in">Date</span>()]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>6.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获得某月的天数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> </span>year 年</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> </span>month 月 从 0 开始</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number&#125;</span> </span>某月的天数, 不传参数为当月天数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getMonthDays</span>(<span class="params">year, month</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">  year = year || d.getFullYear()</span><br><span class="line">  month = month || d.getMonth()</span><br><span class="line">  <span class="keyword">var</span> monthStart = <span class="keyword">new</span> <span class="built_in">Date</span>(year, month, <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">var</span> monthEnd = <span class="keyword">new</span> <span class="built_in">Date</span>(year, month + <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">var</span> days = (monthEnd - monthStart) / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>)</span><br><span class="line">  <span class="keyword">return</span> days</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>7.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获得本月的开始或结束日期</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> </span>isEnd 不传默认本周的开端日期 1 本周的结束日期</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;date&#125;</span> </span>timeStamp 时间戳</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getMonthDate</span>(<span class="params">isEnd = <span class="number">0</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">  d.setDate(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">if</span> (isEnd) &#123;</span><br><span class="line">    d.setDate(d.getDate() + getMonthDays() - <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> d</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> d</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>8.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 倒计时时间格式化</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;date&#125;</span> </span>timeStamp 要格式化的时间对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;string&#125;</span></span></span></span><br><span class="line"><span class="comment"> * 若时间大于1天 返回 n天n小时n分钟</span></span><br><span class="line"><span class="comment"> * 若时间小于1天，大于1小时 返回 n小时n分钟n秒</span></span><br><span class="line"><span class="comment"> * 若时间小于1小时，大于1分钟 返回 n分钟n秒</span></span><br><span class="line"><span class="comment"> * 若时间小于1分钟 返回 n秒</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">format_time</span>(<span class="params">timeStamp</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> day = <span class="built_in">Math</span>.floor(timeStamp / (<span class="number">24</span> * <span class="number">3600</span> * <span class="number">1000</span>))</span><br><span class="line">  <span class="keyword">let</span> leave1 = timeStamp % (<span class="number">24</span> * <span class="number">3600</span> * <span class="number">1000</span>)</span><br><span class="line">  <span class="keyword">let</span> hours = <span class="built_in">Math</span>.floor(leave1 / (<span class="number">3600</span> * <span class="number">1000</span>))</span><br><span class="line">  <span class="keyword">let</span> leave2 = leave1 % (<span class="number">3600</span> * <span class="number">1000</span>)</span><br><span class="line">  <span class="keyword">let</span> minutes = <span class="built_in">Math</span>.floor(leave2 / (<span class="number">60</span> * <span class="number">1000</span>))</span><br><span class="line">  <span class="keyword">let</span> leave3 = leave2 % (<span class="number">60</span> * <span class="number">1000</span>)</span><br><span class="line">  <span class="keyword">let</span> seconds = <span class="built_in">Math</span>.floor(leave3 / <span class="number">1000</span>)</span><br><span class="line">  <span class="keyword">if</span> (day) <span class="keyword">return</span> day + <span class="string">&#x27;天&#x27;</span> + hours + <span class="string">&#x27;小时&#x27;</span> + minutes + <span class="string">&#x27;分&#x27;</span></span><br><span class="line">  <span class="keyword">if</span> (hours) <span class="keyword">return</span> hours + <span class="string">&#x27;小时&#x27;</span> + minutes + <span class="string">&#x27;分&#x27;</span> + seconds + <span class="string">&#x27;秒&#x27;</span></span><br><span class="line">  <span class="keyword">if</span> (minutes) <span class="keyword">return</span> minutes + <span class="string">&#x27;分&#x27;</span> + seconds + <span class="string">&#x27;秒&#x27;</span></span><br><span class="line">  <span class="keyword">if</span> (seconds) <span class="keyword">return</span> seconds + <span class="string">&#x27;秒&#x27;</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;时间到！&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="dayjs-库"><a href="#dayjs-库" class="headerlink" title="dayjs 库"></a>dayjs 库</h2><p>轻量的处理时间和日期的 JavaScript 库</p>
<p>参考文档 <a href="https://github.com/iamkun/dayjs/blob/dev/docs/zh-cn/README.zh-CN.md">github 中文文档</a></p>
<p>在本页面打开控制台即可体验 dayjs 的 api</p>
<script src="https://unpkg.com/dayjs"></script>

<p>使用 dayjs 获取本周,上周,本月,上月,本季度,上季度,本年,去年时间</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// let date = dayjs(&#x27;2020-01-16&#x27;)</span></span><br><span class="line"><span class="keyword">let</span> date = dayjs()</span><br><span class="line"><span class="keyword">let</span> day = date.day() <span class="comment">// 1 星期</span></span><br><span class="line"><span class="keyword">let</span> currentWeekStart</span><br><span class="line"><span class="keyword">let</span> currentWeekEnd</span><br><span class="line"></span><br><span class="line"><span class="comment">// 本周</span></span><br><span class="line"><span class="keyword">if</span> (day &gt; <span class="number">0</span>) &#123;</span><br><span class="line">  currentWeekStart = date.startOf(<span class="string">&#x27;week&#x27;</span>).add(<span class="number">1</span>, <span class="string">&#x27;day&#x27;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  currentWeekStart = date.startOf(<span class="string">&#x27;week&#x27;</span>).subtract(<span class="number">6</span>, <span class="string">&#x27;day&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">currentWeekEnd = currentWeekStart.add(<span class="number">6</span>, <span class="string">&#x27;day&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 上周</span></span><br><span class="line"><span class="keyword">let</span> lastWeekStart = currentWeekStart.subtract(<span class="number">7</span>, <span class="string">&#x27;day&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> lastWeekEnd = currentWeekStart.subtract(<span class="number">1</span>, <span class="string">&#x27;day&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 本月 上月</span></span><br><span class="line"><span class="keyword">let</span> currentMonthStart = date.date(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">let</span> lastMonthStart = date.subtract(<span class="number">1</span>, <span class="string">&#x27;month&#x27;</span>).date(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">let</span> nextMonthStart = date.add(<span class="number">1</span>, <span class="string">&#x27;month&#x27;</span>).date(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">let</span> currentMonthEnd = nextMonthStart.subtract(<span class="number">1</span>, <span class="string">&#x27;day&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> lastMonthEnd = currentMonthStart.subtract(<span class="number">1</span>, <span class="string">&#x27;day&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 本季度,上季度</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 本年 去年</span></span><br><span class="line"><span class="keyword">let</span> currentYearStart = date.month(<span class="number">0</span>).date(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">let</span> currentYearEnd = date.month(<span class="number">11</span>).date(<span class="number">31</span>)</span><br><span class="line"><span class="keyword">let</span> lastYear = date.subtract(<span class="number">1</span>, <span class="string">&#x27;year&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> lastYearStart = date.subtract(<span class="number">1</span>, <span class="string">&#x27;year&#x27;</span>).month(<span class="number">0</span>).date(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">let</span> lastYearEnd = lastYearStart.month(<span class="number">11</span>).date(<span class="number">31</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> computedDate = &#123;</span><br><span class="line">  currentWeekStart: currentWeekStart.format(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>),</span><br><span class="line">  currentWeekEnd: currentWeekEnd.format(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>),</span><br><span class="line">  lastWeekStart: lastWeekStart.format(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>),</span><br><span class="line">  lastWeekEnd: lastWeekEnd.format(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>),</span><br><span class="line">  currentMonthStart: currentMonthStart.format(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>),</span><br><span class="line">  currentMonthEnd: currentMonthEnd.format(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>),</span><br><span class="line">  lastMonthStart: lastMonthStart.format(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>),</span><br><span class="line">  lastMonthEnd: lastMonthEnd.format(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>),</span><br><span class="line">  currentYearStart: currentYearStart.format(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>),</span><br><span class="line">  currentYearEnd: currentYearEnd.format(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>),</span><br><span class="line">  lastYearStart: lastYearStart.format(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>),</span><br><span class="line">  lastYearEnd: lastYearEnd.format(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(computedDate)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>【es6】Promise</title>
    <url>/410.html</url>
    <content><![CDATA[<ul>
<li>Promise 是<code>异步编程</code>的一种解决方案，它允许你以一种同步的方式编写异步代码</li>
<li><code>promise</code>：承诺、保证</li>
<li><a href="http://es6.ruanyifeng.com/#docs/promise">ES6 - Promise</a></li>
<li>JS 是通过回调函数来实现异步编程的，当异步操作多了以后，就会产生回调嵌套回调的问题，这就是<code>回调地狱</code></li>
<li>Promise 方式：将异步操作以同步操作的方式表达出来，避免了层层嵌套的回调函数</li>
<li>Promise 新建后立即执行</li>
</ul>
<h2 id="封装一个-Promise"><a href="#封装一个-Promise" class="headerlink" title="封装一个 Promise"></a>封装一个 Promise</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 按序读取文件：a -&gt; b -&gt; c</span></span><br><span class="line"><span class="comment">// 按顺序读取 a b c 文件</span></span><br><span class="line"><span class="comment">// 以前</span></span><br><span class="line"><span class="comment">// 读取 a 文件</span></span><br><span class="line">fs.readFile(<span class="string">&#x27;./a&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;读取错误&#x27;</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(data.toString())</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 读取 b 文件</span></span><br><span class="line">  fs.readFile(<span class="string">&#x27;./b&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;读取错误&#x27;</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(data.toString())</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 读取 c 文件</span></span><br><span class="line">    fs.readFile(<span class="string">&#x27;./a&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;读取错误&#x27;</span>)</span><br><span class="line">      <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 Promise</span></span><br><span class="line"><span class="comment">// 封装</span></span><br><span class="line"><span class="comment">// Promise 是一个构造函数</span></span><br><span class="line"><span class="comment">// 通过 new 创建 Promise 的实例对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readFile</span>(<span class="params">path</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 实例化 Promise</span></span><br><span class="line">  <span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// resolve 表示成功，异步操作成功调用</span></span><br><span class="line">    <span class="comment">// reject  表示失败，异步操作失败调用</span></span><br><span class="line">    fs.readFile(path, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 读取错误，调用 reject()</span></span><br><span class="line">      <span class="keyword">if</span> (err) <span class="keyword">return</span> reject(err)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 读取成功 调用 resolve</span></span><br><span class="line">      resolve(data.toString())</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 返回 Promise 对象</span></span><br><span class="line">  <span class="keyword">return</span> p</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line">readFile(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">  .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">    <span class="keyword">return</span> readFile(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">    <span class="keyword">return</span> readFile(<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<h2 id="promise-的三个状态"><a href="#promise-的三个状态" class="headerlink" title="promise 的三个状态"></a>promise 的三个状态</h2><ul>
<li><p>pending : 等待 (等待成功或者失败去调用)</p>
</li>
<li><p>fulfilled : 成功调用(resolve)</p>
</li>
<li><p>rejected : 失败调用(reject)</p>
</li>
</ul>
<h2 id="then、catch-和-finally"><a href="#then、catch-和-finally" class="headerlink" title="then、catch 和 finally"></a>then、catch 和 finally</h2><ul>
<li>说明：获取异步操作的结果</li>
<li><code>then()</code> ：用于获取异步操作成功时的结果 -&gt; <code>resolve</code></li>
<li><code>catch()</code>：用于获取异步操作失败时的结果 -&gt; <code>reject</code></li>
<li><code>finally()</code>：方法用于指定不管 Promise 对象最后状态如何，都会执行的操作，finally方法的回调函数不接受任何参数</li>
<li>说明：<code>then()</code>方法可以有多个，按照先后顺序执行，通过回调函数返回值传递数据给下一个 then</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">p</span><br><span class="line">  <span class="comment">// onfullfilled 执行</span></span><br><span class="line">  .then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;文件a的内容为：&#x27;</span>, value)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// onrejected 执行</span></span><br><span class="line">  .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;文件读取失败：&#x27;</span>, err)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ----------- 或者 -----------</span></span><br><span class="line"><span class="comment">// then 中传两个参数</span></span><br><span class="line"><span class="comment">// then方法的第一个参数是resolved状态的回调函数，第二个参数（可选）是rejected状态的回调函数</span></span><br><span class="line">p.then(</span><br><span class="line">  <span class="comment">// onfullfilled 执行</span></span><br><span class="line">  (value) =&gt; &#123; &#125;,</span><br><span class="line">  <span class="comment">// onrejected 执行</span></span><br><span class="line">  (err) =&gt; &#123; &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="all-和-race"><a href="#all-和-race" class="headerlink" title="all 和 race"></a>all 和 race</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/all">MDN-Promise.all()</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/race">MDN-Promise.race()</a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="string">&#x27;成功1&#x27;</span>)</span><br><span class="line">  &#125;,<span class="number">500</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="string">&#x27;成功2&#x27;</span>)</span><br><span class="line">  &#125;,<span class="number">1500</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    reject(<span class="string">&#x27;失败&#x27;</span>)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等待 p1，p2 请求完成</span></span><br><span class="line"><span class="built_in">Promise</span>.all([p1, p2]).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res) <span class="comment">// [&#x27;成功1&#x27;, &#x27;成功2&#x27;]</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 只要有一个请求被 reject，就会进入 catch 回调</span></span><br><span class="line"><span class="built_in">Promise</span>.all([p1, p2, p3]).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;).catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error) <span class="comment">// &#x27;失败&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 始终返回最快的那一个异步，不管resolve还是reject</span></span><br><span class="line"><span class="built_in">Promise</span>.race([p1, p2]).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res) <span class="comment">// &#x27;成功1&#x27;</span></span><br><span class="line">&#125;, <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.race([p1, p3]).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res) <span class="comment">// &#x27;成功1&#x27;</span></span><br><span class="line">&#125;, <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.race([p2, p3]).then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;, <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error) <span class="comment">// &#x27;失败&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="async-和-await"><a href="#async-和-await" class="headerlink" title="async 和 await"></a>async 和 await</h2><ul>
<li>异步编程终极方案</li>
</ul>
<ul>
<li>async / await 用同步编写代码的方式 处理异步操作的一个方案</li>
<li>async：修饰 (修饰一个内部有异步操作的函数) 格式 : async + 函数 (里面有异步操作的函数)</li>
<li>await : 等待 (等上一个异步操作完成啊 , 修饰 一个结果是 promise 的)异步操作 格式 : await + 异步操作(结果 promise 对象)</li>
<li>async 和 await 是成对出现的，await 只能在 async 函数中使用</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 第一步封装</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readFile</span>(<span class="params">path</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 1. 实例化 promise</span></span><br><span class="line">  <span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.readFile(path, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="comment">// 操作错误 调用 =&gt;  reject  =&gt; catch</span></span><br><span class="line">        <span class="keyword">return</span> reject(err)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 操作成功  调用 =&gt; resolve =&gt; then</span></span><br><span class="line">      resolve(data.toString())</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 2. 返回 promise 对象</span></span><br><span class="line">  <span class="keyword">return</span> p</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二步：使用 (async/await)</span></span><br><span class="line"><span class="comment">// async + 函数 (里面有异步操作的函数)</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// await + 异步操作(结果promise对象)</span></span><br><span class="line">  <span class="comment">// 读取a文件</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> res1 = <span class="keyword">await</span> readFile(<span class="string">&#x27;./data/a1.txt&#x27;</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(res1)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 读取 b 文件</span></span><br><span class="line">  <span class="keyword">const</span> res2 = <span class="keyword">await</span> readFile(<span class="string">&#x27;./data/b.txt&#x27;</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(res2)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 读取 c 文件</span></span><br><span class="line">  <span class="keyword">const</span> res3 = <span class="keyword">await</span> readFile(<span class="string">&#x27;./data/c.txt&#x27;</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(res3)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn()</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 延时函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      resolve(b)</span><br><span class="line">    &#125;, a)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> p</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> res1 = <span class="keyword">await</span> sleep(<span class="number">1000</span>, <span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(res1)</span><br><span class="line">  <span class="keyword">const</span> res2 = <span class="keyword">await</span> sleep(<span class="number">5000</span>, <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(res2)</span><br><span class="line">  <span class="keyword">const</span> res3 = <span class="keyword">await</span> sleep(<span class="number">3000</span>, <span class="string">&#x27;c&#x27;</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(res3)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// fn()</span></span><br><span class="line"></span><br><span class="line">sleep(<span class="number">1000</span>, <span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">  .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">    <span class="keyword">return</span> sleep(<span class="number">5000</span>, <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">    <span class="keyword">return</span> sleep(<span class="number">3000</span>, <span class="string">&#x27;c&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="built_in">Promise</span>.all([sleep(<span class="number">1000</span>, <span class="string">&#x27;a&#x27;</span>), sleep(<span class="number">5000</span>, <span class="string">&#x27;b&#x27;</span>)])</span><br><span class="line">p1.then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p2 = <span class="built_in">Promise</span>.race([sleep(<span class="number">1000</span>, <span class="string">&#x27;a&#x27;</span>), sleep(<span class="number">5000</span>, <span class="string">&#x27;b&#x27;</span>)])</span><br><span class="line">p2.then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="Promise-try"><a href="#Promise-try" class="headerlink" title="Promise.try()"></a>Promise.try()</h2><p>实际开发中，经常遇到一种情况：不知道或者不想区分，函数f是同步函数还是异步操作，但是想用 Promise 来处理它。因为这样就可以不管f是否包含异步操作，都用then方法指定下一步流程，用catch方法处理f抛出的错误。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve().then(f)</span><br></pre></td></tr></table></figure>

<p>上面的写法有一个缺点，就是如果f是同步函数，那么它会在本轮事件循环的末尾执行。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> f = <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;now&#x27;</span>)</span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(f)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;next&#x27;</span>)</span><br><span class="line"><span class="comment">// next</span></span><br><span class="line"><span class="comment">// now</span></span><br></pre></td></tr></table></figure>

<p>用async函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(<span class="keyword">async</span> () =&gt; f())()</span><br><span class="line">.then(...)</span><br><span class="line">.catch(...)</span><br></pre></td></tr></table></figure>

<p>Promise.try方法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> f = <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;now&#x27;</span>)</span><br><span class="line"><span class="built_in">Promise</span>.try(f)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;next&#x27;</span>)</span><br><span class="line"><span class="comment">// now</span></span><br><span class="line"><span class="comment">// next</span></span><br></pre></td></tr></table></figure>


<h2 id="new-Promise-和-Promise-resolve"><a href="#new-Promise-和-Promise-resolve" class="headerlink" title="new Promise 和 Promise.resolve()"></a>new Promise 和 Promise.resolve()</h2>]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>es6</tag>
        <tag>promise</tag>
      </tags>
  </entry>
  <entry>
    <title>ES6（ECMAScript）</title>
    <url>/405.html</url>
    <content><![CDATA[<h1 id="ES6（ECMAScript）"><a href="#ES6（ECMAScript）" class="headerlink" title="ES6（ECMAScript）"></a>ES6（ECMAScript）</h1><p>ECMAScript 6.0（以下简称 ES6）是在 2015 年 6 月正式发布的标准。它的目标，是使得 JavaScript 语言可以用来编写复杂的大型应用程序，成为企业级开发语言</p>
<p><a href="http://es6.ruanyifeng.com/">ECMAScript 6 入门 阮一峰</a></p>
<h2 id="let-与-const"><a href="#let-与-const" class="headerlink" title="let 与 const"></a>let 与 const</h2><blockquote>
<p>ES6 中提供了两个声明变量的关键字：const 和 let</p>
</blockquote>
<p>参考链接</p>
<p><a href="https://zhuanlan.zhihu.com/p/28140450">[知乎]我用了两个月的时间才理解 let</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Hoisting">[MDN]变量提升</a></p>
<h3 id="let-的使用"><a href="#let-的使用" class="headerlink" title="let 的使用"></a>let 的使用</h3><p>ES6 新增了<code>let</code>命令，用来声明变量。它的用法类似于<code>var</code></p>
<ul>
<li>let 声明的变量只有在当前作用域(块作用域)有效</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line">  <span class="keyword">let</span> b = <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// ReferenceError: b is not defined</span></span><br></pre></td></tr></table></figure>

<ul>
<li>不允许重复声明</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">10</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">1</span> <span class="comment">// SyntaxError: Identifier &#x27;a&#x27; has already been declared</span></span><br></pre></td></tr></table></figure>

<ul>
<li><span class="red">使用 let 声明的全局变量，不会成为 window 的属性</span></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> c = <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.c) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(c) <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">let</span> c = <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.c) <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(c) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<ul>
<li><span class="error">存在变量提升</span></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line">&#123;</span><br><span class="line">  a = <span class="number">2</span></span><br><span class="line">  <span class="keyword">let</span> a</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 如果 let 不会提升，那么 a = 2 就会将外面的 a 由 1 变成 2</span></span><br><span class="line"><span class="comment">// 但运行发现 a = 2 报错：Uncaught ReferenceError: Cannot access &#x27;a&#x27; before initialization</span></span><br></pre></td></tr></table></figure>

<p>总结 1：</p>
<ul>
<li>let 声明会提升到块顶部</li>
<li>从块顶部到该变量的初始化语句，这块区域叫做 TDZ（临时死区）</li>
<li>如果你在 TDZ 内使用该变量，JS 就会报错</li>
</ul>
<p>总结 2：</p>
<ul>
<li>let 的「创建」过程被提升了，但是初始化没有提升</li>
<li>var 的「创建」和「初始化」都被提升了</li>
<li>function 的「创建」「初始化」和「赋值」都被提升了</li>
</ul>
<p>所谓暂时死区，就是不能在初始化之前，使用变量</p>
<p>总结 3：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(a = <span class="number">1</span>; <span class="keyword">let</span> a) <span class="comment">// （括号去掉） // Uncaught ReferenceError: Cannot access &#x27;a&#x27; before initialization</span></span><br><span class="line">a <span class="comment">// Uncaught ReferenceError: Cannot access &#x27;a&#x27; before initialization</span></span><br></pre></td></tr></table></figure>

<p>如果 let x 的初始化过程失败了，那么</p>
<ul>
<li>x 变量就将永远处于 created 状态</li>
<li>你无法再次对 x 进行初始化（初始化只有一次机会，而那次机会你失败了）</li>
<li>由于 x 无法被初始化，所以 x 永远处在暂时死区</li>
</ul>
<h3 id="const-的使用"><a href="#const-的使用" class="headerlink" title="const 的使用"></a>const 的使用</h3><p><code>const</code>声明一个常量。常量：代码执行的过程中，不可以修改常量里面的值</p>
<ul>
<li>const 声明的量不可以改变</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> PI = <span class="number">3.1415</span></span><br><span class="line">PI = <span class="number">3</span> <span class="comment">// TypeError: Assignment to constant variable</span></span><br></pre></td></tr></table></figure>

<ul>
<li>const 声明的变量必须赋值</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> num</span><br><span class="line"><span class="comment">// SyntaxError: Missing initializer in const declaration</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如果 const 声明了一个对象，仅仅保证地址不变，可以修改对象的属性</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span> &#125;</span><br><span class="line">obj.age = <span class="number">18</span> <span class="comment">// 正确</span></span><br><span class="line">obj = &#123;&#125; <span class="comment">// TypeError: Assignment to constant variable</span></span><br></pre></td></tr></table></figure>

<ul>
<li>其他用法和 let 一样</li>
</ul>
<p>只能在当前代码块中使用<br>不能重复声明<br>不绑定全局作用域</p>
<h2 id="模板字符串-模板字面量"><a href="#模板字符串-模板字面量" class="headerlink" title="模板字符串(模板字面量)"></a>模板字符串(模板字面量)</h2><p>模板字面量 是允许嵌入表达式的字符串字面量。你可以使用多行字符串和字符串插值功能</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 通过``可以定义一个字符串</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">`hello world`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 模板字符串内部允许换行</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">`</span></span><br><span class="line"><span class="string">  hello</span></span><br><span class="line"><span class="string">  world</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 模板字符串内部可以使用表达式</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">`</span></span><br><span class="line"><span class="string">	你好，我是<span class="subst">$&#123;name&#125;</span></span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>

<h2 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h2><p>ES6 标准新增了一种新的函数：Arrow Function（箭头函数）</p>
<p>为什么叫 Arrow Function？因为它的定义用的就是一个箭头</p>
<h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x + y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">相当于</span><br><span class="line"><span class="comment">// 语法： (参数列表) =&gt; &#123;函数体&#125;</span></span><br><span class="line"><span class="keyword">let</span> fn = <span class="function">(<span class="params">x, y</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x + y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="参数详解"><a href="#参数详解" class="headerlink" title="参数详解"></a>参数详解</h3><ul>
<li>如果没有参数列表，使用()表示参数列表</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;哈哈&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 等同于：</span></span><br><span class="line"><span class="keyword">let</span> sum = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;哈哈&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果只有一个参数，可以省略()</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params">n1</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;哈哈&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等同于：</span></span><br><span class="line"><span class="keyword">let</span> sum = <span class="function">(<span class="params">n1</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;哈哈&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果有多个参数，需要使用 () 把参数列表括起来</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params">n1, n2</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;哈哈&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等同于：</span></span><br><span class="line"><span class="keyword">let</span> sum = <span class="function">(<span class="params">n1, n2</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;哈哈&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>给参数指定默认值</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="function">(<span class="params">n = <span class="number">1</span></span>) =&gt;</span> <span class="built_in">console</span>.log(n)</span><br><span class="line">a() <span class="comment">// 1</span></span><br><span class="line">a(<span class="number">3</span>) <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<ul>
<li>不存在 prototype 这个属性</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="function">() =&gt;</span> &#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a.prototype) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>没有 arguments</p>
<p>箭头函数没有自己的 arguments 对象，箭头函数可以访问外围函数的 arguments 对象</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">arguments</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a(<span class="number">1</span>, <span class="number">2</span>)()) <span class="comment">// [Arguments] &#123; &#x27;0&#x27;: 1, &#x27;1&#x27;: 2 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问箭头函数的参数</span></span><br><span class="line"><span class="comment">// Rest 参数接受函数的多余参数组成一个数组</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="function">(<span class="params">a, b, ...Args</span>) =&gt;</span> <span class="built_in">console</span>.log(Args)</span><br><span class="line">a(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>) <span class="comment">// [3, 4, 5]</span></span><br><span class="line"><span class="built_in">console</span>.log(a.length) <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Rest 参数和 arguments 对象的区别：</li>
</ul>
<p>rest 参数只包括那些没有给出名称的参数，arguments 包含所有参数</p>
<p>rest 参数之后不能再有其他参数，否则会报错</p>
<p>函数的 length 属性，不包括 rest 参数</p>
<p>arguments 对象不是真正的数组，而 rest 参数是数组实例，可以直接使用数组的方法</p>
<p>arguments 对象拥有一些自己额外的功能</p>
<h3 id="返回值详解"><a href="#返回值详解" class="headerlink" title="返回值详解"></a>返回值详解</h3><ul>
<li>如果箭头函数的代码块部分多于一条语句，就要使用大括号将它们括起来</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params">n1</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;哈哈&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> n1</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 等同于：</span></span><br><span class="line"><span class="keyword">let</span> sum = <span class="function">(<span class="params">n1</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;哈哈&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> n1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果函数体只有一行一句，并且需要返回这个值，那么可以省略 {} 和 return</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params">n1, n2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> n1 + n2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fn = <span class="function">(<span class="params">n1, n2</span>) =&gt;</span> n1 + n2</span><br></pre></td></tr></table></figure>

<h3 id="箭头函数的注意点"><a href="#箭头函数的注意点" class="headerlink" title="箭头函数的注意点"></a>箭头函数的注意点</h3><ol>
<li>箭头函数内部没有 this，因此箭头函数内部的 this 指向了外部的 this</li>
<li>因为箭头函数没有 this，因此箭头函数不能作为构造函数</li>
<li>不能用 call()、apply()、bind() 这些方法改变 this 的指向</li>
</ol>
<p>【定义一个对象，定时器打招呼】</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  name: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">  sayHi: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;大家好，我是&#x27;</span> + <span class="built_in">this</span>.name)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">obj.sayHi()</span><br></pre></td></tr></table></figure>

<h2 id="对象简化语法"><a href="#对象简化语法" class="headerlink" title="对象简化语法"></a>对象简化语法</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 当属性的 key 和变量的名相同时可以简写</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;<span class="attr">name</span>: name&#125; ==&gt; <span class="keyword">let</span> person = &#123;name&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明函数</span></span><br><span class="line"><span class="keyword">let</span> cal = &#123;</span><br><span class="line">  add: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 可以省略 `:function`</span></span><br><span class="line">  <span class="function"><span class="title">add</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="属性名表达式"><a href="#属性名表达式" class="headerlink" title="属性名表达式"></a>属性名表达式</h3><ul>
<li>ES6 允许字面量定义对象时，用表达式作为对象的属性名，即把表达式放在方括号内。</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> propKey = <span class="string">&#x27;foo&#x27;</span></span><br><span class="line"><span class="keyword">let</span> methodKey = <span class="string">&#x27;bar&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  [propKey]: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// foo: true</span></span><br><span class="line">  [<span class="string">&#x27;a&#x27;</span> + <span class="string">&#x27;bc&#x27;</span>]: <span class="number">123</span>,</span><br><span class="line">  <span class="comment">// abc: 123</span></span><br><span class="line">  [methodKey]() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;hi&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="class-关键字"><a href="#class-关键字" class="headerlink" title="class 关键字"></a>class 关键字</h2><p>ES5 中通过 构造函数 + 原型 的方式来实现面向对象</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = <span class="string">&#x27;jack&#x27;</span></span><br><span class="line">  <span class="built_in">this</span>.age = <span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在原型中添加实例方法</span></span><br><span class="line">Person.prototype.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.name, <span class="built_in">this</span>.age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建实例</span></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> Person()</span><br><span class="line"></span><br><span class="line">p.say()</span><br></pre></td></tr></table></figure>

<p>ES6 中出现了 class 关键字，用来实现面向对象</p>
<p>class 声明不允许再次声明已经存在的类，否则将会抛出一个类型错误<br>class 声明不可以提升</p>
<p>class 仅仅是一个语法结构（语法糖），本质还是函数，实现继承本质上还是通过构造函数+原型的方式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;&#125;</span><br><span class="line">Person <span class="keyword">instanceof</span> <span class="built_in">Function</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>类声明</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 基本使用</span></span><br><span class="line"><span class="comment">// 创建 Person 类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 类的构造函数</span></span><br><span class="line">  <span class="comment">// constructor 固定名称</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name, age</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">    <span class="built_in">this</span>.age = age</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 添加实例方法</span></span><br><span class="line">  <span class="function"><span class="title">say</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name, <span class="built_in">this</span>.age)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建实例</span></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> Person(<span class="string">&#x27;tom&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="built_in">console</span>.log(p)</span><br><span class="line">p.say()</span><br></pre></td></tr></table></figure>

<p>类表达式</p>
<p>赋予一个命名类表达式的名称是类的主体的本地名称</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 匿名类</span></span><br><span class="line"><span class="keyword">let</span> Person = <span class="class"><span class="keyword">class</span> </span>&#123;&#125;</span><br><span class="line"><span class="keyword">new</span> Person() <span class="comment">// Person &#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 命名类</span></span><br><span class="line"><span class="keyword">let</span> Person = <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;&#125;</span><br><span class="line"><span class="keyword">new</span> Person() <span class="comment">// A &#123;&#125;</span></span><br><span class="line"><span class="keyword">new</span> A() <span class="comment">//A &#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(Person) <span class="comment">// class A &#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(A) <span class="comment">// A is not defined</span></span><br></pre></td></tr></table></figure>

<p>类表达式也不存在提升</p>
<p>static 关键字用来定义一个类的静态方法。调用静态方法不需要实例化该类，但不能通过一个类实例调用静态方法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">x, y</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.x = x</span><br><span class="line">    <span class="built_in">this</span>.y = y</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="title">distance</span>(<span class="params">a, b</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> dx = a.x - b.x</span><br><span class="line">    <span class="keyword">const</span> dy = a.y - b.y</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.hypot(dx, dy)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> Point(<span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> Point(<span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Point.distance(p1, p2))</span><br></pre></td></tr></table></figure>

<p>继承：要实现至少需要两个 class（子类 和 父类），子类继承自父类，继承后，子类就可以使用父类中的属性或方法</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 继承</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 父类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name, age</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">say</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;父类中的 say 方法&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Chinese</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 子类中使用 constructor 必须手动调用 super</span></span><br><span class="line">    <span class="comment">// super 表示父类的构造函数</span></span><br><span class="line">    <span class="comment">// 先调用 super() 在使用 this</span></span><br><span class="line">    <span class="built_in">super</span>()</span><br><span class="line">    <span class="built_in">this</span>.name = <span class="string">&#x27;ls&#x27;</span></span><br><span class="line">    <span class="built_in">this</span>.age = <span class="number">18</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建实例</span></span><br><span class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> Chinese()</span><br><span class="line"><span class="built_in">console</span>.log(c)</span><br><span class="line">c.say() <span class="comment">// 父类中的方法</span></span><br></pre></td></tr></table></figure>

<h2 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h2><p>ES6 允许按照一定模式，从数组和对象中提取值，对变量进行赋值，这被称为解构（Destructuring）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 对象解构</span></span><br><span class="line"><span class="keyword">var</span> &#123; a, b &#125; = &#123; <span class="attr">a</span>: <span class="number">10</span>, <span class="attr">b</span>: <span class="number">20</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同</span></span><br><span class="line">;(&#123; a, b &#125; = &#123; <span class="attr">a</span>: <span class="number">10</span>, <span class="attr">b</span>: <span class="number">20</span> &#125;) <span class="comment">// 使用没有声明的赋值，数组解构类似</span></span><br><span class="line"><span class="built_in">console</span>.log(a, b) <span class="comment">// 10 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 提取变量并赋值</span></span><br><span class="line"><span class="keyword">var</span> &#123; <span class="attr">a</span>: p, <span class="attr">b</span>: q &#125; = &#123; <span class="attr">a</span>: <span class="number">10</span>, <span class="attr">b</span>: <span class="number">20</span> &#125;</span><br><span class="line"><span class="built_in">console</span>.log(p, q) <span class="comment">// 10 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将剩余属性赋值给一个变量</span></span><br><span class="line"><span class="keyword">var</span> &#123; a, b, ...rest &#125; = &#123; <span class="attr">a</span>: <span class="number">10</span>, <span class="attr">b</span>: <span class="number">20</span>, <span class="attr">c</span>: <span class="number">30</span>, <span class="attr">d</span>: <span class="number">40</span> &#125;</span><br><span class="line"><span class="comment">// ;(&#123; a, b, ...rest &#125; = &#123; a: 10, b: 20, c: 30, d: 40 &#125;)</span></span><br><span class="line"><span class="built_in">console</span>.log(a, b, rest) <span class="comment">// 10 20 &#123;c: 30, d: 40&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 提供默认值</span></span><br><span class="line"><span class="keyword">var</span> &#123; a = <span class="number">1</span>, b = <span class="number">1</span> &#125; = &#123; <span class="attr">a</span>: <span class="number">10</span> &#125;</span><br><span class="line"><span class="built_in">console</span>.log(a, b) <span class="comment">// 10 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 赋值并提供默认值</span></span><br><span class="line"><span class="keyword">var</span> &#123; <span class="attr">a</span>: aa = <span class="number">10</span>, <span class="attr">b</span>: bb = <span class="number">1</span> &#125; = &#123; <span class="attr">a</span>: <span class="number">10</span> &#125;</span><br><span class="line"><span class="built_in">console</span>.log(aa, bb) <span class="comment">// 10 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 数组解构</span></span><br><span class="line"><span class="keyword">var</span> [a, b] = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="built_in">console</span>.log(a, b) <span class="comment">// 1 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将剩余数组赋值给一个变量</span></span><br><span class="line"><span class="keyword">var</span> [a, b, ...rest] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="built_in">console</span>.log(a, b, rest) <span class="comment">// 1 2 [3, 4]</span></span><br><span class="line"><span class="comment">// ==&gt; var a = arr[0]; var b = arr[1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 提供默认值</span></span><br><span class="line"><span class="keyword">var</span> [c = <span class="number">2</span>, d = <span class="number">2</span>] = [<span class="number">10</span>]</span><br><span class="line"><span class="built_in">console</span>.log(c, d) <span class="comment">// 10 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 忽略某些值</span></span><br><span class="line"><span class="keyword">var</span> [a = <span class="number">2</span>, , b = <span class="number">2</span>] = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>]</span><br><span class="line"><span class="built_in">console</span>.log(a, b) <span class="comment">// 10 30</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 函数参数的解构赋值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">&#123; x &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x) <span class="comment">// 1</span></span><br><span class="line">&#125;</span><br><span class="line">foo(&#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数参数默认值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">&#123; x = <span class="number">10</span> &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x) <span class="comment">// 10</span></span><br><span class="line">&#125;</span><br><span class="line">foo()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 解构的特殊应用</span></span><br><span class="line"><span class="comment">// 交换变量</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">3</span></span><br><span class="line">;[a, b] = [b, a]</span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串解构</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;love&#x27;</span></span><br><span class="line"><span class="keyword">var</span> [a, b, c, d] = str</span><br><span class="line"><span class="built_in">console</span>.log(a, b, c, d) <span class="comment">// l o v e</span></span><br></pre></td></tr></table></figure>

<h2 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h2><p>扩展运算符（spread）是三个点（…）。作用：将一个数组转为用逗号分隔的参数序列</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"><span class="built_in">console</span>.log(...arr)</span><br><span class="line"><span class="comment">// 上面这句代码相当于：</span></span><br><span class="line"><span class="built_in">console</span>.log(arr[<span class="number">0</span>], arr[<span class="number">1</span>], arr[<span class="number">2</span>])</span><br></pre></td></tr></table></figure>

<p>应用</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 数组深拷贝</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">var</span> arr1 = [...arr]</span><br><span class="line"><span class="built_in">console</span>.log(arr === arr1) <span class="comment">// false, 说明arr1和arr指向不同数组</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 把一个数组插入另一个数组字面量</span></span><br><span class="line"><span class="keyword">var</span> arr2 = [...arr, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr2) <span class="comment">// [1, 2, 3, 4, 5, 6]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串转数组</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;love&#x27;</span></span><br><span class="line"><span class="keyword">var</span> arr3 = [...str]</span><br><span class="line"><span class="built_in">console</span>.log(arr3) <span class="comment">// [ &#x27;l&#x27;, &#x27;o&#x27;, &#x27;v&#x27;, &#x27;e&#x27; ]</span></span><br></pre></td></tr></table></figure>

<p>对象展开</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> defaults = &#123; <span class="attr">food</span>: <span class="string">&#x27;spicy&#x27;</span>, <span class="attr">price</span>: <span class="string">&#x27;$$&#x27;</span>, <span class="attr">ambiance</span>: <span class="string">&#x27;noisy&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">let</span> search = &#123; ...defaults, <span class="attr">food</span>: <span class="string">&#x27;rich&#x27;</span> &#125; <span class="comment">// &#123; food: &quot;rich&quot;, price: &quot;$$&quot;, ambiance: &quot;noisy&quot; &#125; 后面的属性会覆盖前面的属性</span></span><br></pre></td></tr></table></figure>

<p>对象展开仅包含对象自身的可枚举属性。 大体上是说当你展开一个对象实例时，你会丢失其方法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;</span><br><span class="line">  p = <span class="number">12</span></span><br><span class="line">  <span class="function"><span class="title">m</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> c = <span class="keyword">new</span> C()</span><br><span class="line"><span class="keyword">let</span> clone = &#123; ...c &#125;</span><br><span class="line">clone.p <span class="comment">// ok</span></span><br><span class="line">clone.m() <span class="comment">// error!</span></span><br></pre></td></tr></table></figure>

<h2 id="ES6-模块化"><a href="#ES6-模块化" class="headerlink" title="ES6 模块化"></a>ES6 模块化</h2>]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>es6</tag>
      </tags>
  </entry>
  <entry>
    <title>Window.history 对象</title>
    <url>/383.html</url>
    <content><![CDATA[<p>Window.history 是一个只读属性，提供了操作浏览器会话历史（浏览器地址栏中访问的页面，以及当前页面中通过框架加载的页面）的接口。HTML5 引入了 history.pushState() 和 history.replaceState() 方法，它们分别可以添加和修改历史记录条目。这些方法通常与 window.onpopstate 配合使用。</p>
<blockquote>
<p>参考</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/History_API">https://developer.mozilla.org/zh-CN/docs/Web/API/History_API</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/history">https://developer.mozilla.org/zh-CN/docs/Web/API/Window/history</a></p>
</blockquote>
<p>在 history 中跳转</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.history.back() <span class="comment">// 向后跳转 相当于点击浏览器回退按钮</span></span><br><span class="line"><span class="built_in">window</span>.history.forward() <span class="comment">// 向前跳转 相当于点击了前进按钮</span></span><br><span class="line"><span class="built_in">window</span>.history.go(-<span class="number">1</span>) <span class="comment">// 跳转 历史中的某一特定页面(go(-1) 等同于调用 back())</span></span><br></pre></td></tr></table></figure>

<p>可以通过查看长度属性的值来确定的历史堆栈中页面的数量</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.history.length</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">history.pushState(stateObject, title, url)</span><br></pre></td></tr></table></figure>

<p>状态对象（stateObject）–stateObject 是一个 JavaScript 对象，通过 pushState 方法可以将 stateObject 内容传递到新页面中。</p>
<p>标题（title）–几乎没有浏览器支持该参数，但是传一个空字符串会比较安全。</p>
<p>地址（url）–新的历史记录条目的地址（可选，不指定的话则为文档当前 URL）；浏览器在调用 pushState()方法后不会加载该地址；传入的 URL 与当前 URL 应该是同源的，否则，pushState()会抛出异常。</p>
<p>history.pushState()主要是在不刷新浏览器的情况下，创建新的浏览记录并插入浏览记录队列中</p>
<p>假设在 <a href="http://mozilla.org/foo.html">http://mozilla.org/foo.html</a> 中执行了以下 JavaScript 代码:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> stateObj = &#123;</span><br><span class="line">  foo: <span class="string">&#x27;bar&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">history.pushState(stateObj, <span class="string">&#x27;page 2&#x27;</span>, <span class="string">&#x27;bar.html&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>这将使浏览器地址栏显示为 <a href="http://mozilla.org/bar.html%EF%BC%8C%E4%BD%86%E5%B9%B6%E4%B8%8D%E4%BC%9A%E5%AF%BC%E8%87%B4%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8A%A0%E8%BD%BD">http://mozilla.org/bar.html，但并不会导致浏览器加载</a> bar.html ，甚至不会检查 bar.html 是否存在</p>
<p>history.replaceState() 的使用与 history.pushState() 非常相似，区别在于 replaceState() 是修改了当前的历史记录项而不是新建一个</p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>window.setTimeout 第三个参数</title>
    <url>/1659.html</url>
    <content><![CDATA[<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/setTimeout">MDN</a>上关于 setTimeout 介绍</p>
<p>语法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> timeoutID = scope.setTimeout(<span class="function"><span class="keyword">function</span>[, <span class="title">delay</span>, <span class="title">param1</span>, <span class="title">param2</span>, ...])</span></span><br><span class="line"><span class="function">// <span class="title">delay</span> 可选 默认 0</span></span><br><span class="line"><span class="function">// <span class="title">param1</span>, ..., <span class="title">paramN</span> 可选 ，附加参数，一旦定时器到期，他会作为参数传递给 <span class="function"><span class="keyword">function</span></span></span></span><br><span class="line"><span class="function"><span class="function">// 返回值<span class="title">timeoutID</span>是一个正整数，表示定时器的编号</span></span></span><br></pre></td></tr></table></figure>

<p>应用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params">j</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(j)</span><br><span class="line">    &#125;,</span><br><span class="line">    i * <span class="number">1000</span>,</span><br><span class="line">    i</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 会立即返回一个 timeid</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"><span class="comment">// 4</span></span><br><span class="line"><span class="comment">// 5</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>js 不写行尾分号注意事项</title>
    <url>/1656.html</url>
    <content><![CDATA[<p>若行首为 <code>(</code>、<code>[</code>、<code>/</code>、<code>+</code>、<code>-</code>，会与上一行代码相接，此时需要在行首添加分号<br><code>++</code>、<code>--</code>在上下两行都不加分号的情况下，与下一行代码相接<br>return 语句在执行时会在末尾加分号</p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>js 图像处理库</title>
    <url>/1730.html</url>
    <content><![CDATA[<h3 id="merge-images-合并图像"><a href="#merge-images-合并图像" class="headerlink" title="merge-images 合并图像"></a>merge-images 合并图像</h3><p>github 地址：<a href="https://github.com/lukechilds/merge-images">https://github.com/lukechilds/merge-images</a></p>
<h3 id="Cropper-js-图片裁剪工具"><a href="#Cropper-js-图片裁剪工具" class="headerlink" title="Cropper.js 图片裁剪工具"></a>Cropper.js 图片裁剪工具</h3><p>github 地址：<a href="https://github.com/fengyuanchen/cropperjs">https://github.com/fengyuanchen/cropperjs</a><br>示例地址：<a href="https://fengyuanchen.github.io/cropperjs/">https://fengyuanchen.github.io/cropperjs/</a></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102205245.png"></p>
<h3 id="grade-js-根据图片的两种主要颜色生成背景渐变"><a href="#grade-js-根据图片的两种主要颜色生成背景渐变" class="headerlink" title="grade.js 根据图片的两种主要颜色生成背景渐变"></a>grade.js 根据图片的两种主要颜色生成背景渐变</h3><p>github 地址：<a href="https://github.com/benhowdle89/grade">https://github.com/benhowdle89/grade</a><br>示例地址：<a href="https://benhowdle89.github.io/grade/">https://benhowdle89.github.io/grade/</a></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102205301.png"></p>
<h3 id="Compressor-js-图像压缩"><a href="#Compressor-js-图像压缩" class="headerlink" title="Compressor.js 图像压缩"></a>Compressor.js 图像压缩</h3><p>github 地址：<a href="https://github.com/fengyuanchen/compressorjs">https://github.com/fengyuanchen/compressorjs</a><br>示例地址：<a href="https://fengyuanchen.github.io/compressorjs/">https://fengyuanchen.github.io/compressorjs/</a></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102205339.png"></p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>前端工具库</tag>
      </tags>
  </entry>
  <entry>
    <title>前端常用js代码段汇总</title>
    <url>/382.html</url>
    <content><![CDATA[<h2 id="类型识别"><a href="#类型识别" class="headerlink" title="类型识别"></a>类型识别</h2><h3 id="获取数据类型，返回结果为-Number、String、Object、Array-等"><a href="#获取数据类型，返回结果为-Number、String、Object、Array-等" class="headerlink" title="获取数据类型，返回结果为 Number、String、Object、Array 等"></a>获取数据类型，返回结果为 Number、String、Object、Array 等</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 返回数据类型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRawType</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(value).slice(<span class="number">8</span>, -<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 正则 =&gt; RegExp</span></span><br><span class="line"><span class="comment">// 时间对象 =&gt; Date</span></span><br><span class="line"><span class="comment">// 字符串 =&gt; String</span></span><br><span class="line"><span class="comment">// 对象 =&gt; Object</span></span><br><span class="line"><span class="comment">// 数组 =&gt; Array</span></span><br></pre></td></tr></table></figure>

<h3 id="判断变量是不是字符串类型"><a href="#判断变量是不是字符串类型" class="headerlink" title="判断变量是不是字符串类型"></a>判断变量是不是字符串类型</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="string">&#x27;str&#x27;</span>) <span class="comment">// &#x27;[object String]&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">&#x27;str&#x27;</span> <span class="comment">// &#x27;string&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="判断变量是不是引用类型"><a href="#判断变量是不是引用类型" class="headerlink" title="判断变量是不是引用类型"></a>判断变量是不是引用类型</h3><p>例如： arrays, functions, objects, regexes, new Number(0),以及 new String(‘’)</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isObject</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> type = <span class="keyword">typeof</span> value</span><br><span class="line">  <span class="keyword">return</span> value != <span class="literal">null</span> &amp;&amp; (type == <span class="string">&#x27;object&#x27;</span> || type == <span class="string">&#x27;function&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="判断变量是不是-Object-类型的数据"><a href="#判断变量是不是-Object-类型的数据" class="headerlink" title="判断变量是不是 Object 类型的数据"></a>判断变量是不是 Object 类型的数据</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPlainObject</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(value) === <span class="string">&#x27;[object Object]&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="判断变量是不是数组类型"><a href="#判断变量是不是数组类型" class="headerlink" title="判断变量是不是数组类型"></a>判断变量是不是数组类型</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArray</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(arr) === <span class="string">&#x27;[object Array]&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArray</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.isArray(arr)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="将-isArray-挂载到-Array-上"><a href="#将-isArray-挂载到-Array-上" class="headerlink" title="将 isArray 挂载到 Array 上"></a>将 isArray 挂载到 Array 上</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Array</span>.isArray = <span class="built_in">Array</span>.isArray || isArray</span><br></pre></td></tr></table></figure>

<h2 id="格式转换"><a href="#格式转换" class="headerlink" title="格式转换"></a>格式转换</h2><h3 id="数字格式化：小于-10-的数值前面加上-0"><a href="#数字格式化：小于-10-的数值前面加上-0" class="headerlink" title="数字格式化：小于 10 的数值前面加上 0"></a>数字格式化：小于 10 的数值前面加上 0</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> </span>num 要格式化的数值</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;string&#125;</span> </span>把小于10的数值前面加上0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">prefix_zero</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> num &gt;= <span class="number">10</span> ? num : <span class="string">&#x27;0&#x27;</span> + num</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="价格格式化-1234567-gt-1-234-567-00"><a href="#价格格式化-1234567-gt-1-234-567-00" class="headerlink" title="价格格式化 (1234567 =&gt; 1,234,567.00)"></a>价格格式化 (1234567 =&gt; 1,234,567.00)</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> </span>price 价格</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;string&#125;</span> </span>1234567 =&gt; 1,234,567.00</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatPrice</span>(<span class="params">price</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> price !== <span class="string">&#x27;number&#x27;</span>) <span class="keyword">return</span> price</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">String</span>(<span class="built_in">Number</span>(price).toFixed(<span class="number">2</span>)).replace(<span class="regexp">/\B(?=(\d&#123;3&#125;)+(?!\d))/g</span>, <span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// \b 匹配单词边界</span></span><br><span class="line"><span class="comment">// \B 匹配非单词边界</span></span><br></pre></td></tr></table></figure>

<p>其他方式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">123456789</span> <span class="comment">// a 为number类型</span></span><br><span class="line">a.toLocaleString(<span class="string">&#x27;en-US&#x27;</span>) <span class="comment">// &#x27;123,456,789&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">123456789</span> <span class="comment">// b 可为number类型或string类型</span></span><br><span class="line"><span class="built_in">Intl</span>.NumberFormat().format(b) <span class="comment">//&#x27;123,456,789&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="手机号格式化：隐藏中间四位数字"><a href="#手机号格式化：隐藏中间四位数字" class="headerlink" title="手机号格式化：隐藏中间四位数字"></a>手机号格式化：隐藏中间四位数字</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> </span>mobile 手机号</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;string&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatMobile</span>(<span class="params">mobile</span>) </span>&#123;</span><br><span class="line">  mobile = <span class="built_in">String</span>(mobile)</span><br><span class="line">  <span class="keyword">if</span> (!<span class="regexp">/\d&#123;11&#125;/</span>.test(mobile)) &#123;</span><br><span class="line">    <span class="keyword">return</span> mobile</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> mobile.replace(<span class="regexp">/(\d&#123;3&#125;)\d&#123;4&#125;(\d&#123;4&#125;)/</span>, <span class="string">&#x27;$1****$2&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="进制转换"><a href="#进制转换" class="headerlink" title="进制转换"></a>进制转换</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(str, radix) <span class="comment">// 任意进制转换为 10 进制整数值</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Number</span>.toString(radix) <span class="comment">//返回表示该数字的指定进制形式的字符串</span></span><br></pre></td></tr></table></figure>

<h2 id="常用正则"><a href="#常用正则" class="headerlink" title="常用正则"></a>常用正则</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 任意正负数字</span></span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/(^[\-0-9][0-9]*(.[0-9]+)?)$/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 匹配邮箱</span></span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]&#123;2,4&#125;)$/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 匹配手机号</span></span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/^1[0-9]&#123;10&#125;$/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 匹配8-16位数字和字母密码的正则表达式</span></span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]&#123;8,16&#125;$/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 匹配国内电话号码 0510-4305211</span></span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/\d&#123;3&#125;-\d&#123;8&#125;|\d&#123;4&#125;-\d&#123;7&#125;/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 匹配身份证号码</span></span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/(^\d&#123;15&#125;$)|(^\d&#123;18&#125;$)|(^\d&#123;17&#125;(\d|X|x)$)/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 匹配腾讯QQ号</span></span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/[1-9][0-9]&#123;4,&#125;/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 匹配ip地址</span></span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/\d+\.\d+\.\d+\.\d+/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 匹配中文</span></span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/^[\u4e00-\u9fa5]*$/</span></span><br></pre></td></tr></table></figure>

<h2 id="检测平台（设备）类型"><a href="#检测平台（设备）类型" class="headerlink" title="检测平台（设备）类型"></a>检测平台（设备）类型</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">isWechat = <span class="regexp">/micromessenger/i</span>.test(navigator.userAgent)</span><br><span class="line">isWeibo = <span class="regexp">/weibo/i</span>.test(navigator.userAgent)</span><br><span class="line">isQQ = <span class="regexp">/qq/i</span>.test(navigator.userAgent)</span><br><span class="line">isIOS = <span class="regexp">/(iphone|ipod|ipad|ios)/i</span>.test(navigator.userAgent)</span><br><span class="line">isAndroid = <span class="regexp">/android/i</span>.test(navigator.userAgent)</span><br></pre></td></tr></table></figure>

<h2 id="敏感符号转义"><a href="#敏感符号转义" class="headerlink" title="敏感符号转义"></a>敏感符号转义</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">entities</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> e = &#123;</span><br><span class="line">    <span class="string">&#x27;&quot;&#x27;</span>: <span class="string">&#x27;&quot;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;&amp;&#x27;</span>: <span class="string">&#x27;&amp;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;&lt;&#x27;</span>: <span class="string">&#x27;&lt;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;&gt;&#x27;</span>: <span class="string">&#x27;&gt;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> s.replace(<span class="regexp">/[&quot;&lt;&gt;&amp;]/g</span>, <span class="function">(<span class="params">m</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> e[m]</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="数组去重"><a href="#数组去重" class="headerlink" title="数组去重"></a>数组去重</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">distinct</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arr.filter(<span class="function">(<span class="params">v, i, array</span>) =&gt;</span> array.indexOf(v) === i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象数组去重</span></span><br><span class="line"><span class="comment">// arr: 目标数组</span></span><br><span class="line"><span class="comment">// id: 唯一属性</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">distinct</span>(<span class="params">arr, id</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> object = &#123;&#125;</span><br><span class="line">  <span class="keyword">let</span> objres = arr.reduce(<span class="function">(<span class="params">item, next</span>) =&gt;</span> &#123;</span><br><span class="line">    object[next[id]] ? <span class="string">&#x27;&#x27;</span> : (object[next[id]] = <span class="literal">true</span> &amp;&amp; item.push(next))</span><br><span class="line">    <span class="keyword">return</span> item</span><br><span class="line">  &#125;, [])</span><br><span class="line">  <span class="keyword">return</span> objres</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="数组顺序上移下移"><a href="#数组顺序上移下移" class="headerlink" title="数组顺序上移下移"></a>数组顺序上移下移</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 对象数组顺序上移下移</span></span><br><span class="line"><span class="comment">// arr: 目标数组</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 上移</span></span><br><span class="line">arr[index] = arr.splice(index - <span class="number">1</span>, <span class="number">1</span>, arr[index])[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下移</span></span><br><span class="line">arr[index] = arr.splice(index + <span class="number">1</span>, <span class="number">1</span>, arr[index])[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>

<h2 id="快速创建-a-标签"><a href="#快速创建-a-标签" class="headerlink" title="快速创建 a 标签"></a>快速创建 a 标签</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">&#x27;超链接&#x27;</span>.link(<span class="string">&#x27;https://wqdy.top&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// &lt;a href=&quot;https://wqdy.top&quot;&gt;超链接&lt;/a&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="正则进阶："><a href="#正则进阶：" class="headerlink" title="正则进阶："></a>正则进阶：</h2><p>捕获括号：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">匹配 &#39;wqdy&#39; 并且记住匹配项</span><br><span class="line">&#x2F;(wqdy)&#x2F;</span><br></pre></td></tr></table></figure>

<p>非捕获括号：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">匹配 &#39;wqdy&#39; 但是不记住匹配项</span><br><span class="line">&#x2F;(?:wqdy)&#x2F;</span><br></pre></td></tr></table></figure>

<p>先行断言：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">匹配&#39;wqdy&#39;仅仅当&#39;wqdy&#39;后面跟着&#39;top&#39;</span><br><span class="line">&#x2F;wqdy(?&#x3D;top)&#x2F;</span><br></pre></td></tr></table></figure>

<p>后行断言：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">匹配&#39;top&#39;仅仅当&#39;top&#39;前面是&#39;wqdy&#39;</span><br><span class="line">&#x2F;(?&lt;&#x3D;wqdy)top&#x2F;</span><br></pre></td></tr></table></figure>

<p>正向否定查找：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">匹配&#39;wqdy&#39;仅仅当&#39;wqdy&#39;后面不跟着&#39;gkd&#39;</span><br><span class="line">&#x2F;wqdy(?!gkd)&#x2F;</span><br></pre></td></tr></table></figure>

<h2 id="判断是否有滚动条"><a href="#判断是否有滚动条" class="headerlink" title="判断是否有滚动条"></a>判断是否有滚动条</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isScroll</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">window</span>.innerWidth - $(<span class="built_in">document</span>).width() !== <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>循环、遍历总结</title>
    <url>/396.html</url>
    <content><![CDATA[<h1 id="原生-js-中-for-语句"><a href="#原生-js-中-for-语句" class="headerlink" title="原生 js 中 for 语句"></a>原生 js 中 for 语句</h1><blockquote>
<p>循环 、遍历数组</p>
</blockquote>
<p><span class='red'>可使用 continue 跳出当前循环， break 跳出整个循环</span></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法：</span></span><br><span class="line"><span class="comment">// 1. for循环使用分号分隔</span></span><br><span class="line"><span class="comment">// 2. for循环有2个分号，两个分号不能少</span></span><br><span class="line"><span class="keyword">for</span> (初始化语句; 判断语句; 自增语句) &#123;</span><br><span class="line">  <span class="comment">// 循环体</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 普通循环</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历数组</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arr[i])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历函数的参数(arguments)</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">arguments</span>.length; i++) &#123;&#125;</span><br></pre></td></tr></table></figure>

<h1 id="原生-js-中数组的-forEach-方法"><a href="#原生-js-中数组的-forEach-方法" class="headerlink" title="原生 js 中数组的 forEach 方法"></a>原生 js 中数组的 forEach 方法</h1><blockquote>
<p>遍历数组</p>
</blockquote>
<p><span class="red">不能用 break continue 语句跳出整个循环</span><br><span class="red">可使用 return 语句跳出当前循环</span></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line"><span class="comment">// array.forEach (function(item, index, arr), thisArg)</span></span><br><span class="line"><span class="comment">// item 必需。数组中正在处理的当前元素</span></span><br><span class="line"><span class="comment">// index 可选。数组中正在处理的当前元素的索引</span></span><br><span class="line"><span class="comment">// arr 可选。forEach()方法正在操作的数组，就是当前数组</span></span><br><span class="line"><span class="comment">// thisArg 可选。当执行回调函数时用作this的值</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;zs&#x27;</span>, <span class="string">&#x27;ls&#x27;</span>, <span class="string">&#x27;ww&#x27;</span>]</span><br><span class="line">arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item, index, arr</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 返回值: undefined</span></span><br><span class="line"><span class="comment">// 不支持 return 操作输出，return 只用于控制循环是否跳出当前循环</span></span><br></pre></td></tr></table></figure>

<h1 id="原生-js-中-for…in-语句"><a href="#原生-js-中-for…in-语句" class="headerlink" title="原生 js 中 for…in 语句"></a>原生 js 中 for…in 语句</h1><blockquote>
<p>遍历对象</p>
</blockquote>
<p>支持 <code>break</code>, <code>continue</code> 跳出循环</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法：</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key) <span class="comment">// 键</span></span><br><span class="line">  <span class="built_in">console</span>.log(obj[key]) <span class="comment">// 值</span></span><br><span class="line">  <span class="built_in">console</span>.log(key + <span class="string">&#x27;==&#x27;</span> + obj[key])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// in 操作符：判断对象能否访问到该属性（不管这个属性是自己提供的，还是从原型上继承来的），如果可以访问到， 都会返回 true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(&#x27;name&#x27; in obj) 返回布尔值</span></span><br><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;name&#x27;</span> <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;是&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果使用 for in 遍历数组，会产生一些问题</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line">a.name = <span class="string">&#x27;d&#x27;</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> index <span class="keyword">in</span> arr) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(index) <span class="comment">// &#x27;0&#x27;, &#x27;1&#x27;, &#x27;2&#x27;, &#x27;name&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>数组的索引值 index 是 String 类型</li>
<li>会将 expando 属性也遍历出来</li>
<li>在某些情况下，在遍历数组元素时顺序是任意的</li>
</ol>
<p><span class="red">for-in 语法是被设计来遍历普通的“键值对”对象的，不适合用在数组上</span></p>
<h1 id="es6-for…of-方法"><a href="#es6-for…of-方法" class="headerlink" title="es6 for…of 方法"></a>es6 for…of 方法</h1><p>遍历类数组集合(Array, Map, Set, String, Arguments)</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>支持 <code>break</code>, <code>continue</code> 和 <code>throw</code></p>
<h1 id="for…of-与-for…in-的区别"><a href="#for…of-与-for…in-的区别" class="headerlink" title="for…of 与 for…in 的区别"></a>for…of 与 for…in 的区别</h1><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...of">参考 MDN</a></p>
<p>无论是 for…in 还是 for…of 语句都是迭代一些东西。它们之间的主要区别在于它们的迭代方式。</p>
<p>for…in 语句以任意顺序迭代对象的可枚举属性。</p>
<p>for…of 语句遍历可迭代对象定义要迭代的数据。</p>
<h1 id="jquery-中的-each-方法"><a href="#jquery-中的-each-方法" class="headerlink" title="jquery 中的 each 方法"></a>jquery 中的 each 方法</h1><blockquote>
<p>遍历 jQuery 对象集合，为每个匹配的元素执行一个函数</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法：</span></span><br><span class="line">$(selector).each(<span class="function"><span class="keyword">function</span>(<span class="params">index, element</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// index 表示当前元素在所有匹配元素中的索引号</span></span><br><span class="line">  <span class="comment">// element 表示当前元素 dom 对象</span></span><br><span class="line">  <span class="comment">// this 在函数内部，this指向了element</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">$(<span class="string">&#x27;li&#x27;</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">index, ele</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// $(ele).css(&quot;backgroundColor&quot;, arr[index])</span></span><br><span class="line">  $(<span class="built_in">this</span>).css(<span class="string">&#x27;backgroundColor&#x27;</span>, arr[index])</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="php-中-foreach-语句"><a href="#php-中-foreach-语句" class="headerlink" title="php 中 foreach 语句"></a>php 中 foreach 语句</h1><blockquote>
<p>用来遍历数组(关联数组和索引数组均可)。</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$arr</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>) &#123;</span><br><span class="line">  <span class="comment">// $arr: 要遍历的数组</span></span><br><span class="line">  <span class="comment">// $key: 键，可以是任意变量名</span></span><br><span class="line">  <span class="comment">// $value: 值，可以是任意变量名</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$arr</span> <span class="keyword">as</span> <span class="variable">$value</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 遍历关联数组</span></span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>(</span><br><span class="line">  <span class="string">&quot;name&quot;</span>=&gt;<span class="string">&quot;zs&quot;</span>,</span><br><span class="line">  <span class="string">&quot;age&quot;</span>=&gt;<span class="number">18</span>,</span><br><span class="line">  <span class="string">&quot;sex&quot;</span>=&gt;<span class="number">20</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$arr</span> <span class="keyword">as</span> <span class="variable">$k</span> =&gt; <span class="variable">$v</span>) &#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="variable">$k</span> . <span class="string">&quot;=&quot;</span> . <span class="variable">$v</span> . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>遍历</tag>
      </tags>
  </entry>
  <entry>
    <title>浏览器切换标签离开当前页面时改变 title 提示</title>
    <url>/401.html</url>
    <content><![CDATA[<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;visibilitychange&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.visibilityState == <span class="string">&#x27;hidden&#x27;</span>) &#123;</span><br><span class="line">    normal_title = <span class="built_in">document</span>.title</span><br><span class="line">    <span class="built_in">document</span>.title = <span class="string">&#x27;离开了&#x27;</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="built_in">document</span>.title = normal_title</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>js 中编码（encode）和解码（decode）的三种方法</title>
    <url>/408.html</url>
    <content><![CDATA[<h3 id="js-中编码（encode）和解码（decode）的三种方法"><a href="#js-中编码（encode）和解码（decode）的三种方法" class="headerlink" title="js 中编码（encode）和解码（decode）的三种方法"></a>js 中编码（encode）和解码（decode）的三种方法</h3><p>js 对文字进行编码涉及 3 个函数：escape、encodeURI、encodeURIComponent，相应 3 个解码函数：unescape、decodeURI、decodeURIComponent</p>
<ul>
<li>escape()函数</li>
</ul>
<p>定义和用法：escape() 函数可对字符串进行编码，这样就可以在所有的计算机上读取该字符串<br>语法：escape(string)<br>参数：string 必需，要被转义或编码的字符串。<br>返回值：已编码的 string 的副本。其中某些字符被替换成了十六进制的转义序列<br>说明：该方法不会对 ASCII 字母和数字进行编码，也不会对下面这些 ASCII 标点符号进行编码： <code>-_.!~*&#39;()</code> ，其他所有的字符都会被转义序列替换</p>
<ul>
<li>encodeURI()函数</li>
</ul>
<p>定义和用法：encodeURI() 函数可把字符串作为 URI 进行编码<br>语法：encodeURI(URIstring)<br>参数：URIstring 必需，一个字符串，含有 URI 或其他要编码的文本。<br>返回值：URIstring 的副本，其中的某些字符将被十六进制的转义序列进行替换<br>说明：该方法不会对 ASCII 字母和数字进行编码，也不会对这些 ASCII 标点符号进行编码：<code>-_.!~*&#39;()</code> ，该方法的目的是对 URI 进行完整的编码，因此对以下在 URI 中具有特殊含义的 ASCII 标点符号，encodeURI() 函数是不会进行转义的：<code>;/?:@&amp;=+$,#</code></p>
<ul>
<li>encodeURIComponent()</li>
</ul>
<p>定义和用法：encodeURIComponent() 函数可把字符串作为 URI 组件进行编码<br>语法：encodeURIComponent(URIstring)<br>参数：URIstring 必需，一个字符串，含有 URI 组件或其他要编码的文本<br>返回值：URIstring 的副本，其中的某些字符将被十六进制的转义序列进行替换<br>说明：该方法不会对 ASCII 字母和数字进行编码，也不会对这些 ASCII 标点符号进行编码：<code>-_.!~*&#39;()</code>，其他字符（比如 ：<code>;/?:@&amp;=+$,#</code> 这些用于分隔 URI 组件的标点符号），都是由一个或多个十六进制的转义序列替换的</p>
<p>说明：</p>
<ul>
<li><p>encodeURIComponent() 函数 与 encodeURI() 函数的区别之处，前者假定它的参数是 URI 的一部分（比如协议、主机名、路径或查询字符串）。因此 encodeURIComponent() 函数将转义用于分隔 URI 各个部分的标点符号</p>
</li>
<li><p>传递参数时需要使用 encodeURIComponent，这样组合的 url 才不会被#等特殊字符截断</p>
</li>
</ul>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>获取页面向左、向上卷动的距离</title>
    <url>/1553.html</url>
    <content><![CDATA[<p>如果页面指定了 DTD，即指定了 DOCTYPE 时，使用 document.documentElement.scrollTop/Left 可以获取到正确的结果</p>
<p>页面没有 DTD，即没指定 DOCTYPE 时，使用 document.body.scrollTop/Left 可以获取到正确的结果</p>
<p>获取页面向左、向上卷动的距离的兼容性方式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getScroll</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    left: <span class="built_in">window</span>.pageXOffset || <span class="built_in">document</span>.documentElement.scrollLeft || <span class="built_in">document</span>.body.scrollLeft || <span class="number">0</span>,</span><br><span class="line">    top: <span class="built_in">window</span>.pageYOffset || <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop || <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>document.body 与 document.documentElement 区别</p>
<p>document.body 返回 dom 中的 body 节点即 <code>&lt;body&gt;</code><br>document.documentElement 返回 dom 中的 root 节点即 <code>&lt;html&gt;</code></p>
<p>设置页面卷曲距离</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// X: 向左卷曲距离</span></span><br><span class="line"><span class="comment">// Y: 向上卷曲距离</span></span><br><span class="line"><span class="built_in">window</span>.scrollTo(X, Y)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>防抖和节流</title>
    <url>/398.html</url>
    <content><![CDATA[<blockquote>
<p>防抖和节流都是为了解决<strong>短时间内大量触发某函数</strong>而导致的<strong>性能问题，</strong>比如触发频率过高导致的响应速度跟不上触发频率，出现延迟，假死或卡顿的现象</p>
</blockquote>
<h2 id="防抖（debounce）"><a href="#防抖（debounce）" class="headerlink" title="防抖（debounce）"></a>防抖（debounce）</h2><p>在事件被触发 n 秒后再执行回调函数，如果在这 n 秒内又被触发，则重新计时（只会触发最后一次）</p>
<p>应用场景</p>
<ul>
<li><p>用户在输入框中连续输入一串字符后，只会在输入完后去执行最后一次的查询 ajax 请求，这样可以有效减少请求次数，节约请求资源</p>
</li>
<li><p>window 的 resize、scroll 事件，不断地调整浏览器的窗口大小、或者滚动时会触发对应事件，防抖让其只触发一次</p>
</li>
</ul>
<h2 id="节流（throttle）"><a href="#节流（throttle）" class="headerlink" title="节流（throttle）"></a>节流（throttle）</h2><p>规定一个单位时间 n，在这个单位时间内，只能有一次触发事件的回调函数执行，如果在同一个单位时间内事件被触发多次，只有一次能生效（每 n 秒触发一次）</p>
<p>应用场景</p>
<ul>
<li><p>鼠标连续不断地触发某事件（如点击），只在单位时间内只触发一次</p>
</li>
<li><p>在页面的无限加载场景下，需要用户在滚动页面时，每隔一段时间发一次 ajax 请求，而不是在用户停下滚动页面操作时才去请求数据</p>
</li>
<li><p>监听滚动事件，比如是否滑到底部自动加载更多，用 throttle 来判断</p>
</li>
</ul>
<h2 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h2><p>防抖的作用是将多个连续的<code>debounced</code>调用合并为一次<code>callback</code>调用。防抖是基于最近次 <code>debounced</code> 调用来重置 <code>waitTime</code>，如果<code>debounced</code>事件触发间隔小于 <code>waitTime</code>，<code>callback</code>就不会执行；</p>
<p>节流的作用是限制<code>callback</code>调用的频率（每<code>waitTime</code>调用一次）。是基于上次 <code>callback</code> 调用来计算 <code>waitTime</code> 的，不管<code>callback</code> 事件触发有多频繁，只要距离上次 <code>callback</code> 调用超过了 <code>waitTime</code>，就一定会进行下次 <code>callback</code> 调用。</p>
<p>– 原理：</p>
<p>防抖是 <code>debounced</code> 维护了一个计时器，规定在 <code>waitTime</code> 时间后触发 <code>callback</code>，但是在 <code>waitTime</code> 时间内再次触发 <code>debounced</code> 的话，会清除当前的 timer 然后重新计时，这样一来，只有最后一次<code>debounced</code> 操作才能触发 <code>callback</code>；</p>
<p>节流是通过判断是否到达一定时间 (<code>waitTime</code>) 来再次触发 <code>callback</code> ， <code>func</code> 在 <code>waitTime</code> 时间内不能被再次触发。</p>
<p>实现</p>
<p>throttle-debounce 插件 <a href="https://www.npmjs.com/package/throttle-debounce">https://www.npmjs.com/package/throttle-debounce</a></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;input&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">input.oninput = throttle(<span class="number">1000</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.value)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> a = debounce(<span class="number">1000</span>, b)</span><br><span class="line">a.call(&#123; <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 节流</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">delay, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">let</span> lastExec = <span class="number">0</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> self = <span class="built_in">this</span></span><br><span class="line">    <span class="keyword">const</span> elapsed = <span class="built_in">Number</span>(<span class="keyword">new</span> <span class="built_in">Date</span>()) - lastExec</span><br><span class="line">    <span class="keyword">const</span> args = <span class="built_in">arguments</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">exec</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      callback.apply(self, args)</span><br><span class="line">      lastExec = <span class="built_in">Number</span>(<span class="keyword">new</span> <span class="built_in">Date</span>())</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (elapsed &gt; delay) &#123;</span><br><span class="line">      exec()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        exec()</span><br><span class="line">      &#125;, delay - elapsed)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 防抖</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">delay, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> self = <span class="built_in">this</span></span><br><span class="line">    <span class="keyword">const</span> args = <span class="built_in">arguments</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">exec</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      callback.apply(self, args)</span><br><span class="line">      lastExec = <span class="built_in">Number</span>(<span class="keyword">new</span> <span class="built_in">Date</span>())</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      exec()</span><br><span class="line">    &#125;, delay)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>高阶函数与柯里化</title>
    <url>/399.html</url>
    <content><![CDATA[<h2 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h2><p>高阶函数定义：将函数作为参数或者返回值是函数的函数<br>常见的 sort、reduce 等函数就是高阶函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sum = add(<span class="number">1</span>)(<span class="number">2</span>) <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// es6写法</span></span><br><span class="line"><span class="keyword">let</span> add = <span class="function">(<span class="params">a</span>) =&gt;</span> <span class="function">(<span class="params">b</span>) =&gt;</span> a + b</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line"><span class="keyword">let</span> add = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b</span><br></pre></td></tr></table></figure>

<h2 id="柯里化"><a href="#柯里化" class="headerlink" title="柯里化"></a>柯里化</h2><p>wiki 的柯里化定义: 把接受多个参数的函数变换成接受一个单一参数的函数，并且返回（接受余下的参数而且返回结果的）新函数的技术</p>
<p>柯里化后，将第一个参数变量存在函数里面了(闭包)，然后本来需要 n 个参数的函数变成只需要剩下的（n - 1 个）参数就可以调用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 形如</span></span><br><span class="line">;<span class="function">(<span class="params">a</span>) =&gt;</span> <span class="function">(<span class="params">b</span>) =&gt;</span> <span class="function">(<span class="params">c</span>) =&gt;</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> add = <span class="function">(<span class="params">a</span>) =&gt;</span> <span class="function">(<span class="params">b</span>) =&gt;</span> a + b</span><br><span class="line"><span class="keyword">let</span> add1 = add(<span class="number">1</span>) <span class="comment">// a = 1; b =&gt; a + b</span></span><br><span class="line">add1(<span class="number">2</span>) <span class="comment">// 1 + 2 = 3</span></span><br></pre></td></tr></table></figure>

<p>add1 函数等价于有了 a 这个闭包变量的 b = a + b</p>
<p>add 函数按照 wiki 的定义可以理解成只柯里化了一次，n 个连续箭头组成的函数实际上就是柯里化了 n - 1 次<br>前 n - 1 次调用，其实是提前将参数传递进去，并没有调用最内层函数体，最后一次调用才会调用最内层函数体，并返回最内层函数体的返回值</p>
<p>所以多个连续箭头函数就是多次柯里化的 es6 写法</p>
<p><strong>应用：</strong></p>
<p>函数懒执行<br>函数式编程</p>
<p><strong>柯里化函数使用场景：</strong></p>
<p>减少重复传递不变的参数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">discount</span>(<span class="params">price, discount</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> price * discount</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 每次都要重复传入 discount 参数，可以将这个函数柯里化</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">discount</span>(<span class="params">price, discount</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">price</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> price * discount</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> tenPercentDiscount = discount(<span class="number">0.9</span>) <span class="comment">// 9折</span></span><br><span class="line"><span class="keyword">const</span> twentyPercentDiscount = discount(<span class="number">0.8</span>) <span class="comment">// 8折</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 现在每次计算价格只需要：</span></span><br><span class="line">tenPercentDiscount(<span class="number">500</span>) <span class="comment">// 500 * 0.9</span></span><br><span class="line">twentyPercentDiscount(<span class="number">1000</span>) <span class="comment">// 1000 * 0.8</span></span><br></pre></td></tr></table></figure>

<h2 id="柯里化实现"><a href="#柯里化实现" class="headerlink" title="柯里化实现"></a>柯里化实现</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curry</span>(<span class="params">func</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">curried</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (args.length &gt;= func.length) &#123;</span><br><span class="line">      <span class="keyword">return</span> func.apply(<span class="built_in">this</span>, args)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...args2</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> curried.apply(<span class="built_in">this</span>, args.concat(args2))</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b + c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> curriedSum = curry(sum)</span><br><span class="line"><span class="built_in">console</span>.log(curriedSum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)) <span class="comment">// 6</span></span><br><span class="line"><span class="built_in">console</span>.log(curriedSum(<span class="number">1</span>)(<span class="number">2</span>, <span class="number">3</span>)) <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>

<h2 id="偏函数"><a href="#偏函数" class="headerlink" title="偏函数"></a>偏函数</h2>]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>less 使用 - mixin 混合</title>
    <url>/424.html</url>
    <content><![CDATA[<h3 id="mixin-混合"><a href="#mixin-混合" class="headerlink" title="mixin 混合"></a>mixin 混合</h3><p>可以在 mixin 中使用类选择器和 id 选择器</p>
<p>.bgc 定义了一个属性集，在任何需要使用 .bgc 属性集的选择器中，只需像下面这样调用：(小括号是可选的)</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.bgc</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f00</span>;</span><br><span class="line">  <span class="selector-class">.bgc</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译后的 CSS 代码为：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.bgc</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f00</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总结：mixin 其实就是一种嵌套，简单的讲，mixin 就是规则级别的复用</p>
<p>mixin 的定义也会被原封不动的输出到编译生成的 CSS 代码中</p>
<p>如果希望编译生成的 CSS 代码中不包含 mixin 的定义，在定义 mixin 时，只需在 class、id 的后面添加一对小括号即可。如：</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.bgc</span>() &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="selector-class">.bgc</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译后的 CSS 代码为：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>mixin 可以包含选择器</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.hover</span>() &#123;</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="selector-class">.hover</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译后的 CSS 代码为：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="命令空间-Namespaces"><a href="#命令空间-Namespaces" class="headerlink" title="命令空间 Namespaces"></a>命令空间 Namespaces</h3><p>如果想要在一个更复杂的选择器中混合属性，可以堆叠多个 id 或类</p>
<p>可以将 mixin 置于 id 选择器之下，这样可以确保它不会和另一个库冲突</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#bgc</span> &#123;</span><br><span class="line">  <span class="selector-class">.inner</span>() &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="selector-id">#bgc</span><span class="selector-class">.inner</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="important-关键字"><a href="#important-关键字" class="headerlink" title="!important 关键字"></a>!important 关键字</h3><p>在 mixin 后使用 !important 关键字，将会标记调用所有继承的属性为!important</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.bgc</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="selector-class">.bgc</span> !important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 编译后 css 为</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ccc</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>带参数的 Mixin</p>
<p>mixin 还可以接受参数，这些参数在混合时传递给选择器块</p>
<p>从上面的代码可以看出：mixin 其实就是一种嵌套，简单的讲，mixin 就是规则级别的复用。除了类选择器外，你也可以使用 id 选择器来定义 mixin。</p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>less</tag>
      </tags>
  </entry>
  <entry>
    <title>LESS 基本使用</title>
    <url>/425.html</url>
    <content><![CDATA[<h2 id="Less-简介"><a href="#Less-简介" class="headerlink" title="Less 简介"></a>Less 简介</h2><blockquote>
<p><strong><em>Less</em>  是一门 CSS 预处理语言（预先处理）,它扩展了 CSS 语言，增加了变量、Mixin、函数等特性</strong></p>
<p>浏览器不直接识别 less 文件，浏览器只识别 css 文件，所以我们写了 less 文件之后，我们需要预先把 less 文件转换成 css 文件。</p>
</blockquote>
<p>本质上，LESS 包含一套自定义的语法及一个解析器，用户根据这些语法定义自己的样式规则，这些规则最终会通过解析器，编译生成对应的 CSS 文件。LESS 并没有裁剪 CSS 原有的特性，更不是用来取代 CSS 的，而是在现有 CSS 语法的基础上，为 CSS 加入程序式语言的特性。</p>
<p><strong>less 仅仅是写 css 的另一种方式，写出来的 less 文件浏览器也不识别，所以啊，我们写完了 less 文件，还需要通过 less 解析器解析成 css，最终浏览器引入的还是 css 文件。</strong></p>
<p>学习网站：</p>
<p><a href="http://lesscss.org/">官网 http://lesscss.org/</a><br><a href="http://lesscss.cn/">中文网 http://lesscss.cn/</a></p>
<h2 id="less-的编译"><a href="#less-的编译" class="headerlink" title="less 的编译"></a>less 的编译</h2><blockquote>
<p>如何把 less 文件变成 css 文件</p>
</blockquote>
<h3 id="使用打包工具"><a href="#使用打包工具" class="headerlink" title="使用打包工具"></a>使用打包工具</h3><p><code>gulp</code></p>
<p><code>webpack</code></p>
<h3 id="使用考拉"><a href="#使用考拉" class="headerlink" title="使用考拉"></a>使用考拉</h3><blockquote>
<p>koala 是一个前端预处理器语言（less/sass）图形编译工具，支持 Less、Sass、Compass、CoffeeScript，帮助 web 开发者更高效地使用它们进行开发。跨平台运行，完美兼容 windows、linux、mac。</p>
</blockquote>
<p><a href="http://koala-app.com/index-zh.html">考拉官网</a></p>
<p>使用步骤：</p>
<ol>
<li>把<code>less</code>文件夹拖进去</li>
<li>会在当前目录生成一个<code>css</code>目录</li>
</ol>
<p>优点：不用 node 环境，不用 less 环境，koala 内置了</p>
<h3 id="使用插件"><a href="#使用插件" class="headerlink" title="使用插件"></a>使用插件</h3><p>easy less</p>
<h2 id="Less-语法"><a href="#Less-语法" class="headerlink" title="Less 语法"></a>Less 语法</h2><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p><strong>注释</strong></p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 这是CSS中的注释，因此会编译到css中 */</span></span><br><span class="line"><span class="comment">// 这是less的注释，css不能识别这个注释， 最后不会编译到css文件</span></span><br></pre></td></tr></table></figure>

<p><strong>变量</strong></p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">// @变量名: 变量值;</span></span><br><span class="line"><span class="variable">@color:</span> <span class="number">#ccc</span>;</span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@color</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="mixin-函数"><a href="#mixin-函数" class="headerlink" title="mixin 函数"></a>mixin 函数</h3><p><strong>混入函数</strong></p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义一个函数：不带参数</span></span><br><span class="line"><span class="selector-class">.btn</span>() &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 调用函数</span></span><br><span class="line"><span class="selector-class">.my_btn</span> &#123;</span><br><span class="line">  <span class="selector-class">.btn</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个函数：带参数</span></span><br><span class="line"><span class="selector-class">.btn_border</span>(<span class="variable">@width</span>) &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="variable">@width</span> solid <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.my_btn</span> &#123;</span><br><span class="line">  <span class="comment">// 如果函数定义了参数，调用的时候必须传入参数，否则会报错</span></span><br><span class="line">  <span class="selector-class">.btn_border</span>(<span class="number">10px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个函数：带参数默认值</span></span><br><span class="line"><span class="selector-class">.btn_border</span>(<span class="variable">@width</span>: <span class="number">1px</span>) &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="variable">@width</span> solid <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.my_btn</span> &#123;</span><br><span class="line">  <span class="comment">// 因为有默认值，所以不会报错</span></span><br><span class="line">  <span class="selector-class">.btn_border</span>();</span><br><span class="line">  <span class="selector-class">.btn_border</span>(<span class="number">10px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>应用：定义兼容多浏览器的圆角</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.border_radius</span>(<span class="variable">@value</span>: <span class="number">5px</span>) &#123;</span><br><span class="line">  -webkit-<span class="attribute">border-radius</span>: <span class="variable">@value</span>;</span><br><span class="line">  -moz-<span class="attribute">border-radius</span>: <span class="variable">@value</span>;</span><br><span class="line">  -ms-<span class="attribute">border-radius</span>: <span class="variable">@value</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="variable">@value</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="selector-class">.border_radius</span>(<span class="number">10px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="嵌套"><a href="#嵌套" class="headerlink" title="嵌套"></a>嵌套</h3><blockquote>
<p>我们可以在一个选择器中嵌套另一个选择器来实现继承，这样很大程度减少了代码量，并且代码看起来更加的清晰。</p>
</blockquote>
<ul>
<li>使用伪类的时候 可以使用<code>&amp;</code> 表示自己</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.father</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="comment">// 子代</span></span><br><span class="line">  <span class="selector-class">.son1</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 后代</span></span><br><span class="line">  &gt; <span class="selector-class">.son2</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 交集： &amp; 表示本身</span></span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-class">.now</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="导入"><a href="#导入" class="headerlink" title="导入"></a>导入</h3><figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 可以省略后缀名</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;variable&#x27;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;maxin&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>模块化的思想，分模块进行管理这些 less 文件，最终只需要使用 import 将 less 引入到一起即可</p>
<h3 id="函数（运算）"><a href="#函数（运算）" class="headerlink" title="函数（运算）"></a>函数（运算）</h3><blockquote>
<p>在我们的 CSS 中充斥着大量的数值型的 value，less 可以直接支持运算，也提供了一系列的函数提供给我们使用。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">li &#123;</span><br><span class="line">  float: left;</span><br><span class="line">  width: round(100%&#x2F;6, 2);</span><br><span class="line">  height: 100px + 100px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="http://www.1024i.com/demo/less/reference.html">http://www.1024i.com/demo/less/reference.html</a></p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>less</tag>
      </tags>
  </entry>
  <entry>
    <title>nodejs 安装与版本管理工具</title>
    <url>/439.html</url>
    <content><![CDATA[<h2 id="服务器端"><a href="#服务器端" class="headerlink" title="服务器端"></a>服务器端</h2><p><a href="https://github.com/tj/n">n</a><br><a href="https://github.com/nvm-sh/nvm">nvm</a><br><a href="https://github.com/nodesource/distributions">NodeSource</a></p>
<p>安装 n</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g n</span><br></pre></td></tr></table></figure>

<p>使用 n 管理 nodejs 版本</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">n --latest               <span class="comment"># Output the latest node version available</span></span><br><span class="line">n --lts                  <span class="comment">#  Output the latest LTS node version available</span></span><br><span class="line">n ls                     <span class="comment"># Output downloaded versions</span></span><br><span class="line">n ls-remote [version]    <span class="comment"># Output matching versions available for download</span></span><br><span class="line">n uninstall              <span class="comment"># Remove the installed node and npm</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装最新版</span></span><br><span class="line">n latest</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装长期支持版本</span></span><br><span class="line">n lts</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装指定版本</span></span><br><span class="line">n 12.4.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换nodejs版本</span></span><br><span class="line">n</span><br><span class="line"><span class="comment"># 上下键选择已安装的版本，回车切换</span></span><br><span class="line">ο node/13.6.0</span><br><span class="line">  node/10.4.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看当前版本 node -v</span></span><br><span class="line">node -v</span><br></pre></td></tr></table></figure>

<h2 id="windows-端"><a href="#windows-端" class="headerlink" title="windows 端"></a>windows 端</h2><p><a href="https://github.com/coreybutler/nvm-windows">nvm-windows</a></p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>注意：1. 需要卸载已经安装的 nodejs 版本，并删除残留的 nodejs 程序目录（例如：”C:\Program Files\nodejs”）<br>2. 删除 npm 全局安装的包（”C:\Users&lt;user&gt;\AppData\Roaming\npm”</p>
<ul>
<li><p>安装 nvm-windows <a href="https://github.com/coreybutler/nvm-windows/releases">下载</a></p>
</li>
<li><p>重新安装全局包<br>  安装完成后，必须为每个安装版本的node重新安装全局工具</p>
</li>
</ul>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>nvm-windows runs in an Admin shell. You’ll need to start powershell or Command Prompt as Administrator to use nvm-windows</p>
<p>NVM for Windows is a command line tool. Simply type nvm in the console for help. The basic commands are:</p>
<ul>
<li><code>nvm arch [32|64]</code>: Show if node is running in 32 or 64 bit mode. Specify 32 or 64 to override the default architecture.</li>
<li><code>nvm install &lt;version&gt; [arch]</code>: The version can be a node.js version or “latest” for the latest stable version. Optionally specify whether to install the 32 or 64 bit version (defaults to system arch). Set [arch] to “all” to install 32 AND 64 bit versions.</li>
<li><code>nvm list [available]</code>: List the node.js installations. Type available at the end to show a list of versions available for download.</li>
<li><code>nvm on</code>: Enable node.js version management.</li>
<li><code>nvm off</code>: Disable node.js version management (does not uninstall anything).</li>
<li><code>nvm proxy [url]</code>: Set a proxy to use for downloads. Leave [url] blank to see the current proxy. Set [url] to “none” to remove the proxy.</li>
<li><code>nvm uninstall &lt;version&gt;</code>: Uninstall a specific version.</li>
<li><code>nvm use &lt;version&gt; [arch]</code>: Switch to use the specified version. Optionally specify 32/64bit architecture. nvm use <arch> will continue using the selected version, but switch to 32/64 bit mode based on the value supplied to <arch>. For information about using use in a specific directory (or using .nvmrc), please refer to issue #16.</li>
<li><code>nvm root &lt;path&gt;</code>: Set the directory where nvm should store different versions of node.js. If <path> is not set, the current root will be displayed.</li>
<li><code>nvm version</code>: Displays the current running version of NVM for Windows.</li>
<li><code>nvm node_mirror &lt;node_mirror_url&gt;</code>: Set the node mirror.People in China can use <a href="https://npm.taobao.org/mirrors/node/">https://npm.taobao.org/mirrors/node/</a></li>
<li><code>nvm npm_mirror &lt;npm_mirror_url&gt;</code>: Set the npm mirror.People in China can use <a href="https://npm.taobao.org/mirrors/npm/">https://npm.taobao.org/mirrors/npm/</a></li>
</ul>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>nodejs</tag>
      </tags>
  </entry>
  <entry>
    <title>npm 包管理工具的使用</title>
    <url>/427.html</url>
    <content><![CDATA[<h3 id="解决某些-npm-包无法下载的问题"><a href="#解决某些-npm-包无法下载的问题" class="headerlink" title="解决某些 npm 包无法下载的问题"></a>解决某些 npm 包无法下载的问题</h3><p>如 electron sass</p>
<p>修改 <code>~/.npmrc</code>，或当前项目下的<code>.npmrc</code> 文件（如果没有可以新建）增加如下内容</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">registry&#x3D;https:&#x2F;&#x2F;registry.npm.taobao.org</span><br><span class="line">sass_binary_site&#x3D;https:&#x2F;&#x2F;npm.taobao.org&#x2F;mirrors&#x2F;node-sass&#x2F;</span><br><span class="line">phantomjs_cdnurl&#x3D;http:&#x2F;&#x2F;npm.taobao.org&#x2F;mirrors&#x2F;phantomjs</span><br><span class="line">electron_mirror&#x3D;http:&#x2F;&#x2F;npm.taobao.org&#x2F;mirrors&#x2F;electron&#x2F;</span><br><span class="line">chromedriver_cdnurl&#x3D;http:&#x2F;&#x2F;npm.taobao.org&#x2F;mirrors&#x2F;chromedriver</span><br></pre></td></tr></table></figure>

<p>淘宝 npm 镜像 <a href="https://npm.taobao.org/">https://npm.taobao.org/</a></p>
<p><a href="https://npmjs.com/">npm 官网</a><br><a href="https://docs.npmjs.com/">npm 文档</a><br><a href="https://www.npmjs.cn/">npm 中文文档</a></p>
<h3 id="npm-基本命令"><a href="#npm-基本命令" class="headerlink" title="npm 基本命令"></a>npm 基本命令</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 更新 npm</span></span><br><span class="line">npm -v|--version</span><br><span class="line">npm install npm@latest -g</span><br><span class="line"></span><br><span class="line"><span class="comment"># nvm : npm Version Manager</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 搜索包</span></span><br><span class="line">npm search &lt;pkg&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装包</span></span><br><span class="line">npm install [&lt;@scope&gt;/]&lt;pkg&gt; <span class="comment"># [&lt;@scope&gt;/] 安装限定范围的包</span></span><br><span class="line">npm install [&lt;@scope&gt;/]&lt;pkg&gt;@&lt;tag&gt;</span><br><span class="line">npm install [&lt;@scope&gt;/]&lt;pkg&gt;@&lt;version&gt;</span><br><span class="line">npm install [&lt;@scope&gt;/]&lt;pkg&gt;@&lt;version range&gt;</span><br><span class="line">npm install &lt;folder&gt;</span><br><span class="line">npm install &lt;tarball file&gt;  <span class="comment"># .tar, .tar.gz, or .tgz</span></span><br><span class="line">npm install &lt;tarball url&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 公有仓库</span></span><br><span class="line">npm install user/project <span class="comment"># 默认 github</span></span><br><span class="line">npm install bitbucket:user/project</span><br><span class="line">npm install gitlab:user/project<span class="comment">#semver:^5.0 # semver 版本</span></span><br><span class="line">npm install git+https://git@github.com/user/project.git</span><br><span class="line">npm install git+ssh://git@github.com/user/project.git</span><br><span class="line">npm install git://github.com/user/project.git</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">npm install &lt;pkg&gt; -S|--save <span class="comment"># 安装到 dependencies</span></span><br><span class="line">npm install &lt;pkg&gt; -D|--save-dev <span class="comment"># 安装到 devDependencies</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --verbose 参数 显示安装的详细信息</span></span><br><span class="line">npm i --verbose</span><br><span class="line"></span><br><span class="line"><span class="comment"># --production 参数 只会安装 dependencies 依赖，而忽略 devDependencies 依赖，用于生产环境</span></span><br><span class="line">npm i --production</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装全局包</span></span><br><span class="line">npm install -g &lt;pkg&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新包</span></span><br><span class="line">npm outdated <span class="comment"># 检查可以更新的模块</span></span><br><span class="line">npm update <span class="comment"># 更新全部本地包</span></span><br><span class="line"><span class="comment"># 更新全局安装的包</span></span><br><span class="line">npm update -g <span class="comment"># 更新全部</span></span><br><span class="line">npm update -g| --global &lt;pkg&gt; <span class="comment"># 更新指定包</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新方式 1</span></span><br><span class="line"><span class="comment"># 手动修改 package.json 中依赖包版本，之后执行</span></span><br><span class="line">npm install --force</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新方式 2 使用第三方插件：</span></span><br><span class="line">npm install -g npm-check-updates</span><br><span class="line">ncu <span class="comment"># 查看可更新包</span></span><br><span class="line">ncu -u <span class="comment"># 更新 package.json</span></span><br><span class="line">npm install <span class="comment"># 升级到最新版本</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除本地包</span></span><br><span class="line">npm uninstall &lt;pkg&gt;</span><br><span class="line">npm uninstall --save &lt;pkg&gt; <span class="comment"># 从 `package.json` 文件中删除依赖</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 卸载全局安装的包</span></span><br><span class="line">npm uninstall -g &lt;pkg&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开官网</span></span><br><span class="line">npm docs|home [&lt;pkg&gt;]</span><br><span class="line"><span class="comment"># 打开源码仓库页面</span></span><br><span class="line">npm repo [&lt;pkg&gt;]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化一个项目，创建一个 package.json 文件，项目名不能为中文</span></span><br><span class="line">npm init</span><br><span class="line"><span class="comment"># 创建默认 package.json 文件 快速的初始化一个项目，会使用文件夹名称作为项目名</span></span><br><span class="line">npm init --yes or -y</span><br></pre></td></tr></table></figure>

<p>简写</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install  可简写成 npm i</span><br><span class="line"></span><br><span class="line">npm uninstall 可简写成 npm uni</span><br></pre></td></tr></table></figure>

<h3 id="npm-修改源"><a href="#npm-修改源" class="headerlink" title="npm 修改源"></a>npm 修改源</h3><p><strong>修改全局配置</strong></p>
<ul>
<li>进入~/.npmrc 增加 <code>registry=https://registry.npm.taobao.org</code></li>
<li>通过命令 <code>npm config set registry https://registry.npm.taobao.org</code></li>
</ul>
<p><strong>修改当前项目的 npm 源</strong></p>
<p>在 <code>package.json</code> 同级目录下创建 <code>.npmrc</code> 文件，增加 <code>registry=https://registry.npm.taobao.org</code></p>
<p><strong>临时使用指定源下载</strong> <code>npm install jquery --registry=https://registry.npm.taobao.org</code></p>
<p><strong>使用 nrm 管理源</strong></p>
<h3 id="npm-配置文件"><a href="#npm-配置文件" class="headerlink" title="npm 配置文件"></a>npm 配置文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># .npmrc 配置文件位置（~/.npmrc）</span></span><br><span class="line">npm config list</span><br><span class="line"></span><br><span class="line"><span class="comment"># npm 缓存目录，默认 C:\Users\&lt;username&gt;\AppData\Roaming\npm-cache</span></span><br><span class="line">npm config get cache</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除 npm 缓存：注意：如果网速慢的话，会导致下载失败。 再重新下载之前，建议使用该命令，清除刚才下载的缓存，否则有可能一直无法下载成功</span></span><br><span class="line">npm cache clean --force | -f</span><br><span class="line"></span><br><span class="line"><span class="comment"># npm 全局 node 包位置：  默认在 C:\Users\用户名\AppData\Roaming\npm目录下</span></span><br><span class="line">npm config get prefix</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">npm root -g</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改 npm 全局文件位置及缓存文件位置</span></span><br><span class="line">npm config <span class="built_in">set</span> prefix <span class="string">&quot;&lt;new_path&gt;&quot;</span></span><br><span class="line">npm config <span class="built_in">set</span> cache <span class="string">&quot;&lt;new_path&gt;&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="版本号"><a href="#版本号" class="headerlink" title="版本号"></a>版本号</h3><p>使用 NPM 下载和发布代码时都会接触到版本号。NPM 使用语义版本号来管理代码</p>
<p>语义版本号分为 X.Y.Z 三位，分别代表主版本号、次版本号和补丁版本号。当代码变更时，版本号按以下原则更新。</p>
<ul>
<li>如果只是修复 bug，需要更新 Z 位</li>
<li>如果是新增了功能，但是向下兼容，需要更新 Y 位</li>
<li>如果有大变动，向下不兼容，需要更新 X 位</li>
</ul>
<h3 id="nrm-使用"><a href="#nrm-使用" class="headerlink" title="nrm 使用"></a>nrm 使用</h3><p>nrm：npm registry manager（npm 仓库地址管理工具）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看配置列表，带 `*` 号即为当前使用的配置</span></span><br><span class="line">nrm ls</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换源</span></span><br><span class="line">nrm use 源的别名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加源</span></span><br><span class="line">nrm add 别名 地址</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测速</span></span><br><span class="line">nrm <span class="built_in">test</span> 别名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除源</span></span><br><span class="line">nrm del 别名</span><br></pre></td></tr></table></figure>

<h3 id="查看项目安装了那些包"><a href="#查看项目安装了那些包" class="headerlink" title="查看项目安装了那些包"></a>查看项目安装了那些包</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm list --depth=0 [--dev | --production]</span><br><span class="line">npm list --depth=0</span><br></pre></td></tr></table></figure>

<p>–depth 表示深度，我们使用的模块会有依赖，深度为零的时候，不会显示依赖模块</p>
<h3 id="查看全局安装的包"><a href="#查看全局安装的包" class="headerlink" title="查看全局安装的包"></a>查看全局安装的包</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm list --depth=0 --global</span><br></pre></td></tr></table></figure>

<h3 id="package-json-文件"><a href="#package-json-文件" class="headerlink" title="package.json 文件"></a>package.json 文件</h3><p>package.json 文件，包（项目）描述文件，用来管理组织一个包（项目），它是一个纯 JSON 格式的</p>
<ul>
<li>作用：描述当前项目（包）的信息，描述当前包（项目）的依赖项</li>
<li>如何生成：<code>npm init</code>或者<code>npm init -y</code></li>
<li>作用<ul>
<li>作为一个标准的包，必须要有<code>package.json</code>文件进行描述</li>
<li>一个项目的 node_modules 目录通常都会很大，不用拷贝 node_modules 目录，可以通过 package.json 文件配合<code>npm install</code> 直接安装项目所有的依赖项</li>
</ul>
</li>
<li>描述内容</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;myproject&quot;</span>, <span class="comment">// 描述了包的名字，不能有中文</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// 包的描述信息</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span>: <span class="string">&quot;index.js&quot;</span>, <span class="comment">// 入口文件</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="comment">// 配置一些脚本</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span>: [], <span class="comment">// 关键字（方便搜索）</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// 作者信息</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span>: <span class="string">&quot;ISC&quot;</span>, <span class="comment">// 许可证，开源协议</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="comment">// 项目依赖</span></span><br><span class="line">    <span class="attr">&quot;bootstrap&quot;</span>: <span class="string">&quot;^3.3.7&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;jquery&quot;</span>: <span class="string">&quot;^3.3.1&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：一个合法的 package.json，必须要有 name 和 version 两个属性</strong></p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>nodejs</tag>
        <tag>npm</tag>
      </tags>
  </entry>
  <entry>
    <title>nuxt.js 学习笔记</title>
    <url>/1782.html</url>
    <content><![CDATA[<h2 id="nuxt"><a href="#nuxt" class="headerlink" title="nuxt"></a>nuxt</h2><p>Nuxt.js 是一个基于 Vue.js 的通用应用框架。</p>
<p>官网：<a href="https://nuxtjs.org/">https://nuxtjs.org/</a><br>中文：<a href="https://zh.nuxtjs.org/">https://zh.nuxtjs.org/</a> <a href="https://www.nuxtjs.cn/">https://www.nuxtjs.cn/</a></p>
<h2 id="nuxt-渲染流程"><a href="#nuxt-渲染流程" class="headerlink" title="nuxt 渲染流程"></a>nuxt 渲染流程</h2><p>在任何 Vue 组件的生命周期内， 只有 beforeCreate 和 created 这两个方法会在 客户端和服务端被调用。其他生命周期函数仅在客户端被调用。<br><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102205617.png"></p>
<h3 id="asyncData-方法"><a href="#asyncData-方法" class="headerlink" title="asyncData 方法"></a>asyncData 方法</h3><p><a href="https://zh.nuxtjs.org/api/">https://zh.nuxtjs.org/api/</a></p>
<p>用于在渲染组件之前异步获取数据，在服务端或路由更新之前被调用。在这个方法被调用的时候，第一个参数被设定为当前页面的上下文对象，你可以利用 asyncData 方法来获取数据并返回给当前组件。</p>
<p>注意：由于 asyncData 方法是在组件 初始化 前被调用的，所以在方法内是没有办法通过 this 来引用组件的实例对象。<br>asyncData 只在首屏被执行，其它时候相当于 created 或 mounted 在客户端渲染页面。</p>
<h3 id="fetch-方法"><a href="#fetch-方法" class="headerlink" title="fetch 方法"></a>fetch 方法</h3><p>在 2.12 版本之前：</p>
<p>fetch 方法用于在渲染页面前填充应用的状态树（store）数据， 与 asyncData 方法类似，不同的是它不会设置组件的数据。<br>警告: 您无法在内部使用 this 获取组件实例，fetch 是在组件初始化之前被调用</p>
<p>在 2.12 版本中，fetch 有大更新，fetch(context)已被弃用，可以在 fetch() 中直接使用 this，参考：<a href="https://nuxtjs.org/api/pages-fetch">https://nuxtjs.org/api/pages-fetch</a></p>
<p>参考 2：<a href="https://juejin.im/post/5ecb813751882543184598fe">https://juejin.im/post/5ecb813751882543184598fe</a><br><a href="https://zh.nuxtjs.org/blog/understanding-how-fetch-works-in-nuxt-2-12/">https://zh.nuxtjs.org/blog/understanding-how-fetch-works-in-nuxt-2-12/</a></p>
<h2 id="context"><a href="#context" class="headerlink" title="context"></a>context</h2><p><a href="https://zh.nuxtjs.org/api/context">https://zh.nuxtjs.org/api/context</a></p>
<p>服务端上下文对象，可以在 <code>asyncData</code> <code>fetch</code> <code>plugins</code> <code>middlewares</code> <code>modules</code> <code>store/nuxtServerInit</code> 等特殊的 Nuxt 生命周期区域中使用</p>
<h2 id="nuxt-配置"><a href="#nuxt-配置" class="headerlink" title="nuxt 配置"></a>nuxt 配置</h2><h3 id="配置启动端口"><a href="#配置启动端口" class="headerlink" title="配置启动端口"></a>配置启动端口</h3><p>以下两者都可以配置启动端口</p>
<p>第一种</p>
<p>nuxt.config.js :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  server: &#123;</span><br><span class="line">    port: <span class="number">8000</span>,</span><br><span class="line">    host: <span class="string">&#x27;127.0.0.1&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>第二种</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">package.json :</span><br><span class="line">&quot;config&quot;: &#123;</span><br><span class="line">  &quot;nuxt&quot;: &#123;</span><br><span class="line">    &quot;port&quot;: &quot;8000&quot;,</span><br><span class="line">    &quot;host&quot;: &quot;127.0.0.1&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="引入-element-ui"><a href="#引入-element-ui" class="headerlink" title="引入 element-ui"></a>引入 element-ui</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i element-ui</span><br></pre></td></tr></table></figure>

<p>修改 <code>nuxt.config.js</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  plugins: [<span class="string">&#x27;@/plugins/element-ui&#x27;</span>],</span><br><span class="line">  transpile: [<span class="regexp">/^element-ui/</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建 <code>plugins/element-ui.js</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Element <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line">Vue.use(Element)</span><br></pre></td></tr></table></figure>

<h3 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h3><p><a href="https://zh.nuxtjs.org/api/configuration-env">https://zh.nuxtjs.org/api/configuration-env</a></p>
<p>package.json</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;dev&quot;</span>: <span class="string">&quot;nuxt&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;build:test&quot;</span>: <span class="string">&quot;cross-env BASE_URL=testxxx nuxt build&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;build:production&quot;</span>: <span class="string">&quot;cross-env BASE_URL=productionxxx nuxt build&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>nuxt.config.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  env: &#123;</span><br><span class="line">    baseUrl: process.env.BASE_URL</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们可以通过以下两种方式来使用 baseUrl 变量：</p>
<p>通过 <code>process.env.baseUrl</code><br>通过 <code>context.env.baseUrl</code></p>
<h3 id="自定义路由配置"><a href="#自定义路由配置" class="headerlink" title="自定义路由配置"></a>自定义路由配置</h3><p>在 Nuxt.js 中，路由是基于文件结构自动生成，无需配置。自动生成的路由配置可在 .nuxt/router.js 中查看。</p>
<p>配置路由以 <code>.html</code> 结尾</p>
<p>nuxt.config.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  router: &#123;</span><br><span class="line">    middleware: <span class="string">&#x27;router&#x27;</span>,</span><br><span class="line">    <span class="function"><span class="title">extendRoutes</span>(<span class="params">routes, resolve</span>)</span> &#123;</span><br><span class="line">      routes.push(&#123;</span><br><span class="line">        name: <span class="string">&#x27;case&#x27;</span>,</span><br><span class="line">        path: <span class="string">&#x27;/case.html&#x27;</span>,</span><br><span class="line">        component: resolve(__dirname, <span class="string">&#x27;pages/case/_id.vue&#x27;</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">      routes.forEach(<span class="function">(<span class="params">element</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> path = element.path</span><br><span class="line">        <span class="keyword">if</span> (path !== <span class="string">&#x27;/&#x27;</span> &amp;&amp; !path.includes(<span class="string">&#x27;.html&#x27;</span>)) &#123;</span><br><span class="line">          path = path + <span class="string">&#x27;.html&#x27;</span></span><br><span class="line">          element.path = path</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="axios-配置"><a href="#axios-配置" class="headerlink" title="axios 配置"></a>axios 配置</h3><p>使用 Axios，并配置全局拦截器，处理跨域</p>
<p>安装依赖</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install @nuxtjs/axios @nuxtjs/proxy --save</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// nuxt.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  modules: [<span class="string">&#x27;@nuxtjs/axios&#x27;</span>], <span class="comment">// 不需要加入@nuxtjs/proxy</span></span><br><span class="line">  axios: &#123;</span><br><span class="line">    proxy: <span class="literal">true</span>,</span><br><span class="line">    prefix: <span class="string">&#x27;/api&#x27;</span>, <span class="comment">// baseURL</span></span><br><span class="line">    credentials: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  proxy: &#123;</span><br><span class="line">    <span class="string">&#x27;/api/&#x27;</span>: &#123;</span><br><span class="line">      target: <span class="string">&#x27;http://127.0.0.1:8080&#x27;</span>, <span class="comment">// 代理地址</span></span><br><span class="line">      changeOrigin: <span class="literal">true</span>,</span><br><span class="line">      pathRewrite: &#123;</span><br><span class="line">        <span class="string">&#x27;^/api&#x27;</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>组件中使用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  asyncData (&#123; app, $axios &#125;) &#123;</span><br><span class="line">    <span class="comment">// app.$axios == $axios</span></span><br><span class="line">    <span class="built_in">console</span>.log(app.$axios)</span><br><span class="line">  &#125;,</span><br><span class="line">  created () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$axios)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>设置全局拦截器：新建一个/plugins/axios.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">&#123; $axios &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> axios = $axios</span><br><span class="line">  <span class="comment">// 基本配置</span></span><br><span class="line">  axios.defaults.timeout = <span class="number">10000</span></span><br><span class="line">  axios.defaults.headers.post[<span class="string">&#x27;Content-Type&#x27;</span>] = <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 请求回调</span></span><br><span class="line">  axios.onRequest(<span class="function">(<span class="params">config</span>) =&gt;</span> &#123;&#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 返回回调</span></span><br><span class="line">  axios.onResponse(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;&#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 错误回调</span></span><br><span class="line">  axios.onError(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后在 plugins 配置它</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">  &#123;</span><br><span class="line">    src: <span class="string">&#x27;@/plugins/axios&#x27;</span>,</span><br><span class="line">    mode: <span class="string">&#x27;client&#x27;</span>,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<h3 id="配置-css-预处理器"><a href="#配置-css-预处理器" class="headerlink" title="配置 css 预处理器"></a>配置 css 预处理器</h3><p>安装依赖</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i -D less less-loader</span><br></pre></td></tr></table></figure>

<p>无需配置，模板内直接使用</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;less&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="token-的设置与存储"><a href="#token-的设置与存储" class="headerlink" title="token 的设置与存储"></a>token 的设置与存储</h3><p>在前后端分离的项目中，一般都会存放到本地存储中。但 Nuxt.js 不同，由于服务端渲染的特点，部分请求在服务端发起，我们无法获取 localStorage 或 sessionStorage。</p>
<p>可以使用 cookie，并借助 cookie-universal-nuxt 模块（该模块只是帮助我们注入，主要实现依赖 cookie-universal），不管在服务端还是客户端，cookie-universal-nuxt 都为我们提供一致的 api，它内部会帮我们去适配对应的方法。</p>
<p>安装 cookie-universal-nuxt</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run cookie-universal-nuxt --save</span><br></pre></td></tr></table></figure>

<p>nuxt.config.js :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  modules: [<span class="string">&#x27;cookie-universal-nuxt&#x27;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>访问 $cookies 进行使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 服务端：</span></span><br><span class="line"><span class="comment">// 获取</span></span><br><span class="line">app.$cookies.get(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line"><span class="comment">// 设置</span></span><br><span class="line">app.$cookies.set(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;value&#x27;</span>)</span><br><span class="line"><span class="comment">// 删除</span></span><br><span class="line">app.$cookies.remove(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 客户端：</span></span><br><span class="line"><span class="comment">// 获取</span></span><br><span class="line"><span class="built_in">this</span>.$cookies.get(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line"><span class="comment">// 设置</span></span><br><span class="line"><span class="built_in">this</span>.$cookies.set(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;value&#x27;</span>)</span><br><span class="line"><span class="comment">// 删除</span></span><br><span class="line"><span class="built_in">this</span>.$cookies.remove(<span class="string">&#x27;name&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>之后需要改造下 axios，让它在请求时带上验证信息：</p>
<p>/plugins/axios.js :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">&#123; app: &#123; $axios, $cookies &#125; &#125;</span>) </span>&#123;</span><br><span class="line">  $axios.interceptors.request.use(<span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 头部带上验证信息</span></span><br><span class="line">    config.headers[<span class="string">&#x27;X-Token&#x27;</span>] = $cookies.get(<span class="string">&#x27;token&#x27;</span>) || <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;)</span><br><span class="line">  $axios.interceptors.response.use(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="regexp">/^[4|5]/</span>.test(response.status)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(response.statusText)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response.data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="middleware-中间件使用"><a href="#middleware-中间件使用" class="headerlink" title="middleware 中间件使用"></a>middleware 中间件使用</h3><p><a href="https://zh.nuxtjs.org/api/pages-middleware">https://zh.nuxtjs.org/api/pages-middleware</a></p>
<p>全局配置: 这种中间件使用是注入到全局的每个页面中</p>
<p>nuxt.config.js :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  router: &#123;</span><br><span class="line">    middleware: [<span class="string">&#x27;auth&#x27;</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果你希望中间件只运行于某个页面，可以配置页面的 middleware 选项：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  middleware: <span class="string">&#x27;auth&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用-keep-alive"><a href="#使用-keep-alive" class="headerlink" title="使用 keep-alive"></a>使用 keep-alive</h3><p><a href="https://github.com/nuxt/nuxt.js/tree/dev/examples/with-keep-alive">https://github.com/nuxt/nuxt.js/tree/dev/examples/with-keep-alive</a></p>
<p>layouts/default.vue:</p>
<template>
  <Nuxt keep-alive/>
</template>

<p>直接给 Nuxt 添加 keep-alive 虽然可以实现页面缓存，但是每次页面切换时都会去请求接口</p>
<p><a href="https://juejin.im/post/5cff5f02e51d4510624f97ab">https://juejin.im/post/5cff5f02e51d4510624f97ab</a></p>
<h3 id="分离-css"><a href="#分离-css" class="headerlink" title="分离 css"></a>分离 css</h3><p>nuxt.config.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">build: &#123;</span><br><span class="line">extractCSS: <span class="literal">true</span>,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      chunks: <span class="string">&#x27;all&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="head-配置"><a href="#head-配置" class="headerlink" title="head 配置"></a>head 配置</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">meta: [</span><br><span class="line">  &#123; <span class="attr">charset</span>: <span class="string">&#x27;utf-8&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;viewport&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;width=device-width, initial-scale=1&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;author&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;cuilongjin&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="string">&#x27;http-equiv&#x27;</span>: <span class="string">&#x27;X-UA-Compatible&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;IE=edge&#x27;</span> &#125;,</span><br><span class="line">],</span><br><span class="line">link: [</span><br><span class="line">  &#123;</span><br><span class="line">    rel: <span class="string">&#x27;icon&#x27;</span>,</span><br><span class="line">    type: <span class="string">&#x27;image/x-icon&#x27;</span>,</span><br><span class="line">    href: <span class="string">&#x27;/logo.png&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">],</span><br><span class="line">script: [</span><br><span class="line">  &#123;</span><br><span class="line">    src: <span class="string">&#x27;/moveheader.js&#x27;</span>, <span class="comment">// 引入 js 路径</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    innerHTML: <span class="string">&#x27;console.log(&#x27;</span><span class="number">1</span><span class="string">&#x27;)&#x27;</span> <span class="comment">// 直接引入 js 代码</span></span><br><span class="line">  &#125;,</span><br><span class="line">],</span><br><span class="line"><span class="comment">// 如果使用innerHTML直接引入 js 代码，代码中的引号会被转换为实体字符，导致代码不能正常执行，所以需要配置此项</span></span><br><span class="line">__dangerouslyDisableSanitizers: [<span class="string">&#x27;script&#x27;</span>],</span><br></pre></td></tr></table></figure>

<h3 id="添加百度统计代码"><a href="#添加百度统计代码" class="headerlink" title="添加百度统计代码"></a>添加百度统计代码</h3><p>在 plugins 目录下新建 <code>baidu.js</code> 文件，内容如下：<br>注意修改xxxxxxxxxxx编号</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> ** 只在生产模式的客户端中使用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">if</span> (process.client &amp;&amp; process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span>) &#123;</span><br><span class="line">  <span class="comment">// 百度统计脚本</span></span><br><span class="line">  <span class="keyword">var</span> _hmt = _hmt || []</span><br><span class="line">  ;(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> hm = <span class="built_in">document</span>.createElement(<span class="string">&#x27;script&#x27;</span>)</span><br><span class="line">    hm.src = <span class="string">&#x27;https://hm.baidu.com/hm.js?xxxxxxxxxxx&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> s = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;script&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    s.parentNode.insertBefore(hm, s)</span><br><span class="line">  &#125;)()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (&#123; <span class="attr">app</span>: &#123; router &#125;, store &#125;) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 每次路由变更时进行pv统计</span></span><br><span class="line">  <span class="keyword">if</span> (process.client &amp;&amp; process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span>) &#123;</span><br><span class="line">    router.afterEach(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> _hmt = _hmt || []</span><br><span class="line">      ;(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> hm = <span class="built_in">document</span>.createElement(<span class="string">&#x27;script&#x27;</span>)</span><br><span class="line">        hm.src = <span class="string">&#x27;https://hm.baidu.com/hm.js?xxxxxxxxxxx&#x27;</span></span><br><span class="line">        <span class="keyword">const</span> s = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;script&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">        s.parentNode.insertBefore(hm, s)</span><br><span class="line">      &#125;)()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在 <code>nuxt-config.js</code> 中添加</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">&#x27;~plugins/baidu.js&#x27;</span>, <span class="attr">mode</span>: <span class="string">&#x27;client&#x27;</span> &#125;,</span><br><span class="line">  ],</span><br></pre></td></tr></table></figure>

<h2 id="兼容-ie9-ie10"><a href="#兼容-ie9-ie10" class="headerlink" title="兼容 ie9 ie10"></a>兼容 ie9 ie10</h2><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p><a href="https://github.com/ChanWahFung/nuxt-juejin-project">参考 demo</a><br><a href="https://juejin.im/post/5ebf5dcf5188256d4266285d">掘金教程</a></p>
<p><code>window.__NUXT__</code> 如何去掉</p>
<p>vue 实例中 通过 <code>this.$nuxt.context</code> 访问 context</p>
<p>nuxt generate 动态路由配置</p>
<p>nuxt 配置自定义 webpack loader 处理图片 css</p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>nuxt</tag>
      </tags>
  </entry>
  <entry>
    <title>RoughJS -- JavaScript手绘风格的图形库</title>
    <url>/650.html</url>
    <content><![CDATA[<p>RoughJS是一个轻量级的JavaScript图形库（压缩后约9KB），可以让你在网页上绘制素描风格、手绘样式般的图形。RoughJS定义了绘制直线，曲线，圆弧，多边形，圆和椭圆的图元，同时它还支持绘制SVG路径。</p>
<p>Rough.js可同时用于<a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API">Canvas</a>和<a href="https://developer.mozilla.org/en-US/docs/Web/SVG">SVG</a>。</p>
<p>网站地址：<a href="https://roughjs.com/">https://roughjs.com/</a></p>
<p>使用手册：<a href="https://www.tutorialdocs.com/tutorial/roughjs/get-started.html">https://www.tutorialdocs.com/tutorial/roughjs/get-started.html</a></p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>前端工具库</tag>
      </tags>
  </entry>
  <entry>
    <title>rrweb-io - 利用现代浏览器所提供的强大 API 录制并回放任意 Web 界面中的用户操作</title>
    <url>/1754.html</url>
    <content><![CDATA[<p><a href="https://github.com/rrweb-io/rrweb">https://github.com/rrweb-io/rrweb</a></p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>前端工具库</tag>
      </tags>
  </entry>
  <entry>
    <title>icon 图标在 vue 项目中的使用</title>
    <url>/2011.html</url>
    <content><![CDATA[<p>参考链接：<a href="https://juejin.im/post/59bb864b5188257e7a427c09">https://juejin.im/post/59bb864b5188257e7a427c09</a></p>
<h3 id="使用-iconfont"><a href="#使用-iconfont" class="headerlink" title="使用 iconfont"></a>使用 iconfont</h3><p>阿里开源图库 <a href="https://www.iconfont.cn/">https://www.iconfont.cn/</a></p>
<p>使用方法 <a href="https://www.iconfont.cn/help/detail?spm=a313x.7781069.1998910419.d8d11a391&amp;helptype=code">https://www.iconfont.cn/help/detail?spm=a313x.7781069.1998910419.d8d11a391&amp;helptype=code</a></p>
<p>下载代码到本地（也可以使用在线链接）打开 demo_index.html 使用说明，有三种使用方式 unicode font-class symbol<br>unicode 方式： <span class="iconfont">&#x33;</span> 这样，不直观，语意不明确，不支持多色图标<br>font-class 方式： <span class="iconfont icon-xxx"></span> 使用 class 定义，有语意，需要注意命名空间的问题，也是不支持多色图标<br>symbol 方式：使用 svg 不用再去请求 woff|eot|ttf| 这些字体库，且缩放不会失真，支持更加复杂的图标</p>
<p>symbol 方式使用步骤：</p>
<p>第一步：引入项目下面生成的 symbol 代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./iconfont.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>或通过 import 导入</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./iconfont.js&#x27;</span></span><br></pre></td></tr></table></figure>

<p>第二步：加入通用 CSS 代码：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.icon</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1em</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">1em</span>;</span><br><span class="line">  <span class="attribute">vertical-align</span>: -<span class="number">0.15em</span>;</span><br><span class="line">  fill: currentColor;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>第三步：挑选相应图标并获取类名，应用于页面：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">class</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">&quot;#icon-xxx&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>symbol 其实使用了 SVG Sprite 技术， 所有的 svg-sprite 都是通过 iconfont 的 iconfont.js 生成的，所以：</p>
<p>所有图标 icon 都很不直观，完全不知道哪个图标名对应什么图标，每次增删改图标，或者添加一些自定义的 svg 图标，只能将其也上传到 iconfont 和原有的图标放在一个项目库中，之后再重新下载，将整体 js 文件一起替换，而且也做不到按需加载</p>
<p>导出的 svg 包含大量的无用信息，例如编辑器源信息、注释等。通常包含其它一些不会影响渲染结果或可以移除的内容</p>
<h3 id="vue-cli3-项目使用-svg-sprite-loader-打包-svg"><a href="#vue-cli3-项目使用-svg-sprite-loader-打包-svg" class="headerlink" title="vue cli3 项目使用 svg-sprite-loader 打包 svg"></a>vue cli3 项目使用 svg-sprite-loader 打包 svg</h3><p>vue cli3 默认使用 file-loader 处理 svg：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* config.module.rule(&#x27;svg&#x27;) */</span></span><br><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.(svg)(\?.*)?$/</span>,</span><br><span class="line">  use: [</span><br><span class="line">    <span class="comment">/* config.module.rule(&#x27;svg&#x27;).use(&#x27;file-loader&#x27;) */</span></span><br><span class="line">    &#123;</span><br><span class="line">      loader: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        name: <span class="string">&#x27;static/img/[name].[hash:8].[ext]&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>并路径指定为在 img 文件夹下，但我们的 svg 并不在 img 文件夹，而且 svg-sprite-loader 已经自带了 file-loader 的功能，所以，我们可以在我们自定义的 vue.config.js 文件下将 rule(svg) 清除：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  chainWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    config.module.rule(<span class="string">&#x27;svg&#x27;</span>).uses.clear()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>或者添加忽略，然后加上自定义的 svg rule，最后的配置如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 使用 svg-sprite-loader 处理 svg */</span></span><br><span class="line"><span class="comment">// 默认规则忽略 src/icons 文件夹</span></span><br><span class="line">config.module</span><br><span class="line">  .rule(<span class="string">&#x27;svg&#x27;</span>)</span><br><span class="line">  .exclude.add(path.resolve(__dirname, <span class="string">&#x27;src/icons&#x27;</span>))</span><br><span class="line">  .end()</span><br><span class="line"></span><br><span class="line"><span class="comment">// src/icons 文件夹下的 svg 使用 svg-sprite-loader</span></span><br><span class="line">config.module</span><br><span class="line">  .rule(<span class="string">&#x27;svg-sprite-loader&#x27;</span>)</span><br><span class="line">  .include.add(path.resolve(__dirname, <span class="string">&#x27;src/icons&#x27;</span>))</span><br><span class="line">  .end()</span><br><span class="line">  .test(<span class="regexp">/\.svg$/</span>)</span><br><span class="line">  .use(<span class="string">&#x27;svg-sprite&#x27;</span>)</span><br><span class="line">  .loader(<span class="string">&#x27;svg-sprite-loader&#x27;</span>)</span><br><span class="line">  .options(&#123;</span><br><span class="line">    symbolId: <span class="string">&#x27;icon-[name]&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .end()</span><br></pre></td></tr></table></figure>

<p>之后可以通过如下方式使用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/icons/qq.svg&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- xlink:href=&quot;#icon-图标文件名 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">svg</span>&gt;</span><span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">&quot;#icon-qq&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用缺点：需要手动导入图标</p>
<h3 id="自动导入"><a href="#自动导入" class="headerlink" title="自动导入"></a>自动导入</h3><p>使用 webpack 的 <a href="https://webpack.js.org/guides/dependency-management/#require-context">require.context</a> api</p>
<p>require.context 语法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>.context(directory, (useSubdirectories = <span class="literal">false</span>), (regExp = <span class="regexp">/^\.\//</span>))</span><br><span class="line"><span class="comment">// directory：说明需要检索的目录</span></span><br><span class="line"><span class="comment">// useSubdirectories：是否检索子目录</span></span><br><span class="line"><span class="comment">// regExp: 匹配文件的正则表达式</span></span><br><span class="line"><span class="comment">// Examples:</span></span><br><span class="line"><span class="built_in">require</span>.context(<span class="string">&#x27;./test&#x27;</span>, <span class="literal">false</span>, <span class="regexp">/\.test\.js$/</span>)</span><br><span class="line"><span class="comment">// 表示在 test 文件夹（不包含子目录）下面的找所有文件名以 .test.js 结尾的能被 require 的文件</span></span><br></pre></td></tr></table></figure>

<p>自动引入 @/icons 下面所有的图标</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 基础组件的自动化全局注册</span></span><br><span class="line"><span class="keyword">const</span> requireComponent = <span class="built_in">require</span>.context(<span class="string">&#x27;../../components&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line"><span class="comment">// console.log(requireComponent.keys())</span></span><br><span class="line">requireComponent.keys().forEach(<span class="function"><span class="params">filename</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> componentConfig = requireComponent(filename)</span><br><span class="line">  <span class="comment">// console.log(componentConfig)</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> componentName = filename</span><br><span class="line">    .split(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">    .pop()</span><br><span class="line">    .replace(<span class="regexp">/\.\w+$/</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="comment">// console.log(componentName)</span></span><br><span class="line"></span><br><span class="line">  Vue.component(</span><br><span class="line">    componentName,</span><br><span class="line">    <span class="comment">// 如果这个组件选项是通过 `export default` 导出的，</span></span><br><span class="line">    <span class="comment">// 那么就会优先使用 `.default`，</span></span><br><span class="line">    <span class="comment">// 否则回退到使用模块的根。</span></span><br><span class="line">    componentConfig.default || componentConfig</span><br><span class="line">  )</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> requireAll = <span class="function"><span class="params">requireContext</span> =&gt;</span> requireContext.keys().map(requireContext)</span><br><span class="line"><span class="keyword">const</span> req = <span class="built_in">require</span>.context(<span class="string">&#x27;@/icons&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line">requireAll(req)</span><br></pre></td></tr></table></figure>

<p>之后直接将图标放入 <code>@/icons</code> 文件夹下就可以直接使用了，删改图标同理</p>
<h3 id="优化-svg"><a href="#优化-svg" class="headerlink" title="优化 svg"></a>优化 svg</h3><p>删除无用信息 <a href="https://github.com/svg/svgo">svgo</a><br>阿里云导出的 svg 是带有默认的 fill 的，导致图标不能继承父级元素的颜色,可以通过删除默认 fill 解决</p>
<p>安装</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i svgo svgo-loader -D</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">config.module</span><br><span class="line">  .rule(<span class="string">&#x27;svg-sprite-loader&#x27;</span>)</span><br><span class="line">  .include.add(path.resolve(__dirname, <span class="string">&#x27;src/icons&#x27;</span>))</span><br><span class="line">  .use(<span class="string">&#x27;svgo-loader&#x27;</span>)</span><br><span class="line">  .loader(<span class="string">&#x27;svgo-loader&#x27;</span>)</span><br><span class="line">  .tap(<span class="function"><span class="params">options</span> =&gt;</span> &#123;</span><br><span class="line">    options = &#123;</span><br><span class="line">      plugins: [</span><br><span class="line">        &#123; <span class="attr">removeXMLNS</span>: <span class="literal">true</span> &#125;, <span class="comment">// 删除xmlns属性（对于内联svg，默认情况下禁用）</span></span><br><span class="line">        &#123; <span class="attr">convertStyleToAttrs</span>: <span class="literal">true</span> &#125; <span class="comment">// 将css样式转换为svg元素属性</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> options</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p>也可以在图标管理中 我的项目 批量操作 批量去色 将默认颜色去除， 之后可以通过 css 自定义颜色</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">svg &#123;</span><br><span class="line">  fill: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>vue-awesome-swiper 设置 loop：true不会自动滚动的问题</title>
    <url>/1002.html</url>
    <content><![CDATA[<p>vue-awesome-swiper: 基于 Swiper4、适用于 Vue 的轮播组件，支持服务端渲染和单页应用</p>
<p>github地址：<a href="https://github.com/surmon-china/vue-awesome-swiper">https://github.com/surmon-china/vue-awesome-swiper</a></p>
<p>官网：<a href="https://github.surmon.me/vue-awesome-swiper/">https://github.surmon.me/vue-awesome-swiper/</a></p>
<p>问题：</p>
<p>设置loop：true， autoplay：2000 不会自动滚动</p>
<p>解决<br>在 swiper 上添加 <code>v-if=&quot;swiperSlides.length&gt;0&quot;</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;swiper v-<span class="keyword">if</span>=<span class="string">&quot;swiperSlides.length&gt;0&quot;</span> :options=<span class="string">&quot;swiperOption&quot;</span> ref=<span class="string">&quot;mySwiper&quot;</span>&gt;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>vue 项目中使用 axios.all 处理并发请求报 &quot;TypeError: this.$axios.all is not a function&quot; 异常解决方法</title>
    <url>/384.html</url>
    <content><![CDATA[<p>axios/index.js 部分配置如下</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// axios/index.js</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">const</span> Axios = axios.create(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>原因：</p>
<p>axios 实例没有 all 这个方法，all 是 axios 的静态方法</p>
<p>所以解决方式就是将该方法手动挂载到 Axios 实例上即可</p>
<p>在 <code>axios/index.js</code> 添加如下配置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">// axios/index.js</span><br><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line">const Axios = axios.create(&#123;</span><br><span class="line">  // ...</span><br><span class="line">&#125;)</span><br><span class="line"><span class="addition">+ Axios.all = axios.all</span></span><br><span class="line"><span class="addition">+ Axios.spread = axios.spread</span></span><br></pre></td></tr></table></figure>


<p>附 axios 并发多个请求方式：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">request1</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> axios.get(<span class="string">&#x27;/user/12345&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">request2</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> axios.get(<span class="string">&#x27;/user/12345/permissions&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">axios.all([request1(), request2()])</span><br><span class="line">  .then(axios.spread(<span class="function">(<span class="params">res1, res2</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 两个请求现在都执行完成</span></span><br><span class="line">    <span class="comment">// acct、perms 分别为两个请求的结果</span></span><br><span class="line">  &#125;))</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>axios</tag>
      </tags>
  </entry>
  <entry>
    <title>web 中媒体资源自动播放问题</title>
    <url>/1276.html</url>
    <content><![CDATA[<h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>媒体资源 添加 autoplay 在移动端不会生效</p>
<p>通过监听 scroll 事件 手动调用 play 方法会报如下错误：Uncaught (in promise) DOMException: play() failed because the user didn’t interact with the document first.</p>
<p>ios 端报如下错误：Uncaught (in promise) NotAllowedError:The request is not allowed by the user agent or the platform in the current context, possibly because the user denied permission.</p>
<h3 id="自动播放政策"><a href="#自动播放政策" class="headerlink" title="自动播放政策"></a>自动播放政策</h3><p>Chrome 浏览器的自动播放政策在 2018 年 4 月更改：</p>
<ul>
<li>始终允许静音自动播放。</li>
<li>用户已与页面进行了交互（单击，点击等）。</li>
</ul>
<p>详细政策不一一列举了，访问 <code>https://goo.gl/xX8pDD</code> 查看详情</p>
<h3 id="Web-开发人员的最佳做法"><a href="#Web-开发人员的最佳做法" class="headerlink" title="Web 开发人员的最佳做法"></a>Web 开发人员的最佳做法</h3><p>重点：永远不要假设视频会播放，并且在视频未实际播放时也不要显示暂停按钮。</p>
<p>您应该始终查看 play 函数返回的 Promise，看它是否被拒绝：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> promise = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;video&#x27;</span>).play()</span><br><span class="line"><span class="keyword">if</span> (promise !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">  promise</span><br><span class="line">    .then(<span class="function">(<span class="params">_</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// Autoplay started!</span></span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// Autoplay was prevented.</span></span><br><span class="line">      <span class="comment">// Show a &quot;Play&quot; button so that user can start playback.</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用静音的自动播放功能，并让他们选择取消静音</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">&quot;video&quot;</span> <span class="attr">muted</span> <span class="attr">autoplay</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>Webpack</title>
    <url>/429.html</url>
    <content><![CDATA[<ul>
<li><a href="https://webpack.js.org/">webpack 官网</a></li>
<li><a href="https://webpack.docschina.org/">webpack 中文网</a></li>
<li><a href="https://github.com/cuilongjin/webpack-config/">webpack 配置文件</a></li>
</ul>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>webpack 是一个现代 JavaScript 应用程序的模块打包器（module bundler）</p>
<p>webpack 是一个模块化方案（预编译）</p>
<p>webpack 获取具有依赖关系的模块，并生成表示这些模块的静态资源</p>
<p>webpack 的两个特点：模块化、打包</p>
<p>四个核心概念：<strong>入口(entry)<strong>、</strong>输出(output)<strong>、</strong>加载器(loader)<strong>、</strong>插件(plugins)</strong></p>
<p>模块化方案：webpack 和 requirejs（通过编写代码的方式将前端的功能，划分成独立的模块）<br>browserify 是与 webpack 相似的模块化打包工具</p>
<h3 id="webpack-起源"><a href="#webpack-起源" class="headerlink" title="webpack 起源"></a>webpack 起源</h3><ul>
<li>webpack 解决了现存模块打包器的两个痛点：<ul>
<li>Code Spliting - 代码分离</li>
<li>静态资源的模块化处理方案</li>
</ul>
</li>
</ul>
<h3 id="webpack-与模块"><a href="#webpack-与模块" class="headerlink" title="webpack 与模块"></a>webpack 与模块</h3><ul>
<li><p><a href="http://zhaoda.net/webpack-handbook/module-system.html">前端模块系统的演进</a></p>
</li>
<li><p>在 webpack 看来：所有的<strong>静态资源都是模块</strong></p>
</li>
<li><p>webpack 模块能够识别以下等形式的模块之间的依赖：</p>
<ul>
<li><p>ES2015 <code>import</code> <code>export</code></p>
</li>
<li><p>CommonJS <code>require()</code> <code>module.exports</code></p>
</li>
<li><p>AMD <code>define</code> 和 <code>require</code></p>
</li>
<li><p>css/sass/less 文件中的 <code>@import</code></p>
</li>
<li><p>图片连接，比如：样式 <code>url(...)</code> 或 HTML <code>&lt;img src=...&gt;</code></p>
</li>
<li><p>字体等</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>在 webpack 提供的模块化环境中<ul>
<li>想要加载一个 JS 文件，只需要 require(‘a.js’)</li>
<li>想要加载一个 CSS 文件，只需要 require(‘css/index.css’)</li>
<li>想要加载一个图片文件，只需要 require(‘images/a.png’)</li>
</ul>
</li>
</ul>
<ul>
<li><a href="http://www.jianshu.com/p/42e11515c10f#">入门 Webpack，看这篇就够了</a></li>
</ul>
<h3 id="webpack-打包原理："><a href="#webpack-打包原理：" class="headerlink" title="webpack 打包原理："></a>webpack 打包原理：</h3><p>​ 入口文件： main.js</p>
<p>​ webpack 从入口出发，递归分析项目中所有的依赖项（模块），使用 loader 来处理对应的模块最终，打包生成一个 bundle.js 文件。</p>
<p>​ 如果配置了 webpack 中的 代码分离（Code Spliting），webpack 会根据 分离点 将这个模块生成一个独立的 JS 文件</p>
<p>​ 还可以通过配置，将 CSS 、 图片、 字体 等文件，从 bundle.js 中抽离为独立的文件</p>
<h2 id="webpack-的基本使用"><a href="#webpack-的基本使用" class="headerlink" title="webpack 的基本使用"></a>webpack 的基本使用</h2><p>安装：<code>npm i -D webpack webpack-cli</code></p>
<p>webpack：是 webpack 工具的核心包</p>
<p>webpack-cli：提供了一些在终端中使用的命令</p>
<p>-D(–save-dev)：表示项目开发期间的依赖</p>
<p>webpack 的两种使用方式：命令行、配置文件（<code>webpack.config.js</code>）</p>
<h3 id="命令行使用说明"><a href="#命令行使用说明" class="headerlink" title="命令行使用说明"></a>命令行使用说明</h3><ul>
<li><code>package.json</code>中的<code>scripts</code>中可以存放一些 bash 命令，这些 bash 命令可以通过 <code>npm run 命令名称</code> 来执行</li>
<li>注意：npm 在执行 scripts 中的命令的时候，是在电脑系统后台默认开启一个 bash，将当前目录下的<code>./node_modules/.bin</code>这个文件夹临时加入了系统环境变量</li>
<li>使用方式：<code>npm run build</code></li>
<li>设置开发状态： <code>mode</code> 如果没有设置 mode 配置项，webpack 会默认提供开发环境(production)</li>
<li>在入口文件中可以使用 <code>import</code> 引入 js css less 等文件</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  <span class="comment">// webpack 是 webpack-cli 提供的命令</span></span><br><span class="line">  <span class="comment">// src/js/main.js 为入口文件</span></span><br><span class="line">  <span class="comment">// --output dist/bundle.js 为出口文件</span></span><br><span class="line">  <span class="comment">// --mode development 生产环境</span></span><br><span class="line">  &quot;build&quot;: &quot;webpack&quot;</span><br><span class="line">  &quot;build1&quot;: &quot;webpack src/js/main.js --output dist/bundle.js --mode development&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="配置文件方式（推荐）"><a href="#配置文件方式（推荐）" class="headerlink" title="配置文件方式（推荐）"></a>配置文件方式（推荐）</h3><p>项目<code>根目录</code>下创建一个 <code>webpack.config.js</code>文件，运行 <code>webpack</code> 命令时的默认配置文件</p>
<p>指定其他文件：<code>--config webpack.XX.js</code></p>
<p>配置 <code>package.json</code> 中的 <code>scripts</code> , 脚本命令为： <code>&quot;build&quot;: &quot;webpack&quot;</code></p>
<p>执行命令 : <code>npm run build</code></p>
<p>示例代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack 是基于 node的 , 所以配置文件符合 node 方式书写配置</span></span><br><span class="line"><span class="comment">// 注意 : 不要再这个文件中使用ES6的的模块化 import语法</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// 入口</span></span><br><span class="line">  entry: path.join(__dirname, <span class="string">&#x27;./src/js/main.js&#x27;</span>),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 出口</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    <span class="comment">// 出口目录</span></span><br><span class="line">    path: path.join(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    filename: <span class="string">&#x27;js/bundle.js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 开发模式</span></span><br><span class="line">  mode: <span class="string">&#x27;development&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="webpack-dev-server"><a href="#webpack-dev-server" class="headerlink" title="webpack-dev-server"></a>webpack-dev-server</h2><p>安装：<code>npm i -D webpack-dev-server</code></p>
<p>作用：配合 webpack，创建开发环境（启动服务器、监视文件变化、自动编译、刷新浏览器等），提高开发效率</p>
<p>注意：无法直接在终端中执行 <code>webpack-dev-server</code>，需要在 <code>package.json</code> 配置 <code>scripts</code> 后使用</p>
<h3 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h3><ul>
<li><code>webpack-dev-server</code>将打包好的文件存储在内存中，提高编译和加载速度，效率更高（不会生成 dist 目录）</li>
<li>在内存中出口目录为项目根目录（命令行中的提示：<code>webpack output is served from /</code>）<ul>
<li>在<code>index.html</code>页面中引入文件不需要加<code>dist</code></li>
</ul>
</li>
</ul>
<h3 id="CLI-配置"><a href="#CLI-配置" class="headerlink" title="CLI 配置"></a>CLI 配置</h3><ul>
<li><code>--contentBase</code> ：告诉服务器在哪个目录中提供服务（可以理解为：打开哪个目录中的 index.html）<ul>
<li><code>--contentBase ./src</code>：当前目录下的 src 文件夹</li>
</ul>
</li>
<li><code>--open true</code> ：自动打开浏览器</li>
<li><code>--port 3000</code> ：指定端口号</li>
<li><code>--hot</code> ：热更新，只加载修改的文件(按需加载修改的内容)，而非全部加载</li>
<li><code>--progress</code>：显示进度条</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;dev&quot;</span>: <span class="string">&quot;webpack-dev-server --contentBase src --open --port 8888 --hot&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="配置文件配置"><a href="#配置文件配置" class="headerlink" title="配置文件配置"></a>配置文件配置</h3><p>配置 <code>package.json</code> 中的 <code>scripts</code> , 脚本命令为： <code>&quot;dev&quot;: &quot;webpack-dev-server --hot&quot;</code></p>
<p>执行命令 : <code>npm run dev</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// --hot 热更新写在命令行里，不然的话还要配其他插件麻烦</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    contentBase: path.join(__dirname, <span class="string">&#x27;src&#x27;</span>),</span><br><span class="line">    <span class="comment">// 自动打开浏览器</span></span><br><span class="line">    open: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 端口号</span></span><br><span class="line">    port: <span class="number">3000</span>,</span><br><span class="line">    <span class="comment">// hot: true,</span></span><br><span class="line"></span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">        <span class="comment">// api 表示当前项目请求的 key</span></span><br><span class="line">        target: <span class="string">&#x27;http://www.baidu.com&#x27;</span>, <span class="comment">// 代理服务器路径</span></span><br><span class="line">        pathRewrite: &#123; <span class="string">&#x27;^/api&#x27;</span>: <span class="string">&#x27;/api&#x27;</span> &#125;, <span class="comment">// 重写路径</span></span><br><span class="line">        changeOrigin: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 请求 localhost:8080/api/.. 会被代理到 http://www.baidu.com/api/..</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// plugins: [</span></span><br><span class="line">  <span class="comment">//   new webpack.HotModuleReplacementPlugin()</span></span><br><span class="line">  <span class="comment">// ]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="html-webpack-plugin-插件"><a href="#html-webpack-plugin-插件" class="headerlink" title="html-webpack-plugin 插件"></a>html-webpack-plugin 插件</h2><ul>
<li>安装：<code>npm i -D html-webpack-plugin</code></li>
<li>作用：根据模板，在内存中自动生成 html 页面，并自动引入<code>bundle.js</code>、<code>css</code>等文件</li>
</ul>
<p>配置文件配置：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引入 html-webpack-plugin 插件</span></span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// 配置插件</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="comment">// html-webpack-plugin 配置</span></span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      <span class="comment">// 模板页面路径</span></span><br><span class="line">      template: path.join(__dirname, <span class="string">&#x27;src/index.html&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="打包非-js-文件"><a href="#打包非-js-文件" class="headerlink" title="打包非 js 文件"></a>打包非 js 文件</h2><p>webpack 默认只能处理 js 文件，非 js(css、less、图片、字体等)处理不了，借助 loader 加载器</p>
<h3 id="处理-css-文件"><a href="#处理-css-文件" class="headerlink" title="处理 css 文件"></a>处理 css 文件</h3><p>在 <code>main.js</code>中引入 css 文件 <code>import &#39;../css/main.css&#39;</code></p>
<p>安装 : <code>npm i -D style-loader css-loader</code></p>
<p>在 <code>webpack.config.js</code> 中，添加个新的配置项 <code>module</code></p>
<p>在 <code>module</code> 中添加 <code>loader</code> 来处理 <code>css</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      <span class="comment">// 处理 css</span></span><br><span class="line">      <span class="comment">// 注意点 use 执行loader 顺序 从右往左</span></span><br><span class="line">      <span class="comment">// css-loader: 读取css文件内容，将其转化为一个模块</span></span><br><span class="line">      <span class="comment">// style-loader: 拿到模块, 创建一个style标签，插入页面中</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        use: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="处理-less-文件"><a href="#处理-less-文件" class="headerlink" title="处理 less 文件"></a>处理 less 文件</h3><p>在 <code>main.js</code>中引入 less 文件 <code>import &#39;../css/main.less&#39;</code></p>
<p>安装 : <code>npm i -D less-loader less style-loader css-loader</code></p>
<p>在 webpack.config.js 中配置项 <code>module-&gt;rules</code>中添加 loader 来处理 <code>less</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      <span class="comment">//处理 css</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        use: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;less-loader&#x27;</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="处理图片文件"><a href="#处理图片文件" class="headerlink" title="处理图片文件"></a>处理图片文件</h3><p>安装 : <code>npm i -D url-loader file-loader</code></p>
<p>在 webpack.config.js 中配置项 <code>module-&gt;rules</code>中添加 loader 来处理图片</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      <span class="comment">// 处理图片</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(jpg|png)$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              <span class="comment">//  图片大小 &lt;= 10000 =&gt; 转化为base64</span></span><br><span class="line">              <span class="comment">//  图片大小 &gt;= 10000 =&gt; 不会转base64 内部调用 file-loader 加载图片</span></span><br><span class="line">              limit: <span class="number">10000</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>url-loader</strong> 默认会将图片转化为 base64 编码格式，目的：提高性能</p>
<p><strong>file-loader</strong> 在处理图片时，会对文件进行重命名</p>
<p>base64 编码格式的图片说明：</p>
<ul>
<li>精灵图：将一些小图片合并为一张图片，减少请求次数，提高性能</li>
<li>字体图标：直接将一些小的图片,合并到字体文件中，并且不会失真</li>
<li>base64：是一种编码格式,能够将图片、文字等常见的文件，转化为 base64 格式，这种字符串格式浏览器能够识别并且读取显示到页面中</li>
<li>base64 是一个字符串，也可以直接被内嵌到页面中，或者 css 中</li>
<li>注意：大图片不适合用 base64 处理，只有小的图标才适合 base64 处理</li>
</ul>
<h3 id="处理字体文件"><a href="#处理字体文件" class="headerlink" title="处理字体文件"></a>处理字体文件</h3><p>在 <strong>main.js</strong> 中引入 css 文件 <code>import &#39;../css/iconfont/iconfont.css&#39;</code></p>
<p>在 webpack.config.js 中配置</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      <span class="comment">// 处理字体图标</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(svg|woff|woff2|ttf|eot)$/</span>,</span><br><span class="line">        use: <span class="string">&#x27;url-loader&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="处理-ES6-语法"><a href="#处理-ES6-语法" class="headerlink" title="处理 ES6 语法"></a>处理 ES6 语法</h3><ol>
<li>现在的项目都是使用 ES6 开发的，但是这些新的 ES6 语法，并不是所有的浏览器都支持，所以就需要有一个工具，帮我们转成 es5 语法，这个就是：babel</li>
<li><a href="https://babeljs.io/">babel</a></li>
<li>Babel is a JavaScript compiler. ==&gt; babel 是一个 JavaScript 编译器</li>
<li>webpack 只能处理 import / export 这个 es6 模块化语法，而其他的 js 新语法，应该使用 babel 来处理</li>
</ol>
<p>babel 的使用 :</p>
<ul>
<li>安装： <code>npm i -D babel-core babel-loader@7</code><ul>
<li>babel-core 是 babel 的核心包</li>
<li>babel-loader 加载 js 文件，并将 js 代码内容交给 babel-core 解析为 es5 低版本的 js</li>
</ul>
</li>
</ul>
<ul>
<li>安装：<code>npm i -D babel-preset-env babel-preset-stage-2</code><ul>
<li>babel-preset-env：表示能够解析 es2015、es2016、es2017、es2018 这些标准的语法</li>
<li>babel-preset-stage-2：用来解析还没有被采纳为标准的语法</li>
<li><code>babel-polyfill与babel-plugin-transform-runtime</code> 也是做兼容处理的,以前都是用这个，兼容更早的</li>
</ul>
</li>
</ul>
<ul>
<li>配置 : 在 webpack.config.js 中添加一个 loader</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      <span class="comment">// 处理 ES6 语法</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        use: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">        <span class="comment">// 设置忽略 node-modules 文件夹</span></span><br><span class="line">        exclude: <span class="regexp">/node-modules/</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在项目根目录中创建 babel 的配置文件，叫：<code>.babelrc</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;presets&quot;: [</span><br><span class="line">    &quot;env&quot;,</span><br><span class="line">    &quot;stage-2&quot;</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  -----------</span><br><span class="line">  &#x2F;&#x2F; 暂时不用</span><br><span class="line">  &#x2F;&#x2F; 如果未来某一天真的用到了polify</span><br><span class="line">  &quot;plugins&quot;: [</span><br><span class="line">    &quot;transform-runtime&quot;, &#123;</span><br><span class="line">      &quot;helpers&quot;: false,</span><br><span class="line">      &quot;polyfill&quot;: true,</span><br><span class="line">      &quot;regenerator&quot;: true,</span><br><span class="line">      &quot;moduleName&quot;: &quot;babel-runtime&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="项目打包上线"><a href="#项目打包上线" class="headerlink" title="项目打包上线"></a>项目打包上线</h2><p>执行 : <code>npm run build</code> 对项目进行打包，生成 dist 文件</p>
<p>模拟本地服务器 : 安装 : <code>npm i -g http-server</code></p>
<p>把 dist 文件里的内容放到服务器里即可，直接运行<code>http-server</code></p>
<h2 id="webpack-和-gulp-区别"><a href="#webpack-和-gulp-区别" class="headerlink" title="webpack 和 gulp 区别"></a>webpack 和 gulp 区别</h2><ol>
<li>Gulp 侧重于前端开发的整个过程的控制管理（像是流水线），我们可以通过给 gulp 配置不通的 task（通过 Gulp 中的 gulp.task() 方法配置，比如启动 server、sass/less 预编译、文件的合并压缩等等）来让 gulp 实现不同的功能，从而构建整个前端开发流程</li>
<li>Webpack 也称之为模块打包机 ，由此也可以看出 Webpack 更侧重于模块打包，当然我们可以把开发中的所有资源（图片、js 文件、css 文件等）都可以看成模块，最初 Webpack 本身就是为前端 JS 代码打包而设计的，后来被扩展到其他资源的打包处理。Webpack 是通过 loader（加载器）和 plugins（插件）对资源进行处理的</li>
<li>gulp 是构建工具，Webpack 是 js 模块化的解决方案</li>
</ol>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>使用 patch-package 来科学修改 node_modules 里的文件</title>
    <url>/2001.html</url>
    <content><![CDATA[<p>当我们使用npm包时，需要修改部分源码做自定义功能，但是直接修改node_modules里面的文件，重新安装包后做的修改就没有了。一般常用办法有两个：</p>
<ol>
<li>将代码下载到本地，修改后手动引入</li>
<li>fork别人的代码到自己仓库，修改后，从自己仓库安装</li>
</ol>
<p>但是这样做比较麻烦，而且更新不方便。我们可以使用 patch-package 来管理修改</p>
<p>以 hexo-theme-next 为例</p>
<ol>
<li><p>修改 node_modules 里面的代码</p>
</li>
<li><p>安装patch-package：<code>npm i patch-package --save-dev</code></p>
</li>
<li><p>执行命令：<code>npx patch-package hexo-theme-next</code></p>
</li>
</ol>
<p>第一次使用 patch-package 会在项目根目录生成 patches 文件夹，里面有修改过的文件 diff 记录</p>
<p>当这个包被重新安装后，可以使用如下方式让修改生效</p>
<p>方式一：执行命令：<code>git apply --ignore-whitespace patches/hexo-theme-next+8.0.1.patch</code></p>
<p>方式二：在 package.json，新增命令 postinstall:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">+  &quot;postinstall&quot;: &quot;patch-package&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行：<code>npm run postinstall</code></p>
<p>该命令也会在每次 npm install 时自动执行</p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>关于 a 标签 target_blank 使用 rel=noopener</title>
    <url>/798.html</url>
    <content><![CDATA[<p>为什么要使用rel=’noopener’？</p>
<p>举个例子: a.html 和 b.html 两个页面</p>
<p>a.html</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;b.html&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>da<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>b.html</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"><span class="built_in">window</span>.opener.location.href =<span class="string">&quot;http://wqdy.top&quot;</span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>其中在 <code>a.html</code> 中有个超链接，点击后在新标签页打开 <code>b.html</code>页面，但是发现原 <code>a.html</code> 页面已经变成了其他页面。原因是使用 <code>target=_blank</code> 打开新的窗口时，赋予了新的窗口一些权限可以操作原窗口，其中 <code>window.location</code> 就是一个。</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102203759.png"></p>
<p>为了防止 <code>window.opener</code> 被滥用，提高网站的安全性，在使用 <code>targrt=_blank</code> 时需要加上 <code>rel=noopener</code>，同时为了兼容也可以加上 <code>rel=noreferrer</code>。</p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>前端开发中常用的一些技巧</title>
    <url>/1136.html</url>
    <content><![CDATA[<h3 id="css"><a href="#css" class="headerlink" title="css"></a>css</h3><h4 id="文字溢出省略号显示"><a href="#文字溢出省略号显示" class="headerlink" title="文字溢出省略号显示"></a>文字溢出省略号显示</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 强制一行内显示文本 */</span></span><br><span class="line"><span class="selector-class">.single-line</span> &#123;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 强制最多三行显示文本 */</span></span><br><span class="line"><span class="selector-class">.multi-line</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">  -webkit-box-orient: vertical;</span><br><span class="line">  -webkit-line-clamp: <span class="number">3</span>; <span class="comment">/* 强制三行显示 */</span></span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis; <span class="comment">/* 不是必须 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="让-div-宽度自适应文字内容"><a href="#让-div-宽度自适应文字内容" class="headerlink" title="让 div 宽度自适应文字内容"></a>让 div 宽度自适应文字内容</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.fit-width</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: fit-content;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="opacity-0、display-none、visibility-hidden"><a href="#opacity-0、display-none、visibility-hidden" class="headerlink" title="opacity:0、display:none、visibility:hidden"></a>opacity:0、display:none、visibility:hidden</h4><p><code>opacity:0</code> 和 <code>display:none</code>，若父节点元素应用了 <code>opacity:0</code> 和 <code>display:none</code>，无论其子孙元素如何挣扎都不会再出现在大众视野<br>而若父节点元素应用 <code>visibility:hidden</code>，子孙元素应用 <code>visibility:visible</code>，那么其就会毫无意外的显现出来</p>
<h4 id="max-width-优先级高于行内样式加-important"><a href="#max-width-优先级高于行内样式加-important" class="headerlink" title="max-width 优先级高于行内样式加 !important"></a>max-width 优先级高于行内样式加 !important</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">max-width</span>: <span class="number">50px</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 100px !important;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>div 的宽度为 50px</p>
<h4 id="使用-CSS-网格定义-main-和-aside-元素"><a href="#使用-CSS-网格定义-main-和-aside-元素" class="headerlink" title="使用 CSS 网格定义 main 和 aside 元素"></a>使用 CSS 网格定义 main 和 aside 元素</h4><p>CSS 网格可用于定义布局中的 main 部分和 aside 部分，这是 CSS 网格的绝佳用途。问题是，即使 aside 是空的，它的高度也会和 main 的高度相等。</p>
<p>要修复这个问题，可以让 aside 元素与其父元素的起点对齐，这样它的高度就不会扩展了。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  grid-template-<span class="attribute">columns</span>: <span class="built_in">repeat</span>(<span class="number">12</span>, <span class="built_in">minmax</span>(<span class="number">0</span>, <span class="number">1</span>fr));</span><br><span class="line">  grid-gap: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* align-self 将会让 aside 元素与其父元素的起点对齐。 */</span></span><br><span class="line"><span class="selector-tag">aside</span> &#123;</span><br><span class="line">  grid-column: <span class="number">1</span> / <span class="number">4</span>;</span><br><span class="line">  grid-row: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">align-self</span>: start;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">main</span> &#123;</span><br><span class="line">  grid-column: <span class="number">4</span> / <span class="number">13</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="使用-display-inline-block-时奇怪的空隙"><a href="#使用-display-inline-block-时奇怪的空隙" class="headerlink" title="使用 display: inline-block 时奇怪的空隙"></a>使用 display: inline-block 时奇怪的空隙</h4><p>给两个或两个以上的元素设置 display: inline-block 或者 display: inline ，将会导致它们之间产生一个微小的空隙。代码中的换行和缩进（连续空格）被渲染成了一个空格造成的</p>
<p>通过给父元素设置 font-size: 0 可以简单地解决这个问题。</p>
<h4 id="交互式-HTML-元素的字体不生效"><a href="#交互式-HTML-元素的字体不生效" class="headerlink" title="交互式 HTML 元素的字体不生效"></a>交互式 HTML 元素的字体不生效</h4><p>给整个文档设置字体的时候，字体并不会应用于诸如 input， button select 和 textarea 这些元素上。默认情况下，它们并不会继承文档字体，因为浏览器给它们应用了系统字体。</p>
<p>要修复这个问题，直接给他们设置字体属性：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">input</span>,</span><br><span class="line"><span class="selector-tag">button</span>,</span><br><span class="line">select,</span><br><span class="line"><span class="selector-tag">textarea</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: your-font-name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="css-调试"><a href="#css-调试" class="headerlink" title="css 调试"></a>css 调试</h4><p>将代码添加到浏览器的控制台运行，页面上所有元素的轮廓都会显示出来。</p>
<p><a href="https://gist.github.com/addyosmani/fd3999ea7fce242756b1">https://gist.github.com/addyosmani/fd3999ea7fce242756b1</a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">;[].forEach.call($$(<span class="string">&#x27;*&#x27;</span>), <span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">  a.style.outline = <span class="string">&#x27;1px solid #&#x27;</span> + (~~(<span class="built_in">Math</span>.random() * (<span class="number">1</span> &lt;&lt; <span class="number">24</span>))).toString(<span class="number">16</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="压缩或拉伸图片"><a href="#压缩或拉伸图片" class="headerlink" title="压缩或拉伸图片"></a>压缩或拉伸图片</h4><p>用 CSS 调整一张图片的大小时，如果纵横比与图片的宽高不一致，则图片会被压缩或拉伸。</p>
<p>解决方法很简单：使用 CSS 的 object-fit。它的功能和给背景图片设置 background-size: cover 类似。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">object-fit</span>: contain;</span><br><span class="line">  <span class="comment">/* object-fit: cover; */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>object-fit 语法参考<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/object-fit">https://developer.mozilla.org/zh-CN/docs/Web/CSS/object-fit</a></p>
<blockquote>
<p>object-fit 属性由下列的值中的单独一个关键字来指定。</p>
<p>取值<br>contain 保持长宽比，以长边填充<br>cover 保持长宽比，以短边填充，多余的会被裁减掉<br>fill 完全填充，会拉伸<br>none 保持其原有的尺寸<br>scale-down 内容的尺寸与 none 或 contain 中的一个相同，取决于它们两个之间谁得到的对象尺寸会更小一些。</p>
</blockquote>
<h4 id="滚动条样式"><a href="#滚动条样式" class="headerlink" title="滚动条样式"></a>滚动条样式</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">  width: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* -webkit-scrollbar-thumb 滚动条手柄 */</span></span><br><span class="line">::-webkit-scrollbar-thumb &#123;</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-thumb:hover &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* -webkit-scrollbar-track 滚动条轨道 */</span></span><br><span class="line">::-webkit-scrollbar-track &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*滚动条上半边或左半边*/</span></span><br><span class="line">::-webkit-scrollbar-track-piece:start &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* -webkit-scrollbar-button 滚动条的轨道的两端按钮 */</span></span><br><span class="line"><span class="comment">/*滚动条上边或左边按钮*/</span></span><br><span class="line">::-webkit-scrollbar-button:start &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* -webkit-scrollbar-corne 垂直滚动条和水平滚动条相交的地方 */</span></span><br><span class="line">::-webkit-scrollbar-corner &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="卡券样式"><a href="#卡券样式" class="headerlink" title="卡券样式"></a>卡券样式</h4><p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102204135.png"></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.coupon</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">radial-gradient</span>(circle at right bottom, transparent <span class="number">10px</span>, <span class="number">#ffffff</span> <span class="number">0</span>) top right / <span class="number">50%</span> <span class="number">50%</span> no-repeat, <span class="built_in">radial-gradient</span>(circle at left bottom, transparent <span class="number">10px</span>, <span class="number">#ffffff</span> <span class="number">0</span>) top left / <span class="number">50%</span> <span class="number">50%</span> no-repeat, <span class="built_in">radial-gradient</span>(circle at right top, transparent <span class="number">10px</span>, <span class="number">#ffffff</span> <span class="number">0</span>) bottom right / <span class="number">50%</span> <span class="number">50%</span> no-repeat, <span class="built_in">radial-gradient</span>(circle at left top, transparent <span class="number">10px</span>, <span class="number">#ffffff</span> <span class="number">0</span>) bottom left / <span class="number">50%</span> <span class="number">50%</span> no-repeat;</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">drop-shadow</span>(<span class="number">2px</span> <span class="number">2px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="阴影效果"><a href="#阴影效果" class="headerlink" title="阴影效果"></a>阴影效果</h4><p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102204206.jpeg"></p>
<p>气泡阴影</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.tip</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">rgb</span>(<span class="number">245</span>, <span class="number">129</span>, <span class="number">127</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">drop-shadow</span>(<span class="number">0px</span> <span class="number">2px</span> <span class="number">4px</span> <span class="built_in">rgba</span>(<span class="number">245</span>, <span class="number">129</span>, <span class="number">127</span>, <span class="number">0.9</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tip</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">0</span> <span class="number">10px</span> <span class="number">10px</span> <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: transparent transparent <span class="number">#fff</span> transparent;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tip</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">0</span> <span class="number">10px</span> <span class="number">10px</span> <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: transparent transparent <span class="built_in">rgb</span>(<span class="number">245</span>, <span class="number">129</span>, <span class="number">127</span>) transparent;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">11px</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>三角形阴影</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.shadow-triangle</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">0</span> <span class="number">50px</span> <span class="number">50px</span> <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: transparent transparent <span class="built_in">rgb</span>(<span class="number">245</span>, <span class="number">129</span>, <span class="number">127</span>) transparent;</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">drop-shadow</span>(<span class="number">10px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="built_in">rgba</span>(<span class="number">238</span>, <span class="number">125</span>, <span class="number">55</span>, <span class="number">0.5</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>缺圆投影</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.circle-square</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">radial-gradient</span>(circle at bottom right, transparent <span class="number">20px</span>, <span class="built_in">rgb</span>(<span class="number">245</span>, <span class="number">129</span>, <span class="number">127</span>) <span class="number">15px</span>);</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">drop-shadow</span>(<span class="number">2px</span> <span class="number">2px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">238</span>, <span class="number">132</span>, <span class="number">66</span>, <span class="number">0.9</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1px-边框"><a href="#1px-边框" class="headerlink" title="1px 边框"></a>1px 边框</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 方式1 */</span></span><br><span class="line"><span class="selector-class">.border</span>:before &#123;</span><br><span class="line">  content: <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  -webkit-<span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 方式2 */</span></span><br><span class="line"><span class="selector-class">.border</span>:before &#123;</span><br><span class="line">  content: <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">right</span>: -<span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">50%</span>;</span><br><span class="line">  -webkit-<span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="记住密码之后，输入框变色问题"><a href="#记住密码之后，输入框变色问题" class="headerlink" title="记住密码之后，输入框变色问题"></a>记住密码之后，输入框变色问题</h4><p>谷歌浏览器使用如下方式解决</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">input</span>:-webkit-autofill,</span><br><span class="line">textarea:-webkit-autofill,</span><br><span class="line">select:-webkit-autofill &#123;</span><br><span class="line">	-webkit-text-fill-color: <span class="number">#ededed</span> <span class="meta">!important</span>; // 自动填充文字颜色</span><br><span class="line">	-webkit-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0px</span> <span class="number">1000px</span> white inset <span class="meta">!important</span>; // 使用内阴影覆盖，这个内阴影一定要大，要不然盖不住</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>火狐浏览器无效</p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>在vue的template中如何使用scss变量</title>
    <url>/2000.html</url>
    <content><![CDATA[<p>在 scss 中使用 <code>:export</code> 暴露变量</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="variable">$color</span>: <span class="number">#009A61</span>;</span><br><span class="line"><span class="comment">//暴露css</span></span><br><span class="line">:export &#123;</span><br><span class="line">  color: <span class="variable">$color</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 <code>script</code> 中引入变量</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> variables <span class="keyword">from</span> <span class="string">&#x27;@/assets/styles/variables.scss&#x27;</span></span><br></pre></td></tr></table></figure>

<p>在 <code>computed</code> 中缓存暴露变量</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  <span class="function"><span class="title">variables</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> variables</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>常用命令</title>
    <url>/417.html</url>
    <content><![CDATA[<h2 id="快速删除-node-modules-文件夹"><a href="#快速删除-node-modules-文件夹" class="headerlink" title="快速删除 node_modules 文件夹"></a>快速删除 node_modules 文件夹</h2><p>系统命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># cmd</span></span><br><span class="line"><span class="comment"># /q 直接删除，不需要二次确认</span></span><br><span class="line"><span class="comment"># /s 允许删除非空目录</span></span><br><span class="line">rd /q/s node_modules</span><br><span class="line"></span><br><span class="line"><span class="comment"># powershell</span></span><br><span class="line">rmdir -r -Force node_modules</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">rm -r -Force node_modules</span><br></pre></td></tr></table></figure>

<p>使用 npm 包</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i rimraf -g</span><br><span class="line">rimraf node_modules</span><br><span class="line"></span><br><span class="line">npm i -g dlf</span><br><span class="line">dlf node_modules</span><br></pre></td></tr></table></figure>

<h2 id="一次执行多条命令"><a href="#一次执行多条命令" class="headerlink" title="一次执行多条命令"></a>一次执行多条命令</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># cmd 使用 &amp;&amp; 连接多个命令</span></span><br><span class="line"><span class="built_in">cd</span> vue &amp;&amp; npm i</span><br><span class="line"><span class="comment"># powershell 使用 | 连接多条命令</span></span><br><span class="line"><span class="built_in">cd</span> vue | npm i</span><br></pre></td></tr></table></figure>


<h2 id="删除一个文件夹内字节小于-10kb-的文件"><a href="#删除一个文件夹内字节小于-10kb-的文件" class="headerlink" title="删除一个文件夹内字节小于 10kb 的文件"></a>删除一个文件夹内字节小于 10kb 的文件</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 输出所有大小小于10k的文件</span></span><br><span class="line"><span class="comment"># find ./ -size -10k &gt; NoNeedSite.txt</span></span><br><span class="line">find ./ -size -10k -<span class="built_in">exec</span> rm &#123;&#125; \</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>微信小程序 canvas touchmove 事件实现手写签名并保存到相册</title>
    <url>/969.html</url>
    <content><![CDATA[<blockquote>
<p>2020-03-19<br>真机调试报错 <code>r.Canvas is not a constructor</code><br>原因：canvas 2d 和 webgl 暂不支持真机调试，请直接使用真机预览，真机预览模式下使用 vConsole 调试</p>
</blockquote>
<p>基础代码(使用 Canvas 2D 接口)</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Component(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    ctx: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    image: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    onLoad: <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;&#125;,</span><br><span class="line">    onReady: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> query = wx.createSelectorQuery()</span><br><span class="line">      query</span><br><span class="line">        .select(<span class="string">&#x27;#sign&#x27;</span>)</span><br><span class="line">        .fields(&#123; <span class="attr">node</span>: <span class="literal">true</span>, <span class="attr">size</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">        .exec(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(res)</span><br><span class="line">          <span class="keyword">const</span> canvas = res[<span class="number">0</span>].node</span><br><span class="line">          <span class="keyword">const</span> ctx = canvas.getContext(<span class="string">&#x27;2d&#x27;</span>)</span><br><span class="line">          <span class="built_in">console</span>.log(ctx)</span><br><span class="line"></span><br><span class="line">          <span class="keyword">const</span> dpr = wx.getSystemInfoSync().pixelRatio</span><br><span class="line">          canvas.width = res[<span class="number">0</span>].width * dpr</span><br><span class="line">          canvas.height = res[<span class="number">0</span>].height * dpr</span><br><span class="line">          ctx.scale(dpr, dpr)</span><br><span class="line"></span><br><span class="line">          ctx.lineWidth = <span class="number">4</span> <span class="comment">//线条的宽度</span></span><br><span class="line">          ctx.strokeStyle = <span class="string">&#x27;#333&#x27;</span> <span class="comment">//线条的颜色</span></span><br><span class="line">          ctx.lineCap = <span class="string">&#x27;round&#x27;</span> <span class="comment">//定义线条开头和结尾处的形状</span></span><br><span class="line">          ctx.lineJoin = <span class="string">&#x27;bevel&#x27;</span> <span class="comment">// 线条与线条之间的连接方式，该属性有三个属性值：miter（默认值，尖角），bevel（衔接），round（圆角）。</span></span><br><span class="line">          <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">            ctx: ctx</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>实现手写效果</p>
<p>使用 catchtouchmove 绑定，默认会阻止页面跟着滑动</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">type</span>=<span class="string">&quot;2d&quot;</span> <span class="attr">id</span>=<span class="string">&quot;sign&quot;</span> <span class="attr">bindtouchstart</span>=<span class="string">&quot;bindtouchstartHandler&quot;</span> <span class="attr">catchtouchmove</span>=<span class="string">&quot;catchtouchmoveHandler&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">bindtouchstartHandler</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (e.type != <span class="string">&#x27;touchstart&#x27;</span>) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">let</span> ctx = <span class="built_in">this</span>.data.ctx</span><br><span class="line">  <span class="comment">//开始本次绘画</span></span><br><span class="line">  ctx.beginPath()</span><br><span class="line">  <span class="comment">//画笔起始点</span></span><br><span class="line">  ctx.moveTo(e.touches[<span class="number">0</span>].x, e.touches[<span class="number">0</span>].y)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">catchtouchmoveHandler</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> left = e.currentTarget.offsetLeft</span><br><span class="line">  <span class="keyword">let</span> top = e.currentTarget.offsetTop</span><br><span class="line">  <span class="keyword">let</span> pageX = e.touches[<span class="number">0</span>].pageX</span><br><span class="line">  <span class="keyword">let</span> pageY = e.touches[<span class="number">0</span>].pageY</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> ctx = <span class="built_in">this</span>.data.ctx</span><br><span class="line">  <span class="comment">//根据鼠标路径绘画</span></span><br><span class="line">  ctx.lineTo(pageX - left, pageY - top)</span><br><span class="line">  <span class="comment">//立即渲染</span></span><br><span class="line">  ctx.stroke()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用 <code>bindtouchmove</code>，需要单独处理页面跟着滚动的问题</p>
<p>给 canvas 绑定 bindtouchmove=”touchmoveHandler” 然后绑定空的 catchtouchmove 事件<code>catchtouchmove=&quot;preventTouchmove&quot;</code> 或者直接 <code>catchtouchmove=&quot;ture&quot;</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">type</span>=<span class="string">&quot;2d&quot;</span> <span class="attr">id</span>=<span class="string">&quot;sign&quot;</span> <span class="attr">bindtouchstart</span>=<span class="string">&quot;bindtouchstartHandler&quot;</span> <span class="attr">bindtouchmove</span>=<span class="string">&quot;bindtouchmoveHandler&quot;</span> <span class="attr">catchtouchmove</span>=<span class="string">&quot;preventTouchmove&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">bindtouchstartHandler</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (e.type != <span class="string">&#x27;touchstart&#x27;</span>) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">let</span> ctx = <span class="built_in">this</span>.data.ctx</span><br><span class="line">  <span class="comment">//开始本次绘画</span></span><br><span class="line">  ctx.beginPath()</span><br><span class="line">  <span class="comment">//画笔起始点</span></span><br><span class="line">  ctx.moveTo(e.touches[<span class="number">0</span>].x, e.touches[<span class="number">0</span>].y)</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// bind绑定的事件</span></span><br><span class="line">bindtouchmoveHandler (e) &#123;</span><br><span class="line">  <span class="keyword">let</span> ctx = <span class="built_in">this</span>.data.ctx</span><br><span class="line">  <span class="comment">//根据鼠标路径绘画</span></span><br><span class="line">  ctx.lineTo(e.touches[<span class="number">0</span>].x, e.touches[<span class="number">0</span>].y)</span><br><span class="line">  <span class="comment">//立即渲染</span></span><br><span class="line">  ctx.stroke()</span><br><span class="line">&#125;,</span><br><span class="line">preventTouchmove () &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>保存到相册</p>
<p>wx.canvasToTempFilePath(Object object, Object this)<br><a href="https://developers.weixin.qq.com/miniprogram/dev/api/canvas/wx.canvasToTempFilePath.html">https://developers.weixin.qq.com/miniprogram/dev/api/canvas/wx.canvasToTempFilePath.html</a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"> <span class="comment">// 把当前画布指定区域的内容导出生成指定大小的图片。 canvas2d不需要使用draw方法</span></span><br><span class="line"><span class="function"><span class="title">canvasToTempFilePath</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> query = wx.createSelectorQuery()</span><br><span class="line">    query</span><br><span class="line">      .select(<span class="string">&#x27;#sign&#x27;</span>)</span><br><span class="line">      .fields(&#123; <span class="attr">node</span>: <span class="literal">true</span>, <span class="attr">size</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">      .exec(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// console.log(res)</span></span><br><span class="line">        <span class="keyword">const</span> canvas = res[<span class="number">0</span>].node</span><br><span class="line">        wx.canvasToTempFilePath(&#123;</span><br><span class="line">          x: <span class="number">0</span>,</span><br><span class="line">          y: <span class="number">0</span>,</span><br><span class="line">          fileType: <span class="string">&#x27;jpg&#x27;</span>,</span><br><span class="line">          canvas: canvas,</span><br><span class="line">          <span class="function"><span class="title">success</span>(<span class="params">res</span>)</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(res.tempFilePath) <span class="comment">// 文件临时地址 可以保存到相册或上传</span></span><br><span class="line">            resolve(res.tempFilePath)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保存本地</span></span><br><span class="line"><span class="function"><span class="title">saveToAlbum</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.canvasToTempFilePath().then(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span><br><span class="line">    wx.getSetting(&#123;</span><br><span class="line">      <span class="function"><span class="title">success</span>(<span class="params">res</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 如果没有则获取授权</span></span><br><span class="line">        <span class="keyword">if</span> (!res.authSetting[<span class="string">&#x27;scope.writePhotosAlbum&#x27;</span>]) &#123;</span><br><span class="line">          wx.authorize(&#123;</span><br><span class="line">            scope: <span class="string">&#x27;scope.writePhotosAlbum&#x27;</span>,</span><br><span class="line">            <span class="function"><span class="title">success</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">              wx.saveImageToPhotosAlbum(&#123;</span><br><span class="line">                filePath: file,</span><br><span class="line">                <span class="function"><span class="title">success</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">                  wx.showToast(&#123;</span><br><span class="line">                    title: <span class="string">&#x27;保存成功&#x27;</span></span><br><span class="line">                  &#125;)</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="function"><span class="title">fail</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">                  wx.showToast(&#123;</span><br><span class="line">                    title: <span class="string">&#x27;保存失败&#x27;</span>,</span><br><span class="line">                    icon: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">                  &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="function"><span class="title">fail</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// 有授权直接保存</span></span><br><span class="line">          wx.saveImageToPhotosAlbum(&#123;</span><br><span class="line">            filePath: file,</span><br><span class="line">            <span class="function"><span class="title">success</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">              wx.showToast(&#123;</span><br><span class="line">                title: <span class="string">&#x27;保存成功&#x27;</span></span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="function"><span class="title">fail</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">              wx.showToast(&#123;</span><br><span class="line">                title: <span class="string">&#x27;保存失败&#x27;</span>,</span><br><span class="line">                icon: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>在微信小程序中使用 iconfont</title>
    <url>/1060.html</url>
    <content><![CDATA[<p>在 <a href="https://www.iconfont.cn/">iconfont</a> 选择好需要使用的图标，将代码下载，解压后找到 iconfont.css 修改名称为 iocnfont.wxss 放到项目中即可</p>
<p>使用: Font class 方式</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">icon</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-xxx&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">icon</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>将无效的字体引用删除，只保留 base64 引用</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&#x27;iconfont&#x27;</span>;</span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;data:application/x-font-woff2;charset=utf-8;base64,...&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff2&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Font class 方式不支持使用彩色图标，且 symbol 方式也无法使用，因为 iconfont.js 中含有操作 dom 的代码，会报错 Cannot read property ‘getElementsByTagName’ of undefined</p>
<p>如果想引入彩色图标</p>
<p><a href="https://github.com/iconfont-cli/mini-program-iconfont-cli">https://github.com/iconfont-cli/mini-program-iconfont-cli</a></p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>微信小程序中使用 async/await 语法</title>
    <url>/1018.html</url>
    <content><![CDATA[<p>旧文章害死人</p>
<p>研究了半天，突然发现开发工具在 1.02.1904282 以及之后版本中，增加了<a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/codecompile.html#%E5%A2%9E%E5%BC%BA%E7%BC%96%E8%AF%91">增强编译</a>已支持 Async/Await 语法</p>
<p><a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/uplog.html#_2019-05-08">2019-05-08更新日志</a>第一条</p>
<p>已下内容已过期(文章刚发布一小时)</p>
<blockquote>
<p>微信小程序中原生支持 async await 语法，前提是需要关闭 ES6 转 ES5 后</p>
</blockquote>
<p>在开启 ES6 转 ES5 后 async 函数无法使用，可以使用 <a href="https://github.com/facebook/regenerator">regenerator</a> 包来解决。新版本的 regenerator 在小程序中无法使用，会报如下错误：<br><img data-src="/wp-content/uploads/2020/03/regenerator.png" alt="regenerator"></p>
<p>原因是 regenerator 包更新了 Function 函数，具体可参考：<br><a href="https://github.com/facebook/regenerator/pull/369">https://github.com/facebook/regenerator/pull/369</a><br><a href="https://github.com/facebook/regenerator/commit/063f14ef7f01bb29830e3f17e9ef151e7a5cb2f3">https://github.com/facebook/regenerator/commit/063f14ef7f01bb29830e3f17e9ef151e7a5cb2f3</a></p>
<p>可以直接使用老版本来解决这个问题，或者修改源码，把 Function 改回去</p>
<p>直接使用老版本</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install regenerator@0.13.1</span><br></pre></td></tr></table></figure>

<p>如果使用了 npm 模块，之后在需要使用 async 语法的 js 中直接引入即可</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> regeneratorRuntime = <span class="built_in">require</span>(<span class="string">&#x27;regenerator-runtime&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>如果没有使用 npm 模块，不能直接 require 包名，需要将包提取出来，并引入完整路径</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> regeneratorRuntime = <span class="built_in">require</span>(<span class="string">&#x27;../../libs/regenerator-runtime&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>参考：<a href="https://wqdy.top/1041.html">微信小程序中使用 npm 包</a></p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>微信小程序中使用less</title>
    <url>/1895.html</url>
    <content><![CDATA[<p>安装</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g wxss-cli</span><br></pre></td></tr></table></figure>

<p>然后在小程序目录，监听此目录以下所有 css 及 less 文件并实时保存文件后转换为 wxss</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 监听文件会自动将此目录下 css,less 文件编译为 wxss</span></span><br><span class="line">wxss ./pages</span><br></pre></td></tr></table></figure>
<p>新建的 less 文件最终不会上传至小程序</p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>微信小程序</tag>
        <tag>less</tag>
      </tags>
  </entry>
  <entry>
    <title>微信小程序中使用 npm 包</title>
    <url>/1041.html</url>
    <content><![CDATA[<p>官方文档：<a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/npm.html">https://developers.weixin.qq.com/miniprogram/dev/devtools/npm.html</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 初始化</span></span><br><span class="line">npm init</span><br><span class="line"><span class="comment"># 安装包</span></span><br><span class="line">npm install [package]</span><br></pre></td></tr></table></figure>

<p>打开开发者工具，在本地设置中，勾选使用 npm 模块，<br>安装完之后 点击开发者工具中的菜单栏：工具 –&gt; 构建 npm</p>
<p>会额外生成一个<code>miniprogram_npm</code> 目录 是开发者工具构建 npm 时生成的，可以理解为小程序版的 npm 包。</p>
<p>在需要的地方引入，以 regenerator 为例</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引入 regenerator-runtime</span></span><br><span class="line"><span class="keyword">const</span> regeneratorRuntime = <span class="built_in">require</span>(<span class="string">&#x27;regenerator-runtime&#x27;</span>)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>微信小程序中相关 api 使用 promise</title>
    <url>/1065.html</url>
    <content><![CDATA[<p>微信小程序的 API 都是回调函数，一不小心就是回调地狱。我们可以用 Promise 封装下</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> Promisify = <span class="function"><span class="params">f</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">arg = &#123;&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      arg.success = <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(res)</span><br><span class="line">      &#125;</span><br><span class="line">      arg.fail = <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        reject(res)</span><br><span class="line">      &#125;</span><br><span class="line">      f(arg)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="keyword">const</span> Request = Promisify(wx.request)</span><br><span class="line"><span class="keyword">const</span> Login = Promisify(wx.login)</span><br><span class="line">Login().then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (res.code) &#123;</span><br><span class="line">    Request(&#123; <span class="attr">url</span>: <span class="string">&#x27;text.php&#x27;</span> &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(res)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>相关问题</p>
<p><a href="https://developers.weixin.qq.com/community/develop/doc/00064cc26bc058a6a848f238351c00">wx.request 经 Promise 封装后，如何拿到requestTask</a></p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>微信小程序常用代码段</title>
    <url>/1931.html</url>
    <content><![CDATA[<h2 id="检查小程序更新"><a href="#检查小程序更新" class="headerlink" title="检查小程序更新"></a>检查小程序更新</h2><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/base/update/UpdateManager.html">https://developers.weixin.qq.com/miniprogram/dev/api/base/update/UpdateManager.html</a></p>
<p>在 <code>app.js</code> 中添加如下代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// app.js</span></span><br><span class="line">App(&#123;</span><br><span class="line">  onLaunch: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.checkNewVersion()</span><br><span class="line">  &#125;,</span><br><span class="line">  checkNewVersion: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> self = <span class="built_in">this</span></span><br><span class="line">    <span class="comment">// 检查版本更新</span></span><br><span class="line">    <span class="comment">// 获取小程序更新机制兼容</span></span><br><span class="line">    <span class="keyword">if</span> (wx.canIUse(<span class="string">&#x27;getUpdateManager&#x27;</span>)) &#123;</span><br><span class="line">      <span class="keyword">const</span> updateManager = wx.getUpdateManager()</span><br><span class="line">      updateManager.onCheckForUpdate(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 请求完新版本信息的回调</span></span><br><span class="line">        <span class="built_in">console</span>.log(res)</span><br><span class="line">        <span class="keyword">if</span> (res.hasUpdate) &#123;</span><br><span class="line">          updateManager.onUpdateReady(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            wx.showModal(&#123;</span><br><span class="line">              title: <span class="string">&#x27;更新提示&#x27;</span>,</span><br><span class="line">              content: <span class="string">&#x27;新版本已经准备好，是否重启应用？&#x27;</span>,</span><br><span class="line">              success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (res.confirm) &#123;</span><br><span class="line">                  <span class="comment">// 新的版本已经下载好，调用 applyUpdate 应用新版本并重启</span></span><br><span class="line">                  updateManager.applyUpdate()</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (res.cancel) &#123;</span><br><span class="line">                  <span class="comment">// 如果需要强制更新，则给出二次弹窗</span></span><br><span class="line">                  wx.showModal(&#123;</span><br><span class="line">                    title: <span class="string">&#x27;更新提示&#x27;</span>,</span><br><span class="line">                    content: <span class="string">&#x27;本次更新可能会导致旧版本无法正常访问，请使用新版本&#x27;</span>,</span><br><span class="line">                    showCancel: <span class="literal">false</span>, <span class="comment">// 不显示取消按钮</span></span><br><span class="line">                    success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">                      <span class="keyword">if</span> (res.confirm) &#123;</span><br><span class="line">                        <span class="comment">// 新的版本已经下载好，调用 applyUpdate 应用新版本并重启</span></span><br><span class="line">                        updateManager.applyUpdate()</span><br><span class="line">                      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (res.cancel) &#123;</span><br><span class="line">                        <span class="comment">// 重新回到版本更新提示</span></span><br><span class="line">                        self.checkNewVersion()</span><br><span class="line">                      &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                  &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;)</span><br><span class="line">          updateManager.onUpdateFailed(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">// 新的版本下载失败</span></span><br><span class="line">            wx.showModal(&#123;</span><br><span class="line">              title: <span class="string">&#x27;已经有新版本了&#x27;</span>,</span><br><span class="line">              content: <span class="string">&#x27;新版本已经上线啦~，请您删除当前小程序，重新搜索打开&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 如果希望用户在最新版本的客户端上体验您的小程序，可以这样子提示</span></span><br><span class="line">      wx.showModal(&#123;</span><br><span class="line">        title: <span class="string">&#x27;提示&#x27;</span>,</span><br><span class="line">        content: <span class="string">&#x27;当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>微信开发者工具上可以通过「编译模式」下的「下次编译模拟更新」开关来调试</p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>微信小程序</tag>
      </tags>
  </entry>
  <entry>
    <title>浏览器的工作原理</title>
    <url>/400.html</url>
    <content><![CDATA[<h2 id="浏览器的组成"><a href="#浏览器的组成" class="headerlink" title="浏览器的组成"></a>浏览器的组成</h2><p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102203825.png"></p>
<ul>
<li>用户界面－ 包括地址栏、后退/前进按钮、书签目录等，也就是你所看到的除了用来显示你所请求页面的主窗口之外的其他部分</li>
<li>浏览器引擎－ 用来查询及操作渲染引擎的接口</li>
<li>渲染引擎（浏览器内核）－ 用来显示请求的内容，例如，如果请求内容为 html，它负责解析 html 及 css，并将解析后的结果显示出来</li>
<li>网络－ 用来完成网络调用，例如 http 请求，它具有平台无关的接口，可以在不同平台上工作</li>
<li>UI 后端－ 用来绘制类似组合选择框及对话框等基本组件，具有不特定于某个平台的通用接口，底层使用操作系统的用户接口</li>
<li>JS 解释器－ 用来解释执行 JS 代码</li>
<li>数据存储－ 属于持久层，浏览器需要在硬盘中保存类似 cookie 的各种数据，HTML5 定义了 Storage 技术，这是一种轻量级完整的客户端存储技术</li>
</ul>
<h2 id="主流的渲染引擎"><a href="#主流的渲染引擎" class="headerlink" title="主流的渲染引擎"></a>主流的渲染引擎</h2><blockquote>
<p>浏览器的渲染引擎也叫排版引擎，或者是<strong>浏览器内核</strong></p>
</blockquote>
<p>主流的 渲染引擎 有</p>
<ul>
<li><strong>Chrome 浏览器</strong>: Blink 引擎（WebKit 的一个分支）。</li>
<li><strong>Safari 浏览器</strong>: WebKit 引擎，windows 版本 2008 年 3 月 18 日推出正式版，但苹果已于 2012 年 7 月 25 日停止开发 Windows 版的 Safari。</li>
<li><strong>FireFox 浏览器</strong>: Gecko 引擎。</li>
<li><strong>Opera 浏览器</strong>: Blink 引擎(早期版使用 Presto 引擎）。</li>
<li><strong>Internet Explorer 浏览器</strong>: Trident 引擎。</li>
<li><strong>Microsoft Edge 浏览器</strong>: EdgeHTML 引擎（Trident 的一个分支）。</li>
</ul>
<h2 id="渲染引擎工作原理"><a href="#渲染引擎工作原理" class="headerlink" title="渲染引擎工作原理"></a>渲染引擎工作原理</h2><p>渲染引擎解析的基本流程：</p>
<ol>
<li><p>解析 HTML 构建 <code>Dom树</code>，同时解析所有的 css 样式，构建 css 规则。DOM 是 W3C 组织推荐的处理可扩展置标语言的标准编程接口。</p>
</li>
<li><p>根据 DOM 树和 css 规则合并构建 <code>渲染树</code></p>
<ul>
<li>DOM 树上的节点没有样式的，渲染树的节点有样式的</li>
<li>渲染树上的节点都是需要渲染的，所以渲染树上没有像<code>head</code>标签 或 <code>display: none</code>这样的元素，但是它们在 Dom 树中</li>
</ul>
</li>
<li><p>对渲染树进行布局，定位坐标和大小、确定是否换行、确定 position、overflow、z-index 等等，这个过程叫<code>layout</code> 或 <code>reflow</code>。</p>
</li>
<li><p>绘制渲染树，调用操作系统底层 API(UI Backend)进行绘图操作。</p>
</li>
</ol>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102203846.png"></p>
<p><strong>webkit 内核工作流程</strong></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102203907.png"></p>
<p><strong>gecko 内核工作流程</strong></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102203924.jpeg"></p>
<p>结论：浏览器能够解析 HTML 文件，并且显示到页面中。所以我们写的文件能够使用浏览器打开并且能够看到效果。</p>
<h1 id="重绘与回流"><a href="#重绘与回流" class="headerlink" title="重绘与回流"></a>重绘与回流</h1><h2 id="重绘与回流-1"><a href="#重绘与回流-1" class="headerlink" title="重绘与回流"></a>重绘与回流</h2><p><code>回流(reflow)</code>: 又叫重排，当 render tree 中的一部分(或全部)因为元素的规模尺寸，布局，隐藏等改变而需要重新构建。</p>
<p><code>重绘(repaint)</code>：当 render tree 中的一些元素需要更新属性，而这些属性只是影响元素的外观，风格，而不会影响布局的，比如 background-color。</p>
<ol>
<li>每个页面至少需要一次回流+重绘</li>
<li>回流必将引起重绘</li>
</ol>
<p>回流什么时候发生？</p>
<p>1、添加或者删除可见的 DOM 元素</p>
<p>2、元素位置改变</p>
<p>3、元素尺寸改变——边距、填充、边框、宽度和高度</p>
<p>4、内容改变——比如文本改变或者图片大小改变而引起的计算值宽度和高度改变</p>
<p>5、页面渲染初始化</p>
<p>6、浏览器窗口尺寸改变——resize 事件发生时</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="built_in">document</span>.body.style</span><br><span class="line">s.padding = <span class="string">&#x27;2px&#x27;</span> <span class="comment">// 回流+重绘</span></span><br><span class="line">s.border = <span class="string">&#x27;1px solid red&#x27;</span> <span class="comment">// 再一次 回流+重绘</span></span><br><span class="line">s.color = <span class="string">&#x27;blue&#x27;</span> <span class="comment">// 再一次重绘</span></span><br><span class="line">s.backgroundColor = <span class="string">&#x27;#ccc&#x27;</span> <span class="comment">// 再一次 重绘</span></span><br><span class="line">s.fontSize = <span class="string">&#x27;14px&#x27;</span> <span class="comment">// 再一次 回流+重绘</span></span><br><span class="line"><span class="comment">// 添加node，再一次 回流+重绘</span></span><br><span class="line"><span class="built_in">document</span>.body.appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">&#x27;abc!&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h2 id="聪明的浏览器"><a href="#聪明的浏览器" class="headerlink" title="聪明的浏览器"></a>聪明的浏览器</h2><blockquote>
<p>从上个实例代码中可以看到几行简单的 JS 代码就引起了 6 次左右的回流、重绘。而且我们也知道回流的花销也不小，如果每句 JS 操作都去回流重绘的话，浏览器可能就会受不了。所以很多浏览器都会优化这些操作，浏览器会维护 1 个队列，把所有会引起回流、重绘的操作放入这个队列，等队列中的操作到了一定的数量或者到了一定的时间间隔，浏览器就会 flush 队列，进行一个批处理。这样就会让多次的回流、重绘变成一次回流重绘。</p>
</blockquote>
<p>虽然有了浏览器的优化，但有时候我们写的一些代码可能会强制浏览器提前 flush 队列，这样浏览器的优化可能就起不到作用了。当你向浏览器请求一些 style 信息的时候，就会让浏览器 flush 队列，比如：</p>
<ol>
<li><p>offsetTop, offsetLeft, offsetWidth, offsetHeight</p>
</li>
<li><p>scrollTop/Left/Width/Height</p>
</li>
<li><p>clientTop/Left/Width/Height</p>
</li>
<li><p>width,height</p>
</li>
<li><p>请求了 getComputedStyle(), 或者 IE 的 currentStyle</p>
</li>
</ol>
<h2 id="如何性能优化"><a href="#如何性能优化" class="headerlink" title="如何性能优化"></a>如何性能优化</h2><blockquote>
<p>减少回流与重绘的次数，就需要简单对渲染树的操作</p>
</blockquote>
<ol>
<li>直接使用 <code>className</code> 修改样式，少用 style 设置样式</li>
<li>让要操作的元素进行”离线处理”，处理完后一起更新<ul>
<li>使用 <code>DocumentFragment</code> 进行缓存操作，引发一次回流和重绘</li>
<li>使用 <code>display:none</code> 技术，只引发两次回流和重绘</li>
</ul>
</li>
<li>将需要多次重排的元素，position 属性设为 absolute 或 fixed，这样此元素就脱离了文档流，它的变化不会影响到其他元素为动画的 HTML 元素，例如动画，那么修改他们的 CSS 是会大大减小 reflow</li>
<li><strong>完成功能是前提，在完成功能的情况下想着优化代码</strong></li>
</ol>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>浏览器</tag>
      </tags>
  </entry>
  <entry>
    <title>神奇的js</title>
    <url>/2009.html</url>
    <content><![CDATA[<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(!(~+[])+&#123;&#125;)[--[~+<span class="string">&quot;&quot;</span>][+[]]*[~+[]] + ~~!+[]]+(&#123;&#125;+[])[[~!+[]]*~+[]] === <span class="string">&#x27;sb&#x27;</span></span><br></pre></td></tr></table></figure>

<p>短路表达式、三元表达式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">a = b &amp;&amp; <span class="number">1</span></span><br><span class="line"><span class="comment">// 相当于</span></span><br><span class="line">a = !!b ? <span class="number">1</span> : b</span><br><span class="line"><span class="keyword">if</span> (b) &#123; a = <span class="number">1</span> &#125; <span class="keyword">else</span> &#123; a = b &#125;</span><br><span class="line"></span><br><span class="line">a = b || <span class="number">1</span></span><br><span class="line"><span class="comment">// 相当于</span></span><br><span class="line">a = !!b ? b : <span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> (b) &#123; a = b &#125; <span class="keyword">else</span> &#123; a = <span class="number">1</span> &#125;</span><br></pre></td></tr></table></figure>

<p>取整(不四舍五入)</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">~~<span class="number">2.33</span> === <span class="number">2</span></span><br><span class="line"><span class="number">2.33</span> | <span class="number">0</span> === <span class="number">2</span></span><br><span class="line"><span class="number">2.33</span> &gt;&gt; <span class="number">0</span> === <span class="number">2</span></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;0&#x27;</span> == <span class="number">0</span> <span class="comment">// true</span></span><br><span class="line"><span class="number">0</span> == [] <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;0&#x27;</span> == [] <span class="comment">// false</span></span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>移动端(Safari)浏览网页时对数字禁用电话功能</title>
    <url>/388.html</url>
    <content><![CDATA[<h2 id="移动端-Safari-浏览网页时对数字禁用电话功能"><a href="#移动端-Safari-浏览网页时对数字禁用电话功能" class="headerlink" title="移动端(Safari)浏览网页时对数字禁用电话功能"></a>移动端(Safari)浏览网页时对数字禁用电话功能</h2><ul>
<li>标准的电话号码格式是：</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;tel:+86-123-456-7890&quot;</span>&gt;</span>1234567890<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>有时候不是电话号码的数字会被浏览器自动解析为如上电话号码格式，导致样式和布局改变</p>
</li>
<li><p>忽略页面中的数字识别为电话号码, 只要把这个默认行为关闭就行</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;format-detection&quot;</span> <span class="attr">content</span>=<span class="string">&quot;telephone=no&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>这个关闭不会影响真正电话号码的识别</li>
</ul>
<p>说明：Meta 标签中的 format-detection 属性及含义<br>format-detection 中文的意思是 “格式检测”，它是用来检测 html 里的一些格式的</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 禁止了把数字转化为拨号链接 默认为 yes --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;format-detection&quot;</span> <span class="attr">content</span>=<span class="string">&quot;telephone=no&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 禁止作为邮箱地址 默认为 yes --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;format-detection&quot;</span> <span class="attr">content</span>=<span class="string">&quot;email=no&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 禁止跳转至地图 默认为 yes --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;format-detection&quot;</span> <span class="attr">content</span>=<span class="string">&quot;adress=no&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;format-detection&quot;</span> <span class="attr">content</span>=<span class="string">&quot;telephone=no,email=no,adress=no&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>移动端调试</title>
    <url>/418.html</url>
    <content><![CDATA[<h2 id="一些调试工具"><a href="#一些调试工具" class="headerlink" title="一些调试工具"></a>一些调试工具</h2><ol>
<li><p>直接在 chrome，firefox 等开启模拟器调试，简单直接，还能模拟网络等，但是无法 100% 还原手机的真实情况</p>
</li>
<li><p>chrome <a href="https://developer.chrome.com/devtools/docs/remote-debugging">远程调试功能</a></p>
<p><code>chrome://inspect/#devices</code></p>
<p>需要连接数据线，其次是设置比较繁琐，而且还限制了 android 手机。对于 IOS 的调试则可能要使用 Safari 的另一套工具</p>
</li>
<li><p><a href="https://people.apache.org/~pmuellr/weinre/docs/latest/">weinre</a>：远程调试，在 PC 上生成一个像 chrome 开发工具一样的调试器，需要手动引入 js</p>
</li>
<li><p>Eruda、vConsole：在移动端页面上生成一个调试器，调试信息会挡住操作元素，查看复杂数据结构的 log 不方便，需要手动引入 js</p>
</li>
<li><p>安装各种虚拟机 sdk，在电脑上进行手机调试。能比较真实模拟手机，但是安装繁琐，操作不方便，无法模拟真实的手势操作</p>
</li>
</ol>
<h2 id="Eruda"><a href="#Eruda" class="headerlink" title="Eruda"></a>Eruda</h2><p><a href="https://github.com/liriliri/eruda">https://github.com/liriliri/eruda</a></p>
<p>Eruda 是一个专为手机网页前端设计的调试面板，类似 DevTools 的迷你版，其主要功能包括：捕获 console 日志、检查元素状态、捕获 XHR 请求、显示本地存储和 Cookie 信息等等。</p>
<ol>
<li>按钮拖拽，面板透明度大小设置。</li>
<li>Console 面板：捕获 Console 日志，支持 log、error、info、warn、dir、time/timeEnd、clear、count、assert、table；支持占位符，包括%c 自定义样式输出；支持按日志类型及正则表达式过滤；支持快捷命令加载 underscore、jQuery 库；支持 JavaScript 脚本执行。</li>
<li>Elements 面板：查看标签内容及属性；查看应用在 Dom 上的样式；支持页面元素高亮；支持屏幕直接点击选取；查看 Dom 上绑定的各类事件。</li>
<li>Network 面板：捕获请求，查看发送数据、返回头、返回内容等信息。</li>
<li>Resources 面板：查看并清除 localStorage、sessionStorage 及 cookie；查看页面加载脚本及样式文件；查看页面加载图片。</li>
<li>Sources 面板：查看页面源码；格式化 html，css，js 代码及 json 数据。</li>
<li>Info 面板：输出 URL 及 User Agent；支持自定义输出内容。</li>
<li>Snippets 面板：页面元素添加边框；加时间戳刷新页面；支持自定义代码片段。</li>
</ol>
<p>使用</p>
<p>通过 CDN 使用：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;//cdn.bootcss.com/eruda/1.5.2/eruda.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">  eruda.init()</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>通过 npm 安装：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install eruda --save</span><br></pre></td></tr></table></figure>

<p>在页面中加载脚本：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;node_modules/eruda/eruda.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">  eruda.init()</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Js 文件对于移动端来说略重（gzip 后大概 100kb）。建议通过 url 参数来控制是否加载调试器，比如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> src = <span class="string">&#x27;node_modules/eruda/eruda.min.js&#x27;</span></span><br><span class="line">  <span class="keyword">if</span> (!<span class="regexp">/eruda=true/</span>.test(<span class="built_in">window</span>.location) &amp;&amp; <span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;active-eruda&#x27;</span>) != <span class="string">&#x27;true&#x27;</span>) <span class="keyword">return</span></span><br><span class="line">  <span class="built_in">document</span>.write(<span class="string">&#x27;&lt;scr&#x27;</span> + <span class="string">&#x27;ipt src=&quot;&#x27;</span> + src + <span class="string">&#x27;&quot;&gt;&lt;/scr&#x27;</span> + <span class="string">&#x27;ipt&gt;&#x27;</span>)</span><br><span class="line">  <span class="built_in">document</span>.write(<span class="string">&#x27;&lt;scr&#x27;</span> + <span class="string">&#x27;ipt&gt;eruda.init();&lt;/scr&#x27;</span> + <span class="string">&#x27;ipt&gt;&#x27;</span>)</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<p>初始化时可以传入配置：</p>
<ul>
<li>container：用于插件初始化的 Dom 元素，如果不设置，默认创建 div 作为容器直接置于 html 根结点下面</li>
<li>tool：指定要初始化哪些面板，默认加载所有</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> el = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(el)</span><br><span class="line"></span><br><span class="line">eruda.init(&#123;</span><br><span class="line">  container: el,</span><br><span class="line">  tool: [<span class="string">&#x27;console&#x27;</span>, <span class="string">&#x27;elements&#x27;</span>],</span><br><span class="line">  useShadowDom: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="vConsole"><a href="#vConsole" class="headerlink" title="vConsole"></a>vConsole</h2><p><a href="https://github.com/Tencent/vConsole">https://github.com/Tencent/vConsole</a></p>
<p>一个轻量、可拓展、针对手机网页的前端开发者调试面板</p>
<p>特性</p>
<ul>
<li>查看 console 日志</li>
<li>查看网络请求</li>
<li>查看页面 element 结构</li>
<li>查看 Cookies、localStorage 和 SessionStorage</li>
<li>手动执行 JS 命令行</li>
<li>自定义插件</li>
</ul>
<p><a href="https://github.com/Tencent/vConsole/blob/dev/doc/tutorial_CN.md">使用说明</a></p>
<p>下载 vConsole 的<a href="https://github.com/Tencent/vConsole/releases/latest">最新版本</a>（不要直接下载 dev 分支下的 <code>dist/vconsole.min.js</code>），复制 <code>dist/vconsole.min.js</code> 到项目中：</p>
<p>在 HTML 中引入 vConsole 模块</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;dist/vconsole.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="comment">// 初始化</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> vConsole = <span class="keyword">new</span> VConsole()</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(<span class="string">&#x27;Hello world&#x27;</span>)</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在 vue 项目中：使用 npm 安装</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install vconsole</span><br></pre></td></tr></table></figure>

<p>在 main.js 中引入</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> VConsole <span class="keyword">from</span> <span class="string">&#x27;vconsole&#x27;</span></span><br><span class="line"><span class="keyword">const</span> isDebug = <span class="literal">true</span></span><br><span class="line"><span class="comment">// 本地开发调试注入 vConsole</span></span><br><span class="line"><span class="keyword">if</span> (isDebug) &#123;</span><br><span class="line">  <span class="keyword">new</span> VConsole()</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="weinre"><a href="#weinre" class="headerlink" title="weinre"></a>weinre</h2><p><a href="http://people.apache.org/~pmuellr/weinre/docs/latest/Home.html">http://people.apache.org/~pmuellr/weinre/docs/latest/Home.html</a></p>
<ol>
<li>Element： 查看/修改 dom，查看/修改 dom CSS</li>
<li>Resources：查看/修改 localStorage, sessionStorage</li>
<li>Network：查看网络请求</li>
<li>Timeline：</li>
<li>Console：查看控制台输出</li>
</ol>
<p>不能做 JS 调试</p>
<p>使用</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装</span></span><br><span class="line">npm install -g weinre</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动 weinre 服务</span></span><br><span class="line">weinre --boundHost 192.168.3.44 --httpPort 8888</span><br><span class="line"></span><br><span class="line">启动调试客户端</span><br><span class="line">在浏览器中打开 <span class="string">&#x27;http://192.168.3.44:8888&#x27;</span> 即可启动调试客户端</span><br><span class="line"></span><br><span class="line">在需要调试的页面中添加如下</span><br><span class="line">&lt;script src=<span class="string">&quot;http://192.168.3.44:8888/target/target-script-min.js#anonymous&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="spy-debugger"><a href="#spy-debugger" class="headerlink" title="spy-debugger"></a>spy-debugger</h2><p><a href="https://github.com/wuchangming/spy-debugger">https://github.com/wuchangming/spy-debugger</a></p>
<p>微信调试，各种 WebView 样式调试、手机浏览器的页面真机调试。便捷的远程调试手机页面、抓包工具，支持：HTTP/HTTPS，无需 USB 连接设备</p>
<p>spy-debugger 集成了<code>weinre</code>，简化了<code>weinre</code>需要给每个调试的页面添加 js 代码。原理是拦截所有 html 页面请求注入<code>weinre</code>所需要的 js 代码。让页面调试更加方便</p>
<p>1、页面调试＋抓包<br>2、操作简单，无需 USB 连接设备<br>3、<strong>支持 HTTPS</strong><br>4、<code>spy-debugger</code>内部集成了<a href="http://people.apache.org/~pmuellr/weinre/docs/latest/"><code>weinre</code></a>、<a href="https://github.com/wuchangming/node-mitmproxy"><code>node-mitmproxy</code></a>、<a href="https://github.com/alibaba/anyproxy"><code>AnyProxy</code></a>。<br>5、自动忽略原生 App 发起的 https 请求，只拦截 webview 发起的 https 请求。对使用了 SSL pinning 技术的原生 App 不造成任何影响。<br>6、可以配合其它代理工具一起使用(默认使用 AnyProxy) <a href="https://github.com/wuchangming/spy-debugger#%E8%AE%BE%E7%BD%AE%E5%A4%96%E9%83%A8%E4%BB%A3%E7%90%86%E9%BB%98%E8%AE%A4%E4%BD%BF%E7%94%A8anyproxy">(设置外部代理)</a></p>
<p>基本使用</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装</span></span><br><span class="line">npm install spy-debugger -g</span><br><span class="line"><span class="comment"># 启动</span></span><br><span class="line">spy-debugger</span><br><span class="line"><span class="comment">#设置手机的HTTP代理</span></span><br><span class="line">代理IP地址设置为PC的IP地址，端口为spy-debugger的启动端口(默认端口：9888)</span><br><span class="line"><span class="comment"># 手机安装证书</span></span><br><span class="line">手机浏览器访问 http://s.xxx</span><br><span class="line">设置-&gt;通用-&gt;描述文件与设备管理-&gt;找到node-mitmproxy CA（安装）</span><br><span class="line">设置-&gt;通用-&gt;关于本机-&gt;证书信任设置-&gt; 找到node-mitmproxy CA（打开）</span><br></pre></td></tr></table></figure>

<p>自定义选项</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 自定义端口</span></span><br><span class="line">spy-debugger -p 8888</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置页面内容为可编辑模式</span></span><br><span class="line">spy-debugger -w <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 是否只拦截浏览器发起的https请求(默认： true)</span></span><br><span class="line">spy-debugger -b <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 是否允许weinre监控iframe加载的页面(默认： false)</span></span><br><span class="line">spy-debugger -i <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 是否允许 HTTP 缓存(默认： false)</span></span><br><span class="line">spy-debugger -c <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h2 id="m-console"><a href="#m-console" class="headerlink" title="m-console"></a>m-console</h2><p><a href="https://github.com/fwon/m-console">https://github.com/fwon/m-console</a></p>
<p>手机远程调试工具，手机通过代理连接上 PC 后，可以在 PC 版浏览器打印 log 和错误日志</p>
<p>需要手动给每个调试的页面添加 js 代码</p>
<h2 id="DebugGap-VIDE"><a href="#DebugGap-VIDE" class="headerlink" title="DebugGap-VIDE"></a>DebugGap-VIDE</h2><p><a href="https://www.debuggap.com/debug_webview.html">https://www.debuggap.com/debug_webview.html</a></p>
<h2 id="Mobile-Debug"><a href="#Mobile-Debug" class="headerlink" title="Mobile Debug"></a>Mobile Debug</h2><p><a href="https://www.mobiledebug.com/">https://www.mobiledebug.com/</a></p>
<h2 id="whistle"><a href="#whistle" class="headerlink" title="whistle"></a>whistle</h2><p><a href="https://segmentfault.com/a/1190000016058875?utm_source=tag-newest">https://segmentfault.com/a/1190000016058875?utm_source=tag-newest</a><br><a href="http://wproxy.org/whistle/">http://wproxy.org/whistle/</a></p>
<h2 id="chii"><a href="#chii" class="headerlink" title="chii"></a>chii</h2><p><a href="https://github.com/liriliri/chii">https://github.com/liriliri/chii</a></p>
<h2 id="抓包工具"><a href="#抓包工具" class="headerlink" title="抓包工具"></a>抓包工具</h2><p>AnyProxy<br><a href="https://github.com/alibaba/anyproxy">https://github.com/alibaba/anyproxy</a><br>Zan Proxy<br><a href="https://youzan.github.io/zan-proxy/">https://youzan.github.io/zan-proxy/</a></p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>调试</tag>
      </tags>
  </entry>
  <entry>
    <title>移动端、PC端、小程序常用的UI框架</title>
    <url>/622.html</url>
    <content><![CDATA[<h3 id="移动端-UI-库"><a href="#移动端-UI-库" class="headerlink" title="移动端 UI 库"></a>移动端 UI 库</h3><h4 id="Vant-UI-vue"><a href="#Vant-UI-vue" class="headerlink" title="Vant UI (vue)"></a>Vant UI (vue)</h4><p>官方地址：<a href="https://youzan.github.io/vant/#/zh-CN/">https://youzan.github.io/vant/#/zh-CN/</a></p>
<p>github 地址：<a href="https://github.com/youzan/vant">https://github.com/youzan/vant</a> 12.8k</p>
<p>优点：用来做移动端商城很不错</p>
<h3 id="PC-端-UI-库"><a href="#PC-端-UI-库" class="headerlink" title="PC 端 UI 库"></a>PC 端 UI 库</h3><h4 id="Element-UI-vue"><a href="#Element-UI-vue" class="headerlink" title="Element UI (vue)"></a>Element UI (vue)</h4><p>官方地址：<a href="http://element-cn.eleme.io/#/zh-CN/component/installation">http://element-cn.eleme.io/#/zh-CN/component/installation</a></p>
<p>github 地址：<a href="https://github.com/ElemeFE/element">https://github.com/ElemeFE/element</a> 44k</p>
<h4 id="iView-UI-vue"><a href="#iView-UI-vue" class="headerlink" title="iView UI (vue)"></a>iView UI (vue)</h4><p>官方地址：<a href="http://iview.talkingdata.com/#/components/guide/install">http://iview.talkingdata.com/#/components/guide/install</a></p>
<p>github 地址：<a href="https://github.com/iview/iview">https://github.com/iview/iview</a> 23.1k</p>
<h4 id="Ant-Design-react"><a href="#Ant-Design-react" class="headerlink" title="Ant Design (react)"></a>Ant Design (react)</h4><p>官方地址：<a href="https://ant.design/docs/react/introduce-cn">https://ant.design/docs/react/introduce-cn</a></p>
<p>github 地址：<a href="https://github.com/ant-design/ant-design">https://github.com/ant-design/ant-design</a> 56.9k</p>
<h3 id="小程序-UI-库"><a href="#小程序-UI-库" class="headerlink" title="小程序 UI 库"></a>小程序 UI 库</h3><h4 id="Vant-Weapp"><a href="#Vant-Weapp" class="headerlink" title="Vant Weapp"></a>Vant Weapp</h4><p>官方地址：<a href="https://youzan.github.io/vant-weapp/#/intro">https://youzan.github.io/vant-weapp/#/intro</a></p>
<p>github 地址：<a href="https://github.com/youzan/vant-weapp">https://github.com/youzan/vant-weapp</a> 11.9k</p>
<p>优点：组件丰富，合适做商城类小程序</p>
<h4 id="Color-UI"><a href="#Color-UI" class="headerlink" title="Color UI"></a>Color UI</h4><p>官方地址：<a href="https://www.color-ui.com/">https://www.color-ui.com/</a></p>
<p>github 地址：<a href="https://github.com/weilanwl/ColorUI">https://github.com/weilanwl/ColorUI</a> 7.8k</p>
<p>优点：样式好看</p>
<h3 id="设计动效"><a href="#设计动效" class="headerlink" title="设计动效"></a>设计动效</h3><h4 id="Ant-Motion"><a href="#Ant-Motion" class="headerlink" title="Ant Motion"></a>Ant Motion</h4><p>官方地址：<a href="https://motion.ant.design/index-cn">https://motion.ant.design/index-cn</a></p>
<p>github 地址：<a href="https://github.com/ant-design/ant-motion/">https://github.com/ant-design/ant-motion/</a> 3.6k</p>
<h3 id="数据可视化"><a href="#数据可视化" class="headerlink" title="数据可视化"></a>数据可视化</h3><h4 id="DataV-Vue-组件库"><a href="#DataV-Vue-组件库" class="headerlink" title="DataV(Vue 组件库)"></a>DataV(Vue 组件库)</h4><p>官方地址：<a href="http://datav.jiaminghi.com/">http://datav.jiaminghi.com/</a></p>
<p>github 地址：<a href="https://github.com/DataV-Team/DataV">https://github.com/DataV-Team/DataV</a> 1.4k</p>
<h4 id="Echarts-Vue-组件库"><a href="#Echarts-Vue-组件库" class="headerlink" title="Echarts(Vue 组件库)"></a>Echarts(Vue 组件库)</h4><p>github 地址：<a href="https://github.com/apache/incubator-echarts">https://github.com/apache/incubator-echarts</a> 39.6k</p>
<h3 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h3><h4 id="vue-element-admin-pc-后台管理-vue2-0-element"><a href="#vue-element-admin-pc-后台管理-vue2-0-element" class="headerlink" title="vue-element-admin(pc 后台管理 vue2.0+element)"></a>vue-element-admin(pc 后台管理 vue2.0+element)</h4><p>演示地址：<a href="https://panjiachen.github.io/vue-element-admin/">https://panjiachen.github.io/vue-element-admin/</a></p>
<p>github 地址：<a href="https://github.com/PanJiaChen/vue-element-admin">https://github.com/PanJiaChen/vue-element-admin</a> 49.8k</p>
<p>使用文档：<a href="https://panjiachen.github.io/vue-element-admin-site/zh/">https://panjiachen.github.io/vue-element-admin-site/zh/</a></p>
<p>博客系列教程地址：<a href="https://segmentfault.com/a/1190000009275424">https://segmentfault.com/a/1190000009275424</a></p>
<h4 id="iView-admin-pc-后台管理-vue2-0-iView"><a href="#iView-admin-pc-后台管理-vue2-0-iView" class="headerlink" title="iView-admin(pc 后台管理 vue2.0+iView)"></a>iView-admin(pc 后台管理 vue2.0+iView)</h4><p>演示地址：<a href="https://admin.iviewui.com/">https://admin.iviewui.com/</a></p>
<p>github 地址：<a href="https://github.com/iview/iview-admin">https://github.com/iview/iview-admin</a> 14.2k</p>
<p>使用文档：<a href="https://lison16.github.io/iview-admin-doc/">https://lison16.github.io/iview-admin-doc/</a></p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>移动端兼容性问题总结</title>
    <url>/387.html</url>
    <content><![CDATA[<h3 id="1-ios-移动端页面对点击事件有-300ms-延时"><a href="#1-ios-移动端页面对点击事件有-300ms-延时" class="headerlink" title="1. ios 移动端页面对点击事件有 300ms 延时"></a>1. ios 移动端页面对点击事件有 300ms 延时</h3><p>使用 fastclick 库 <a href="https://github.com/ftlabs/fastclick">https://github.com/ftlabs/fastclick</a></p>
<p>使用 FastClick 的时候，在需要使用的层上，实例化它。我们使用 document.body 是因为希望所有的按钮和链接都获得快速点击</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> FastClick <span class="keyword">from</span> <span class="string">&#x27;fastclick&#x27;</span></span><br><span class="line">FastClick.attach(<span class="built_in">document</span>.body)</span><br></pre></td></tr></table></figure>

<h3 id="2-ios-滚动卡顿"><a href="#2-ios-滚动卡顿" class="headerlink" title="2. ios 滚动卡顿"></a>2. ios 滚动卡顿</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  -webkit-<span class="attribute">overflow</span>-scrolling: touch; <span class="comment">/* 当手指从触摸屏上移开，会保持一段时间的滚动 */</span></span><br><span class="line">  <span class="comment">/* -webkit-overflow-scrolling: auto; */</span> <span class="comment">/* 当手指从触摸屏上移开，滚动会立即停止 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-ios-1px-border-变宽"><a href="#3-ios-1px-border-变宽" class="headerlink" title="3. ios 1px border 变宽"></a>3. ios 1px border 变宽</h3><p>以 dpr = 2 为例：<br>你拿到一张标准的基于 iphone6 的设计稿(750px)<br>你看到它设计的一个 border 宽度是 1px<br>你兴致勃勃地写下了 border: 1px solid #000;<br>然而 iphone6 实际渲染像素是 375px，那么设计需要 border 的其实是 border: 0.5px solid #000;<br>然后你的是 1px<br>不是 1px 变粗了，只是实际只是需要 0.5px 而已</p>
<p><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;&gt;</code> 意思是将物理设备的宽度设置给当前浏览器</p>
<p>在使用 table 标签设置 <code>border: 1px</code> 并使用 <code>border-collapse: collapse;</code> 合并边框后，发现 td 之间的边框宽度并不是 1px，而是比 1px 宽，大概为 1.5px</p>
<h3 id="4-webapp-软键盘弹起时问题"><a href="#4-webapp-软键盘弹起时问题" class="headerlink" title="4. webapp 软键盘弹起时问题"></a>4. webapp 软键盘弹起时问题</h3><p>其他参考链接 <a href="https://segmentfault.com/a/1190000010693229">https://segmentfault.com/a/1190000010693229</a><br><a href="https://github.com/ioing/IOING">https://github.com/ioing/IOING</a></p>
<p>页面放大:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;user-scalable=no&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>输入框被遮挡，看不见输入的内容: <code>document.activeElement.scrollIntoView()</code></p>
<p>页面自动上移，但收回软键盘时页面没有恢复原样少了一截</p>
<p>fixed 定位效果失效: <code>ios 弹出软键盘的时候, webview 的高度没有变化导致超出屏幕范围，并且不会触发 resize 事件</code></p>
<p><strong>scrollIntoView 与 scrollIntoViewIfNeeded</strong></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollIntoView">Element.scrollIntoView(option)</a> 方法让当前的元素滚动到浏览器窗口的可视区域内<br>option 如果为 true，元素的顶端将和其所在滚动区的可视区域的顶端对齐， 默认<br>option 如果为 false，元素的底端将和其所在滚动区的可视区域的底端对齐</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollIntoViewIfNeeded">element.scrollIntoViewIfNeeded()</a> 用来将不在浏览器窗口的可见区域内的元素滚动到浏览器窗口的可见区域。 如果该元素已经在浏览器窗口的可见区域内，则不会发生滚动</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> scrollHeight = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop || <span class="number">0</span></span><br><span class="line"><span class="keyword">var</span> clientHeight = <span class="built_in">document</span>.documentElement.clientHeight || <span class="built_in">document</span>.body.clientHeight</span><br><span class="line"><span class="keyword">var</span> innerHeight = <span class="built_in">window</span>.innerHeight</span><br><span class="line"><span class="comment">// 键盘弹起时 scrollHeight innerHeight 发生变化</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> @<span class="attr">focus</span>=<span class="string">&quot;input(1)&quot;</span> @<span class="attr">blur</span>=<span class="string">&quot;input(2)&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">input (num) &#123;</span><br><span class="line">  <span class="keyword">var</span> u = navigator.userAgent</span><br><span class="line">  <span class="keyword">if</span> (u.indexOf(<span class="string">&#x27;Android&#x27;</span>) &gt; -<span class="number">1</span> || u.indexOf(<span class="string">&#x27;Linux&#x27;</span>) &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">// 安卓手机通过 resize 事件监听键盘事件，因为部分手机手动关闭键盘时并不会失焦</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (u.indexOf(<span class="string">&#x27;iPhone&#x27;</span>) &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">// 苹果手机</span></span><br><span class="line">    <span class="keyword">if</span> (num === <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="comment">// 键盘弹起</span></span><br><span class="line">      <span class="built_in">document</span>.activeElement.scrollIntoView()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 键盘隐藏</span></span><br><span class="line">      <span class="keyword">var</span> scrollHeight = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop || <span class="number">0</span></span><br><span class="line">      <span class="comment">// window.scrollTo(0, Math.max(scrollHeight - 1, 0))</span></span><br><span class="line">      <span class="built_in">window</span>.scrollTo(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>附：安卓手机监听 resize</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">data () &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    originalHeight: <span class="built_in">document</span>.documentElement.clientHeight || <span class="built_in">document</span>.body.clientHeight,</span><br><span class="line">    resizeHeight: <span class="built_in">document</span>.documentElement.clientHeight || <span class="built_in">document</span>.body.clientHeight</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">watch: &#123;</span><br><span class="line">  resizeHeight (val) &#123;</span><br><span class="line">    <span class="keyword">var</span> u = navigator.userAgent</span><br><span class="line">    <span class="keyword">if</span> (u.indexOf(<span class="string">&#x27;Android&#x27;</span>) &gt; -<span class="number">1</span> || u.indexOf(<span class="string">&#x27;Linux&#x27;</span>) &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">      <span class="comment">// var detail = document.querySelector(&#x27;.detail&#x27;)</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.resizeHeight - <span class="number">0</span> &lt; <span class="built_in">this</span>.originalHeight - <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// detail.style.paddingBottom = &#x27;260px&#x27;</span></span><br><span class="line">        <span class="built_in">document</span>.activeElement.scrollIntoView(&#123; <span class="attr">behavior</span>: <span class="string">&#x27;auto&#x27;</span>, <span class="attr">block</span>: <span class="string">&#x27;start&#x27;</span> &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// detail.style.paddingBottom = &#x27;0&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">mounted () &#123;</span><br><span class="line">  <span class="keyword">const</span> that = <span class="built_in">this</span></span><br><span class="line">  <span class="built_in">window</span>.onresize = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">window</span>.resizeHeight = <span class="built_in">document</span>.documentElement.clientHeight || <span class="built_in">document</span>.body.clientHeight</span><br><span class="line">      that.resizeHeight = <span class="built_in">window</span>.resizeHeight</span><br><span class="line">    &#125;)()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-手机端页面文件上传兼容性问题"><a href="#5-手机端页面文件上传兼容性问题" class="headerlink" title="5. 手机端页面文件上传兼容性问题"></a>5. 手机端页面文件上传兼容性问题</h3><h3 id="6-移动端和-PC-端中的-hover-处理-移动端点击时会有-pc-端-hover-效果"><a href="#6-移动端和-PC-端中的-hover-处理-移动端点击时会有-pc-端-hover-效果" class="headerlink" title="6. 移动端和 PC 端中的 hover 处理 移动端点击时会有 pc 端 hover 效果"></a>6. 移动端和 PC 端中的 hover 处理 移动端点击时会有 pc 端 hover 效果</h3><p>百度一下给出的方式是注册 touchstart 事件</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">&#x27;touchstart&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)</span><br></pre></td></tr></table></figure>

<p>但经过测试并没有解决该问题</p>
<h3 id="7-移动端-touch-时，会触发-pc-端的-mouseenter-mouseleave-事件"><a href="#7-移动端-touch-时，会触发-pc-端的-mouseenter-mouseleave-事件" class="headerlink" title="7. 移动端 touch 时，会触发 pc 端的 mouseenter mouseleave 事件"></a>7. 移动端 touch 时，会触发 pc 端的 mouseenter mouseleave 事件</h3><p>在事件中通过判断屏幕宽度解决</p>
<h3 id="8-ios-a-链接-input-type-”file”-等在点击时会出现灰色（touch-高亮）"><a href="#8-ios-a-链接-input-type-”file”-等在点击时会出现灰色（touch-高亮）" class="headerlink" title="8. ios a 链接 input type=”file” 等在点击时会出现灰色（touch 高亮）"></a>8. ios a 链接 input type=”file” 等在点击时会出现灰色（touch 高亮）</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">-webkit-tap-highlight-<span class="attribute">color</span>: transparent;</span><br></pre></td></tr></table></figure>

<h3 id="9-禁用浏览器自动调整字体大小"><a href="#9-禁用浏览器自动调整字体大小" class="headerlink" title="9. 禁用浏览器自动调整字体大小"></a>9. 禁用浏览器自动调整字体大小</h3><p>移动端浏览器切换橫向模式时会调整字体大小（字体变大），解决方式:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  -webkit-text-size-adjust: none; <span class="comment">/* 或 100% */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>谷歌浏览器已不支持这个属性了，不能通过该方式实现小于 12px 的字体，可使用缩放（transform:scale(0.8)）来实现小于 12px 的字体</p>
</blockquote>
<h3 id="10-appearance-属性"><a href="#10-appearance-属性" class="headerlink" title="10. appearance 属性"></a>10. appearance 属性</h3><p>normal|icon|window|button|menu|field<br>所有主流浏览器都不支持 appearance 属性</p>
<p><code>-webkit-appearance: none;</code> 去除默认样式，使 ios 端和安卓端显示效果一样，但有一个问题，input 的 checkbox 和 radio 类型在安卓端可能无法正常显示</p>
<h3 id="11-禁止长按"><a href="#11-禁止长按" class="headerlink" title="11. 禁止长按"></a>11. 禁止长按</h3><p>在 iOS 上，当你触摸并按住触摸的目标，比如长按一个链接，浏览器将显示链接有关的系统默认菜单，<br>长按图像弹出选项存储或者拷贝图像，长按文字弹出选择文字菜单</p>
<p>可通过如下方式禁止这些行为</p>
<p>禁止长按图片保存</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">  -webkit-touch-callout: none;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none; // 像微信浏览器还是无法禁止，加上这行样式即可</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>禁用长按复制</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">user-select: none;</span><br></pre></td></tr></table></figure>

<p>禁止长按呼出菜单</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  -webkit-touch-callout: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12-点击穿透"><a href="#12-点击穿透" class="headerlink" title="12. 点击穿透"></a>12. 点击穿透</h3><p>假如页面上有两个元素 A 和 B。B 元素在 A 元素之上。我们在 B 元素的 touchstart 事件上注册了一个回调函数，该回调函数的作用是隐藏 B 元素。我们发现，当我们点击 B 元素，B 元素被隐藏了，随后，A 元素触发了 click 事件。<br>这是因为在移动端浏览器，事件执行的顺序是 touchstart &gt; touchend &gt; click。而 click 事件有 300ms 的延迟，当 touchstart 事件把 B 元素隐藏之后，隔了 300ms，浏览器触发了 click 事件，但是此时 B 元素不见了，所以该事件被派发到了 A 元素身上。如果 A 元素是一个链接，那此时页面就会意外地跳转。<br>跨页面点击穿透问题 点击页内按钮跳转至新页，然后发现新页面中对应位置元素的 click 事件被触发了</p>
<h3 id="13-移动端-video-播放时不弹出页面层"><a href="#13-移动端-video-播放时不弹出页面层" class="headerlink" title="13. 移动端 video 播放时不弹出页面层"></a>13. 移动端 video 播放时不弹出页面层</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">x5-playsinline</span>=<span class="string">&quot;&quot;</span> <span class="attr">playsinline</span>=<span class="string">&quot;&quot;</span> <span class="attr">webkit-playsinline</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="14-vue-移动端监听-scroll"><a href="#14-vue-移动端监听-scroll" class="headerlink" title="14. vue 移动端监听 scroll"></a>14. vue 移动端监听 scroll</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">mounted () &#123;</span><br><span class="line">  <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.list&#x27;</span>).addEventListener(<span class="string">&#x27;scroll&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.scroll = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.list&#x27;</span>).scrollTop</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="15-vue-移动端列表保存滚动位置"><a href="#15-vue-移动端列表保存滚动位置" class="headerlink" title="15. vue 移动端列表保存滚动位置"></a>15. vue 移动端列表保存滚动位置</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">beforeRouteEnter (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">  next(<span class="function">(<span class="params">vm</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// console.log(vm.$route.meta.scrollTop)</span></span><br><span class="line">    <span class="keyword">if</span> (vm.$route.meta.scrollTop) &#123;</span><br><span class="line">      <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.list&#x27;</span>).scrollTop = vm.$route.meta.scrollTop</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">beforeRouteLeave (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">  <span class="keyword">if</span> (to.name === <span class="string">&#x27;invite&#x27;</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.$store.commit(<span class="string">&#x27;removeIncludeComponent&#x27;</span>, <span class="string">&#x27;staff&#x27;</span>)</span><br><span class="line">    <span class="comment">// next()</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (to.name === <span class="string">&#x27;staffDetail&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> top = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.list&#x27;</span>).scrollTop</span><br><span class="line">    <span class="built_in">console</span>.log(top)</span><br><span class="line">    <span class="built_in">this</span>.$route.meta.scrollTop = top</span><br><span class="line">  &#125;</span><br><span class="line">  next()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="16-移动端去除-type-为-number-的箭头"><a href="#16-移动端去除-type-为-number-的箭头" class="headerlink" title="16. 移动端去除 type 为 number 的箭头"></a>16. 移动端去除 type 为 number 的箭头</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">input</span>::-webkit-outer-spin-button,</span><br><span class="line">input::-webkit-inner-spin-button &#123;</span><br><span class="line">  -webkit-appearance: none <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="17-设置状态栏的背景颜色（IOS）"><a href="#17-设置状态栏的背景颜色（IOS）" class="headerlink" title="17. 设置状态栏的背景颜色（IOS）"></a>17. 设置状态栏的背景颜色（IOS）</h3><p>设置状态栏的背景颜色，只有在”apple-mobile-web-app-capable” content=”yes”时生效</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> <span class="attr">content</span>=<span class="string">&quot;black-translucent&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>content 参数：</p>
<p>default ：状态栏背景是白色。<br>black ：状态栏背景是黑色。<br>black-translucent ：状态栏背景是半透明。 如果设置为 default 或 black ,网页内容从状态栏底部开始。<br>如果设置为 black-translucent ,网页内容充满整个屏幕，顶部会被状态栏遮挡。</p>
<h3 id="18-弹出数字键盘"><a href="#18-弹出数字键盘" class="headerlink" title="18. 弹出数字键盘"></a>18. 弹出数字键盘</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 有&quot;#&quot; &quot;*&quot;符号输入 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;tel&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 纯数字 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">pattern</span>=<span class="string">&quot;\d*&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="打开原生应用"><a href="#打开原生应用" class="headerlink" title="打开原生应用"></a>打开原生应用</h3><p>某些浏览器会禁用此协议，比如微信内部浏览器（除非开了白名单）</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;weixin://&quot;</span>&gt;</span>打开微信<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;alipays://&quot;</span>&gt;</span>打开支付宝<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;alipays://platformapi/startapp?saId=10000007&quot;</span>&gt;</span>打开支付宝的扫一扫功能<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;alipays://platformapi/startapp?appId=60000002&quot;</span>&gt;</span>打开支付宝的蚂蚁森林<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="解决-IOS下-active-伪类失效"><a href="#解决-IOS下-active-伪类失效" class="headerlink" title="解决 IOS下 active 伪类失效"></a>解决 IOS下 active 伪类失效</h3><p>给 body 注册一个空事件即可</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ontouchstart</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>最简单的 rem 实现</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">640px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="built_in">calc</span>(<span class="number">640px</span> / <span class="number">3.75</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">320px</span>) <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">640px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="built_in">calc</span>(<span class="number">100vw</span> / <span class="number">3.75</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="better-scroll-解决移动端滚动问题"><a href="#better-scroll-解决移动端滚动问题" class="headerlink" title="better-scroll 解决移动端滚动问题"></a>better-scroll 解决移动端滚动问题</h3><p><a href="https://github.com/ustbhuangyi/better-scroll/">https://github.com/ustbhuangyi/better-scroll/</a></p>
<h3 id="iphone-X-适配-安全区域-safe-area"><a href="#iphone-X-适配-安全区域-safe-area" class="headerlink" title="iphone X 适配 - 安全区域(safe area)"></a>iphone X 适配 - 安全区域(safe area)</h3><p>参考：<a href="https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/adaptivity-and-layout/">https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/adaptivity-and-layout/</a></p>
<p>在 iOS 11 中采用了 <code>viewport-fit</code> 的 meta 标签作为适配方案</p>
<p><code>viewport-fit</code> 取值</p>
<p>auto 默认：页面内容显示在 safe area 内<br>cover 页面内容充满屏幕，可以通过添加边距保证网页主要内容处于 safe area 中不被裁剪</p>
<p>iOS 11 的 webview 引入了 <code>constant</code>、<code>env</code> 来处理 <code>viewport-fit=cover</code> 属性，以及一组四个预定义的常量：<code>safe-area-inset-left</code>, <code>safe-area-inset-right</code>, <code>safe-area-inset-top</code> 和 <code>safe-area-inset-bottom</code>，分别表示 safe area 和可视窗口 viewport 顶部，右边，左边，底部的间距，可以用于设置 margin 和 padding 或者绝对定位时 left 和 top，这四个常量只有在 <code>viewport-fit=cover</code> 时有效</p>
<p>建议使用 <code>viewport-fit=cover</code> 因为会使用 auto 会造成屏幕四周出现白边</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*  top 为 0 的 fixed 定位的 heade */</span></span><br><span class="line"><span class="selector-tag">header</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="comment">/* ... */</span></span><br><span class="line">  <span class="comment">/* Status bar height on iOS 10 */</span></span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="comment">/* Status bar height on iOS 11.0 */</span></span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="built_in">constant</span>(safe-area-inset-top);</span><br><span class="line">  <span class="comment">/* Status bar height on iOS 11+ */</span></span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="built_in">env</span>(safe-area-inset-top);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="built_in">constant</span>(safe-area-inset-top); // 为导航栏+状态栏的高度 <span class="number">88px</span></span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="built_in">constant</span>(safe-area-inset-left); // 如果未竖屏时为<span class="number">0</span></span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="built_in">constant</span>(safe-area-inset-right); // 如果未竖屏时为<span class="number">0</span></span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="built_in">constant</span>(safe-area-inset-bottom); // 为底下圆弧的高度 <span class="number">34px</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>使用 Fiddler 向指定页面中注入 js 或修改页面内容, 本地文件/目录响应请求</title>
    <url>/433.html</url>
    <content><![CDATA[<h2 id="修改线上页面内容"><a href="#修改线上页面内容" class="headerlink" title="修改线上页面内容"></a>修改线上页面内容</h2><p>有时候调试网页，需要在第三方页面中注入点 js 或修改一些代码，来进行自己的测试，可以使用 FiddlerScript 修改页面内容</p>
<p>使用方法如下</p>
<p>打开 fiddler 选择右边的 <code>FiddlerScript</code> 选项卡, 或者从菜单 - <code>Rules(规则)</code> - <code>Customize Rules(自定义规则)</code> 打开</p>
<p>点击 <code>Go to(转到)</code> - 选择 <code>OnBeforeResponse</code> 添加如下代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">OnBeforeResponse</span>(<span class="params">oSession: Session</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="comment">// 判断如果是百度或是请求url中包含 baidu.com 的响应就在head前面添加一个 js 弹窗</span></span><br><span class="line">  <span class="keyword">if</span> (oSession.HostnameIs(<span class="string">&#x27;www.baidu.com&#x27;</span>) || oSession.uriContains(<span class="string">&#x27;baidu.com&#x27;</span>) &amp;&amp; oSession.oResponse.headers.ExistsAndContains(<span class="string">&#x27;Content-Type&#x27;</span>,<span class="string">&#x27;text/html&#x27;</span>))&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 解码响应内容</span></span><br><span class="line">        oSession.utilDecodeResponse()</span><br><span class="line">        <span class="comment">// 替换内容</span></span><br><span class="line">        oSession.utilReplaceInResponse(<span class="string">&#x27;&lt;/head&gt;&#x27;</span>,<span class="string">&#x27;&lt;script&gt;alert(&#x27;</span>哈哈<span class="string">&#x27;);&lt;/script&gt;&lt;/head&gt;&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果要替换的内容比较多或比较复杂，可以使用正则替换，替换方式如下</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 解码响应内容</span></span><br><span class="line">oSession.utilDecodeResponse()</span><br><span class="line"><span class="keyword">var</span> oBody = System.Text.Encoding.UTF8.GetString(oSession.responseBodyBytes)</span><br><span class="line"><span class="comment">// 使用正则进行替换</span></span><br><span class="line"><span class="keyword">var</span> oRegEx = <span class="regexp">/&lt;\/head&gt;/gi</span></span><br><span class="line">oBody = oBody.replace(oRegEx, <span class="string">&#x27;&lt;script&gt;alert(1);&lt;/script&gt;&lt;/head&gt;&#x27;</span>)</span><br><span class="line"><span class="comment">//设置新的响应内容</span></span><br><span class="line">oSession.utilSetResponseBody(oBody)</span><br></pre></td></tr></table></figure>

<p>最后点击左上角的 <code>Save Script(保存)</code> 即可</p>
<h2 id="线上请求映射到本地开发环境"><a href="#线上请求映射到本地开发环境" class="headerlink" title="线上请求映射到本地开发环境"></a>线上请求映射到本地开发环境</h2><ol>
<li>指定一个本地文件来代替线上请求的文件，编辑 FiddlerScript 添加如下代码</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">OnBeforeResponse</span>(<span class="params">oSession: Session</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 如果请求url中包含nav.js 就用 D:/nav.js 来响应</span></span><br><span class="line">  <span class="keyword">if</span> (oSession.uriContains(<span class="string">&#x27;nav.js&#x27;</span>)) &#123;</span><br><span class="line">    oSession[<span class="string">&#x27;x-replywithfile&#x27;</span>] =<span class="string">&#x27;D:/nav.js&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>除了编辑 FiddlerScript，也可以选择在右侧打开 <code>AutoResponder(自动回复器)</code> 选项卡 ，添加规则并<code>启用规则</code>，效果相同</p>
<ol start="2">
<li>本地目录响应</li>
</ol>
<p>原理同响应单个文件，只是封装了方法批量替换</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">OnBeforeResponse</span>(<span class="params">oSession: Session</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (m_Hide304s &amp;&amp; oSession.responseCode == <span class="number">304</span>) &#123;</span><br><span class="line">      oSession[<span class="string">&#x27;ui-hide&#x27;</span>] = <span class="string">&#x27;true&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> domain:<span class="built_in">String</span>=<span class="string">&#x27;http://online.com/static/&#x27;</span></span><br><span class="line">  <span class="comment">// 本地目录 注意使用 &#x27;/&#x27; 代替 &#x27;\&#x27;</span></span><br><span class="line">  <span class="keyword">var</span> folder:<span class="built_in">String</span>=<span class="string">&#x27;D:/static/&#x27;</span></span><br><span class="line">  AutoResponseFolder(oSession, domain, folder)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">AutoResponseFolder</span> (<span class="params">oSession: Session, domain:<span class="built_in">String</span>, folder:<span class="built_in">String</span></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 获取当前对话的完整URL</span></span><br><span class="line">  <span class="keyword">var</span> fullUrl:<span class="built_in">String</span> = oSession.fullUrl</span><br><span class="line">  <span class="keyword">if</span> (fullUrl.StartsWith(domain)) &#123;</span><br><span class="line">    <span class="keyword">var</span> localPath:<span class="built_in">String</span> = fullUrl.replace(domain, folder)</span><br><span class="line">    <span class="comment">// 设置延迟</span></span><br><span class="line">    <span class="comment">// oSession[&#x27;response-trickle-delay&#x27;] = 1000</span></span><br><span class="line">    oSession[<span class="string">&#x27;x-replywithfile&#x27;</span>] = localPath</span><br><span class="line">    <span class="comment">// FiddlerObject.log(localPath)</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>替换整个线上环境为本地开发环境</li>
</ol>
<p>在 <code>AutoResponder(自动回复器)</code> 选项卡中，<br>添加如下规则：<code>regex:(?insx)http://online.com\/(?&lt;name&gt;.+)$</code> =&gt; <code>http://localhost/$&#123;name&#125;</code></p>
<p>将所有 <code>http://online.com</code> 上的请求替换成本地 <code>localhost</code></p>
<ol start="4">
<li>使用 Stave 插件批量映射</li>
</ol>
<p>下载地址：<a href="https://code.google.com/archive/p/stave/downloads">https://code.google.com/archive/p/stave/downloads</a></p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>调试</tag>
        <tag>fiddler</tag>
      </tags>
  </entry>
  <entry>
    <title>pm2 - node 进程管理工具</title>
    <url>/1800.html</url>
    <content><![CDATA[<p>安装</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install pm2 -g</span><br></pre></td></tr></table></figure>

<p>使用</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ pm2 list <span class="comment"># 显示所有进程状态</span></span><br><span class="line"></span><br><span class="line">$ pm2 start &lt;js文件路径&gt;.js <span class="comment"># 同 node &lt;js文件路径&gt;.js</span></span><br><span class="line">$ pm2 start &lt;json描述文件路径&gt;.json</span><br><span class="line">$ pm2 start &lt;python文件路径&gt;.py --interpreter python</span><br><span class="line">$ pm2 start &lt;sh文件路径&gt;.sh --interpreter bash</span><br><span class="line">$ pm2 start ./node_modules/&lt;某模块名称&gt;/&lt;模块主文件路径&gt;.js</span><br><span class="line">$ pm2 start &lt;某种方式&gt; -- --param_name param_value</span><br><span class="line">$ pm2 start npm -- start <span class="comment"># 同 npm start</span></span><br><span class="line">$ pm2 start npm -- run &lt;scriptname&gt; <span class="comment"># 同 npm run &lt;scriptname&gt;</span></span><br><span class="line">$ pm2 start npm --watch --name &lt;taskname&gt; -- run &lt;scriptname&gt; <span class="comment"># --name 指定任务名 --watch监听文件变化</span></span><br><span class="line"></span><br><span class="line">$ pm2 start yarn -- start</span><br><span class="line">$ pm2 start yarn -- run &lt;scriptname&gt;</span><br><span class="line"></span><br><span class="line">$ pm2 stop     &lt;app_name|namespace|id|<span class="string">&#x27;all&#x27;</span>|json_conf&gt; <span class="comment"># 停止进程  all 停止所有进程</span></span><br><span class="line">$ pm2 restart  &lt;app_name|namespace|id|<span class="string">&#x27;all&#x27;</span>|json_conf&gt; <span class="comment"># 重启进程  all 重启所有进程</span></span><br><span class="line">$ pm2 delete   &lt;app_name|namespace|id|<span class="string">&#x27;all&#x27;</span>|json_conf&gt; <span class="comment"># 删除进程  all 删除所有进程</span></span><br><span class="line">$ pm2 reload all <span class="comment"># 重载所有进程</span></span><br><span class="line"></span><br><span class="line">$ pm2 describe &lt;id|app_name&gt; <span class="comment"># 进程详情</span></span><br><span class="line"></span><br><span class="line">$ pm2 monit <span class="comment"># 进程日志、详情</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新 PM2</span></span><br><span class="line"><span class="comment"># Install latest PM2 version</span></span><br><span class="line">$ npm install pm2@latest -g</span><br><span class="line"><span class="comment"># Save process list, exit old PM2 &amp; restore all processes</span></span><br><span class="line">$ pm2 update</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>nodejs</tag>
        <tag>pm2</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker 的安装和使用</title>
    <url>/420.html</url>
    <content><![CDATA[<h2 id="安装-dcoker"><a href="#安装-dcoker" class="headerlink" title="安装 dcoker"></a>安装 dcoker</h2><h3 id="ubuntu-16-04-LTS-安装-docker"><a href="#ubuntu-16-04-LTS-安装-docker" class="headerlink" title="ubuntu 16.04 (LTS) 安装 docker"></a>ubuntu 16.04 (LTS) 安装 docker</h3><p>参考官网安装方法 <a href="https://docs.docker.com/engine/install/ubuntu/">https://docs.docker.com/engine/install/ubuntu/</a></p>
<p>卸载旧版本</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo apt-get remove docker docker-engine docker.io containerd runc</span><br></pre></td></tr></table></figure>

<h4 id="镜像仓库方式安装"><a href="#镜像仓库方式安装" class="headerlink" title="镜像仓库方式安装"></a>镜像仓库方式安装</h4><h5 id="设置镜像仓库"><a href="#设置镜像仓库" class="headerlink" title="设置镜像仓库"></a>设置镜像仓库</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 更新 apt 软件包索引：</span></span><br><span class="line">$ sudo apt-get update</span><br><span class="line"><span class="comment"># 安装软件包，以允许 apt 通过 HTTPS 使用镜像仓库：</span></span><br><span class="line">$ sudo apt-get install \</span><br><span class="line">    apt-transport-https \</span><br><span class="line">    ca-certificates \</span><br><span class="line">    curl \</span><br><span class="line">    gnupg-agent \</span><br><span class="line">    software-properties-common</span><br><span class="line"><span class="comment"># 添加 Docker 的官方 GPG 密钥：</span></span><br><span class="line">$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br><span class="line"><span class="comment"># 验证密钥指纹是否为 9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88。</span></span><br><span class="line">$ sudo apt-key fingerprint 0EBFCD88</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置 stable 镜像仓库</span></span><br><span class="line"><span class="comment"># amd64:</span></span><br><span class="line">$ sudo add-apt-repository <span class="string">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu <span class="subst">$(lsb_release -cs)</span> stable&quot;</span></span><br></pre></td></tr></table></figure>

<p>使用国内源</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 更换国内软件源，推荐中国科技大学的源</span></span><br><span class="line">$ sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak</span><br><span class="line">$ sudo sed -i <span class="string">&#x27;s/archive.ubuntu.com/mirrors.ustc.edu.cn/g&#x27;</span> /etc/apt/sources.list</span><br><span class="line">$ sudo apt update</span><br><span class="line"><span class="comment"># 安装需要的包</span></span><br><span class="line">$ sudo apt install apt-transport-https ca-certificates software-properties-common curl</span><br><span class="line"><span class="comment"># 添加 GPG 密钥，并添加 Docker-ce 软件源，这里还是以中国科技大学的 Docker-ce 源为例</span></span><br><span class="line">$ curl -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/gpg | sudo apt-key add -</span><br><span class="line">$ sudo add-apt-repository <span class="string">&quot;deb [arch=amd64] https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu \</span></span><br><span class="line"><span class="string"><span class="subst">$(lsb_release -cs)</span> stable&quot;</span></span><br><span class="line"><span class="comment"># 添加成功后更新软件包缓存</span></span><br><span class="line">$ sudo apt update</span><br><span class="line"><span class="comment"># 安装 Docker-ce</span></span><br><span class="line">$ sudo apt install docker-ce</span><br></pre></td></tr></table></figure>

<h5 id="安装-DOCKER-CE"><a href="#安装-DOCKER-CE" class="headerlink" title="安装 DOCKER CE"></a>安装 DOCKER CE</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装指定版本</span></span><br><span class="line">$ apt-cache madison docker-ce</span><br><span class="line"></span><br><span class="line">  docker-ce | 5:18.09.1~3-0~ubuntu-bionic | https://download.docker.com/linux/ubuntu bionic/stable amd64 Packages</span><br><span class="line">  docker-ce | 5:18.09.0~3-0~ubuntu-bionic | https://download.docker.com/linux/ubuntu bionic/stable amd64 Packages</span><br><span class="line">  docker-ce | 18.06.0~ce~3-0~ubuntu | https://download.docker.com/linux/ubuntu bionic/stable amd64 Packages</span><br><span class="line">  docker-ce | 18.03.1~ce~3-0~ubuntu | https://download.docker.com/linux/ubuntu bionic/stable amd64 Packages</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">$ sudo apt-get install docker-ce=&lt;VERSION_STRING&gt; docker-ce-cli=&lt;VERSION_STRING&gt; containerd.io</span><br></pre></td></tr></table></figure>

<p>启动 docker daemon<br>否则会报错：docker: Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?.<br>See ‘docker run –help’.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo service docker start</span><br><span class="line"><span class="comment"># sudo systemctl enable docker</span></span><br><span class="line"><span class="comment"># sudo systemctl start docker</span></span><br></pre></td></tr></table></figure>

<p>验证是否正确安装</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo docker run hello-world</span><br></pre></td></tr></table></figure>

<p>此命令将下载一个测试镜像并在容器中运行它。容器运行时，它将输出一条参考消息并退出</p>
<h5 id="升级-docker-ce"><a href="#升级-docker-ce" class="headerlink" title="升级 docker ce"></a>升级 docker ce</h5><p>如需升级 Docker CE，首先运行 <code>sudo apt-get update</code>，然后按照顺序执行操作，并选择您要安装的新版本</p>
<h5 id="卸载-docker-ce"><a href="#卸载-docker-ce" class="headerlink" title="卸载 docker ce"></a>卸载 docker ce</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo apt-get purge docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure>

<p>主机上的镜像、容器、存储卷、或定制配置文件不会自动删除。如需删除所有镜像、容器和存储卷，请运行下列命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo rm -rf /var/lib/docker</span><br></pre></td></tr></table></figure>

<h5 id="将-docker-配置为在启动时启动"><a href="#将-docker-配置为在启动时启动" class="headerlink" title="将 docker 配置为在启动时启动"></a>将 docker 配置为在启动时启动</h5><h4 id="使用脚本安装"><a href="#使用脚本安装" class="headerlink" title="使用脚本安装"></a>使用脚本安装</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -sSL https://get.docker.com/ | sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将用户添加到docker组，可以用非root用户使用docker</span></span><br><span class="line">$ sudo usermod -aG docker &lt;your-user&gt;</span><br></pre></td></tr></table></figure>

<p>国内的服务器可以使用如下脚本加速安装，</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 阿里云的安装脚本</span></span><br><span class="line">curl -sSL http://acs-public-mirror.oss-cn-hangzhou.aliyuncs.com/docker-engine/internet | sh -</span><br><span class="line"><span class="comment"># DaoCloud 的安装脚本</span></span><br><span class="line">curl -sSL https://get.daocloud.io/docker | sh</span><br></pre></td></tr></table></figure>

<h3 id="centos-安装-docker"><a href="#centos-安装-docker" class="headerlink" title="centos 安装 docker"></a>centos 安装 docker</h3><p>参考官网安装方法 <a href="https://docs.docker.com/engine/install/centos/">https://docs.docker.com/engine/install/centos/</a></p>
<p>卸载旧版本(如果安装过旧版本的话)</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo yum remove docker \</span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-engine</span><br></pre></td></tr></table></figure>

<p>安装需要的软件包， yum-util 提供 yum-config-manager 功能，另外两个是 devicemapper 驱动依赖的</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo yum install -y yum-utils</span><br></pre></td></tr></table></figure>

<p>设置 yum 源</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>安装</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo yum install docker-ce</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以查看所有仓库中所有 docker 版本，并选择特定版本安装</span></span><br><span class="line">$ yum list docker-ce --showduplicates | sort -r</span><br><span class="line">$ sudo yum install docker-ce-&lt;VERSION_STRING&gt; docker-ce-cli-&lt;VERSION_STRING&gt; containerd.io</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动 Docker,设置开机启动,停止 Docker</span></span><br><span class="line">$ sudo systemctl start docker</span><br><span class="line">$ sudo systemctl <span class="built_in">enable</span> docker</span><br><span class="line">$ sudo systemctl stop docker</span><br></pre></td></tr></table></figure>

<p>卸载</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo yum remove docker-ce docker-ce-cli containerd.io</span><br><span class="line">$ sudo rm -rf /var/lib/docker</span><br></pre></td></tr></table></figure>

<p>常见问题</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 报错：Requires: container-selinux &gt;= 2:2.74</span></span><br><span class="line">You could try using --skip-broken to work around the problem</span><br><span class="line"></span><br><span class="line">$ wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">$ yum install epel-release   <span class="comment"># 阿里云上的 epel 源</span></span><br><span class="line">$ yum makecache</span><br><span class="line">$ yum install container-selinux</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Job for docker.service failed because the control process exited with error code. See &quot;systemctl status docker.service&quot; and &quot;journalctl -xe&quot; for details.</span></span><br><span class="line"></span><br><span class="line">卸载 docker 重新安装</span><br></pre></td></tr></table></figure>

<h2 id="使用-docker"><a href="#使用-docker" class="headerlink" title="使用 docker"></a>使用 docker</h2><h2 id="配置镜像加速"><a href="#配置镜像加速" class="headerlink" title="配置镜像加速"></a>配置镜像加速</h2><h3 id="修改-docker-源"><a href="#修改-docker-源" class="headerlink" title="修改 docker 源"></a>修改 docker 源</h3><p>修改配置文件 <code>/etc/docker/daemon.json</code>（Linux） 或者 <code>%programdata%\docker\config\daemon.json</code>（Window)</p>
<p>如果没有新建一个</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;registry-mirrors&quot;</span>: [<span class="string">&quot;https://registry.docker-cn.com&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>重启 docker</p>
<h3 id="安装镜像"><a href="#安装镜像" class="headerlink" title="安装镜像"></a>安装镜像</h3><p>安装 Ubuntu 镜像</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker search ubuntu <span class="comment"># 查找 Ubuntu 镜像</span></span><br><span class="line">docker pull ubuntu <span class="comment"># 安装 Ubuntu 镜像</span></span><br><span class="line">docker images <span class="comment">#查看 docker 镜像</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建并运行 docker 容器</span></span><br><span class="line">docker run -it -d --name ubuntu_test -p 8088:80 ubuntu</span><br><span class="line"><span class="comment"># --name 自定义容器名，-p 指定端口映射，前者为虚拟机端口，后者为容器端口,成功后返回 id</span></span><br><span class="line"><span class="comment"># 多个 -p 指定多个端口映射</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行 docker 容器  启动一个 bash 交互终端</span></span><br><span class="line">docker run -it 容器名:容器tag /bin/bash</span><br><span class="line"></span><br><span class="line">docker start container_id</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有启动的容器(查看所有容器加 -a)</span></span><br><span class="line">docker ps</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据 id 查看容器信息</span></span><br><span class="line">docker inspect id</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入docker(或者把容器id改为容器名，也可以进入)</span></span><br><span class="line">docker <span class="built_in">exec</span> -it 容器id或容器名 /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># OCI runtime exec failed: exec failed: container_linux.go:349: starting container process caused &quot;exec: \&quot;/bin/bash\&quot;: stat /bin/bash: no such file or directory&quot;: unknown</span></span><br><span class="line"><span class="comment"># 解决</span></span><br><span class="line"><span class="comment"># docker exec -it 容器id或容器名 /bin/sh</span></span><br><span class="line"><span class="comment"># docker exec -it 容器id或容器名 bash</span></span><br><span class="line"><span class="comment"># docker exec -it 容器id或容器名 sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 退出容器</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止容器</span></span><br><span class="line">docker stop id</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除容器</span></span><br><span class="line">docker rm 容器id</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除镜像</span></span><br><span class="line">docker rmi 删除镜像</span><br></pre></td></tr></table></figure>

<p>备份镜像</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 制作 docker 镜像  1.0 为版本号</span></span><br><span class="line">docker commit 98 my-ubuntu:1.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看镜像是否创建</span></span><br><span class="line">docker images</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存镜像到 docker 账号中</span></span><br><span class="line"><span class="comment"># 登录进 Docker 注册中心</span></span><br><span class="line">docker login</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送镜像</span></span><br><span class="line">docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]</span><br><span class="line">docker tag my-ubuntu:1.0 cuilongjin/my-ubuntu:1.0</span><br><span class="line">docker push cuilongjin/my-ubuntu:1.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打包镜像并查看</span></span><br><span class="line">docker save -o my-ubuntu.tar my-ubuntu:1.0</span><br></pre></td></tr></table></figure>

<p>恢复容器</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 从docker账号中拉取</span></span><br><span class="line">docker pull cuilongjin/my-ubuntu:1.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从本地</span></span><br><span class="line">docker load -i ~/my-ubuntu.tar</span><br><span class="line"></span><br><span class="line"><span class="comment"># docker images</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 用加载的镜像去运行Docker容器</span></span><br><span class="line">docker run -d -p 80:80 my-ubuntu</span><br></pre></td></tr></table></figure>

<p><strong>docker 给已存在的容器添加或修改端口映射</strong></p>
<p>方式 1：</p>
<p>提交一个运行中的容器为镜像</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker commit containerid foo/live</span><br></pre></td></tr></table></figure>

<p>运行镜像并添加端口</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -d -p 8000:80  foo/live /bin/bash</span><br></pre></td></tr></table></figure>

<p>方式 2：iptable 转发端口</p>
<p>将容器的 8000 端口映射到 docker 主机的 8001 端口</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ iptables -t nat -A  DOCKER -p tcp --dport 5001 -j DNAT --to-destination 45.77.150.20:8000</span><br></pre></td></tr></table></figure>

<h3 id="docker-容器使用问题"><a href="#docker-容器使用问题" class="headerlink" title="docker 容器使用问题"></a>docker 容器使用问题</h3><h4 id="Centos7-docker-容器报-docker-Failed-to-get-D-Bus-connection-错误"><a href="#Centos7-docker-容器报-docker-Failed-to-get-D-Bus-connection-错误" class="headerlink" title="Centos7 docker 容器报 docker Failed to get D-Bus connection 错误"></a>Centos7 docker 容器报 docker Failed to get D-Bus connection 错误</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ systemctl start nginx</span><br><span class="line">Failed to get D-Bus connection: Operation not permitted。</span><br></pre></td></tr></table></figure>

<p>原因是 dbus-daemon 没能启动</p>
<p>解决方法</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -it -d --name ubuntu_test -p 8088:80 ubuntu</span><br><span class="line">$ docker run --privileged -ti --name test1  centos /usr/sbin/init</span><br></pre></td></tr></table></figure>

<h4 id="ssh-链接-docker-容器"><a href="#ssh-链接-docker-容器" class="headerlink" title="ssh 链接 docker 容器"></a>ssh 链接 docker 容器</h4><p>进入容器</p>
<p>安装依赖</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum install passwd openssl openssh-server openssh-clients -y</span><br></pre></td></tr></table></figure>

<p>安装 service 命令：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum install initscripts -y</span><br></pre></td></tr></table></figure>

<p>修改密码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">passwd</span><br></pre></td></tr></table></figure>

<p>修改配置：</p>
<p>vi /etc/ssh/sshd_config</p>
<p>PubkeyAuthentication yes #启用公钥私钥配对认证方式<br>AuthorizedKeysFile .ssh/authorized_keys #公钥文件路径</p>
<p>PermitRootLogin yes #root 能使用 ssh 登录</p>
<p>重启 ssh 服务，并设置开机启动：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">service sshd restartchkconfig sshd on</span><br></pre></td></tr></table></figure>

<p>如果无法执行，可试着执行：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">systemctl start sshd.service systemctl enable sshd.service</span><br><span class="line"></span><br><span class="line">service sshd restart</span><br></pre></td></tr></table></figure>

<h4 id="运行-docker-exec-it-容器-bin-bash-出现如下错误"><a href="#运行-docker-exec-it-容器-bin-bash-出现如下错误" class="headerlink" title="运行 docker exec -it 容器 /bin/bash 出现如下错误"></a>运行 docker exec -it 容器 /bin/bash 出现如下错误</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">OCI runtime exec failed: exec failed: container_linux.go:346: starting container process caused &quot;exec: \&quot;&#x2F;bin&#x2F;bash\&quot;: stat &#x2F;bin&#x2F;bash: no such file or directory&quot;: unknown</span><br></pre></td></tr></table></figure>

<p>解决方式：尝试使用如下命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo docker <span class="built_in">exec</span> -it 容器 /bin/sh</span><br><span class="line">sudo docker <span class="built_in">exec</span> -it 容器 bash</span><br></pre></td></tr></table></figure>

<h2 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker-compose"></a>docker-compose</h2><p>如果你想要通过 docker-compose 统一管理你的 Docker container，这里也可以安装一下</p>
<p>官方文档：<a href="https://docs.docker.com/compose/install/">https://docs.docker.com/compose/install/</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo curl -L https://github.com/docker/compose/releases/download/1.26.2/run.sh &gt; /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line">sudo chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span><br></pre></td></tr></table></figure>

<p>使用 pip 安装</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install docker-compose</span><br></pre></td></tr></table></figure>

<p>运行一下 <code>docker-compose version</code> 来检测一下是否成功</p>
<h3 id="创建配置文件"><a href="#创建配置文件" class="headerlink" title="创建配置文件"></a>创建配置文件</h3><p>创建一个名为 <code>docker-compose.yml</code> 的配置文件</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">v2ray1:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">v2fly/v2fly-core</span> <span class="comment"># 镜像名称</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">v2ray</span> <span class="comment"># 容器名称</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">v2ray</span> <span class="string">-config=/etc/v2ray/config.json</span> <span class="comment"># 覆盖容器启动后默认执行的命令</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="comment"># HOST:CONTAINER</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;44222:44222&#x27;</span> <span class="comment"># 端口</span></span><br><span class="line">      <span class="comment">#- &quot;127.0.0.1:8889:8889&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="comment"># HOST:CONTAINER</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./config:/etc/v2ray</span> <span class="comment"># 目录</span></span><br><span class="line">      <span class="comment">#- /etc/v2ray/v2ray.crt:/etc/v2ray/v2ray.crt</span></span><br><span class="line">      <span class="comment">#- /etc/v2ray/v2ray.key:/etc/v2ray/v2ray.key</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">v2ray2:</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./dir</span> <span class="comment"># context 选项可以是 Dockerfile 的文件路径，也可以是到链接到 git 仓库的 url</span></span><br><span class="line">      <span class="attr">dockerfile:</span> <span class="string">path/of/Dockerfile</span> <span class="comment"># 使用此 dockerfile 文件来构建，必须指定构建路径</span></span><br></pre></td></tr></table></figure>

<h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><p>以下命令需要在 docker-compose.yml 所在目录下执行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker-compose up -d <span class="comment"># 部署 v2ray</span></span><br><span class="line">docker-compose start v2ray <span class="comment"># 启动 v2ray</span></span><br><span class="line">docker-compose stop v2ray <span class="comment"># 停止 v2ray</span></span><br><span class="line">docker-compose restart v2ray <span class="comment"># 重启 v2ray</span></span><br><span class="line">docker stop v2ray &amp;&amp; docker rm v2ray <span class="comment"># 删除 v2ray</span></span><br><span class="line">docker-compose pull &amp;&amp; docker-compose up -d <span class="comment"># 更新 v2ray</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux screen 命令——多重视窗管理程序</title>
    <url>/1887.html</url>
    <content><![CDATA[<p>Screen 是一个全屏窗口管理器。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt install screen</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">yum install screen</span><br></pre></td></tr></table></figure>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">screen -S &lt;name&gt; <span class="comment"># 新建一个作业名为 name 的窗口，(标注 screen 窗口)</span></span><br><span class="line">screen -ls <span class="comment"># 显示目前所有的 screen 作业</span></span><br><span class="line">screen -d &lt;name&gt; <span class="comment"># 将指定的 screen 作业离线</span></span><br><span class="line">screen -h &lt;行数&gt; <span class="comment"># 指定视窗的缓冲区行数</span></span><br><span class="line">screen -r &lt;name&gt; <span class="comment"># 恢复指定的 screen 作业</span></span><br><span class="line">screen -d -r &lt;name&gt; <span class="comment"># 离线当前作业并回到 name 这个作业</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 当需要运行脚本、执行程序时，在命令前添加 screen 即可</span></span><br><span class="line"></span><br><span class="line">ctrl + A + D <span class="comment"># 将当前 screen detach 到后台</span></span><br><span class="line"></span><br><span class="line">screen -X -S &lt;name&gt; quit <span class="comment"># 删除指定 screen</span></span><br></pre></td></tr></table></figure>

<p>进入一个 screen session 后，可能你开始跑一些程序，这时不能在命令行输入任何东西，可以使用快捷键 ctrl + A + D 将当前 screen detach 到后台</p>
<h3 id="使用问题"><a href="#使用问题" class="headerlink" title="使用问题"></a>使用问题</h3><p>问题：linux 在进入 screen 模式下之后，发现是无法在终端使用鼠标滚轮进行上下翻页拉动的，无法查看上面的终端输出内容了</p>
<p>解决办法</p>
<p>进入回滚模式（可以操作鼠标滚轮上下翻页）：先按<code>Ctrl+a</code>键，然后释放，然后再按[键即可进入翻页模式。<br>切换回之前模式：<code>Ctrl+c</code></p>
<h2 id="ubuntu-下源码编译安装-screen-最新版"><a href="#ubuntu-下源码编译安装-screen-最新版" class="headerlink" title="ubuntu 下源码编译安装 screen 最新版"></a>ubuntu 下源码编译安装 screen 最新版</h2><p>下载地址：<a href="http://ftp.gnu.org/gnu/screen/">http://ftp.gnu.org/gnu/screen/</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 下载</span></span><br><span class="line">wget -c https://ftp.gnu.org/gnu/screen/screen-4.8.0.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar -xzvf screen-4.8.0.tar.gz</span><br><span class="line"><span class="built_in">cd</span> screen-4.8.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装依赖</span></span><br><span class="line">apt install gcc g++ make make-guile</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译</span></span><br><span class="line">mkdir build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line">../configure</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装</span></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line">验证一下</span><br><span class="line">screen -h</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>问题：</p>
<p>如果报错：<code>checking whether the C compiler works... no</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装 g++</span></span><br><span class="line">apt install g++</span><br></pre></td></tr></table></figure>

<p>如果报错，信息如：<code>configure: error: !!! no tgetent - no screen</code></p>
<p>需要先安装 ncurses 下载地址 <a href="https://ftp.gnu.org/gnu/ncurses">https://ftp.gnu.org/gnu/ncurses</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 下载依赖包ncurses</span></span><br><span class="line">wget -c https://ftp.gnu.org/gnu/ncurses/ncurses-6.2.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压安装</span></span><br><span class="line">tar -xzvf ncurses-6.2.tar.gz</span><br><span class="line"><span class="built_in">cd</span> ncurses-6.2</span><br><span class="line">mkdir build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line">../configure</span><br><span class="line">make &amp;&amp; sudo make install</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>screen</tag>
      </tags>
  </entry>
  <entry>
    <title>speedtest 测速脚本</title>
    <url>/230.html</url>
    <content><![CDATA[<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://raw.github.com/sivel/speedtest-cli/master/speedtest.py</span><br><span class="line"><span class="comment"># 添加权限</span></span><br><span class="line">chmod a+rx speedtest.py</span><br><span class="line"><span class="comment"># 简单的使用方法</span></span><br><span class="line">python speedtest.py</span><br><span class="line"><span class="comment"># 生成一张图片，并分享给其他人</span></span><br><span class="line">python speedtest.py --share</span><br><span class="line"><span class="comment"># 在默认情况下，SpeedTest是选择离测试机最近的一个节点进行测试的，如果你想要自定义测试到某个地区的上传/下载速率，那首先列出目前可用的SpeedTest服务器：</span></span><br><span class="line">python speedtest.py --list</span><br><span class="line"><span class="comment"># 此时会列出所有的服务器（按照距离远近进行排列）</span></span><br><span class="line"><span class="comment"># 如果想一点一点的列出服务器，请输入：</span></span><br><span class="line">python speedtest.py --list|more</span><br><span class="line"><span class="comment"># 如果你想列出指定地区的测试节点，可以使用</span></span><br><span class="line">python speedtest.py --list | grep China</span><br><span class="line">python speedtest.py --server 22991</span><br><span class="line"><span class="comment"># 如果是要生成分享的图片，那就加上 share</span></span><br><span class="line">python speedtest.py --server 11599 --share</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>使用wget或者curl下载文件</title>
    <url>/1947.html</url>
    <content><![CDATA[<h2 id="下载-github-release-文件"><a href="#下载-github-release-文件" class="headerlink" title="下载 github release 文件"></a>下载 github release 文件</h2><p>下载编译好的软件包（需要有编译的包）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># wget</span></span><br><span class="line">wget --no-check-certificate --content-disposition https://github.com/ctripcorp/apollo/releases/download/v1.5.1/apollo-adminservice-1.5.1-github.zip</span><br><span class="line"></span><br><span class="line"><span class="comment"># curl</span></span><br><span class="line">curl -LJO https://github.com/ctripcorp/apollo/releases/download/v1.5.1/apollo-adminservice-1.5.1-github.zip</span><br></pre></td></tr></table></figure>

<p>下载源码压缩包</p>
<p>wget -q <a href="https://github.com/git/git/archive/v$%7BGIT_VERSION%7D.tar.gz">https://github.com/git/git/archive/v${GIT_VERSION}.tar.gz</a></p>
<p>下载仓库中的单个文件</p>
<p>点击文件进去，右上角有个raw，点击进去后地址栏就是该文件的下载地址<br>直接 <code>wget 地址</code> 即可下载</p>
]]></content>
      <categories>
        <category>uncategorized</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>解决阿里云服务器无法访问 raw.githubusercontent.com</title>
    <url>/1912.html</url>
    <content><![CDATA[<p>原因是因为dns污染，没法找到正确的ip，可以通过修改host解决</p>
<p>访问<a href="https://githubusercontent.com.ipaddress.com/raw.githubusercontent.com">这里</a>获取正确的ip地址</p>
<p>打开服务器的 hosts 文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/hosts</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加这一行内容</span></span><br><span class="line">获取到的ip raw.githubusercontent.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者直接添加下面这一行</span></span><br><span class="line">199.232.68.133 raw.githubusercontent.com</span><br></pre></td></tr></table></figure>

<p>保存退出，ping 一下试试</p>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
  </entry>
  <entry>
    <title>配置 web 服务器</title>
    <url>/415.html</url>
    <content><![CDATA[<h1 id="Apache-安装"><a href="#Apache-安装" class="headerlink" title="Apache 安装"></a>Apache 安装</h1><h2 id="centos"><a href="#centos" class="headerlink" title="centos"></a>centos</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># yum install httpd  （centos之下，Apache的名字叫httpd，和Apache的主程序 httpd.exe 同名）</span></span><br></pre></td></tr></table></figure>

<h3 id="打开并测试-Apache"><a href="#打开并测试-Apache" class="headerlink" title="打开并测试 Apache"></a>打开并测试 Apache</h3><ul>
<li><p>先确保，云服务器的 80 端口，是允许外网访问的。</p>
</li>
<li><p>开启 Apache 服务</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">service httpd start</span><br><span class="line"><span class="comment"># 查看状态</span></span><br><span class="line">service httpd status</span><br></pre></td></tr></table></figure>

<ul>
<li>测试 Apache 是否正常运行</li>
</ul>
<p>浏览器输入： 外网 IP:80，如果能正常显示 Apache 的内置主页，则说明 Apache 服务已正常开启。</p>
<h3 id="修改-Apache-的配置文件"><a href="#修改-Apache-的配置文件" class="headerlink" title="修改 Apache 的配置文件"></a>修改 Apache 的配置文件</h3><p>主配置文件 <code>/etc/httpd/conf/httpd.conf</code></p>
<p>修改如下键值兼容 php</p>
<blockquote>
<p>键：DirectoryIndex<br>值：index.html index.php</p>
</blockquote>
<p><strong>默认站点主目录</strong>：/var/www/html/</p>
<p><a href="https://www.cnblogs.com/smbin/p/6946210.html">https://www.cnblogs.com/smbin/p/6946210.html</a></p>
<h3 id="安装证书"><a href="#安装证书" class="headerlink" title="安装证书"></a><strong>安装证书</strong></h3><ol>
<li>安装 ssl 模块</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># yum install mod_ssl -y</span><br></pre></td></tr></table></figure>

<p>Ps：安装完成后，会在/etc/httpd/conf.d/下生成一个 ssl.conf 配置文件。</p>
<p>建一个目录用来放 ssl 证书文件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># mkdir &#x2F;etc&#x2F;httpd&#x2F;ssl&#x2F;</span><br></pre></td></tr></table></figure>

<p>编辑 ssl 配置文件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># vim &#x2F;etc&#x2F;httpd&#x2F;conf.d&#x2F;ssl.conf</span><br></pre></td></tr></table></figure>

<p>修改以下几行，去掉前面的“#”注释；</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;VirtualHost&gt;</span><br><span class="line">#网页文件路径</span><br><span class="line">DocumentRoot &quot;&#x2F;var&#x2F;www&#x2F;html&quot;</span><br><span class="line">#改为自己的域名</span><br><span class="line">ServerName cuilongjin.top:80</span><br><span class="line">#启用SSL功能</span><br><span class="line">SSLEngine on</span><br><span class="line">#填写证书文件路径</span><br><span class="line">SSLCertificateFile   &#x2F;etc&#x2F;httpd&#x2F;ssl&#x2F;cert-1541656252121_cuilongjin.top.key</span><br><span class="line">#填写私钥文件路径</span><br><span class="line">SSLCertificateKeyFile   &#x2F;etc&#x2F;httpd&#x2F;ssl&#x2F;cert-1541656252121_cuilongjin.top.key</span><br><span class="line">#填写证书链文件路径</span><br><span class="line">SSLCertificateChainFile   &#x2F;etc&#x2F;httpd&#x2F;ssl&#x2F;cert-1541656252121_cuilongjin.top_chain.crt</span><br><span class="line">&lt;&#x2F;VirtualHost&gt;</span><br></pre></td></tr></table></figure>

<p>重启服务器</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># service httpd restart</span><br></pre></td></tr></table></figure>

<h1 id="Nginx-的安装与配置"><a href="#Nginx-的安装与配置" class="headerlink" title="Nginx 的安装与配置"></a>Nginx 的安装与配置</h1><h2 id="CentOS-下安装："><a href="#CentOS-下安装：" class="headerlink" title="CentOS 下安装："></a><strong>CentOS</strong> 下安装：</h2><p>通过安装包安装</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装所需环境</span></span><br><span class="line">yum install gcc-c++</span><br><span class="line">yum install -y pcre pcre-devel</span><br><span class="line">yum install -y zlib zlib-devel</span><br><span class="line">yum install -y openssl openssl-devel</span><br><span class="line"></span><br><span class="line"><span class="comment"># 官网下载 nginx https://nginx.org/</span></span><br><span class="line">yum install wget</span><br><span class="line">wget -c https://nginx.org/download/nginx-1.17.4.tar.gz</span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar -zxvf nginx-1.17.4.tar.gz</span><br><span class="line"><span class="built_in">cd</span> nginx-1.17.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置</span></span><br><span class="line">./configure</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译安装</span></span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找安装路径：</span></span><br><span class="line">whereis nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动、停止 重启 nginx</span></span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/nginx/sbin/</span><br><span class="line">./nginx <span class="comment"># 启动</span></span><br><span class="line">./nginx -s stop <span class="comment"># 此方式相当于先查出nginx进程id再使用kill命令强制杀掉进程</span></span><br><span class="line">./nginx -s quit <span class="comment"># 此方式停止步骤是待nginx进程处理任务完毕进行停止</span></span><br><span class="line">./nginx -s quit &amp;&amp; ./nginx <span class="comment"># 重启 nginx</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新加载配置文件</span></span><br><span class="line"><span class="comment"># 配置文件 nginx.conf 修改后，要想让配置生效需要重启 nginx，使用 -s reload 不用先停止 nginx 再启动即可将配置信息在 nginx 中生效，如下：</span></span><br><span class="line">./nginx -s reload</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询 nginx 进程</span></span><br><span class="line">ps aux|grep nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开机自启动</span></span><br><span class="line">在 rc.local 增加启动代码</span><br><span class="line">vi /etc/rc.local</span><br><span class="line"><span class="comment"># 增加一行 /usr/local/nginx/sbin/nginx</span></span><br><span class="line"><span class="comment"># 设置执行权限</span></span><br><span class="line">chmod 755 rc.local</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加 nginx 为系统服务</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>centos 下，yum 源不提供 nginx 的安装，可以通过切换 yum 源的方法获取安装</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum -y install nginx</span><br></pre></td></tr></table></figure>

<p>主站点目录/usr/share/nginx/html</p>
<p><strong>配置 Nginx：</strong></p>
<p>Nginx 的配置文件默认位置为：<code>/etc/nginx/nginx.conf</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen       80; #监听80端口，接收http请求</span><br><span class="line">  server_name  localhost; #就是网站地址</span><br><span class="line">  root         &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html; # 准备存放代码工程的路径</span><br><span class="line">  #路由到网站根目录www.example.com时候的处理</span><br><span class="line">  location &#x2F; &#123;</span><br><span class="line">    index index.php index.html index.htm;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  #当请求网站下php文件的时候，反向代理到php-fpm</span><br><span class="line">  location ~ \.php$ &#123;</span><br><span class="line">    include fastcgi.conf; #加载nginx的fastcgi模块</span><br><span class="line">    fastcgi_intercept_errors on;</span><br><span class="line">    fastcgi_pass   127.0.0.1:9000; #nginx fastcgi进程监听的IP地址和端口</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>自定义 Nginx 站点配置文件存放目录</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;</span><br></pre></td></tr></table></figure>

<p>默认站点目录/usr/share/nginx/html</p>
<p>安装 php</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum install php php-fpm</span><br></pre></td></tr></table></figure>

<p>配置 php.ini</p>
<p>/etc/php.ini</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cgi.fix_pathinfo&#x3D;1</span><br></pre></td></tr></table></figure>

<p>配置 php-fpm</p>
<p>/etc/php-fpm.d/<a href="http://www.conf/">www.conf</a></p>
<p>user = nginx</p>
<p>group = nginx</p>
<p>chkconfig php-fpm on #设置 php-fpm 自启动</p>
<p>service nginx restart #重新启动 nginx</p>
<p>service php-fpm start #启动 php-fpm</p>
<p>sudo iptables -I INPUT -p tcp -m tcp –dport 80 -j ACCEPT</p>
<p>sudo iptables -I INPUT -p tcp -m tcp –dport 443 -j ACCEPT</p>
<p>iptables -L -n</p>
<p>/usr/sbin/nginx</p>
<p>查询 nginx 进程</p>
<p>ps -ef | grep nginx</p>
<p>nginx 配置</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#</span><br><span class="line"># HTTPS server configuration</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  listen       443 ssl http2 default_server;</span><br><span class="line">  listen       [::]:443 ssl;</span><br><span class="line">  server_name  _;</span><br><span class="line">  root         &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;</span><br><span class="line"></span><br><span class="line">  ssl_certificate ssl&#x2F;cuilongjin.top.pem;</span><br><span class="line">  ssl_certificate_key ssl&#x2F;cuilongjin.top.key;</span><br><span class="line">  ssl_session_cache shared:SSL:1m;</span><br><span class="line">  ssl_session_timeout  10m;</span><br><span class="line">  ssl_ciphers HIGH:!aNULL:!MD5;</span><br><span class="line">  ssl_prefer_server_ciphers on;</span><br><span class="line"></span><br><span class="line">  # Load configuration files for the default server block.</span><br><span class="line">  include &#x2F;etc&#x2F;nginx&#x2F;default.d&#x2F;*.conf;</span><br><span class="line"></span><br><span class="line">  location &#x2F; &#123;</span><br><span class="line">  &#125;</span><br><span class="line">    location ~ \.php$ &#123;</span><br><span class="line">      root html;</span><br><span class="line">      fastcgi_pass 127.0.0.1:9000;</span><br><span class="line">      fastcgi_index index.php;</span><br><span class="line">      fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line">      include fastcgi_params;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  error_page 404 &#x2F;404.html;</span><br><span class="line">    location &#x3D; &#x2F;40x.html &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  error_page 500 502 503 504 &#x2F;50x.html;</span><br><span class="line">    location &#x3D; &#x2F;50x.html &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#</span><br><span class="line"># The default server</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  listen       80 default_server;</span><br><span class="line">  listen       [::]:80 default_server;</span><br><span class="line">  server_name  _;</span><br><span class="line">  root         &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;</span><br><span class="line"></span><br><span class="line">  # Load configuration files for the default server block.</span><br><span class="line">  include &#x2F;etc&#x2F;nginx&#x2F;default.d&#x2F;*.conf;</span><br><span class="line"></span><br><span class="line">  location &#x2F; &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  location ~ \.php$ &#123;</span><br><span class="line">    root html;</span><br><span class="line">    fastcgi_pass 127.0.0.1:9000;</span><br><span class="line">    fastcgi_index index.php;</span><br><span class="line">    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line">    include fastcgi_params;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  error_page 404 &#x2F;404.html;</span><br><span class="line">    location &#x3D; &#x2F;40x.html &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  error_page 500 502 503 504 &#x2F;50x.html;</span><br><span class="line">    location &#x3D; &#x2F;50x.html &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ubuntu-下安装"><a href="#ubuntu-下安装" class="headerlink" title="ubuntu 下安装"></a>ubuntu 下安装</h2><p>安装 nginx</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install nginx</span><br></pre></td></tr></table></figure>

<p>Ubuntu 安装之后的文件结构大致为：</p>
<ul>
<li>所有的配置文件都在/etc/nginx 下，并且每个虚拟主机已经安排在了/etc/nginx/sites-available 下</li>
<li>程序文件在/usr/sbin/nginx</li>
<li>日志文件在/var/log/nginx</li>
<li>并已经在/etc/init.d/下创建了启动脚本 nginx</li>
<li>服务器配置文件在/etc/nginx/sites-available/</li>
<li>默认主站点目录 /var/www/html，（有的可能在/var/www）, 请参考/etc/nginx/sites-available 里的配置</li>
</ul>
<p>安装 php</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt-get install php</span><br></pre></td></tr></table></figure>

<p>配置 php.ini /etc/php/7.2/cli/</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cgi.fix_pathinfo&#x3D;1</span><br></pre></td></tr></table></figure>

<p>配置 php-fpm</p>
<p>启动 nginx</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/etc/init.d/nginx restart</span><br><span class="line">/etc/init.d/nginx stop</span><br><span class="line">/etc/init.d/nginx start</span><br></pre></td></tr></table></figure>

<p>删除 nginx</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get --purge remove nginx</span><br><span class="line"><span class="comment"># –-purge 包括配置文件</span></span><br></pre></td></tr></table></figure>

<h2 id="arch-下安装-nginx"><a href="#arch-下安装-nginx" class="headerlink" title="arch 下安装 nginx"></a>arch 下安装 nginx</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pacman -S nginx</span><br></pre></td></tr></table></figure>

<p>启动 Nginx 服务,运行以下命令:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># systemctl start nginx</span><br></pre></td></tr></table></figure>

<h3 id="要-Nginx-服务开机时启动-运行以下命令"><a href="#要-Nginx-服务开机时启动-运行以下命令" class="headerlink" title="要 Nginx 服务开机时启动,运行以下命令:"></a>要 Nginx 服务开机时启动,运行以下命令:</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># systemctl enable nginx</span><br></pre></td></tr></table></figure>

<p>默认页面是:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;index.html</span><br></pre></td></tr></table></figure>

<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>你可以修改在 <strong>/etc/nginx/</strong> 目录中的文件来更改配置 <strong>./etc/nginx/nginx.conf</strong> 是主配置文件</p>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>git 版本控制系统</title>
    <url>/421.html</url>
    <content><![CDATA[<h2 id="为什么要有版本控制系统"><a href="#为什么要有版本控制系统" class="headerlink" title="为什么要有版本控制系统"></a>为什么要有版本控制系统</h2><p>在开发过程中，经常需要对一个文件进行修改甚至删除，但是我们又希望能够保存这个文件的历史记录，如果通过备份，那么管理起来会非常的复杂</p>
<h2 id="什么是版本控制系统"><a href="#什么是版本控制系统" class="headerlink" title="什么是版本控制系统"></a>什么是版本控制系统</h2><blockquote>
<p>版本控制系统（Version Control System）:是一种记录一个或若干文件内容变化，以便将来查阅特定版本修订情况的系统。</p>
</blockquote>
<p>版本控制系统不仅可以应用于软件源代码的文本文件，而且可以对任何类型的文件进行版本控制。</p>
<h2 id="版本控制系统的分类"><a href="#版本控制系统的分类" class="headerlink" title="版本控制系统的分类"></a>版本控制系统的分类</h2><p>参考文章：<a href="https://git-scm.com/book/zh/v1/%E8%B5%B7%E6%AD%A5-%E5%85%B3%E4%BA%8E%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6">关于版本控制的介绍</a></p>
<h3 id="本地版本控制系统"><a href="#本地版本控制系统" class="headerlink" title="本地版本控制系统"></a>本地版本控制系统</h3><p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102202248.png"></p>
<p>本地版本控制系统就是在一台机器上，记录版本的不同变化，保证内容不会丢失</p>
<ol>
<li>如果多人开发，每个人都在不同的系统和电脑上开发，没办法协同工作。</li>
</ol>
<h3 id="集中式版本控制系統"><a href="#集中式版本控制系統" class="headerlink" title="集中式版本控制系統"></a>集中式版本控制系統</h3><p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102202303.png"></p>
<p><code>svn</code> 是集中式的版本控制系统，集中式版本控制系统都有一个单一的集中管理的服务器（中央服务器），保存所有文件的修订版本，而协同工作的人们都通过客户端连到这台服务器，取出最新的文件或者提交更新。</p>
<ol>
<li>需要一个中央服务器来管理代码的的版本和备份</li>
<li>所有的用户电脑都是从中央服务器获取代码或者是将本地的代码提交到中央服务器</li>
<li>依赖与网络环境，如果连不上中央服务器，就无法提交和获取代码。</li>
</ol>
<h3 id="分布式版本控制系统"><a href="#分布式版本控制系统" class="headerlink" title="分布式版本控制系统"></a>分布式版本控制系统</h3><p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102202325.png"></p>
<p><code>git</code> 是分布式的版本控制系统。分布式版本控制系统的客户端并不只提取最新版本的文件快照，而是把代码仓库完整地镜像下来。这么一来，任何一处协同工作用的服务器发生故障，事后都可以用任何一个镜像出来的本地仓库恢复。因为每一次的提取操作，实际上都是一次对代码仓库的完整备份</p>
<ol>
<li>需要一台服务器作为代码仓库</li>
<li>每个用户电脑都是一个服务器（代码仓库），并且和代码仓库是镜像的，用户修改和获取代码都是提交到自己的服务器当中。</li>
<li>不需要网络就可以进行工作。</li>
<li>当连接网络时，用户可以选择将自己的服务器与代码仓库进行同步。</li>
</ol>
<h1 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h1><hr>
<p><a href="https://git-scm.com/book/zh/v2">git 官方中文文档</a></p>
<h2 id="Git-核心概念"><a href="#Git-核心概念" class="headerlink" title="Git 核心概念"></a>Git 核心概念</h2><ul>
<li><p>**<code>WorkSpace</code>**：<br>工作区，即从仓库中 checkout 出来的，需要通过 Git 进行版本控制的目录和文件，可以简单的理解为在电脑里真实看到的文件</p>
</li>
<li><p>**<code>Stage(Index)</code>**：<br>暂存区，或者叫做待提交更新区；在提交进入 Repository 之前，可以把所有的更新放在暂存区, 用 <code>git add</code> 的文件都在这里</p>
</li>
<li><p>**<code>Repository(Remote/Local)</code>**：<br>仓库，一个存放在远端/本地的版本库，用 <code>git commit</code> 提交的文件就到 Local Repository,用 <code>git push</code> 提交的文件就到 Remote Repository</p>
</li>
<li><p>**<code>.git</code>**：存放 Git 管理信息的目录，初始化仓库的时候会自动创建</p>
</li>
</ul>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102202341.jpeg"></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102202402.png"></p>
<h2 id="Git-初始设置"><a href="#Git-初始设置" class="headerlink" title="Git 初始设置"></a>Git 初始设置</h2><h3 id="设置用户名和邮箱"><a href="#设置用户名和邮箱" class="headerlink" title="设置用户名和邮箱"></a>设置用户名和邮箱</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 用户名使用英文</span></span><br><span class="line"><span class="comment"># --global 全局设置</span></span><br><span class="line">git config --global user.name <span class="string">&#x27;your_name&#x27;</span></span><br><span class="line">git config --global user.email <span class="string">&#x27;your_email@example.com&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看账号信息</span></span><br><span class="line">git config --list</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重置信息</span></span><br><span class="line">git config --<span class="built_in">unset</span> -- user.name</span><br></pre></td></tr></table></figure>

<p>全局设置会在 <code>~/.gitconfig</code> 中以如下形式输出设置文件，可以直接编辑这个文件来修改设置</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[user]</span><br><span class="line">name = your_name</span><br><span class="line">email = your_email@example.com</span><br></pre></td></tr></table></figure>

<p>每个仓库的 Git 配置文件都放在 <code>.git/config</code> 文件中，可以直接修改此文件<br><code>$ cat .git/config</code> 查看配置文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解决中文变成数字加百分号，也可以在设置中将编码修改为 utf-8</span></span><br><span class="line">git config --global core.quotepath <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h3 id="设置-SSH-Key"><a href="#设置-SSH-Key" class="headerlink" title="设置 SSH Key"></a>设置 SSH Key</h3><p>GitHub 上连接已有仓库时的认证，是通过使用了 SSH 的公开密钥认证方式进行的。现在我们来创建公开密钥认证所需的 SSH Key，并将其添加至 GitHub</p>
<p>运行下面的命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;your_email@example.com&quot;</span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key(/Users/your_user_directory/.ssh/id_rsa):按回车键</span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):输入密码</span><br><span class="line">Enter same passphrase again:再次输入密码</span><br></pre></td></tr></table></figure>

<p>输入密码后会出现以下结果</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Your identification has been saved <span class="keyword">in</span> /Users/your_user_directory/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /Users/your_user_directory/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:SHA256:hbn1zPihlVDe/Y2FvzzZU8l+AOSlVRlaOmro/nTQDGg cui3155@gmail.com(fingerprint值+your_email@example.com)</span><br><span class="line">The key<span class="string">&#x27;s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 2048]----+</span></span><br><span class="line"><span class="string">|            o o++|</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="string">|        . . .   +|</span></span><br><span class="line"><span class="string">|         ...     |</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br></pre></td></tr></table></figure>

<p><code>id_rsa</code> 文件是私有密钥，<code>id_rsa.pub</code> 是公开密钥</p>
<h3 id="添加公开密钥"><a href="#添加公开密钥" class="headerlink" title="添加公开密钥"></a>添加公开密钥</h3><p>在 GitHub 中添加公开密钥，今后就可以用私有密钥进行认证了<br>点击右上角的账户设定按钮（Account Settings），选择 SSH Keys 菜单。点击 AddSSH Key 之后，在 Title 中输入适当的密钥名称。Key 部分请粘贴 id_rsa.pub 文件里的内容</p>
<p><code>id_rsa.pub</code> 的内容可以用如下方法查看</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cat ~/.ssh/id_rsa.pub</span><br><span class="line">ssh-rsa公开密钥的内容your_email@example.com</span><br></pre></td></tr></table></figure>

<p>完成以上设置后，就可以用手中的私人密钥与 GitHub 进行认证和通信了</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh -T git@github.com</span><br><span class="line">The authenticity of host <span class="string">&#x27;github.com (192.30.255.113)&#x27;</span> can<span class="string">&#x27;t be established.</span></span><br><span class="line"><span class="string">RSA key fingerprint is (fingerprint值).</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no)?输入yes</span></span><br><span class="line"><span class="string">Warning: Permanently added &#x27;</span>github.com,192.30.255.113<span class="string">&#x27; (RSA) to the list of known hosts.</span></span><br><span class="line"><span class="string">Enter passphrase for key &#x27;</span>/c/Users/C.DESKTOP-3S4APJ4/.ssh/id_rsa<span class="string">&#x27;:</span></span><br></pre></td></tr></table></figure>

<p>出现如下结果即为成功</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Hi cuilongjin! You<span class="string">&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span></span><br></pre></td></tr></table></figure>

<h3 id="提高命令输出的可读性"><a href="#提高命令输出的可读性" class="headerlink" title="提高命令输出的可读性"></a>提高命令输出的可读性</h3><p>将 <code>color.ui</code> 设置为 <code>auto</code> 可以让命令的输出拥有更高的可读性</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global color.ui <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p><code>~/.gitconfig</code> 中会增加下面一行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[color]</span><br><span class="line">ui = <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>这样一来，各种命令的输出就会变得更容易分辨。</p>
<h3 id="文件名大小写问题"><a href="#文件名大小写问题" class="headerlink" title="文件名大小写问题"></a>文件名大小写问题</h3><p>git 默认对文件名大小写不敏感</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 设置 git 大小写敏感</span></span><br><span class="line">git config core.ignorecase <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者先删除文件在添加进去</span></span><br></pre></td></tr></table></figure>

<h3 id="设置头像"><a href="#设置头像" class="headerlink" title="设置头像"></a>设置头像</h3><p>通过 Gravatar 服务</p>
<h3 id="配置别名"><a href="#配置别名" class="headerlink" title="配置别名"></a>配置别名</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 配置 st 别名表示 status</span></span><br><span class="line">git config --global alias.st status</span><br><span class="line"></span><br><span class="line">git config --global alias.co checkout</span><br><span class="line">git config --global alias.ci commit</span><br><span class="line">git config --global alias.br branch</span><br><span class="line">git config --global alias.unstage <span class="string">&#x27;reset HEAD&#x27;</span></span><br><span class="line">git config --global alias.last <span class="string">&#x27;log -1&#x27;</span></span><br><span class="line"></span><br><span class="line">git config --global alias.lg <span class="string">&quot;log --color --graph --pretty=format:&#x27;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#x27; --abbrev-commit&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="搭建-Git-服务器"><a href="#搭建-Git-服务器" class="headerlink" title="搭建 Git 服务器"></a>搭建 Git 服务器</h3><p><a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/00137583770360579bc4b458f044ce7afed3df579123eca000">搭建 Git 服务器</a></p>
<h3 id="配置多用户"><a href="#配置多用户" class="headerlink" title="配置多用户"></a>配置多用户</h3><p>根据不同邮箱生成对应的私钥公钥</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C email</span><br></pre></td></tr></table></figure>

<p>将公钥上传到对应的用户账号中</p>
<p>在 <code>.ssh</code> 目录创建 <code>config</code> 文件，配置私钥对应的服务器，每个账号单独配置一个 Host，每个 Host 要取一个别名，每个 Host 主要配置 HostName 和 IdentityFile 两个属性即可</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line"># 配置用户1</span><br><span class="line">Host github</span><br><span class="line">HostName github.com</span><br><span class="line">IdentityFile ~/.ssh/id_rsa_github</span><br><span class="line">User cuilongjin</span><br><span class="line"></span><br><span class="line"># 配置用户2</span><br><span class="line">Host gitlab</span><br><span class="line">HostName git.gitlab.net</span><br><span class="line">IdentityFile ~/.ssh/id_rsa_gitlab</span><br><span class="line">User cuilongjin</span><br></pre></td></tr></table></figure>

<p>Host 的名字可以任意，不过这个会影响 git 相关命令，例如：</p>
<p>Host mygithub 这样定义的话，命令如下</p>
<p><code>git clone git@mygithub:cuilongjin/cuilongjin.git</code></p>
<p>即 git@ 后面紧跟的名字改为 mygithub</p>
<p>执行 <code>ssh -T git@github</code>、<code>ssh -T git@gitlab</code> 测试是否成功</p>
<p>配置局部 git 用户名和邮箱，如果没有局部配置，默认用全局配置</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config user.name <span class="string">&quot;Your name&quot;</span></span><br><span class="line">git config user.email <span class="string">&quot;your_email@gmail.com&quot;</span></span><br></pre></td></tr></table></figure>

<p>或者直接找到 <code>.git/config</code> 文件，添加</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[user]</span><br><span class="line">name = Your name</span><br><span class="line">email = your_email@gmail.com</span><br></pre></td></tr></table></figure>

<h2 id="Git-基本操作"><a href="#Git-基本操作" class="headerlink" title="Git 基本操作"></a>Git 基本操作</h2><h3 id="git-init"><a href="#git-init" class="headerlink" title="git init"></a>git init</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir project</span><br><span class="line"><span class="built_in">cd</span> project</span><br><span class="line">git init</span><br></pre></td></tr></table></figure>

<p>如果初始化成功，执行了 <code>git init</code> 命令的目录下就会生成 <code>.git</code> 目录。这个 <code>.git</code> 目录里存储着管理当前目录内容所需的仓库数据</p>
<blockquote>
<p><code>mkdir project</code> 命令创建 project 空文件夹</p>
</blockquote>
<ul>
<li><code>pwd</code> 命令用于显示当前目录</li>
</ul>
<h3 id="git-add"><a href="#git-add" class="headerlink" title="git add"></a>git add</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将指定文件夹添加到暂存区（目录中的所有文件，包括新增/修改/删除的文件）--not-all 忽略删除的</span></span><br><span class="line">git add 目录名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将 指定文件 添加到暂存区 （文件可以是新增/修改/删除的）</span></span><br><span class="line">git add README.md</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将当前目录下所有的js文件添加到暂存区（文件可以是新增/修改的，不包括删除的）</span></span><br><span class="line">git add *.js</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加当前目录及子目录下件 （文件可以是新增/修改/删除的）</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加当前仓库下所有的文件 （文件可以是新增/修改/删除的）</span></span><br><span class="line">git add -A</span><br><span class="line">git add --all</span><br></pre></td></tr></table></figure>

<h3 id="git-commit"><a href="#git-commit" class="headerlink" title="git commit"></a>git commit</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将文件从暂存区提交到仓库</span></span><br><span class="line">git commit -m <span class="string">&#x27;提交说明&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果是一个已经暂存过的文件，可以快速提交，如果是未追踪的文件，那么命令将不生效。</span></span><br><span class="line">git commit -a -m <span class="string">&#x27;提交说明&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改最近的一次提交说明， 如果提交说明不小心输错了，可以使用这个命令</span></span><br><span class="line">git commit --amend -m <span class="string">&#x27;提交说明&#x27;</span></span><br></pre></td></tr></table></figure>

<p>-m 参数后的 <code>&#39;First commit&#39;</code> 称作提交信息，是对这个提交的概述,如果想要记述得更加详细，请不加 <code>-m</code> ，直接执行 <code>git commit</code> 命令，执行后编辑器就会启动。<br>在编辑器中记述提交信息的格式如下:<br>​ 第一行：用一行文字简述提交的更改内容<br>​ 第二行：空行<br>​ 第三行以后：记述更改的原因和详细内容</p>
<h3 id="git-status"><a href="#git-status" class="headerlink" title="git status"></a>git status</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 建立 README.md 文件作为管理对象</span></span><br><span class="line">touch README.md</span><br><span class="line">git status</span><br><span class="line"></span><br><span class="line"><span class="comment"># 简化日志输出格式</span></span><br><span class="line">git stauts -s (short)</span><br></pre></td></tr></table></figure>

<p><code>git status</code> 命令可以让我们时刻掌握仓库当前的状态，但不能看到具体修改了什么内容，需要用 <code>git diff</code> 这个命令来查看具体修改内容。</p>
<h3 id="git-diff"><a href="#git-diff" class="headerlink" title="git diff"></a>git diff</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看当前工作树和最新add之间（暂存区）的差别（difference）</span></span><br><span class="line">git diff</span><br><span class="line"><span class="comment"># 如果尚未用 `git add` 命令向暂存区添加任何东西，则程序只会显示工作树与最新提交状态之间的差别</span></span><br><span class="line"><span class="comment"># “+”号标出的是新添加的行，被删除的行则用“-”号标出</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看README.md文件的修改</span></span><br><span class="line">git diff -- README.md</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看工作树和最新提交的差别</span></span><br><span class="line">git diff HEAD</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看暂存区与仓库区的不同</span></span><br><span class="line">git diff --cached</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看两个版本之间的不同</span></span><br><span class="line">git diff c265262 de4845b</span><br></pre></td></tr></table></figure>

<blockquote>
<p>HEAD 是指向当前分支中最新一次提交的指针</p>
</blockquote>
<h3 id="git-log"><a href="#git-log" class="headerlink" title="git log"></a>git log</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 显示当前版本之前的提交信息</span></span><br><span class="line">git <span class="built_in">log</span></span><br><span class="line">commit 9f129bae19b2c82fb4e98cde5890e52a6c546922</span><br><span class="line">Author: cuilongjin &lt;cuilongjin@gmail.com&gt;</span><br><span class="line">Date: Sun Oct 8 22:08:39 2017 +0900</span><br><span class="line">    First commit</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只显示提交信息的第一行</span></span><br><span class="line">git <span class="built_in">log</span> --pretty=oneline <span class="comment"># 完整显示版本号</span></span><br><span class="line">git <span class="built_in">log</span> --oneline  <span class="comment"># 只显示前7位版本号</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示指定目录、文件的日志</span></span><br><span class="line">git <span class="built_in">log</span> 目录名或文件名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示文件的改动（q键退出命令）</span></span><br><span class="line">git <span class="built_in">log</span> -p 文件名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示所有曾经提交的版本（包括被删除的）</span></span><br><span class="line">git reflog</span><br><span class="line"></span><br><span class="line"><span class="comment"># 图表形式显示</span></span><br><span class="line">git <span class="built_in">log</span> --graph --pretty=<span class="string">&#x27;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an %ae&gt;%Creset&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a>git reset</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git reset -h		<span class="string">&#x27;查看帮助&#x27;</span></span><br><span class="line">--mixed				<span class="string">&#x27;reset HEAD and index&#x27;</span>(默认)</span><br><span class="line">--soft				<span class="string">&#x27;reset only HEAD&#x27;</span></span><br><span class="line">--hard  			<span class="string">&#x27;reset HEAD, index and working tree&#x27;</span></span><br><span class="line">--merge 			<span class="string">&#x27;reset HEAD, index and working tree&#x27;</span></span><br><span class="line">--keep 				<span class="string">&#x27;reset HEAD but keep local changes&#x27;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li> <code>HEAD</code> 表示当前版本，上一个版本就是 <code>HEAD^</code> ，上上一个版本就是 <code>HEAD^^</code> ，当然往上 100 个版本写 100 个^比较容易数不过来，所以写成 <code>HEAD~100</code></li>
<li> 使用 <code>commit_id</code> 回退 , <code>git reflog</code> 用来记录你的每一次命令和 <code>commit_id</code></li>
</ol>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git reset --soft HEAD^</span><br><span class="line">git reset --hard commit_id</span><br><span class="line">git reset HEAD [file]</span><br></pre></td></tr></table></figure>

<h3 id="git-checkout-–file"><a href="#git-checkout-–file" class="headerlink" title="git checkout –file"></a>git checkout –file</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout -- README.md</span><br></pre></td></tr></table></figure>

<p>把 README.md 文件在 <code>工作区的修改全部撤销</code> ，<strong>用版本库里的版本替换工作区的版本</strong></p>
<p>这里有两种情况：</p>
<ol>
<li><p>一种是 README.md 自修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态</p>
</li>
<li><p>一种是 README.md 已经添加到暂存区后，又作了修改，现在撤销修改就回到添加到暂存区后的状态</p>
</li>
</ol>
<p>总之，就是让这个文件回到最近一次 git commit 或 git add 时的状态，可用于<strong>撤销文件修改或恢复误删文件</strong></p>
<h3 id="git-remote"><a href="#git-remote" class="headerlink" title="git remote"></a>git remote</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git remote add origin git@github.com:cuilongjin/git_test.git</span><br></pre></td></tr></table></figure>

<p>添加后，远程库的名字就是 origin，这是 Git 默认的叫法，也可以改成别的，但是 origin 这个名字一看就知道是远程库</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看远程库的信息</span></span><br><span class="line">git remote -v</span><br><span class="line">origin  git@github.com:cuilongjin/git_test.git (fetch)</span><br><span class="line">origin  git@github.com:cuilongjin/git_test.git (push)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看指定远程库的详细信息</span></span><br><span class="line">git remote show &lt;远程库&gt;</span><br></pre></td></tr></table></figure>

<p>上面显示了可以抓取和推送的 origin 的地址。如果没有推送权限，就看不到 push 的地址</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 删除已有的 GitHub 远程库</span></span><br><span class="line">git remote rm origin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改远程库名称</span></span><br><span class="line">git remote rename &lt;原远程库名&gt; &lt;新远程库名&gt;</span><br></pre></td></tr></table></figure>

<h3 id="git-pull"><a href="#git-pull" class="headerlink" title="git pull"></a>git pull</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 获取远程仓库的更新，并且与本地的分支进行合并</span></span><br><span class="line">git pull &lt;远程仓库名&gt; &lt;远程分支名&gt;:&lt;本地分支名&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果远程分支是与当前分支合并，则冒号后面的部分可以省略</span></span><br><span class="line">git pull origin next 等同于 git fetch origin &amp;&amp; git merge origin/next</span><br><span class="line"></span><br><span class="line"><span class="comment"># 远程主机删除了某个分支，默认情况下，git pull 不会在拉取远程分支的时候，删除对应的本地分支</span></span><br><span class="line"><span class="comment"># 加上参数 -p 就会在本地删除远程已经删除的分支</span></span><br><span class="line">$ git pull -p</span><br><span class="line"><span class="comment"># 等同于下面的命令</span></span><br><span class="line">$ git fetch --prune origin</span><br><span class="line">$ git fetch -p</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并 pull 两个不同的项目出现 fatal: refusing to merge unrelated histories</span></span><br><span class="line">git pull origin master ----allow-unrelated-histories</span><br></pre></td></tr></table></figure>

<h3 id="git-push"><a href="#git-push" class="headerlink" title="git push"></a>git push</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git push &lt;远程仓库名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一次推送分支时，加上 -u 参数，git 会把本地分支和远程分支关联起来，在以后的推送或者拉取时就可以简化命令</span></span><br><span class="line">git push -u origin master</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果没有本地分支，表示删除远程分支</span></span><br><span class="line">git push origin :master</span><br><span class="line"><span class="comment"># 等同于</span></span><br><span class="line">$ git push origin --delete master</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以强制覆盖的方式推送修改后的 repo （重新上传 repo）（不指定分支即所有分支）</span></span><br><span class="line">git push origin --force --all</span><br></pre></td></tr></table></figure>

<blockquote>
<p>remote: error: GH007: Your push would publish a private email address.<br>解决方法——<a href="http://github.com/settings/emails">http://github.com/settings/emails</a> 把 Keep my email address private 这一项去掉勾选即可。</p>
</blockquote>
<p>如果推送失败，则因为远程分支比你的本地更新，需要先用 <code>git pull</code> 拉取远程的新提交</p>
<h3 id="git-clone"><a href="#git-clone" class="headerlink" title="git clone"></a>git clone</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:cuilongjin/仓库名.git [指定文件夹]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认远程主机为 origin ， -o 指定主机名</span></span><br><span class="line">git <span class="built_in">clone</span> --o origin1 git@github.com:cuilongjin/仓库名.git</span><br></pre></td></tr></table></figure>

<p>Git 支持多种协议，包括 https，但通过 ssh 支持的原生 git 协议速度最快</p>
<p>从远程库 clone 时，默认情况下，只能看到本地的 master 分支<br>要在 dev 分支上开发，就必须创建远程 origin 的 dev 分支到本地，于是用这个命令创建本地 dev 分支</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout -b dev origin/dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定本地 dev 分支与远程 origin/dev 分支的链接</span></span><br><span class="line">git branch --set-upstream dev origin/dev</span><br></pre></td></tr></table></figure>

<p>克隆指定分支</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># git clone -b|--branch 分支名或tag名 仓库地址</span></span><br></pre></td></tr></table></figure>

<h3 id="git-fetch"><a href="#git-fetch" class="headerlink" title="git fetch"></a>git fetch</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将某个远程仓库的更新，全部取回本地。默认取回所有分支（branch）的更新</span></span><br><span class="line">git fetch &lt;远程仓库&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 取回特定分支的更新</span></span><br><span class="line">git fetch &lt;远程仓库&gt; &lt;分支名&gt;</span><br></pre></td></tr></table></figure>

<p>git fetch 和 git pull 区别</p>
<ul>
<li><p>git pull 获取远程仓库的更新，并且与本地的分支进行合并</p>
</li>
<li><p>git fetch 所取回的更新，在本地主机上要用 “远程仓库/分支名” 的形式读取，即不会与本地分支合并</p>
</li>
</ul>
<h3 id="git-忽视文件"><a href="#git-忽视文件" class="headerlink" title="git 忽视文件"></a>git 忽视文件</h3><p>在仓库中，有些文件是不想被 git 管理的，比如数据的配置密码、写代码的一些思路等。git 可以通过配置从而达到忽视掉一些文件，这样这些文件就可以不用提交了</p>
<p>忽略文件的原则是：</p>
<ul>
<li>忽略操作系统自动生成的文件，比如缩略图等</li>
<li>忽略编译生成的中间文件、可执行文件等，也就是如果一个文件是通过另一个文件自动生成的，那自动生成的文件就没必要放进版本库，比如 Java 编译产生的 .class 文件</li>
<li>忽略你自己的带有敏感信息的配置文件，比如存放口令的配置文件</li>
</ul>
<p>在仓库的根目录创建一个 <code>.gitignore</code> 的文件，文件名是固定的</p>
<p>将不需要被 git 管理的文件路径添加到 <code>.gitignore</code> 中，把 <code>.gitignore</code> 也提交到 Git，Git 就会自动忽略这些文件</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line"># 忽视 index.txt 文件</span><br><span class="line">index.txt</span><br><span class="line"></span><br><span class="line"># 忽视 .gitignore 文件</span><br><span class="line">.gitignore</span><br><span class="line"></span><br><span class="line"># 忽视 css 下的 index.css 文件</span><br><span class="line">css/index.css</span><br><span class="line"></span><br><span class="line"># 忽视 css 下的所有的 css 文件</span><br><span class="line">css/*.css</span><br><span class="line"></span><br><span class="line"># 忽视 css 下的所有文件</span><br><span class="line">css/*.*</span><br><span class="line"></span><br><span class="line"># 忽视 css 文件夹</span><br><span class="line">css</span><br></pre></td></tr></table></figure>

<p>GitHub 已经为我们准备了各种配置文件 <a href="https://github.com/github/gitignore">https://github.com/github/gitignore</a></p>
<p>强制添加被 .gitignore 忽略的文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 强制添加被.gitignore忽略的文件</span></span><br><span class="line">git add -f &lt;file&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查哪个规则忽略了此文件，以便修订规则</span></span><br><span class="line">git check-ignore -v &lt;file&gt;</span><br><span class="line">.gitignore:x:xxx.xx    xxxxxx</span><br></pre></td></tr></table></figure>

<h3 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h3><p>在 git 中，分支实质上仅仅是一个指针，每次代码提交后，这个分支指针就会向后移动，保证一直指向最后一次提交的的版本。git 中使用 HEAD 指向当前分支</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch</span><br><span class="line">* master</span><br><span class="line"></span><br><span class="line">-r 参数查看远程分支</span><br><span class="line">-a 查看所有分支(远程分支会用红色表示出来)</span><br></pre></td></tr></table></figure>

<p><code>*</code>（星号）表示当前所在的分支</p>
<ul>
<li>git checkout -b 创建、切换分支</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 以 branch 为基础创建名为 feature-A 的分支</span></span><br><span class="line">git checkout -b feature-A &lt;branch&gt;</span><br></pre></td></tr></table></figure>

<p>连续执行下面两条命令也能收到同样效果</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建 feature-A 分支</span></span><br><span class="line">git branch feature-A</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将当前分支切换为 feature-A 分支</span></span><br><span class="line">git checkout feature-A</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换回上一个分支</span></span><br><span class="line">git checkout -</span><br></pre></td></tr></table></figure>

<ul>
<li>git branch -d 删除分支</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 删除本地 feature-A 分支</span></span><br><span class="line">git branch -d feature-A</span><br><span class="line"></span><br><span class="line"><span class="comment"># 强行删除本地 feature-A 分支</span></span><br><span class="line">git branch -D feature-A</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除远程 feature-A 分支</span></span><br><span class="line">git push origin :feature-A</span><br><span class="line">或 git push origin --delete feature-A</span><br></pre></td></tr></table></figure>

<ul>
<li>git branch -m 重命名分支</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 重命名本地分支</span></span><br><span class="line">git branch -m old_branch new_branch</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重命名远程分支</span></span><br><span class="line"><span class="comment"># 重命名本地分支 -&gt; 删除远程分支 -&gt; 推送到远程分支</span></span><br></pre></td></tr></table></figure>

<h3 id="git-merge"><a href="#git-merge" class="headerlink" title="git merge"></a>git merge</h3><p>合并分支</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将 feature-A 合并到 master 上</span></span><br><span class="line"><span class="comment"># 首先切换到 master 分支，然后执行</span></span><br><span class="line">git merge [--squash] [--no-ff] -m <span class="string">&quot;描述&quot;</span> feature-A</span><br><span class="line">--squash <span class="comment"># 只是将&lt;branch&gt;中的修改内容迁移过来，而不保留其中的commit历史</span></span><br><span class="line">--no-ff <span class="comment"># 创建合并提交，为了在历史记录中明确记录下本次分支合并</span></span><br></pre></td></tr></table></figure>

<h3 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 把当前工作现场“储藏”起来</span></span><br><span class="line">git stash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看存储的工作现场</span></span><br><span class="line">git stash list</span><br></pre></td></tr></table></figure>

<p>恢复工作现场</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 恢复工作现场，stash 内容并不删除</span></span><br><span class="line">git stash apply</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除 stash 内容</span></span><br><span class="line">git stash drop</span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复的同时把 stash 内容也删了</span></span><br><span class="line">git stash pop</span><br></pre></td></tr></table></figure>

<p>恢复指定的 stash，用命令：<code>git stash apply stash@&#123;0&#125;</code></p>
<p><a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/001375840038939c291467cc7c747b1810aab2fb8863508000">廖雪峰 Git 教程创建与合并分支</a></p>
<p><a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/0013758410364457b9e3d821f4244beb0fd69c61a185ae0000">廖雪峰 Git 教程分支管理策略</a></p>
<p><a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/00137602359178794d966923e5c4134bc8bf98dfb03aea3000">廖雪峰 Git 教程 Bug 分支</a></p>
<h3 id="git-tag"><a href="#git-tag" class="headerlink" title="git tag"></a>git tag</h3><ul>
<li>创建标签</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 首先切换到需要打标签的分支上</span></span><br><span class="line"><span class="comment"># 默认标签是打在最新提交的 commit 上的</span></span><br><span class="line">git tag v1.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对指定某一次提交打标签</span></span><br><span class="line">git tag v1.0 &lt;commit id&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建带有说明的标签，用 -a 指定标签名，-m 指定说明文字</span></span><br><span class="line">git tag -a v1.0 -m <span class="string">&quot;version1.0 released&quot;</span> &lt;commit id&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过 -s 用私钥签名一个标签(需配置gpg密钥对)</span></span><br><span class="line">git tag -s v1.0 -m <span class="string">&quot;signed version1.0 released&quot;</span> &lt;commit id&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>查看标签</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看所有标签</span></span><br><span class="line">git tag</span><br><span class="line">v1.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有标签信息</span></span><br><span class="line">git show</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看 v1.0 标签信息</span></span><br><span class="line">git show v1.0</span><br><span class="line">commit id:xxx</span><br><span class="line">Author:xxx</span><br><span class="line">Date:xxx</span><br></pre></td></tr></table></figure>

<ul>
<li>推送标签到远程</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 推送 v1.0 标签到远程</span></span><br><span class="line">git push origin v1.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送全部尚未推送的本地标签到远程</span></span><br><span class="line">git push origin --tags</span><br></pre></td></tr></table></figure>

<ul>
<li>删除标签</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 删除本地标签 v1.0</span></span><br><span class="line">git tag -d v1.0</span><br><span class="line"><span class="comment"># 删除远程标签 v1.0</span></span><br><span class="line">git push origin :refs/tags/v1.0</span><br><span class="line">或 git push origin --delete tag v1.0</span><br></pre></td></tr></table></figure>

<h2 id="git-仓库分离"><a href="#git-仓库分离" class="headerlink" title="git 仓库分离"></a>git 仓库分离</h2><p>将一个 git 仓库里的一部分文件转出作为一个独立的仓库并保留提交记录 commit log</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 这就是那个大仓库 big-project</span><br><span class="line">git clone git@github.com:**&#x2F;big-project.git</span><br><span class="line">cd big-project</span><br><span class="line"># 把所有 &#96;source&#x2F;page&#96; 目录下的相关提交整理为一个新的分支 page</span><br><span class="line">git subtree split -P source&#x2F;page -b page</span><br><span class="line"># 另建一个新目录并初始化为 git 仓库</span><br><span class="line">mkdir ..&#x2F;page</span><br><span class="line">cd ..&#x2F;page</span><br><span class="line">git init</span><br><span class="line"># 拉取旧仓库的 page 分支到当前的 master 分支</span><br><span class="line">git pull ..&#x2F;big-project page</span><br></pre></td></tr></table></figure>

<h2 id="快速克隆大项目"><a href="#快速克隆大项目" class="headerlink" title="快速克隆大项目"></a>快速克隆大项目</h2><p>克隆单个分支</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --branch &lt;branch_name&gt; &lt;remote-address&gt;</span><br></pre></td></tr></table></figure>

<p>只克隆最新的提交记录</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> &lt;remote-address&gt; --depth 1</span><br></pre></td></tr></table></figure>

<p>– depth 代表克隆的深度，–depth 1 代表只克隆最新一次提交记录以及这次提交之后的最新内容，不克隆历史提交，所造成的影响就是不能查看历史提交记录</p>
<p>克隆单个分支的最新一次提交</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git clone --branch &lt;branch_name&gt; &lt;remote-address&gt; --depth 1</span><br></pre></td></tr></table></figure>

<h2 id="git-修改提交历史"><a href="#git-修改提交历史" class="headerlink" title="git 修改提交历史"></a>git 修改提交历史</h2><p>修改最后一条 commit</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git commit --amend</span><br></pre></td></tr></table></figure>

<p>修改多条 commit</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git rebase -i HEAD~3 修改最近三次提交</span><br><span class="line">git rebase -i --root 修改所有提交</span><br><span class="line"></span><br><span class="line">git rebase -i  [startpoint]  [endpoint] 指定了一个编辑区间（不包含[startpoint]），如果不指定[endpoint]，则该区间的终点默认是当前分支 HEAD 所指向的 commit</span><br><span class="line"></span><br><span class="line"><span class="comment"># edit 模式下</span></span><br><span class="line">git commit --amend --author=<span class="string">&quot;author &lt;email&gt;&quot;</span> <span class="comment"># 修改提交人信息</span></span><br><span class="line">git commit --amend  --date=<span class="string">&quot;commit_time&quot;</span> <span class="comment"># 修改时间 时间格式 Sat, 24 Dec 2016 18:12:09 +0800</span></span><br></pre></td></tr></table></figure>

<p>Commands</p>
<p><strong>p</strong>, pick = use commit: 直接使用 commit 不做任何修改，其中 p 是 pick 的缩写，以下雷同</p>
<p><strong>r</strong>, reword = use commit, but edit the commit message: 使用 commit，修改 commit 注释</p>
<p><strong>e</strong>, edit = use commit, but stop for amending :使用 commit，但是遇到此命令时会停止合并，可以修改提交信息</p>
<p><strong>s</strong>, squash = use commit, but meld into previous commit: 使用 commit，但是会合并到前一个 commit 中，默认保留所有的 commit 注释，并变为可以修改状态</p>
<p><strong>f</strong>, fixup = like “squash”, but discard this commit’s log message：和 squash 类似，但是会抛弃 commit 的 log 信息</p>
<p><strong>x</strong>, exec = run command (the rest of the line) using shell：使用 shell 运行命令</p>
<p><strong>d</strong>, drop = remove commit：丢弃 commit，（并删除该提交所做的修改）</p>
<p><a href="https://www.jianshu.com/p/67f20d19605a">https://www.jianshu.com/p/67f20d19605a</a></p>
<h2 id="git-bisect"><a href="#git-bisect" class="headerlink" title="git-bisect"></a>git-bisect</h2><p>git 有一个以二分法帮助定位问题的命令——bisect。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 开始二分查找问题</span></span><br><span class="line">git bisect start</span><br><span class="line"><span class="comment"># 标记当前有问题</span></span><br><span class="line">git bisect bad</span><br><span class="line"><span class="comment"># 标记哪个 commit 或 tag 时是没问题的</span></span><br><span class="line">git bisect good v1.0.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 此时 git 会 checkout 两个点之间的某个 commit，</span></span><br><span class="line"><span class="comment"># 如果此时还是有问题：</span></span><br><span class="line">git bisect bad</span><br><span class="line"><span class="comment"># 如果此时没有问题：</span></span><br><span class="line">git bisect good</span><br><span class="line"><span class="comment"># 接着 git 会 checkout 下一个「有问题」和「没问题」之间的 commit</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 直到定位到问题，git 会提示：xxxxxxx is first bad commit</span></span><br></pre></td></tr></table></figure>

<p>参考：<a href="https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E4%BD%BF%E7%94%A8-Git-%E8%B0%83%E8%AF%95">https://git-scm.com/book/zh/v2/Git-工具-使用-Git-调试</a></p>
<h2 id="other"><a href="#other" class="headerlink" title="other"></a>other</h2><h3 id="git-add-的时候遇到warning-LF-will-be-replaced-by-CRLF-in-……"><a href="#git-add-的时候遇到warning-LF-will-be-replaced-by-CRLF-in-……" class="headerlink" title="git add .的时候遇到warning: LF will be replaced by CRLF in ……`"></a>git add .<code>的时候遇到</code>warning: LF will be replaced by CRLF in ……`</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config core.autocrlf</span><br><span class="line">git config --global core.autocrlf <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># true：添加文件到git仓库时，git将其视为文本文件。他将把crlf变成lf</span></span><br><span class="line"><span class="comment"># false：line-endings将不做转换操作。文本文件保持原来的样子</span></span><br><span class="line"><span class="comment"># input：把crlf转成lf，当有人Check代码时还是lf方式。因此在window操作系统下，不要使用这个设置</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CRLF (carriagereturnlinefeed)：表示句尾使用回车换行两个字符(即Windows编程时使用&quot;\r\n&quot;换行)</span></span><br><span class="line"><span class="comment"># LF(line feed)：表示句尾只使用换行(Unix Style)</span></span><br><span class="line"><span class="comment"># CR：表示只使用回车</span></span><br></pre></td></tr></table></figure>

<h3 id="Git-永久删除文件-包括历史记录"><a href="#Git-永久删除文件-包括历史记录" class="headerlink" title="Git 永久删除文件(包括历史记录)"></a>Git 永久删除文件(包括历史记录)</h3><p><a href="https://help.github.com/articles/removing-sensitive-data-from-a-repository/">https://help.github.com/articles/removing-sensitive-data-from-a-repository/</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 在仓库的根目录执行</span></span><br><span class="line">git filter-branch --force --index-filter <span class="string">&#x27;git rm --cached --ignore-unmatch 文件路径&#x27;</span> --prune-empty --tag-name-filter cat -- --all</span><br><span class="line"><span class="comment"># 文件路径相对于git仓库根目录</span></span><br><span class="line"><span class="comment"># 删除文件夹 添加 -r 命令</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 以强制覆盖的方式推送修改后的 repo （不指定分支即所有分支）（重新上传 repo）</span></span><br><span class="line">git push origin --force --all</span><br><span class="line"></span><br><span class="line"><span class="comment"># 强制推送 tags</span></span><br><span class="line">git push origin --force --tags</span><br><span class="line"></span><br><span class="line"><span class="comment"># 清理和回收空间</span></span><br><span class="line">rm -rf .git/refs/original/</span><br><span class="line">git reflog expire --expire=now --all</span><br><span class="line">git gc --prune=now</span><br><span class="line">git gc --aggressive --prune=now</span><br></pre></td></tr></table></figure>

<p>重新<a href="https://git-scm.com/book/en/Git-Branching-Rebasing">绑定</a>，而不是合并创建的旧（受污染）存储库历史记录中的任何分支</p>
<ul>
<li>git 修改已提交的某一次的邮箱和用户信息</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git filter-branch -f --env-filter \</span><br><span class="line"><span class="string">&quot;GIT_AUTHOR_NAME=&#x27;Newname&#x27;; GIT_AUTHOR_EMAIL=&#x27;newemail&#x27;; \</span></span><br><span class="line"><span class="string">GIT_COMMITTER_NAME=&#x27;committed-name&#x27;; GIT_COMMITTER_EMAIL=&#x27;committed-email&#x27;;&quot;</span> HEAD</span><br></pre></td></tr></table></figure>

<h3 id="fork-的项目-A-与原项目-B-保持同步"><a href="#fork-的项目-A-与原项目-B-保持同步" class="headerlink" title="fork 的项目( A )与原项目 (B) 保持同步"></a>fork 的项目( A )与原项目 (B) 保持同步</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将 A 克隆到本地做中转</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加 B 远程仓库地址并拉取</span></span><br><span class="line">git remote add update &lt;B 远程仓库地址&gt;</span><br><span class="line">git fetch update master:updated</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并并解决冲突</span></span><br><span class="line">git merge updated</span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以直接合并远程分支</span></span><br><span class="line">git merge update/master</span><br></pre></td></tr></table></figure>

<h3 id="远程分支删除以后，本地显示仍然存在的解决办法"><a href="#远程分支删除以后，本地显示仍然存在的解决办法" class="headerlink" title="远程分支删除以后，本地显示仍然存在的解决办法"></a>远程分支删除以后，本地显示仍然存在的解决办法</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 显示所有分支：</span></span><br><span class="line">git branch -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 命令查看远程分支和本地分支的对应关系</span></span><br><span class="line">git remote show origin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 会看到</span></span><br><span class="line">refs/remotes/origin/&lt;branch&gt; stale (use <span class="string">&#x27;git remote prune&#x27;</span> to remove)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行下面命令同步删除</span></span><br><span class="line">git remote prune origin</span><br><span class="line">或者</span><br><span class="line">git fetch -p</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo+Github 搭建博客教程及进阶设置</title>
    <url>/423.html</url>
    <content><![CDATA[<p><a href="https://hexo.io/zh-cn/docs/index.html">Hexo 文档</a></p>
<h1 id="配置环境"><a href="#配置环境" class="headerlink" title="配置环境"></a>配置环境</h1><h2 id="安装-Node"><a href="#安装-Node" class="headerlink" title="安装 Node"></a>安装 Node</h2><p>作用：用来生成静态页面的 到<a href="https://nodejs.org/">Node.js 官网</a>下载相应平台的最新版本，一路安装即可。</p>
<h2 id="安装-Git"><a href="#安装-Git" class="headerlink" title="安装 Git"></a>安装 Git</h2><p>作用：把本地的 hexo 内容提交到 github 上去。<a href="https://git-scm.com/">Git 官网下载</a></p>
<h2 id="申请-GitHub"><a href="#申请-GitHub" class="headerlink" title="申请 GitHub"></a>申请 GitHub</h2><p>作用：是用来做博客的远程创库、域名、服务器之类的。 <a href="https://github.com/">github 账号注册</a>，<a href="https://cuilongjin.github.io/2017/10/08/GitHub%E4%BD%BF%E7%94%A8/">github 配置</a></p>
<h2 id="安装-HEXO"><a href="#安装-HEXO" class="headerlink" title="安装 HEXO"></a>安装 HEXO</h2><p>执行如下命令安装 hexo：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure>

<p>初始化命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure>

<p>文件夹的目录如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">├── _config.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── <span class="built_in">source</span></span><br><span class="line">|   ├── _drafts</span><br><span class="line">|   └── _posts</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure>

<p><code>_config.yml</code> 网站配置文件</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>title</td>
<td>网站标题</td>
</tr>
<tr>
<td>subtitle</td>
<td>网站副标题</td>
</tr>
<tr>
<td>description</td>
<td>网站描述</td>
</tr>
<tr>
<td>author</td>
<td>您的名字</td>
</tr>
<tr>
<td>language</td>
<td>网站使用的语言</td>
</tr>
<tr>
<td>timezone</td>
<td>网站时区。Hexo 默认使用您电脑的时区。时区列表。比如说：America/New_York, Japan, 和 UTC</td>
</tr>
</tbody></table>
<blockquote>
<p>其中，description 主要用于 SEO，告诉搜索引擎一个关于您站点的简单描述，通常建议在其中包含您网站的关键词。author 参数用于主题显示文章的作者</p>
</blockquote>
<p>生成静态页面</p>
<p>将 md 文件放到 <code>source/_posts</code> 文件夹下执行命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo g/generate <span class="comment"># 生成静态页面至 public 目录</span></span><br><span class="line"><span class="comment"># -w/--watch 参数监视文件变动</span></span><br></pre></td></tr></table></figure>

<p>安装本地服务</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-server --save</span><br></pre></td></tr></table></figure>

<p>启动本地服务，进行文章预览调试，命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo server <span class="comment"># 开启预览访问端口(默认端口4000，&#x27;ctrl + c&#x27;关闭server)</span></span><br><span class="line"><span class="comment"># --debug 参数开启调试模式 -p/--port 参数重设端口</span></span><br></pre></td></tr></table></figure>

<p>浏览器输入<a href="http://localhost:4000/">http://localhost:4000</a> 预览</p>
<p>自定义 IP</p>
<p>服务器默认运行在 0.0.0.0，您可以覆盖默认的 IP 设置，如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo server -i 192.168.1.1</span><br></pre></td></tr></table></figure>

<h1 id="配置-Github"><a href="#配置-Github" class="headerlink" title="配置 Github"></a>配置 Github</h1><h2 id="建立-Repository"><a href="#建立-Repository" class="headerlink" title="建立 Repository"></a>建立 Repository</h2><p>建立与你用户名对应的仓库，仓库名必须为<code>your_user_name.github.io</code>，固定写法</p>
<h2 id="建立关联"><a href="#建立关联" class="headerlink" title="建立关联"></a>建立关联</h2><blockquote>
<p>打开站点配置文件<code>_config.yml</code> 翻到最下面，改成我这样子的，注意 <code>:</code> 后面要有空格</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">   <span class="built_in">type</span>: git</span><br><span class="line">   repository: ssh://git@github.com/cuilongjin/cuilongjin.github.io.git</span><br><span class="line">   branch: master</span><br></pre></td></tr></table></figure>

<blockquote>
<p>为了便于以后管理，可以创建备份分支，<code>$ git checkout -b hexo</code>创建 hexo 分支用于备份原始文件 所有的修改添加均在此分支下进行，并 push 到远程 hexo 分支</p>
</blockquote>
<p>执行如下命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<p>然后，执行配置命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo deploy <span class="comment"># 将 .deploy 目录部署到 GitHub</span></span><br></pre></td></tr></table></figure>

<p>然后再浏览器中输入<code>http://your_user_name.github.io/</code>就行了</p>
<h2 id="部署步骤"><a href="#部署步骤" class="headerlink" title="部署步骤"></a>部署步骤</h2><p>每次部署的步骤，可按以下三步来进行。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>

<h1 id="写作"><a href="#写作" class="headerlink" title="写作"></a>写作</h1><p>执行下列命令来创建一篇新文章</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure>

<p>在文章中插入指定大小的图片</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;% img [class names] /path/to/image [width] [height] [title text [alt text]] %&#125;</span><br></pre></td></tr></table></figure>

<p>Bootstrap Callout</p>
<p>使用方式</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% note class_name %&#125; Content (md partial supported) &#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>

<p>其中，<code>class_name</code> 可以是以下列表中的一个值：</p>
<p><code>default</code>、<code>primary</code>、<code>success</code>、<code>info</code>、<code>warning</code>、<code>danger</code></p>
<h1 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h1><p><a href="http://theme-next.iissnan.com/">NexT v5.1.x</a> <a href="https://github.com/theme-next/hexo-theme-next">NexT v6.0.0</a> <a href="https://segmentfault.com/a/1190000009544924/">next 主题个性化配置</a></p>
<h2 id="下载-NexT-主题"><a href="#下载-NexT-主题" class="headerlink" title="下载 NexT 主题"></a>下载 NexT 主题</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> your-hexo-site</span><br><span class="line">git submodule add git@github.com:cuilongjin/hexo-theme-next.git themes/next</span><br></pre></td></tr></table></figure>

<h2 id="启用主题"><a href="#启用主题" class="headerlink" title="启用主题"></a>启用主题</h2><p>打开站点配置文件 <code>_config.yml</code> ， 找到 theme 字段，并将其值更改为 next</p>
<p>NexT 主题的目录架构</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">├── .github                #github信息</span><br><span class="line">├── languages              #多语言</span><br><span class="line">|   ├── _en.yml            #默认语言</span><br><span class="line">|   └── zh-CN.yml          #简体中文</span><br><span class="line">|   └── zh-TW.yml          #繁体中文</span><br><span class="line">├── layout                 #布局，根目录下的*.swig文件是对主页，分页，存档等的控制</span><br><span class="line">|   ├── _custom            #可以自定义的模板，覆盖原有模板</span><br><span class="line">|   |   ├── head.swig      #文首样式</span><br><span class="line">|   |   ├── header.swig    #头部样式</span><br><span class="line">|   |   ├── sidebar.swig   #侧边栏样式</span><br><span class="line">|   ├── _macro             #可以自定义的模板，覆盖原有模板</span><br><span class="line">|   |   ├── post.swig      #文章模板</span><br><span class="line">|   |   ├── reward.swig    #打赏模板</span><br><span class="line">|   |   ├── sidebar.swig   #侧边栏模板</span><br><span class="line">|   ├── _partial           #局部的布局</span><br><span class="line">|   |   ├── head           #头部模板</span><br><span class="line">|   |   ├── search         #搜索模板</span><br><span class="line">|   |   ├── share          #分享模板</span><br><span class="line">|   ├── _script            #局部的布局</span><br><span class="line">|   ├── _third-party       #第三方模板</span><br><span class="line">|   ├── _layout.swig       #主页面模板</span><br><span class="line">|   ├── index.swig         #主页面模板</span><br><span class="line">|   ├── page               #页面模板</span><br><span class="line">|   └── tag.swig           #tag模板</span><br><span class="line">├── scripts                #script源码</span><br><span class="line">|   ├── tags               #tags的script源码</span><br><span class="line">|   ├── marge.js           #页面模板</span><br><span class="line">├── source                 #源码</span><br><span class="line">|   ├── css                #css源码</span><br><span class="line">|   |   ├── _common        #*.styl基础css</span><br><span class="line">|   |   ├── _custom        #*.styl自定义局部css</span><br><span class="line">|   |   └── _mixins        #mixins的css</span><br><span class="line">|   ├── fonts              #字体</span><br><span class="line">|   ├── images             #图片</span><br><span class="line">|   ├── js                 #javascript源代码</span><br><span class="line">|   └── lib                #引用库</span><br><span class="line">├── _config.yml            #主题配置文件</span><br><span class="line">└── README.md              #说明文件</span><br></pre></td></tr></table></figure>

<h2 id="在菜单上添加页面"><a href="#在菜单上添加页面" class="headerlink" title="在菜单上添加页面"></a>在菜单上添加页面</h2><p>以添加 about 页面为例，在 hexo 目录下执行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new page <span class="string">&quot;about&quot;</span></span><br></pre></td></tr></table></figure>

<p>然后你会发现 source 里面多了个目录 about，里面有个 index.md。其实你也可以手动建立。 然后在主题配置文件 <code>_config.yml</code> 中找到 menu 一项，添加一行 About: /about</p>
<h2 id="设置「阅读全文」"><a href="#设置「阅读全文」" class="headerlink" title="设置「阅读全文」"></a>设置「阅读全文」</h2><p>在首页显示文章的摘录并显示 <strong>阅读全文</strong> 按钮，可以通过以下方法：</p>
<ol>
<li>在文章中使用 <code>&lt;!-- more --&gt;</code> 手动进行截断，Hexo 提供的方式 <strong>推荐</strong></li>
<li>在文章的 <a href="https://hexo.io/docs/front-matter.html">front-matter</a> 中添加 <code>description</code>，并提供文章摘录</li>
<li>自动形成摘要，在主题配置文件 <code>_config.yml</code> ，启用<code>auto_excerpt</code></li>
</ol>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">auto_excerpt:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">length:</span> <span class="number">150</span></span><br></pre></td></tr></table></figure>

<p>默认截取的长度为 <code>150</code> 字符，可以根据需要自行设定</p>
<p>建议使用 <code>&lt;!-- more --&gt;</code>（即第一种方式），除了可以精确控制需要显示的摘录内容以外， 这种方式也可以让 Hexo 中的插件更好的识别。</p>
<h2 id="添加-RSS"><a href="#添加-RSS" class="headerlink" title="添加 RSS"></a>添加 RSS</h2><p>在博客根目录下执行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install --save hexo-generator-feed</span><br></pre></td></tr></table></figure>

<p>打开站点配置文件 <code>_config.yml</code> ，添加：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: http://hexo.io/plugins/</span></span><br><span class="line"><span class="attr">plugins:</span> <span class="string">hexo-generate-feed</span></span><br></pre></td></tr></table></figure>

<p>打开主题配置文件 <code>_config.yml</code> ，添加：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">rss:</span> <span class="string">/atom.yml</span></span><br></pre></td></tr></table></figure>

<h2 id="添加本地搜索"><a href="#添加本地搜索" class="headerlink" title="添加本地搜索"></a>添加本地搜索</h2><p>安装 hexo-generator-search，执行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure>

<p>打开主题配置文件 <code>_config.yml</code> ，添加：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h2 id="自定义样式"><a href="#自定义样式" class="headerlink" title="自定义样式"></a>自定义样式</h2><p><code>themes\next\source\css\_custom\custom.styl</code> 文件中添加自定义样式</p>
<h3 id="修改头像样式"><a href="#修改头像样式" class="headerlink" title="修改头像样式"></a>修改头像样式</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.site-author-image</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="更改主题背景"><a href="#更改主题背景" class="headerlink" title="更改主题背景"></a>更改主题背景</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// 背景图片相关</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">../images/background.jpg</span>);</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background-repeat</span>: repeat-x;</span><br><span class="line">  <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>图片放入 <code>themes\next\source\images</code> 中即可</p>
<p>改变背景色和透明度，添加：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.main-inner</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.9</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 文章内容的透明度</span><br><span class="line"><span class="selector-class">.content-wrap</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.85</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 侧边框的透明度设置</span><br><span class="line"><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.85</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 菜单栏的透明度设置</span><br><span class="line"><span class="selector-class">.header-inner</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.85</span>);</span><br><span class="line">&#125;</span><br><span class="line">// 搜索框的透明度设置</span><br><span class="line"><span class="selector-class">.popup</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.9</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="修改-local-search-加载图标"><a href="#修改-local-search-加载图标" class="headerlink" title="修改 local-search 加载图标"></a>修改 local-search 加载图标</h3><p>在<code>blog/themes/next/layout/_third-party/search/localsearch.swig</code>中寻找：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;i class&#x3D;&quot;fa fa-spinner fa-pulse fa-5x fa-fw&quot;&gt;&lt;&#x2F;i&gt;</span><br></pre></td></tr></table></figure>

<p>将其修改为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;i class&#x3D;&quot;fa fa-circle-o-notch fa-spin fa-5x fa-fw margin-bottom&quot;&gt;&lt;&#x2F;i&gt;</span><br></pre></td></tr></table></figure>

<h3 id="修改文章内链接文本样式"><a href="#修改文章内链接文本样式" class="headerlink" title="修改文章内链接文本样式"></a>修改文章内链接文本样式</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// 文章内链接文本样式</span><br><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">p</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#0593d3</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#0593d3</span>;</span><br><span class="line">  &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fc6423</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#fc6423</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="自定义代码块样式"><a href="#自定义代码块样式" class="headerlink" title="自定义代码块样式"></a>自定义代码块样式</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">code</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff7600</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fbf7f8</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 大代码块的自定义样式</span><br><span class="line"><span class="selector-class">.highlight</span>,</span><br><span class="line">pre &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">5px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="修改文章底部的那个带-号的标签"><a href="#修改文章底部的那个带-号的标签" class="headerlink" title="修改文章底部的那个带 # 号的标签"></a>修改文章底部的那个带 # 号的标签</h3><p>编辑主题配置文件 <code>_config.yml</code> ，修改</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">tag_icon:</span> <span class="string">tag</span></span><br></pre></td></tr></table></figure>

<h3 id="在每篇文章末尾统一添加”本文结束”标记"><a href="#在每篇文章末尾统一添加”本文结束”标记" class="headerlink" title="在每篇文章末尾统一添加”本文结束”标记"></a>在每篇文章末尾统一添加”本文结束”标记</h3><p>打开 <code>\themes\next\layout\_macro\post.swig</code> 文件，在 <code>post-body</code> 之后， <code>post-footer</code> 之前添加如下代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  &#123;% if not is_index and theme.passage_end_tag.enable %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align:center;color: #ccc;font-size:14px;margin-top: 20px;&quot;</span>&gt;</span>-------------本文结束-------------<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>然后打开主题配置文件 <code>_config.yml</code> ，在末尾添加：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 文章末尾添加“本文结束”标记</span></span><br><span class="line"><span class="attr">passage_end_tag:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h3 id="添加顶部加载条"><a href="#添加顶部加载条" class="headerlink" title="添加顶部加载条"></a>添加顶部加载条</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> themes/next</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-pace <span class="built_in">source</span>/lib/pace</span><br></pre></td></tr></table></figure>

<p>修改主题配置文件 <code>_config.yml</code> 将 pace: false 改为 pace: true</p>
<p>自定义颜色</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 自定义进度条颜色 */</span></span><br><span class="line"><span class="selector-class">.pace</span> &#123;</span><br><span class="line">  <span class="selector-class">.pace-progress</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#1e92fb</span>; <span class="comment">// 进度条颜色</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">3px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.pace-progress-inner</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">#1e92fb</span>, <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#1e92fb</span>; <span class="comment">// 阴影颜色</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.pace-activity</span> &#123;</span><br><span class="line">    <span class="attribute">border-top-color</span>: <span class="number">#1e92fb</span>; <span class="comment">// 上边框颜色</span></span><br><span class="line">    <span class="attribute">border-left-color</span>: <span class="number">#1e92fb</span>; <span class="comment">// 左边框颜色</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="浏览器切换标签离开当前页面时改变-title-提示"><a href="#浏览器切换标签离开当前页面时改变-title-提示" class="headerlink" title="浏览器切换标签离开当前页面时改变 title 提示"></a>浏览器切换标签离开当前页面时改变 title 提示</h3><p><code>themes/next/lauout/_script/vendors.swig</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> a = <span class="string">&#x27;? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ☕️ ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ☘️ ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ☺️ ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ☹️ ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?&#x27;</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">document</span>.addEventListener(<span class="string">&#x27;visibilitychange&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (<span class="built_in">document</span>.visibilityState == <span class="string">&#x27;hidden&#x27;</span>) &#123;</span></span><br><span class="line"><span class="javascript">      normal_title = <span class="built_in">document</span>.title</span></span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.title = a.split(<span class="string">&#x27; &#x27;</span>)[<span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random() * <span class="number">235</span>)]</span></span><br><span class="line"><span class="javascript">    &#125; <span class="keyword">else</span> <span class="built_in">document</span>.title = normal_title</span></span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="设置首页隐藏指定文章"><a href="#设置首页隐藏指定文章" class="headerlink" title="设置首页隐藏指定文章"></a>设置首页隐藏指定文章</h3><p>自定义 front-matter 的参数<br>例如，自定义添加一个 notshow 参数，值为 true 表示隐藏</p>
<p>修改主题的 <code>\themes\next\layout\index.swig</code> 文件</p>
<p>将</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% block content %&#125;</span><br><span class="line">  &lt;section id&#x3D;&quot;posts&quot; class&#x3D;&quot;posts-expand&quot;&gt;</span><br><span class="line">    &#123;% for post in page.posts %&#125;</span><br><span class="line">      &#123;&#123; post_template.render(post, true) &#125;&#125;</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line">  &lt;&#x2F;section&gt;</span><br><span class="line"></span><br><span class="line">  &#123;% include &#39;_partials&#x2F;pagination.swig&#39; %&#125;</span><br><span class="line">&#123;% endblock %</span><br></pre></td></tr></table></figure>

<p>改成</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% block content %&#125;</span><br><span class="line">  &lt;section id&#x3D;&quot;posts&quot; class&#x3D;&quot;posts-expand&quot;&gt;</span><br><span class="line">    &#123;% for post in page.posts %&#125;</span><br><span class="line">      &#123;% if post.notshow !&#x3D; true %&#125;</span><br><span class="line">        &#123;&#123; post_template.render(post, true) &#125;&#125;</span><br><span class="line">      &#123;% endif %&#125;</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line">  &lt;&#x2F;section&gt;</span><br><span class="line"></span><br><span class="line">  &#123;% include &#39;_partials&#x2F;pagination.swig&#39; %&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<h2 id="添加评论系统"><a href="#添加评论系统" class="headerlink" title="添加评论系统"></a>添加评论系统</h2><h3 id="Gitmen-评论"><a href="#Gitmen-评论" class="headerlink" title="Gitmen 评论"></a>Gitmen 评论</h3><h4 id="GitHub-授权接入"><a href="#GitHub-授权接入" class="headerlink" title="GitHub 授权接入"></a>GitHub 授权接入</h4><p>Gitment 是使用的 GitHub Issues 作为评论系统，在接入 Gitment 前，需要获得 GitHub 的授权，获得相应的客户端 id 和客户端私钥，以备站点使用。 <a href="https://github.com/settings/applications/new/">OAuth application 注册接入</a></p>
<h4 id="添加-Gitment"><a href="#添加-Gitment" class="headerlink" title="添加 Gitment"></a>添加 Gitment</h4><blockquote>
<p>如果您使用的是 Hexo 框架的 Next 主题博客，想要添加 Gitment 的时候，记得将自己的 Next 主 题更新到最新版。</p>
</blockquote>
<p>打开主题配置文件 <code>_config.yml</code> 修改如下：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">gitment:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">github_user:</span> <span class="comment"># MUST HAVE, Your Github ID</span></span><br><span class="line">  <span class="attr">github_repo:</span> <span class="comment"># MUST HAVE, The repo you use to store Gitment comments</span></span><br><span class="line">  <span class="attr">client_id:</span> <span class="comment"># MUST HAVE, Github client id for the Gitment</span></span><br><span class="line">  <span class="attr">client_secret:</span> <span class="comment"># EITHER this or proxy_gateway, Github access secret token for the Gitment</span></span><br></pre></td></tr></table></figure>

<p>其中 lazy 的含义，是否懒加载相应评论框，如果为 true，文章底部评论是收起状态，提示显示 Gitment 评论按钮，单击展开评论框</p>
<h3 id="LiveRe-评论"><a href="#LiveRe-评论" class="headerlink" title="LiveRe 评论"></a>LiveRe 评论</h3><p>注册<a href="https://livere.com/">LiveRe</a></p>
<p>打开主题配置文件 <code>_config.yml</code> 添加：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Support for LiveRe comments system.</span></span><br><span class="line"><span class="comment"># You can get your uid from https://livere.com/insight/myCode (General web site)</span></span><br><span class="line"><span class="attr">livere_uid:</span> <span class="string">your</span> <span class="string">uid</span></span><br></pre></td></tr></table></figure>

<h3 id="Hypercomments-超级评论"><a href="#Hypercomments-超级评论" class="headerlink" title="Hypercomments 超级评论"></a>Hypercomments 超级评论</h3><p>注册<a href="https://www.hypercomments.com/">Hypercomments</a></p>
<p>打开主题配置文件 <code>_config.yml</code> 添加：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Hypercomments</span></span><br><span class="line"><span class="comment"># hypercomments_id: your id</span></span><br></pre></td></tr></table></figure>

<h3 id="valine-评论系统"><a href="#valine-评论系统" class="headerlink" title="valine 评论系统"></a>valine 评论系统</h3><h2 id="添加分享"><a href="#添加分享" class="headerlink" title="添加分享"></a>添加分享</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> themes/next</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-needmoreshare2 <span class="built_in">source</span>/lib/needsharebutton</span><br></pre></td></tr></table></figure>

<p>打开主题配置文件 <code>_config.yml</code> ，加入：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">needmoreshare2:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">postbottom:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">float:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h2 id="SEO-优化"><a href="#SEO-优化" class="headerlink" title="SEO 优化"></a>SEO 优化</h2><h3 id="添加站点地图（sitemap-xml）"><a href="#添加站点地图（sitemap-xml）" class="headerlink" title="添加站点地图（sitemap.xml）"></a>添加站点地图（sitemap.xml）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-sitemap hexo-generator-baidu-sitemap</span><br><span class="line">npm install hexo-generator-baidu-sitemap</span><br></pre></td></tr></table></figure>

<p>在<strong>站点配置文件</strong>中添加如下代码:</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">sitemap:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">sitemap.xml</span></span><br><span class="line"><span class="attr">baidusitemap:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">baidusitemap.xml</span></span><br></pre></td></tr></table></figure>

<p>配置成功后，会生成<code>sitemap.xml</code>和<code>baidusitemap.xml</code>，前者适合提交给谷歌搜素引擎，后者适合提交百度搜索引擎。</p>
<h3 id="提交博客地址到搜索引擎"><a href="#提交博客地址到搜索引擎" class="headerlink" title="提交博客地址到搜索引擎"></a>提交博客地址到搜索引擎</h3><p>如果你不主动提交你的博客地址给各大搜索引擎，那么即使你站内优化做得再好，搜索引擎根本都不知道你的博客的存在。 所以别忘记在你创建完博客的那一刻就去提交。如果你此刻还没有提交，现在就去吧。</p>
<ul>
<li>Google <a href="https://www.google.com/webmasters/tools/submit-url">https://www.google.com/webmasters/tools/submit-url</a></li>
<li>必应 <a href="https://www.bing.com/toolbox/webmaster/">https://www.bing.com/toolbox/webmaster/</a></li>
<li>Baidu <a href="https://ziyuan.baidu.com/linksubmit/index">https://ziyuan.baidu.com/linksubmit/index</a></li>
</ul>
<h3 id="Google-站长工具-和-Google-Analysis"><a href="#Google-站长工具-和-Google-Analysis" class="headerlink" title="Google 站长工具 和 Google Analysis"></a>Google 站长工具 和 Google Analysis</h3><p>GA 是用来统计访问信息的，站长工具是用来查看网站的查询和搜索数据</p>
<p>注册<a href="https://analytics.google.com/">Google Analysis</a></p>
<p>编辑主题配置文件 <code>_config.yml</code> ， 修改字段 <code>google_analytics</code>， 值设置成你的 Google 跟踪 ID。跟踪 ID 通常是以 UA- 开头</p>
<p><a href="https://search.google.com/search-console/">Google 站长工具</a> 提交 sitemap</p>
<h3 id="添加蜘蛛协议-robots-txt"><a href="#添加蜘蛛协议-robots-txt" class="headerlink" title="添加蜘蛛协议 robots.txt"></a>添加蜘蛛协议 robots.txt</h3><p>robots.txt，代码如下</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line"># hexo robots.txt</span><br><span class="line">User-agent: *</span><br><span class="line">Allow: /</span><br><span class="line">Allow: /archives/</span><br><span class="line"></span><br><span class="line">Disallow: /vendors/</span><br><span class="line">Disallow: /js/</span><br><span class="line">Disallow: /css/</span><br><span class="line">Disallow: /fonts/</span><br><span class="line">Disallow: /vendors/</span><br><span class="line">Disallow: /fancybox/</span><br><span class="line"></span><br><span class="line">Sitemap: https://cuilongjin.top/sitemap.xml</span><br><span class="line">Sitemap: https://cuilongjin.top/baidusitemap.xml</span><br></pre></td></tr></table></figure>

<p>把<code>robots.txt</code>放在你的<code>hexo</code>站点的<code>source</code>文件下即可</p>
<h3 id="给出站链接添加-nofollow-标签"><a href="#给出站链接添加-nofollow-标签" class="headerlink" title="给出站链接添加 nofollow 标签"></a>给出站链接添加 <code>nofollow</code> 标签</h3><h2 id="设置忽略文件渲染"><a href="#设置忽略文件渲染" class="headerlink" title="设置忽略文件渲染"></a>设置忽略文件渲染</h2><p>打开站点配置文件 <code>_config.yml</code> ，修改 <code>skip_render</code> 参数的值</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 路径是相对source目录的</span></span><br><span class="line"><span class="comment"># 不对文件进行渲染，保持文件原有内容</span></span><br><span class="line"><span class="attr">skip_render:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;*.html&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;demo/**&quot;</span> <span class="string">//</span> <span class="string">排除</span> <span class="string">demo</span> <span class="string">整个目录</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">README.md</span></span><br></pre></td></tr></table></figure>

<p>再次使用 hexo d 命令部署博客的时候就不会在渲染这些文件了</p>
<h2 id="添加-google-adsense"><a href="#添加-google-adsense" class="headerlink" title="添加 google adsense"></a>添加 google adsense</h2><p>注册账号 <a href="https://www.google.com/adsense/start/">https://www.google.com/adsense/start/</a></p>
<p>获取代码</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">&quot;https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  ;(adsbygoogle = <span class="built_in">window</span>.adsbygoogle || []).push(&#123;</span></span><br><span class="line"><span class="javascript">    google_ad_client: <span class="string">&#x27;ca-pub-9068539038073295&#x27;</span>,</span></span><br><span class="line"><span class="javascript">    enable_page_level_ads: <span class="literal">true</span></span></span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>将网站关联到 AdSense</p>
<p>在主题配置文件中添加广告控制开关</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 添加 Google AdSense</span></span><br><span class="line"><span class="attr">google_adsense:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>主题文件夹下找到 /layout/_partial/head.swig 里添加代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% if theme.google_adsense %&#125;</span><br><span class="line">  &lt;script async src&#x3D;&quot;https:&#x2F;&#x2F;pagead2.googlesyndication.com&#x2F;pagead&#x2F;js&#x2F;adsbygoogle.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    (adsbygoogle &#x3D; window.adsbygoogle || []).push(&#123;</span><br><span class="line">      google_ad_client: &quot;ca-pub-9068539038073295&quot;,</span><br><span class="line">      enable_page_level_ads: true</span><br><span class="line">    &#125;)</span><br><span class="line">  &lt;&#x2F;script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<p>重新部署网站</p>
<p>等待审核，审核成功会向你发送邮件</p>
<h2 id="文章加密访问"><a href="#文章加密访问" class="headerlink" title="文章加密访问"></a>文章加密访问</h2><p><a href="https://github.com/MikeCoder/hexo-blog-encrypt">https://github.com/MikeCoder/hexo-blog-encrypt</a></p>
<p>安装</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-blog-encrypt</span><br></pre></td></tr></table></figure>

<p>在 <strong>站点配置文件</strong> 中启用该插件:</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 文章加密 https://github.com/MikeCoder/hexo-blog-encrypt</span></span><br><span class="line"><span class="attr">encrypt:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 默认的提示和摘要内容</span></span><br><span class="line">  <span class="attr">default_abstract:</span> <span class="string">这是一篇加密文章，内容可能是个人情感宣泄或者收费技术。如果你确实想看，请与我联系</span></span><br><span class="line">  <span class="attr">default_message:</span> <span class="string">输入密码，查看文章</span></span><br></pre></td></tr></table></figure>

<p>在需要加密的文章的头部添加上对应的字段，如 password, abstract, message</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">password:</span> <span class="string">该博客加密使用的密码</span></span><br><span class="line"><span class="attr">abstract:</span> <span class="string">该博客的摘要，会显示在博客的列表页</span></span><br><span class="line"><span class="attr">message:</span> <span class="string">博客查看时，密码输入框上面的描述性文字</span></span><br></pre></td></tr></table></figure>

<p>存在问题</p>
<ul>
<li>字数统计功能字数会显得比实际值大</li>
<li>加密文章内代码复制失效</li>
</ul>
<h2 id="添加评分系统"><a href="#添加评分系统" class="headerlink" title="添加评分系统"></a>添加评分系统</h2><p><a href="https://widgetpack.com/">https://widgetpack.com</a> 注册</p>
<p>获得 id，即为左上角的数字：</p>
<p>主题配置文件中修改</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">rating:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">id:</span></span><br></pre></td></tr></table></figure>

<p>在侧栏找到 rating 的 setting：推荐将投票方式改为 ip 投票，因为这个平台提供的账号投票基本不面向国内。</p>
<h2 id="添加萌萌哒看板娘"><a href="#添加萌萌哒看板娘" class="headerlink" title="添加萌萌哒看板娘"></a>添加萌萌哒看板娘</h2><p><a href="https://blog.bill.moe/hexo-live2d-poster-girl/">https://blog.bill.moe/hexo-live2d-poster-girl/</a></p>
<h2 id="添加-Hitokoto-一言功能"><a href="#添加-Hitokoto-一言功能" class="headerlink" title="添加 Hitokoto 一言功能"></a>添加 Hitokoto 一言功能</h2><p><a href="https://hitokoto.cn/api">https://hitokoto.cn/api</a></p>
<h2 id="安装-Hexo-Admin"><a href="#安装-Hexo-Admin" class="headerlink" title="安装 Hexo Admin"></a>安装 Hexo Admin</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-admin</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>

<p>然后打开 localhost:4000/admin/</p>
<p>设置登陆 admin 的用户名和密码，打开<strong><a href="http://localhost:4000/admin/#/auth-setup">http://localhost:4000/admin/#/auth-setup</a></strong></p>
<p>可以直接输入你想要的用户名和密码，把生成的文本复制到 hexo 根目录配置文件中<strong>_config.yml</strong></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># hexo-admin authentification</span></span><br><span class="line"><span class="attr">admin:</span></span><br><span class="line">  <span class="attr">username:</span> <span class="string">username</span></span><br><span class="line">  <span class="attr">password_hash:</span> <span class="string">$2a$10$L.XAIqIWgTc5S1zpvV3MEu7/rH34p4Is/nq824smv8EZ3lIPCp1su</span></span><br><span class="line">  <span class="attr">secret:</span> <span class="string">my</span> <span class="string">super</span> <span class="string">secret</span> <span class="string">phrase</span></span><br></pre></td></tr></table></figure>

<h2 id="主题更新"><a href="#主题更新" class="headerlink" title="主题更新"></a>主题更新</h2><p>命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> themes/next</span><br><span class="line">git submodule update</span><br></pre></td></tr></table></figure>

<p>推荐你使用 <a href="https://github.com/theme-next/hexo-theme-next/blob/master/docs/cn/DATA-FILES.md">Hexo 数据文件</a>特性进行主题配置</p>
<p>目前，通过 pull 或下载新的 release 版本来更新 NexT 主题的体验并不平滑。当用户使用 git pull 更新 NexT 主题时经常需要解决冲突问题，而在手动下载 release 版本时也经常需要手动合并配置</p>
<p>现在来说，NexT 推荐用户存储部分配置在站点的 <code>_config.yml</code> 中，而另一部分在主题的 <code>_config.yml</code> 中。这一方式固然可用，但也有一些缺点</p>
<ul>
<li>配置项被分裂为两部分</li>
<li>用户难以弄清何处存放配置选项</li>
</ul>
<p>为了解决这一问题，NexT 将利用 Hexo 的数据文件特性。因为数据文件是在 Hexo 3 中被引入，所以你需要更新至 Hexo 3.0 以后的版本来使用这一特性。</p>
<p>如果你仍然希望使用 Hexo 2.x，你依旧可以按老的方式进行配置。NexT 仍然兼容 Hexo 2.x（但可能会出现错误）。</p>
<p><strong>带来的好处</strong> 使用这一特性，你现在可以将你的全部配置置于同一位置 <code>(source/_data/next.yml）</code>，并且不需要修改 <code>next/_config.yml</code>。如果在新的 release 中出现了任何新的选项，那么你只需要从 <code>next/_config.yml</code> 中将他们复制到 <code>source/_data/next.yml</code> 中并设置它们的值为你想要的选项。</p>
<p><strong>如何使用这一特性</strong> 请确认你的 Hexo 版本为 3.0 或更高。 在你站点的 <code>hexo/source/_data</code> 目录创建一个 <code>next.yml</code> 文件（如果 <code>_data</code> 目录不存在，请创建之）。 复制你站点的 <code>_config.yml</code> 和主题的 <code>_config.yml</code> 中的 NexT 配置项到 <code>hexo/source/_data/next.yml</code> 中。 使用 <code>--config source/_data/next.yml</code> 参数来启动服务器，生成或部署。 例如：<code>hexo clean --config source/_data/next.yml</code> &amp;&amp; <code>hexo g --config source/_data/next.yml</code> 。</p>
<h3 id="从-NexT-v5-1-x-更新"><a href="#从-NexT-v5-1-x-更新" class="headerlink" title="从 NexT v5.1.x 更新"></a>从 NexT v5.1.x 更新</h3><p><a href="https://github.com/theme-next/hexo-theme-next/blob/master/docs/cn/UPDATE-FROM-5.1.X.md">https://github.com/theme-next/hexo-theme-next/blob/master/docs/cn/UPDATE-FROM-5.1.X.md</a></p>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>github</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>jquery</title>
    <url>/1661.html</url>
    <content><![CDATA[<h2 id="jQuery-基本介绍"><a href="#jQuery-基本介绍" class="headerlink" title="jQuery 基本介绍"></a>jQuery 基本介绍</h2><h3 id="为什么要学-jQuery"><a href="#为什么要学-jQuery" class="headerlink" title="为什么要学 jQuery"></a>为什么要学 jQuery</h3><p>使用 JS 操作 DOM 的时候，会遇到以下的一些缺点：</p>
<ul>
<li>获取元素的方法太少且长，麻烦</li>
<li>遍历伪数组很麻烦，通常要嵌套一大堆的 for 循环。注册的事件会覆盖</li>
<li>有兼容性问题</li>
<li>实现动画很麻烦</li>
</ul>
<h3 id="jQuery-初体验"><a href="#jQuery-初体验" class="headerlink" title="jQuery 初体验"></a>jQuery 初体验</h3><p>【让 div 显示与设置内容】</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">&#x27;#btn1&#x27;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 隐式迭代：偷偷的遍历，在jQuery中，不需要手动写for循环了，会自动进行遍历。</span></span><br><span class="line">    <span class="comment">// show() 显示元素</span></span><br><span class="line">    $(<span class="string">&#x27;div&#x27;</span>).show(<span class="number">200</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  $(<span class="string">&#x27;#btn2&#x27;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// text() 设置文本内容</span></span><br><span class="line">    $(<span class="string">&#x27;div&#x27;</span>).text(<span class="string">&#x27;我是内容&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  $(<span class="string">&#x27;#btn3&#x27;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// css(name, value);  设置样式</span></span><br><span class="line">    <span class="comment">// name: 设置什么样式</span></span><br><span class="line">    <span class="comment">// value ： 设置的值是多少</span></span><br><span class="line">    $(<span class="string">&#x27;div&#x27;</span>).css(<span class="string">&#x27;fontSize&#x27;</span>, <span class="number">30</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>使用 jQuery 的优点</strong></p>
<ul>
<li>获取元素的方式非常的简单，而且非常的丰富</li>
<li>jQuery 的隐式迭代特性，不再需要书写 for 循环语句</li>
<li>使用 jQuery 完全不用考虑兼容性问题</li>
<li>jQuery 提供了一系列动画相关的函数，使用非常方便</li>
<li>代码简单、粗暴</li>
</ul>
<p><strong>什么是 jQuery</strong></p>
<blockquote>
<p>jQuery 是一个快速的、轻量的、功能丰富的 js 库</p>
</blockquote>
<p>jQuery 的官网 <a href="http://jquery.com/">http://jquery.com/</a></p>
<p>js 库：把一些常用到的方法写到一个单独的 js 文件，使用的时候直接去引用这 js 文件就可以了。（animate.js、common.js）</p>
<h3 id="版本介绍"><a href="#版本介绍" class="headerlink" title="版本介绍"></a>版本介绍</h3><p>官网下载地址：<a href="http://jquery.com/download/">http://jquery.com/download/</a></p>
<p>jQuery 版本有很多，分为 1.x 2.x 3.x</p>
<p>大版本分类：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1.x 版本：能够兼容IE678浏览器（最终版本1.12.4）</span><br><span class="line">2.x 版本：不兼容IE678浏览器（最终版本2.2.4）</span><br><span class="line">3.x 版本：不兼容IE678，更加的精简（在国内不流行，因为国内使用 jQuery 的主要目的就是兼容IE678）,3.x 版本只是在原来的基础上增加了一些新的特性</span><br></pre></td></tr></table></figure>

<p>关于压缩版和未压缩版</p>
<ul>
<li><code>jquery.min.js</code>：压缩版本，适用于生产环境，因为文件比较小，去除了注释、换行、空格等东西，采用了代码混淆，基本没有可阅读性</li>
<li><code>jquery.js</code>：未压缩版本，适用于学习与开发环境，源码清晰，易阅读</li>
</ul>
<h3 id="入口函数"><a href="#入口函数" class="headerlink" title="入口函数"></a>入口函数</h3><p>入口函数的好处：</p>
<ul>
<li>等待文档加载完成，不论代码是写在 body、head 中都可以正常去获取到元素</li>
<li>形成了一个沙箱，防止全局变量污染</li>
</ul>
<p>两种写法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 第一种写法</span></span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)</span><br><span class="line"><span class="comment">// 第二种写法</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)</span><br></pre></td></tr></table></figure>

<p>原生 JavaScript 的入口函数：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>jQuery 入口函数与 js 入口函数的对比</p>
<ul>
<li>JavaScript 的入口函数要等到页面中所有资源（包括图片、文件等外部资源）加载完成才开始执行。jQuery 的入口函数只会等待文档树加载完成就开始执行，并不会等待图片、文件的加载。所以 jQuery 的入口函数要比 js 入口函数先执行</li>
<li>window.onload 存在覆盖问题；jq 的入口函数不存在覆盖问题</li>
</ul>
<h3 id="jQuery-使用步骤"><a href="#jQuery-使用步骤" class="headerlink" title="jQuery 使用步骤"></a>jQuery 使用步骤</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 引包（引入js文件） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;jquery.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="comment">// 写上入口函数</span></span></span><br><span class="line"><span class="javascript">  $(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)</span></span><br><span class="line"><span class="javascript">  <span class="comment">// 或者</span></span></span><br><span class="line"><span class="javascript">  $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 在入口函数内部实现功能</span></span></span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="jquery-中的-符号"><a href="#jquery-中的-符号" class="headerlink" title="jquery 中的 $ 符号"></a>jquery 中的 <code>$</code> 符号</h3><p><code>$</code> 来源于 jQuery ， 是个函数（查看 jQuery 源码中最后几行代码）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// jquery 和 $ 是等价的</span></span><br><span class="line">jQuery === $ <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p><strong>作用</strong>：根据参数的不同， 作用是不同的</p>
<ul>
<li><p>参数是个函数 <code>$(function()&#123;&#125;)</code> 作用是入口函数</p>
</li>
<li><p>参数是个 dom 对象 <code>$(document)</code> 作用是 dom 转 jq</p>
</li>
<li><p>参数是选择器 <code>$(&#39;body&#39;)</code> 作用是获取元素</p>
</li>
<li><p>参数是个 html 字符串 <code>$(&#39;&lt;a&gt;123&lt;/a&gt;&#39;)</code> 作用是创建节点</p>
</li>
</ul>
<h3 id="jQuery-对象与-DOM-对象"><a href="#jQuery-对象与-DOM-对象" class="headerlink" title="jQuery 对象与 DOM 对象"></a>jQuery 对象与 DOM 对象</h3><p><strong>基本概念：</strong></p>
<ol>
<li><code>DOM 对象</code>：使用 JavaScript 中的方法获取页面中的元素返回的对象就是 Dom 对象</li>
<li><code>jQuery 对象</code>：jquery 对象就是使用 jquery 的方法获取页面中的元素返回的对象</li>
<li>jQuery 对象其实就是 DOM 对象的包装集（包装了 DOM 对象的集合），是一个 <strong>伪数组</strong></li>
</ol>
<p><strong>jQuery 对象与 DOM 对象的区别：</strong></p>
<ol>
<li>DOM 对象与 jQuery 对象的方法不能混用。dom 对象不能使用 jq 对象的方法，jq 对象也不能使用 dom 对象的属性和方法</li>
<li>DOM 对象可以和 jQuery 对象可以相互转化</li>
</ol>
<ul>
<li>DOM 对象转换成 jQuery 对象：【联想记忆：花钱】</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 将 dom 对象作为参数传递到 $() 里面去， 那么这个整体就是个jq对象</span></span><br><span class="line"><span class="keyword">var</span> $obj = $(domObj)</span><br></pre></td></tr></table></figure>

<ul>
<li>jQuery 对象转换成 DOM 对象：</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过 $()  来获取到的元素返回的对象就是jq对象</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> $li = $(<span class="string">&#x27;li&#x27;</span>)</span><br><span class="line"><span class="comment">// 第一种方法,通过下标取出（推荐使用）</span></span><br><span class="line">$li[<span class="number">0</span>]</span><br><span class="line"><span class="comment">// 第二种方法</span></span><br><span class="line">$li.get(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>【练习：隔行变色案例】</p>
<h2 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h2><h3 id="jQuery-选择器"><a href="#jQuery-选择器" class="headerlink" title="jQuery 选择器"></a>jQuery 选择器</h3><p>jQuery 选择器是 jQuery 为我们提供的一组方法，让我们更加方便的获取到页面中的元素。注意：jQuery 选择器返回的是 jQuery 对象</p>
<p>jQuery 选择器有很多，基本兼容了 CSS1 到 CSS3 所有的选择器，并且 jQuery 还添加了很多更加复杂的选择器</p>
<h3 id="css-选择器"><a href="#css-选择器" class="headerlink" title="css 选择器"></a>css 选择器</h3><p>jQuery 完全兼容 css 选择器</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>用法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td>ID 选择器</td>
<td><code>$(&#39;#id&#39;)</code></td>
<td align="left">获取指定 id 的元素</td>
</tr>
<tr>
<td>类选择器</td>
<td><code>$(&#39;.class&#39;)</code></td>
<td align="left">获取同一类 class 的元素</td>
</tr>
<tr>
<td>标签选择器</td>
<td><code>$(&#39;div&#39;)</code></td>
<td align="left">获取同一类标签的所有元素</td>
</tr>
<tr>
<td>并集选择器</td>
<td><code>$(&#39;div, p, li&#39;)</code></td>
<td align="left">使用逗号分隔，只要符合条件之一就可</td>
</tr>
<tr>
<td>交集选择器</td>
<td><code>$(&#39;div.redClass&#39;)</code></td>
<td align="left">获取 class 为 redClass 的 div 元素</td>
</tr>
<tr>
<td>子代选择器</td>
<td><code>$(&#39;ul&gt;li&#39;)</code></td>
<td align="left">使用 &gt; 号，获取儿子层级的元素，注意，并不会获取孙子层级的元素</td>
</tr>
<tr>
<td>后代选择器</td>
<td><code>$(&#39;ul li&#39;)</code></td>
<td align="left">使用空格，代表后代选择器，获取 ul 下的所有 li 元素，包括孙子等</td>
</tr>
</tbody></table>
<h3 id="过滤选择器"><a href="#过滤选择器" class="headerlink" title="过滤选择器"></a>过滤选择器</h3><p>这类选择器都带冒号 <code>:</code></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>用法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>:eq(index)</code></td>
<td><code>$(&#39;li:eq(2)&#39;)</code></td>
<td align="left">获取 li 元素中，选择索引号为 2 的元素，索引号 index 从 0 开始</td>
</tr>
<tr>
<td><code>:odd</code></td>
<td><code>$(&#39;li:odd&#39;)</code></td>
<td align="left">获取 li 元素中，选择索引号为奇数的元素</td>
</tr>
<tr>
<td><code>:even</code></td>
<td><code>$(&#39;li:even&#39;)</code></td>
<td align="left">获取 li 元素中，选择索引号为偶数的元素</td>
</tr>
<tr>
<td><code>:first</code></td>
<td><code>$(&#39;li:first&#39;)</code></td>
<td align="left">获取 li 元素中的第一个</td>
</tr>
<tr>
<td><code>:last</code></td>
<td><code>$(&#39;li:last&#39;)</code></td>
<td align="left">获取 li 元素中的最后一个</td>
</tr>
</tbody></table>
<p>【案例：隔行变色】</p>
<h3 id="筛选选择器-方法"><a href="#筛选选择器-方法" class="headerlink" title="筛选选择器(方法)"></a>筛选选择器(方法)</h3><p>筛选选择器的功能与过滤选择器有点类似，但是用法不一样，<code>筛选选择器</code> 主要是方法</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>用法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>children(selector)</code></td>
<td><code>$(&#39;ul&#39;).children(&#39;li&#39;)</code></td>
<td align="left">获取当前元素的所有子元素中的 li 元素</td>
</tr>
<tr>
<td><code>find(selector)</code></td>
<td><code>$(&#39;ul&#39;).find(&#39;li&#39;)</code></td>
<td align="left">获取当前元素中的后代元素中的 li 元素</td>
</tr>
<tr>
<td><code>siblings(selector)</code></td>
<td><code>$(&#39;#first&#39;).siblings(&#39;li&#39;)</code></td>
<td align="left">查找兄弟节点，不包括自己本身</td>
</tr>
<tr>
<td><code>parent()</code></td>
<td><code>$(&#39;#first&#39;).parent()</code></td>
<td align="left">查找父亲</td>
</tr>
<tr>
<td><code>parents()</code></td>
<td><code>$(&#39;#first&#39;).parents(&#39;&#39;)</code></td>
<td align="left">查找所有祖宗（参数 指定具体祖宗）</td>
</tr>
<tr>
<td><code>eq(index)</code></td>
<td><code>$(&#39;li&#39;).eq(2)</code></td>
<td align="left">相当于<code>$(&#39;li:eq(2)&#39;)</code>，index 从 0 开始</td>
</tr>
<tr>
<td><code>next()</code></td>
<td><code>$(&#39;li&#39;).next()</code></td>
<td align="left">找下一个兄弟</td>
</tr>
<tr>
<td><code>nextAll()</code></td>
<td><code>$(&#39;li&#39;).nextAll()</code></td>
<td align="left">找后面所有的兄弟</td>
</tr>
<tr>
<td><code>prev()</code></td>
<td><code>$(&#39;li&#39;).prev()</code></td>
<td align="left">找上一个兄弟</td>
</tr>
<tr>
<td><code>prevAll()</code></td>
<td><code>$(&#39;li&#39;).prevAll()</code></td>
<td align="left">找前面所有的兄弟</td>
</tr>
</tbody></table>
<p>【案例：下拉菜单】<br>【案例：突出展示】<br>【案例：手风琴】<br>【案例：淘宝精品】</p>
<h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><h4 id="mouseover-与-mouseenter"><a href="#mouseover-与-mouseenter" class="headerlink" title="mouseover 与 mouseenter"></a><code>mouseover</code> 与 <code>mouseenter</code></h4><ul>
<li>mouseover 和 mouseoverenter 都有鼠标经过的意思，但是在注册鼠标经过事件的时候，推荐使用<code>mouseenter</code></li>
</ul>
<p><a href="http://www.w3school.com.cn/tiy/t.asp?f=jquery_event_mouseenter_mouseover">mouseenter 与 mouseover 的不同</a></p>
<ul>
<li><p>mouseover 与 mouseout 是一对事件，当鼠标经过当前元素或者当前元素的子元素的时候，会触发【事件冒泡】。</p>
</li>
<li><p>mouseenter 与 mouseleave 是一对事件，只有当鼠标经过当前元素时，事件会触发，鼠标经过子元素，mousenter 事件是不会触发的</p>
</li>
</ul>
<h4 id="index-方法"><a href="#index-方法" class="headerlink" title="index 方法"></a>index 方法</h4><p><code>index()</code> 方法返回的是当前元素在所有兄弟元素里面的索引</p>
<h4 id="区分-jQuery-与-Javascript"><a href="#区分-jQuery-与-Javascript" class="headerlink" title="区分 jQuery 与 Javascript"></a>区分 jQuery 与 Javascript</h4><p>JavaScript 是一门编程语言，jQuery 仅仅是用 JavaScript 实现的一个 JavaScript 库，目的是简化我们的开发</p>
<h2 id="jQuery-样式操作"><a href="#jQuery-样式操作" class="headerlink" title="jQuery 样式操作"></a>jQuery 样式操作</h2><h3 id="css-操作"><a href="#css-操作" class="headerlink" title="css 操作"></a>css 操作</h3><p>功能：设置或者修改样式，操作的是 style 属性</p>
<p>设置单个样式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// name：需要设置的样式名称</span></span><br><span class="line"><span class="comment">// value：对应的样式值</span></span><br><span class="line">css(name, value)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用案例</span></span><br><span class="line">$(<span class="string">&#x27;#one&#x27;</span>).css(<span class="string">&#x27;background&#x27;</span>, <span class="string">&#x27;gray&#x27;</span>) <span class="comment">// 将背景色修改为灰色</span></span><br></pre></td></tr></table></figure>

<p>设置多个样式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 参数是一个对象，对象中包含了需要设置的样式名和样式值</span></span><br><span class="line">css(obj)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用案例</span></span><br><span class="line">$(<span class="string">&#x27;#one&#x27;</span>).css(&#123;</span><br><span class="line">  background: <span class="string">&#x27;gray&#x27;</span>,</span><br><span class="line">  width: <span class="string">&#x27;400px&#x27;</span>,</span><br><span class="line">  height: <span class="string">&#x27;200px&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>获取样式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// name: 需要获取的样式名称</span></span><br><span class="line">css(name)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 案例</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).css(<span class="string">&#x27;background-color&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li>设置操作的时候，如果是多个元素，那么给所有的元素设置相同的值</li>
<li>获取操作的时候，如果是多个元素，那么只会返回第一个元素的值</li>
</ul>
<h3 id="class-操作"><a href="#class-操作" class="headerlink" title="class 操作"></a>class 操作</h3><ul>
<li>添加样式类</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 给所有的 div 添加 one 的样式</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).addClass(<span class="string">&#x27;one&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>移除样式类</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 移除 div 中 one 类名</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).removeClass(<span class="string">&#x27;one&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>判断是否有某个样式类</li>
</ul>
<p>判断标准是： 只要有一个元素有指定的类名，就返回 true，所有的元素都没有该类名，就返回 false</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 判断是否有 one 的样式类</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).hasClass(<span class="string">&#x27;one&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>切换样式类</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 如果有，移除该类，如果没有，添加该类</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).toggleClass(<span class="string">&#x27;one&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>【案例：tab 栏切换案例.html】</p>
<h2 id="jQuery-属性操作"><a href="#jQuery-属性操作" class="headerlink" title="jQuery 属性操作"></a>jQuery 属性操作</h2><h3 id="attr-操作"><a href="#attr-操作" class="headerlink" title="attr 操作"></a>attr 操作</h3><p>设置单个属性</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 第一个参数：需要设置的属性名</span></span><br><span class="line"><span class="comment">// 第二个参数：对应的属性值</span></span><br><span class="line">attr(name, value)</span><br><span class="line"><span class="comment">// 用法举例</span></span><br><span class="line">$(<span class="string">&#x27;img&#x27;</span>).attr(<span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;哈哈&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>设置多个属性</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 参数是一个对象，包含了需要设置的属性名和属性值</span></span><br><span class="line">$(<span class="string">&#x27;img&#x27;</span>).attr(&#123;</span><br><span class="line">  title: <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">  alt: <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">  style: <span class="string">&#x27;opacity: .5&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>获取属性</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 传需要获取的属性名称，返回对应的属性值</span></span><br><span class="line"><span class="keyword">var</span> oTitle = $(<span class="string">&#x27;img&#x27;</span>).attr(<span class="string">&#x27;title&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>移除属性</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 参数：需要移除的属性名</span></span><br><span class="line">$(<span class="string">&#x27;img&#x27;</span>).removeAttr(<span class="string">&#x27;title&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>【案例：美女相册.html】</p>
<h3 id="prop-操作"><a href="#prop-操作" class="headerlink" title="prop 操作"></a>prop 操作</h3><p>在 jQuery1.6 之后，对于 checked、selected、disabled 这类 boolean 类型的属性来说，不能用 attr 方法，只能用 prop 方法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设置属性</span></span><br><span class="line">$(<span class="string">&#x27;input:checked&#x27;</span>).prop(<span class="string">&#x27;checked&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line"><span class="comment">// 获取属性</span></span><br><span class="line">$(<span class="string">&#x27;input:checked&#x27;</span>).prop(<span class="string">&#x27;checked&#x27;</span>) <span class="comment">// 返回 true 或者 false</span></span><br></pre></td></tr></table></figure>

<p>【案例：表格全选案例.html】</p>
<h2 id="jQuery-动画"><a href="#jQuery-动画" class="headerlink" title="jQuery 动画"></a>jQuery 动画</h2><p>jquery 提供了三组基本动画，这些动画都是标准的、有规律的效果，jquery 还提供了自定义动画的功能</p>
<h3 id="三组基本动画"><a href="#三组基本动画" class="headerlink" title="三组基本动画"></a>三组基本动画</h3><ul>
<li>显示 (show) 与隐藏 (hide) 与切换 (slideToggle)</li>
<li>上滑 (slideUp) 与下滑 (slideDown) 与切换 (slideToggle)，效果与卷帘门类似</li>
<li>淡入 (fadeIn) 与淡出 (fadeOut) 与切换 (fadeToggle)</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// show() 系列</span></span><br><span class="line">show([speed], [easing], [callback])</span><br><span class="line"><span class="comment">// speed(可选)：动画的执行时间</span></span><br><span class="line"><span class="comment">// 1.如果不传，就没有动画效果。如果是 slide 和 fade 系列，会默认为 normal</span></span><br><span class="line"><span class="comment">// 2.毫秒值(比如1000),动画在1000毫秒执行完成(推荐)</span></span><br><span class="line"><span class="comment">// 3.固定字符串，slow(200)、normal(400)、fast(600)，如果传其他字符串，则默认为normal</span></span><br><span class="line"><span class="comment">// easing(可选)：动画效果，默认是 swing，秋千，提供了一个 linear 匀速的效果</span></span><br><span class="line"><span class="comment">// callback(可选)：执行完动画后执行的回调函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// slide 系列，参数使用和show 是一样的，不传参数，默认有动画效果</span></span><br><span class="line">slideDown([speed], [easing], [callback])</span><br><span class="line"></span><br><span class="line"><span class="comment">// fade 系列，参数使用和 show 是一样的，不传参数，默认有动画效果</span></span><br><span class="line">fadeIn([speed], [easing], [callback])</span><br></pre></td></tr></table></figure>

<p>【案例：下拉菜单动画版.html】<br>【案例：京东轮播图(呼吸灯).html】</p>
<h3 id="自定义动画"><a href="#自定义动画" class="headerlink" title="自定义动画"></a>自定义动画</h3><p>animate：自定义动画（只支持数值型的动画）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(selector).animate(&#123; params &#125;, [speed], [easing], [callback])</span><br><span class="line"><span class="comment">// &#123;params&#125;：要执行动画的 CSS 属性，带数字（必选），多个属性会同时执行</span></span><br><span class="line"><span class="comment">// speed：执行动画时长（可选）</span></span><br><span class="line"><span class="comment">// easing: 执行效果，默认为swing（缓动）  linear（匀速）</span></span><br><span class="line"><span class="comment">// callback：动画执行完后立即执行的回调函数（可选）</span></span><br></pre></td></tr></table></figure>

<h3 id="动画队列与停止动画"><a href="#动画队列与停止动画" class="headerlink" title="动画队列与停止动画"></a>动画队列与停止动画</h3><p>在同一个元素上执行多个动画，那么对于这个动画来说，后面的动画会被放到动画队列中，等前面的动画执行完成了才会执行</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 有顺序的执行效果</span></span><br><span class="line"><span class="comment">// 动画队列：</span></span><br><span class="line"><span class="comment">// 像链式编程一样，通过 . 继续写动画，给元素添加了多个动画, 这多个动画会添加到元素的动画队列里面，按照顺序依次执行</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">    .animate(&#123; <span class="attr">left</span>: <span class="number">800</span> &#125;, <span class="number">1000</span>)</span><br><span class="line">    .animate(&#123; <span class="attr">top</span>: <span class="number">300</span> &#125;, <span class="number">1000</span>)</span><br><span class="line">    .animate(&#123; <span class="attr">borderRadius</span>: <span class="number">50</span> &#125;, <span class="number">1000</span>)</span><br><span class="line">    .slideUp(<span class="number">2000</span>)</span><br><span class="line">    .slideDown(<span class="number">2000</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 好处：可以有顺序的执行动画效果</span></span><br><span class="line"><span class="comment">// 坏处：bug 给元素不停的添加动画，元素就不停的运动</span></span><br></pre></td></tr></table></figure>

<ul>
<li>stop 方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 停止当前正在执行的动画，如果元素的动画队列里面有后续动画，后续动画会执行</span></span><br><span class="line">stop(clearQueue, jumpToEnd)</span><br><span class="line"><span class="comment">// 第一个参数：可选，是否清除队列，true，表示清除掉，默认 false</span></span><br><span class="line"><span class="comment">// 第二个参数：可选，是否跳转到当前正在执行的动画的最终效果，true，表示跳转， 默认false</span></span><br></pre></td></tr></table></figure>

<p>【案例：手风琴特效】<br>【案例：音乐导航】</p>
<h2 id="jQuery-节点操作"><a href="#jQuery-节点操作" class="headerlink" title="jQuery 节点操作"></a>jQuery 节点操作</h2><h3 id="创建节点"><a href="#创建节点" class="headerlink" title="创建节点"></a>创建节点</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// $()</span></span><br><span class="line"><span class="comment">// 括号内写 html 格式的字符串</span></span><br><span class="line">$(<span class="string">&#x27;&lt;span&gt;这是一个span元素&lt;/span&gt;&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="添加节点"><a href="#添加节点" class="headerlink" title="添加节点"></a>添加节点</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// append</span></span><br><span class="line">A.append(B) <span class="comment">// 把 B 添加到 A 里面去，B 作为 A 的最后一个子元素</span></span><br><span class="line"><span class="comment">// appendTo</span></span><br><span class="line">B.appendTo(A) <span class="comment">// 作用同上，写法不同</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// prepend</span></span><br><span class="line">A.prepend(B) <span class="comment">// 把 B 添加到 A 里面去，B 作为 A 的第一个子元素</span></span><br><span class="line"><span class="comment">// prependTo</span></span><br><span class="line">B.prependTo(A) <span class="comment">// 作用同上，写法不同</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// after</span></span><br><span class="line">A.after(B) <span class="comment">// 把 B 作为 A 的兄弟，添加在 A 的后面</span></span><br><span class="line"><span class="comment">// before</span></span><br><span class="line">A.before(B) <span class="comment">// 把 B 作为 A 的兄弟，添加在 A 的前面</span></span><br></pre></td></tr></table></figure>

<p>【案例：城市选择案例】</p>
<h3 id="清空节点与删除节点"><a href="#清空节点与删除节点" class="headerlink" title="清空节点与删除节点"></a>清空节点与删除节点</h3><p>empty：清空指定节点的所有元素，自身保留(清理门户)</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;div&#x27;</span>).empty() <span class="comment">// 清空 div 的所有内容（推荐使用，会清除子元素上绑定的内容，源码）</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).html(<span class="string">&#x27;&#x27;</span>) <span class="comment">// 使用 html 方法来清空元素，不推荐使用，会造成内存泄漏，绑定的事件不会被清除</span></span><br></pre></td></tr></table></figure>

<p>remove：删除节点，会把元素自身给删除掉</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;div&#x27;</span>).remove() <span class="comment">// 删除 div 节点</span></span><br></pre></td></tr></table></figure>

<h3 id="克隆节点"><a href="#克隆节点" class="headerlink" title="克隆节点"></a>克隆节点</h3><p>clone：克隆元素节点</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;div&#x27;</span>).clone() <span class="comment">// 返回复制的 div 新元素，（默认不显示，需要配合 append 方法）</span></span><br><span class="line"><span class="comment">// 新元素和原来的元素没有任何关系</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// clone(布尔类型参数)， 参数为true， 克隆元素的事件，默认值是false</span></span><br></pre></td></tr></table></figure>

<h2 id="jQuery-特殊属性操作"><a href="#jQuery-特殊属性操作" class="headerlink" title="jQuery 特殊属性操作"></a>jQuery 特殊属性操作</h2><h3 id="val"><a href="#val" class="headerlink" title="val()"></a>val()</h3><p>val 方法用于设置和获取表单元素的值，例如 input、textarea 的值</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设置值</span></span><br><span class="line">$(<span class="string">&#x27;#name&#x27;</span>).val(<span class="string">&#x27;张三&#x27;</span>)</span><br><span class="line"><span class="comment">// 获取值</span></span><br><span class="line">$(<span class="string">&#x27;#name&#x27;</span>).val()</span><br></pre></td></tr></table></figure>

<p>【案例：搜索框】</p>
<h3 id="html-与-text"><a href="#html-与-text" class="headerlink" title="html() 与 text()"></a>html() 与 text()</h3><p>html 方法相当于 innerHTML，text 方法相当于 innerText</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设置内容</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).html(<span class="string">&#x27;&lt;span&gt;这是一段内容&lt;/span&gt;&#x27;</span>)</span><br><span class="line"><span class="comment">// 获取内容</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).html()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置内容</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).text(<span class="string">&#x27;&lt;span&gt;这是一段内容&lt;/span&gt;&#x27;</span>)</span><br><span class="line"><span class="comment">// 获取内容</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).text()</span><br></pre></td></tr></table></figure>

<p><strong>区别</strong>：html 方法会识别 html 标签，text 方法会将内容直接当成字符串，并不会识别 html 标签</p>
<h3 id="width-与-height"><a href="#width-与-height" class="headerlink" title="width() 与 height()"></a>width() 与 height()</h3><p>设置或者获取 <strong>内容区域</strong> 的宽度和高度</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 带参数表示设置</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).width(<span class="number">200</span>)</span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).height(<span class="number">200</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不带参数表示获取</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).width()</span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).height()</span><br></pre></td></tr></table></figure>

<p>获取 <strong>内容区域 + padding</strong> 的宽度和高度</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;div&#x27;</span>).innerWidth()</span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).innerHeight()</span><br></pre></td></tr></table></figure>

<p>获取 <strong>内容区域 + padding + border</strong> 的宽度和高度</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;div&#x27;</span>).outerWidth()</span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).outerHeight()</span><br></pre></td></tr></table></figure>

<p>获取 <strong>内容区域 + padding + border + margin</strong> 的宽度和高度</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 传入参数true</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).outerWidth(<span class="literal">true</span>)</span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).outerHeight(<span class="literal">true</span>)</span><br></pre></td></tr></table></figure>

<p>获取网页的可视区宽高</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="built_in">window</span>).width()</span><br><span class="line">$(<span class="built_in">window</span>).height()</span><br></pre></td></tr></table></figure>

<h3 id="scrollTop-与-scrollLeft"><a href="#scrollTop-与-scrollLeft" class="headerlink" title="scrollTop 与 scrollLeft"></a>scrollTop 与 scrollLeft</h3><p>设置或者获取垂直滚动条的位置</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 传参表示设置，不传参表示获取</span></span><br><span class="line">$(<span class="built_in">window</span>).scrollTop(<span class="number">2000</span>)</span><br><span class="line">$(<span class="built_in">window</span>).scrollLeft()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实时的去获取到页面垂直卷曲的距离</span></span><br><span class="line">$(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log($(<span class="built_in">window</span>).scrollTop())</span><br><span class="line">  <span class="built_in">console</span>.log($(<span class="built_in">window</span>).scrollLeft())</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>返回顶部固定写法</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$goTop.click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">&#x27;html, body&#x27;</span>).animate(</span><br><span class="line">    &#123;</span><br><span class="line">      scrollTop: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="number">1000</span></span><br><span class="line">  )</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>【案例：固定菜单栏案例】<br>【案例：小火箭返航案例】</p>
<h3 id="offset-方法与-position-方法"><a href="#offset-方法与-position-方法" class="headerlink" title="offset 方法与 position 方法"></a>offset 方法与 position 方法</h3><p>offset 方法获取元素距离 document 的位置，position 方法获取的是元素距离有定位的父元素的位置</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取元素距离 document 的位置，和父元素没有关系，返回值为对象：&#123;left:100, top:100&#125;</span></span><br><span class="line">$(selector).offset()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取相对于其最近的有定位的父元素的位置，返回值为对象</span></span><br><span class="line">$(selector).position()</span><br></pre></td></tr></table></figure>

<h2 id="jQuery-事件机制"><a href="#jQuery-事件机制" class="headerlink" title="jQuery 事件机制"></a>jQuery 事件机制</h2><p>JavaScript 中已经学习过了事件，但是 jQuery 对 JavaScript 事件进行了封装，增加并扩展了事件处理机制。jQuery 不仅提供了更加优雅的事件处理语法，而且极大的增强了事件的处理能力。</p>
<h3 id="jQuery-事件发展历程-了解"><a href="#jQuery-事件发展历程-了解" class="headerlink" title="jQuery 事件发展历程(了解)"></a>jQuery 事件发展历程(了解)</h3><p>简单事件绑定&gt;&gt; bind 事件绑定&gt;&gt; delegate 事件绑定 &gt;&gt;on 事件绑定(推荐)</p>
<ul>
<li>简单方式事件注册</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// jq 中简单方式注册相同的事件是不会被覆盖的</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">&#x27;2&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).click(<span class="literal">null</span>) <span class="comment">// alert(&#x27;2&#x27;) 依然会执行</span></span><br></pre></td></tr></table></figure>

<p>缺点：不能同时注册多个事件，无法解绑事件</p>
<ul>
<li>bind 方式注册事件</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 第一个参数：事件类型，如果需要给元素注册多个事件，可以用空格隔开写上多个事件名</span></span><br><span class="line"><span class="comment">// 第二个参数：事件处理函数</span></span><br><span class="line">$(<span class="string">&#x27;p&#x27;</span>).bind(<span class="string">&#x27;click mouseenter&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 事件响应方法</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>unbind 解绑事件（不用）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;div&#x27;</span>).unbind() <span class="comment">// 不传参数解绑所有的事件</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).unbind(<span class="string">&#x27;click&#x27;</span>) <span class="comment">// 解绑指定的事件</span></span><br></pre></td></tr></table></figure>

<p>缺点：不支持动态事件绑定</p>
<ul>
<li><p>delegate 注册委托事件</p>
<p>事件是注册给父元素的，由子元素去触发该事件</p>
<p>原理： 事件冒泡</p>
<p>优点：节省内存，支持动态绑定</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 第一个参数：要绑定事件的元素</span></span><br><span class="line"><span class="comment">// 第二个参数：事件类型</span></span><br><span class="line"><span class="comment">// 第三个参数：事件处理函数</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).delegate(<span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 事件注册给了父元素 div，为所有的子元素 p 绑定事件， 由 p 去触发事件</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>undelegate 解绑事件（不用）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;div&#x27;</span>).undelegate() <span class="comment">// 解绑所有的 delegate 事件</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).undelegate(<span class="string">&#x27;click&#x27;</span>) <span class="comment">// 解绑所有的 click 事件</span></span><br></pre></td></tr></table></figure>

<p>缺点：只能注册委托事件，因此注册时间需要记得方法太多了</p>
<h3 id="on-注册事件-重点"><a href="#on-注册事件-重点" class="headerlink" title="on 注册事件(重点)"></a>on 注册事件(重点)</h3><p>jQuery 1.7 之后，jQuery 用 on 统一了所有事件的处理方法，强烈建议使用</p>
<ul>
<li>on 注册简单事件</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 表示给 $(&#x27;div&#x27;) 绑定事件，并且由自己触发，不支持动态绑定</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>on 注册委托事件</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 表示给 $(&#x27;div&#x27;) 绑定代理事件，必须是它的内部元素 span 才能触发这个事件，支持动态绑定</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;span&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>on 注册事件的语法</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 第一个参数：events，绑定事件的名称可以是由空格分隔的多个事件（标准事件或者自定义事件）</span></span><br><span class="line"><span class="comment">// 第二个参数：selector, 执行事件的后代元素（可选），如果没有后代元素，那么事件将有自己执行</span></span><br><span class="line"><span class="comment">// 第三个参数：data，传递给处理函数的数据，事件触发的时候通过event.data来使用（不常使用）</span></span><br><span class="line"><span class="comment">// 第四个参数：handler，事件处理函数</span></span><br><span class="line">$(selector).on(events[,selector][,data],handler)</span><br></pre></td></tr></table></figure>

<h3 id="off-解绑事件"><a href="#off-解绑事件" class="headerlink" title="off 解绑事件"></a>off 解绑事件</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 解绑匹配元素的所有事件，父元素子元素的所有事件都解绑了</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).off()</span><br><span class="line"><span class="comment">// 解绑匹配元素的所有 click 事件</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).off(<span class="string">&#x27;click&#x27;</span>)</span><br><span class="line"><span class="comment">// 解绑子元素 p 的所有 click 事件, 父元素的click事件不会被解绑</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).off(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;p&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="触发事件"><a href="#触发事件" class="headerlink" title="触发事件"></a>触发事件</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 点击 div 触发事件</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="number">2</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可由其他元素触发 div 的事件</span></span><br><span class="line"><span class="comment">// 点击 btn 触发 div 的 click 事件</span></span><br><span class="line">$(<span class="string">&#x27;#btn&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// $(&#x27;div&#x27;).click() // 触发 div 的 click 事件</span></span><br><span class="line">  $(<span class="string">&#x27;div&#x27;</span>).trigger(<span class="string">&#x27;click&#x27;</span>) <span class="comment">// trigger(type) 触发 div 的 click 事件</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="jQuery-事件对象"><a href="#jQuery-事件对象" class="headerlink" title="jQuery 事件对象"></a>jQuery 事件对象</h3><p>jQuery 事件对象其实就是 js 事件对象的一个封装，处理了兼容性</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// screenX 和 screenY 对应屏幕最左上角的值</span></span><br><span class="line"><span class="comment">// clientX 和 clientY 距离页面左上角的位置（忽视滚动条）</span></span><br><span class="line"><span class="comment">// pageX 和 pageY 距离页面最顶部的左上角的位置（会计算滚动条的距离）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// event.keyCode 按下的键盘代码</span></span><br><span class="line"><span class="comment">// event.data 存储绑定事件时传递的附加数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// event.stopPropagation() 阻止事件冒泡行为</span></span><br><span class="line"><span class="comment">// event.preventDefault() 阻止浏览器默认行为</span></span><br><span class="line"><span class="comment">// return false 既能阻止事件冒泡，又能阻止浏览器默认行为</span></span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：<code>js</code> 中的 <code>return false</code> 只能起到阻止浏览器的默认行为，<code>jquery</code> 中的 <code>return false</code> 既能阻止事件冒泡也能阻止浏览器的默认行为</p>
<p>【案例：钢琴版导航（加强)】</p>
<p>【案例：弹幕效果】</p>
<h2 id="jQuery-特点"><a href="#jQuery-特点" class="headerlink" title="jQuery 特点"></a>jQuery 特点</h2><h3 id="隐式迭代"><a href="#隐式迭代" class="headerlink" title="隐式迭代"></a>隐式迭代</h3><h4 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h4><p>隐式迭代：jQuery 在设置属性时会自动的遍历，因此我们不需要再遍历</p>
<ol>
<li>jQuery 在执行设置性操作时，会给所有的元素都设置上相同的值</li>
<li>jQuery 在执行获取性操作时，只会返回第一个元素对应的值</li>
<li>如果想要给每一个元素都设置不同的值，需要手动进行遍历 jQuery 对象</li>
</ol>
<h4 id="each-方法"><a href="#each-方法" class="headerlink" title="each 方法"></a>each 方法</h4><p>遍历 jQuery 对象集合，为每个匹配的元素执行一个函数</p>
<p>语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(selector).each(<span class="function"><span class="keyword">function</span>(<span class="params">index, element</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// index 表示当前元素在所有匹配元素中的索引号</span></span><br><span class="line">  <span class="comment">// element 表示当前元素</span></span><br><span class="line">  <span class="comment">// this 在函数内部，this指向了element</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">$(<span class="string">&#x27;li&#x27;</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">index, ele</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// $(ele).css(&#x27;backgroundColor&#x27;, arr[index])</span></span><br><span class="line">  $(<span class="built_in">this</span>).css(<span class="string">&#x27;backgroundColor&#x27;</span>, arr[index])</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="链式编程"><a href="#链式编程" class="headerlink" title="链式编程"></a>链式编程</h3><p>链式编程的原理：设置性操作会返回一个 jQuery 对象，因此可以继续调用 jQuery 的方法</p>
<ol>
<li>设置操作的时候，可以使用链式编程</li>
<li>获取操作的时候，无法使用链式编程，（因为没有返回 jq 对象）</li>
<li>链式编程不要太长，因为代码可读性差</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">prevObject: 返回上一次找到的jq对象</span><br><span class="line">end() <span class="comment">// 上一次返回的 jq 对象（封装了 prevObject 属性）</span></span><br></pre></td></tr></table></figure>

<p>【案例：五角星评分案例.html】</p>
<h3 id="多库共存"><a href="#多库共存" class="headerlink" title="多库共存"></a>多库共存</h3><p>jQuery 使用 <code>$</code>作为标示符，但是如果与其他框架中的 <code>$</code> 冲突时，jQuery 可以释放 <code>$</code> 符的控制权</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// noConflict() // 返回 $ 的功能</span></span><br><span class="line"><span class="keyword">var</span> c = $.noConflict() <span class="comment">// 释放 $ 的控制权,并且把 $ 的能力给了 c</span></span><br></pre></td></tr></table></figure>

<h2 id="jQuery-插件"><a href="#jQuery-插件" class="headerlink" title="jQuery 插件"></a>jQuery 插件</h2><p>插件：其实就是个 js 库，依赖于 jquery，而且在 jquery 的基础上新增一些功能</p>
<h3 id="使用插件"><a href="#使用插件" class="headerlink" title="使用插件"></a>使用插件</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. 先引入jQuery文件</span><br><span class="line">2. 在引入插件（如果有用到css的话，需要引入css）</span><br><span class="line">3. 使用插件</span><br></pre></td></tr></table></figure>

<p>常用插件的使用</p>
<ul>
<li><p><a href="https://github.com/jquery/jquery-color">jquery.color.js</a></p>
<p>animate 只支持数值型的动画，色值型的不支持，这个插件就可以让 animate 做色值型的动画</p>
</li>
<li><p><a href="https://github.com/tuupola/jquery_lazyload">jquery.lazyload.js</a></p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用方法</span></span><br><span class="line"><span class="comment">// html图片调用方法</span></span><br><span class="line"><span class="comment">// 为图片加入样式 lazy 图片路径引用方法用 data-original</span></span><br><span class="line"><span class="comment">// &lt;img class=&#x27;lazy&#x27; data-original=&#x27;img/1.jpg&#x27;&gt;</span></span><br><span class="line"><span class="comment">// js出始化lazyload并设置图片显示方式</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">&#x27;img.lazy&#x27;</span>).lazyload(&#123;</span><br><span class="line">    effect: <span class="string">&#x27;fadeIn&#x27;</span>,</span><br><span class="line">    placeholder: <span class="string">&#x27;img/2.jpg&#x27;</span>, <span class="comment">// 用图片提前占位,待图片加载时,占位图则会隐藏</span></span><br><span class="line">    effect: <span class="string">&#x27;fadeIn&#x27;</span>, <span class="comment">// 载入使用何种效果</span></span><br><span class="line">    threshold: <span class="number">200</span>, <span class="comment">// 表示滚动条在离目标位置200的高度时开始加载图片,可以做到不让用户察觉</span></span><br><span class="line">    event: <span class="string">&#x27;click&#x27;</span> <span class="comment">// 事件触发时才加载</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="制作-jQuery-插件"><a href="#制作-jQuery-插件" class="headerlink" title="制作 jQuery 插件"></a>制作 jQuery 插件</h3><p>制作 jQuery 插件的核心思想：给 jQuery 的原型增加方法即可。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$.fn.pluginName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>制作基本的 jQuery 插件（jquery.bgc.js）</li>
<li>制作手风琴插件</li>
</ul>
<h2 id="jQuery-架构"><a href="#jQuery-架构" class="headerlink" title="jQuery 架构"></a>jQuery 架构</h2><p>看源码学习推荐看 1.7.0 版本，源码比较清晰</p>
<h3 id="jq-的基本架构"><a href="#jq-的基本架构" class="headerlink" title="jq 的基本架构"></a>jq 的基本架构</h3><p>沙箱 ，减少全局污染</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="built_in">window</span>, <span class="literal">undefined</span></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// console.log(undefined)</span></span><br><span class="line">  <span class="keyword">var</span> jQuery = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  <span class="comment">// 往外暴露</span></span><br><span class="line">  <span class="built_in">window</span>.jQuery = <span class="built_in">window</span>.$ = jQuery</span><br><span class="line">&#125;)(<span class="built_in">window</span>)</span><br><span class="line"><span class="keyword">var</span> jq = <span class="keyword">new</span> jQuery() <span class="comment">// ==&gt; 得到一个jq的实例对象</span></span><br><span class="line"><span class="built_in">console</span>.log(jq)</span><br></pre></td></tr></table></figure>

<p>参数 <code>window</code> 的作用：</p>
<ul>
<li>减少对 window 的搜索过程</li>
<li>有利于代码压缩</li>
</ul>
<p>参数 <code>undefined</code> 的作用：</p>
<ul>
<li>参数 <code>undefined</code> 的值是 <code>undefined</code></li>
<li><code>undefined</code> 这个数据类型的值在 ie678 中是可以被修改的，现在有 <code>undefined</code> 形参在这，在沙箱里面去使用 <code>undefined</code> 的时候，就不会去引用外面被修改的 <code>undefined</code> 的值</li>
</ul>
<h3 id="省去-new-操作"><a href="#省去-new-操作" class="headerlink" title="省去 new 操作"></a>省去 new 操作</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 省去 new 操作，得到一个jq的实例对象</span></span><br><span class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="built_in">window</span>, <span class="literal">undefined</span></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// jQuery 是 工厂函数， 里面干啥？</span></span><br><span class="line">  <span class="keyword">var</span> jQuery = <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// return new 构造函数</span></span><br><span class="line">    <span class="comment">// 在 jq 里面，真正的构造函数是 init，而且 init 方法放在 jq 的原型上</span></span><br><span class="line">    <span class="comment">// jQuery.fn.init ==&gt; 是从 jq 的原型上拿 init 方法</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> jQuery.fn.init(selector) <span class="comment">// init 何种调用模式， 构造函数模式</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  jQuery.fn = jQuery.prototype = &#123;</span><br><span class="line">    <span class="comment">// 原型替换</span></span><br><span class="line">    <span class="title">constructor</span>: <span class="title">jQuery</span>,</span><br><span class="line">    <span class="title">init</span>: <span class="title">function</span>(<span class="params">selector</span>) &#123;</span><br><span class="line">      <span class="comment">// init 是真正的构造函数</span></span><br><span class="line">      <span class="comment">// 获取元素</span></span><br><span class="line">      <span class="keyword">var</span> ele = <span class="built_in">document</span>.querySelectorAll(selector)</span><br><span class="line">      <span class="comment">// this ==&gt; init的实例对象</span></span><br><span class="line">      ;[].push.apply(<span class="built_in">this</span>, ele)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    css: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;css is ok&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">window</span>.jQuery = <span class="built_in">window</span>.$ = jQuery</span><br><span class="line">&#125;)(<span class="built_in">window</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把 init 的构造函数的 prototype 改成 jquery 的原型</span></span><br><span class="line"><span class="comment">// 目的： 让 init 的实例对象可以访问 jq 原型上的方法</span></span><br><span class="line">jQuery.fn.init.prototype = jQuery.fn</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> $div = $(<span class="string">&#x27;div&#x27;</span>) <span class="comment">// init实例对象</span></span><br><span class="line"><span class="built_in">console</span>.log($div)</span><br><span class="line">$div.css()</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>jquery</tag>
      </tags>
  </entry>
  <entry>
    <title>js 模块化编程</title>
    <url>/407.html</url>
    <content><![CDATA[<h1 id="Javascript-模块化编程"><a href="#Javascript-模块化编程" class="headerlink" title="Javascript 模块化编程"></a>Javascript 模块化编程</h1><blockquote>
<p>最初 Javascript 不是一种模块化编程语言(es6 开始支持)。为了能够尽可能的实现 js 的模块化，我们会把代码写成这样:</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 最原始:封装函数写法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// code</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// code</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 上面的函数fn1()和fn2()，组成一个模块。使用的时候，直接调用就行了</span></span><br><span class="line"><span class="comment">// 这种做法的缺点很明显：&quot;污染&quot;了全局变量，无法保证不与其他模块发生变量名冲突，而且模块成员之间看不出直接关系</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 2. 对象写法</span></span><br><span class="line"><span class="comment">// 为了解决上面的缺点，可以把模块写成一个对象，所有的模块成员都放到这个对象里面</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> module1 = &#123;</span><br><span class="line">  _count: <span class="number">0</span>,</span><br><span class="line">  fn1: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//code</span></span><br><span class="line">  &#125;,</span><br><span class="line">  fn2: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//code</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 上面的函数fn1()和fn2()，都封装在module1对象里。使用的时候，就是调用这个对象的属性</span></span><br><span class="line"><span class="comment">//　module1.fn1()</span></span><br><span class="line"><span class="comment">// 但是，这样的写法会暴露所有模块成员，内部状态可以被外部改写。比如，外部代码可以直接改变内部计数器的值</span></span><br><span class="line"><span class="comment">// module1._count = 666</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>js 模块的基本写法</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 3.立即执行函数(自调用函数)写法  (沙箱模式)</span></span><br><span class="line"><span class="comment">// 使用&quot;立即执行函数&quot;，可以达到不暴露私有成员的目的</span></span><br><span class="line"><span class="keyword">var</span> module1 = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _count = <span class="number">0</span> <span class="comment">//一般私有的变量:申明变量名时,以_开头</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// code</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// code</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    fn1: fn1,</span><br><span class="line">    fn2: fn2</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用上面的写法，外部代码无法读取内部的 _count 变量</span></span><br><span class="line"><span class="comment">// console.info(module1._count) // undefined</span></span><br></pre></td></tr></table></figure>

<h2 id="模块化的标准"><a href="#模块化的标准" class="headerlink" title="模块化的标准"></a>模块化的标准</h2><p>让模块拥有更好的通用性</p>
<ul>
<li>AMD : Async Module Definition 异步模块定义</li>
</ul>
<blockquote>
<p>依赖前置、提前执行： 在一开始就将所有的依赖项全部加载</p>
</blockquote>
<ul>
<li>CMD : Common Module Definition 通用模块定义</li>
</ul>
<blockquote>
<p>依赖就近、延迟执行： 在需要的时候才去 require 加载依赖项</p>
</blockquote>
<ul>
<li><p>commonJS: node.js 同步加载模块，适用于服务端</p>
</li>
<li><p>ES6 标准模块化规范</p>
</li>
</ul>
<h3 id="CMD-Common-Module-Definition"><a href="#CMD-Common-Module-Definition" class="headerlink" title="CMD (Common Module Definition)"></a>CMD (Common Module Definition)</h3><blockquote>
<p>同步加载模块 SeaJS</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// module add.js</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="built_in">require</span>, <span class="built_in">exports</span>, <span class="built_in">module</span></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 正确写法</span></span><br><span class="line">  <span class="comment">// 给 module.exports 赋值</span></span><br><span class="line">  <span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    add: <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123; <span class="keyword">return</span> a + b &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 或使用 return</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    add: <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123; <span class="keyword">return</span> a + b &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 错误用法</span></span><br><span class="line">  <span class="comment">// 对 module.exports 的赋值需要同步执行，不能放在回调函数里</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">module</span>.exports = &#123; <span class="attr">a</span>: <span class="string">&#x27;hello&#x27;</span> &#125;</span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line">  <span class="comment">// exports 仅仅是 module.exports 的一个引用。在 factory 内部给 exports 重新赋值时，并不会改变 module.exports 的值。因此给 exports 赋值是无效的，不能用来更改模块接口</span></span><br><span class="line">  <span class="built_in">exports</span> = &#123;</span><br><span class="line">    add: <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123; <span class="keyword">return</span> a + b &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">var</span> &#123; add &#125; = <span class="built_in">require</span>(<span class="string">&#x27;./add&#x27;</span>) <span class="comment">// 此处是同步加载，且可以实现条件加载，因为只有运行到该行代码的时候才会加载模块</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;1 + 2 = &#x27;</span> + add(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同步加载这对服务器端不是一个问题，因为所有的模块都存放在本地硬盘，可以同步加载完成，等待时间就是硬盘的读取时间。但是，对于浏览器，这却是一个大问题，因为模块都放在服务器端，等待时间取决于网速的快慢，可能要等很长时间，浏览器处于&quot;假死&quot;状态</span></span><br></pre></td></tr></table></figure>

<h3 id="AMD-Asynchronous-Module-Definition"><a href="#AMD-Asynchronous-Module-Definition" class="headerlink" title="AMD (Asynchronous Module Definition)"></a>AMD (Asynchronous Module Definition)</h3><blockquote>
<p>异步加载模块 <a href="http://requirejs.org/">requireJs</a> 库应用这一规范</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// module add.js</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    add: <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123; <span class="keyword">return</span> a + b &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="comment">// 第一个参数是要请求的模块,第二个参数是依赖模块请求完成的回调函数</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">&#x27;add&#x27;</span>], <span class="function"><span class="keyword">function</span> (<span class="params">add</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;1 + 2 = &#x27;</span> + add(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="AMD-和-CMD-区别"><a href="#AMD-和-CMD-区别" class="headerlink" title="AMD 和 CMD 区别"></a>AMD 和 CMD 区别</h3><p>AMD 和 CMD 最大的区别是对依赖模块的执行时机处理不同，而不是加载的时机或者方式不同，二者皆为异步加载模块。</p>
<p>AMD(requirejs)是将所有文件同时加载、一次性引入、推崇依赖前置、也就是在定义模块时要先声明其依赖的模块、加载完模块后会立马执行该模块(运行时加载)，所有模块都加载执行完后会进入 require 的回调函数，执行主逻辑，这样的效果就是依赖模块的执行顺序和书写顺序不一定一致，看网络速度，哪个先下载下来，哪个先执行，但是主逻辑一定在所有依赖加载完成后才执行</p>
<p>CMD(seajs)强调的是一个文件一个模块、可按需引入、推崇依赖就近、加载完某个模块后不会立即执行，只是下载而已，所有依赖模块加载完成后进入主逻辑，遇到 require 语句的时候才执行对应的模块，这样模块的执行顺序和书写顺序是完全一致的</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// CMD</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="built_in">require</span>, <span class="built_in">exports</span>, <span class="built_in">module</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">&#x27;./a&#x27;</span>)</span><br><span class="line">  a.doSomething()</span><br><span class="line">  <span class="keyword">var</span> b = <span class="built_in">require</span>(<span class="string">&#x27;./b&#x27;</span>) <span class="comment">// 依赖可以就近书写</span></span><br><span class="line">  b.doSomething()</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// AMD</span></span><br><span class="line">define([<span class="string">&#x27;./a&#x27;</span>, <span class="string">&#x27;./b&#x27;</span>], <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 依赖必须一开始就写好</span></span><br><span class="line">  a.doSomething()</span><br><span class="line">  b.doSomething()</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="CommonJS-规范"><a href="#CommonJS-规范" class="headerlink" title="CommonJS 规范"></a>CommonJS 规范</h3><blockquote>
<p>Node 应用由模块组成，采用 CommonJS 模块规范，每个文件就是一个模块，有自己的作用域</p>
</blockquote>
<p>在前端浏览器里面并不支持 module.exports</p>
<p>有四个重要的环境变量为模块化的实现提供支持：module、exports、require、global</p>
<h4 id="node-中模块分类"><a href="#node-中模块分类" class="headerlink" title="node 中模块分类"></a>node 中模块分类</h4><ul>
<li><p>核心模块：由 node 本身提供，不需要单独安装（npm），可直接引入使用</p>
<ul>
<li>fs：文件操作模块</li>
<li>http：网络操作模块</li>
<li>path：路径操作模块</li>
<li>url：解析地址的模块</li>
<li>querystring：解析参数字符串的模块</li>
</ul>
</li>
<li><p>第三方模块：由社区或个人提供，需要通过 npm 安装后使用，比如：mime 模块/art-template/jquery</p>
</li>
<li><p>自定义模块：由开发人员自己创建，比如：tool.js 、 user.js</p>
</li>
</ul>
<h4 id="模块导入"><a href="#模块导入" class="headerlink" title="模块导入"></a>模块导入</h4><ul>
<li>核心模块直接引入使用：<code>require(&#39;fs&#39;)</code> 加载文件操作模块</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引入模块</span></span><br><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>第三方模块，需要先使用 npm 进行下载</li>
<li>自定义模块，需要加上相对路径 <code>./</code> 或者 <code>../</code> ，可以省略 <code>.js</code> 后缀，如果文件名是 <code>index.js</code> 那么 index.js 也可以省略</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 加载模块</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;./a&#x27;</span>) <span class="comment">// 推荐使用，省略 .js 后缀</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;./a.js&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>模块可以被多次导入，但是只会在第一次加载</li>
</ul>
<h4 id="模块导出"><a href="#模块导出" class="headerlink" title="模块导出"></a>模块导出</h4><ul>
<li>在模块的内部，<code>module</code> 变量代表的就是当前模块，它的 <code>exports</code> 属性就是对外的接口，加载某个模块，加载的就是 <code>module.exports</code> 属性，这个属性指向一个空的对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// module.exports 指向的是一个对象，我们给对象增加属性即可</span></span><br><span class="line"><span class="built_in">module</span>.exports.num = <span class="number">123</span></span><br><span class="line"><span class="built_in">module</span>.exports.age = <span class="number">18</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过 module.exports 也可以导出一个值，但是多次导出会覆盖</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="string">&#x27;123&#x27;</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function">() =&gt;</span> &#123;&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="module-exports-与-exports"><a href="#module-exports-与-exports" class="headerlink" title="module.exports 与 exports"></a>module.exports 与 exports</h4><ul>
<li><p>exports 不是 module.exports 的缩写，exports 是单独存在的</p>
</li>
<li><p>exports 和 module.exports 默认指向同一个对象</p>
</li>
<li><p>模块最终导出的一定是 module.exports 中的数据</p>
</li>
<li><p>结论:</p>
<ul>
<li><p>直接添加属性两者皆可</p>
</li>
<li><p>赋值对象时，只能使用 <code>module.exports</code></p>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">module</span>.exports === <span class="built_in">exports</span>) <span class="comment">// ==&gt; true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 等价操作</span></span><br><span class="line"><span class="built_in">module</span>.exports.num = <span class="number">123</span></span><br><span class="line"><span class="built_in">exports</span>.num = <span class="number">123</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 赋值为新对象</span></span><br><span class="line"><span class="built_in">exports</span> = &#123;&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;&#125;</span><br><span class="line"><span class="comment">// 模块导出的是 module.exports 指向的对象</span></span><br></pre></td></tr></table></figure>

<h4 id="nodejs-中-require-加载模块的规则"><a href="#nodejs-中-require-加载模块的规则" class="headerlink" title="nodejs 中 require 加载模块的规则"></a>nodejs 中 require 加载模块的规则</h4><p>require(‘mime’) 以 mime 为例</p>
<ol>
<li>如果加载的模块是一个路径，表示加载的自定义模块，根据路径查找对应的 js 文件</li>
<li>如果加载的模块是一个名字，不是一个路径，说明加载的是核心模块或者是第三方模块</li>
<li>判断是否是核心模块，如果不是核心模块，会在当前目录下查找是否有 node_modules 目录</li>
<li>如果有，在 node_modules 目录下查找 mime 这个文件夹，找到 mime 文件夹下的 package.json 文件，找到 main 属性，即模块的入口文件，如果没有 main，默认查找当前目录下的 index.js 文件</li>
<li>如果没有找到对应的模块，回去上一层目录，继续查找，一直找到根目录 C: || D: || E:</li>
<li>报错： can not find module xxx</li>
</ol>
<h3 id="ES6-模块化-import-和-export"><a href="#ES6-模块化-import-和-export" class="headerlink" title="ES6 模块化 - import 和 export"></a>ES6 模块化 - import 和 export</h3><p>Modules 不是对象，<span class="red">import 命令会被 JavaScript 引擎静态分析，在编译时就引入模块代码，而不是在代码运行时加载，所以无法实现条件加载。</span>也正因为这个，使得静态分析成为可能</p>
<p>export default 默认导出一个模块 ( 简单类型 + 复杂类型 )</p>
<ul>
<li><strong>导出 : export default</strong></li>
</ul>
<p>默认只能导出一个</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;abc&#x27;</span></span><br><span class="line"><span class="keyword">let</span> num = <span class="number">20</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> num</span><br><span class="line"><span class="comment">// export default obj</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>导入 : import</strong></p>
<p>导入的名字可以任意</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> res <span class="keyword">from</span> <span class="string">&#x27;./a.js&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(res)</span><br></pre></td></tr></table></figure>

<p>export 导出多个模块，都放在一个对象里</p>
<ul>
<li><strong>导出 : export</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123; num, str &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>导入 : import</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; num, str &#125; <span class="keyword">from</span> <span class="string">&#x27;./a&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(num, str)</span><br></pre></td></tr></table></figure>

<h3 id="es6-import-函数"><a href="#es6-import-函数" class="headerlink" title="es6 import() 函数"></a>es6 import() 函数</h3><p>参数同 import 命令的参数</p>
<p>返回一个 promise 对象</p>
<p>import() 函数可以用在任何地方，不仅仅是模块，非模块的脚本也可以使用。它是运行时执行，也就是说，什么时候运行到这一句，也会加载指定的模块。另外，import() 函数与所加载的模块没有静态连接关系，这点也是与 import</p>
<p>import()类似于 Node 的 require 方法，区别主要是前者是异步加载，后者是同步加载。</p>
<p>应用： 按需加载，条件加载，动态模块路径</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="string">&#x27;./myModule.js&#x27;</span>).then(<span class="function">(<span class="params">&#123; export1, export2 &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>同时加载多个模块</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.all([</span><br><span class="line"><span class="keyword">import</span>(<span class="string">&#x27;./module1.js&#x27;</span>),</span><br><span class="line"><span class="keyword">import</span>(<span class="string">&#x27;./module2.js&#x27;</span>),</span><br><span class="line"><span class="keyword">import</span>(<span class="string">&#x27;./module3.js&#x27;</span>),</span><br><span class="line">])</span><br><span class="line">.then(<span class="function">(<span class="params">[module1, module2, module3]</span>) =&gt;</span> &#123;</span><br><span class="line">···</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>import()也可以用在 async 函数之中。</p>
<p>在 webpack 中使用 import() 动态加载模块时，webpack 默认会将所有 import()的模块都进行单独打包</p>
<p><a href="https://webpack.js.org/api/module-methods/#import-1">https://webpack.js.org/api/module-methods/#import-1</a></p>
<h3 id="CommonJS-模块-和-ES6-模块化区别"><a href="#CommonJS-模块-和-ES6-模块化区别" class="headerlink" title="CommonJS 模块 和 ES6 模块化区别"></a>CommonJS 模块 和 ES6 模块化区别</h3><p>CommonJS 模块是运行时加载，ES6 模块是编译时输出接口<br>运行时加载: CommonJS 模块就是对象；即在输入时是先加载整个模块，生成一个对象，然后再从这个对象上面读取方法，这种加载称为“运行时加载”<br>编译时加载: ES6 模块不是对象，而是通过 export 命令显式指定输出的代码，import 时采用静态命令的形式。即在 import 时可以指定加载某个输出值，而不是加载整个模块，这种加载称为“编译时加载”</p>
<h2 id="使用-require-js"><a href="#使用-require-js" class="headerlink" title="使用 require.js"></a>使用 require.js</h2><p>js 文件加载的时候，浏览器会停止网页渲染，加载文件越多，网页失去响应的时间就会越长；由于 js 文件之间存在依赖关系，因此必须严格保证加载顺序，依赖性最大的模块一定要放到最后加载，当依赖关系很复杂的时候，代码的编写和维护都会变得困难</p>
<p>require.js 的诞生，就是为了解决这两个问题：</p>
<blockquote>
<p>（1）实现 js 文件的异步加载，避免网页失去响应；</p>
<p>（2）管理模块之间的依赖性，便于代码的编写和维护。</p>
</blockquote>
<h3 id="require-js-的下载和引入"><a href="#require-js-的下载和引入" class="headerlink" title="require.js 的下载和引入"></a>require.js 的下载和引入</h3><p><a href="http://requirejs.org/">官网</a></p>
<p>中文网 <a href="http://www.requirejs.cn/">http://www.requirejs.cn</a></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 引入方式: --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/require.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>加载这个文件，也可能造成网页失去响应。解决办法有两个，一个是把它放在网页底部加载，另一个是写成下面这样：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- async 属性表明这个文件需要异步加载，避免网页失去响应 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- IE不支持这个属性，只支持 defer，所以把 defer 也写上 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/require.js&quot;</span> <span class="attr">defer</span> <span class="attr">async</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>加载 require.js 以后，下一步就要加载我们自己的代码了。假定我们自己的代码文件是 main.js，也放在 js 目录下面。那么，只需要写成下面这样就行了：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- data-main 属性的作用是，指定网页程序的主模块。在上例中，就是 js 目录下面的 main.js，这个文件会第一个被 require.js 加载。由于 require.js 默认的文件后缀名是 js ，所以可以把 main.js 简写成 main。--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/require.js&quot;</span> <span class="attr">data-main</span>=<span class="string">&quot;js/main&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="主模块的写法"><a href="#主模块的写法" class="headerlink" title="主模块的写法"></a>主模块的写法</h3><p>main.js，我把它称为”主模块”，意思是整个网页的入口代码。所有代码都从这儿开始运行</p>
<p>下面就来看，怎么写 main.js</p>
<p>如果我们的代码不依赖任何其他模块，那么可以直接写入 javascript 代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line">alert(<span class="string">&#x27;加载成功！&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>但这样的话，就没必要使用 require.js 了。真正常见的情况是，主模块依赖于其他模块，这时就要使用 AMD 规范定义的的 require()函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">&#x27;moduleA&#x27;</span>, <span class="string">&#x27;moduleB&#x27;</span>, <span class="string">&#x27;moduleC&#x27;</span>], <span class="function"><span class="keyword">function</span>(<span class="params">moduleA, moduleB, moduleC</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// some code here</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// require.js 要求，每个模块是一个单独的js文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// require() 函数接受两个参数。第一个参数是一个数组，表示所依赖的模块，上例就是[&#x27;moduleA&#x27;, &#x27;moduleB&#x27;, &#x27;moduleC&#x27;]，即主模块依赖这三个模块；第二个参数是一个回调函数，当前面指定的模块都加载成功后，它将被调用。加载的模块会以参数形式传入该函数，从而在回调函数内部就可以使用这些模块</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// require() 异步加载 moduleA，moduleB 和 moduleC，浏览器不会失去响应；它指定的回调函数，只有前面的模块都加载成功后，才会运行，解决了依赖性的问题</span></span><br></pre></td></tr></table></figure>

<h3 id="每个-AMD-模块的写法"><a href="#每个-AMD-模块的写法" class="headerlink" title="每个 AMD 模块的写法"></a>每个 AMD 模块的写法</h3><blockquote>
<p>require.js 加载的模块，采用 AMD 规范。也就是说，模块必须按照 AMD 的规定来写</p>
<p>具体来说，就是模块必须采用特定的 define() 函数来定义</p>
</blockquote>
<blockquote>
<p>如果一个模块不依赖其他模块，那么可以直接定义在 define() 函数之中</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 假定现在有一个 math.js 文件，它定义了一个 math 模块。那么，math.js 就要这样写：</span></span><br><span class="line"><span class="comment">// math.js</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    add: add</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>加载方法如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">&#x27;math&#x27;</span>], <span class="function"><span class="keyword">function</span>(<span class="params">math</span>) </span>&#123;</span><br><span class="line">  alert(math.add(<span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果这个模块还依赖其他模块，那么 define() 函数的第一个参数，必须是一个数组，指明该模块的依赖性</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 当require() 函数加载上面这个模块的时候，就会先加载 myLib.js 文件</span></span><br><span class="line">define([<span class="string">&#x27;myLib&#x27;</span>], <span class="function"><span class="keyword">function</span>(<span class="params">myLib</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    myLib.doSomething()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    foo: foo</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="模块加载的配置"><a href="#模块加载的配置" class="headerlink" title="模块加载的配置"></a>模块加载的配置</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 上面代码中主模块的依赖模块是[&#x27;moduleA&#x27;, &#x27;moduleB&#x27;, &#x27;moduleC&#x27;]。默认情况下，require.js 假定这三个模块与 main.js 在同一个目录，文件名分别为 moduleA.js，moduleB.js 和 moduleC.js，然后自动加载</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 require.config() 方法，我们可以对模块的加载行为进行自定义。require.config() 写在主模块（main.js）的头部。参数就是一个对象，这个对象的 paths 属性指定各个模块的加载路径</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">require</span>.config(&#123;</span><br><span class="line">  paths: &#123;</span><br><span class="line">    moduleA: <span class="string">&#x27;moduleA.min&#x27;</span>,</span><br><span class="line">    moduleB: <span class="string">&#x27;moduleB.min&#x27;</span>,</span><br><span class="line">    moduleC: <span class="string">&#x27;moduleC.min&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 上面的代码给出了三个模块的文件名，路径默认与 main.js 在同一个目录（js子目录）。如果这些模块在其他目录，比如js/lib目录，则有两种写法。一种是逐一指定路径。</span></span><br><span class="line"><span class="built_in">require</span>.config(&#123;</span><br><span class="line">  paths: &#123;</span><br><span class="line">    <span class="comment">// 注意:路径相对的是 main 的路径, 不需要写后缀名,require 会自动加</span></span><br><span class="line">    moduleA: <span class="string">&#x27;lib/moduleA.min&#x27;</span>,</span><br><span class="line">    moduleB: <span class="string">&#x27;lib/moduleB.min&#x27;</span>,</span><br><span class="line">    moduleC: <span class="string">&#x27;lib/moduleC.min&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 另一种则是直接改变基目录（baseUrl）。</span></span><br><span class="line"><span class="built_in">require</span>.config(&#123;</span><br><span class="line">  baseUrl: <span class="string">&#x27;js/lib&#x27;</span>,</span><br><span class="line">  paths: &#123;</span><br><span class="line">    moduleA: <span class="string">&#x27;moduleA.min&#x27;</span>,</span><br><span class="line">    moduleB: <span class="string">&#x27;moduleB.min&#x27;</span>,</span><br><span class="line">    moduleC: <span class="string">&#x27;moduleC.min&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果某个模块在另一台主机上，也可以直接指定它的网址，比如：</span></span><br><span class="line"><span class="built_in">require</span>.config(&#123;</span><br><span class="line">  paths: &#123;</span><br><span class="line">    jquery: <span class="string">&#x27;https://code.jquery.com/jquery-3.3.1.min&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="加载非规范的模块"><a href="#加载非规范的模块" class="headerlink" title="加载非规范的模块"></a>加载非规范的模块</h3><blockquote>
<p>理论上，require.js 加载的模块，必须是按照 AMD 规范、用 define() 函数定义的模块。但是实际上，虽然已经有一部分流行的函数库（比如 jQuery）符合 AMD 规范，更多的库并不符合。那么，require.js 是否能够加载非规范的模块呢？</p>
<p>回答是可以的</p>
<p>这样的模块在用 require()加载之前，要先用 require.config() 方法，定义它们的一些特征</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// require.config() 接受一个配置对象，这个对象除了有前面说过的 paths 属性之外，还有一个 shim 属性，专门用来配置不兼容的模块。具体来说，每个模块要定义：（1）exports值（输出的变量名），表明这个模块外部调用时的名称；（2）deps数组，表明该模块的依赖性。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 加入有一个demo.js文件,没有按照AMD规范定义, 那么应该如果使用呢?</span></span><br><span class="line"><span class="comment">// 1. 在 paths 中先配置一下这个 demo.js 的路径</span></span><br><span class="line"><span class="comment">// 2. 在 shim 中配置这个文件的依赖项和导出项</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// demo.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animate</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">&#x27;.box&#x27;</span>)</span><br><span class="line">    .stop(<span class="literal">true</span>)</span><br><span class="line">    .fadeIn(<span class="number">1000</span>)</span><br><span class="line">    .fadeOut(<span class="number">1000</span>)</span><br><span class="line">    .slideDown(<span class="number">1000</span>)</span><br><span class="line">    .hide(<span class="number">1000</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;动画执行了&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="built_in">require</span>.config(&#123;</span><br><span class="line">  paths: &#123;</span><br><span class="line">    jquery: <span class="string">&#x27;https://code.jquery.com/jquery-3.3.1.min&#x27;</span>,</span><br><span class="line">    demo: <span class="string">&#x27;demo.js 相对 main.js 的路径&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  shim: &#123;</span><br><span class="line">    demo: &#123;</span><br><span class="line">      deps: [<span class="string">&#x27;jquery&#x27;</span>],</span><br><span class="line">      <span class="comment">// 注意: 这里导出项要写的是demo.js中的那些内容</span></span><br><span class="line">      <span class="comment">// 这里要导出 animate 函数</span></span><br><span class="line">      <span class="built_in">exports</span>: <span class="string">&#x27;animate&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">require</span>([<span class="string">&#x27;demo&#x27;</span>], <span class="function"><span class="keyword">function</span>(<span class="params">demo</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(demo)</span><br><span class="line">  demo() <span class="comment">// 会执行demo.js 文件中 animate 函数</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>模块化</tag>
      </tags>
  </entry>
  <entry>
    <title>nodejs 基本使用</title>
    <url>/409.html</url>
    <content><![CDATA[<h1 id="nodejs-基本介绍"><a href="#nodejs-基本介绍" class="headerlink" title="nodejs 基本介绍"></a>nodejs 基本介绍</h1><h2 id="为什么要学习-nodejs"><a href="#为什么要学习-nodejs" class="headerlink" title="为什么要学习 nodejs"></a>为什么要学习 nodejs</h2><ol>
<li>降低编程语言切换的成本(nodejs 实质上用的还是 javascript)</li>
<li>NodeJS 是前端项目的基础设施，前端项目中用到的大量工具 (大前端)</li>
<li>nodejs 在处理高并发上有得天独厚的优势(利用 nodejs 做中间层)</li>
<li>对于前端工程师，面试时对于 nodejs 有一定的要求</li>
</ol>
<h2 id="node-js-是什么？"><a href="#node-js-是什么？" class="headerlink" title="node.js 是什么？"></a>node.js 是什么？</h2><p>node.js，也叫作 node，或者 nodejs，指的都是一个平台</p>
<ol>
<li><a href="https://nodejs.org/">node.js 官方网站</a></li>
<li><a href="http://nodejs.cn/">node.js 中文网</a></li>
<li><a href="https://cnodejs.org/">node.js 中文社区</a></li>
</ol>
<p>Node.js 是一个基于 Chrome V8 引擎的 JavaScript 运行环境，nodejs 允许 javascript 代码运行在服务端</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. nodejs不是一门新的编程语言，nodejs是在服务端运行javascript的运行环境</span><br><span class="line">2. 运行环境：写得程序想要运行必须要有对应的运行环境</span><br><span class="line">	php代码必须要有apache服务器</span><br><span class="line">	在web端，浏览器就是javascript的运行环境</span><br><span class="line">	在node端，nodejs就是javascript的运行环境</span><br><span class="line">2. javascript并不只是能运行在浏览器端，浏览器端能够运行js是因为浏览器有js解析器，因此只需要有js解析器，任何软件都可以运行js。</span><br><span class="line">3. nodejs可以在服务端运行js，因为nodejs是基于chrome v8的js引擎</span><br></pre></td></tr></table></figure>

<p><strong>nodejs 的本质：不是一门新的编程语言，nodejs 是 javascript 运行在服务端的运行环境，编程语言还是 javascript</strong></p>
<h2 id="nodejs-与浏览器的区别"><a href="#nodejs-与浏览器的区别" class="headerlink" title="nodejs 与浏览器的区别"></a>nodejs 与浏览器的区别</h2><p>相同点：nodejs 与浏览器都是 js 的运行环境，都能够解析 js 程序。对于 ECMAScript 语法来说，在 nodejs 和浏览器中都能运行</p>
<p>不同点：nodejs 无法使用 DOM 和 BOM 的操作，浏览器无法执行 nodejs 中的文件操作等功能</p>
<h2 id="nodejs-可以干什么？"><a href="#nodejs-可以干什么？" class="headerlink" title="nodejs 可以干什么？"></a>nodejs 可以干什么？</h2><ol>
<li>开发服务端程序</li>
<li>开发命令行工具（CLI），比如 npm，webpack，gulp，less，sass 等</li>
<li>开发桌面应用程序（借助 node-webkit、electron 等框架实现）</li>
</ol>
<h1 id="安装-nodejs"><a href="#安装-nodejs" class="headerlink" title="安装 nodejs"></a>安装 nodejs</h1><h2 id="nodejs-版本"><a href="#nodejs-版本" class="headerlink" title="nodejs 版本"></a>nodejs 版本</h2><p>下载地址</p>
<ul>
<li><a href="https://nodejs.org/en/download/">当前版本</a></li>
<li><a href="https://nodejs.org/en/download/releases/">历史版本</a></li>
</ul>
<p>官网术语解释</p>
<ul>
<li>LTS 版本：Long-term Support 版本，长期支持版，即稳定版。</li>
<li>Current 版本：Latest Features 版本，最新版本，新特性会在该版本中最先加入</li>
</ul>
<p>查看 node 版本</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">node -v</span><br></pre></td></tr></table></figure>

<h1 id="运行-nodejs-程序"><a href="#运行-nodejs-程序" class="headerlink" title="运行 nodejs 程序"></a>运行 nodejs 程序</h1><h2 id="方式一：使用-node-执行-js-文件"><a href="#方式一：使用-node-执行-js-文件" class="headerlink" title="方式一：使用 node 执行 js 文件"></a>方式一：使用 node 执行 js 文件</h2><ul>
<li><p>创建 js 文件 <code>helloworld.js</code></p>
</li>
<li><p>写 nodejs 的内容：<code>console.log(&#39;hello nodejs&#39;)</code></p>
</li>
<li><p>打开命令窗口 <code>cmd</code></p>
<ul>
<li>shift 加右键打开命令窗口，执行 <code>node 文件名.js</code>即可</li>
</ul>
</li>
<li><p>执行命令：<code>node helloworld.js</code></p>
</li>
</ul>
<p>注意：在 nodejs 中是无法使用 DOM 和 BOM 的内容的，因此<code>document</code>， <code>window</code>等内容是无法使用的</p>
<h2 id="方式二：REPL-介绍"><a href="#方式二：REPL-介绍" class="headerlink" title="方式二：REPL 介绍"></a>方式二：REPL 介绍</h2><ol>
<li>REPL 全称: Read-Eval-Print-Loop（交互式解释器）<ul>
<li>R 读取 - 读取用户输入，解析输入了 Javascript 数据结构并存储在内存中</li>
<li>E 执行 - 执行输入的数据结构</li>
<li>P 打印 - 输出结果</li>
<li>L 循环 - 循环操作以上步骤直到用户两次按下 ctrl-c 按钮退出</li>
</ul>
</li>
<li>在 REPL 中编写程序 （类似于浏览器开发人员工具中的控制台功能）<ul>
<li>直接在控制台输入 <code>node</code> 命令进入 REPL 环境</li>
</ul>
</li>
<li>按两次 Control + C 退出 REPL 界面 或者 输入 <code>.exit</code> 退出 REPL 界面<ul>
<li>按住 control 键不要放开, 然后按两下 c 键</li>
</ul>
</li>
</ol>
<h2 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h2><p>当要求系统运行一个<strong>程序</strong> 而没有告诉它程序所在的完整路径时</p>
<ol>
<li>首先在<strong>当前目录</strong>中查找和该字符串匹配的可执行文件</li>
<li>进入用户 path 环境变量查找</li>
<li>进入系统 path 环境变量查找</li>
</ol>
<p>配置环境变量：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">找到环境变量：计算机 --右键--&gt; 属性 --&gt; 高级系统设置 --&gt; 高级 --&gt; 环境变量</span><br></pre></td></tr></table></figure>

<h1 id="global-模块-全局变量"><a href="#global-模块-全局变量" class="headerlink" title="global 模块-全局变量"></a>global 模块-全局变量</h1><p>JavaScript 中有一个特殊的对象，称为全局对象（Global Object），它及其所有属性都可以在程序的任何地方访问，即全局变量。</p>
<p>在浏览器 JavaScript 中，通常 window 是全局对象， 而 Node.js 中的全局对象是 <code>global</code>，所有全局变量（除了 global 本身以外）都是 global 对象的属性。</p>
<p>在 Node.js 我们可以直接访问到 global 的属性，而不需要在应用中包含它。</p>
<p><strong>常用的 global 属性</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>: 用于打印日志</span><br><span class="line"><span class="built_in">setTimeout</span>/<span class="built_in">clearTimeout</span>: 设置清除延时器</span><br><span class="line"><span class="built_in">setInterval</span>/<span class="built_in">clearInterval</span>: 设置清除定时器</span><br><span class="line"></span><br><span class="line">__dirname: 当前文件的路径，不包括文件名</span><br><span class="line">__filename：当前文件的路径，包括文件名</span><br><span class="line"></span><br><span class="line"><span class="comment">// 与模块化相关的，模块化的时候会用到</span></span><br><span class="line"><span class="built_in">require</span></span><br><span class="line"><span class="built_in">exports</span></span><br><span class="line"><span class="built_in">module</span></span><br></pre></td></tr></table></figure>

<h1 id="fs-模块"><a href="#fs-模块" class="headerlink" title="fs 模块"></a>fs 模块</h1><blockquote>
<p>fs 模块是 nodejs 中最常用的一个模块，因此掌握 fs 模块非常的有必要，fs 模块的方法非常多，用到了哪个查哪个即可。</p>
<p>文档地址：<a href="http://nodejs.cn/api/fs.html">http://nodejs.cn/api/fs.html</a></p>
</blockquote>
<p>在 nodejs 中，提供了 fs 模块，这是 node 的核心模块</p>
<p>注意：</p>
<ol>
<li>除了 global 模块中的内容可以直接使用，其他模块都是需要加载的。</li>
<li>fs 模块不是全局的，不能直接使用。因此需要导入才能使用。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="读取文件"><a href="#读取文件" class="headerlink" title="读取文件"></a>读取文件</h2><blockquote>
<p>语法：fs.readFile(file[, options], callback)</p>
</blockquote>
<p>方式一：不传编码参数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 参数1：文件路径</span></span><br><span class="line"><span class="comment">// 参数2：读取文件的回调函数</span></span><br><span class="line"><span class="comment">// 回调函数参数1：错误对象，如果读取失败，err 会包含错误信息，如果读取成功，err 是 null</span></span><br><span class="line"><span class="comment">// 回调函数参数2：读取成功后的数据（是一个Buffer对象）</span></span><br><span class="line">fs.readFile(<span class="string">&#x27;data.txt&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err)</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">  <span class="built_in">console</span>.log(data.toString()) <span class="comment">// 将Buffer对象转换成字符串</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>方式二：传编码参数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 参数1：文件的路径</span></span><br><span class="line"><span class="comment">// 参数2：编码，如果设置了，返回一个字符串，如果没有设置，会返回一个buffer对象</span></span><br><span class="line"><span class="comment">// 参数3：回调函数</span></span><br><span class="line">fs.readFile(<span class="string">&#x27;data.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err)</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>关于 Buffer 对象</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. Buffer对象是Nodejs用于处理二进制数据的</span><br><span class="line">2. 其实任意的数据在计算机底层都是二进制数据，因为计算机只认识二进制</span><br><span class="line">3. 所以读取任意的文件，返回的结果都是二进制数据，即Buffer对象</span><br><span class="line">4. Buffer对象可以调用toString()方法转换成字符串</span><br></pre></td></tr></table></figure>

<h2 id="写文件"><a href="#写文件" class="headerlink" title="写文件"></a>写文件</h2><blockquote>
<p>语法：fs.writeFile(file, data[, options], callback)</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 参数1：文件路径(如果文件不存在，会自动创建)</span></span><br><span class="line"><span class="comment">// 参数2：写入的文件内容（注意：写入的内容会覆盖以前的内容）</span></span><br><span class="line"><span class="comment">// 参数3：写文件后的回调函数</span></span><br><span class="line">fs.writeFile(<span class="string">&#x27;2.txt&#x27;</span>, <span class="string">&#x27;hello world&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;写入文件失败&#x27;</span>, err)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;写入文件成功&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ol>
<li>写文件的时候，会把原来的内容给覆盖掉</li>
</ol>
<blockquote>
<p>语法：fs.appendFile(path, data[, options], callback)</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 参数1：追加的文件名(如果文件不存在，会自动创建)</span></span><br><span class="line"><span class="comment">// 参数2：追加的文件内容</span></span><br><span class="line"><span class="comment">// 参数3：追加文件后的回调函数</span></span><br><span class="line">fs.appendFile(<span class="string">&#x27;2.txt&#x27;</span>, <span class="string">&#x27;我是追加的内容&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;追加文件内容失败&#x27;</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;追加文件内容成功&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>思考：如果没有 appendFile，通过 readFile 与 writeFile 应该怎么实现？</p>
<h2 id="文件同步与异步的说明"><a href="#文件同步与异步的说明" class="headerlink" title="文件同步与异步的说明"></a>文件同步与异步的说明</h2><blockquote>
<p>fs 中所有的文件操作，都提供了异步和同步两种方式</p>
</blockquote>
<p>异步方式：不会阻塞代码的执行</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 异步方式</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">111</span>)</span><br><span class="line">fs.readFile(<span class="string">&#x27;2.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;读取文件失败&#x27;</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;222&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>同步方式：会阻塞代码的执行</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//同步方式</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">111</span>)</span><br><span class="line"><span class="keyword">const</span> result = fs.readFileSync(<span class="string">&#x27;2.txt&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">222</span>)</span><br></pre></td></tr></table></figure>

<p>总结：同步操作使用虽然简单，但是会影响性能，因此尽量使用异步方法，尤其是在工作过程中。</p>
<h2 id="其他-api（了解）"><a href="#其他-api（了解）" class="headerlink" title="其他 api（了解）"></a>其他 api（了解）</h2><p>方法有很多，但是用起来都非常的简单，学会查文档</p>
<p>文档：<a href="http://nodejs.cn/api/fs.html">http://nodejs.cn/api/fs.html</a></p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>fs.readFile(path, callback)</code></td>
<td>读取文件内容（异步）</td>
</tr>
<tr>
<td><code>fs.readFileSync(path)</code></td>
<td>读取文件内容（同步）</td>
</tr>
<tr>
<td><code>fs.writeFile(path, data, callback)</code></td>
<td>写入文件内容（异步）</td>
</tr>
<tr>
<td><code>fs.writeFileSync(path, data)</code></td>
<td>写入文件内容（同步）</td>
</tr>
<tr>
<td><code>fs.appendFile(path, data, callback)</code></td>
<td>追加文件内容（异步）</td>
</tr>
<tr>
<td><code>fs.appendFileSync(path, data)</code></td>
<td>追加文件内容（同步）</td>
</tr>
<tr>
<td><code>fs.rename(oldPath, newPath, callback)</code></td>
<td>重命名文件（异步）</td>
</tr>
<tr>
<td><code>fs.renameSync(oldPath, newPath)</code></td>
<td>重命名文件（同步）</td>
</tr>
<tr>
<td><code>fs.unlink(path, callback)</code></td>
<td>删除文件（异步）</td>
</tr>
<tr>
<td><code>fs.unlinkSync(path)</code></td>
<td>删除文件（同步）</td>
</tr>
<tr>
<td><code>fs.mkdir(path, mode, callback)</code></td>
<td>创建文件夹（异步）</td>
</tr>
<tr>
<td><code>fs.mkdirSync(path, mode)</code></td>
<td>创建文件夹（同步）</td>
</tr>
<tr>
<td><code>fs.rmdir(path, callback)</code></td>
<td>删除文件夹（异步）</td>
</tr>
<tr>
<td><code>fs.rmdirSync(path)</code></td>
<td>删除文件夹（同步）</td>
</tr>
<tr>
<td><code>fs.readdir(path, option, callback)</code></td>
<td>读取文件夹内容（异步）</td>
</tr>
<tr>
<td><code>fs.readdirSync(path, option)</code></td>
<td>读取文件夹内容（同步）</td>
</tr>
<tr>
<td><code>fs.stat(path, callback)</code></td>
<td>查看文件状态（异步）</td>
</tr>
<tr>
<td><code>fs.statSync(path)</code></td>
<td>查看文件状态（同步）</td>
</tr>
</tbody></table>
<h1 id="path-模块"><a href="#path-模块" class="headerlink" title="path 模块"></a>path 模块</h1><h2 id="路径操作的问题"><a href="#路径操作的问题" class="headerlink" title="路径操作的问题"></a>路径操作的问题</h2><p>在读写文件的时候，文件路径可以写相对路径或者绝对路径</p>
<p>data.txt 是相对路径，读取当前目录下的 data.txt，相对路径相对的是指向 node 命令的路径</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 如果node命令不是在当前目录下执行就会报错，在当前执行node命令的目录下查找data.txt，找不到</span></span><br><span class="line">fs.readFile(<span class="string">&#x27;data.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;读取文件失败&#x27;</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>相对路径：相对于执行 node 命令的路径</p>
<p>推荐使用绝对路径：<code>__dirname</code>: 当前文件的目录，<code>__filename</code>: 当前文件的目录，包含文件名</p>
<h2 id="path-模块的常用方法"><a href="#path-模块的常用方法" class="headerlink" title="path 模块的常用方法"></a>path 模块的常用方法</h2><blockquote>
<p>关于路径，在 linux 系统中，路径分隔符使用的是<code>/</code>，但是在 windows 系统中，路径使用的<code>\</code></p>
</blockquote>
<p>在我们拼写路径的时候会带来很多的麻烦，经常会出现 windows 下写的代码，在 linux 操作系统下执行不了，path 模块就是为了解决这个问题而存在的。</p>
<p>常用方法：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">path.join() <span class="comment">// 拼接路径，返回拼接后的结果</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// windows系统下</span></span><br><span class="line">path.join(<span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;def&#x27;</span>, <span class="string">&#x27;gg&#x27;</span>, <span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;abc\def\gg\a.html&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// linux系统下</span></span><br><span class="line">path.join(<span class="string">&#x27;abc&#x27;</span>,<span class="string">&#x27;def&#x27;</span>,<span class="string">&#x27;gg&#x27;</span>, <span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;abc/def/gg/index.html&#x27;</span></span><br><span class="line"></span><br><span class="line">【优化读写文件的代码】</span><br><span class="line"></span><br><span class="line">其他方法:</span><br><span class="line">path.basename(path[, ext])	返回文件的最后一部分</span><br><span class="line">path.dirname(path)	返回路径的目录名</span><br><span class="line">path.extname(path)	获取路径的扩展名(后缀名)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> temp = <span class="string">&#x27;abc\\def\\gg\\a.html&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(path.basename(temp)) <span class="comment">//a.html</span></span><br><span class="line"><span class="built_in">console</span>.log(path.dirname(temp)) <span class="comment">//abc\def\gg</span></span><br><span class="line"><span class="built_in">console</span>.log(path.extname(temp)) <span class="comment">//.html</span></span><br></pre></td></tr></table></figure>

<h2 id="path-模块其他-api（了解）"><a href="#path-模块其他-api（了解）" class="headerlink" title="path 模块其他 api（了解）"></a>path 模块其他 api（了解）</h2><table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>path.basename(path[, ext])</code></td>
<td>返回文件的最后一部分</td>
</tr>
<tr>
<td><code>path.dirname(path)</code></td>
<td>返回路径的目录名</td>
</tr>
<tr>
<td><code>path.extname(path)</code></td>
<td>获取路径的扩展名</td>
</tr>
<tr>
<td><code>path.isAbsolute(path)</code></td>
<td>判断目录是否是绝对路径</td>
</tr>
<tr>
<td><code>path.join([...paths])</code></td>
<td>将所有的 path 片段拼接成一个规范的路径</td>
</tr>
<tr>
<td><code>path.normalize(path)</code></td>
<td>规范化路径</td>
</tr>
<tr>
<td><code>path.parse(path)</code></td>
<td>将一个路径解析成一个 path 对象</td>
</tr>
<tr>
<td><code>path.format(pathObj)</code></td>
<td>讲一个 path 对象解析成一个规范的路径</td>
</tr>
</tbody></table>
<h1 id="http-模块"><a href="#http-模块" class="headerlink" title="http 模块"></a>http 模块</h1><h2 id="创建服务器基本步骤"><a href="#创建服务器基本步骤" class="headerlink" title="创建服务器基本步骤"></a>创建服务器基本步骤</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 导入http模块，http模块是node的核心模块，作用是用来创建 http 服务器的</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 创建服务器</span></span><br><span class="line"><span class="keyword">let</span> server = http.createServer()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 服务器处理请求</span></span><br><span class="line">server.on(<span class="string">&#x27;request&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我接收到请求了&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 启动服务器，监听某个端口</span></span><br><span class="line">server.listen(<span class="number">9999</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;服务器启动成功了, 请访问： http://localhost:9999&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>详细说明</p>
<ol>
<li>给服务器注册 request 事件，只要服务器接收到了客户端的请求，就会触发 request 事件</li>
<li>request 事件有两个参数，req 表示请求对象，可以获取所有与请求相关的信息，res 是响应对象，可以获取所有与响应相关的信息</li>
<li>服务器监听的端口范围为：1-65535 之间，推荐使用 3000 以上的端口，因为 3000 以下的端口一般留给系统使用</li>
</ol>
<h2 id="request-对象详解"><a href="#request-对象详解" class="headerlink" title="request 对象详解"></a>request 对象详解</h2><p>文档地址：<a href="http://nodejs.cn/api/http.html#http_message_headers">http://nodejs.cn/api/http.html#http_message_headers</a></p>
<p>常见属性：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">headers: 所有的请求头信息</span><br><span class="line">method：请求的方式</span><br><span class="line">rawHeaders：所有的请求头信息（数组的方式）</span><br><span class="line">url：请求的地址（url地址的路径部分）</span><br><span class="line">	请求 http:<span class="comment">//127.0.0.1:3000/index 获取到的是：/index</span></span><br><span class="line">	请求 http:<span class="comment">//127.0.0.1:3000 获取到的是：/</span></span><br></pre></td></tr></table></figure>

<p>注意：在发送请求的时候，可能会出现两次请求的情况，这是因为谷歌浏览器会自动增加一个<code>favicon.ico</code>的请求</p>
<p>小结：request 对象中，常用的就是 method 和 url 两个参数</p>
<h2 id="response-对象详解"><a href="#response-对象详解" class="headerlink" title="response 对象详解"></a>response 对象详解</h2><p>文档地址：<a href="http://nodejs.cn/api/http.html#http_class_http_serverresponse">http://nodejs.cn/api/http.html#http_class_http_serverresponse</a></p>
<p>常见的属性和方法：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">res.write(data): 给浏览器发送响应体，可以调用多次，从而提供连续的响应体</span><br><span class="line">res.end()：通知服务器，所有响应头和响应主体都已被发送，即服务器将其视为已完成</span><br><span class="line">res.end(data)：结束请求，并且响应一段内容，相当于res.write(data) + res.end()</span><br><span class="line">res.statusCode: 响应的的状态码 <span class="number">200</span> <span class="number">404</span> <span class="number">500</span></span><br><span class="line">res.statusMessage: 响应的状态信息（不能有中文）， 如果不设置会根据statusCode自动设置</span><br><span class="line">res.setHeader(name, value)：设置响应头信息，比如<span class="string">&#x27;content-type&#x27;</span>，<span class="string">&#x27;text/html;charset=utf-8&#x27;</span></span><br><span class="line">res.writeHead(statusCode, statusMessage, options)：设置响应头，同时可以设置状态码和状态信息</span><br><span class="line">	options 是对象，写响应头的键值对</span><br></pre></td></tr></table></figure>

<p><strong>注意：必须先设置响应头，才能设置响应主体。</strong></p>
<ul>
<li><p>注意：浏览器中输入的 URL 地址，仅仅是一个标识，可以不与服务器中的文件路径一致。也就是说：返回什么内容是由服务端的逻辑决定</p>
</li>
<li><p>路由 : url 标示和对应文件/数据的一一对应关系</p>
</li>
</ul>
<h2 id="模拟-Apache-服务器"><a href="#模拟-Apache-服务器" class="headerlink" title="模拟 Apache 服务器"></a>模拟 Apache 服务器</h2><ul>
<li>根据 <code>req.url</code> 读取不同的页面内容，返回给浏览器</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 需求: 简单模仿apache服务器，浏览器发送127.0.0.1:8888/index.html</span></span><br><span class="line"><span class="comment">// 对应的返回www文件夹下面的index.html的内容</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建服务器</span></span><br><span class="line"><span class="keyword">let</span> server = http.createServer()</span><br><span class="line"><span class="comment">// 监听请求</span></span><br><span class="line">server.on(<span class="string">&#x27;request&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 根据不同请求输出不同响应数据</span></span><br><span class="line">  <span class="keyword">if</span> (req.url === <span class="string">&#x27;/&#x27;</span> || req.url === <span class="string">&#x27;/i&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 读取www下面的index.html</span></span><br><span class="line">    <span class="keyword">let</span> filename = path.join(__dirname, <span class="string">&#x27;www&#x27;</span>, <span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line">    fs.readFile(filename, <span class="string">&#x27;utf-8&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) <span class="built_in">console</span>.log(<span class="string">&#x27;文件读取失败&#x27;</span>)</span><br><span class="line">      <span class="comment">// 服务器响应文件</span></span><br><span class="line">      res.statusCode = <span class="number">200</span></span><br><span class="line">      res.statusMessage = <span class="string">&#x27;ok&#x27;</span></span><br><span class="line">      res.setHeader(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;text/html;charset=utf-8&#x27;</span>)</span><br><span class="line">      res.end(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (req.url === <span class="string">&#x27;/l&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 读取list.html</span></span><br><span class="line">    <span class="keyword">let</span> filename = path.join(__dirname, <span class="string">&#x27;www&#x27;</span>, <span class="string">&#x27;list.html&#x27;</span>)</span><br><span class="line">    fs.readFile(filename, <span class="string">&#x27;utf-8&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">&#x27;文件读取失败&#x27;</span>)</span><br><span class="line">      <span class="comment">// 服务器响应文件</span></span><br><span class="line">      res.writeHead(<span class="number">200</span>, <span class="string">&#x27;OOOOOOK&#x27;</span>, &#123;</span><br><span class="line">        <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;text/html;charset=utf-8&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">      res.end(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 返回浏览器, 未找到资源</span></span><br><span class="line">    res.writeHead(<span class="number">404</span>, <span class="string">&#x27;NOT FOUND&#x27;</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;text/html;charset=utf-8&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    res.end(<span class="string">&#x27;404 ,资源未找到&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 开启服务器</span></span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">8888</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;服务器开启了&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="MIME-类型"><a href="#MIME-类型" class="headerlink" title="MIME 类型"></a>MIME 类型</h2><ul>
<li>MIME(Multipurpose Internet Mail Extensions)多用途 Internet 邮件扩展类型 是一种表示文档性质和格式的标准化方式</li>
<li>浏览器通常使用 MIME 类型（而不是文件扩展名）来确定如何处理文档；因此服务器将正确的 MIME 类型附加到响应对象的头部是非常重要的</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_Types">MIME 类型</a></li>
</ul>
<h2 id="mime-模块"><a href="#mime-模块" class="headerlink" title="mime 模块"></a>mime 模块</h2><ul>
<li>作用：获取文件的 MIME 类型</li>
<li>安装：<code>npm i mime</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> mime = <span class="built_in">require</span>(<span class="string">&#x27;mime&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取路径对应的 MIME 类型</span></span><br><span class="line">mime.getType(<span class="string">&#x27;txt&#x27;</span>) <span class="comment">// &#x27;text/plain&#x27;</span></span><br><span class="line"><span class="comment">// 根据 MIME 获取到文件后缀名</span></span><br><span class="line">mime.getExtension(<span class="string">&#x27;text/plain&#x27;</span>) <span class="comment">// &#x27;txt&#x27;</span></span><br></pre></td></tr></table></figure>

<h1 id="nodemon-自动重启"><a href="#nodemon-自动重启" class="headerlink" title="nodemon 自动重启"></a>nodemon 自动重启</h1><ul>
<li>作用：监听到 js 文件修改后，自动重启 node 程序</li>
<li>安装：<code>npm i -g nodemon</code></li>
<li>使用：<code>nodemon app.js</code> 运行 node 程序</li>
</ul>
<h1 id="hacknews-案例"><a href="#hacknews-案例" class="headerlink" title="hacknews 案例"></a>hacknews 案例</h1><ul>
<li><a href="https://news.ycombinator.com/">Hacker News 示例</a></li>
<li>路由（route）：就是一套映射规则，根据 url 地址分配到对应的处理程序</li>
</ul>
<h2 id="功能划分"><a href="#功能划分" class="headerlink" title="功能划分"></a>功能划分</h2><ul>
<li>1 新闻列表页 - /index get</li>
<li>2 新闻详情页 - /details get</li>
<li>3 新闻添加页 - /submit get</li>
<li>4 新闻添加请求 - /add post</li>
</ul>
<h2 id="art-template-模板引擎"><a href="#art-template-模板引擎" class="headerlink" title="art-template 模板引擎"></a>art-template 模板引擎</h2><ul>
<li><a href="https://aui.github.io/art-template/zh-cn/docs/">文档</a></li>
<li>安装</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install art-template</span><br></pre></td></tr></table></figure>

<ul>
<li>核心方法</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 基于模板路径渲染模板</span></span><br><span class="line"><span class="comment">// 参数1：文件的路径</span></span><br><span class="line"><span class="comment">// 参数2：数据</span></span><br><span class="line"><span class="comment">// 返回值：返回渲染后的内容</span></span><br><span class="line"><span class="comment">// template(filename, data)</span></span><br><span class="line"><span class="keyword">let</span> html = template(path.join(__dirname, <span class="string">&#x27;pages&#x27;</span>, <span class="string">&#x27;index.html&#x27;</span>), &#123; <span class="attr">name</span>: <span class="string">&#x27;大吉大利，今晚吃鸡&#x27;</span> &#125;)</span><br></pre></td></tr></table></figure>

<p><strong>注意点：文件的路径必须是绝对路径</strong>；会将整个 html 当做模板返回</p>
<h2 id="url-模块"><a href="#url-模块" class="headerlink" title="url 模块"></a>url 模块</h2><ul>
<li>说明：用于 URL 处理与解析</li>
<li>注意：通过 url 拿到的查询参数都是字符串格式</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 导入url模块</span></span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解析 URL 字符串并返回一个 URL 对象</span></span><br><span class="line"><span class="comment">// 第一个参数：表示要解析的URL字符串</span></span><br><span class="line"><span class="comment">// 第二个参数：是否将query属性（查询参数）解析为一个对象，如果为：true，则query是一个对象</span></span><br><span class="line"><span class="keyword">var</span> ret = url.parse(<span class="string">&#x27;http://localhost:3000/details?id=1&amp;name=jack&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line"><span class="built_in">console</span>.log(ret.query) <span class="comment">// &#123;id: &#x27;1&#x27;, name: &#x27;jack&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="querystring-模块"><a href="#querystring-模块" class="headerlink" title="querystring 模块"></a>querystring 模块</h2><ul>
<li>用于解析与格式化 URL 查询字符串</li>
<li>注意：只在专门处理查询字符串时使用</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// foo=bar&amp;abc=xyz&amp;abc=123</span></span><br><span class="line"><span class="keyword">var</span> querystring = <span class="built_in">require</span>(<span class="string">&#x27;querystring&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将查询参数转化为对象</span></span><br><span class="line"><span class="comment">// 第一个参数: 要解析的 URL 查询字符串</span></span><br><span class="line">querystring.parse(<span class="string">&#x27;foo=bar&amp;abc=xyz&#x27;</span>) <span class="comment">// &#123;foo: &#x27;bar&#x27;, abc: &#x27;xyz&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="服务端重定向"><a href="#服务端重定向" class="headerlink" title="服务端重定向"></a>服务端重定向</h2><ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status">HTTP 状态码说明</a></li>
<li><a href="http://shuai.be/archives/301-302-redirection/">301 和 302</a></li>
<li>说明：服务端可以通过 HTTP 状态码让浏览器中的页面重定向</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">res.writeHead(<span class="number">302</span>, &#123;</span><br><span class="line">  Location: <span class="string">&#x27;/&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">res.end()</span><br></pre></td></tr></table></figure>

<h2 id="POST-请求参数的处理"><a href="#POST-请求参数的处理" class="headerlink" title="POST 请求参数的处理"></a>POST 请求参数的处理</h2><ul>
<li>说明：POST 请求可以发送大量数据，没有大小限制</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 接受POST参数</span></span><br><span class="line"><span class="keyword">var</span> postData = []</span><br><span class="line"></span><br><span class="line"><span class="comment">// data事件：用来接受客户端发送过来的POST请求数据</span></span><br><span class="line"><span class="keyword">var</span> result = <span class="string">&#x27;&#x27;</span></span><br><span class="line">req.on(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">chunk</span>) =&gt;</span> &#123;</span><br><span class="line">  result += chunk</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// end事件：当POST数据接收完毕时，触发</span></span><br><span class="line">req.on(<span class="string">&#x27;end&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  cosnole.log(result)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="模块化改造-hackerNews"><a href="#模块化改造-hackerNews" class="headerlink" title="模块化改造 hackerNews"></a>模块化改造 hackerNews</h2>]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>nodejs</tag>
      </tags>
  </entry>
  <entry>
    <title>微信小程序学习笔记</title>
    <url>/873.html</url>
    <content><![CDATA[<p><strong><a href="https://mp.weixin.qq.com/">微信公众平台</a></strong></p>
<ul>
<li><p>注册账号进入后台：设置 -&gt; 开发设置 -&gt; 拿到 AppID（创建小程序项目使用）</p>
</li>
<li><p>每个邮箱仅能申请一个小程序（未被微信公众平台注册，未被微信开放平台注册，未被个人微信号绑定的邮箱）</p>
</li>
</ul>
<p><strong><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/quickstart/#%E4%BD%93%E9%AA%8C%E5%B0%8F%E7%A8%8B%E5%BA%8F">体验小程序</a></strong></p>
<p><strong>微信开发者工具</strong></p>
<ul>
<li><p><a href="https://mp.weixin.qq.com/debug/wxadoc/dev/devtools/devtools.html">开发者工具</a></p>
</li>
<li><p>需要使用<code>注册小程序的微信</code>扫码登录</p>
</li>
<li><p>本地开发时：详情-项目配置，将 <code>不校验合法域名勾上</code></p>
</li>
</ul>
<h2 id="小程序项目结构"><a href="#小程序项目结构" class="headerlink" title="小程序项目结构"></a>小程序项目结构</h2><p><strong><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/structure.html">代码构成</a></strong></p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">pages/ ---------------- 页面（组件），所有页面都应该放到这个目录中</span><br><span class="line">  index/  ------------- index页面文件夹</span><br><span class="line">    index.js ---------- index页面的逻辑代码</span><br><span class="line">    index.wxml -------- index页面的HTML结构</span><br><span class="line">    index.wxss -------- index页面的CSS样式</span><br><span class="line">    index.json -------- 页面配置（可选）</span><br><span class="line">utils/ ---------------- 公共工具（函数）</span><br><span class="line">app.js ---------------- 入口文件</span><br><span class="line">app.json -------------- 全局配置（包括了小程序的所有页面路径、界面表现、网络超时时间、底部 tab 等）</span><br><span class="line">app.wxss -------------- 全局样式（CSS）</span><br><span class="line">project.config.json --- 开发工具配置（例如ES6转ES5、界面颜色、编译配置等）</span><br></pre></td></tr></table></figure>

<p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html">配置</a></p>
<p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html">全局配置</a>: <code>app.json</code> 文件用来对微信小程序进行全局配置，决定页面文件的路径、窗口表现、设置网络超时时间、设置多 tab 等</p>
<p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html">页面配置</a> 配置本页面的窗口表现 ， 同全局配置中的 window 项配置，如果页面中的配置与全局配置冲突，是以页面配置为准</p>
<h3 id="页面路径列表-pages-配置项"><a href="#页面路径列表-pages-配置项" class="headerlink" title="页面路径列表-pages 配置项"></a>页面路径列表-<a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#pages">pages</a> 配置项</h3><ul>
<li>所有需要展示的页面都要在 <code>app.json</code> 中进行配置，<code>pages</code> 数组的第一项表示进入小程序的默认页面</li>
<li>每一项开头不需要添加 <code>/</code>，否则报错</li>
<li>推荐：所有页面放到 <code>pages</code> 目录中，文件名称与文件夹名称相同</li>
<li>说明：在 <code>app.json</code> 中配置 <code>pages</code>，可以快速创建页面</li>
</ul>
<h3 id="标签栏-tabBar-配置"><a href="#标签栏-tabBar-配置" class="headerlink" title="标签栏 - tabBar 配置"></a>标签栏 - <a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#tabBar">tabBar</a> 配置</h3><ul>
<li>当设置 position 为 top 时，将不会显示 icon</li>
<li>tabBar 中的 list 是一个数组，只能配置最少 2 个、最多 5 个 tab，tab 按数组的顺序排序</li>
<li>list 中每一个菜单项的<code>pagePath</code>属性必须在 <code>pages</code> 中配置</li>
<li>文字颜色以及选中项文字颜色，只能统一设置不能单独设置</li>
<li>注意：没有出现在 <code>tabBar.list</code> 的 <code>pagePath</code> 页面不展示标签栏</li>
</ul>
<h2 id="WXML"><a href="#WXML" class="headerlink" title="WXML"></a>WXML</h2><p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/">https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/</a></p>
<h3 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h3><ul>
<li><p>WXML 中的动态数据均来自对应 Page 的 <code>data</code></p>
</li>
<li><p>小程序中插值表达式的特点</p>
<ul>
<li>插值表达式中可以直接使用 data 中提供的数据</li>
<li><strong>可以在属性中使用</strong></li>
<li>只能使用表达式，不能出现语句（if、for 等）</li>
<li>注意：<strong>小程序中的插值表达式不支持方法调用</strong> ！！！需要通过特殊的机制来实现该功能</li>
<li><strong>小程序中的数据绑定是单向的，不是双向的</strong></li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    msg: <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">    isCheck: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123; msg &#125;&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox</span> <span class="attr">checked</span>=<span class="string">&quot;&#123;&#123;isCheck&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">checkbox</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>绑定数据的具体类型(Booleal)</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 绑定的是字符串 false,转换成布尔值是 true， checkbox 是选中状态 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox</span> <span class="attr">checked</span>=<span class="string">&quot;false&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">checkbox</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 绑定的是布尔值 false, checkbox 是未选中状态 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox</span> <span class="attr">checked</span>=<span class="string">&quot;&#123;&#123;false&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">checkbox</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 绑定的是字符串 false, checkbox 是选中状态 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox</span> <span class="attr">checked</span>=<span class="string">&quot;&#123;&#123;&#x27;false&#x27;&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">checkbox</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="运算"><a href="#运算" class="headerlink" title="运算"></a>运算</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    flag: <span class="number">0</span>,</span><br><span class="line">    a: <span class="number">1</span>,</span><br><span class="line">    b: <span class="number">2</span>,</span><br><span class="line">    c: <span class="number">4</span>,</span><br><span class="line">    d: <span class="number">8</span>,</span><br><span class="line">    length: <span class="number">3</span>,</span><br><span class="line">    name: <span class="string">&#x27;zs&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 三元运算 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- hidden --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">hidden</span>=<span class="string">&quot;&#123;&#123;flag === 0 ? true : false&#125;&#125;&quot;</span>&gt;</span>hidden<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 算数运算 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 13 + 4 + d --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; 10 + a + b&#125;&#125; + &#123;&#123;c&#125;&#125; + d<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- checkbox是未选中状态 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox</span> <span class="attr">checked</span>=<span class="string">&quot;&#123;&#123;a &gt; b&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">checkbox</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- checkbox是选中状态 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 花括号与引号间有空格，被解析成字符串 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox</span> <span class="attr">checked</span>=<span class="string">&quot; &#123;&#123;a &gt; b&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">checkbox</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 逻辑判断 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;length &gt; 5&#125;&#125;&quot;</span>&gt;</span>逻辑判断<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 字符串运算 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; &#x27;name:&#x27; + name &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- name:zs --&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意： 花括号与引号间不要有空格，否则被解析成字符串</strong></p>
<h3 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/conditional.html">https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/conditional.html</a></p>
<p><strong>wx:if</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123; isLoading &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span>数据加载中...<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span>搞定啦~<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 隐藏多个元素，不改变 wxml的层级结构 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123; isLoading &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span>小明<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span>小红<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>hidden</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">hidden</span>=<span class="string">&quot;&#123;&#123; isLoading &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span>搞定啦~<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h3 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/list.html">https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/list.html</a></p>
<ul>
<li><code>wx:for</code>：遍历数组，在元素中通过 <code>index</code> 获取索引号，通过 <code>item</code> 获取当前项</li>
<li><code>wx:for-index=&quot;i&quot;</code>：替换默认的 index</li>
<li><code>wx:for-item=&quot;v&quot;</code>：替换默认的 item</li>
<li>注意：<strong>遍历时，需要添加 <code>wx:key</code> 属性，来提高渲染性能</strong> (<code>wx:key</code> 的值不需要添加 <code>item.</code>)，如 <code>wx:key=&quot;id&quot;</code>，如果 item 本身是一个唯一的字符串或者数字，可以使用保留关键字 <code>*this</code>(代表在 for 循环中的 item 本身) 作为 key 值</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123; list &#125;&#125;&quot;</span> <span class="attr">wx:for-index</span>=<span class="string">&quot;i&quot;</span> <span class="attr">wx:for-item</span>=<span class="string">&quot;v&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123;i&#125;&#125;: &#123;&#123;v.message&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意：1. 也可以用来渲染一个对象，index 表示 key，item 表示 value。2. 可以用一个 block 标签包裹，将循环写在 block 标签上，且 block 标签并不会渲染到 dom 中</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;[1, 2, 3]&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;index&#125;&#125;:<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h2><p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/template.html">https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/template.html</a></p>
<h3 id="定义模板"><a href="#定义模板" class="headerlink" title="定义模板"></a>定义模板</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- name 属性作为模板的名字 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">name</span>=<span class="string">&quot;msgItem&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;index&#125;&#125;: &#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>可以将模板写在单独的一个 wxml 文件中，并通过 import 导入使用</p>
<h3 id="使用模板"><a href="#使用模板" class="headerlink" title="使用模板"></a>使用模板</h3><p>使用 is 属性，声明需要的使用的模板，然后将模板所需要的 data 传入</p>
<p>注意：is 属性可以使用 Mustache 语法，来动态决定具体需要渲染哪个模板</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">&quot;msgItem&quot;</span> <span class="attr">data</span>=<span class="string">&quot;&#123;&#123;...item&#125;&#125;&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    item: &#123;</span><br><span class="line">      index: <span class="number">0</span>,</span><br><span class="line">      msg: <span class="string">&#x27;this is a template&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h3 id="模板的作用域"><a href="#模板的作用域" class="headerlink" title="模板的作用域"></a>模板的作用域</h3><p>模板拥有自己的作用域，只能使用 data 传入的数据以及模板定义文件中定义的 <code>&lt;wxs /&gt;</code> 模块</p>
<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/import.html">https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/import.html</a></p>
<h3 id="import"><a href="#import" class="headerlink" title="import"></a>import</h3><p><code>import</code>可以在该文件中使用目标文件定义的<code>template</code>，如：</p>
<p>在 item.wxml 中定义了一个叫<code>item</code>的<code>template</code>：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- item.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">name</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;text&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在 index.wxml 中引用了 item.wxml，就可以使用<code>item</code>模板：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">src</span>=<span class="string">&quot;item.wxml&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">&quot;item&quot;</span> <span class="attr">data</span>=<span class="string">&quot;&#123;&#123;text: &#x27;forbar&#x27;&#125;&#125;&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>import 有作用域的概念，即只会 import 目标文件中定义的 template，而不会 import 目标文件 import 的 template。</p>
<h3 id="include"><a href="#include" class="headerlink" title="include"></a>include</h3><p><code>include</code> 可以将目标文件<strong>除了</strong> <code>&lt;template/&gt;</code> <code>&lt;wxs/&gt;</code> 外的整个代码引入，相当于是拷贝到 <code>include</code> 位置</p>
<h2 id="WXSS"><a href="#WXSS" class="headerlink" title="WXSS"></a>WXSS</h2><p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxss.html">WXSS(WeiXin Style Sheets)</a>，用于描述 WXML 的组件样式</p>
<p>与 <code>css</code> 相比，<code>WXSS</code> 扩展的特性有：</p>
<ul>
<li><p>尺寸单位</p>
<p><code>rpx</code>（responsive pixel）: 可以根据屏幕宽度进行自适应。规定屏幕宽为 750rpx。如在 iPhone6 上，屏幕宽度为 375px，共有 750 个物理像素，则 750rpx = 375px = 750 物理像素，1rpx = 0.5px = 1 物理像素。</p>
</li>
<li><p>样式导入</p>
<p>使用 <code>@import</code> 语句可以导入外联样式表，<code>@import</code> 后跟需要导入的外联样式表的相对路径，用<code>;</code>结束</p>
</li>
</ul>
<p>WXSS 中的注释需要使用多行注释</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* */</span></span><br></pre></td></tr></table></figure>

<p>全局样式、局部样式： app.wxss page.wxss</p>
<p>动态样式：<br>style 接收动态的样式，在运行时会进行解析，请尽量避免将静态的样式写进 style 中，以免影响渲染速度。</p>
<p>如果通过 wxss 使用背景图片，不能使用本地资源图片，可以使用网络图片，或者 base64；推荐使用<code>&lt;image/&gt;</code>标签来展示图片</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">style</span>=<span class="string">&quot;color:&#123;&#123;color&#125;&#125;;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;&#123;&#123;myclass&#125;&#125;&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>选择器</p>
<p>目前支持的选择器有：<code>.class</code> <code>#id</code> <code>element</code> <code>::after</code> <code>::before</code></p>
<h2 id="基本组件"><a href="#基本组件" class="headerlink" title="基本组件"></a>基本组件</h2><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/">https://developers.weixin.qq.com/miniprogram/dev/component/</a></p>
<h3 id="view-组件（标签）"><a href="#view-组件（标签）" class="headerlink" title="view 组件（标签）"></a>view 组件（标签）</h3><p>类似于 HTML 中的 div，用来布局</p>
<p><code>hover-class</code> 属性，指定按下去的样式类，其他属性使用见：<a href="https://developers.weixin.qq.com/miniprogram/dev/component/view.html">https://developers.weixin.qq.com/miniprogram/dev/component/view.html</a></p>
<h3 id="text-组件"><a href="#text-组件" class="headerlink" title="text 组件"></a>text 组件</h3><p>类似于 HTML 中的 span，行内元素</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">类型</th>
<th align="left">默认值</th>
<th align="left">必填</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">selectable</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">文本是否可选（长按文本）</td>
</tr>
<tr>
<td align="left">space</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">显示连续空格</td>
</tr>
<tr>
<td align="left">decode</td>
<td align="left">boolean</td>
<td align="left">false</td>
<td align="left">否</td>
<td align="left">是否解码</td>
</tr>
</tbody></table>
<p>详细使用文档： <a href="https://developers.weixin.qq.com/miniprogram/dev/component/text.html">https://developers.weixin.qq.com/miniprogram/dev/component/text.html</a></p>
<p>注意：如果想要文本选中功能，必须使用 text 标签，并且添加 selectable 属性，除了文本节点以外的其他节点都无法长按选中</p>
<p>text 标签中只能嵌套 text 标签</p>
<p>decode 可以解析的有 <code>&amp;nbsp;</code> <code>&amp;lt;</code> <code>&amp;gt;</code> <code>&amp;amp;</code> <code>&amp;apos;</code> <code>&amp;ensp;</code> <code>&amp;emsp;</code></p>
<p>可以使用 <code>\n</code> 来换行，在编辑器中按回车键换行也会解析出换行</p>
<h3 id="icon-组件"><a href="#icon-组件" class="headerlink" title="icon 组件"></a>icon 组件</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/icon.html">https://developers.weixin.qq.com/miniprogram/dev/component/icon.html</a></p>
<p>使用 type 指定 icon 的类型，有效值：<code>success</code>, <code>success_no_circle</code>, <code>info</code>, <code>warn</code>, <code>waiting</code>, <code>cancel</code>, <code>download</code>, <code>search</code>, <code>clear</code></p>
<h3 id="button-组件"><a href="#button-组件" class="headerlink" title="button 组件"></a>button 组件</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/button.html">https://developers.weixin.qq.com/miniprogram/dev/component/button.html</a></p>
<p>注意：如果设置了 <code>type</code> 属性，<code>hover-class</code> 属性会失效</p>
<h3 id="input-组件"><a href="#input-组件" class="headerlink" title="input 组件"></a>input 组件</h3><p>输入框。该组件是原生组件</p>
<p>属性：<br>placeholder-style: 指定 placeholder 的样式<br>placeholder-class: 默认值 input-placeholder 指定 placeholder 的样式类<br>maxlength: 默认 140，设置最大输入长度，设置为 -1 的时候不限制最大长度<br>cursor-spacing: 默认 0，指定光标与键盘的距离，取 input 距离底部的距离和 cursor-spacing 指定的距离的最小值作为光标与键盘的距离<br>confirm-type: 默认 done，设置键盘右下角按钮的文字，仅在 type=’text’时生效<br>adjust-position: 默认 true，键盘弹起时，是否自动上推页面</p>
<h3 id="image-图片组件"><a href="#image-图片组件" class="headerlink" title="image 图片组件"></a>image 图片组件</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/image.html">https://developers.weixin.qq.com/miniprogram/dev/component/image.html</a></p>
<p>image 标签是 web 中 img 标签和背景图片的结合体</p>
<p>常用属性</p>
<p>src：图片资源地址</p>
<p>mode：图片裁剪、缩放的模式</p>
<p>lazy-load：图片懒加载，在即将进入一定范围（上下三屏）时才开始加载</p>
<p>show-menu-by-longpress: 开启长按图片显示识别小程序码菜单</p>
<p>binderror: 当错误发生时触发，用于图片加载失败时显示默认图片</p>
<p>注意：图片有默认宽高，默认宽高为：320 * 240 px；默认不会保持宽高比</p>
<h3 id="swiper-轮播组件"><a href="#swiper-轮播组件" class="headerlink" title="swiper 轮播组件"></a>swiper 轮播组件</h3><p>默认宽度 100%，高度 150px</p>
<h3 id="scroll-view"><a href="#scroll-view" class="headerlink" title="scroll-view"></a>scroll-view</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html">https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html</a></p>
<h3 id="navigator"><a href="#navigator" class="headerlink" title="navigator"></a>navigator</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html">https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html</a><br><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/route.html">https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/route.html</a></p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">类型</th>
<th align="left">默认值</th>
<th align="left">必填</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">target</td>
<td align="left">string</td>
<td align="left">self</td>
<td align="left">否</td>
<td align="left">在哪个目标上发生跳转，默认当前小程序</td>
</tr>
<tr>
<td align="left">url</td>
<td align="left">string</td>
<td align="left"></td>
<td align="left">否</td>
<td align="left">当前小程序内的跳转链接</td>
</tr>
<tr>
<td align="left">open-type</td>
<td align="left">string</td>
<td align="left">navigate</td>
<td align="left">否</td>
<td align="left">跳转方式</td>
</tr>
</tbody></table>
<p><strong>open-type 的合法值</strong></p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">navigate</td>
<td align="left">对应 <code>wx.navigateTo</code></td>
</tr>
<tr>
<td align="left">redirect</td>
<td align="left">对应 <code>wx.redirectTo</code></td>
</tr>
<tr>
<td align="left">switchTab</td>
<td align="left">对应 <code>wx.switchTab</code></td>
</tr>
<tr>
<td align="left">reLaunch</td>
<td align="left">对应 <code>wx.reLaunch</code></td>
</tr>
<tr>
<td align="left">navigateBack</td>
<td align="left">对应 <code>wx.navigateBack</code></td>
</tr>
<tr>
<td align="left">exit</td>
<td align="left">退出小程序，<code>target=&quot;miniProgram&quot;</code> 时生效</td>
</tr>
</tbody></table>
<p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateTo.html">wx.navigateTo</a> ，保留当前页面，跳转到应用内的某个页面。但是不能跳到 tabbar 页面。<br><a href="https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.redirectTo.html">wx.redirectTo</a> 的功能，关闭当前页面，跳转到应用内的某个页面。但是不允许跳转到 tabbar 页面。<br><a href="https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.switchTab.html">wx.switchTab</a> 的功能，跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面<br><a href="https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.reLaunch.html">wx.reLaunch</a> 的功能，关闭所有页面，打开到应用内的某个页面<br><a href="https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateBack.html">wx.navigateBack</a> 的功能，关闭当前页面，返回上一页面或多级页面。可通过 <code>getCurrentPages</code> 获取当前的页面栈，决定需要返回几层。<br><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/getCurrentPages.html">getCurrentPages</a></p>
<p>url 可以使用绝对路径或相对路径，使用绝对路径时需要添加 <code>/</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">url</span>=<span class="string">&quot;/pages/index/index&quot;</span> <span class="attr">open-type</span>=<span class="string">&quot;navigate&quot;</span>&gt;</span>sdfsf<span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">url</span>=<span class="string">&quot;./index/index&quot;</span> <span class="attr">open-type</span>=<span class="string">&quot;navigate&quot;</span>&gt;</span>sdfsf<span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="自定义组件"><a href="#自定义组件" class="headerlink" title="自定义组件"></a>自定义组件</h2><p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/">https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/</a><br><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Component.html">https://developers.weixin.qq.com/miniprogram/dev/reference/api/Component.html</a></p>
<p>普通页面也可以使用 Component 构造器来创建，提供 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/observer.html">observers</a> 支持数据监听，类似 vue 中的 watch</p>
<p>还可以扩展 <a href="https://github.com/wechat-miniprogram/computed">conputed</a>，类似 vue 计算属性</p>
<h2 id="数据操作"><a href="#数据操作" class="headerlink" title="数据操作"></a>数据操作</h2><p><strong>全局数据</strong></p>
<p>app.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">App(&#123;</span><br><span class="line">  globalData: &#123;</span><br><span class="line">    url: <span class="string">&#x27;hhh&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在 app.js 文件中，直接使用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">this</span>.globalData.url <span class="comment">// 获取</span></span><br><span class="line"><span class="built_in">this</span>.globalData.url = <span class="string">&#x27;qqq&#x27;</span> <span class="comment">// 修改</span></span><br></pre></td></tr></table></figure>

<p>在其他非 app.js 文件中使用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> App = getApp()</span><br><span class="line"><span class="keyword">let</span> url = App.globalData.url <span class="comment">// 获取</span></span><br><span class="line">App.globalData.url = <span class="string">&#x27;hhh&#x27;</span> <span class="comment">// 修改</span></span><br><span class="line">App.globalData.name = <span class="string">&#x27;zs&#x27;</span> <span class="comment">// 添加</span></span><br></pre></td></tr></table></figure>

<p><strong>页面内数据</strong></p>
<p>获取数据</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">getMsg () &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.data.msg) <span class="comment">// 和 vue 中的不同</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改数据</p>
<ul>
<li><a href="https://mp.weixin.qq.com/debug/wxadoc/dev/framework/app-service/page.html">setData</a></li>
<li><code>setData()</code>：更新数据<ul>
<li>说明：将数据从逻辑层发送到视图层（异步），同时改变对应的 this.data 的值（同步）</li>
<li>修改 data 中的数据</li>
<li>更新视图，也就是说：视图中使用该数据的地方会重新渲染</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">changeMsg () &#123;</span><br><span class="line">  <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">    name: <span class="string">&quot;jack&quot;</span></span><br><span class="line">  &#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 回调函数</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：小程序中的数据不是双向绑定的，而是单向的！！！所以，无法直接修改 data 中的数据来将数据的变化显示在页面中，即通过 <code>this.data.msg = &#39;修改后的数据&#39;</code> 方式修改数据后，页面中不会显示该数据的变化</p>
<ul>
<li>文本框操作：</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123; input &#125;&#125;&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;inputChangeHandle&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  inputChangeHandle: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.setData(&#123; <span class="attr">input</span>: e.detail.value &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="事件处理"><a href="#事件处理" class="headerlink" title="事件处理"></a>事件处理</h2><p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html">https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html</a></p>
<ul>
<li>绑定事件：<code>bindtap</code>、<code>catchtap</code></li>
<li>说明：bind 事件绑定不会阻止冒泡事件向上冒泡，catch 事件绑定可以阻止冒泡事件向上冒泡</li>
</ul>
<ul>
<li><p>事件对象可以携带额外信息，如 id, dataset, touches：通过标签的自定义属性<code>data-*</code>，实现给事件传递参数（<strong>不能使用函数调用的形式</strong>）</p>
</li>
<li><p>连字符写法会转换成驼峰写法，而大写字符会自动转成小写字符：<code>data-element-type</code> ，最终会呈现为 <code>event.currentTarget.dataset.elementType</code>，<code>data-elementType</code> ，最终会呈现为 <code>event.currentTarget.dataset.elementtype</code></p>
</li>
<li><p>mark 也可以用于承载一些自定义数据（类似于 dataset ）</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;sayHi&quot;</span> <span class="attr">data-msg</span>=<span class="string">&quot;zs&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  <span class="function"><span class="title">sayHi</span>(<span class="params">event</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(event)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;单击事件触发了&#x27;</span>, event.currentTarget.dataset.msg)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="WXS"><a href="#WXS" class="headerlink" title="WXS"></a>WXS</h2><p>作用： 辅助构建页面结构的</p>
<p>不支持 es6 语法</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">&lt;!-- 语法结构 --&gt;</span><br><span class="line">&lt;wxs module=&quot;tools&quot;&gt;</span><br><span class="line">  function fn (arg) &#123;</span><br><span class="line">    return arg + 10</span><br><span class="line">  &#125;</span><br><span class="line">  // 导出一个对象</span><br><span class="line">  module.exports = &#123; fn: fn &#125;</span><br><span class="line">&lt;/wxs&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 使用 --&gt;</span><br><span class="line">&lt;view&gt;使用wxs：&#123;&#123; tools.fn(8) &#125;&#125;&lt;/view&gt;</span><br></pre></td></tr></table></figure>

<h2 id="UI-库"><a href="#UI-库" class="headerlink" title="UI 库"></a>UI 库</h2><ul>
<li><a href="https://github.com/Tencent/weui-wxss">weui-wsxx</a></li>
</ul>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p>两个生命周期：应用生命周期、页面生命周期</p>
<ul>
<li><a href="https://mp.weixin.qq.com/debug/wxadoc/dev/framework/app-service/app.html">app 生命周期</a></li>
<li><a href="https://mp.weixin.qq.com/debug/wxadoc/dev/framework/app-service/page.html">页面 生命周期</a></li>
</ul>
<h2 id="小程序发送请求"><a href="#小程序发送请求" class="headerlink" title="小程序发送请求"></a>小程序发送请求</h2><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html">wx.request(Object object)</a></p>
<p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/ability/network.html">关于小程序中网络相关 API 的说明</a></p>
<p>在实际的项目中需要在 <code>开发设置</code> 中配置 <code>服务器域名</code>，然后小程序才能发送请求获取数据，但在开发期间，可以忽略这一步，在开发工具右上角的 <code>详情</code> 菜单中，勾选 <code>不校验安全域名、TLS版本以及HTTPS证书</code></p>
<p>在小程序不用考虑跨域的问题，因为小程序是基于微信这个客户端</p>
<p>无法在小程序中使用 XHR 对象，发送请求</p>
<h2 id="api"><a href="#api" class="headerlink" title="api"></a>api</h2><h3 id="wx-previewImage-Object-object-全屏预览图片"><a href="#wx-previewImage-Object-object-全屏预览图片" class="headerlink" title="wx.previewImage(Object object) 全屏预览图片"></a>wx.previewImage(Object object) 全屏预览图片</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/media/image/wx.previewImage.html">https://developers.weixin.qq.com/miniprogram/dev/api/media/image/wx.previewImage.html</a></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;tools.replace(src)&#125;&#125;&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;previewImage&quot;</span> <span class="attr">data-current</span>=<span class="string">&quot;&#123;&#123; src &#125;&#125;&quot;</span> <span class="attr">data-urls</span>=<span class="string">&quot;&#123;&#123; item.images &#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 图片预览</span></span><br><span class="line">previewImage (e) &#123;</span><br><span class="line">  <span class="comment">// 获取需要预览的图片链接</span></span><br><span class="line">  <span class="keyword">let</span> &#123;<span class="attr">dataset</span>: &#123; current, urls&#125;&#125; = e.currentTarget</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 将图片替换为大图</span></span><br><span class="line">  current = current.replace(<span class="string">&#x27;w.h&#x27;</span>, <span class="string">&#x27;1000.1000&#x27;</span>)</span><br><span class="line">  urls = urls.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> item.replace(<span class="string">&#x27;w.h&#x27;</span>, <span class="string">&#x27;1000.1000&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 调用预览图片 API</span></span><br><span class="line">  wx.previewImage(&#123;</span><br><span class="line">    current, <span class="comment">// 当前显示图片的http链接</span></span><br><span class="line">    urls <span class="comment">// 需要预览的图片http链接列表</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="wx-saveImageToPhotosAlbum-保存图片到相册"><a href="#wx-saveImageToPhotosAlbum-保存图片到相册" class="headerlink" title="wx.saveImageToPhotosAlbum 保存图片到相册"></a>wx.saveImageToPhotosAlbum 保存图片到相册</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/media/image/wx.saveImageToPhotosAlbum.html">https://developers.weixin.qq.com/miniprogram/dev/api/media/image/wx.saveImageToPhotosAlbum.html</a></p>
<h3 id="wx-pageScrollTo-Object-object"><a href="#wx-pageScrollTo-Object-object" class="headerlink" title="wx.pageScrollTo(Object object)"></a>wx.pageScrollTo(Object object)</h3><p>将页面滚动到目标位置</p>
<h3 id="选择节点-wx-createSelectorQuery"><a href="#选择节点-wx-createSelectorQuery" class="headerlink" title="选择节点 wx.createSelectorQuery()"></a>选择节点 wx.createSelectorQuery()</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/wxml/wx.createSelectorQuery.html">https://developers.weixin.qq.com/miniprogram/dev/api/wxml/wx.createSelectorQuery.html</a></p>
<p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/selector.html">https://developers.weixin.qq.com/miniprogram/dev/framework/view/selector.html</a></p>
<p>返回一个 SelectorQuery 对象实例。在自定义组件或包含自定义组件的页面中，应使用 this.createSelectorQuery() 来代替</p>
<h2 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h2><p>文件系统<br><a href="https://developers.weixin.qq.com/miniprogram/dev/api/file/wx.saveFile.html">https://developers.weixin.qq.com/miniprogram/dev/api/file/wx.saveFile.html</a><br><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/ability/file-system.html">https://developers.weixin.qq.com/miniprogram/dev/framework/ability/file-system.html</a></p>
<p>上传文件<br><a href="https://developers.weixin.qq.com/miniprogram/dev/api/network/upload/wx.uploadFile.html">https://developers.weixin.qq.com/miniprogram/dev/api/network/upload/wx.uploadFile.html</a></p>
<p>文件管理器<br><a href="https://developers.weixin.qq.com/miniprogram/dev/api/file/wx.getFileSystemManager.html">https://developers.weixin.qq.com/miniprogram/dev/api/file/wx.getFileSystemManager.html</a></p>
<h2 id="页面事件处理函数"><a href="#页面事件处理函数" class="headerlink" title="页面事件处理函数"></a>页面事件处理函数</h2><h3 id="onPageScroll-Object"><a href="#onPageScroll-Object" class="headerlink" title="onPageScroll(Object)"></a>onPageScroll(Object)</h3><p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onPageScroll-Object-object">https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onPageScroll-Object-object</a></p>
<p>监听用户滑动页面事件。</p>
<p>Object 参数说明：<br>scrollTop Number 页面在垂直方向已滚动的距离（单位 px）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">onPageScroll</span>(<span class="params">scroll</span>)</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(scroll.scrollTop)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="小程序中授权功能"><a href="#小程序中授权功能" class="headerlink" title="小程序中授权功能"></a>小程序中授权功能</h2><ul>
<li><a href="https://developers.weixin.qq.com/community/develop/doc/000cea2305cc5047af5733de751008">打开小程序设置页（wx.openSetting）接口调整</a></li>
<li><a href="https://developers.weixin.qq.com/community/develop/doc/0002e69827c8d85bcd57c9d745b400">openSetting 的问题</a></li>
<li><a href="http://vanessa.b3log.org/weapp-wepy">wepy 爬坑记 - openSetting</a></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">wx.getSetting(&#123;</span><br><span class="line">  <span class="function"><span class="title">success</span>(<span class="params">res</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;success: &#x27;</span>, res)</span><br><span class="line">    <span class="comment">// 根据获取到的用户授权信息判断用户是否同意过授权</span></span><br><span class="line">    <span class="keyword">if</span> (res.authSetting[<span class="string">&#x27;scope.address&#x27;</span>] === <span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="comment">// res.authSetting[&#x27;scope.address&#x27;] ===&gt; true</span></span><br><span class="line">      <span class="comment">// 已经授权，并且已经同意</span></span><br><span class="line">      <span class="comment">// 直接打开 收获地址 页面</span></span><br><span class="line">      wx.chooseAddress(&#123;</span><br><span class="line">        <span class="function"><span class="title">success</span>(<span class="params">res</span>)</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&#x27;是否确认同意授权：&#x27;</span>, res)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (res.authSetting[<span class="string">&#x27;scope.address&#x27;</span>] === <span class="literal">false</span>) &#123;</span><br><span class="line">      <span class="comment">// res.authSetting[&#x27;scope.address&#x27;] ===&gt; false</span></span><br><span class="line">      <span class="comment">// 已经授权，并切没有同意</span></span><br><span class="line">      <span class="comment">// 弹出确认框，引导用户去授权</span></span><br><span class="line">      wx.showModal(&#123;</span><br><span class="line">        title: <span class="string">&#x27;温馨提示&#x27;</span>,</span><br><span class="line">        content: <span class="string">&#x27;您需要授权后，才能使用收获地址功能，是否打开授权界面&#x27;</span>,</span><br><span class="line">        <span class="function"><span class="title">success</span>(<span class="params">res</span>)</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (res.confirm) &#123;</span><br><span class="line">            <span class="comment">// 点击确定按钮</span></span><br><span class="line">            wx.openSetting(&#123;</span><br><span class="line">              <span class="function"><span class="title">success</span>(<span class="params">res</span>)</span> &#123;</span><br><span class="line">                <span class="comment">// console.log(res)</span></span><br><span class="line">                <span class="comment">// 此处，可以通过 res.authSetting[&#x27;scope.address&#x27;] 来获取到用户</span></span><br><span class="line">                <span class="comment">// 是否同意授权</span></span><br><span class="line">                <span class="keyword">if</span> (res.authSetting[<span class="string">&#x27;scope.address&#x27;</span>]) &#123;</span><br><span class="line">                  <span class="comment">// 用户同意授权小程序使用通讯地址这个开发接口</span></span><br><span class="line">                  wx.chooseAddress(&#123;</span><br><span class="line">                    <span class="function"><span class="title">success</span>(<span class="params">res</span>)</span> &#123;</span><br><span class="line">                      <span class="built_in">console</span>.log(<span class="string">&#x27;是否确认同意授权：&#x27;</span>, res)</span><br><span class="line">                    &#125;</span><br><span class="line">                  &#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  <span class="built_in">console</span>.log(<span class="string">&#x27;用户本次还是不同意小程序使用通讯地址&#x27;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 点击取消按钮</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;取消&#x27;</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// res.authSetting[&#x27;scope.address&#x27;] ===&gt; undefined</span></span><br><span class="line">      <span class="comment">// 没有授权</span></span><br><span class="line">      <span class="comment">// 第一次点击按钮</span></span><br><span class="line">      wx.chooseAddress(&#123;</span><br><span class="line">        <span class="function"><span class="title">success</span>(<span class="params">res</span>)</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&#x27;是否确认同意授权：&#x27;</span>, res)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="分包加载"><a href="#分包加载" class="headerlink" title="分包加载"></a>分包加载</h2><p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages.html">https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages.html</a></p>
<h2 id="与-vue-的区别"><a href="#与-vue-的区别" class="headerlink" title="与 vue 的区别"></a>与 vue 的区别</h2><ul>
<li><p>小程序中 插值表达式可以用在属性中</p>
</li>
<li><p>小程序中的插值表达式默认不支持方法调用，需要通过特殊机制来实现</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 以下不会再视图中输出内容，也不会报错 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;[1, 2].join(&#x27;-&#x27;)&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>小程序中的数据操作</p>
<ul>
<li>获取数据 <code>this.data.msg</code></li>
<li>更新数据 <code>this.setData(&#123; msg: &#39;something&#39; &#125;)</code></li>
</ul>
</li>
<li><p>绑定布尔值</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- vue 中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">xx</span> <span class="attr">:xx</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">xx</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 小程序中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">xx</span> <span class="attr">xx</span>=<span class="string">&quot;&#123;&#123;true&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">xx</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>小程序中绑定事件时，不能直接调用事件处理程序，所以传参需要通过自定义属性</p>
</li>
<li><p>遍历数据</p>
<p>小程序中 <code>wx:for = &quot;lists&quot;</code>, 而 Vue 是 <code>v-for = &quot;item in lists&quot;</code></p>
</li>
</ul>
<h2 id="todomvc-案例"><a href="#todomvc-案例" class="headerlink" title="todomvc 案例"></a>todomvc 案例</h2><ul>
<li>每个框架或库都应该写一个 todomvc，来了解这个框架的使用模式是怎样的</li>
</ul>
<p>功能</p>
<ul>
<li>1 欢迎界面（没有任务就展示欢迎界面，有任务就展示任务列表）<ul>
<li>注意：欢迎界面 和 任务列表 只能二选一</li>
</ul>
</li>
<li>2 展示任务列表</li>
<li>3 添加任务<ul>
<li>剩余任务数量会改变</li>
</ul>
</li>
<li>4 任务状态切换（完成和未完成）<ul>
<li>剩余任务数量会改变</li>
<li>当所有的任务都完成，隐藏剩余任务数量展示</li>
</ul>
</li>
<li>5 删除任务<ul>
<li>剩余任务数量会改变（删除未完成任务）</li>
</ul>
</li>
<li>6 切换所有任务的选中状态<ul>
<li>只要有一项是选中的，那么，就应该让其他项也选中</li>
</ul>
</li>
<li>7 展示清除已完成任务按钮<ul>
<li>1 当有已完成的任务，就展示</li>
<li>2 单击清除已完成任务按钮，会清除所有已完成的任务</li>
</ul>
</li>
</ul>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">任务中需要频繁处理的操作：</span><br><span class="line">1 清除已完成任务按钮 的展示和隐藏</span><br><span class="line">2 剩余任务（未完成任务）的展示和隐藏</span><br></pre></td></tr></table></figure>

<h2 id="other"><a href="#other" class="headerlink" title="other"></a>other</h2><p>微信小程序 —— button 按钮去除 border 边框：使用 <code>button::after&#123; border: none; &#125;</code> 来去除边框</p>
<p>button navogator 组件默认有点击态，可以添加 <code>hover-class=&quot;none&quot;</code> 去除</p>
<p>getCurrentPages() 方法<br><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/getCurrentPages.html">https://developers.weixin.qq.com/miniprogram/dev/reference/api/getCurrentPages.html</a></p>
<p>获取当前页面栈。数组中第一个元素为首页，最后一个元素为当前页面。</p>
<p>页面间数据传递</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> page = getCurrentPages()</span><br><span class="line"><span class="built_in">console</span>.log(page)</span><br><span class="line"><span class="keyword">let</span> prevPage = page[page.length - <span class="number">2</span>]</span><br><span class="line"><span class="comment">// 修改上个页面的数据</span></span><br><span class="line">prevPage.setData(&#123; <span class="attr">msg</span>: <span class="string">&#x27;hehehe&#x27;</span> &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  wx.navigateBack()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>移动 web</title>
    <url>/389.html</url>
    <content><![CDATA[<h1 id="移动-web-基础"><a href="#移动-web-基础" class="headerlink" title="移动 web 基础"></a>移动 web 基础</h1><h2 id="移动端开发现状"><a href="#移动端开发现状" class="headerlink" title="移动端开发现状"></a>移动端开发现状</h2><ul>
<li>移动 web 开发指的是需要适配移动设备的网页开发</li>
<li>移动 web 开发与 pc 端 web 开发没有本质的区别，使用的还是 HTML/CSS/JavaScript 的技术</li>
<li>移动 web 开发与 pc 端 web 开发的区别是什么？</li>
</ul>
<p>移动端的浏览器与 pc 端不同</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">谷歌浏览器 苹果浏览器、 UC浏览器 QQ浏览器 欧朋浏览器 百度手机浏览器  360安全浏览器  搜狗浏览器  猎豹浏览器等</span><br><span class="line">国内的手机浏览器都是根据webkit内核修改过来的，国内没有自主研发的内核，国内的操作系统也是基于Android系统修改的。</span><br><span class="line"></span><br><span class="line">因此在移动端，css3 属性只需要加 webkit 前缀即可</span><br></pre></td></tr></table></figure>

<p>移动端设备尺寸不一样(尺寸非常多，碎片化很严重)</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">Android： <span class="number">320</span>*<span class="number">480</span> <span class="number">480</span>*<span class="number">800</span>  <span class="number">540</span>*<span class="number">960</span> <span class="number">720</span>*<span class="number">1280</span> <span class="number">1080</span>*<span class="number">1920</span> 2k屏 4k屏</span><br><span class="line">iphpne：  <span class="number">640</span>*<span class="number">960</span> <span class="number">640</span>*<span class="number">1136</span> <span class="number">750</span>*<span class="number">1334</span> <span class="number">1242</span>*<span class="number">2208</span></span><br></pre></td></tr></table></figure>

<h2 id="移动端开发分类"><a href="#移动端开发分类" class="headerlink" title="移动端开发分类"></a>移动端开发分类</h2><ul>
<li>原生 app（native app）</li>
<li>混合 app（Hybrid app）</li>
<li>web 应用（webApp）</li>
</ul>
<p><strong>原生 app（native app）</strong></p>
<blockquote>
<p>原生 app 是基于操作系统的开发，比如安卓，ios，windows phone,他们只能在各自的操作系统上运行。</p>
</blockquote>
<p>优点：</p>
<ol>
<li>可以访问操作系统，获取更多的资源（gps，摄像头，传感器，麦克风等）</li>
<li>速度快，性能高，用户体验好</li>
<li>可以离线使用</li>
</ol>
<p>缺点：</p>
<ol>
<li>开发成本高</li>
<li>需要安装和更新，更新与发布需要审核。</li>
</ol>
<p><strong>Web App</strong></p>
<blockquote>
<p>Web 应用使用 H5C3 开发页面，为浏览器设计的基于 web 的应用，可以在各种智能设备的手机浏览器上运行。不需要安装即可运行。</p>
</blockquote>
<p>优点：</p>
<ol>
<li>支持设备广泛</li>
<li>开发成本低（使用）</li>
<li>可以随时上线与更新，无需审核</li>
</ol>
<p>缺点：</p>
<ol>
<li>用户体验极度依赖网速</li>
<li>要求联网</li>
<li>无法获取手机的资源（gps，摄像头）</li>
</ol>
<p><strong>混合 app（Hybrid App）</strong></p>
<blockquote>
<p>Hybrid App 是指介于 web-app、native-app 这两者之间的 app,它虽然看上去是一个 Native App，但只有一个 UI WebView，里面访问的是一个 Web App。（淘宝、京东、手机百度）</p>
</blockquote>
<p>Hybird App 说白了就是使用了 Native app 的壳，里面其实还是 HTML5 页面</p>
<p>优点：</p>
<ol>
<li>开发成本和难度更低，兼容多个平台</li>
<li>也可以访问手机的操作系统资源。</li>
<li>更新维护更方便</li>
</ol>
<p>缺点：</p>
<ol>
<li>用户体验相比原生 app 稍差</li>
<li>性能依赖于网速</li>
</ol>
<p>总结：</p>
<p>三种开发各有优缺点，具体用什么需要根据实际情况而定，比如预算，app 注重功能还是内容等</p>
<h2 id="屏幕与分辨率"><a href="#屏幕与分辨率" class="headerlink" title="屏幕与分辨率"></a>屏幕与分辨率</h2><p><a href="https://segmentfault.com/a/1190000011753855">理解设备像素、设备独立像素和 css 像素</a></p>
<blockquote>
<p>移动设备与 PC 设备最大的差异在于屏幕，这主要体现在屏幕尺寸和屏幕分辨率两个方面</p>
</blockquote>
<p>屏幕尺寸</p>
<p>通常我们所指的屏幕<code>尺寸</code>，实际上指的是屏幕对角线的长度（一般用英寸来度量）</p>
<p><code>1英寸 = 2.54厘米</code></p>
<p>屏幕分辨率</p>
<p>分辨率则一般用像素来度量，表示屏幕水平和垂直方向的像素数，例如 1920*1080 指的是屏幕垂直方向和水平方向分别有 1920 和 1080 个像素点而构成</p>
<p><code>像素</code>：指计算机显示设备中的最小单位，即一个像素点的大小。每一个像素点可以理解为就是屏幕上的一个发光点</p>
<p>像素密度 ppi</p>
<p><code>PPI (Pixels Per Inch)</code>表示屏幕每英寸的像素数</p>
<p>PPI 值的越大说明单位尺寸里所能容纳的像素数量就越多，所能展现画面的品质也就越精细，反之就越粗糙</p>
<h2 id="设备像素"><a href="#设备像素" class="headerlink" title="设备像素"></a>设备像素</h2><blockquote>
<p>设备像素 (device pixels）也叫物理像素</p>
</blockquote>
<p>设备像素指的是显示器上的真实像素，每个像素的大小是屏幕固有的属性，屏幕出厂以后就不会改变了</p>
<p>设备分辨率描述的就是这个显示器的宽和高分别是多少个设备像素</p>
<p>设备像素和设备分辨率交给操作系统来管理，浏览器不知道、也不需要知道设备分辨率的大小，浏览器只需要知道<strong>逻辑分辨率</strong>就可以了</p>
<h2 id="设备独立像素"><a href="#设备独立像素" class="headerlink" title="设备独立像素"></a>设备独立像素</h2><blockquote>
<p>设备独立像素（Device Independent Pixels）也叫逻辑像素、设备无关像素。在 IOS 设备上叫<code>PT</code>，Android 设备上叫<code>DP</code>，在 css 中，叫<code>PX</code></p>
</blockquote>
<p>为了能够保证 <code>图像内容在不同的 PPI 设备看上去大小应该差不多</code> ，操作系统定义了一个单位：设备独立像素，用设备独立像素定义的尺寸，不管屏幕的参数如何，都能以合适的大小显示（这也是设备独立像素名字的由来）</p>
<p>对于那些像素密度高的屏幕，操作系统将多个设备像素划分为一个逻辑像素。屏幕的像素密度越高，就需要更多的设备像素来显示一个设备独立像素。至于将多少设备像素划分为一个逻辑像素，这由操作系统决定</p>
<p>获取设备的像素比</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.devicePixelRatio <span class="comment">// 物理像素 与 css 像素的比值 DPR</span></span><br></pre></td></tr></table></figure>

<p>通过 <code>screen.width/height</code>得到的屏幕宽度和高度就是逻辑分辨率（单位：设备独立像素）</p>
<h2 id="css-像素与缩放"><a href="#css-像素与缩放" class="headerlink" title="css 像素与缩放"></a>css 像素与缩放</h2><p>在缩放比例为 100% 的情况下，一个 css 像素大小等于一个设备独立像素</p>
<p>缩放页面的时候，元素的 css 像素数量不会改变，改变的只是每个 css 像素的大小</p>
<p>缩放比例 = css 像素边长 / 设备独立像素边长</p>
<p>如果原本元素宽度为 128 个设备独立像素，那么缩放 200% 以后元素宽度为 256 个设备独立像素（css 像素宽度始终是 128）</p>
<p>桌面浏览器上缩放机制是 page zoom，缩放会导致 CSS 像素边长的改变，从而导致 window.devicePixelRatio 的改变</p>
<p>在移动端缩放机制是 pinch zoom，计算 window.devicePixelRatio 时，不考虑 pinch zoom 对 CSS 像素尺寸的影响，因此 window.devicePixelRatio 不会随缩放而改变</p>
<h2 id="2-倍图与-3-倍图"><a href="#2-倍图与-3-倍图" class="headerlink" title="2 倍图与 3 倍图"></a>2 倍图与 3 倍图</h2><blockquote>
<p>以后同学在工作的过程中，从 UI 那拿到的设计图通常都是 640 的设计图或者是 750 的设计图</p>
</blockquote>
<p>把更多的像素点压缩至一块屏幕里，从而达到更高的分辨率并提高屏幕显示的细腻程度</p>
<p>设备像素比 devicePixelRatio：即像素的压缩比例</p>
<p><strong>结论 ：在移动端为了在高清屏手机上显示得更加细腻，通常会使用更大的图片，比如 2 倍图或者 3 倍图</strong></p>
<h2 id="视口-viewport"><a href="#视口-viewport" class="headerlink" title="视口 viewport"></a>视口 viewport</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">问题：一个电脑上的网站，在手机端访问，效果是什么样的？</span><br><span class="line"></span><br><span class="line">iPhone5 的设备宽度只有 320px，一张宽度为 640px 的图片在手机端访问，显示的效果是什么？</span><br><span class="line"></span><br><span class="line">1. 在手机端，html的 大小都是 980px，为什么？</span><br><span class="line">这主要是历史原因导致的，因为在移动设备刚流行的时候，网站大多都是pc端的，pc端的页面宽度一般都比较大，移动设备的宽度比较小，如果pc端页面直接在移动端显示的话，页面就会错乱。为了解决这个问题，移动端html的大小直接就定死成了980px（因为早起的pc端网站版心就是980px居多）</span><br><span class="line"></span><br><span class="line">2. 视口</span><br><span class="line">在 pc 端，html 的大小默认是继承了浏览器的宽度，即浏览器多宽，html 的大小就是多宽，但是在移动端，多出来了一个视口的概念（乔布斯）,视口说白了就是介于浏览器与 html 之间的一个东西，视口的宽度默认定死了 980px，因此 html 的宽度默认就是 980px，视口的特点是能够根据设备的宽度进行缩放</span><br><span class="line"></span><br><span class="line">3. 视口设置</span><br><span class="line">对于现在的移动端页面来说，视口默认为 980px 肯定不合适，因为设备宽度不够的话，视口会进行缩放，导致页面展示效果不好看</span><br></pre></td></tr></table></figure>

<p><strong>视口参数设置</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// width 设置视口的宽度</span></span><br><span class="line"><span class="comment">// width=device-width   设置视口宽度为设备的宽度（常用）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// initial-scale 设置初始缩放比例</span></span><br><span class="line"><span class="comment">// initial-scale=1.0  表示不缩放</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// user-scalable 设置是否允许用户缩放</span></span><br><span class="line"><span class="comment">// user-scalable=no  不允许用户缩放</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// maximum-scale  设置允许的最大缩放比例</span></span><br><span class="line"><span class="comment">// maximum-scale=1.0  可以不设置，因为都禁止用户缩放了</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// minimum-scale 设置允许最小缩放比</span></span><br><span class="line"><span class="comment">// minimum-scale=1.0  不设置，因为都禁用用户缩放了</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 标准写法：</span></span><br><span class="line"><span class="comment">// 快捷键：  meta:vp + tab键</span></span><br><span class="line">&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, user-scalable=no, initial-scale=1.0&quot;</span>&gt;</span><br></pre></td></tr></table></figure>

<h2 id="移动端调试问题"><a href="#移动端调试问题" class="headerlink" title="移动端调试问题"></a>移动端调试问题</h2><ol>
<li>模拟器调试</li>
<li>真机调试：使用手机进行访问。</li>
</ol>
<p>手机设备五花八门，屏幕尺寸都大不一样，尤其是安卓端，给我们的页面预览带来了一些麻烦。在实际工作中，作为开发者不可能有足够的设备让我们去测试（<strong>除了测试部门</strong> ），即便有，效率也特别的低，因此开发者一般都是通过浏览器的手机模拟器来模拟不同的设备。</p>
<h1 id="流式布局"><a href="#流式布局" class="headerlink" title="流式布局"></a>流式布局</h1><p><strong>移动端的特点</strong></p>
<ul>
<li>手机端的兼容性问题比 PC 端小很多，因为手机端的浏览器版本比较新</li>
<li>手机端屏幕比较小，能够放的内容比较少。</li>
</ul>
<p>问题：布局的时候怎么解决屏幕大小不一致的问题？</p>
<ul>
<li>PC 端，固定版心，让所有分辨率的电脑的版心都是一样的，比如京东</li>
<li>移动端：移动端无法设置版心，因为移动端的设备屏幕本身就小，设置版心不合适。因此移动端大多会采用流式布局（百分比布局）</li>
</ul>
<p><strong>流式布局</strong>，也叫百分比布局，是移动端开发中经常使用的布局方式之一。</p>
<p>流式布局的特征：</p>
<ul>
<li>宽度自适应，高度写死，并不是百分百还原设计图</li>
<li>图标都是固定死大小的，包括字体等也是固定死的。并不是所有的东西都是自适应的。</li>
<li>一些大的图片，设置宽度为百分比自适应即可，随着屏幕大小进行变化</li>
</ul>
<p><strong>流式布局无法做到所有设备都非常逼真的还原设计图，有些设备显示效果不是特别的好看。但是流式布局是移动端非常常用的一种布局方式，比较简单，需要掌握（携程、京东)</strong></p>
<p><strong>最后一天会学习 rem 布局，配合 less 非常的方便，并且能够实现完全的自适应，包括字体以及图标等</strong></p>
<p>经典的流式布局</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. 左侧固定，右侧自适应</span><br><span class="line">2. 右侧固定，左侧自适应</span><br><span class="line">3. 两侧固定，中间自适应（圣杯布局，双飞翼布局）</span><br><span class="line">4. 等分布局</span><br></pre></td></tr></table></figure>

<h1 id="touch-事件"><a href="#touch-事件" class="headerlink" title="touch 事件"></a>touch 事件</h1><p>移动端新增了 4 个与手指触摸相关的事件</p>
<ul>
<li><code>touchstart</code>: 手指放到屏幕上时触发</li>
<li><code>touchmove</code>: 手指在屏幕上滑动式触发（会触发多次）</li>
<li><code>touchend</code>: 手指离开屏幕时触发</li>
<li><code>touchcancel</code>: 系统取消 touch 事件的时候触发，比如电话</li>
</ul>
<p>每个触摸事件被触发后，会生成一个 event 对象，event 对象中<code>changedTouches</code>会记录手指滑动的信息</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">e.touches <span class="comment">// 当前屏幕上的手指</span></span><br><span class="line">e.targetTouches <span class="comment">// 当前dom元素上的手指。</span></span><br><span class="line">e.changedTouches <span class="comment">// 触摸时发生改变的手指(重点)(如手指离开屏幕)</span></span><br></pre></td></tr></table></figure>

<p>这些列表里的每次触摸由 touch 对象组成，touch 对象里包含着触摸信息，主要属性如下</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// e.changedTouches[0].clientX</span></span><br><span class="line">clientX / clientY <span class="comment">// 触摸点相对浏览器窗口的位置</span></span><br><span class="line">pageX / pageY <span class="comment">// 触摸点相对于页面的位置</span></span><br></pre></td></tr></table></figure>

<p>!&gt; 使用 jquery 注册 touch 类事件时，获取手指使用 <code>e.originalEvent.touchs[0]</code> ，因为 jq 对事件对象进行了封装</p>
<p>【案例：jdm-滑动轮播图】</p>
<p>【案例：jdm-区域滚动】</p>
<h2 id="iscroll-插件使用"><a href="#iscroll-插件使用" class="headerlink" title="iscroll 插件使用"></a>iscroll 插件使用</h2><p><a href="https://github.com/cubiq/iscroll">https://github.com/cubiq/iscroll</a></p>
<p><a href="http://www.mamicode.com/info-detail-331827.html">iscroll 参考文档</a></p>
<p><strong>注意</strong>：使用 iscroll 需要满足的条件</p>
<ol>
<li>父盒子嵌套了子盒子（一个）</li>
<li>如果有多个子盒子，所以我们需要使用一个盒子把所有的子盒子包裹起来</li>
<li>如果有图片，我们需要保证图片加载完成，如果有浮动，需要清除浮动，为了保证子盒子的高度获取的是正确的</li>
<li>子盒子大小一定要超过父盒子的大小</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用：box为父盒子</span></span><br><span class="line"><span class="keyword">var</span> box = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.box&#x27;</span>)</span><br><span class="line"><span class="keyword">new</span> IScroll(box, &#123;</span><br><span class="line">  scrollX: <span class="literal">false</span>, <span class="comment">// 横向滚动</span></span><br><span class="line">  scrollY: <span class="literal">true</span> <span class="comment">// 纵向滚动</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="zepto-框架"><a href="#zepto-框架" class="headerlink" title="zepto 框架"></a>zepto 框架</h1><blockquote>
<p><strong>Zepto</strong>是一个轻量级的<strong>针对现代高级浏览器的 JavaScript 库， <strong>它与 jquery</strong>有着类似的 api</strong>。 如果你会用 jquery，那么你也会用 zepto</p>
</blockquote>
<p><a href="https://github.com/madrobby/zepto">github 地址</a></p>
<p><a href="http://www.css88.com/doc/zeptojs_api/">中文文档</a></p>
<h2 id="zepto-与-jquery-的区别"><a href="#zepto-与-jquery-的区别" class="headerlink" title="zepto 与 jquery 的区别"></a>zepto 与 jquery 的区别</h2><ul>
<li>jquery 针对 pc 端，主要用于解决浏览器兼容性问题，zepto 主要针对移动端</li>
<li>zepto 比 jquery 轻量，文件体积更小</li>
<li>zepto 封装了一些移动端的手势事件</li>
</ul>
<h2 id="zepto-的基本使用"><a href="#zepto-的基本使用" class="headerlink" title="zepto 的基本使用"></a>zepto 的基本使用</h2><p>zepto 的使用与 jquery 基本一致，zepto 是分模块的，需要某个功能，就需要引入某个 zepto 的文件</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;zepto/zepto.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;zepto/event.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;zepto/fx.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">&#x27;.box&#x27;</span>).addClass(<span class="string">&#x27;demo&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  $(<span class="string">&#x27;button&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">&#x27;.box&#x27;</span>).animate(&#123; <span class="attr">width</span>: <span class="number">500</span> &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="zepto-的定制"><a href="#zepto-的定制" class="headerlink" title="zepto 的定制"></a>zepto 的定制</h2><p>安装 Nodejs 环境</p>
<p>1、下载 zepto.js</p>
<p>2、解压缩</p>
<p>3、cmd 命令行进入解压缩后的目录</p>
<p>4、执行<code>npm install</code>命令</p>
<p>5、编辑 make 文件的<code>41行</code>，添加自定义模块并保存</p>
<p>7、然后执行命令 <code>npm run-script dist</code></p>
<p>8、查看目录 dist 即构建好的 zepto.js</p>
<h2 id="zepto-手势事件"><a href="#zepto-手势事件" class="headerlink" title="zepto 手势事件"></a>zepto 手势事件</h2><p>zepto 中根据<code>touchstart touchmove touchend</code>封装了一些常用的手势事件，这些事件都是基于 touchstart touchmove touchend 封装</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">tap <span class="comment">// 轻触事件,用于替代移动端的click事件，因为click事件在老版本中会有300ms的延迟</span></span><br><span class="line">swipe <span class="comment">//手指滑动时触发</span></span><br><span class="line">swipeLeft <span class="comment">//左滑</span></span><br><span class="line">swipeRight <span class="comment">//右滑</span></span><br><span class="line">swipeUp <span class="comment">//上滑</span></span><br><span class="line">swipeDown <span class="comment">//下滑</span></span><br></pre></td></tr></table></figure>

<h1 id="响应式"><a href="#响应式" class="headerlink" title="响应式"></a>响应式</h1><h2 id="什么是响应式布局"><a href="#什么是响应式布局" class="headerlink" title="什么是响应式布局"></a>什么是响应式布局</h2><blockquote>
<p>响应式布局（respond layout）是 Ethan Marcotte 在 2010 年 5 月份提出的一个概念，简而言之，就是<strong>一个网站能够兼容多个终端（手机、平板、pc 电脑、手表）</strong> ——而不是为每个终端做一个特定的版本。这个概念是为解决移动互联网浏览而诞生的</p>
</blockquote>
<p><strong>为什么要有响应式布局？</strong></p>
<ul>
<li>在移动互联日益成熟的时候，在 PC 端开发的网页已经无法满足移动设备的要求</li>
<li>通常的做法是针对移动端单独做一套特定的版本</li>
<li>如果终端越来越多，那么需要开发的版本就会越来越多（大屏设备的普及）</li>
<li><strong>响应式布局</strong> ：一个网站能够兼容多个终端（节约开发成本）</li>
</ul>
<p><strong>优点：</strong></p>
<p>面对不同分辨率设备灵活性强</p>
<p>能够快捷解决多设备显示适应问题</p>
<p>**缺点： **</p>
<p>兼容各种设备工作量大，效率低下</p>
<p>代码累赘，会出现隐藏无用的元素，加载时间加长</p>
<p>其实这是一种折中性质的设计解决方案，多方面因素影响而达不到最佳效果</p>
<p>一定程度上改变了网站原有的布局结构，会出现用户混淆的情况</p>
<p>响应式开发现状：</p>
<ul>
<li>如果已经存在 PC 的网站了，那么一般不会使用响应式开发，而是针对移动端再开发一套系统（比如京东、淘宝）</li>
<li>在<strong>新建站点</strong> 上采用响应式开发的越来越多</li>
<li>在国内，响应式开发还不是特别的流行。但响应式开发是大势所趋，会越来越流行</li>
</ul>
<h2 id="响应式开发与移动-web-开发的比较"><a href="#响应式开发与移动-web-开发的比较" class="headerlink" title="响应式开发与移动 web 开发的比较"></a>响应式开发与移动 web 开发的比较</h2><table>
<thead>
<tr>
<th>开发方式</th>
<th>移动 web 开发+pc 开发</th>
<th>响应式开发</th>
</tr>
</thead>
<tbody><tr>
<td>引用场景</td>
<td>一般已经有了 PC 端网站，只需要端独开发移动端网站即可</td>
<td>针对一些新建网站，并且要求适配移动端</td>
</tr>
<tr>
<td>开发</td>
<td>针对性强，开发效率高</td>
<td>兼容各种终端，效率低</td>
</tr>
<tr>
<td>适配</td>
<td>只能适配移动端或者 PC 端，pad 上体验比较差</td>
<td>可以适配各种终端</td>
</tr>
<tr>
<td>效率</td>
<td>代码简介，加载快</td>
<td>代码相对复杂，加载慢</td>
</tr>
</tbody></table>
<h1 id="媒体查询"><a href="#媒体查询" class="headerlink" title="媒体查询"></a>媒体查询</h1><blockquote>
<p>媒体查询（Media Query）是 CSS3 提出来的一个新的属性，通过媒体查询可以查询到 screen 的宽度，从而指定某个宽度区间的网页布局</p>
</blockquote>
<h2 id="设备分类"><a href="#设备分类" class="headerlink" title="设备分类"></a>设备分类</h2><table>
<thead>
<tr>
<th>分类</th>
<th>宽度范围</th>
</tr>
</thead>
<tbody><tr>
<td>大屏设备</td>
<td>&gt;1200px</td>
</tr>
<tr>
<td>中屏设备</td>
<td>992px~1200px</td>
</tr>
<tr>
<td>小屏设备</td>
<td>768px~992px</td>
</tr>
<tr>
<td>超小屏设备</td>
<td>&lt; 768px</td>
</tr>
</tbody></table>
<h2 id="媒体查询的使用"><a href="#媒体查询的使用" class="headerlink" title="媒体查询的使用"></a>媒体查询的使用</h2><p>需求：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  大屏设备(&gt;1200px)   版心：1170px   背景色：红色</span></span><br><span class="line"><span class="comment">  中屏设备(992-1200)  版心：970px    背景色：蓝色</span></span><br><span class="line"><span class="comment">  小屏设备(768-992)   版心：750px    背景色：黄色</span></span><br><span class="line"><span class="comment">  超小屏设备(&lt;768px)  版心：100%     背景色：绿色</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>

<p>响应式开发的原理：使用媒体查询实现不同终端的布局和样式的切换</p>
<p>媒体查询语法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 查询屏幕 */</span></span><br><span class="line"><span class="comment">/* screen 和第一个 and 可以省略 */</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> 条件 &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 条件的写法 */</span></span><br><span class="line"><span class="comment">/* min-width: 只要屏幕宽度超过这个值的设备样式就能生效 */</span></span><br><span class="line"><span class="comment">/* max-width: 只要屏幕宽度小于这个值的设备样式就能生效 */</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">1200px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1170px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">992px</span>) <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">1200px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">970px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: blue;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">768px</span>) <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">992px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">750px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: green;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="bootstrap-框架"><a href="#bootstrap-框架" class="headerlink" title="bootstrap 框架"></a>bootstrap 框架</h1><p><strong>【项目：微金所】</strong></p>
<h1 id="REM"><a href="#REM" class="headerlink" title="REM"></a>REM</h1><h2 id="rem-是什么？"><a href="#rem-是什么？" class="headerlink" title="rem 是什么？"></a>rem 是什么？</h2><p><code>rem</code>（font size of the root element）是指相对于<code>根元素</code>的字体大小的单位。它就是一个相对单位。</p>
<p><code>em</code>（font size of the element）是指相对于 <code>当前元素的字体大小</code> 的单位。它也是一个相对单位。</p>
<p>它们之间其实很相似，只不过计算的规则一个是依赖根元素，一个是当前元素计算。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.em</span> &#123;</span><br><span class="line">  <span class="comment">/* em 的计算方式参照的当前元素的 font-size，如果不设置，默认继承自父盒子 */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2em</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2em</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* rem 的计算方式参照的是 html 的 font-size */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.rem</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="为什么要用-rem？"><a href="#为什么要用-rem？" class="headerlink" title="为什么要用 rem？"></a>为什么要用 rem？</h2><blockquote>
<p>rem 的主要目的就是解决用于不同屏幕的适配问题。rem 能够等比例的适配所有的屏幕。</p>
</blockquote>
<p>由于市面上手机种类繁多，导致移动端的屏幕种类非常的混乱，比如有常见的<code>320px 360px 375px 384px 480px 640px</code>等。在开发中，美工一般只会提供 750px 或者是 640px 的设计稿，这就要求我们通过一张设计稿能够适配所有的屏幕。通常解决方案如下：</p>
<ul>
<li>流式布局：虽然可以让各种屏幕都适配，但是显示效果不是非常的友好，因为只有几个尺寸的手机能够完美的显示出来视觉设计师和交互最想要的效果。但是目前使用流式布局的公司非常多，比如 <a href="https://www.amazon.cn/">亚马逊</a> 、<a href="https://m.jd.com/">京东</a> 、<a href="https://m.ctrip.com/">携程</a></li>
<li>响应式布局：响应式这种方式在国内很少有大型企业的复杂性的网站在移动端用这种方法去做，主要原因是<strong>工作大，维护性难</strong> 。所以一般都是中小型的门户或者博客类站点会采用响应式的方法从 PC 端页面到移动端页面以及 web app 直接一步到位，因为这样反而可以节约成本。</li>
<li>rem 布局：rem 能够适配所有的屏幕，与 less 配合使用效果会更好。目前使用 rem 布局的有：<a href="https://m.taobao.com/">淘宝</a> 、 <a href="https://m.suning.com/">苏宁</a></li>
</ul>
<h2 id="rem-布局"><a href="#rem-布局" class="headerlink" title="rem 布局"></a>rem 布局</h2><p>因为 rem 的基准点是根元素 html 的字体大小，因此我们只需要设置不同屏幕的 html 的 font-size 大小不一样就可以达到不同屏幕的适配了。</p>
<h3 id="rem-配合媒体查询"><a href="#rem-配合媒体查询" class="headerlink" title="rem 配合媒体查询"></a>rem 配合媒体查询</h3><p>使用 rem 配合媒体查询可以适配多个终端</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">@media(min-width: 320px) &#123;</span><br><span class="line">  <span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="comment">/* 基准值 / 设计图的大小  = 某个屏幕的font-size / 屏幕的宽度 */</span></span><br><span class="line">    <span class="comment">/* 100/750 = x/370 */</span></span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">50px</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>优点：使用媒体查询适配，速度快。</p>
<p>缺点：适配多个终端时，需要添加响应的代码。</p>
<h3 id="rem-配合-javascript"><a href="#rem-配合-javascript" class="headerlink" title="rem 配合 javascript"></a>rem 配合 javascript</h3><p>通过 javascript 获取可视区的宽度，计算 font-size 的值，也可以适配多个终端</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 根据屏幕的大小动态设置 html的 font-size</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">responsive</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> uiWidth = <span class="number">750</span> <span class="comment">// 设计图宽度</span></span><br><span class="line">  <span class="keyword">var</span> base = <span class="number">100</span> <span class="comment">// 设计图中1rem的大小</span></span><br><span class="line">  <span class="comment">// 当前屏幕的大小</span></span><br><span class="line">  <span class="keyword">var</span> pageWidth = <span class="built_in">window</span>.innerWidth</span><br><span class="line">  <span class="keyword">if</span>(pageWidth &gt;= <span class="number">750</span>) &#123;</span><br><span class="line">    pageWidth = <span class="number">750</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(pageWidth &lt;= <span class="number">320</span>) &#123;</span><br><span class="line">    pageWidth = <span class="number">320</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 说白了就是把一个屏幕分成了 7.5 rem</span></span><br><span class="line">  <span class="built_in">document</span>.documentElement.style.fontSize = (base / uiWidth * pageWidth).toFixed(<span class="number">2</span>) + ’px‘</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>优点：直接适配所有的终端</p>
<p>缺点：必须在页面加载之前设置 html 的 font-size 值，不然会出现文字大小调动的情况。</p>
<h3 id="rem-配合-flexible-插件"><a href="#rem-配合-flexible-插件" class="headerlink" title="rem 配合 flexible 插件"></a>rem 配合 flexible 插件</h3><ul>
<li><p>flexible 插件基准值（base）是设计图的 1/10</p>
</li>
<li><p>使用 flexible</p>
</li>
</ul>
<ol>
<li><p>在 header 中引入 flexible.js 这个文件</p>
</li>
<li><p>根据设计图能够确定基准值， 配合 px2rem 插件 ，需要设置一个 rootFontSize</p>
</li>
</ol>
<p>【案例：苏宁易购】</p>
<h1 id="swiper-插件"><a href="#swiper-插件" class="headerlink" title="swiper 插件"></a>swiper 插件</h1><blockquote>
<p>Swiper 是纯 javascript 打造的滑动特效插件，面向手机、平板电脑等移动终端</p>
</blockquote>
<p><a href="http://www.swiper.com.cn/">swiper 中文网</a></p>
<h1 id="other"><a href="#other" class="headerlink" title="other"></a>other</h1><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="comment">/* 取消链接高亮, 移动端特有的样式  */</span></span><br><span class="line">  -webkit-tap-highlight-<span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
  </entry>
  <entry>
    <title>linux 入门</title>
    <url>/1662.html</url>
    <content><![CDATA[<p><a href="https://www.bt.cn/">宝塔面板</a></p>
<p>neofetch</p>
<p>screenfetch</p>
<p>netdata linux 系统性能监测工具</p>
<p>htop 系统状况监控</p>
<p>nano linux下文本编辑器</p>
<p>grafana</p>
<h3 id="linux-目录表"><a href="#linux-目录表" class="headerlink" title="linux 目录表"></a>linux 目录表</h3><p>/ 根目录</p>
<p>/bin 、 /usr/bin 可执行二进制文件目录，如常用的命令 ls cat 等</p>
<p>/boot 放置系统启动时用到的一些文件，如内核文件</p>
<p>/dev 存放系统下的设备文件，访问该目录下的文件，相当于访问某个设备，常用的是挂载光驱<code>mount /dev/cdrom/mnt</code></p>
<p>/etc 系统配置文件，重要的配置文件有</p>
<h3 id="文件大小表示方式"><a href="#文件大小表示方式" class="headerlink" title="文件大小表示方式"></a>文件大小表示方式</h3><table>
<thead>
<tr>
<th>单位</th>
<th>英文</th>
</tr>
</thead>
<tbody><tr>
<td>字节</td>
<td>B (Byte)</td>
</tr>
<tr>
<td>千</td>
<td>K (KibiByte)</td>
</tr>
<tr>
<td>兆</td>
<td>M (MebiByte)</td>
</tr>
<tr>
<td>千兆</td>
<td>G (GigaByte)</td>
</tr>
<tr>
<td>太</td>
<td>T (TeraByte)</td>
</tr>
<tr>
<td>拍</td>
<td>P (PetaByte)</td>
</tr>
<tr>
<td>艾</td>
<td>E (ExaByte)</td>
</tr>
<tr>
<td>泽</td>
<td>Z (ZettaByte)</td>
</tr>
<tr>
<td>尧</td>
<td>Y (YottaByte)</td>
</tr>
</tbody></table>
<h3 id="linux-常用命令"><a href="#linux-常用命令" class="headerlink" title="linux 常用命令"></a>linux 常用命令</h3><table>
<thead>
<tr>
<th>命令</th>
<th></th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>ls</td>
<td>list</td>
<td>查看当前文件夹下的内容</td>
</tr>
<tr>
<td>pwd</td>
<td>print work directory</td>
<td>查看当前所在文件夹</td>
</tr>
<tr>
<td>cd[目录名]</td>
<td>change directory</td>
<td>切换文件夹</td>
</tr>
<tr>
<td>touch[文件名]</td>
<td>touch</td>
<td>如果文件不存在，新建文件<br />如果文件已经存在，修改文件的末次修改日期</td>
</tr>
<tr>
<td>mkdir[目录名]</td>
<td>make directory</td>
<td>创建目录</td>
</tr>
<tr>
<td>rm[文件名]</td>
<td>remove</td>
<td>删除指定的文件名</td>
</tr>
<tr>
<td>clear</td>
<td></td>
<td>清屏</td>
</tr>
</tbody></table>
<p><strong>ls 常用选项</strong></p>
<ul>
<li><code>-a</code> 显示所有目录和文件，包括隐藏文件</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ls -a</span></span><br><span class="line">. .. .xxx.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> 以.开头的文件/文件夹为隐藏文件/文件夹</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> . 代表当前目录</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> .. 代表上一级目录</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 蓝色为目录，白色为文件</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>-l</code> 以列表方式显示文件的详细信息</li>
<li><code>-h</code> 配合-l 以人性化的方式显示文件大小</li>
</ul>
<p>选项可以合写，无顺序</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ls -alh</span></span><br></pre></td></tr></table></figure>

<p>ls <strong>通配符</strong></p>
<ul>
<li><code>*</code> 代表任意个数个字符</li>
<li><code>？</code>代表任意一个字符</li>
<li><code>[]</code> 表示可以匹配字符组中的任意一个</li>
<li><code>[abc]</code> 匹配<code>a</code>、<code>b</code>、<code>c</code> 中的任意一个</li>
<li><code>[a-f]</code> 匹配 <code>a-f</code> 任意一个字符</li>
</ul>
<p><strong>cd 常用选项</strong></p>
<ul>
<li><p><code>cd</code>/<code>cd ~</code> 切换到当前用户的主目录</p>
</li>
<li><p><code>cd ..</code> 切换到上一级目录</p>
</li>
<li><p><code>cd -</code> 在最近两次工作目录间切换</p>
</li>
</ul>
<p><strong>mkdir</strong></p>
<ul>
<li><code>-p</code> 可以递归创建目录</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> madir -p a/b/c</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>同一目录下文件夹名称不能和文件名同名</p>
</blockquote>
<p><strong>rm</strong></p>
<blockquote>
<p>删除时直接删除，不放入回收站</p>
</blockquote>
<ul>
<li><p><code>-f</code> 强制删除，忽略不存在的文件，无需提示</p>
</li>
<li><p><code>-r</code> 递归的删除目录下的内容，或用于删除文件夹</p>
</li>
</ul>
<h3 id="终端命令格式"><a href="#终端命令格式" class="headerlink" title="终端命令格式"></a>终端命令格式</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">command</span> [-options][paramete]</span><br></pre></td></tr></table></figure>

<p>command : 命令名，相应功能的英文单词或单词缩写<br>-options： 选项<br>paramete ：参数</p>
<h3 id="查阅帮助信息"><a href="#查阅帮助信息" class="headerlink" title="查阅帮助信息"></a>查阅帮助信息</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">command</span> --<span class="built_in">help</span></span><br><span class="line">$ man <span class="built_in">command</span></span><br><span class="line"><span class="comment"># man 是manual缩写,手册</span></span><br><span class="line"><span class="comment"># 使用man 时的操作键</span></span><br><span class="line"><span class="comment">#	空格 显示手册的下一屏</span></span><br><span class="line"><span class="comment">#	enter 一次滚动手册页的一行</span></span><br><span class="line"><span class="comment">#	b 回滚一屏</span></span><br><span class="line"><span class="comment">#	f 前滚一屏</span></span><br><span class="line"><span class="comment">#	q 退出</span></span><br><span class="line"><span class="comment">#	/word 搜索word字符串</span></span><br></pre></td></tr></table></figure>

<h3 id="终端技巧"><a href="#终端技巧" class="headerlink" title="终端技巧"></a>终端技巧</h3><ul>
<li><p>自动补全</p>
<p>在敲出 文件/目录/命令的前几个字母后，按下 <code>tab</code> 键</p>
<ul>
<li>如果输入没有歧义，系统会自动补全</li>
<li>如果输入有歧义，再按一下 <code>tab</code> 键，系统会提示可能存在的命令</li>
</ul>
</li>
<li><p>曾经使用过的命令</p>
<p>按上下键可在曾经使用过的命令间切换，<code>Ctrl+c</code> 退出选择</p>
</li>
</ul>
<h3 id="文件和目录常用命令"><a href="#文件和目录常用命令" class="headerlink" title="文件和目录常用命令"></a>文件和目录常用命令</h3><h4 id="拷贝和移动文件"><a href="#拷贝和移动文件" class="headerlink" title="拷贝和移动文件"></a>拷贝和移动文件</h4><ul>
<li><p><code>tree [目录名]</code>： 以树状图列出文件目录结构</p>
<p><code>-d</code> 只显示目录，不显示文件</p>
</li>
<li><p><code>cp 源文件 目标文件</code>： copy 复制文件或者目录</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cp  ~/Documemt/readme.txt  ./readme.txt</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将 ~/Documemt/ 目录下的 readme.txt 文件复制到./目录下并以readme.txt命名</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果不修改文件名，只需要写目标路径</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cp  ~/Documemt/readme.txt  ./</span></span><br></pre></td></tr></table></figure>

<p><code>-i</code> ：覆盖文件前提示 y 覆盖 n 不覆盖</p>
<p><code>-r</code> ：若给出的源文件是目录文件，将递归复制该目录下的所有子目录和文件，目标文件必须为一个目录名</p>
<ul>
<li><code>mv 源文件 目标文件</code>：move 移动文件或目录/ 文件或目录重命名</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mv  ~/Documemt/readme.txt  ./</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将 ~/Documemt/ 目录下的 readme.txt 文件移动到./目录下</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mv readme.txt demo.txt</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将readme.txt文件名修改为demo.txt</span></span><br></pre></td></tr></table></figure>

<p><code>-i</code> ：覆盖文件前提示 y 覆盖 n 不覆盖</p>
<h4 id="查看文件内容"><a href="#查看文件内容" class="headerlink" title="查看文件内容"></a>查看文件内容</h4><ul>
<li><p><code>cat</code> 文件名： <code>concatenate</code> 查看文件内容、创建文件、文件合并、追加文件内容等功能，会<strong>一次显示所有内容</strong>，适合内容较少的文本文件</p>
<p><code>-b</code>：对非空输出行编号</p>
<p><code>-n</code>：对输出的所有行编号</p>
<blockquote>
<p>linux 中还有一个 <code>nl</code> 命令和 <code>cat -b</code> 的效果等价</p>
</blockquote>
</li>
<li><p><code>more</code> 文件名：<strong>分屏显示文件内容</strong> ，按空格显示下一屏，适合查看内容较多的文本</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 使用 more 时的操作键  和 man 相同</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 空格 显示手册的下一屏</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> enter 一次滚动手册页的一行</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> b 回滚一屏</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> f 前滚一屏</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> q 退出</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> /word 搜索word字符串</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>grep</code> 搜索文本 文件名： 搜索文本文件内容，输出包含该文本的行</p>
<blockquote>
<p>linux 中的文本搜索工具，允许对文本文件进行模式查找（正则表达式），如果搜索文本中间有空格可以使用引号包裹</p>
</blockquote>
<p><code>-n</code> 显示匹配行和行号</p>
<p><code>-v</code> 显示不包含匹配文本的所有行（相当于求反）</p>
<p><code>-i</code> 忽略大小写</p>
<p><code>^a</code> 行首，搜索以 a 开头的行</p>
<p><code>ke$</code> 行尾，搜索以 ke 结束的行</p>
</li>
</ul>
<h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><ul>
<li><p><code>echo 文字内容</code> ：会在终端中显示参数指定的文本，通常会和重定向联合使用</p>
</li>
<li><p>重定向 <code>&gt;</code> 和 <code>&gt;&gt;</code>：</p>
</li>
</ul>
<blockquote>
<p>linux 允许将命令执行结果重定向到一个文件，将本应显示在终端上的内容输出/追加到指定文件中，保存命令输出结果</p>
</blockquote>
<p><code>&gt;</code> 表示输出，会覆盖文件原有的内容</p>
<p><code>&gt;&gt;</code> 表示追加，会将文件追加到已有文件的末尾</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 创建 a 文件并将 “hello world”输出到 a 文件中 ，与touch区别</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> hello world &gt; a</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将命令 “ls -lh” 的结果输出到 a 文件中</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ls -lh &gt; a</span></span><br></pre></td></tr></table></figure>

<ul>
<li>管道 <code>|</code></li>
</ul>
<blockquote>
<p>linux 允许将一个命令的输出通过管道作为另一个命令的输入，另一个命令对第一个命令的输出进行二次处理</p>
<p>可以理解为现实生活中的管子，管子的一头塞东西进去，另一头取出来，这里 <code>|</code> 的左右分为两端，左端塞东西（写），右端取东西（读）</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> more：分屏显示内容</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 分屏显示命令 “ls -lha” 的输出结果</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ls -lha ~ | more</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> grep：在命令执行结果的基础上查询指定文本</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查找 “ls -lha ~” 的结果中包含Do的行并显示</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ls -lha ~ | grep Do</span></span><br></pre></td></tr></table></figure>

<h3 id="远程管理命令"><a href="#远程管理命令" class="headerlink" title="远程管理命令"></a>远程管理命令</h3><h4 id="关机-重启"><a href="#关机-重启" class="headerlink" title="关机/重启"></a>关机/重启</h4><p><code>shutdown 选项 时间</code></p>
<pre><code>`-r`  重新启动
</code></pre>
<blockquote>
<p>不指定选项和参数，默认表示一分钟之后关闭电脑</p>
<p>远程维护服务器时，最好不要关闭系统，而应该重新启动系统</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 常用命令示例</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重新启动电脑，now 表示现在</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> shutdown -r now</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 系统在今天20:00 关机</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> shutdown 20:00</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 系统十分钟后自动关机</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> shutdown +10</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 取消关机计划</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> shutdown -c</span></span><br></pre></td></tr></table></figure>

<h4 id="查看或配置网卡信息"><a href="#查看或配置网卡信息" class="headerlink" title="查看或配置网卡信息"></a>查看或配置网卡信息</h4><p><code>ifconfig</code>: <code>configure a network interface</code> 查看/配置计算机当前的网卡配置信息</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看网卡配置信息</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ifconfig</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看网卡对应的IP地址</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ifconfig | grep inet</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>在 linux 中物理网卡通常以 <code>ensxx</code> 表示</p>
<p>127.0.0.1 本地环回/环回地址，一般用来测试本机网卡是否正常</p>
</blockquote>
<p><code>ping ip地址</code>： <code>ping</code> 检测到目标 ip 地址连接是否正常</p>
<p>ping 127.0.0.1 检查本地网卡是否工作正常</p>
<h4 id="远程登录和复制文件"><a href="#远程登录和复制文件" class="headerlink" title="远程登录和复制文件"></a>远程登录和复制文件</h4><ul>
<li><p><code>ssh 用户名@ip</code> ：<code>secure shell</code> 关机/重新启动</p>
</li>
<li><p><code>scp 用户名@ip:文件名或路径 用户名@ip:文件名或路径</code>：<code>secure copy</code> 远程复制文件</p>
</li>
</ul>
<p><strong>SSH</strong> ：SSH 客户端是一种使用 Secure Shell (SSH) 协议连接到远程计算机的软件协议</p>
<ul>
<li><p>数据传输是加密的，可以防止远程管理过程中的信息泄露，也能防止 DNS 欺骗和 IP 欺骗</p>
</li>
<li><p>数据传输是压缩的，可以提高传输速度</p>
</li>
</ul>
<blockquote>
<p>有关 ssh 配置信息都保存在用户家目录下的 <code>.ssh</code>目录下</p>
</blockquote>
<h5 id="域名和端口号"><a href="#域名和端口号" class="headerlink" title="域名和端口号"></a>域名和端口号</h5><p><code>域名</code>：由一串用点分割的名字组成，例如 <code>www.baidu.com</code> ，是 IP 地址的别名，方便记忆</p>
<p><code>端口号</code>：通过 IP 地址可以找到网络上的计算机，通过端口号可以找到计算机上运行的程序</p>
<blockquote>
<p>SSH 服务器默认端口号为 22，Web 服务器为 80，HTTPS 为 443，FTP 服务器为 21，如果没有指定端口号，使用默认端口号</p>
</blockquote>
<h5 id="SSH-基本使用"><a href="#SSH-基本使用" class="headerlink" title="SSH 基本使用"></a>SSH 基本使用</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ssh [-p port] user@remote</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> user 远程服务器上的用户名，如果不指定默认当前用户</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> remote 远程机器的地址，可以是IP/域名，或者别名</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> port 是SSH server 监听的端口，如果不指定，默认22</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用 <span class="built_in">exit</span> 退出当前用户登录</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ssh 在 linux 或 Unix 系统下可直接使用，win下需要安装软件 putty xshell</span></span><br></pre></td></tr></table></figure>

<h5 id="scp-基本使用"><a href="#scp-基本使用" class="headerlink" title="scp 基本使用"></a>scp 基本使用</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 从远程服务器拷贝文件</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> scp user@remoteip:文件名或路径 文件名或路径</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -r 复制目录</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -P 指定端口是要用大写的 P</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 上传文件到服务器</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> scp 文件名或路径 user@remote ip:文件名或路径</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>scp</code> 命令只能在 <code>Linux</code> 或 <code>Unix</code> 下使用</p>
</blockquote>
<p>在 win 系统中需安装 filezilla 使用 FTP 进行文件传输</p>
<p>FileZilla 传输文件时，使用的是 <code>FTP</code> 服务而不是 <code>SSH</code> 服务，因此端口号应该为 <code>21</code></p>
<h5 id="ssh-高级"><a href="#ssh-高级" class="headerlink" title="ssh 高级"></a>ssh 高级</h5><ul>
<li>免密码登陆</li>
</ul>
<p>配置公钥：执行 <code>ssh-keygen</code> 即可生成 ssh 钥匙，一路回车即可</p>
<p><code>id_rsa.pub</code> 公钥 、 <code>id_rsa</code> 私钥</p>
<p>上传公钥到服务器：执行 <code>ssh-copy-id -p port user@remote</code>，公钥保存在服务器 <code>.ssh</code> 目录下</p>
<p><code>authorized_keys</code></p>
<blockquote>
<p>本地使用私钥对数据进行加密/解密，服务器使用公钥对数据进行加密/解密</p>
<p>非对称加密算法</p>
<p>使用公钥加密的数据，需要使用私钥解密</p>
<p>使用公私钥加密的数据，需要使用公钥解密</p>
</blockquote>
<ul>
<li>配置别名</li>
</ul>
<p><code>~/.ssh/config</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Host vultr</span><br><span class="line">	HostName ip地址</span><br><span class="line">	User root</span><br><span class="line">	port 22</span><br></pre></td></tr></table></figure>

<p>直接使用 <code>ssh vultr</code> 即可实现登陆，<code>scp</code> 同样适用</p>
<h4 id="修改-ssh-配置允许自定义工具连接服务器"><a href="#修改-ssh-配置允许自定义工具连接服务器" class="headerlink" title="修改 ssh 配置允许自定义工具连接服务器"></a>修改 ssh 配置允许自定义工具连接服务器</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 切换到 root 角色</span></span><br><span class="line">sudo -i</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改 SSH 配置文件 /etc/ssh/sshd_config</span></span><br><span class="line">vi /etc/ssh/sshd_config</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改</span></span><br><span class="line">PermitRootLogin yes <span class="comment"># 开启root用户访问</span></span><br><span class="line">PasswordAuthentication yes <span class="comment"># 开启密码登陆</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 给root用户设置密码</span></span><br><span class="line">passwd root</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启SSH服务使修改生效</span></span><br><span class="line">service sshd restart</span><br></pre></td></tr></table></figure>

<h3 id="用户和权限的相关命令"><a href="#用户和权限的相关命令" class="headerlink" title="用户和权限的相关命令"></a>用户和权限的相关命令</h3><h4 id="用户和权限的基本概念"><a href="#用户和权限的基本概念" class="headerlink" title="用户和权限的基本概念"></a>用户和权限的基本概念</h4><ul>
<li><p>用户管理包括 <strong>用户</strong> 和 <strong>组</strong> 管理</p>
</li>
<li><p>在 linux 中可以指定每一个用户针对不同的文件或目录不同的权限</p>
</li>
<li><p>对<strong>文件/目录的权限</strong>包括</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>权限</th>
<th>英文</th>
<th>缩写</th>
<th>数字代号</th>
</tr>
</thead>
<tbody><tr>
<td>读</td>
<td>red</td>
<td>r</td>
<td>4</td>
</tr>
<tr>
<td>写</td>
<td>write</td>
<td>w</td>
<td>2</td>
</tr>
<tr>
<td>执行</td>
<td>excute</td>
<td>x</td>
<td>1</td>
</tr>
<tr>
<td>无</td>
<td></td>
<td>-</td>
<td>0</td>
</tr>
</tbody></table>
<p><strong>组</strong>：实际工作中，可以预先对组设置好权限，然后将不同的用户添加到不同的组中（简化了用户权限设置）</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ls -l 扩展</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ls -l</span></span><br><span class="line">-rw-rw-r-- 1 用户名 组名 大小 时间 名称</span><br><span class="line">drwxrwxr-x 2</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>-</td>
<td>rw-</td>
<td>rw-</td>
<td>r–</td>
<td>1</td>
<td>用户名</td>
<td>组名</td>
</tr>
<tr>
<td>d</td>
<td>rwx</td>
<td>rwx</td>
<td>r-x</td>
<td>2</td>
<td></td>
<td></td>
</tr>
<tr>
<td>文件/目录</td>
<td>当前用户权限</td>
<td>当前组所对应的权限</td>
<td>其他用户权限</td>
<td>硬链接数</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>硬链接数：表示有多少种方式可以访问到当前目录/文件，文件的硬链接数通常为 1，目录的硬链接数取决于该目录有多少个子目录。</p>
<h4 id="修改文件-目录权限-chmod"><a href="#修改文件-目录权限-chmod" class="headerlink" title="修改文件/目录权限 chmod"></a>修改文件/目录权限 <code>chmod</code></h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> chmod +/-rwx 文件名|目录</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> + 增加权限  - 删除权限</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 直接修改文件/目录的读、写、执行权限，但不能精确到 拥有者/组/其他</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chmod +x 文件名 // 增加文件可执行权限</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chmod -r 目录 // 删除目录可读权限</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 目录的可读权限：读取目录内容（如果没有此权限，可<span class="built_in">cd</span>，不能ls）</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 目录的可写权限：修改目录内容</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 目录的可执行权限：对目录执行终端命令（如果没有此权限，甚至无法 <span class="built_in">cd</span> 到目录）</span></span><br></pre></td></tr></table></figure>

<p>chmod 高级用法</p>
<h4 id="超级用户"><a href="#超级用户" class="headerlink" title="超级用户"></a>超级用户</h4><ul>
<li><p><code>root</code> 账户用于系统的维护和管理，对操作系统的所有资源具有所有访问权限</p>
</li>
<li><p>不推荐直接使用 root 账户登录系统</p>
</li>
<li><p>在 linux 安装过程中，系统会自动创建一个标准用户账号</p>
</li>
</ul>
<p><strong>sudo</strong></p>
<ul>
<li><p><code>su</code> 是 <code>substitute user</code> 缩写，表示使用另一个用户身份</p>
</li>
<li><p><code>sudo</code> 命令用来以其他身份来执行命令，预设身份为 root</p>
</li>
<li><p>用户使用 sudo 时，需先输入密码，之后有五分钟的有效期，超过期限去重新输入密码</p>
</li>
</ul>
<h4 id="组管理"><a href="#组管理" class="headerlink" title="组管理"></a>组管理</h4><p><code>groupadd 组名</code> ：添加组</p>
<p><code>groupdel 组名</code> ：删除组</p>
<p><code>cat /etc/group</code> ：确认组信息</p>
<p><code>chgrp 组名 文件/目录名</code> ：修改文件/目录的所属组 -R 递归修改</p>
<blockquote>
<p>创建组/删除组的终端命令都需要通过 sudo 来执行</p>
<p>组信息保存在 /etc/group 文件中</p>
<p>/etc 目录是专门用来保存 系统配置信息的目录</p>
</blockquote>
<h4 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h4><p><strong>创建用户/设置密码/删除用户</strong></p>
<p><code>useradd -m -g 组 新建用户名</code> ：添加新用户</p>
<p>​-m 自动建立用户家目录</p>
<p>​-g 指定用户所在的组，否则会建立一个和用户名同名的组</p>
<p><code>passwd 用户名</code>：设置用户密码</p>
<p>​ 如果是普通用户，直接用 passwd 可以修改自己的账户密码</p>
<p><code>userdel -r 用户名</code>：删除用户</p>
<p>​-r 选项自动删除用户家目录</p>
<p><code>cat /etc/passwd | grep 用户名</code>：确认用户信息</p>
<p>​ 新建用户后，用户信息保存在 <code>/etc/passwd</code> 文件中</p>
<blockquote>
<p>创建用户/删除用户/修改其他用户密码 的命令都需要通过 <code>sudo</code> 执行</p>
<p>用户信息保存在 <code>/etc/passwd</code> 文件中</p>
</blockquote>
<p><strong>查看用户信息</strong></p>
<p><code>id [用户名]</code>：查看用户 UID 和 GID 信息</p>
<p><code>who</code> ：查看当前所有登陆的用户列表</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> who</span></span><br><span class="line">用户名  时间 (:0) # :0 表示当前电脑</span><br><span class="line">用户名  时间 (172.16.xx.xx)</span><br></pre></td></tr></table></figure>

<p><code>whoami</code> ：查看当前登录用户的账户名</p>
<p><strong>passwd 文件</strong> 由六个分号组成七个信息</p>
<ol>
<li>用户名</li>
<li>密码（x，表示加密的密码）</li>
<li>UID（用户标识）</li>
<li>GID（组标识）</li>
<li>用户全名</li>
<li>家目录</li>
<li>登录使用的 shell，就是登陆之后使用的终端，ubuntu 默认使用 <code>dash</code></li>
</ol>
<p><strong>usermod</strong></p>
<p>用来设置用户的主组/附加组 和登录 shell</p>
<p>主组：在用户新建时指定，在 <code>etc/passwd</code> 的第四列 GID 对应的组</p>
<p>附加组：在 <code>etc/group</code> 中最后一列表示该组的用户列表，用于指定用户的附加权限</p>
<blockquote>
<p>设置用户的附加组之后，需要重新登录才能生效</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 修改用户的主组</span></span><br><span class="line">$ usermod -g 组 用户名</span><br><span class="line"><span class="comment"># 修改用户的附加组</span></span><br><span class="line">$ usermod -G 组 用户名</span><br><span class="line"><span class="comment"># 修改用户登录shell</span></span><br><span class="line">$ usermod -s /bin/bash</span><br></pre></td></tr></table></figure>

<blockquote>
<p>默认使用 <code>useradd</code> 添加的用户是没有权限使用 <code>sudo</code> 以 <code>root</code> 身份执行命令的，使用以下命令将用户添加到 <code>sudo</code> 附加组中</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">usermod -G sudo 用户名</span><br></pre></td></tr></table></figure>

<p><strong>which</strong></p>
<blockquote>
<p><code>/etc/passwd</code> 是用于保存用户信息的文件</p>
<p><code>/usr/bin/passwd</code> 是用于修改用户密码的程序</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># which 可用于查看执行命令所在的位置</span></span><br><span class="line">$ <span class="built_in">which</span> ls</span><br><span class="line"><span class="comment"># /bin/ls</span></span><br><span class="line">$ <span class="built_in">which</span> useradd</span><br><span class="line"><span class="comment"># /usr/sbin/useradd</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>cd</code> 这个命令是内置在系统内核中的，没有独立文件，因此用 <code>which</code> 无法找到</p>
</blockquote>
<p><strong>bin 和 sbin</strong></p>
<p><code>/bin</code> (binary) 是二进制执行文件目录，主要用于具体应用</p>
<p><code>/sbin</code> (system binary) 是系统管理员专用的二进制文件目录，主要用于系统管理</p>
<p><code>/usr/bin</code> (user commands for applications) 后期安装的一些软件</p>
<p><code>/usr/sbin</code> (super user commands for applications) 超级用户的一些管理程序</p>
<blockquote>
<p>bin 存储普通可执行文件，sbin 存储跟系统管理相关的可执行文件</p>
</blockquote>
<h4 id="切换用户"><a href="#切换用户" class="headerlink" title="切换用户"></a>切换用户</h4><p><code>su - 用户名</code>：切换用户，并且切换目录</p>
<p><code>-</code> 可以切换到用户家目录，否则保持位置不变</p>
<p><code>exit</code>： 退出当前登录用户</p>
<blockquote>
<p><code>su</code> 不接用户名，可以切换到 <code>roo</code>，不推荐，不安全</p>
</blockquote>
<p>exit 示意图：</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102205719.png"></p>
<h4 id="修改文件权限"><a href="#修改文件权限" class="headerlink" title="修改文件权限"></a>修改文件权限</h4><p>chowm 修改拥有者</p>
<p>chgrp 修改组</p>
<p>chmod 修改权限</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 修改文件/目录的拥有者</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chown 用户名 文件名/目录名</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 递归修改文件/目录的组</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chgrp -R 组名 文件名/目录名</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 递归修改文件权限</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 755 三个数字分别代表 用户 u /组 g /其他用户 o 的权限</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chmod -R 755 文件名/目录名</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>r –&gt; 4 w –&gt; 2 x –&gt; 1 无权限 –&gt; 0 ，想要什么权限直接将数字相加</p>
</blockquote>
<h3 id="系统信息相关命令"><a href="#系统信息相关命令" class="headerlink" title="系统信息相关命令"></a>系统信息相关命令</h3><blockquote>
<p>查询服务器上当前系统日期和时间 / 磁盘空间占用情况 / 程序执行情况</p>
</blockquote>
<h4 id="时间和日期"><a href="#时间和日期" class="headerlink" title="时间和日期"></a>时间和日期</h4><p><code>date</code> ：查看系统时间</p>
<p><code>cal</code> ：<code>calendar</code> 查看日历， <code>-y</code> 选项可以查看一年的日历</p>
<h4 id="磁盘和空间目录"><a href="#磁盘和空间目录" class="headerlink" title="磁盘和空间目录"></a>磁盘和空间目录</h4><p><code>df -h</code> ：<code>disk free</code> 显示磁盘剩余空间 -h 以人性化的方式显示文件大小</p>
<p><code>du -h [目录名]</code> ：<code>disk usage</code> 显示目录占用空间情况，不指定目录默认表示当前目录</p>
<blockquote>
<p>-h 以人性化的方式显示文件大小</p>
</blockquote>
<h4 id="进程信息"><a href="#进程信息" class="headerlink" title="进程信息"></a>进程信息</h4><p>PID 进程代号</p>
<p><code>ps au</code> : <code>process status</code> 查看进程的详细状况，默认只显示当前用户通过终端启动的程序</p>
<p>​ps 选项(没有减号)</p>
<p>​<code>a</code> 显示终端上的所有进程，包括其他用户的进程</p>
<p>​<code>u</code> 显示进程的详细状态</p>
<p>​<code>x</code> 显示不是通过终端启动的进程</p>
<p><code>top</code> : 动态显示运行中的进程并且排序 ，输入 q 退出</p>
<p><code>kill [-9] 进程代号</code> : 终止指定代号的进程，<code>-9</code> 表示强行终止</p>
<h3 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h3><h4 id="查找文件"><a href="#查找文件" class="headerlink" title="查找文件"></a>查找文件</h4><p><code>find [路径] -name “*.txt”</code> : 查找指定路径下扩展名为.txt 的文件，包括子目录</p>
<p>​ 如果省略路径，表示在当前文件夹下查找</p>
<h4 id="软连接"><a href="#软连接" class="headerlink" title="软连接"></a>软连接</h4><p><code>ln -s 被链接的源文件 链接文件</code> ：建立文件的软链接，类似于 Windows 下的快捷方式</p>
<p>注意：</p>
<ul>
<li><p>如果没有 <code>-s</code> 选项建立的是一个硬链接文件（两个文件占用相同大小的磁盘空间，几乎不用）</p>
</li>
<li><p>源文件要使用绝对路径，可以方便移动链接文件后，仍然能够正常使用</p>
</li>
</ul>
<h5 id="文件软硬链接示意图"><a href="#文件软硬链接示意图" class="headerlink" title="文件软硬链接示意图"></a>文件软硬链接示意图</h5><p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102205748.png"></p>
<ul>
<li><p>在 linux 中<strong>文件名</strong>和<strong>文件的数据</strong>是分开存储的</p>
</li>
<li><p>在 linux 中，只有文件的硬链接数为 0 文件才会被删除</p>
</li>
<li><p>在日常工作中几乎不会建立文件的硬链接</p>
</li>
</ul>
<h4 id="打包和解包"><a href="#打包和解包" class="headerlink" title="打包和解包"></a>打包和解包</h4><p>tar 是 Linux 中常用的备份工具，此命令可以把一系列文件打包到一个大文件中，也可以把一个打包的大文件恢复成一系列文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 打包文件</span></span><br><span class="line">tar -cvf 打包文件.tar 被打包的文件/路径 (多个文件一次写在后面，用空格隔开)</span><br><span class="line"><span class="meta">#</span><span class="bash"> 解包文件</span></span><br><span class="line">tar -xvf 打包文件.tar</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>c</code> 生成档案文件，创建打包文件</p>
</li>
<li><p><code>x</code> 解开档案文件</p>
</li>
<li><p><code>v</code> 列出归档接档的详细过程</p>
</li>
<li><p><code>f</code> 指定档案文件名称， f 选项必须放在最后</p>
</li>
</ul>
<h4 id="压缩和解压缩"><a href="#压缩和解压缩" class="headerlink" title="压缩和解压缩"></a>压缩和解压缩</h4><p><strong>gzip</strong></p>
<ul>
<li><p><code>tar</code> 和 <code>gzip</code> 命令结合使用实现文件打包和压缩</p>
<ul>
<li><p><code>tar</code> 只负责打包，但不压缩</p>
</li>
<li><p>用 <code>gzip</code> 压缩 <code>ta</code>r 打包后的文件，扩展名为 <code>xxx.tar.gz</code></p>
</li>
</ul>
</li>
<li><p><code>tar</code> 命令中 <code>-z</code> 选项可以调用 <code>gzip</code></p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 压缩文件</span></span><br><span class="line">tar -zcvf 打包文件.tar.gz 被压缩文件/路径</span><br><span class="line"><span class="meta">#</span><span class="bash"> 解压缩文件</span></span><br><span class="line">tar -zxvf 打包文件.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash"> 解压缩到指定路径</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -C 解压到指定路径，（路径必须存在）</span></span><br><span class="line">tar -zxvf 打包文件.tar.gz -C 目标路径</span><br></pre></td></tr></table></figure>

<p><strong>bzip2</strong></p>
<ul>
<li><p><code>tar</code> 和 <code>bzip2</code> 命令结合使用实现文件打包和压缩（用法同 <code>gzip</code>）</p>
<ul>
<li><p><code>tar</code> 只负责打包，但不压缩</p>
</li>
<li><p>用 <code>bzip2</code> 压缩 <code>ta</code>r 打包后的文件，扩展名为 <code>xxx.tar.bz2</code></p>
</li>
</ul>
</li>
<li><p><code>tar</code> 命令中 <code>-j</code> 选项可以调用 <code>bzip2</code></p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 压缩文件</span></span><br><span class="line">tar -jcvf 打包文件.tar.bz2 被压缩文件/路径</span><br><span class="line"><span class="meta">#</span><span class="bash"> 解压缩文件</span></span><br><span class="line">tar -jxvf 打包文件.tar.bz2</span><br><span class="line"><span class="meta">#</span><span class="bash"> 解压缩到指定路径</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -C 解压到指定路径，（路径必须存在）</span></span><br><span class="line">tar -jxvf 打包文件.tar.bz2 -C 目标路径</span><br></pre></td></tr></table></figure>

<h4 id="软件安装"><a href="#软件安装" class="headerlink" title="软件安装"></a>软件安装</h4><p><code>apt</code> : <code>Advanced Packaging Tool</code> ，linux 下安装包管理工具，可以方便的安装/卸载/更新软件包</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装软件</span></span><br><span class="line">sudo apt install 软件包</span><br><span class="line"><span class="meta">#</span><span class="bash"> 卸载软件</span></span><br><span class="line">sudo apt remove 如软件名</span><br><span class="line"><span class="meta">#</span><span class="bash"> 更新已安装的包</span></span><br><span class="line">sudo apt upgrade</span><br></pre></td></tr></table></figure>

<h3 id="防火墙管理"><a href="#防火墙管理" class="headerlink" title="防火墙管理"></a>防火墙管理</h3><p>CentOS7 默认的防火墙不是 iptables,而是 firewalle</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 添加规则</span></span><br><span class="line">firewall-cmd --add-port=16343/tcp</span><br><span class="line">firewall-cmd --zone=public --add-port=16343/tcp --permanent （--permanent 永久生效，没有此参数重启后失效）</span><br><span class="line"><span class="comment"># 重新载入</span></span><br><span class="line">firewall-cmd --reload</span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line">firewall-cmd --zone=public --query-port=80/tcp</span><br><span class="line"><span class="comment"># 删除</span></span><br><span class="line">firewall-cmd --zone=public --remove-port=80/tcp --permanent</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启防火墙</span></span><br><span class="line">systemctl start firewalld.service</span><br><span class="line"><span class="comment"># 关闭防火墙</span></span><br><span class="line">systemctl stop firewalld.service</span><br><span class="line"><span class="comment"># 列出端口信息</span></span><br><span class="line">firewall-cmd --list-ports</span><br></pre></td></tr></table></figure>

<p>使用 iptables</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 先检查是否安装了iptables</span></span><br><span class="line">service iptables status</span><br><span class="line"><span class="comment"># 安装iptables</span></span><br><span class="line">yum install -y iptables</span><br><span class="line"><span class="comment"># 升级iptables</span></span><br><span class="line">yum update iptables</span><br><span class="line"><span class="comment"># 安装iptables-services</span></span><br><span class="line">yum install iptables-services</span><br><span class="line"><span class="comment"># 停止firewalld服务</span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line"><span class="comment"># 禁用firewalld服务</span></span><br><span class="line">systemctl mask firewalld</span><br><span class="line"></span><br><span class="line"><span class="comment">#注册iptables服务</span></span><br><span class="line">systemctl <span class="built_in">enable</span> iptables.service</span><br><span class="line"><span class="comment"># 开启 iptables 防火墙</span></span><br><span class="line">systemctl start iptables.service</span><br><span class="line"><span class="comment"># 重启iptables防火墙</span></span><br><span class="line">systemctl restart iptables.service</span><br><span class="line"><span class="comment"># 关闭 iptables 防火墙</span></span><br><span class="line">systemctl stop iptables.service</span><br><span class="line"><span class="comment"># 查看 iptables 防火墙状态</span></span><br><span class="line">systemctl status iptables.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看iptables现有规则</span></span><br><span class="line">iptables -L -n</span><br><span class="line"><span class="comment"># 允许所有</span></span><br><span class="line">iptables -P INPUT ACCEPT</span><br><span class="line"><span class="comment"># 清空所有默认规则</span></span><br><span class="line">iptables -F</span><br><span class="line"><span class="comment"># 清空所有自定义规则</span></span><br><span class="line">iptables -X</span><br><span class="line"><span class="comment"># 所有计数器归0</span></span><br><span class="line">iptables -Z</span><br><span class="line"><span class="comment"># 允许来自于lo接口的数据包(本地访问)</span></span><br><span class="line">iptables -A INPUT -i lo -j ACCEPT</span><br><span class="line"><span class="comment"># 开放22端口</span></span><br><span class="line">iptables -A INPUT -p tcp --dport 22 -j ACCEPT</span><br><span class="line"><span class="comment"># 开放21端口(FTP)</span></span><br><span class="line">iptables -A INPUT -p tcp --dport 21 -j ACCEPT</span><br><span class="line"><span class="comment"># 开放80端口(HTTP)</span></span><br><span class="line">iptables -A INPUT -p tcp --dport 80 -j ACCEPT</span><br><span class="line"><span class="comment"># 开放443端口(HTTPS)</span></span><br><span class="line">iptables -A INPUT -p tcp --dport 443 -j ACCEPT</span><br><span class="line"><span class="comment"># 允许ping</span></span><br><span class="line">iptables -A INPUT -p icmp --icmp-type 8 -j ACCEPT</span><br><span class="line"><span class="comment"># 允许接受本机请求之后的返回数据 RELATED,是为FTP设置的</span></span><br><span class="line">iptables -A INPUT -m state --state  RELATED,ESTABLISHED -j ACCEPT</span><br><span class="line"><span class="comment"># 其他入站一律丢弃</span></span><br><span class="line">iptables -P INPUT DROP</span><br><span class="line"><span class="comment"># 所有出站一律绿灯</span></span><br><span class="line">iptables -P OUTPUT ACCEPT</span><br><span class="line"><span class="comment"># 所有转发一律丢弃</span></span><br><span class="line">iptables -P FORWARD DROP</span><br><span class="line"><span class="comment">#保存上述规则</span></span><br><span class="line">service iptables save</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">iptables -P INPUT ACCEPT</span><br><span class="line">iptables -F</span><br><span class="line">iptables -X</span><br><span class="line">iptables -Z</span><br><span class="line">iptables -A INPUT -i lo -j ACCEPT</span><br><span class="line">iptables -A INPUT -p tcp --dport 22 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p tcp --dport 21 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p tcp --dport 80 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p tcp --dport 443 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p icmp --icmp-type 8 -j ACCEPT</span><br><span class="line">iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT</span><br><span class="line">iptables -P INPUT DROP</span><br><span class="line">iptables -P OUTPUT ACCEPT</span><br><span class="line">iptables -P FORWARD DROP</span><br><span class="line">service iptables save</span><br><span class="line">systemctl restart iptables.service</span><br></pre></td></tr></table></figure>

<p>sudo -i 为了频繁的执行某些只有超级用户才能执行的权限，而不用每次输入密码，可以使用该命令。提示输入密码时该密码为当前账户的密码。没有时间限制。执行该命令后提示符变为“#”而不是“$”。想退回普通账户时可以执行“exit”或“logout” 。<br>su 切换到某某用户模式，提示输入密码时该密码为切换后账户的密码，用法为“su 账户名称”。如果后面不加账户时系统默认为 root 账户，密码也为超级账户的密码。没有时间限制。<br>sudo su 运行 sudo 命令给 su 命令提权，运行 su 命令。<br>sudo -i 运行结果 PWD=/root<br>sudo su 运行结果 PWD=/home/用户名（当前用户主目录）</p>
<p>sudo : 暂时切换到超级用户模式以执行超级用户权限，提示输入密码时该密码为当前用户的密码，而不是超级账户的密码。不过有时间限制，Ubuntu 默认为一次时长 15 分钟。</p>
]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>html 基础</title>
    <url>/394.html</url>
    <content><![CDATA[<h2 id="认识-WEB"><a href="#认识-WEB" class="headerlink" title="认识 WEB"></a>认识 WEB</h2><h3 id="认识网页"><a href="#认识网页" class="headerlink" title="认识网页"></a>认识网页</h3><p>!&gt; 网页主要由文字、图像和超链接等元素构成。当然，除了这些元素，网页中还可以包含音频、视频以及 Flash 等</p>
<h3 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h3><p>浏览器是网页显示、运行的平台，常用的浏览器有 IE、火狐（Firefox）、谷歌（Chrome）、Safari 和 Opera 等。我们平时称为五大浏览器</p>
<h4 id="常见浏览器内核"><a href="#常见浏览器内核" class="headerlink" title="常见浏览器内核"></a>常见浏览器内核</h4><p>浏览器内核，英文叫做：Rendering Engine，中文翻译很多，排版引擎、解释引擎、渲染引擎，现在流行称为浏览器内核，负责读取网页内容，整理讯息，计算网页的显示方式并显示页面</p>
<p>因为浏览器太多啦， 但是现在主要流行的就是下面几个：</p>
<table>
<thead>
<tr>
<th align="left">浏览器</th>
<th align="center">内核</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="left">IE</td>
<td align="center">Trident</td>
<td align="left">IE、猎豹安全、360 极速浏览器、百度浏览器</td>
</tr>
<tr>
<td align="left">firefox</td>
<td align="center">Gecko</td>
<td align="left">可惜这几年已经没落了，打开速度慢、升级频繁、猪一样的队友 flash、神一样的对手 chrome</td>
</tr>
<tr>
<td align="left">Safari</td>
<td align="center">webkit</td>
<td align="left">从 Safari 推出之时起，它的渲染引擎就是 Webkit，一提到 webkit，首先想到的便是 chrome，可以说，chrome 将 Webkit 内核 深入人心，殊不知，Webkit 的鼻祖其实是 Safari</td>
</tr>
<tr>
<td align="left">chrome</td>
<td align="center">Chromium/Blink</td>
<td align="left">在 Chromium 项目中研发 Blink 渲染引擎（即浏览器核心），内置于 Chrome 浏览器之中。Blink 其实是 WebKit 的分支。大部分国产浏览器最新版都采用 Blink 内核。二次开发</td>
</tr>
<tr>
<td align="left">Opera</td>
<td align="center">blink</td>
<td align="left">现在跟随 chrome 用 blink 内核</td>
</tr>
</tbody></table>
<p><strong>拓展阅读：</strong></p>
<ul>
<li><p>移动端的浏览器内核主要说的是系统内置浏览器的内核</p>
</li>
<li><p>Android 手机而言，使用率最高的就是 Webkit 内核，大部分国产浏览器宣称的自己的内核，基本上也是属于 webkit 二次开发</p>
</li>
<li><p>iOS 以及 WP7 平台上，由于系统原因，系统大部分自带浏览器内核，一般是 Safari 或者 IE 内核 Trident 的</p>
</li>
</ul>
<h3 id="Web-标准（重点）"><a href="#Web-标准（重点）" class="headerlink" title="Web 标准（重点）"></a>Web 标准（重点）</h3><p>Web 标准是由 W3C 组织和其他标准化组织制定的一系列标准的集合</p>
<p>W3C 万维网联盟是国际最著名的标准化组织。1994 年成立后，至今已发布近百项相关万维网的标准，对万维网发展做出了杰出的贡献</p>
<p><strong>w3c 就类似于现实世界中的联合国。</strong></p>
<h4 id="Web-标准的好处"><a href="#Web-标准的好处" class="headerlink" title="Web 标准的好处"></a>Web 标准的好处</h4><p>遵循 web 标准可以让不同我们写的页面更标准更统一外，还有许多优点：</p>
<ul>
<li><p>让 Web 的发展前景更广阔</p>
</li>
<li><p>内容能被更广泛的设备访问</p>
</li>
<li><p>更容易被搜寻引擎搜索</p>
</li>
<li><p>降低网站流量费用</p>
</li>
<li><p>使网站更易于维护</p>
</li>
<li><p>提高页面浏览速度</p>
</li>
</ul>
<h4 id="Web-标准构成"><a href="#Web-标准构成" class="headerlink" title="Web 标准构成"></a>Web 标准构成</h4><p><strong>构成：</strong> 主要包括结构（Structure）、表现（Presentation）和行为（Behavior）三个方面。</p>
<table>
<thead>
<tr>
<th align="left">标准</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">结构</td>
<td align="left">结构用于对<strong>网页元素</strong>进行整理和分类，咱们主要学的是 HTML。</td>
</tr>
<tr>
<td align="left">表现</td>
<td align="left">表现用于设置网页元素的版式、颜色、大小等<strong>外观样式</strong>，主要指的是 CSS</td>
</tr>
<tr>
<td align="left">行为</td>
<td align="left">行为是指网页模型的定义及<strong>交互</strong>的编写，咱们主要学的是 Javascript</td>
</tr>
</tbody></table>
<p>理想状态我们的源码： .HTML .css .js</p>
<h3 id="web-标准小结"><a href="#web-标准小结" class="headerlink" title="web 标准小结"></a>web 标准小结</h3><ul>
<li>web 标准有三层结构，分别是结构（html）、表现（css）和行为（javascript）</li>
<li>理想状态下，他们三层都是独立的， 放到不同的文件里面</li>
</ul>
<h3 id="深度阅读："><a href="#深度阅读：" class="headerlink" title="深度阅读："></a>深度阅读：</h3><p><a href="http://blog.csdn.net/summer_15/article/details/71249203">五大主流浏览器内核的源起以及国内各大浏览器内核总结</a></p>
<h2 id="HTML-初识"><a href="#HTML-初识" class="headerlink" title="HTML 初识"></a>HTML 初识</h2><h3 id="超文本标记语言"><a href="#超文本标记语言" class="headerlink" title="超文本标记语言"></a>超文本标记语言</h3><ul>
<li><p>HTML 指的是超文本标记语言 (<strong>H</strong>yper <strong>T</strong>ext <strong>M</strong>arkup <strong>L</strong>anguage)是用来描述网页的一种语言。</p>
</li>
<li><p>HTML 不是一种编程语言，而是一种<strong>标记语言</strong> (markup language)</p>
</li>
<li><p>标记语言是一套标记标签 (markup tag)</p>
</li>
</ul>
<p><strong>所谓超文本，有 2 层含义：</strong></p>
<ol>
<li>因为它可以加入图片、声音、动画、多媒体等内容（<strong>超越文本限制</strong>）</li>
<li>不仅如此，它还可以从一个文件跳转到另一个文件，与世界各地主机的文件连接（<strong>超级链接文本</strong>）。</li>
</ol>
<h4 id="HTML-骨架标签"><a href="#HTML-骨架标签" class="headerlink" title="HTML 骨架标签"></a>HTML 骨架标签</h4><p><strong>标签：</strong></p>
<p>在 HTML 页面中，带有 <code>&lt; &gt;</code> 符号的元素被称为 HTML 标签，</p>
<p>HTML 骨架格式（一个 html 的基本格式）：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HTML 标签：页面中最大的标签，我们称为根标签 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--文档的头部，注意在 head 标签中我们必须要设置的标签是 title --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 文档的标题，让页面拥有一个属于自己的网页标题 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 文档的主体包含文档的所有内容，页面内容基本都是放到 body 里面的 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>HTML 标签名、类名、标签属性和大部分属性值统一用小写</p>
</blockquote>
<h4 id="HTML-标签分类"><a href="#HTML-标签分类" class="headerlink" title="HTML 标签分类"></a>HTML 标签分类</h4><p><strong>分类：</strong></p>
<ol>
<li>双标签</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;标签名&gt; 内容 &lt;/标签名&gt;   比如 <span class="tag">&lt;<span class="name">body</span>&gt;</span>  我是文字  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>该语法中“&lt;标签名&gt;”表示该标签的作用开始，一般称为“开始标签（start tag）”，“&lt;/标签名&gt;” 表示该标签的作用结束，一般称为“结束标签（end tag）”。</li>
<li>和开始标签相比，结束标签只是在前面加了一个关闭符“/”。</li>
<li>我们以后接触的基本都是双标签</li>
</ul>
<ol start="2">
<li>单标签</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;标签名&gt; 比如</span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>里面不需要包含内容， 只有一个开始标签不需要关闭。</li>
</ul>
<h4 id="HTML-标签关系"><a href="#HTML-标签关系" class="headerlink" title="HTML 标签关系"></a>HTML 标签关系</h4><p>主要针对于<strong>双标签</strong> 的相互关系分为两种： 请大家务必熟悉记住这种标签关系，因为后面我们标签嵌套特别多，很容易弄混他们的关系。</p>
<ol>
<li>嵌套关系</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.并列关系</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>书写规范：</strong></p>
<blockquote>
<p>如果两个标签之间的关系是嵌套关系，子元素最好缩进一个 tab 键的身位（一个 tab 是 4 个或 2 个空格）。如果是并列关系，最好上下对齐。</p>
</blockquote>
<h3 id="代码开发工具（书写代码）"><a href="#代码开发工具（书写代码）" class="headerlink" title="代码开发工具（书写代码）"></a>代码开发工具（书写代码）</h3><ul>
<li><p>Dreamweaver</p>
</li>
<li><p>SublimeText</p>
</li>
<li><p>WebStorm</p>
</li>
<li><p>HBuilder</p>
</li>
<li><p>VScode</p>
</li>
</ul>
<p>sublime 有非常多的优点， 最开心的就是非常轻量级，打开速度超快，后面更高的功能，后面再接触。</p>
<p><strong>sublime 生成 html 骨架小技巧</strong></p>
<ul>
<li><p>双击打开软件</p>
</li>
<li><p>新建文件（ctrl+n）</p>
</li>
<li><p>保存（ctrl+s）,保存为：文件名.html （ 注意 后缀名必须是 .html )</p>
</li>
<li><p>放大缩小代码 按住 ctrl 在 滚动鼠标滚轮 或者 ctrl+ 加号 键 和 ctrl + 减号键</p>
</li>
<li><p>生成页面骨架结构</p>
<ul>
<li>html: 5 按下 tab 键 或者</li>
<li>! 按下 tab 键</li>
</ul>
</li>
<li><p>在浏览器中预览页面</p>
<ul>
<li>右键在 浏览器中打开</li>
</ul>
</li>
</ul>
<h3 id="文档类型-lt-DOCTYPE-gt"><a href="#文档类型-lt-DOCTYPE-gt" class="headerlink" title="文档类型&lt;!DOCTYPE&gt;"></a>文档类型&lt;!DOCTYPE&gt;</h3><p><strong>用法：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>作用：</strong></p>
<!DOCTYPE><p> 声明位于文档中的最前面的位置，处于 <html> 标签之前。此标签可告知浏览器文档使用哪种 HTML 或 XHTML 规范。</p>
   <!DOCTYPE html><p>  就是告诉浏览器按照HTML5 规范解析页面.</p>
<p><strong>团队约定：</strong></p>
<blockquote>
<p>HTML 文件必须加上 DOCTYPE 声明，并统一使用 HTML5 的文档声明</p>
</blockquote>
<h3 id="页面语言-lang"><a href="#页面语言-lang" class="headerlink" title="页面语言 lang"></a>页面语言 lang</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span> <span class="comment">&lt;!-- 指定html 语言种类 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>最常见的 2 个：</p>
<ol>
<li><code>en</code>定义语言为英语</li>
<li><code>zh-CN</code>定义语言为中文</li>
</ol>
<blockquote>
<p><code>&lt;html lang=&quot;zh-CN&quot;&gt;</code> 指定该 html 标签内容所用的语言为中文</p>
</blockquote>
<p><strong>团队约定：</strong></p>
<blockquote>
<p>考虑浏览器和操作系统的兼容性，目前仍然使用 zh-CN 属性值</p>
</blockquote>
<p><strong>@拓展阅读：</strong></p>
<p>简单来说，可能对于程序来说没有太大的作用，但是它可以告诉浏览器，搜索引擎，一些处理 Html 的程序对页面语言内容来做一些对应的处理或者事情。<br>比如可以</p>
<ul>
<li><p>告诉搜索引擎做精确的识别</p>
</li>
<li><p>让语法检查程序做语言识别</p>
</li>
<li><p>帮助翻译工具做识别</p>
</li>
<li><p>帮助网页阅读程序做识别等等</p>
</li>
</ul>
<h3 id="字符集"><a href="#字符集" class="headerlink" title="字符集"></a>字符集</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">字符集(Character set)是多个字符的集合。</span><br><span class="line">计算机要准确的处理各种字符集文字，需要进行字符编码，以便计算机能够识别和存储各种文字。</span><br></pre></td></tr></table></figure>

<p>utf-8 是目前最常用的字符集编码方式，常用的字符集编码方式还有 gbk 和 gb2312。</p>
<ul>
<li><p>gb2312 简单中文 包括 6763 个汉字 GUO BIAO</p>
</li>
<li><p>BIG5 繁体中文 港澳台等用</p>
</li>
<li><p>GBK 包含全部中文字符 是 GB2312 的扩展，加入对繁体字的支持，兼容 GB2312</p>
</li>
<li><p>这句话是告诉浏览器当前 html 文档使用 UTF-8 进行的字符编码。</p>
</li>
</ul>
<p><strong>团队约定：</strong></p>
<blockquote>
<p>一般情况下统一使用 “UTF-8” 编码, 请尽量统一写成标准的 “UTF-8”，不要写成 “utf-8” 或 “utf8” 或 “UTF8”。</p>
</blockquote>
<h3 id="HTML-标签的语义化"><a href="#HTML-标签的语义化" class="headerlink" title="HTML 标签的语义化"></a>HTML 标签的语义化</h3><p>白话： 所谓标签语义化，就是指标签的含义。</p>
<blockquote>
<p>根据标签的语义，在合适的地方给一个最为合理的标签，让结构更清晰。</p>
</blockquote>
<ol>
<li><p>方便代码的阅读和维护</p>
</li>
<li><p>同时让浏览器或是网络爬虫可以很好地解析，从而更好分析其中的内容</p>
</li>
<li><p>使用语义化标签会具有更好地搜索引擎优化（SEO）</p>
</li>
</ol>
<p>语义是否良好： 当我们去掉 CSS 之后，网页结构依然组织有序，并且有良好的可读性。( 裸奔起来一样好看 )</p>
<p>遵循的原则：先确定语义的 HTML ，再选合适的 CSS。所以，<strong>我们接下来学习 html 标签，要根据语义去记忆。</strong> HTML 网页中任何元素的实现都要依靠 HTML 标签。</p>
<h2 id="HTML-常用标签"><a href="#HTML-常用标签" class="headerlink" title="HTML 常用标签"></a>HTML 常用标签</h2><p>首先 HTML 和 CSS 是两种完全不同的语言，我们学的是结构，就只写 HTML 标签，认识标签就可以了。 不会再给结构标签指定样式了。</p>
<p>HTML 标签有很多，这里我们学习最为常用的，后面有些较少用的，我们可以查下手册就可以了。</p>
<h3 id="排版标签"><a href="#排版标签" class="headerlink" title="排版标签"></a>排版标签</h3><p>排版标签主要和 css 搭配使用，显示网页结构的标签，是网页布局最常用的标签。</p>
<h4 id="标题标签-h-熟记"><a href="#标题标签-h-熟记" class="headerlink" title="标题标签 h (熟记)"></a>标题标签 h (熟记)</h4><p>单词缩写： head 头部. 标题 title 文档标题</p>
<p>为了使网页更具有语义化，我们经常会在页面中用到标题标签，HTML 提供了 6 个等级的标题，即</p>
<p><strong>标题标签语义：</strong> 作为标题使用，并且依据重要性递减</p>
<p>其基本语法格式如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>标题文本<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>标题文本<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>标题文本<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span>&gt;</span>标题文本<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h5</span>&gt;</span>标题文本<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h6</span>&gt;</span>标题文本<span class="tag">&lt;/<span class="name">h6</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>显示效果如下：</p>
<p><strong>小结 :</strong></p>
<ul>
<li>加了标题的文字会变的加粗，字号也会依次变大</li>
<li>一行是只能放一个标题的</li>
</ul>
<h4 id="段落标签-p-熟记"><a href="#段落标签-p-熟记" class="headerlink" title="段落标签 p ( 熟记)"></a>段落标签 p ( 熟记)</h4><p>单词缩写： paragraph 段落 [ˈpærəgræf] 无须记这个单词</p>
<p><strong>作用语义：</strong></p>
<p>可以把 HTML 文档分割为若干段落</p>
<p>在网页中要把文字有条理地显示出来，离不开段落标签，就如同我们平常写文章一样，整个网页也可以分为若干个段落，而段落的标签就是</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>文本内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>是 HTML 文档中最常见的标签，默认情况下，文本在一个段落中会根据浏览器窗口的大小自动换行。</p>
<h4 id="水平线标签-hr-认识"><a href="#水平线标签-hr-认识" class="headerlink" title="水平线标签 hr(认识)"></a>水平线标签 hr(认识)</h4><p>单词缩写： horizontal 横线 [ˌhɔrəˈzɑntl] 同上</p>
<p>在网页中常常看到一些水平线将段落与段落之间隔开，使得文档结构清晰，层次分明。这些水平线可以通过插入图片实现，也可以简单地通过标签来完成，<hr />就是创建横跨网页水平线的标签。其基本语法格式如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span> <span class="comment">&lt;!-- 是单标签 --&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="换行标签-br-熟记"><a href="#换行标签-br-熟记" class="headerlink" title="换行标签 br (熟记)"></a>换行标签 br (熟记)</h4><p>单词缩写： break 打断 ,换行</p>
<p>在 HTML 中，一个段落中的文字会从左到右依次排列，直到浏览器窗口的右端，然后自动换行。如果希望某段文本强制换行显示，就需要使用换行标签</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="div-和-span-标签-重点"><a href="#div-和-span-标签-重点" class="headerlink" title="div 和 span 标签(重点)"></a>div 和 span 标签(重点)</h4><p>div span 是没有语义的 是我们网页布局主要的 2 个盒子 想必你听过 css+div</p>
<p>div 就是 division 的缩写 分割， 分区的意思 其实有很多 div 来组合网页</p>
<p>span 跨度，跨距；范围</p>
<p>语法格式：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>这是头部<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>今日价格<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>只不过他们有区别，现在我们主要记住使用方法和特点就好了</p>
<ul>
<li>div 标签 用来布局的，一行只能放一个 div</li>
<li>span 标签 用来布局的，一行上可以放好多个 span</li>
</ul>
<p>后面后面讲显示模式的时候，会告诉大家</p>
<h4 id="排版标签总结"><a href="#排版标签总结" class="headerlink" title="排版标签总结"></a>排版标签总结</h4><table>
<thead>
<tr>
<th>标签名</th>
<th align="left">定义</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;hx&gt;&lt;/hx&gt;</code></td>
<td align="left">标题标签</td>
<td align="left">作为标题使用，并且依据重要性递减</td>
</tr>
<tr>
<td><code>&lt;p&gt;&lt;/p&gt;</code></td>
<td align="left">段落标签</td>
<td align="left">可以把 HTML 文档分割为若干段落</td>
</tr>
<tr>
<td><code>&lt;hr /&gt;</code></td>
<td align="left">水平线标签</td>
<td align="left">没啥可说的，就是一条线</td>
</tr>
<tr>
<td><code>&lt;br /&gt;</code></td>
<td align="left">换行标签</td>
<td align="left"></td>
</tr>
<tr>
<td><code>&lt;div&gt;&lt;/div&gt;</code></td>
<td align="left">div 标签</td>
<td align="left">用来布局的，但是现在一行只能放一个 div</td>
</tr>
<tr>
<td><code>&lt;span&gt;&lt;/span&gt;</code></td>
<td align="left">span 标签</td>
<td align="left">用来布局的，一行上可以放好多个 span</td>
</tr>
</tbody></table>
<h3 id="文本格式化标签-熟记"><a href="#文本格式化标签-熟记" class="headerlink" title="文本格式化标签(熟记)"></a>文本格式化标签(熟记)</h3><p>在网页中，有时需要为文字设置粗体、斜体或下划线效果，这时就需要用到 HTML 中的文本格式化标签，使文字以特殊的方式显示。</p>
<ul>
<li><code>&lt;strong&gt;&lt;/strong&gt;</code> 加粗强调</li>
<li><code>&lt;i&gt;&lt;/i&gt;</code> 倾斜</li>
</ul>
<h2 id="标签属性"><a href="#标签属性" class="headerlink" title="标签属性"></a>标签属性</h2><p>使用 HTML 制作网页时，如果想让 HTML 标签提供更多的信息，可以使用 HTML 标签的属性加以设置。其基本语法格式如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;标签名 属性1=&quot;属性值1&quot; 属性2=&quot;属性值2&quot; …&gt; 内容 &lt;/标签名&gt;</span><br><span class="line">&lt;手机 颜色=&quot;红色&quot; 大小=&quot;5寸&quot;&gt;  &lt;/手机&gt;</span><br></pre></td></tr></table></figure>

<h3 id="图片标签-img"><a href="#图片标签-img" class="headerlink" title="图片标签 img"></a>图片标签 img</h3><p>单词缩写： image 图像</p>
<p>要想在网页中显示图像就需要使用图像标签，接下来将详细介绍图像标签<code>&lt;img&gt;</code>以及和他相关的属性。（它是一个单身狗）</p>
<p>语法如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;图像URL&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>该语法中 src 属性用于指定图像文件的路径和文件名，他是 img 标签的必需属性。</p>
<ul>
<li><p>src 图像的路径</p>
</li>
<li><p>alt 图像不能显示时的替换文本</p>
</li>
<li><p>title 鼠标悬停时显示的文本</p>
</li>
<li><p>width 设置图像的宽度</p>
</li>
<li><p>height 设置图像的高度</p>
</li>
</ul>
<p><strong>注意:</strong></p>
<ol>
<li><p>标签可以拥有多个属性，必须写在开始标签中，位于标签名后面。</p>
</li>
<li><p>属性之间不分先后顺序，标签名与属性、属性与属性之间均以空格分开。</p>
</li>
<li><p>采取 键值对 的格式 key=”value” 的格式</p>
</li>
</ol>
<p>比如:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 正常的 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;cz.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 带有边框的 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;cz.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span> <span class="attr">border</span>=<span class="string">&quot;3&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 有提示文本的 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;cz.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span> <span class="attr">border</span>=<span class="string">&quot;3&quot;</span> <span class="attr">title</span>=<span class="string">&quot;这是个小蒲公英&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 有替换文本的 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;cz.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span> <span class="attr">border</span>=<span class="string">&quot;3&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;图片不存在&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>重点掌握点：</strong></p>
<ul>
<li>请说出 图像标签哪个属性是必须要写的？</li>
<li>请说出 图像标签中 alt 和 title 属性区别？</li>
</ul>
<h3 id="链接标签"><a href="#链接标签" class="headerlink" title="链接标签"></a>链接标签</h3><p>单词缩写： anchor 的缩写 [ˈæŋkə(r)] 。基本解释 锚, 铁锚 的</p>
<p>在 HTML 中创建超链接非常简单，只需用标签把文字包括起来就好。</p>
<p>语法格式：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;跳转目标&quot;</span> <span class="attr">target</span>=<span class="string">&quot;目标窗口的弹出方式&quot;</span>&gt;</span>文本或图像<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;mailto:邮箱&quot;</span>&gt;</span>文本或图像<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td>href</td>
<td align="left">用于指定链接目标的 url 地址，（必须属性）当为标签应用 href 属性时，它就具有了超链接的功能</td>
</tr>
<tr>
<td>target</td>
<td align="left">用于指定链接页面的打开方式，其取值有<code>_self</code>、<code>_blank</code>、<code>inner</code>，其中_self 为默认值，__blank 为在新窗口中打开，inner 在内部打开。</td>
</tr>
</tbody></table>
<p><strong>注意：</strong></p>
<ol>
<li><p>在网页中各种网页元素，如图像、表格、音频、视频等都可以添加超链接。图片链接： <code>&lt;a href=&quot; &quot;&gt;&lt;img src=&quot; &quot;&gt;&lt;/a&gt;</code></p>
</li>
<li><p>style 属性：<strong>text-decoration:none</strong> 链接没有下划线</p>
</li>
<li><p><code>#</code> 链接到文档顶部（什么都不写也会返回到页面顶端）</p>
</li>
<li><p>跳转某一页面某一锚点<code>&lt;a href=&quot;index.html#锚点&quot;&gt;&lt;/a&gt;</code></p>
</li>
<li><p>空连接 <code>javascript:void(null)</code></p>
</li>
<li><p>链接 css： <code>&lt;link rel=&quot;stylesheet&quot; href=&quot;mycss.css&quot; /&gt;</code></p>
</li>
<li><p>链接 js： <code>&lt;script type=&quot;text/javascript&quot; src=&quot;myscripts.js&quot;&gt;&lt;/script&gt;</code></p>
</li>
</ol>
<h3 id="注释标签"><a href="#注释标签" class="headerlink" title="注释标签"></a>注释标签</h3><p>在 HTML 中还有一种特殊的标签——注释标签。如果需要在 HTML 文档中添加一些便于阅读和理解但又不需要显示在页面中的注释文字，就需要使用注释标签。</p>
<p>简单解释：</p>
<p>注释内容不会显示在浏览器窗口中，但是作为 HTML 文档内容的一部分，也会被下载到用户的计算机上，查看源代码时就可以看到。</p>
<p>语法格式：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 注释语句 --&gt;</span></span><br><span class="line">快捷键是： ctrl + / 或者 ctrl +shift + /</span><br></pre></td></tr></table></figure>

<p>注释内容前后各一个空格字符，注释位于要注释代码的上面，单独占一行</p>
<h3 id="表格标签-table"><a href="#表格标签-table" class="headerlink" title="表格标签 table"></a>表格标签 table</h3><p>目标：</p>
<ul>
<li><p>理解：</p>
<ul>
<li>能说出表格用来做什么的</li>
<li>表格的基本结构组成</li>
</ul>
</li>
<li><p>应用：</p>
<ul>
<li><p>能够熟练写出 n 行 n 列的表格</p>
</li>
<li><p>能简单的合并单元格</p>
</li>
</ul>
</li>
</ul>
<p><strong>表格作用：</strong></p>
<p>表格现在还是较为常用的一种标签，但不是用来布局，而是<strong>显示、展示表格式数据。</strong></p>
<p>因为它可以让数据显示的非常的规整，可读性非常好。</p>
<p><strong>特别是后台展示数据的时候表格运用是否熟练就显得很重要</strong>，一个清爽简约的表格能够把繁杂的数据表现得很有条理，虽然 div 布局也可以做到，但是总没有表格来得方便。</p>
<h4 id="创建表格"><a href="#创建表格" class="headerlink" title="创建表格"></a>创建表格</h4><p>在 HTML 网页中，要想创建表格，就需要使用表格相关的标签。</p>
<p><strong>创建表格的基本语法：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>单元格内的文字<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li><p>table 用于定义一个表格标签。</p>
</li>
<li><p>tr 标签 用于定义表格中的行，必须嵌套在 table 标签中。</p>
</li>
<li><p>td 用于定义表格中的单元格，必须嵌套在 <code>&lt;tr&gt;&lt;/tr&gt;</code> 标签中。</p>
</li>
<li><p>字母 td 指表格数据（table data），即数据单元格的内容，现在我们明白，表格最合适的地方就是用来存储数据的。</p>
</li>
</ol>
<p><strong>总结：</strong></p>
<ul>
<li><p>表格的主要目的是用来显示特殊数据的</p>
</li>
<li><p>一个完整的表格有表格标签（table），行标签（tr），单元格标签（td）组成，没有列的标签</p>
</li>
<li><p><code>&lt;tr&gt;&lt;/tr&gt;</code> 中只能嵌套 <code>&lt;td&gt;&lt;/td&gt;</code> 类的单元格</p>
</li>
<li><p><code>&lt;td&gt;&lt;/td&gt;</code> 标签，他就像一个容器，可以容纳所有的元素</p>
</li>
</ul>
<h4 id="表格属性"><a href="#表格属性" class="headerlink" title="表格属性"></a>表格属性</h4><p>表格有部分属性我们不常用，这里重点记住 cellspacing 、 cellpadding。</p>
<ul>
<li><p><code>border</code> 设置表格的边框 <code>border=&quot;1px dashed #ccc&quot;</code> dashed 虚线</p>
</li>
<li><p><code>cellspacing</code> 设置单元格与单元格边框之间的空白距离</p>
</li>
<li><p><code>cellpadding</code> 设置单元格内容与单元格边框之间的空白距离</p>
</li>
<li><p><code>width</code> 设置表格宽度</p>
</li>
<li><p><code>height</code> 设置表格高度</p>
</li>
<li><p><code>align</code> 设置表格水平对齐方式 （left center right）</p>
<ul>
<li>写在 table 标签中控制表格位置</li>
<li>写在 tr 标签中控制表格内文本位置</li>
</ul>
</li>
</ul>
<h4 id="表头单元格标签-th"><a href="#表头单元格标签-th" class="headerlink" title="表头单元格标签 th"></a>表头单元格标签 th</h4><ul>
<li>作用：<ul>
<li>一般表头单元格位于表格的第一行或第一列，并且文本加粗居中</li>
</ul>
</li>
<li>语法：<ul>
<li>只需用表头标签&lt;th&gt;&lt;/th&gt;替代相应的单元格标签&lt;td&gt;&lt;/td&gt;即可。</li>
</ul>
</li>
</ul>
<blockquote>
<p><code>th</code> 也是一个单元格 只不过和普通的 td 单元格不一样，它会让自己里面的文字居中且加粗</p>
</blockquote>
<h4 id="表格标题-caption"><a href="#表格标题-caption" class="headerlink" title="表格标题 caption"></a>表格标题 caption</h4><p><strong>定义和用法</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">caption</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><br><span class="line">      我是表格标题</span><br><span class="line">    <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">caption</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<ol>
<li><p>caption 元素定义<strong>表格标题</strong>，通常这个标题会被居中且显示于表格之上。</p>
</li>
<li><p>caption 标签必须紧随 table 标签之后。</p>
</li>
<li><p>这个标签只存在表格里面才有意义。</p>
</li>
<li><p>caption 没有加粗效果，一般用 h 标签实现加粗</p>
</li>
</ol>
<h4 id="合并单元格-难点"><a href="#合并单元格-难点" class="headerlink" title="合并单元格(难点)"></a>合并单元格(难点)</h4><p>合并单元格 2 种方式：</p>
<ul>
<li>跨行合并（向下合并）：rowspan=”合并单元格的个数”</li>
<li>跨列合并（向右合并）：colspan=”合并单元格的个数”</li>
</ul>
<blockquote>
<p>合并后需删除多余的单元格</p>
</blockquote>
<h4 id="总结表格"><a href="#总结表格" class="headerlink" title="总结表格"></a>总结表格</h4><table>
<thead>
<tr>
<th>标签名</th>
<th align="left">定义</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;table&gt;&lt;/table&gt;</code></td>
<td align="left">表格标签</td>
<td align="left">就是一个四方的盒子</td>
</tr>
<tr>
<td><code>&lt;tr&gt;&lt;/tr&gt;</code></td>
<td align="left">表格行标签</td>
<td align="left">行标签要再 table 标签内部才有意义</td>
</tr>
<tr>
<td><code>&lt;td&gt;&lt;/td&gt;</code></td>
<td align="left">单元格标签</td>
<td align="left">单元格标签是个容器级元素，可以放任何东西</td>
</tr>
<tr>
<td><code>&lt;th&gt;&lt;/th&gt;</code></td>
<td align="left">表头单元格标签</td>
<td align="left">它还是一个单元格，但是里面的文字会居中且加粗</td>
</tr>
<tr>
<td><code>&lt;caption&gt;&lt;/caption&gt;</code></td>
<td align="left">表格标题标签</td>
<td align="left">表格的标题，跟着表格一起走，和表格居中对齐</td>
</tr>
<tr>
<td><code>clospan</code> 和 <code>rowspan</code></td>
<td align="left">合并属性</td>
<td align="left">用来合并单元格的</td>
</tr>
</tbody></table>
<ol>
<li><p>表格提供了 HTML 中定义表格式数据的方法。</p>
</li>
<li><p>表格中由行中的单元格组成。</p>
</li>
<li><p>表格中没有列元素，列的个数取决于行的单元格个数。</p>
</li>
<li><p>表格不要纠结于外观，那是 CSS 的作用。</p>
</li>
<li><p>表格的学习要求： 能手写表格结构，并且能简单合并单元格。</p>
</li>
</ol>
<h4 id="拓展阅读"><a href="#拓展阅读" class="headerlink" title="拓展阅读@"></a>拓展阅读@</h4><p>表格划分结构（了解）</p>
<p>对于比较复杂的表格，表格的结构也就相对的复杂了，所以又将表格分割成三个部分：题头、正文和脚注。而这三部分分别用:thead, tbody, tfoot 来标注， 这样更好的分清表格结构</p>
<ol>
<li><p><code>&lt;thead&gt;&lt;/thead&gt;</code>：用于定义表格的头部。用来放标题之类的东西。<code>&lt;thead&gt;</code> 内部必须拥有<code>&lt;tr&gt;</code> 标签！</p>
</li>
<li><p><code>&lt;tbody&gt;&lt;/tbody&gt;</code>：用于定义表格的主体。放数据本体 。</p>
</li>
<li><p><code>&lt;tfoot&gt;&lt;/tfoot&gt;</code> 放表格的脚注之类。</p>
</li>
<li><p>以上标签都是放到 table 标签中。</p>
</li>
</ol>
<h3 id="列表标签"><a href="#列表标签" class="headerlink" title="列表标签"></a>列表标签</h3><ul>
<li>特点：用来布局</li>
</ul>
<h4 id="无序列表-ul"><a href="#无序列表-ul" class="headerlink" title="无序列表 ul"></a>无序列表 ul</h4><p>无序列表的各个列表项之间没有顺序级别之分，是并列的。其基本语法格式如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表项1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表项2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表项3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  ......</span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. &lt;ul&gt;&lt;&#x2F;ul&gt; 中只能嵌套&lt;li&gt;&lt;&#x2F;li&gt; ，直接在&lt;ul&gt;&lt;&#x2F;ul&gt; 标签中输入其他标签或者文字的做法是不被允许的</span><br><span class="line"></span><br><span class="line">2. &lt;li&gt;与&lt;&#x2F;li&gt; 之间相当于一个容器，可以容纳所有元素</span><br><span class="line"></span><br><span class="line">3. HTML5 已不支持 &lt;ul&gt; 属性，用</span><br><span class="line"></span><br><span class="line">css ul &#123;</span><br><span class="line">  list-style-type: disc; 圆点列表</span><br><span class="line">&#125;</span><br><span class="line">ul &#123;</span><br><span class="line">  list-style-type: circle; 圆圈列表</span><br><span class="line">&#125;</span><br><span class="line">ul &#123;</span><br><span class="line">  list-style-type: square; 正方形列表</span><br><span class="line">&#125;</span><br><span class="line">ul &#123;</span><br><span class="line">  list-style-image: url(&#39;&#39;); 指定列表项标记的图像</span><br><span class="line">&#125;</span><br><span class="line">ul li &#123;</span><br><span class="line">  background-image: url(&#x2F;img.jpg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="有序列表-ol-（了解）"><a href="#有序列表-ol-（了解）" class="headerlink" title="有序列表 ol （了解）"></a>有序列表 ol （了解）</h4><p>有序列表即为有排列顺序的列表，其各个列表项按照一定的顺序排列定义，有序列表的基本语法格式如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表项1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表项2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>列表项3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  ......</span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>所有特性基本与 ul 一致。 但是实际中比 无序列表 用的少很多。</p>
<ul>
<li><p><code>ol</code> start 属性 定义有序列表起始序号</p>
</li>
<li><p><code>ol</code> type 属性 定义序号类型</p>
<ul>
<li>“A” 大写字母列表</li>
<li>“a” 小写字母列表</li>
<li>“I” 罗马字母列表</li>
<li>“i” 小写罗马字母列表</li>
</ul>
</li>
<li><p><code>ol</code> css 属性 <code>list-style-type</code> 指定列表项标记的类型</p>
<ul>
<li>{list-style-type:upper-roman;} 大写罗马字体</li>
<li>{list-style-type:lower-alpha;} 小写字母</li>
</ul>
</li>
</ul>
<h4 id="自定义列表（理解）"><a href="#自定义列表（理解）" class="headerlink" title="自定义列表（理解）"></a>自定义列表（理解）</h4><p>定义列表常用于对术语或名词进行解释和描述，自定义列表的列表项前没有任何项目符号。其基本语法如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dt</span>&gt;</span>名词1<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>名词1解释1<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>名词1解释2<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="tag">&lt;<span class="name">dt</span>&gt;</span>名词2<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>名词2解释1<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>名词2解释2<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="列表总结"><a href="#列表总结" class="headerlink" title="列表总结"></a>列表总结</h4><table>
<thead>
<tr>
<th>标签名</th>
<th align="center">定义</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;ul&gt;&lt;/ul&gt;</code></td>
<td align="center"><strong>无序标签</strong></td>
<td align="left">里面只能包含 li 没有顺序，我们以后布局中最常用的列表</td>
</tr>
<tr>
<td><code>&lt;ol&gt;&lt;/ol&gt;</code></td>
<td align="center">有序标签</td>
<td align="left">里面只能包含 li 有顺序， 使用情况较少</td>
</tr>
<tr>
<td><code>&lt;dl&gt;&lt;/dl&gt;</code></td>
<td align="center">自定义列表</td>
<td align="left">里面有 2 个兄弟， dt 和 dd</td>
</tr>
</tbody></table>
<p>我们现在还没有学布局，现在只要保证 2 个点：</p>
<ol>
<li><p>学会什么时候用无序列表， 学会什么时候用自定义列表</p>
</li>
<li><p>无序列表和自定义列表代码怎么写？</p>
</li>
<li><p>具体的我们刚才看的布局，等我们学了 css 在来全面布局。</p>
</li>
</ol>
<h3 id="表单标签"><a href="#表单标签" class="headerlink" title="表单标签"></a>表单标签</h3><p><strong>语法</strong>:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;url地址&quot;</span> <span class="attr">method</span>=<span class="string">&quot;提交方式&quot;</span> <span class="attr">name</span>=<span class="string">&quot;表单名称&quot;</span>&gt;</span></span><br><span class="line">  各种表单控件</span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>常用属性：</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th align="left">属性值</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>action</td>
<td align="left">url 地址</td>
<td>用于指定接收并处理表单数据的服务器程序的 url 地址。</td>
</tr>
<tr>
<td>method</td>
<td align="left">get/post</td>
<td>用于设置表单数据的提交方式，其取值为 get 或 post。</td>
</tr>
<tr>
<td>name</td>
<td align="left">名称</td>
<td>用于指定表单的名称，以区分同一个页面中的多个表单。</td>
</tr>
</tbody></table>
<p><strong>作用</strong></p>
<p>表单目的是为了收集用户信息。</p>
<blockquote>
<p>在 HTML 中，一个完整的表单通常由表单控件（也称为表单元素）、提示信息和表单域 3 个部分构成。</p>
</blockquote>
<p><strong>常用标签</strong>：</p>
<p><code>&lt;form&gt;</code> 定义供用户输入的表单<br><code>&lt;input&gt;</code> 定义输入域<br><code>&lt;textarea&gt;</code> 定义文本域 (一个多行的输入控件)<br><code>&lt;label&gt;</code> 定义了 input 元素的标签，一般为输入标题<br><code>&lt;fieldset&gt;</code> 定义了一组相关的表单元素，并使用外框包含起来<br><code>&lt;legend&gt;</code> 定义了 fieldset 元素的标题<br><code>select&gt;</code> 定义了下拉选项列表<br><code>&lt;optgroup&gt;</code> 定义选项组<br><code>&lt;option&gt;</code> 定义下拉列表中的选项 <code>selected</code> 预选<br><code>&lt;button&gt;</code> 定义一个点击按钮<br><code>&lt;datalist&gt;</code> 指定一个预先定义的输入控件选项列表<br><code>&lt;output&gt;</code> 定义一个计算结果</p>
<p><strong>注意:</strong></p>
<p>每个表单都应该有自己表单域。我们现在做页面，不写看不到效果，但是 如果后面学 ajax 后台交互的时候，必须需要 form 表单域。</p>
<p><strong>表单控件：</strong>包含了具体的表单功能项，如单行文本输入框、密码输入框、复选框、提交按钮、重置按钮等。</p>
<p><strong>提示信息：</strong>一个表单中通常还需要包含一些说明性的文字，提示用户进行填写和操作。</p>
<p><strong>表单域：</strong>他相当于一个容器，用来容纳所有的表单控件和提示信息，可以通过他定义处理表单数据所用程序的 url 地址，以及数据提交到服务器的方法。如果不定义表单域，表单中的数据就无法传送到后台服务器。</p>
<h4 id="input-标签"><a href="#input-标签" class="headerlink" title="input 标签"></a>input 标签</h4><ul>
<li><p>语法：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;属性值&quot;</span> <span class="attr">value</span>=<span class="string">&quot;你好&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>type 属性设置不同的属性值用来指定不同的控件类型</p>
</li>
<li><p>除了 type 属性还有别的属性</p>
</li>
</ul>
</li>
</ul>
<h5 id="type-属性"><a href="#type-属性" class="headerlink" title="type 属性"></a>type 属性</h5><ul>
<li>text 单行文本输入框</li>
<li>password 密码输入框</li>
<li>radio 单选按钮</li>
<li>checkbox 复选框</li>
<li>button 普通按钮</li>
<li>submit 提交按钮</li>
<li>reset 重置按钮</li>
<li>image 图片按钮 ，添加 src 属性引入图片</li>
<li>file 上传文件</li>
</ul>
<h4 id="value-属性值"><a href="#value-属性值" class="headerlink" title="value 属性值"></a>value 属性值</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- input 框在用户未输入时的默认值 --&gt;</span></span><br><span class="line">用户名:</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;请输入用户名&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>input <code>placeholder</code> 属性与 <code>value</code> 属性区别</strong></p>
<ul>
<li><p><strong>placeholder</strong> 属性提供一种提示，描述输入域所期待的值，提示会在输入字段为空时显示，并会在字段获得焦点时消失。属性适用于以下类型的 input 标签：text、search、url、telephone、email 以及 password</p>
</li>
<li><p><strong>value</strong> 属性为 input 元素设定值，对于不同的输入类型，value 属性的用法也不同</p>
<ul>
<li><code>type=&quot;button&quot;, &quot;reset&quot;, &quot;submit&quot;</code> - 定义按钮上的显示的文本</li>
<li><code>type=&quot;text&quot;, &quot;password&quot;, &quot;hidden&quot;</code> - 定义输入字段的初始值</li>
<li><code>type=&quot;checkbox&quot;, &quot;radio&quot;, &quot;image&quot;</code> - 定义与输入相关联的值</li>
</ul>
</li>
</ul>
<p><code>&lt;input type=&quot;checkbox&quot;&gt;</code> 和 <code>&lt;input type=&quot;radio&quot;&gt;</code> 中必须设置 <code>value</code> 属性。<br><code>value</code> 属性无法与 <code>&lt;input type=&quot;file&quot;&gt;</code> 一同使用。</p>
<h5 id="name-属性"><a href="#name-属性" class="headerlink" title="name 属性"></a>name 属性</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">用户名:</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>name 表单的名字， 这样，后台可以通过这个 name 属性找到这个表单项。 页面中的表单项很多，name 主要作用就是用于区别不同的表单项。</p>
<ul>
<li>name 属性后面的值，是我们自己定义的。</li>
</ul>
<ul>
<li>radio 如果是一组，我们必须给他们命名相同的名字 name ，这样就可以多个选其中的一个啦</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> /&gt;</span> 男</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> /&gt;</span> 女</span><br></pre></td></tr></table></figure>

<h5 id="checked-属性"><a href="#checked-属性" class="headerlink" title="checked 属性"></a>checked 属性</h5><ul>
<li>表示默认选中状态。 较常见于 单选按钮和复选按钮。</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">性 别:</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;男&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span> /&gt;</span></span><br><span class="line">男</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;女&quot;</span> /&gt;</span></span><br><span class="line">女</span><br></pre></td></tr></table></figure>

<p>上面这个，表示就默认选中了 男 这个单选按钮</p>
<h4 id="label-标签-理解"><a href="#label-标签-理解" class="headerlink" title="label 标签(理解)"></a>label 标签(理解)</h4><p><strong>作用：</strong> 用于绑定一个表单元素, 当点击 label 标签的时候, 被绑定的表单元素就会获得输入焦点</p>
<p><strong>如何绑定元素呢？</strong></p>
<ul>
<li>第一种用法就是用 label 直接包括 input 表单</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">  用户名：</span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;usename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;请输入用户名&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>适合单个表单选择</p>
<ul>
<li>第二种用法 for 属性规定 label 与哪个表单元素绑定</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;sex&quot;</span>&gt;</span>男<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">id</span>=<span class="string">&quot;sex&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="textarea-控件-文本域"><a href="#textarea-控件-文本域" class="headerlink" title="textarea 控件(文本域)"></a>textarea 控件(文本域)</h4><ul>
<li>语法：</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">textarea</span>&gt;</span></span><br><span class="line">  文本内容</span><br><span class="line"><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>作用：</p>
<p>通过 textarea 控件可以轻松地创建多行文本输入框</p>
<p>cols=”每行中的字符数” rows=”显示的行数” 我们实际开发不用</p>
</li>
</ul>
<h5 id="文本框和文本域区别"><a href="#文本框和文本域区别" class="headerlink" title="文本框和文本域区别"></a>文本框和文本域区别</h5><table>
<thead>
<tr>
<th align="left">表单</th>
<th align="center">名称</th>
<th align="center">区别</th>
<th align="right">默认值显示</th>
<th align="right">用于场景</th>
</tr>
</thead>
<tbody><tr>
<td align="left">input type=”text”</td>
<td align="center">文本框</td>
<td align="center">只能显示一行文本</td>
<td align="right">单标签，通过 value 显示默认值</td>
<td align="right">用户名、昵称、密码等</td>
</tr>
<tr>
<td align="left">textarea</td>
<td align="center">文本域</td>
<td align="center">可以显示多行文本</td>
<td align="right">双标签，默认值写到标签中间</td>
<td align="right">留言板</td>
</tr>
</tbody></table>
<h4 id="select-标签"><a href="#select-标签" class="headerlink" title="select 标签"></a>select 标签</h4><p><strong>语法：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">multiple</span>=<span class="string">&quot;multiple&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span>&gt;</span>选项1<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">selected</span>&gt;</span>选项2<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span>&gt;</span>选项3<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>注意：</li>
</ul>
<ol>
<li>&lt;select&gt; 中至少包含一对 option</li>
<li>在 option 中定义 selected =” selected “时，当前项即为默认选中项，不写默认第一项。</li>
<li>multiple 属性可以选多个</li>
</ol>
<h4 id="HTML5-新的表单属性"><a href="#HTML5-新的表单属性" class="headerlink" title="HTML5 新的表单属性"></a>HTML5 新的表单属性</h4><p>HTML5 的 form 和 input 标签添加了几个新属性</p>
<p>form 新属性：<br><code>autocomplete</code> <code>novalidate</code></p>
<p>input 新属性：<br><code>autocomplete</code><br><code>autofocus</code> 在页面加载后设置或返回文本域是否自动获取焦点<br><code>form</code><br><code>ormaction</code><br><code>formenctype</code><br><code>formmethod</code><br><code>formnovalidate</code><br><code>ormtarget</code><br><code>height 与 width</code><br><code>list</code><br><code>min 与 max</code><br><code>multiple</code><br><code>pattern (regexp)</code><br><code>placeholder</code><br><code>required</code><br><code>step</code><br><code>readOnly</code> 设置或返回文本域是否应是只读的</p>
<h3 id="H5-新增标签：六大结构标签"><a href="#H5-新增标签：六大结构标签" class="headerlink" title="H5 新增标签：六大结构标签"></a>H5 新增标签：六大结构标签</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span>网站的头部<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span>网站的底部<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span>&gt;</span>导航<span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aside</span>&gt;</span>侧边栏<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">article</span>&gt;</span>文章页<span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span>&gt;</span>区块<span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="路径-重点、难点"><a href="#路径-重点、难点" class="headerlink" title="路径(重点、难点)"></a>路径(重点、难点)</h2><p>实际工作中，我们的文件不能随便乱放，否则用起来很难快速的找到他们，因此我们需要一个文件夹来管理他们</p>
<p><strong>目录文件夹：</strong></p>
<p>就是普通文件夹，里面只不过存放了我们做页面所需要的 相关素材，比如 html 文件， 图片 等等</p>
<p>页面中的图片会非常多， 通常我们再新建一个文件夹专门用于存放图像文件（images），这时再插入图像，就需要采用“路径”的方式来指定图像文件的位置。路径可以分为： 相对路径和绝对路径</p>
<h3 id="相对路径"><a href="#相对路径" class="headerlink" title="相对路径"></a>相对路径</h3><p>以引用文件的网页所在位置为参考基础，而建立出的目录路径。因此，当保存于不同目录的网页引用同一个文件时，所使用的路径将不相同，故称之为相对路径</p>
<ul>
<li>同一级路径 只需输入图像文件的名称即可</li>
<li>下一级路径 <code>/</code></li>
<li>上一级路径 <code>../</code></li>
</ul>
<blockquote>
<p>相对路径，是从代码所在的这个文件出发， 去寻找我们的目标文件的，而 我们所说的 上一级 下一级 同一级 简单说，就是 图片 位于 HTML 页面的位置</p>
</blockquote>
<h3 id="绝对路径"><a href="#绝对路径" class="headerlink" title="绝对路径"></a>绝对路径</h3><p>绝对路径以 Web 站点根目录为参考基础的目录路径。之所以称为绝对，意指当所有网页引用同一个文件时，所使用的路径都是一样的。</p>
<p>“D:\web\img\logo.gif”，或完整的网络地址，例如 “<a href="http://www.itcast.cn/images/logo.gif&quot;">http://www.itcast.cn/images/logo.gif&quot;</a></p>
<p><strong>注意：</strong></p>
<p>绝对路径用的较少，我们理解下就可以了</p>
<h2 id="锚点定位"><a href="#锚点定位" class="headerlink" title="锚点定位"></a>锚点定位</h2><p>通过创建锚点链接，用户能够快速定位到目标内容</p>
<p>创建锚点链接分为两步：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. 使用相应的id名标注跳转目标的位置。 (找目标)</span><br><span class="line">&lt;h3 id&#x3D;&quot;two&quot;&gt;第2集&lt;&#x2F;h3&gt;</span><br><span class="line"></span><br><span class="line">2. 使用 &lt;a href&#x3D;&quot;#id名&quot;&gt;链接文本&lt;&#x2F;a&gt; 创建链接文本（被点击的）</span><br><span class="line">&lt;a href&#x3D;&quot;#two&quot;&gt;&lt;&#x2F;a&gt;</span><br></pre></td></tr></table></figure>

<h2 id="延伸"><a href="#延伸" class="headerlink" title="延伸"></a>延伸</h2><h3 id="base-标签"><a href="#base-标签" class="headerlink" title="base 标签"></a>base 标签</h3><p>描述了基本的链接地址/链接目标，该标签作为 HTML 文档中所有的链接标签的默认链接(包括 <code>&lt;a&gt;</code>、<code>&lt;img&gt;</code>、<code>&lt;link&gt;</code>、<code>&lt;form&gt;</code>标签中的 URL)</p>
<p><strong>语法：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">base</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>总结：</strong></p>
<ol>
<li>base 可以设置整体链接的打开状态</li>
<li>base 写到 <code>&lt;head&gt; &lt;/head&gt;</code> 之间</li>
<li>把所有的连接 都默认添加 <code>target=&quot;_blank&quot;</code></li>
</ol>
<h3 id="lt-pre-gt-标签"><a href="#lt-pre-gt-标签" class="headerlink" title="&lt;pre&gt; 标签"></a><code>&lt;pre&gt;</code> 标签</h3><p>可定义预格式化的文本。</p>
<p>被包围在 <pre> 标签 元素中的文本通常会保留空格和换行符。而文本也会呈现为等宽字体。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  此例演示如何使用 pre 标签</span><br><span class="line"></span><br><span class="line">  对空行和 空格</span><br><span class="line"></span><br><span class="line">  进行控制</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>所谓的预格式化文本就是 ，按照我们预先写好的文字格式来显示页面， 保留空格和换行等。</p>
</blockquote>
<p>有了这个标签，里面的文字，会按照我们书写的模式显示，不需要段落和换行标签了。但是，比较少用，因为不好整体控制。</p>
<h3 id="meta-标签"><a href="#meta-标签" class="headerlink" title="meta 标签"></a>meta 标签</h3><ul>
<li><code>&lt;meta&gt;</code> 元素可提供有关页面的元信息（meta-information），比如针对搜索引擎和更新频度的描述和关键词</li>
<li>每 30 秒中刷新当前页面: <code>&lt;meta http-equiv=&quot;refresh&quot; content=&quot;30&quot;&gt;</code></li>
</ul>
<h3 id="特殊字符-（理解）"><a href="#特殊字符-（理解）" class="headerlink" title="特殊字符 （理解）"></a>特殊字符 （理解）</h3><table>
<thead>
<tr>
<th>显示结果</th>
<th>描述</th>
<th>实体名称</th>
<th>实体编号</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td>空格</td>
<td><code>&amp;nbsp;</code></td>
<td><code>&amp;#160;</code></td>
</tr>
<tr>
<td><code>&lt;</code></td>
<td>小于号</td>
<td><code>&amp;lt;</code></td>
<td><code>&amp;#60;</code></td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td>大于号</td>
<td><code>&amp;gt;</code></td>
<td><code>&amp;#62;</code></td>
</tr>
<tr>
<td><code>&amp;</code></td>
<td>和号</td>
<td><code>&amp;amp;</code></td>
<td><code>&amp;#38;</code></td>
</tr>
<tr>
<td><code>&quot;</code></td>
<td>引号</td>
<td><code>&amp;quot;</code></td>
<td><code>&amp;#34;</code></td>
</tr>
<tr>
<td><code>&#39;</code></td>
<td>撇号</td>
<td><code>&amp;apos;</code>(IE 不支持)</td>
<td><code>&amp;#39;</code></td>
</tr>
<tr>
<td><code>￠</code></td>
<td>分</td>
<td><code>&amp;cent;</code></td>
<td><code>&amp;#162;</code></td>
</tr>
<tr>
<td><code>£</code></td>
<td>镑</td>
<td><code>&amp;pound;</code></td>
<td><code>&amp;#163;</code></td>
</tr>
<tr>
<td><code>¥</code></td>
<td>人民币</td>
<td><code>&amp;yen;</code></td>
<td><code>&amp;#165;</code></td>
</tr>
<tr>
<td><code>€</code></td>
<td>欧元</td>
<td><code>&amp;euro;</code></td>
<td><code>&amp;#8364;</code></td>
</tr>
<tr>
<td><code>§</code></td>
<td>小节</td>
<td><code>&amp;sect;</code></td>
<td><code>&amp;#167;</code></td>
</tr>
<tr>
<td><code>©</code></td>
<td>版权</td>
<td><code>&amp;copy;</code></td>
<td><code>&amp;#169;</code></td>
</tr>
<tr>
<td><code>®</code></td>
<td>注册商标</td>
<td><code>&amp;reg;</code></td>
<td><code>&amp;#174;</code></td>
</tr>
<tr>
<td><code>™</code></td>
<td>商标</td>
<td><code>&amp;trade;</code></td>
<td><code>&amp;#8482;</code></td>
</tr>
<tr>
<td><code>×</code></td>
<td>乘号</td>
<td><code>&amp;times;</code></td>
<td><code>&amp;#215;</code></td>
</tr>
<tr>
<td><code>÷</code></td>
<td>除号</td>
<td><code>&amp;divide;</code></td>
<td><code>&amp;#247;</code></td>
</tr>
</tbody></table>
<p><strong>总结：</strong></p>
<ol>
<li>是以<strong>运算符</strong><code>&amp;</code>开头,以<strong>分号运算符</strong><code>;</code>结尾。</li>
<li>他们不是标签，而是符号。</li>
<li>HTML 中不能使用小于号 “&lt;” 和大于号 “&gt;”特殊字符，浏览器会将它们作为标签解析，若要正确显示，在 HTML 源代码中使用字符实体</li>
</ol>
<h3 id="html5-发展之路"><a href="#html5-发展之路" class="headerlink" title="html5 发展之路"></a>html5 发展之路</h3><h3 id="什么是-XHTML"><a href="#什么是-XHTML" class="headerlink" title="什么是 XHTML"></a>什么是 XHTML</h3><p>XHTML 是更严格更纯净的 HTML 代码。</p>
<ul>
<li>XHTML 指<strong>可扩展超文本标签语言</strong>（EXtensible HyperText Markup Language）。</li>
<li>XHTML 的目标是取代 HTML。</li>
<li>XHTML 与 HTML 4.01 几乎是相同的。</li>
<li>XHTML 是更严格更纯净的 HTML 版本。</li>
<li>XHTML 是作为一种 XML 应用被重新定义的 HTML。</li>
<li>XHTML 是一个 W3C 标准。</li>
</ul>
<h2 id="查文档"><a href="#查文档" class="headerlink" title="查文档"></a>查文档</h2><p>经常查阅文档是一个非常好的学习习惯。</p>
<p>W3C : <a href="http://www.w3school.com.cn/">http://www.w3school.com.cn/</a></p>
<p>MDN: <a href="https://developer.mozilla.org/zh-CN/">https://developer.mozilla.org/zh-CN/</a></p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title>ajax 笔记</title>
    <url>/1646.html</url>
    <content><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>我们使用 php 动态渲染页面时，有很多比较麻烦的地方。</p>
<ul>
<li>在前端写好页面以后，需要后台进行修改，意味这后端程序员也需要懂前端的知识，其实渲染的工作应该交给前端来做。</li>
<li>前端没有写好页面的话，后端无法开始工作，需要等待前端的页面完成之后才能开始工作，拖延项目的进度。</li>
<li>这种渲染，属于同步渲染，先获取数据, 如果数据获取的慢了, 会严重影响整个页面渲染速度, 且数据更新需要页面刷新</li>
</ul>
<h1 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h1><blockquote>
<p>即 Asynchronous [e’sɪŋkrənəs] Javascript And XML， AJAX 不是一门新的语言，而是对现有技术的综合利用。 本质是在 HTTP 协议的基础上以异步的方式与服务器进行通信</p>
</blockquote>
<h2 id="同步与异步"><a href="#同步与异步" class="headerlink" title="同步与异步"></a>同步与异步</h2><p><strong>同步和异步概念：</strong></p>
<p>同步：指的就是事情要一件一件做。等做完前一件才能做后一件任务</p>
<p>异步：不受当前任务的影响，两件事情同时进行，做一件事情时，不影响另一件事情的进行</p>
<p>编程中：异步程序代码执行时不会阻塞其它程序代码执行，从而提升整体执行效率</p>
<p><strong>网页异步应用：</strong></p>
<ol>
<li>验证你的用户名是否已经存在（一边输入，一边获取你的信息，和后台比对）。</li>
<li>百度搜索提示，及相关内容展示（一边输入，一边找出了你可能要的内容）。</li>
<li>新浪微博评论（异步加载）。</li>
</ol>
<p>XMLHttpRequest 可以以异步方式的请求数据处理程序, 可实现对网页的部分更新， 而不是刷新整个页面</p>
<h2 id="XMLHttpRequest-对象"><a href="#XMLHttpRequest-对象" class="headerlink" title="XMLHttpRequest 对象"></a>XMLHttpRequest 对象</h2><blockquote>
<p>浏览器内建对象，用于与服务器通信(交换数据) ， 由此我们便可实现对网页的部分更新，而不是刷新整个页面。这个请求是异步的，即在往服务器发送请求时，并不会阻碍程序的运行，浏览器会继续渲染后续的结构。</p>
</blockquote>
<h3 id="发送-get-请求"><a href="#发送-get-请求" class="headerlink" title="发送 get 请求"></a>发送 get 请求</h3><p>XMLHttpRequest 以异步的方式发送 HTTP 请求，因此在发送请求时，一样需要遵循 HTTP 协议。</p>
<p><strong>使用 XMLHttpRequest 发送 get 请求的步骤</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 创建一个 XMLHttpRequest 对象</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 设置请求行</span></span><br><span class="line"><span class="comment">// 第一个参数:请求方式  get/post</span></span><br><span class="line"><span class="comment">// 第二个参数:请求的地址 需要在url后面拼上参数列表</span></span><br><span class="line"><span class="comment">// 第三个参数：true 为异步，false为同步，默认为true，设为false没有意义</span></span><br><span class="line">xhr.open(<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;01.php?name=zs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 设置请求头(get不用设置)</span></span><br><span class="line"><span class="comment">// 请求头中可以设置 Content-Type,用以说明请求主体的内容是如何编码</span></span><br><span class="line"><span class="comment">// get 请求时没有请求体,无需设置请求头</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 设置请求体</span></span><br><span class="line"><span class="comment">// get 请求的请求体为空,因为参数列表拼接到 url 后面了</span></span><br><span class="line">xhr.send(<span class="literal">null</span>) <span class="comment">// 参数为 null 或什么都不写</span></span><br></pre></td></tr></table></figure>

<p>注意点 :</p>
<ul>
<li>get 请求，设置请求行时，需要把参数列表拼接到 url 后面</li>
<li>get 请求不用设置请求头，不用说明请求主体的编码方式</li>
<li>get 请求的请求体为 null</li>
</ul>
<h3 id="发送-post-请求"><a href="#发送-post-请求" class="headerlink" title="发送 post 请求"></a>发送 post 请求</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 创建一个 XMLHttpRequest 对象</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 设置请求行 post请求的参数列表在请求体</span></span><br><span class="line">xhr.open(<span class="string">&#x27;post&#x27;</span>, <span class="string">&#x27;02.php&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 设置请求头, post 请求必须要设置 content-type, 标记请求体内容的解析方式</span></span><br><span class="line"><span class="comment">// 如果不设置请求头,请求能够发送出去，但是后端无法解析获取数据</span></span><br><span class="line">xhr.setRequestHeader(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 设置请求体</span></span><br><span class="line">xhr.send(<span class="string">&#x27;name=Jepson&amp;age=18&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>注意点 :</p>
<ul>
<li>post 请求，设置请求行时，不拼接参数列表</li>
<li>post 必须设置请求头中的 content-type 为 <code>application/x-www-form-urlencoded</code>， 标记请求体解析方式</li>
<li>post 请求需要将参数列表设置到请求体中</li>
</ul>
<h3 id="获取响应-readyState"><a href="#获取响应-readyState" class="headerlink" title="获取响应 readyState"></a>获取响应 readyState</h3><p><code>readyState</code>：记录了 XMLHttpRequest 对象的当前状态</p>
<p>readyState 有五种可能的值：</p>
<ul>
<li>xhr.readyState = 0 时，UNSENT open 尚未调用</li>
<li>xhr.readyState = 1 时，OPENED open 已调用</li>
<li>xhr.readyState = 2 时，HEADERS_RECEIVED 接收到头信息</li>
<li>xhr.readyState = 3 时，LOADING 接收到响应主体</li>
<li><code>xhr.readyState = 4</code> 时，DONE 响应完成</li>
</ul>
<p>HTTP 响应分为 3 个部分，状态行、响应头、响应体。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 给xhr注册一个 onreadystatechange 事件，当 xhr 的状态发生状态发生改变时，会触发这个事件。</span></span><br><span class="line"><span class="comment">// onreadystatechange 只会监听 2， 3， 4 的状态变化</span></span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(xhr.readyState)</span><br><span class="line">  <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="comment">//1. 获取状态行</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;状态行:&#x27;</span> + xhr.status) <span class="comment">// 成功返回 200</span></span><br><span class="line">    <span class="keyword">if</span> (xhr.status == <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="comment">//2. 获取响应头</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;所有的响应头:&#x27;</span> + xhr.getAllResponseHeaders())</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;指定响应头:&#x27;</span> + xhr.getResponseHeader(<span class="string">&#x27;content-type&#x27;</span>))</span><br><span class="line">      <span class="comment">//3. 获取响应体</span></span><br><span class="line">      <span class="built_in">console</span>.log(xhr.responseText)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><p>【判断用户名是否存在】</p>
<p>【用户登录案例】</p>
<p>【聊天机器人案例】</p>
<h2 id="数据交互"><a href="#数据交互" class="headerlink" title="数据交互"></a>数据交互</h2><blockquote>
<p>浏览器端只是负责用户的交互和数据的收集以及展示，真正的数据都是存储在服务器端的。</p>
<p>我们现在通过 ajax 的确可以返回一些简单的数据（一个字符串），但是在实际开发过程中，肯定会会设计到大量的复杂类型的数据传输，比如数组、对象等，但是每个编程语言的语法都不一样。</p>
<p>因此我们会采用通过的数据交换格式（ <code>XML</code> 、<code>JSON</code> ）来进行数据的交互。</p>
</blockquote>
<h3 id="XML-了解即可"><a href="#XML-了解即可" class="headerlink" title="XML(了解即可)"></a>XML(了解即可)</h3><p><strong>什么是 XML</strong></p>
<ul>
<li>XML 指可扩展标记语言（EXtensible Markup Language）</li>
<li>XML 是一种标记语言，很类似 HTML</li>
<li>XML 的设计宗旨是传输数据，而非显示数据</li>
<li>XML 标签没有被预定义。您需要自行定义标签。</li>
</ul>
<p><strong>语法规范</strong></p>
<ul>
<li>第一行必须是版本信息</li>
<li>必须有一个根元素（有且仅有一个）</li>
<li>标签不可有空格、不可以数字或 . 开头、大小写敏感</li>
<li>不可交叉嵌套，都是双标签，如果是单标签，必须闭合</li>
<li>属性双引号（浏览器自动修正成双引号了）</li>
<li>特殊符号要使用实体</li>
<li>注释和 HTML 一样</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">students</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">student</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>张三<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">age</span>&gt;</span>18<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gender</span>&gt;</span>男<span class="tag">&lt;/<span class="name">gender</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">desc</span>&gt;</span>路人甲<span class="tag">&lt;/<span class="name">desc</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">student</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">student</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>李四<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">age</span>&gt;</span>20<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gender</span>&gt;</span>男<span class="tag">&lt;/<span class="name">gender</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">desc</span>&gt;</span>路人乙<span class="tag">&lt;/<span class="name">desc</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">student</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">students</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>php 获取 xml 文件的内容</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 注意: 如果需要返回 xml 数据, 需要将 content-type 改成 text/xml, 不然浏览器以 text/html 解析</span></span><br><span class="line">header( <span class="string">&#x27;content-type:text/xml;charset=utf-8&#x27;</span> );</span><br><span class="line"><span class="comment">// file_get_content 用于获取文件的内容</span></span><br><span class="line"><span class="comment">// 参数: 文件的路径</span></span><br><span class="line"><span class="variable">$result</span> = file_get_content( <span class="string">&quot;data.xml&quot;</span> );</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$result</span>;</span><br></pre></td></tr></table></figure>

<p><strong>js 解析 xml</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取服务端返回的 xml 数据，需要使用 xhr.responseXML，这是一个 document 对象，可以使用 DOM 中的方法查找元素。</span></span><br><span class="line"><span class="keyword">var</span> data = xhr.responseXML</span><br><span class="line"><span class="comment">// 获取所有的学生</span></span><br><span class="line"><span class="keyword">var</span> students = data.querySelectorAll(<span class="string">&#x27;student&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>缺点：虽然可以描述和传输复杂数据，但是其解析过于复杂, 并且体积较大，所以实现开发已经很少使用了</p>
<h3 id="JSON-数据"><a href="#JSON-数据" class="headerlink" title="JSON 数据"></a>JSON 数据</h3><p><code>JSON</code> (JavaScript Object Notation, JS 对象标记) 是一种轻量级的数据交换格式。它基于 ECMAScript 规范，采用独立于编程语言的文本格式来存储和表示数据</p>
<ul>
<li>数据在键值对中</li>
<li>数据由逗号分隔(最后一个 键值对不能带逗号)</li>
<li>花括号保存对象，方括号保存数组</li>
<li>键和值使用双引号</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">a</span>: <span class="string">&#x27;Hello&#x27;</span>, <span class="attr">b</span>: <span class="string">&#x27;World&#x27;</span> &#125; <span class="comment">// 这是一个对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 这是一个 JSON 字符串，本质是一个字符串</span></span><br><span class="line"><span class="keyword">var</span> json = <span class="string">&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>JSON 数据在不同语言进行传输时，类型为字符串，不同的语言各自也都对应有解析方法，解析完成后就能很方便的使用了</strong></p>
<h4 id="php-处理-json"><a href="#php-处理-json" class="headerlink" title="php 处理 json"></a>php 处理 json</h4><ul>
<li>php 关联数组 ==&gt; json ( json_encode )</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// php的关联数组</span></span><br><span class="line"><span class="variable">$obj</span> = <span class="keyword">array</span>(</span><br><span class="line">  <span class="string">&quot;a&quot;</span> =&gt; <span class="string">&quot;hello&quot;</span>,</span><br><span class="line">  <span class="string">&quot;b&quot;</span> =&gt; <span class="string">&quot;world&quot;</span>,</span><br><span class="line">  <span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;鹏鹏&quot;</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">// json字符串</span></span><br><span class="line"><span class="variable">$json</span> = json_encode( <span class="variable">$obj</span> );</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$json</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>json ==&gt; php 对象/关联数组 ( json_decode )</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$json</span> = <span class="string">&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span>; <span class="comment">// json字符串</span></span><br><span class="line"><span class="comment">// 第一个参数：json字符串</span></span><br><span class="line"><span class="comment">// 第二个参数：</span></span><br><span class="line"><span class="comment">// false，将json转换成对象(默认)</span></span><br><span class="line"><span class="comment">// true：将json转换成数组(推荐)</span></span><br><span class="line"><span class="variable">$obj</span> = json_decode(<span class="variable">$json</span>,<span class="literal">true</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$obj</span>[<span class="string">&#x27;a&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过json文件获取到的内容就是一个json字符串。</span></span><br><span class="line"><span class="variable">$data</span> = file_get_contents(<span class="string">&quot;data.json&quot;</span>);</span><br><span class="line"><span class="comment">// 将json转换成数组</span></span><br><span class="line"><span class="variable">$result</span> = json_decode(<span class="variable">$data</span>, <span class="literal">true</span>);</span><br><span class="line">print_r(<span class="variable">$result</span>);</span><br></pre></td></tr></table></figure>

<h4 id="JS-处理-json"><a href="#JS-处理-json" class="headerlink" title="JS 处理 json"></a>JS 处理 json</h4><ul>
<li><code>JSON.stringify(obj)</code> ：JS 对象 ==&gt; JSON 字符串</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">a</span>: <span class="string">&#x27;Hello&#x27;</span>, <span class="attr">b</span>: <span class="string">&#x27;World&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">var</span> result = <span class="built_in">JSON</span>.stringify(obj) <span class="comment">// &#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>JSON.parse(obj)</code> ：JSON 字符串 ==&gt; JS 对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> json = <span class="string">&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="built_in">JSON</span>.parse(json) <span class="comment">// &#123;a: &#x27;Hello&#x27;, b: &#x27;World&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<p>【案例：获取表格数据.html】</p>
<h2 id="兼容性处理-了解-不用处理"><a href="#兼容性处理-了解-不用处理" class="headerlink" title="兼容性处理 (了解, 不用处理)"></a>兼容性处理 (了解, 不用处理)</h2><p>现在一般最多兼容到 IE8, 这里以后见到了知道是在处理兼容性就行了</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="literal">null</span></span><br><span class="line"><span class="keyword">if</span> (XMLHttpRequest) &#123;</span><br><span class="line">  <span class="comment">//现代浏览器 IE7+</span></span><br><span class="line">  xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">//老版本的 Internet Explorer （IE5 和 IE6）使用 ActiveX 对象：</span></span><br><span class="line">  xmlHttp = <span class="keyword">new</span> ActiveXObject(<span class="string">&#x27;Microsoft.XMLHTTP&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="封装-ajax-工具函数"><a href="#封装-ajax-工具函数" class="headerlink" title="封装 ajax 工具函数"></a>封装 ajax 工具函数</h2><blockquote>
<p>每次发送 ajax 请求，其实步骤都是一样的，重复了大量代码，我们完全可以封装成一个工具函数</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1. 创建xhr对象</span></span><br><span class="line"><span class="comment">//2. 设置请求行</span></span><br><span class="line"><span class="comment">//3. 设置请求头</span></span><br><span class="line"><span class="comment">//3. 设置请求体</span></span><br><span class="line"><span class="comment">//4. 监听响应状态</span></span><br><span class="line"><span class="comment">//5. 获取响应内容</span></span><br></pre></td></tr></table></figure>

<h3 id="参数提取"><a href="#参数提取" class="headerlink" title="参数提取"></a>参数提取</h3><table>
<thead>
<tr>
<th>参数名</th>
<th>参数类型</th>
<th>描述</th>
<th>传值</th>
<th>默认值</th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td>string</td>
<td>请求方式</td>
<td>get/post</td>
<td>只要不传 post，就是 get</td>
</tr>
<tr>
<td>url</td>
<td>string</td>
<td>请求地址</td>
<td>接口地址</td>
<td>如果不传地址，不发送请求</td>
</tr>
<tr>
<td>async</td>
<td>boolean</td>
<td>是否异步</td>
<td>true/fase</td>
<td>只要不传 false，那就是 true，异步请求</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求数据</td>
<td><code>&#123;key:value,key1:value2&#125;</code></td>
<td>需要把这个对象拼接成参数的格式 uname=hucc&amp;upass=12345</td>
</tr>
<tr>
<td>dataType</td>
<td>string</td>
<td>返回的数据类型</td>
<td>xml/json/text</td>
<td>text</td>
</tr>
<tr>
<td>success</td>
<td>function</td>
<td>响应成功时调用</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>error</td>
<td>function</td>
<td>响应失败时调用</td>
<td>-</td>
<td>-</td>
</tr>
</tbody></table>
<h3 id="参数检测"><a href="#参数检测" class="headerlink" title="参数检测"></a>参数检测</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 要求参数obj必须传递，否则直接不发送请求</span></span><br><span class="line"><span class="keyword">if</span> (!obj || <span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 如果type传递的是post，那就发送post请求，否则发送get请求</span></span><br><span class="line"><span class="keyword">var</span> type = obj.type == <span class="string">&#x27;post&#x27;</span> ? <span class="string">&#x27;post&#x27;</span> : <span class="string">&#x27;get&#x27;</span></span><br><span class="line"><span class="keyword">var</span> url = obj.url</span><br><span class="line"><span class="keyword">if</span> (!url) &#123;</span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 只有当async传递了false，才会发送同步请求，不然只发送异步请求</span></span><br><span class="line"><span class="keyword">var</span> <span class="keyword">async</span> = obj.async == <span class="literal">false</span> ? <span class="literal">false</span> : <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h3 id="完整版本"><a href="#完整版本" class="headerlink" title="完整版本"></a>完整版本</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> $ = &#123;</span><br><span class="line">  ajax: <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 如果options参数没有传递，直接返回。</span></span><br><span class="line">    <span class="keyword">if</span> (!options || <span class="keyword">typeof</span> options !== <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 处理默认参数</span></span><br><span class="line">    <span class="comment">// 如果参数不是post，那就默认为get</span></span><br><span class="line">    <span class="keyword">var</span> type = options.type === <span class="string">&#x27;post&#x27;</span> ? <span class="string">&#x27;post&#x27;</span> : <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    <span class="comment">// 如果没有传url，直接返回</span></span><br><span class="line">    <span class="keyword">var</span> url = option.url</span><br><span class="line">    <span class="keyword">if</span> (!url) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 如果参数不是 false，那就默认是 true，发异步请求</span></span><br><span class="line">    <span class="keyword">var</span> <span class="keyword">async</span> = options.async == <span class="literal">false</span> ? <span class="literal">false</span> : <span class="literal">true</span></span><br><span class="line">    <span class="comment">// 把 option.data 对象中的数据拼接成键值对的字符串</span></span><br><span class="line">    <span class="keyword">var</span> data = <span class="built_in">this</span>.getData(options.data)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置请求行</span></span><br><span class="line">    <span class="comment">// 如果是get请求，并且要上传参数，需要把参数拼接到url后面</span></span><br><span class="line">    <span class="keyword">if</span> (type === <span class="string">&#x27;get&#x27;</span>) &#123;</span><br><span class="line">      url += <span class="string">&#x27;?&#x27;</span> + data</span><br><span class="line">      data = <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    xhr.open(type, url, <span class="keyword">async</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置请求头</span></span><br><span class="line">    <span class="keyword">if</span> (type === <span class="string">&#x27;post&#x27;</span>) &#123;</span><br><span class="line">      xhr.setRequestHeader(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 设置请求参数</span></span><br><span class="line">    xhr.send(data)</span><br><span class="line"></span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (xhr.status == <span class="number">200</span>) &#123;</span><br><span class="line">          <span class="comment">//判断一下,如果dataType的值是json,就转成js对象.如果是xml,就返回dom对象,其他都是普通文本</span></span><br><span class="line">          <span class="keyword">if</span> (options.dateType === <span class="string">&#x27;json&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> result = <span class="built_in">JSON</span>.parse(xhr.responseText)</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (option.dataType === <span class="string">&#x27;xml&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> result = xhr.responseXML</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> result = xhr.responseText</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">/*执行成功函数*/</span></span><br><span class="line">          options.success &amp;&amp; options.success(result)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          options.error &amp;&amp; options.error()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getData: <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 将obj对象转换成参数</span></span><br><span class="line">    <span class="comment">// 将对象转换成参数列表</span></span><br><span class="line">    <span class="keyword">if</span> (!obj || <span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> arr = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> obj) &#123;</span><br><span class="line">      arr.push(k + <span class="string">&#x27;=&#x27;</span> + obj[k])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr.join(<span class="string">&#x27;&amp;&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>【登录案例】</p>
<h2 id="jQuery-中的-ajax-方法"><a href="#jQuery-中的-ajax-方法" class="headerlink" title="jQuery 中的 ajax 方法"></a>jQuery 中的 ajax 方法</h2><blockquote>
<p>jQuery 为我们提供了更强大的 Ajax 封装</p>
</blockquote>
<h3 id="ajax"><a href="#ajax" class="headerlink" title="$.ajax"></a>$.ajax</h3><p>参数列表</p>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>描述</th>
<th>取值</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>url</td>
<td>接口地址</td>
<td></td>
<td>url:”02.php”</td>
</tr>
<tr>
<td>type</td>
<td>请求方式</td>
<td>get/post</td>
<td>type:”get”</td>
</tr>
<tr>
<td>timeout</td>
<td>超时时间</td>
<td>单位毫秒</td>
<td>timeout:5000</td>
</tr>
<tr>
<td>dataType</td>
<td>服务器返回的格式</td>
<td>json/xml/text(默认)</td>
<td>dataType:”json”</td>
</tr>
<tr>
<td>data</td>
<td>发送的请求数据</td>
<td>对象</td>
<td>data:{name:”zs”, age:18}</td>
</tr>
<tr>
<td>beforeSend</td>
<td>调用前的回调函数</td>
<td>function(){}</td>
<td>beforeSend:function(){ alert(1) }</td>
</tr>
<tr>
<td>success</td>
<td>成功的回调函数</td>
<td>function (data) {}</td>
<td>success:function (data) {}</td>
</tr>
<tr>
<td>error</td>
<td>失败的回调函数</td>
<td>function (error) {}</td>
<td>error:function(data) {}</td>
</tr>
<tr>
<td>complete</td>
<td>完成后的回调函数</td>
<td>function () {}</td>
<td>complete:function () {}</td>
</tr>
</tbody></table>
<p>使用示例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">  type: <span class="string">&#x27;get&#x27;</span>, <span class="comment">// 请求类型</span></span><br><span class="line">  url: <span class="string">&#x27;02.php&#x27;</span>, <span class="comment">// 请求地址</span></span><br><span class="line">  data: &#123; <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;, <span class="comment">// 请求数据</span></span><br><span class="line">  dataType: <span class="string">&#x27;json&#x27;</span>, <span class="comment">// 希望接受的数据类型</span></span><br><span class="line">  timeout: <span class="number">5000</span>, <span class="comment">// 设置超时时间</span></span><br><span class="line">  beforeSend: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// alert(&quot;发送前调用&quot;);</span></span><br><span class="line">    <span class="comment">// jq的ajax方法中beforeSend函数中如果执行了return false,那么请求就不发送了</span></span><br><span class="line">  &#125;,</span><br><span class="line">  success: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 如果有 dataType:&quot;json&quot;，或后台有header(content-type: text/json)，res就是已经转换好的js对象</span></span><br><span class="line">    <span class="comment">// alert(&quot;成功时调用&quot;);</span></span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">  &#125;,</span><br><span class="line">  error: <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// alert(&quot;失败时调用&quot;);</span></span><br><span class="line">    <span class="built_in">console</span>.log(error)</span><br><span class="line">  &#125;,</span><br><span class="line">  complete: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// alert(&quot;请求完成时调用&quot;); // 不管成功失败都会执行</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>【案例：登录案例.html】</p>
<h2 id="接口化开发"><a href="#接口化开发" class="headerlink" title="接口化开发"></a>接口化开发</h2><p>请求地址即所谓的接口，通常我们所说的接口化开发，其实是指一个接口对应一个功能， 并且严格约束了<strong>请求参数</strong> 和<strong>响应结果</strong> 的格式，这样前后端在开发过程中，可以减少不必要的讨论， 从而并行开发，可以极大的提升开发效率，另外一个好处，当网站进行改版后，服务端接口进行调整时，并不影响到前端的功能。</p>
<h3 id="获取短信验证码"><a href="#获取短信验证码" class="headerlink" title="获取短信验证码"></a>获取短信验证码</h3><p>【案例：register】</p>
<p><strong>需求文档(产品)</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">总需求：点击获取验证码按钮，向服务端发送请求, 调用服务器端短信接口, 服务器端根据传参, 调用第三方短信接口, 给手机发送验证码</span><br><span class="line"></span><br><span class="line">需求<span class="number">1</span>：格式校验</span><br><span class="line">(<span class="number">1</span>) 手机号码不能为空   如果为空提示<span class="string">&quot;手机号不能为空&quot;</span></span><br><span class="line">(<span class="number">2</span>) 手机号码格式必须正确, 提示<span class="string">&quot;请输入正确的手机号码&quot;</span></span><br><span class="line"></span><br><span class="line">需求<span class="number">2</span>：点击发送时，按钮显示为<span class="string">&quot;发送中&quot;</span>,并且不能重复提交请求</span><br><span class="line"></span><br><span class="line">需求<span class="number">3</span>：根据不同的响应结果，进行响应。</span><br><span class="line">(<span class="number">1</span>)如果接口调用成功</span><br><span class="line">  如果响应代码为<span class="number">100</span>，倒计时</span><br><span class="line">  如果响应代码为<span class="number">101</span>，提示手机号重复</span><br><span class="line">(<span class="number">2</span>)如果接口调用失败，告诉用户<span class="string">&quot;服务器繁忙，请稍候再试&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>接口文档</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">接口说明：获取短信验证码</span><br><span class="line">接口地址：getCode.php</span><br><span class="line">请求方式：get</span><br><span class="line">接口传参：mobile 手机号</span><br><span class="line">返回类型  json</span><br><span class="line">接口返回：&#123;</span><br><span class="line">			<span class="string">&quot;code&quot;</span>:<span class="string">&quot;101&quot;</span>,</span><br><span class="line">			<span class="string">&quot;msg&quot;</span>:<span class="string">&quot;手机号码存在&quot;</span>,</span><br><span class="line">			<span class="string">&quot;mobile&quot;</span>:<span class="string">&quot;18511249258&quot;</span></span><br><span class="line">		&#125;</span><br><span class="line">参数说明: code 当前业务逻辑的处理成功失败的标识  <span class="number">100</span>:成功   <span class="number">101</span>:手机号码存在</span><br><span class="line">		 msg  当前系统返回给前端提示</span><br><span class="line">		 mobile  当前的手机号码</span><br></pre></td></tr></table></figure>

<h3 id="注册接口"><a href="#注册接口" class="headerlink" title="注册接口"></a>注册接口</h3><p>【案例：register】</p>
<p><strong>表单序列化</strong> serialize</p>
<p>jquery 提供了一个<code>serialize()</code>方法序列化表单，说白就是将表单中带有 name 属性的所有参数拼成一个格式为<code>name=value&amp;name1=value1</code>这样的字符串。方便我们获取表单的数据。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// serialize 方法将表单参数序列化成一个字符串。必须指定 name 属性</span></span><br><span class="line"><span class="comment">// name=pp&amp;pass=123456&amp;repass=123456&amp;mobile=15751776629&amp;code=1234</span></span><br><span class="line">$(<span class="string">&#x27;form&#x27;</span>).serialize()</span><br></pre></td></tr></table></figure>

<p>jquery 的 ajax 方法，data 参数能够直接识别表单序列化的数据</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$.post(&#123;</span><br><span class="line">  url: <span class="string">&#x27;register.php&#x27;</span>,</span><br><span class="line">  data: $(<span class="string">&#x27;form&#x27;</span>).serialize(),</span><br><span class="line">  dataType: <span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">  success: <span class="function"><span class="keyword">function</span>(<span class="params">info</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(info)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>需求文档</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">注册功能</span><br><span class="line">总需求：点击注册按钮，向服务端发送请求</span><br><span class="line"></span><br><span class="line">需求<span class="number">1</span>:表单校验</span><br><span class="line">    <span class="number">1.1</span> 用户名不能为空，否则提示<span class="string">&quot;请输入用户名&quot;</span></span><br><span class="line">    <span class="number">1.2</span> 密码不能为空，否则提示<span class="string">&quot;请输入密码&quot;</span></span><br><span class="line">    <span class="number">1.3</span> 确认密码必须与密码一直，否则提示<span class="string">&quot;确认密码与密码不一致&quot;</span></span><br><span class="line">    <span class="number">1.4</span> 手机号码不能为空，否则提示<span class="string">&quot;请输入手机号码&quot;</span>;</span><br><span class="line">    <span class="number">1.5</span> 手机号码格式必须正确，否则提示<span class="string">&quot;手机号格式错误&quot;</span></span><br><span class="line">    <span class="number">1.6</span> 短信验证码必须是<span class="number">4</span>位的数字，否则提示<span class="string">&quot;验证码格式错误&quot;</span></span><br><span class="line"></span><br><span class="line">需求<span class="number">2</span>：点击注册按钮时，按钮显示为<span class="string">&quot;注册中...&quot;</span>,并且不能重复提交请求</span><br><span class="line"></span><br><span class="line">需求<span class="number">3</span>：根据不同响应结果，处理响应</span><br><span class="line">	<span class="number">3.1</span> 接口调用成功</span><br><span class="line">        <span class="number">100</span> 提示用户注册成功，3s后跳转到首页</span><br><span class="line">        <span class="number">101</span> 提示用户<span class="string">&quot;用户名已经存在&quot;</span></span><br><span class="line">        <span class="number">102</span> 提示用户<span class="string">&quot;验证码错误&quot;</span></span><br><span class="line">    <span class="number">3.2</span> 接口调用失败，提示<span class="string">&quot;服务器繁忙，请稍后再试&quot;</span>,恢复按钮的值</span><br></pre></td></tr></table></figure>

<p><strong>接口文档</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">接口说明：注册</span><br><span class="line">接口地址：register.php</span><br><span class="line">请求方式：post</span><br><span class="line">接口传参：name:用户名 pass:密码 code:验证码  mobile:手机号</span><br><span class="line">返回类型  json</span><br><span class="line">接口返回：&#123;</span><br><span class="line">			<span class="string">&quot;code&quot;</span>:<span class="string">&quot;100&quot;</span>,</span><br><span class="line">			<span class="string">&quot;msg&quot;</span>:<span class="string">&quot;注册成功&quot;</span>,</span><br><span class="line">			<span class="string">&quot;name&quot;</span>:<span class="string">&quot;Jepson&quot;</span></span><br><span class="line">		&#125;</span><br><span class="line">参数说明:</span><br><span class="line">      code 当前业务逻辑的处理成功失败的标识  <span class="number">100</span>:成功  <span class="number">101</span>:用户存在 <span class="number">102</span>:验证码错误</span><br><span class="line">      msg  当前系统返回给前端提示</span><br><span class="line">      name: 注册的用户名</span><br></pre></td></tr></table></figure>

<h2 id="模板引擎"><a href="#模板引擎" class="headerlink" title="模板引擎"></a>模板引擎</h2><blockquote>
<p>是为了使用户界面与业务数据（内容）分离而产生的，它可以生成特定格式的文档，用于网站的模板引擎就会生成一个标准的 HTML 文档。</p>
</blockquote>
<h3 id="为什么要使用模板引擎"><a href="#为什么要使用模板引擎" class="headerlink" title="为什么要使用模板引擎"></a>为什么要使用模板引擎</h3><p>我们通过 ajax 获取到数据后，需要把数据渲染到页面，在学习模板引擎前，我们的做法是大量的拼接字符串，对于结构简单的页面，这么做还行 ，但是如果页面结构很复杂，使用拼串的话<strong>代码可阅读性非常的差，而且非常容易出错，后期代码维护也是相当的麻烦。</strong></p>
<p>总结来说拼串渲染两大缺点：</p>
<ol>
<li>js 中大量充斥着 html 结构拼串代码， 很冗余，可读性差</li>
<li>字符串拼接很麻烦， 且维护起来也很麻烦， 容易出错</li>
</ol>
<h3 id="常见的模板引擎"><a href="#常见的模板引擎" class="headerlink" title="常见的模板引擎"></a>常见的模板引擎</h3><p>BaiduTemplate：<a href="http://tangram.baidu.com/BaiduTemplate/">http://tangram.baidu.com/BaiduTemplate/</a><br>velocity.js：<a href="https://github.com/shepherdwind/velocity.js/">https://github.com/shepherdwind/velocity.js/</a><br>ArtTemplate：<a href="https://github.com/aui/artTemplate">https://github.com/aui/artTemplate</a></p>
<p>artTemplate 是使用最广泛，效率最高的模板引擎，需要大家掌握。</p>
<h3 id="artTemplate"><a href="#artTemplate" class="headerlink" title="artTemplate"></a>artTemplate</h3><p><a href="https://github.com/aui/art-template">github 地址</a></p>
<p><a href="https://aui.github.io/art-template/docs/">中文 api 地址</a></p>
<h4 id="artTemplate-的基本使用"><a href="#artTemplate-的基本使用" class="headerlink" title="artTemplate 的基本使用"></a>artTemplate 的基本使用</h4><p><strong>1. 引入模板引擎的 js 文件</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script src=<span class="string">&#x27;template-web.js&#x27;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>2. 准备模板</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  指定了type为text/html后，这一段script标签并不会解析，也不会显示。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/html&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myTmp&quot;</span>&gt;</span></span><br><span class="line"><span class="handlebars"><span class="xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名：隔壁老王<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>年龄：18<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>技能：查水表<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>描述：年轻力气壮<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>3. 准备数据</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//3. 准备数据,数据是后台获取的，可以随时变化</span></span><br><span class="line"><span class="keyword">var</span> json = &#123;</span><br><span class="line">  userName: <span class="string">&#x27;隔壁老王&#x27;</span>,</span><br><span class="line">  age: <span class="number">18</span>,</span><br><span class="line">  skill: <span class="string">&#x27;查水表&#x27;</span>,</span><br><span class="line">  desc: <span class="string">&#x27;年轻气壮&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>4. 将模板与数据进行绑定</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//第一个参数：模板的id</span></span><br><span class="line"><span class="comment">//第二个参数：数据</span></span><br><span class="line"><span class="comment">//返回值：根据模板生成的字符串。</span></span><br><span class="line"><span class="keyword">var</span> html = template(<span class="string">&#x27;myTmp&#x27;</span>, json)</span><br><span class="line"><span class="built_in">console</span>.log(html)</span><br></pre></td></tr></table></figure>

<p><strong>5. 修改模板</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/html&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myTmp&quot;</span>&gt;</span></span><br><span class="line"><span class="handlebars"><span class="xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名：</span><span class="template-variable">&#123;&#123;<span class="name">userName</span>&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>年龄：</span><span class="template-variable">&#123;&#123;<span class="name">age</span>&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>技能：</span><span class="template-variable">&#123;&#123;<span class="name">skill</span>&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>描述：</span><span class="template-variable">&#123;&#123;<span class="name">desc</span>&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>6. 将数据显示到页面</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">div.innerHTML = html</span><br></pre></td></tr></table></figure>

<h4 id="artTemplate-标准语法"><a href="#artTemplate-标准语法" class="headerlink" title="artTemplate 标准语法"></a>artTemplate 标准语法</h4><p><strong>if 语法</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;&#123;if gender=&#x27;男&#x27;&#125;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;man&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123;else&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;woman&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;/if&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>each 语法</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  1. &#123;&#123;each data&#125;&#125;  可以通过$value 和 $index获取值和下标</span></span><br><span class="line"><span class="comment">  2. &#123;&#123;each data v i&#125;&#125;  自己指定值为v，下标为i</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">&#123;&#123;each data v i&#125;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123;v.url&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;v.src&#125;&#125;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;v.content&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">&#123;&#123;/each&#125;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//如果返回的数据是个数组，必须使用对象进行包裹，因为在&#123;&#123;&#125;&#125;中只写书写对象的属性。</span></span><br><span class="line"><span class="keyword">var</span> html = template(<span class="string">&#x27;navTmp&#x27;</span>, &#123; <span class="attr">data</span>: info &#125;)</span><br></pre></td></tr></table></figure>

<h2 id="瀑布流案例"><a href="#瀑布流案例" class="headerlink" title="瀑布流案例"></a>瀑布流案例</h2><h3 id="封装-jQuery-瀑布流插件"><a href="#封装-jQuery-瀑布流插件" class="headerlink" title="封装 jQuery 瀑布流插件"></a>封装 jQuery 瀑布流插件</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 特点分析：</span></span><br><span class="line"><span class="comment">// 1. 跟以前将的瀑布流不一样的是，这次的瀑布流固定版心为1200px</span></span><br><span class="line"><span class="comment">// 2. 瀑布流固定摆放5列，每一列的宽度固定为232px。</span></span><br><span class="line"><span class="comment">// 思路分析：</span></span><br><span class="line"><span class="comment">// 1. 计算每一列之间的缝隙</span></span><br><span class="line"><span class="comment">// 2. 初始化一个数组，用户存储每一列的高度 [0,0,0,0,0]</span></span><br><span class="line"><span class="comment">// 3. 查找数组的最小列，每次都把图片定位到最小列的位置</span></span><br><span class="line"><span class="comment">// 4. 更新数组最小列的高度（加上定位过来的图片的高度）</span></span><br></pre></td></tr></table></figure>

<p>代码参考：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$.fn.waterfall = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> $box = $(<span class="built_in">this</span>)</span><br><span class="line">  <span class="keyword">var</span> $item = $box.children()</span><br><span class="line">  <span class="keyword">var</span> boxWidth = $box.width() <span class="comment">//父盒子的宽度</span></span><br><span class="line">  <span class="keyword">var</span> itemWidth = <span class="number">232</span> <span class="comment">//每个盒子固定宽度为232</span></span><br><span class="line">  <span class="keyword">var</span> columns = <span class="number">5</span> <span class="comment">//固定摆放5列</span></span><br><span class="line">  <span class="keyword">var</span> gap = (boxWidth - columns * itemWidth) / (columns - <span class="number">1</span>) <span class="comment">//缝隙的宽度 10</span></span><br><span class="line">  <span class="keyword">var</span> arr = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>] <span class="comment">//初始化数组</span></span><br><span class="line">  $item.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//查找最小列</span></span><br><span class="line">    <span class="keyword">var</span> min = arr[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">var</span> minIndex = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (min &gt; arr[i]) &#123;</span><br><span class="line">        min = arr[i]</span><br><span class="line">        minIndex = i</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//设置位置</span></span><br><span class="line">    $(<span class="built_in">this</span>).css(&#123;</span><br><span class="line">      left: minIndex * (itemWidth + gap),</span><br><span class="line">      top: min</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//更新数组</span></span><br><span class="line">    arr[minIndex] = min + $(<span class="built_in">this</span>).outerHeight() + gap</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="瀑布流完整版"><a href="#瀑布流完整版" class="headerlink" title="瀑布流完整版"></a>瀑布流完整版</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 需求分析：</span></span><br><span class="line"><span class="comment">// 1. 页面刚开始，没有任何一张图片。因此需要从通过ajax获取图片</span></span><br><span class="line"><span class="comment">// 2. 使用模版引擎将获取到的数据渲染到页面</span></span><br><span class="line"><span class="comment">// 3. 因为图片路径是从服务端获取的，加载需要时间，需要等待图片加载完成后才能使用瀑布流进行布局。</span></span><br><span class="line"><span class="comment">// 4. 给window注册scroll事件，当触底时，需要动态的加载图片。</span></span><br><span class="line"><span class="comment">// 5. 加载时，显示加载中的提示信息，并且要求不能重复发送ajax请求</span></span><br><span class="line"><span class="comment">// 6. 当服务端返回图片数量为0时，提示用户没有更多数据。</span></span><br></pre></td></tr></table></figure>

<h2 id="同源与跨域"><a href="#同源与跨域" class="headerlink" title="同源与跨域"></a>同源与跨域</h2><h3 id="同源"><a href="#同源" class="headerlink" title="同源"></a>同源</h3><h4 id="同源策略的基本概念"><a href="#同源策略的基本概念" class="headerlink" title="同源策略的基本概念"></a>同源策略的基本概念</h4><blockquote>
<p>1995 年，同源政策由 Netscape 公司引入浏览器。目前，所有浏览器都实行这个政策。<br>同源策略：最初，它的含义是指，A 网页设置的 Cookie，B 网页不能打开，除非这两个网页”同源”。所谓”同源”指的是”三个相同”：协议相同、域名相同、端口相同</p>
</blockquote>
<h4 id="同源策略的目的"><a href="#同源策略的目的" class="headerlink" title="同源策略的目的"></a>同源策略的目的</h4><blockquote>
<p>同源政策的目的，是为了保证用户信息的安全，防止恶意的网站窃取数据。</p>
</blockquote>
<h4 id="同源策略的限制范围"><a href="#同源策略的限制范围" class="headerlink" title="同源策略的限制范围"></a>同源策略的限制范围</h4><blockquote>
<p>随着互联网的发展，“同源策略”越来越严格，目前，如果非同源，以下三种行为都将收到限制。</p>
</blockquote>
<ol>
<li>Cookie、LocalStorage 和 IndexDB 无法读取</li>
<li>DOM 无法获得</li>
<li>AJAX 请求响应被拦截</li>
</ol>
<p>虽然这些限制是很有必要的，但是也给我们日常开发带来不好的影响。比如实际开发过程中，往往都会把服务器端架设到一台甚至是一个集群的服务器中，把客户端页面放到另外一个单独的服务器。那么这时候就会出现不同源的情况，如果我们知道两个网站都是安全的话，我们是希望两个不同源的网站之间可以相互请求数据的。这就需要使用到 <strong>跨域</strong> 。</p>
<h3 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h3><h4 id="jsonp-无兼容性问题"><a href="#jsonp-无兼容性问题" class="headerlink" title="jsonp( 无兼容性问题 )"></a>jsonp( 无兼容性问题 )</h4><blockquote>
<p><code>JSONP(JSON with Padding)</code> 可用于解决主流浏览器的跨域数据访问的问题。</p>
<p>原理：服务端返回一个定义好的 js 函数的调用，并且将服务器的数据以该函数参数的形式传递过来，这个方法需要前后端配合</p>
</blockquote>
<ul>
<li><code>script</code>  标签是不受同源策略的限制的，它可以载入任意地方的 JavaScript 文件。类似的还有<code>img</code>和<code>link</code>标签</li>
</ul>
<h5 id="jsonp-演化过程-1"><a href="#jsonp-演化过程-1" class="headerlink" title="jsonp 演化过程 1"></a>jsonp 演化过程 1</h5><p>php 文件</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">header(<span class="string">&quot;content-type:text/html;charset=utf-8&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;alert(1111)&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>html 文件</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://www.api.com/testjs.php&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>原理：其实 src 的路径是什么文件不重要，无论引入 js 文件还是 php 文件，最后返回给浏览器的都是字符串，因此我们 script 标签是可以引入一个 php 文件的。</p>
<h5 id="jsonp-演化过程-2"><a href="#jsonp-演化过程-2" class="headerlink" title="jsonp 演化过程 2"></a>jsonp 演化过程 2</h5><p>php 文件</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">header(<span class="string">&quot;content-type:text/html;charset=utf-8&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;var a = 118;&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>html 文件</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://www.api.com/testjs.php&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="comment">// a打印出来了118</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(a)</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>我们现在做到了一件事情，从不同源的 php 文件中获取到了数据</strong></p>
<p>缺点：获取数据的 script 标签必须写在使用的 script 标签的前面，必须保证先有数据才能对数据进行渲染。</p>
<h5 id="jsonp-演化过程-3"><a href="#jsonp-演化过程-3" class="headerlink" title="jsonp 演化过程 3"></a>jsonp 演化过程 3</h5><p>php 代码</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">header(<span class="string">&quot;content-type:text/html;charset=utf-8&quot;</span>);</span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>(</span><br><span class="line">  <span class="string">&quot;name&quot;</span>=&gt;<span class="string">&quot;zs&quot;</span>,</span><br><span class="line">  <span class="string">&quot;age&quot;</span>=&gt;<span class="number">18</span></span><br><span class="line">);</span><br><span class="line"><span class="variable">$result</span> = json_encode(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 这是一段js函数的调用的代码，$result就是我们想要的数据</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;func(<span class="subst">$result</span>)&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>js 代码</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(data)</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://www.api.com/testjs.php&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>缺点：后端必须知道前端声明的方法的名字，后端才能调用。</p>
<h5 id="jsonp-演化过程-4"><a href="#jsonp-演化过程-4" class="headerlink" title="jsonp 演化过程 4"></a>jsonp 演化过程 4</h5><p>php 代码</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">header(<span class="string">&quot;content-type:text/html;charset=utf-8&quot;</span>);</span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>(</span><br><span class="line">  <span class="string">&quot;name&quot;</span>=&gt;<span class="string">&quot;zs&quot;</span>,</span><br><span class="line">  <span class="string">&quot;age&quot;</span>=&gt;<span class="number">18</span></span><br><span class="line">);</span><br><span class="line"><span class="variable">$result</span> = json_encode(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 这是一 段js函数的调用的代码，$result就是我们想要的数据</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$_GET</span>[<span class="string">&#x27;callback&#x27;</span>].<span class="string">&quot;(<span class="subst">$result</span>)&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>javascript 代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> button = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;button&#x27;</span>)</span><br><span class="line">button.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">&#x27;script&#x27;</span>)</span><br><span class="line">  script.src = <span class="string">&#x27;http://www.api.com/testjs.php?callback=fun&#x27;</span></span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(script)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>jsonp 的原理就是 <strong>借助 script 标签 src 请求资源时，不受同源策略的限制</strong></li>
<li>在服务端返回一个函数的调用，将数据作为当前调用函数的实参</li>
<li>在浏览器端，声明一个全局函数，通过形参就可以获取到服务端返回的对应的值</li>
</ol>
<h4 id="jquery-对于-jsonp-的封装"><a href="#jquery-对于-jsonp-的封装" class="headerlink" title="jquery 对于 jsonp 的封装"></a>jquery 对于 jsonp 的封装</h4><p>!&gt; jsonp 仅支持 get 请求</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用起来相当的简单，跟普通的get请求没有任何的区别，只需要把 dataType 固定成 jsonp 即可</span></span><br><span class="line">$.ajax(&#123;</span><br><span class="line">  type: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">  url: <span class="string">&#x27;http://www.Jepson.com/testjs.php&#x27;</span>,</span><br><span class="line">  dataType: <span class="string">&#x27;jsonp&#x27;</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    uname: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">    upass: <span class="string">&#x27;123456&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  success: <span class="function"><span class="keyword">function</span>(<span class="params">info</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(info)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="XMLHttpRequest2-0"><a href="#XMLHttpRequest2-0" class="headerlink" title="XMLHttpRequest2.0"></a>XMLHttpRequest2.0</h2><blockquote>
<p>XMLHttpRequest 是一个 javascript 内置对象，使得 Javascript 可以进行异步的 HTTP 通信。2008 年 2 月，就提出了 XMLHttpRequest Level 2 草案。</p>
</blockquote>
<p>老版本的 XMLHttpRequest 的缺点：</p>
<ol>
<li>仅支持传输文本数据，无法传输二进制文件，比如图片视频等。</li>
<li>传输数据时，没有进度信息，只能提示完成与否。</li>
<li>受到了”同源策略”的限制</li>
</ol>
<p>新版本的功能：</p>
<ol>
<li>可以设置 timeout 超时时间</li>
<li>可以使用 formData 对象管理表单数据</li>
<li>允许请求不同域名下的数据（跨域）</li>
<li>支持上传二进制文件</li>
<li>可以获取数据传输的进度信息</li>
</ol>
<p><strong>注意：我们现在使用 new XMLHttpRequest 创建的对象就是 2.0 对象了，我们之前学的是 1.0 的语法，现在学习一些 2.0 的新特性即可。</strong></p>
<h3 id="timeout-设置超时"><a href="#timeout-设置超时" class="headerlink" title="timeout 设置超时"></a>timeout 设置超时</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">xhr.timeout = <span class="number">3000</span> <span class="comment">// 设置超时时间</span></span><br><span class="line">xhr.ontimeout = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">&#x27;请求超时&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="formData-管理表单数据"><a href="#formData-管理表单数据" class="headerlink" title="formData 管理表单数据"></a>formData 管理表单数据</h3><p>formData 对象类似于 jquery 的 serialize 方法，序列化表单，实现表单的异步提交</p>
<p>!&gt; 但 serialize 方法无法实现文件上传</p>
<p>使用：</p>
<ol>
<li>实例化一个 formData 对象， new FormData(form); form 就是表单元素，DOM 对象</li>
<li>formData 对象可以直接作为 xhr.send(formData) 的参数。注意此时数据是以二进制的形式进行传输。</li>
<li>formData 有一个 append 方法，可以添加参数。formData.append(“id”, “1111”);</li>
<li>这种方式只能以 <strong>post</strong> 形式传递，不需要设置请求头，浏览器会自动为我们设置一个合适的请求头。</li>
</ol>
<p>代码示例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 使用formData必须发送post请求</span></span><br><span class="line">xhr.open(<span class="string">&#x27;post&#x27;</span>, <span class="string">&#x27;02-formData.php&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 获取表单元素</span></span><br><span class="line"><span class="keyword">var</span> form = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#myForm&#x27;</span>)</span><br><span class="line"><span class="comment">// 3. 创建form对象，可以直接作为send的参数。</span></span><br><span class="line"><span class="keyword">var</span> formData = <span class="keyword">new</span> FormData(form)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. formData可以使用append方法添加参数</span></span><br><span class="line">formData.append(<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. 发送，不需要指定请求头，浏览器会自动选择合适的请求头</span></span><br><span class="line">xhr.send(formData)</span><br></pre></td></tr></table></figure>

<p>如果要获取 <code>formData</code> 中的数据，可以使用 <code>formData.get(&#39;&#39;)</code> 获取</p>
<h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3><blockquote>
<p>以前，文件上传需要借助表单进行上传，但是表单上传是同步的，也就是说文件上传时，页面需要提交和刷新，用户体验不友好，xhr2.0 中的 formData 对象支持文件的异步上传。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> formData = <span class="keyword">new</span> FormData()</span><br><span class="line"><span class="comment">// 获取上传的文件，传递到后端</span></span><br><span class="line"><span class="keyword">var</span> file = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;file&#x27;</span>).files[<span class="number">0</span>]</span><br><span class="line"><span class="built_in">console</span>.dir(file)</span><br><span class="line">formData.append(<span class="string">&#x27;file&#x27;</span>, file)</span><br><span class="line">xhr.send(formData)</span><br><span class="line"></span><br><span class="line">$(<span class="string">&#x27;#upload&#x27;</span>).on(<span class="string">&#x27;change&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// FormData 用于管理表单数据的</span></span><br><span class="line">  <span class="keyword">var</span> form = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#form1&#x27;</span>)</span><br><span class="line">  <span class="keyword">var</span> formData = <span class="keyword">new</span> FormData(form)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 发送给服务器</span></span><br><span class="line">  <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">  xhr.open(<span class="string">&#x27;post&#x27;</span>, <span class="string">&#x27;upload.php&#x27;</span>)</span><br><span class="line">  xhr.send(formData) <span class="comment">// 直接发送 formData</span></span><br><span class="line"></span><br><span class="line">  xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> r = xhr.responseText</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// jquery</span></span><br><span class="line">$(<span class="string">&#x27;#upload&#x27;</span>).on(<span class="string">&#x27;change&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 准备要上传的数据</span></span><br><span class="line">  <span class="keyword">var</span> formData = <span class="keyword">new</span> FormData()</span><br><span class="line">  <span class="comment">// 如果 formData 中有文件对象了，就不需要再添加了</span></span><br><span class="line">  formData.append(<span class="string">&#x27;file&#x27;</span>, <span class="built_in">this</span>.files[<span class="number">0</span>])</span><br><span class="line">  <span class="comment">// 发送 AJAX 请求，上传文件</span></span><br><span class="line">  $.ajax(&#123;</span><br><span class="line">    url: <span class="string">&#x27;upload.php&#x27;</span>,</span><br><span class="line">    contentType: <span class="literal">false</span>, <span class="comment">// 设置编码类型</span></span><br><span class="line">    processData: <span class="literal">false</span>, <span class="comment">// 设置传递值方式</span></span><br><span class="line">    data: formData,</span><br><span class="line">    type: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (res.success) &#123;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>!&gt; 如果使用 <code>$.ajax</code> 发送 ， 需要添加如下两项参数<br>​ <code>contentType: false,</code> 设置编码类型<br>​ <code>processData: false,</code> 设置传递值方式</p>
<h3 id="显示文件进度信息"><a href="#显示文件进度信息" class="headerlink" title="显示文件进度信息"></a>显示文件进度信息</h3><p>xhr2.0 还支持获取上传文件的进度信息，因此我们可以根据进度信息可以实时的显示文件的上传进度。</p>
<ol>
<li>需要注册 <code>xhr.upload.onprogress = function(e)&#123;&#125;</code> 事件，用于监听文件上传的进度。注意：需要在 send 之前注册。</li>
<li>上传的进度信息会存储事件对象 e 中</li>
<li><code>e.loaded</code> 表示已上传的大小；<code>e.total</code> 表示整个文件的大小</li>
</ol>
<p>代码参考：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">xhr.upload.onprogress = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  inner.style.width = ((e.loaded / e.total) * <span class="number">100</span>).toFixed(<span class="number">2</span>) + <span class="string">&#x27;%&#x27;</span></span><br><span class="line">  span.innerHTML = ((e.loaded / e.total) * <span class="number">100</span>).toFixed(<span class="number">2</span>) + <span class="string">&#x27;%&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// toFixed(2) 保留两位小数</span></span><br><span class="line"></span><br><span class="line">xhr.send(formData)</span><br></pre></td></tr></table></figure>

<p>默认上传文件限制 8M，需要配置 php.ini，允许 php 上传大文件</p>
<h3 id="跨域资源共享-CORS"><a href="#跨域资源共享-CORS" class="headerlink" title="跨域资源共享(CORS)"></a>跨域资源共享(CORS)</h3><h4 id="CORS-的使用"><a href="#CORS-的使用" class="headerlink" title="CORS 的使用"></a>CORS 的使用</h4><blockquote>
<p>新版本的 XMLHttpRequest 对象，可以向不同域名的服务器发出 HTTP 请求。这叫做<a href="http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing">跨域资源共享</a>（Cross-origin resource sharing，简称 CORS）。</p>
</blockquote>
<p>跨域资源共享（CORS）的前提</p>
<ul>
<li>浏览器支持这个功能( 兼容性 IE10+ )</li>
<li>服务器必须允许这种跨域</li>
</ul>
<p>服务器允许跨域的代码：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 允许所有的域名访问这个接口</span></span><br><span class="line">header(<span class="string">&quot;Access-Control-Allow-Origin:*&quot;</span>);</span><br><span class="line"><span class="comment">// 允许 www.abc.com 这个域名访问这个接口</span></span><br><span class="line">header(<span class="string">&quot;Access-Control-Allow-Origin:http://www.abc.com&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="CORS-的具体流程（了解）"><a href="#CORS-的具体流程（了解）" class="headerlink" title="CORS 的具体流程（了解）"></a>CORS 的具体流程（了解）</h4><ol>
<li><p>浏览器发送跨域请求</p>
</li>
<li><p>服务器端收到一个跨域请求后，在响应头中添加 Access-Control-Allow-Origin Header 资源权限配置。发送响应</p>
</li>
<li><p>浏览器收到响应后，查看是否设置了<code>header(&#39;Access-Control-Allow-Origin:请求源域名或者*&#39;);</code></p>
<p>如果当前域已经得到授权，则将结果返回给浏览器，否则浏览器忽略此次响应</p>
</li>
</ol>
<p>结论：</p>
<ol>
<li><strong>跨域行为是浏览器行为，响应是回来了, 只是浏览器安全机制做了限制, 对于跨域响应内容进行了忽略。</strong></li>
<li><strong>服务器与服务器之间是不存在跨域问题的</strong></li>
</ol>
<h4 id="jsonp-与-cors-的对比"><a href="#jsonp-与-cors-的对比" class="headerlink" title="jsonp 与 cors 的对比"></a>jsonp 与 cors 的对比</h4><ul>
<li>jsonp 兼容性好，老版本浏览器也支持，但是 jsonp 仅支持 get 请求，发送的数据量有限，使用麻烦</li>
<li>cors 需要浏览器支持 cors 功能才行。使用简单，<strong>只要服务端设置允许跨域，对于客户端来说，跟普通的 get、post 请求并没有什么区别</strong></li>
<li>跨域的安全性问题：<strong>因为跨域是需要服务端配合控制的</strong> ，也就是说不论 jsonp 还是 cors，如果没有服务端的允许，浏览器是没法做到跨域的</li>
</ul>
<p>【案例：图灵机器人】</p>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>ajax</tag>
      </tags>
  </entry>
  <entry>
    <title>Web Api</title>
    <url>/1658.html</url>
    <content><![CDATA[<h1 id="Web-Api-基本概念"><a href="#Web-Api-基本概念" class="headerlink" title="Web Api 基本概念"></a>Web Api 基本概念</h1><p><strong>API</strong>（Application Programming Interface,应用程序编程接口）</p>
<p><strong>API 是一些预先定义的方法，这些方法能够实现某些特定的功能</strong></p>
<ul>
<li>任何开发语言都会提供自己的 API</li>
<li>API 的特征输入和输出(参数/返回值)</li>
</ul>
<p>通俗的讲，API 就是编程语言给我提供的一些 <code>工具</code>，通过这些<code>工具</code>，我们可以非常轻易的完成一些功能。</p>
<p><strong>Web API</strong> : 是浏览器提供的 <strong>一套操作网页(web)的方法(API)</strong>, 通过这套 API 我们可以非常轻松的操作<code>页面的元素</code>和<code>浏览器的一些功能</code></p>
<p>**ECMAScript - JavaScript 的核心 **</p>
<ul>
<li>ECMAScript 是一套标准, 规范了语言的基本语法和数据类型</li>
<li>与具体实现无关</li>
</ul>
<p><strong>DOM</strong> - 文档对象模型</p>
<ul>
<li>一套操作页面元素的 API</li>
<li>通过 DOM 提供的 API 可以获取/操作网页上的元素</li>
</ul>
<p><strong>BOM - 浏览器对象模型</strong></p>
<ul>
<li>一套操作浏览器功能的 API</li>
<li>通过 BOM 可以操作浏览器窗口, 比如刷新、控制浏览器跳转等</li>
</ul>
<h1 id="DOM-文档对象模型"><a href="#DOM-文档对象模型" class="headerlink" title="DOM 文档对象模型"></a>DOM 文档对象模型</h1><h2 id="DOM-基本概念"><a href="#DOM-基本概念" class="headerlink" title="DOM 基本概念"></a>DOM 基本概念</h2><blockquote>
<p>DOM ( Document Object Model ) 文档对象模型，是<code>W3C组织</code>推荐的一套操作网页元素的 API</p>
</blockquote>
<p>DOM 又称为文档树模型，因为整个 HTML 文档是一个树形的结构</p>
<p><strong>DOM 中常见的概念</strong> :</p>
<ul>
<li><p><strong>文档 <code>document</code></strong> : 一个网页可以称为文档；（换句话说：操作页面，其实就是操作 document）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>)</span><br><span class="line"><span class="comment">// DOM 会把整个网页当成一个对象，我们操作这个网页，只要操作这个document对象</span></span><br><span class="line"><span class="comment">// DOM 会把网页中的所有的东西都当作对象</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>节点<code>node</code></strong> : 网页中的所有内容都是节点 (标签、属性、文本)</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">  ul: 标签节点 class=&quot;box&quot;: 属性节点</span><br><span class="line">  <span class="comment">&lt;!-- 这是一些测试 --&gt;</span></span><br><span class="line">  注释节点</span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  测试:文本节点</span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>元素 <code>element</code></strong> : 网页中的<strong>标签节点</strong></li>
</ul>
<h2 id="获取元素的方法"><a href="#获取元素的方法" class="headerlink" title="获取元素的方法"></a>获取元素的方法</h2><ul>
<li><strong>document.getElementById()</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过id 获取元素</span></span><br><span class="line"><span class="comment">// 参数 : 字符串类型的id</span></span><br><span class="line"><span class="comment">// 返回值 : 一个元素（dom对象）</span></span><br><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.dir(div) <span class="comment">// 以对象的形式显示</span></span><br><span class="line"><span class="built_in">console</span>.log(div) <span class="comment">// 以内容的形式显示</span></span><br></pre></td></tr></table></figure>

<p>​ <strong>关于<code>console.log()</code>和<code>console.dir()</code>的区别</strong></p>
<p>​ <code>console.log()</code> ：打印一个元素的时候，是以标签的形式进行展示的</p>
<p>​ <code>console.dir()</code> ：打印一个元素的时候，是以对象的形式进行展示的</p>
<ul>
<li><strong>getElementsByClassName()</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过类名获取元素</span></span><br><span class="line"><span class="comment">// 参数：字符串类型的类名</span></span><br><span class="line"><span class="comment">// 返回值：伪数组</span></span><br><span class="line"><span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;class&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>getElementsByTagName()</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过标签名获取元素</span></span><br><span class="line"><span class="comment">// 参数：标签名字符串</span></span><br><span class="line"><span class="comment">// 返回值：伪数组</span></span><br><span class="line"><span class="keyword">var</span> ps = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;p&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>getElementsByName()</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过name属性值获取元素</span></span><br><span class="line"><span class="comment">// 参数 : name值</span></span><br><span class="line"><span class="comment">// 返回值 : 伪数组</span></span><br><span class="line"><span class="keyword">var</span> ps = <span class="built_in">document</span>.getElementsByName(<span class="string">&#x27;aa&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>querySelector()</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 根据css选择器获取元素 (重点)</span></span><br><span class="line"><span class="comment">// 参数：是一个css选择器</span></span><br><span class="line"><span class="comment">// 返回值：只会返回一个对象，如果有很多个，会返回第一个</span></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">&#x27;#box&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>querySelectorAll()</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 根据css选择器获取元素 (重点)</span></span><br><span class="line"><span class="comment">// 参数：是一个css选择器</span></span><br><span class="line"><span class="comment">// 返回值：伪数组</span></span><br><span class="line"><span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.box&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>注意事项</strong></p>
<ul>
<li><p><code>getElementById()</code> 只能由 <code>document</code> 调用，如果通过其他元素调用会报错，其他方法可由已经获取到的 dom 对象调用</p>
</li>
<li><p><code>querySelector</code>和 <code>getElementById</code>如果获取不到元素会返回 null；<code>getElementsByClassName</code> 、<code>getElementsByTagName</code> 、<code>getElementsByName</code> 、<code>querySelectorAll</code> 如果没有获取到元素也会返回一个伪数组，只不过伪数组长度为 0</p>
</li>
<li><p>伪数组不是数组，不能使用属性的方法，但是可以跟数组一样进行遍历和使用下标进行操作；伪数组不能直接注册事件，需要遍历后拿到标签再注册事件</p>
</li>
<li><p>在 DOM 中, 获取元素操作需要写在 html 内容的后面，保证页面加载完成之后才能获取到内容</p>
</li>
</ul>
<h2 id="事件学习"><a href="#事件学习" class="headerlink" title="事件学习"></a>事件学习</h2><h3 id="认识事件"><a href="#认识事件" class="headerlink" title="认识事件"></a>认识事件</h3><blockquote>
<p>事件：理解为浏览器的感知系统 , 触发 –&gt; 响应机制，javascript 是基于事件驱动的</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 点击事件</span></span><br><span class="line"><span class="comment">// 结构 : 事件源.onclick = function () &#123;..&#125;</span></span><br></pre></td></tr></table></figure>

<p>事件三要素 : 事件源 + 事件名称 + 事件处理函数</p>
<ul>
<li>事件源 : 给谁注册事件 ( 按钮 btn )</li>
<li>事件名称 : 注册了什么事件 ( click 事件 )</li>
<li>事件处理函数 : 事件触发后要执行的代码(函数形式)</li>
</ul>
<p>注意：事件处理函数并不会立马执行，而是当事件触发的时候才会执行（浏览器会自动调用）</p>
<p>注册事件的基本语法 :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;box&#x27;</span>)</span><br><span class="line"><span class="comment">//on:当  click:点击   当按钮被点击的时候触发</span></span><br><span class="line">box.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;代码会在box被点击后执行&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>两种按钮</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>点亮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;哈&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">都是可点击的普通按钮，一个是文字显示在标签内容里, 而且还可以放其他标签，一个是文字显示在vaue中</span><br></pre></td></tr></table></figure>

<h3 id="焦点事件"><a href="#焦点事件" class="headerlink" title="焦点事件"></a>焦点事件</h3><ul>
<li><code>focus</code> : 获得焦点</li>
<li><code>blur</code> : 失去焦点</li>
</ul>
<h3 id="鼠标事件"><a href="#鼠标事件" class="headerlink" title="鼠标事件"></a>鼠标事件</h3><ul>
<li><code>click</code> : 单击</li>
<li><code>dblclick</code> ：双击</li>
<li><code>mouseover/mouseout</code> : 进入/离开元素</li>
<li><code>mouseenter/mouseleave</code> : 进入/离开元素</li>
<li><code>mousedown</code> ：按下</li>
<li><code>mouseup</code> ：抬起/释放</li>
<li><code>mousemove</code> ：移动</li>
</ul>
<h3 id="键盘事件"><a href="#键盘事件" class="headerlink" title="键盘事件"></a>键盘事件</h3><ul>
<li><code>keydown/keypress</code> ：按下</li>
<li><code>keyup</code>： 释放</li>
</ul>
<h3 id="事件中的-this"><a href="#事件中的-this" class="headerlink" title="事件中的 this"></a>事件中的 this</h3><blockquote>
<p>this 指向注册事件的事件源</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn&#x27;</span>)</span><br><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 给 btn 注册的事件，因此 this 表示 btn</span></span><br><span class="line">  <span class="built_in">this</span>.value = <span class="string">&#x27;哈哈&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1. 给多个按钮注册点击事件，点击的那个变成红色 --&gt;</span></span><br><span class="line">.red &#123; background: red &#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="comment">// 给多个按钮注册点击事件，点击的那个变成红色，其他的恢复默认</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> btns = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;button&#x27;</span>)</span></span><br><span class="line"><span class="javascript">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; btns.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">    btns[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// console.log(i) // 点击按钮时打印 2</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// btns[i].className = &#x27;red&#x27; // 此时 i = 2，报错</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; btns.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">        btns[i].className = <span class="string">&#x27;&#x27;</span> <span class="comment">// 恢复默认样式 ，排他思想</span></span></span><br><span class="line">      &#125;</span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.className = <span class="string">&#x27;red&#x27;</span> <span class="comment">// 给自己添加样式</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// 2. 点击按钮，显示对应的图片 1-6</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;第一张&quot;</span> <span class="attr">title</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;img&quot;</span> <span class="attr">src</span>=<span class="string">&quot;images/1.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="阻止浏览器默认行为"><a href="#阻止浏览器默认行为" class="headerlink" title="阻止浏览器默认行为"></a>阻止浏览器默认行为</h2><blockquote>
<p>对于 a 标签来说，默认的行为就是进行页面跳转，如果不想让 a 标签进行跳转，可以在注册事件中使用<code>return false</code></p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://www.baidu.com&quot;</span>&gt;</span>这是a<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> link = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;link&#x27;</span>)</span></span><br><span class="line"><span class="javascript">  link.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    alert(<span class="string">&#x27;呵呵&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 阻止页面跳转</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> <span class="literal">false</span></span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>e.preventDefault() 只会阻止浏览器的默认行为，并不会停止函数执行</li>
<li>return false 后的代码不在执行</li>
<li>在 jQuery 中，<code>return false</code>在调用时会执行 3 个单独的操作：</li>
<li><code>event.preventDefault()</code></li>
<li><code>event.stopPropagation()</code></li>
<li>停止回调执行并在调用时立即返回</li>
</ol>
<h2 id="属性操作"><a href="#属性操作" class="headerlink" title="属性操作"></a>属性操作</h2><ul>
<li>在 DOM 中，页面标签的属性和 DOM 对象的属性是一一对应的，因此我们可以通过修改 DOM 对象的属性来修改标签的属性</li>
</ul>
<h3 id="普通标签属性"><a href="#普通标签属性" class="headerlink" title="普通标签属性"></a>普通标签属性</h3><ul>
<li><p>常见的属性有：src、title、src、href、class、id 等</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在 js 中 class 是关键字，因此对应的是 className 属性</span></span><br><span class="line">div.className = <span class="string">&#x27;hg&#x27;</span> <span class="comment">// 修改类名会把原类名直接覆盖掉</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="表单属性操作"><a href="#表单属性操作" class="headerlink" title="表单属性操作"></a>表单属性操作</h3><ul>
<li>常见的表单属性有：disabled、type、value、checked、selected</li>
<li>对于 disabled、checked、selected 三个属性来说，比较特殊。在 DOM 对象中，这些属性是一个布尔类型的属性，值只有 true 或者 false</li>
</ul>
<p>!&gt; reset() 方法可把表单中的元素重置为它们的默认值</p>
<p>【案例：禁用文本框】</p>
<p>【案例：随机下拉框选中】</p>
<p>【案例：表格全选案例】</p>
<h3 id="标签的自定义属性"><a href="#标签的自定义属性" class="headerlink" title="标签的自定义属性"></a>标签的自定义属性</h3><blockquote>
<p>我们之前讨论的属性，都是 HTML 规范中，标签本来就有的属性，对于标签自定义的一些属性，比较特殊</p>
</blockquote>
<p>在 html 页面中，定义一个自定义属性</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span> <span class="attr">aa</span>=<span class="string">&quot;bb&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在对应的 DOM 对象中是不存在的，在 DOM 对象中只会存在固定的那些属性</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;box&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(box.aa) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<p><strong>attribute 方法</strong></p>
<blockquote>
<p>attribute 系列方法用于设置标签的属性，不管是自定义的还是固有的属性</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取标签的属性</span></span><br><span class="line">box.getAttribute(属性名)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置标签的属性</span></span><br><span class="line">box.setAttribute(属性名, 属性值)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移除标签的属性</span></span><br><span class="line">box.removeAttribute(属性名)</span><br></pre></td></tr></table></figure>

<p>区别 :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &lt;div a=&quot;1&quot; id=&quot;box&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 直接给标签里只能添加固有的属性 title 等 标签+对象里都有显示</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 给标签添加自定义属性--标签上显示</span></span><br><span class="line"><span class="built_in">console</span>.log(box.a) <span class="comment">// undefined =&gt; 对象中不显示</span></span><br><span class="line"><span class="built_in">console</span>.log(box.getAttribute(<span class="string">&#x27;a&#x27;</span>)) <span class="comment">// 1 =&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 给对象添加自定义属性 -- 标签中不显示</span></span><br><span class="line">box.b = <span class="number">2</span></span><br><span class="line"><span class="built_in">console</span>.log(box.b) <span class="comment">// 2 =&gt; 对象中显示</span></span><br><span class="line"><span class="built_in">console</span>.log(box.getAttribute(<span class="string">&#x27;b&#x27;</span>)) <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. Attribute方法</span></span><br><span class="line">box.setAttribute(<span class="string">&#x27;c&#x27;</span>, <span class="number">3</span>) <span class="comment">// 标签中显示</span></span><br><span class="line"><span class="built_in">console</span>.dir(box)</span><br><span class="line"><span class="built_in">console</span>.log(box.c) <span class="comment">// undefined =&gt;对象中不显示</span></span><br><span class="line"><span class="built_in">console</span>.log(box.getAttribute(<span class="string">&#x27;c&#x27;</span>)) <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(box.attributes) <span class="comment">// &#123;0: a, 1: id, 2: c, a: a, id: id, c: c, length: 3&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(box.attributes.c) <span class="comment">// c=&#x27;3&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="tab-栏案例-重点"><a href="#tab-栏案例-重点" class="headerlink" title="tab 栏案例 (重点)"></a>tab 栏案例 (重点)</h3><p><strong>[案例：获取当前元素的索引]</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 方式1：</span></span><br><span class="line"><span class="comment">// 存</span></span><br><span class="line">btns[i].setAttribute(<span class="string">&#x27;index&#x27;</span>, i)</span><br><span class="line"><span class="comment">// 取</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.getAttribute(<span class="string">&#x27;index&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式2：</span></span><br><span class="line"><span class="comment">// 存</span></span><br><span class="line">btns[i].index = i</span><br><span class="line"><span class="comment">// 取</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.index)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 区别在于: 第一个显示在标签内  第二个不显示在标签内 推荐第二种</span></span><br></pre></td></tr></table></figure>

<p><strong>【案例：tab 栏切换】</strong></p>
<h2 id="标签的内容属性"><a href="#标签的内容属性" class="headerlink" title="标签的内容属性"></a>标签的内容属性</h2><h3 id="innerText-和-innerHTML"><a href="#innerText-和-innerHTML" class="headerlink" title="innerText 和 innerHTML"></a>innerText 和 innerHTML</h3><ul>
<li>共同点 : 都是用来获取和设置标签的内容的</li>
<li>区别：<ul>
<li>innerHTML 能够识别标签，标签能够生效</li>
<li>innerText 只识别文本，标签会被转义</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line"><span class="comment">// 获取内容</span></span><br><span class="line"><span class="comment">// 获取标签内容的时候，只会获取文本，标签扔掉了</span></span><br><span class="line"><span class="built_in">console</span>.log(div.innerText) <span class="comment">// 哈哈</span></span><br><span class="line"><span class="comment">// 获取标签内容的时候，不管标签还是文本，都能获取到</span></span><br><span class="line"><span class="built_in">console</span>.log(div.innerHTML) <span class="comment">// &lt;h1&gt;哈哈&lt;/h1&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置内容</span></span><br><span class="line"><span class="comment">// 设置标签内容的时候，覆盖原来内容，对标签进行转义</span></span><br><span class="line">div.innerText = <span class="string">&#x27;&lt;h1&gt;嘿嘿&lt;/h1&gt;&#x27;</span></span><br><span class="line"><span class="comment">// 设置内容的时候，覆盖原来内容，标签也能生效，浏览器能解析这个标签</span></span><br><span class="line">div.innerHTML = <span class="string">&#x27;&lt;h1&gt;嘿嘿&lt;/h1&gt;&#x27;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>浏览器兼容性：指网页在各种浏览器上的显示效果不一致。或者是一些属性和方法在低版本的浏览器中不支持</p>
</blockquote>
<ul>
<li>innerText 是 IE 提出来的属性，因此低版本的火狐浏览器不支持这个属性。</li>
<li>火狐有一个 textContent 属性，效果跟 innerText 一样，但是 IE678 不支持这个属性</li>
</ul>
<p>书写 innerText 的兼容性代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInnerText</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> element.innerText === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> element.innerText</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> element.textContent</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="行内样式操作（style-属性）"><a href="#行内样式操作（style-属性）" class="headerlink" title="行内样式操作（style 属性）"></a>行内样式操作（style 属性）</h2><blockquote>
<p>标签不仅可以通过 class 属性操作样式 (嵌套样式)，还可以通过 style 属性操作样式 (行内样式)。</p>
<p>同样的 DOM 对象可以通过 className 操作样式 (嵌套样式)，也可以通过 style 属性操作样 (行内样式)。</p>
<p>css : 嵌套样式 =&gt; js : 类名 div.className = ‘red’</p>
<p>css : 行内样式 =&gt; js : style 对象 div.style.color = ‘red’</p>
</blockquote>
<h3 id="样式属性"><a href="#样式属性" class="headerlink" title="样式属性"></a>样式属性</h3><ul>
<li>style 属性是一个对象，里面存储了所有行内样式的键值对</li>
<li>style 属性只能获取和设置<strong>行内样式</strong>，嵌套样式通过 style 获取不到</li>
<li>如果样式的名字带 <code>-</code> ，比如 background-color ，在 style 对象中使用 backgroundColor =&gt; （因为 <code>-</code> 在 js 中不是一个合法的标识符）</li>
<li>style 设置的样式是行内样式，优先级要高于通过 className 设置的样式</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;color:red;background-color:blue;&quot;</span>&gt;</span>哈哈<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line"><span class="comment">// 获取样式</span></span><br><span class="line"><span class="built_in">console</span>.log(div.style)</span><br><span class="line"><span class="built_in">console</span>.log(div.style.color) <span class="comment">// red</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置样式</span></span><br><span class="line">div.style.width = <span class="string">&#x27;200px&#x27;</span></span><br><span class="line">div.style.height = <span class="string">&#x27;200px&#x27;</span></span><br><span class="line">div.style.fontSize = <span class="string">&#x27;100px&#x27;</span></span><br><span class="line">div.className = <span class="string">&#x27;box&#x27;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>getComputedStyle 获取元素计算后的样式</strong></p>
<p>语法： <code>window.getComputedStyle( 获取的元素， 伪类)</code></p>
<p>​ 伪类 ==&gt; ::after ::before，如果写上了伪类，表示要获取元素的伪类的样式，如果不需要获取的话，该参数写 null</p>
<p>​ 返回值： 返回一个样式对象</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line"><span class="comment">// 获取元素自身的</span></span><br><span class="line"><span class="keyword">var</span> ret = <span class="built_in">window</span>.getComputedStyle(div, <span class="literal">null</span>).fontSize</span><br><span class="line"><span class="keyword">var</span> ret1 = <span class="built_in">window</span>.getComputedStyle(div, <span class="literal">null</span>).backgroundColor</span><br><span class="line"><span class="comment">// 推荐：对于复合样式，需要获取什么样式，写具体的样式名，这样能更好的兼容更多浏览器</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取伪类的</span></span><br><span class="line"><span class="keyword">var</span> ret2 = <span class="built_in">window</span>.getComputedStyle(div, <span class="string">&#x27;::after&#x27;</span>).width</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="关于-body-的样式操作"><a href="#关于-body-的样式操作" class="headerlink" title="关于 body 的样式操作"></a>关于 body 的样式操作</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bd = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;body&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(bd) <span class="comment">// 通过 querySelector 获取 body 元素</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.body) <span class="comment">// 直接获取 body 元素</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.documentElement <span class="comment">// 可以获取 html 元素</span></span><br><span class="line"><span class="built_in">document</span>.head <span class="comment">// 直接获取 head 元素</span></span><br><span class="line"><span class="built_in">document</span>.title <span class="comment">// 获取的是 title 中的文本</span></span><br></pre></td></tr></table></figure>

<p><strong>【案例：开关灯案例】</strong></p>
<p><strong>【案例：随机背景颜色案例】</strong></p>
<p><strong>【案例：百度换肤】</strong></p>
<h3 id="关于-cssText-了解"><a href="#关于-cssText-了解" class="headerlink" title="关于 cssText (了解)"></a>关于 cssText (了解)</h3><blockquote>
<p>使用 cssText 可以设置 style 的属性值</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 100px; height: 100px&quot;</span>&gt;</span>哈哈哈<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="comment">// 优点：可以一次性设置多个值</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 缺点：会覆盖整个style属性且不利于阅读</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> div = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;div&#x27;</span>)</span></span><br><span class="line"><span class="javascript">  div.style.cssText = <span class="string">&#x27;background:red;color:yellow&#x27;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="节点操作-超级重要"><a href="#节点操作-超级重要" class="headerlink" title="节点操作 (超级重要)"></a>节点操作 (超级重要)</h2><h3 id="节点属性-了解"><a href="#节点属性-了解" class="headerlink" title="节点属性 (了解)"></a>节点属性 (了解)</h3><p><strong>节点分类：</strong></p>
<p>​ 元素节点、文本节点、属性节点、注释节点</p>
<p><strong>节点常用的属性</strong></p>
<ul>
<li><p>childNodes : 获取所有的子节点</p>
</li>
<li><p><strong>nodeType</strong>:  节点类型：元素节点 = 1 属性-2(过时) 注释-8 文本-3</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeType">nodeType 链接-MDN</a></p>
</li>
<li><p><strong>nodeName</strong>: 节点名称</p>
</li>
<li><p><strong>nodeValue</strong>: 节点值</p>
</li>
</ul>
<h3 id="节点查找-重点"><a href="#节点查找-重点" class="headerlink" title="节点查找 (重点)"></a>节点查找 (重点)</h3><h4 id="孩子节点"><a href="#孩子节点" class="headerlink" title="孩子节点"></a>孩子节点</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 下面是li --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>导航1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>导航2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>导航3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>导航4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> ul = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;ul&#x27;</span>)</span></span><br><span class="line"><span class="javascript">  <span class="comment">// 获取ul所有的子节点（包括了元素节点和其他很多类型的节点，基本不常用）</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(ul.childNodes)</span></span><br><span class="line"><span class="javascript">  <span class="comment">// 获取第一个子节点  (不常用)</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(ul.firstChild)</span></span><br><span class="line"><span class="javascript">  <span class="comment">// 获取最后一个子节点  (不常用)</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(ul.lastChild)</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="comment">// 获取所有的子元素，兼容性：IE678会把注释节点算上</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(ul.children)</span></span><br><span class="line"><span class="javascript">  <span class="comment">// 获取第一个子元素 有兼容性问题（IE678）</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(ul.firstElementChild)</span></span><br><span class="line"><span class="javascript">  <span class="comment">// 获取最后一个子元素 有兼容性问题（IE678）</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(ul.lastElementChild)</span></span><br><span class="line"><span class="javascript">  <span class="comment">// 获取第n个子元素 有兼容性问题（IE678）</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(ul.children[n])</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="兄弟节点"><a href="#兄弟节点" class="headerlink" title="兄弟节点"></a>兄弟节点</h4><ul>
<li><code>nextSibling</code> : 下一个兄弟节点 (基本不常用)</li>
<li><code>nextElementSibling</code> : 下一个兄弟元素（IE678 不兼容）</li>
<li><code>previousSibling</code> : 上一个兄弟节点 (基本不常用)</li>
<li><code>previousElementSibling</code> : 上一个兄弟元素 有兼容性问题 可以封装一个兼容性方法</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>导航1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p&quot;</span>&gt;</span>导航2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>导航3<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> p2 = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.p&#x27;</span>)</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(p2)</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(p2.nextSibling)</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(p2.nextElementSibling)</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(p2.previousSibling)</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(p2.previousElementSibling)</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>【案例 1：表单校验】</strong></p>
<h4 id="父亲节点"><a href="#父亲节点" class="headerlink" title="父亲节点"></a>父亲节点</h4><ul>
<li><code>parentNode</code> : 父节点（没有兼容性问题）</li>
<li><code>parentElement</code> : 父元素</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">div.parentNode &#x2F;&#x2F; 获取父节点</span><br></pre></td></tr></table></figure>

<h3 id="添加节点-重点"><a href="#添加节点-重点" class="headerlink" title="添加节点 (重点)"></a>添加节点 (重点)</h3><h4 id="appendChild"><a href="#appendChild" class="headerlink" title="appendChild()"></a>appendChild()</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 作用：在子元素的最后添加一个元素</span></span><br><span class="line"><span class="comment">// 语法：parent.appendChild(newChild)</span></span><br><span class="line"><span class="comment">// 父元素.appendChild(新子元素)</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>注意</strong> : 如果 newChild 已经存在于 DOM 树中，则它会被从原始位置删除</p>
</blockquote>
<h3 id="insertBefore"><a href="#insertBefore" class="headerlink" title="insertBefore()"></a>insertBefore()</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 作用：在某个子元素之前添加一个元素</span></span><br><span class="line"><span class="comment">// 语法：parent.insertBefore(newChild, refChild)</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>必须要父节点来调用，newChild 为需要添加的那个节点，refChild 为添加到哪一个节点的前面</li>
<li>没有 <code>insertAfter()</code></li>
</ol>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 将元素添加到最后</span></span><br><span class="line">div.appendChild(p) <span class="comment">// (常用)</span></span><br><span class="line">div.insertBefore(p, <span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将元素添加到 s1 之前(常用)</span></span><br><span class="line">div.insertBefore(p, s1)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将元素添加到 s1 之后</span></span><br><span class="line"><span class="comment">// 没有 insertAfter</span></span><br><span class="line">div.insertBefore(p, s1.nextElementSibling)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将元素添加到最前</span></span><br><span class="line">div.insertBefore(p, div.children[<span class="number">0</span>]) <span class="comment">// (常用)</span></span><br><span class="line">div.insertBefore(p, div.firstElementChild)</span><br></pre></td></tr></table></figure>

<h3 id="克隆节点-重点"><a href="#克隆节点-重点" class="headerlink" title="克隆节点 (重点)"></a>克隆节点 (重点)</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法：var newNode = 节点.cloneNode([isDeep])</span></span><br><span class="line"><span class="comment">// isDeep参数：false / true</span></span><br><span class="line"><span class="comment">// false：默认值：是浅复制，只会复制标签节点本身，不会复制节点的孩子</span></span><br><span class="line"><span class="comment">// true:   深度复制，会复制标签，还会复制标签的所有内容</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>克隆出来的节点跟原来的节点没有关系了，修改了也不会相互影响</li>
<li>如果克隆的节点带了 id，我们需要给 id 重新设置一个值，不让 id 冲突</li>
</ol>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> newNode = div.cloneNode(<span class="literal">true</span>)</span><br><span class="line"><span class="built_in">console</span>.log(newNode)</span><br></pre></td></tr></table></figure>

<h3 id="创建节点-3-种方式-重点"><a href="#创建节点-3-种方式-重点" class="headerlink" title="创建节点(3 种方式) (重点)"></a>创建节点(3 种方式) (重点)</h3><h4 id="document-write（基本不用）"><a href="#document-write（基本不用）" class="headerlink" title="document.write（基本不用）"></a>document.write（基本不用）</h4><p>可以生成新的节点，但是不推荐使用。如果页面已经加载完成了，再用 document.write 写内容的话，会把之前的页面给覆盖掉</p>
<blockquote>
<p>原理：页面从上往下加载的时候，会开启一个文档流，当页面加载完，文档流就会关闭。document.write 的本意就是在文档流上写入内容。如果页面没加载完成，文档流还是开着的，document.write 直接在这个文档流上写东西，如果页面加载完成了，还是用 document.write 写东西，会重新开启一个新的文档流，往新的文档流上写东西，旧的文档流就被新的文档流覆盖了。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">document</span>.write(<span class="string">&#x27;呵呵&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="innerHTML-偶尔用"><a href="#innerHTML-偶尔用" class="headerlink" title="innerHTML (偶尔用)"></a>innerHTML (偶尔用)</h4><p>innerHTML 也可以创建节点</p>
<blockquote>
<p>使用 innerHTML 创建节点时，如果原来有内容的话，会把原先的内容覆盖</p>
<p>慎用：很容易出现效率问题</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">div.innerHTML = <span class="string">&#x27;&lt;h1&gt;哈哈&lt;/h1&gt;&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="createElement-常用"><a href="#createElement-常用" class="headerlink" title="createElement (常用)"></a>createElement (常用)</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法：var element = document.createElement(&#x27;tagName&#x27;)</span></span><br><span class="line"><span class="comment">// 返回：一个元素</span></span><br><span class="line"><span class="comment">// 需要配合 appendChild 和 innerText 来使用</span></span><br><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> h1 = <span class="built_in">document</span>.createElement(<span class="string">&#x27;h1&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(h1)</span><br><span class="line">h1.style.background = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">h1.innerText = <span class="string">&#x27;哈&#x27;</span></span><br><span class="line">div.appendChild(h1)</span><br></pre></td></tr></table></figure>

<h3 id="删除节点-重点"><a href="#删除节点-重点" class="headerlink" title="删除节点 (重点)"></a>删除节点 (重点)</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法：parent.removeChild(child)</span></span><br><span class="line"><span class="comment">// 解析：父元素.removeChild(子元素)</span></span><br><span class="line"><span class="comment">// 功能：由父元素调用，删除里面的一个子元素</span></span><br><span class="line"></span><br><span class="line">div.removeChild(p)</span><br><span class="line">p.parentNode.removeChild(p)</span><br></pre></td></tr></table></figure>

<p><strong>【案例 : 节点操作-删除节点】</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> 使用 children 和 TagName  =&gt;  需要配合 i--</span><br><span class="line"><span class="comment">// 原因 :动态计算 , 每删除一个,都会重新分配一次下标</span></span><br><span class="line"><span class="number">2.</span> 使用 querySelectorAll(<span class="string">&#x27;li&#x27;</span>) =&gt;  ok的</span><br><span class="line"><span class="comment">// 原因 : 静态计算</span></span><br></pre></td></tr></table></figure>

<p><strong>[案例 : 许愿墙案例]</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">功能<span class="number">1</span>: 克隆<span class="number">10</span>个tip, 并且随机分布</span><br><span class="line">功能<span class="number">2</span>: 点击提高层级</span><br><span class="line">功能<span class="number">3</span>: 点击x, 删除当前tip</span><br><span class="line">功能<span class="number">4</span>: 双击tip头部, 删除当前tip</span><br></pre></td></tr></table></figure>

<h3 id="替换节点"><a href="#替换节点" class="headerlink" title="替换节点"></a>替换节点</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法：</span></span><br><span class="line"><span class="comment">// newChild 为用来替换 oldChild 的新节点</span></span><br><span class="line">parentNode.replaceChild(newChild, oldChild)</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>注意</strong> : 如果 newChild 已经存在于 DOM 树中，则它会被从原始位置删除</p>
</blockquote>
<h3 id="节点操作综合案例"><a href="#节点操作综合案例" class="headerlink" title="节点操作综合案例"></a>节点操作综合案例</h3><p>【动态生成表格】</p>
<h1 id="BOM"><a href="#BOM" class="headerlink" title="BOM"></a>BOM</h1><blockquote>
<p>BOM（Browser Object Model）：浏览器对象模型，提供了一套操作浏览器功能的工具</p>
</blockquote>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102205413.png"></p>
<p><strong>重点</strong> ：定时器、 offset 系列</p>
<h2 id="window"><a href="#window" class="headerlink" title="window"></a><code>window</code></h2><ul>
<li>window 对象是一个全局对象，也可以说是 JavaScript 中的顶级对象</li>
<li>所有定义在全局作用域中的变量、函数都会变成 window 对象的属性和方法</li>
<li>像 document、alert()、console.log() 这些都是 window 的属性，其实 BOM 中基本所有的属性和方法都是 window 的</li>
<li>window 对象下的属性和方法调用的时候可以省略 window</li>
</ul>
<h3 id="onload（掌握）"><a href="#onload（掌握）" class="headerlink" title=".onload（掌握）"></a>.onload（掌握）</h3><blockquote>
<p>window.onload 事件会在 <strong>窗体加载完成</strong> 后执行，通常我们称之为入口函数。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//代码会在窗体加载完成后执行。</span></span><br><span class="line">  <span class="comment">//窗体加载完成 包括文档树(DOM html)的加载、还有图片、文件的加载完成。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果有图片加载，那么代码一定要写到 window.onload 里面，否则会出现图片没有加载完成，获取到的宽度和高度不对的情况。</p>
<p>浏览器会对页面的加载做优化，在加载图片的时候，图片的引入会延迟。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;img src=<span class="string">&quot;./01.png&quot;</span> alt=<span class="string">&quot;&quot;</span>&gt;</span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> img = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(img.width)</span><br><span class="line">  <span class="built_in">console</span>.log(img.height)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="open-与-close-了解"><a href="#open-与-close-了解" class="headerlink" title=".open() 与 .close() (了解)"></a>.open() 与 .close() (了解)</h3><ul>
<li>window.open() 打开一个窗口</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法：window.open(url, [name], [features])</span></span><br><span class="line"><span class="comment">// 参数1：需要载入的 url 地址</span></span><br><span class="line"><span class="comment">// 参数2：新窗口的名称或者 targt 属性</span></span><br><span class="line"><span class="comment">// _blank:如果指定为 _blank，表示在新的窗口打开</span></span><br><span class="line"><span class="comment">// 参数3：窗口的属性，指定窗口的大小</span></span><br><span class="line"><span class="comment">// 返回值：会返回刚刚创建的那个窗口，在 window.close() 时使用</span></span><br><span class="line"><span class="comment">// 示例：</span></span><br><span class="line"><span class="keyword">var</span> newWin = <span class="built_in">window</span>.open(<span class="string">&#x27;http://www.baidu.com&#x27;</span>, <span class="string">&#x27;_blank&#x27;</span>, <span class="string">&#x27;width=300,height=300&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数配置：https://developer.mozilla.org/zh-CN/docs/Web/API/Window/open</span></span><br></pre></td></tr></table></figure>

<ul>
<li>window.close() 关闭窗口</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">newWin.close() <span class="comment">// newWin 是刚刚创建的那个窗口</span></span><br><span class="line"><span class="built_in">window</span>.close() <span class="comment">// 把当前窗口给关闭</span></span><br></pre></td></tr></table></figure>

<h2 id="延时器与定时器-重点"><a href="#延时器与定时器-重点" class="headerlink" title="延时器与定时器 (重点)"></a>延时器与定时器 (重点)</h2><h3 id="setTimeout-延时器"><a href="#setTimeout-延时器" class="headerlink" title="setTimeout 延时器"></a>setTimeout 延时器</h3><blockquote>
<p>可以在延迟一定时间后执行指定的代码</p>
</blockquote>
<p><strong>设置延时器</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法: setTimeOut(callback,time)</span></span><br><span class="line"><span class="comment">// 参数1: 回调函数, 时间到了就会执行</span></span><br><span class="line"><span class="comment">// 参数2: 延时的时间  毫秒为单位 1s = 1000毫秒</span></span><br><span class="line"><span class="comment">// 返回 : 延时器的id,用于清除</span></span><br><span class="line"><span class="keyword">var</span> timer = setTimeOut(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//1秒后将执行一次</span></span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure>

<p><strong>清除延时器</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法 : clearTimeOut(timerId)</span></span><br><span class="line"><span class="comment">// 参数 : 延时器id</span></span><br><span class="line"><span class="comment">// 示例 :</span></span><br><span class="line">clearTimeOut(timer) <span class="comment">// 清除上面定义的延时器</span></span><br></pre></td></tr></table></figure>

<h3 id="setInterval-定时器"><a href="#setInterval-定时器" class="headerlink" title="setInterval 定时器"></a>setInterval 定时器</h3><blockquote>
<p>setInterval 方法重复调用一个函数或执行一个代码段，在每次调用之间具有固定的时间间隔。 (每隔一段时间执行一段代码)</p>
<p>定时器除非清除，否则会一直执行下去。</p>
</blockquote>
<p><strong>设置定时器</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法 :var timerId = setInterval(func,dealy)</span></span><br><span class="line"><span class="comment">// 参数1 ： 重复执行的函数</span></span><br><span class="line"><span class="comment">// 参数2 : 每次间隔的毫秒数</span></span><br><span class="line"><span class="comment">// 返回 : 定时器的id,  用于清除</span></span><br><span class="line"><span class="comment">// 示例 :</span></span><br><span class="line"><span class="keyword">var</span> timer = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 1s 之后开始重复执行</span></span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure>

<p><strong>清除定时器</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法 : clearInterval(intervalId)</span></span><br><span class="line"><span class="comment">// 参数 : 定时器id</span></span><br><span class="line"><span class="comment">// 示例 :</span></span><br><span class="line"><span class="built_in">clearInterval</span>(timerId) <span class="comment">// 清除上面的定时器</span></span><br></pre></td></tr></table></figure>

<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><p>【短信验证码案例.html】</p>
<h2 id="location-对象"><a href="#location-对象" class="headerlink" title="location 对象"></a>location 对象</h2><blockquote>
<p>location 对象也是 window 的一个属性</p>
<p>location 其实对应的就是浏览器中的地址栏</p>
</blockquote>
<h3 id="常用属性和方法"><a href="#常用属性和方法" class="headerlink" title="常用属性和方法"></a>常用属性和方法</h3><ul>
<li>location.href : 控制地址栏的地址，实现页面跳转</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  location.href = <span class="string">&#x27;http://www.baidu.com&#x27;</span> <span class="comment">// 点击页面跳转到百度首页</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>[案例 : 注册成功，3 秒后跳转]</p>
<blockquote>
<p><strong>页面跳转：</strong></p>
<p><code>location.href = &#39;url地址&#39;</code></p>
<p><code>location.assign(&#39;url地址&#39;)</code></p>
<p><code>location.replace(&#39;url地址&#39;)</code> (不记录历史)</p>
</blockquote>
<ul>
<li>location.reload() 让页面重新加载</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  location.reload() <span class="comment">// 重新刷新</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>location 的其他值</p>
<blockquote>
<p><code>http://www.bbb.com:8080/index.html?id=666&amp;psd=123#xxx</code></p>
<ul>
<li>location.hash //哈希值 其实就是锚点 ==&gt; #xxx</li>
<li>location.host //服务器 服务器名+端口号 =&gt; <a href="http://www.bbb.com:8080/">www.bbb.com:8080</a></li>
<li>location.hostname //服务器名 =&gt; <a href="http://www.bbb.com/">www.bbb.com</a></li>
<li>location.pathname //路径名 =&gt; index.html</li>
<li>location.port //端口 =&gt; 8080</li>
<li>location.protocol //协议 =&gt; http</li>
<li><strong>location.search</strong> //参数 =&gt; ?id=666&amp;psd=123</li>
</ul>
</blockquote>
</li>
</ul>
<h2 id="其他对象"><a href="#其他对象" class="headerlink" title="其他对象"></a>其他对象</h2><ul>
<li>history 对象表示页面的历史</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 随便打开一个网页 可以演示</span></span><br><span class="line"><span class="comment">// 后退：</span></span><br><span class="line">history.back()</span><br><span class="line">history.go(-<span class="number">1</span>)</span><br><span class="line"><span class="comment">// 前进：</span></span><br><span class="line">history.forward()</span><br><span class="line">history.go(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>screen 对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(screen.width) <span class="comment">// 屏幕的宽度</span></span><br><span class="line"><span class="built_in">console</span>.log(screen.height) <span class="comment">// 屏幕的高度</span></span><br><span class="line"><span class="built_in">console</span>.log(screen.availWidth) <span class="comment">// 浏览器可占用的宽度</span></span><br><span class="line"><span class="built_in">console</span>.log(screen.availHeight) <span class="comment">// 浏览器可占用的高度</span></span><br></pre></td></tr></table></figure>

<h2 id="缓动动画"><a href="#缓动动画" class="headerlink" title="缓动动画"></a>缓动动画</h2><h3 id="缓动动画初体验"><a href="#缓动动画初体验" class="headerlink" title="缓动动画初体验"></a>缓动动画初体验</h3><p>动画公式 :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> step = (target - current) / <span class="number">10</span></span><br><span class="line">current += step</span><br></pre></td></tr></table></figure>

<p>[案例演示 : ]</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. 三步走</span><br><span class="line">- 获取当前位置</span><br><span class="line">- 累加小碎步</span><br><span class="line">- 重复赋值回去</span><br><span class="line">2. 定时器</span><br></pre></td></tr></table></figure>

<p><strong>缺点</strong> : 打开控制台, 查看盒子的结构行内样式 left, 发现并没有跑到 400px, 只能跑到 396.4/395.5</p>
<p><strong>原因</strong> : offsetLeft 获取值的时候, 只会获取整数 , (对小数部分会四舍五入,整数有时候往上取整,有时候往下取整); <strong>可以在获取的 offset 地方打印查看</strong></p>
<h3 id="缓动动画-移动-400-位置"><a href="#缓动动画-移动-400-位置" class="headerlink" title="缓动动画 - 移动 400 位置"></a>缓动动画 - 移动 400 位置</h3><p>动画公式 :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> step = (target - current) / <span class="number">10</span></span><br><span class="line">step = <span class="built_in">Math</span>.ceil(step) <span class="comment">// 往上取整</span></span><br><span class="line">current += step</span><br><span class="line"></span><br><span class="line"><span class="comment">// 为什么往上取整 :</span></span><br><span class="line"><span class="comment">// 1. 如果不取整，赋值为小数的话,下次取值还是会取个 整数回来，这就是之前的缺点</span></span><br><span class="line"><span class="comment">// 2. 往上取整的额原因是：(400-395)/10 = 0.5 如果往下取整为0，那就不会走了，所以</span></span><br><span class="line"><span class="comment">// 为了保证可以走，往上取整 取 1  步数 为 1</span></span><br></pre></td></tr></table></figure>

<p>案例演示 注意点 :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>查看位置 : left有时候为 <span class="number">395.5</span>/ <span class="number">396.4</span></span><br><span class="line"><span class="number">2.</span>打印: <span class="function"><span class="params">offsetLeft</span>  =&gt;</span> <span class="number">395</span> / <span class="number">396</span></span><br><span class="line"><span class="number">3.</span>step为整数  往上取整</span><br></pre></td></tr></table></figure>

<h3 id="缓动动画-回到-0-点位置"><a href="#缓动动画-回到-0-点位置" class="headerlink" title="缓动动画 - 回到 0 点位置"></a>缓动动画 - 回到 0 点位置</h3><p>动画公式 :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> step = (target - current) / <span class="number">10</span></span><br><span class="line">step = <span class="built_in">Math</span>.floor(step) <span class="comment">//往下取整</span></span><br><span class="line">current += step</span><br><span class="line"></span><br><span class="line"><span class="comment">// 为什么往下取整 :</span></span><br><span class="line"><span class="comment">// 1. 如果不取整，赋值为小数的话,下次取值还是会取个整数回来，这就是之前的缺点</span></span><br><span class="line"><span class="comment">// 2. 往上取整的额原因是 : (0-5)/10 = -0.5 如果往上取整为0  那就不会走了，所以</span></span><br><span class="line"><span class="comment">// 为了保证可以走，往下取整 : 取 -1    步数 为 -1</span></span><br></pre></td></tr></table></figure>

<p>案例演示注意点 :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> 先把盒子 设置 left : 400px 位置;  回到<span class="number">0</span>位置</span><br><span class="line"><span class="number">2.</span> 查看位置 : left有时候为 <span class="number">4.5</span></span><br><span class="line"><span class="number">3.</span> 打印: <span class="function"><span class="params">offsetLeft</span>  =&gt;</span> <span class="number">5</span></span><br><span class="line"><span class="number">4.</span> step为整数  往下取整</span><br></pre></td></tr></table></figure>

<h3 id="缓动动画-封装函数"><a href="#缓动动画-封装函数" class="headerlink" title="缓动动画 - 封装函数"></a>缓动动画 - 封装函数</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animate</span>(<span class="params">element, target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (element.timerId) &#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(element.timerId)</span><br><span class="line">  &#125;</span><br><span class="line">  element.timerId = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 1. 获取当前位置</span></span><br><span class="line">    <span class="keyword">var</span> current = element.offsetLeft</span><br><span class="line">    <span class="comment">// 2. 累加小碎步</span></span><br><span class="line">    <span class="keyword">var</span> step = (target - current) / <span class="number">10</span></span><br><span class="line">    <span class="comment">// 往上取整 ? 为什么，因为 0.5 如果网下取整也是0 ，不会走</span></span><br><span class="line">    step = step &gt; <span class="number">0</span> ? <span class="built_in">Math</span>.ceil(step) : <span class="built_in">Math</span>.floor(step)</span><br><span class="line">    current += step <span class="comment">// 1</span></span><br><span class="line">    <span class="comment">// 3. 重新赋值</span></span><br><span class="line">    element.style.left = current + <span class="string">&#x27;px&#x27;</span> <span class="comment">//400</span></span><br><span class="line">    <span class="keyword">if</span> (current == target) &#123;</span><br><span class="line">      <span class="built_in">clearInterval</span>(element.timerId)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">15</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>[案例 : 筋斗云]</p>
<p>[案例：开机提示关闭]</p>
<h2 id="事件对象"><a href="#事件对象" class="headerlink" title="事件对象"></a>事件对象</h2><h3 id="事件对象的概述"><a href="#事件对象的概述" class="headerlink" title="事件对象的概述"></a>事件对象的概述</h3><blockquote>
<p>在<strong>触发某个事件</strong>的时候，都会产生一个<strong>事件对象 Event</strong>，这个对象中<strong>包含所有与事件相关的一些信息</strong>，包括触发事件的元素，事件的类型以及其他与事件相关的信息</p>
</blockquote>
<p><strong>鼠标</strong>事件<strong>触发</strong>时，事件对象中会包含<strong>鼠标的位置信息</strong>。</p>
<p><strong>键盘</strong>事件<strong>触发</strong>时，事件对象中会包含<strong>按下的键相关的信息</strong>。</p>
<h3 id="获取事件对象"><a href="#获取事件对象" class="headerlink" title="获取事件对象"></a>获取事件对象</h3><p><strong>现代浏览器获取 : (掌握)</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 给一个形参即可</span></span><br><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// e 就是事件对象，里面包含了事件触发时的一些信息</span></span><br><span class="line">  <span class="built_in">console</span>.log(e)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>低版本浏览器 (ie678): (了解)</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// IE678 通过 window.event 获取事件对象</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">window</span>.event)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>兼容性 :</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 只要用到了事件对象，就要记得处理浏览器兼容性</span></span><br><span class="line">  <span class="comment">// 低版本IE event 不存在为undefined</span></span><br><span class="line">  e = e || <span class="built_in">window</span>.event</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="事件对象的常用属性"><a href="#事件对象的常用属性" class="headerlink" title="事件对象的常用属性"></a>事件对象的常用属性</h3><blockquote>
<p>事件对象中有很多很多的属性，但是很多属性并不常用。我们经常用到的是<strong>鼠标位置信息</strong>和<strong>键盘码</strong>相关的信息</p>
</blockquote>
<h4 id="鼠标位置信息"><a href="#鼠标位置信息" class="headerlink" title="鼠标位置信息"></a>鼠标位置信息</h4><ul>
<li><code>clientX</code> 与 <code>clientY</code> ： 相对于<strong>浏览器可视区</strong>左上角的位置（不随滚动条滚动而改变）</li>
<li><code>pageX</code> 与 <code>pageY</code> ：相对于<strong>网页内容</strong>（文档 document）左上角的位置</li>
<li><code>screenX</code> 与 <code>screenY</code> ：相对于<strong>屏幕</strong>左上角的位置</li>
<li><code>offsetX</code> 与 <code>offsetY</code> ：鼠标相对于<strong>事件源</strong>左上角的位置</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.onmousemove = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(e.clientX, e.clientY)</span><br><span class="line">  <span class="built_in">console</span>.log(e.pageX, e.pageY)</span><br><span class="line">  <span class="built_in">console</span>.log(e.screenX, e.screenY)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102205438.png"></p>
<p><strong>[案例 : 拖拽案例]</strong></p>
<h4 id="键盘码"><a href="#键盘码" class="headerlink" title="键盘码"></a>键盘码</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 键盘按下的那个键的键盘码</span></span><br><span class="line">e.keyCode</span><br></pre></td></tr></table></figure>

<h3 id="注册事件的两种方式"><a href="#注册事件的两种方式" class="headerlink" title="注册事件的两种方式"></a>注册事件的两种方式</h3><h4 id="on-事件名称"><a href="#on-事件名称" class="headerlink" title="on + 事件名称"></a>on + 事件名称</h4><blockquote>
<p>onclick、onmouseover 这种 on+事件名称的方式注册事件几乎所有的浏览器都支持</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 注册事件</span></span><br><span class="line">box.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 事件处理程序</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 移除事件</span></span><br><span class="line">box.onclick = <span class="literal">null</span></span><br></pre></td></tr></table></figure>

<p>on+事件名称注册事件的缺点：同一个元素同一类型的事件，只能注册一个，如果注册了多个，会出现覆盖问题</p>
<h4 id="addEventListener"><a href="#addEventListener" class="headerlink" title="addEventListener"></a>addEventListener</h4><blockquote>
<p>现代浏览器支持的注册事件的新方式，这种方式注册的事件不会出现覆盖问题</p>
</blockquote>
<p><strong>addEventListener 的语法</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// type：事件的类型：click mouseover  字符串类型，不带 on</span></span><br><span class="line"><span class="comment">// fn：函数，每次点击，执行这个函数</span></span><br><span class="line"><span class="comment">// useCapture: 可选，true：事件在捕获阶段执行，false: 事件在冒泡阶段执行(默认)</span></span><br><span class="line">element.addEventListener(type, fn, useCapture)</span><br><span class="line">btn.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;哈哈&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>removeEventListen 的语法</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// type：事件的类型</span></span><br><span class="line"><span class="comment">// fn：要移除的那个函数</span></span><br><span class="line">element.removeEventListener(type, fn)</span><br><span class="line">btn.removeEventListener(<span class="string">&#x27;click&#x27;</span>, fn)</span><br><span class="line"><span class="comment">// 注意 : 如果想让注册的事件能移除，不能用匿名函数</span></span><br></pre></td></tr></table></figure>

<p>低版本浏览器兼容问题: (了解)</p>
<blockquote>
<p>IE678 不支持 addEventListener 与 removeEventListen 两个方法，但是支持 attachEvent 与 detachEvnet</p>
</blockquote>
<p>attachEvent 的用法：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// type: 事件类型，需要加上on</span></span><br><span class="line"><span class="comment">// fn: 需要执行的那个事件</span></span><br><span class="line">attachEvent(type, fn)</span><br><span class="line">btn.attachEvent(<span class="string">&#x27;onclick&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">&#x27;哈哈&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>detachEvent 的用法：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">detachEvent(type, fn)</span><br></pre></td></tr></table></figure>

<h4 id="兼容性封装（了解）"><a href="#兼容性封装（了解）" class="headerlink" title="兼容性封装（了解）"></a>兼容性封装（了解）</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 添加事件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addEvent</span>(<span class="params">element, type, fn</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 能力检测</span></span><br><span class="line">  <span class="keyword">if</span> (element.addEventListener) &#123;</span><br><span class="line">    element.addEventListener(type, fn)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.attachEvent) &#123;</span><br><span class="line">    element.attachEvent(<span class="string">&#x27;on&#x27;</span> + type, fn)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 如果都不行，那就用on方式</span></span><br><span class="line">    element[<span class="string">&#x27;on&#x27;</span> + type] = fn</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移除事件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeEvent</span>(<span class="params">element, type, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (element.removeEventListener) &#123;</span><br><span class="line">    element.removeEventListener(type, fn, <span class="literal">false</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.detachEvent) &#123;</span><br><span class="line">    element.detachEvent(<span class="string">&#x27;on&#x27;</span> + type, fn)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    element[<span class="string">&#x27;on&#x27;</span> + type] = <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="事件流"><a href="#事件流" class="headerlink" title="事件流"></a>事件流</h2><h3 id="事件冒泡"><a href="#事件冒泡" class="headerlink" title="事件冒泡"></a>事件冒泡</h3><p>当一个元素的事件被触发时，同样的事件将会在该元素的所有祖先元素中依次被触发。这一过程被称为冒泡</p>
<p>说白了就是：<strong>当我们触发了子元素的某个事件后，父元素对应的事件也会触发</strong></p>
<p>on 创建的事件默认为冒泡，无法修改</p>
<p><strong>[案例 : 弹窗案例]</strong></p>
<p><strong>阻止事件冒泡</strong> <code>e.stopPropagation()</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">box.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  e.stopPropagation()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数1：true =&gt; 捕获， false =&gt; 冒泡（默认）</span></span><br><span class="line">box.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;, 参数<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p><code>event.stopImmediatePropagation</code></p>
<p>阻止事件冒泡并且阻止相同事件的其他侦听器被调用<br>如果有多个相同类型事件的事件监听函数绑定到同一个元素，当该类型的事件触发时，它们会按照被添加的顺序执行。如果其中某个监听函数执行了 <code>event.stopImmediatePropagation()</code> 方法，则当前元素剩下的监听函数将不会被执行</p>
<p>阻止事件冒泡的兼容性封装</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stopPropagation</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (e &amp;&amp; e.stopPropagation) &#123;</span><br><span class="line">    e.stopPropagation() <span class="comment">// 标准浏览器</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.event.cancelBubble = <span class="literal">true</span> <span class="comment">// 兼容 IE</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="事件捕获"><a href="#事件捕获" class="headerlink" title="事件捕获"></a>事件捕获</h3><p>事件冒泡是 ie 提出来的</p>
<p>路径 : 触发事件的目标元素(son) &gt; you &gt; father &gt; body &gt; document</p>
<p>事件捕获是火狐提出来的</p>
<p>路径 : document &gt; body &gt; father &gt; you &gt; 触发事件的目标元素 (son)</p>
<p>解析 : 事件的处理将从 DOM 层次的根开始，而不是从触发事件的目标元素开始，事件被从目标元素的所有祖先元素依次往下传递</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 当 addEventListener 第三个参数为 true 时，表示事件捕获</span></span><br><span class="line">arr[i].addEventListener(</span><br><span class="line">  <span class="string">&#x27;click&#x27;</span>,</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">true</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="事件流的三个阶段"><a href="#事件流的三个阶段" class="headerlink" title="事件流的三个阶段"></a>事件流的三个阶段</h3><ol>
<li>事件的捕获阶段</li>
<li>事件的目标阶段（触发自己的事件）</li>
<li>事件的冒泡阶段</li>
</ol>
<p>事件有三个阶段 :</p>
<ul>
<li>捕获事件和冒泡事件都存在的话，首先发生的是捕获阶段，然后是目标阶段，最后才是冒泡阶段</li>
<li>addEventListener 第三个参数为是否捕获</li>
<li>如果为 true 时，表示该事件在捕获阶段发生</li>
<li>如果为 false 时，表示该事件在冒泡阶段发生</li>
<li>某一个事件只会执行一次</li>
</ul>
<h2 id="三大系列"><a href="#三大系列" class="headerlink" title="三大系列"></a>三大系列</h2><h3 id="offset-系列-重要"><a href="#offset-系列-重要" class="headerlink" title="offset 系列 (重要)"></a>offset 系列 (重要)</h3><blockquote>
<p>offset 系列用于用于<strong>获取元素自身的大小和位置</strong>，在 webapi 中有广泛应用<br>offset 系列主要有：offsetHeight、offsetWidth、offsetParent、offsetLeft、offsetTop</p>
</blockquote>
<p><strong>offsetHeight 与 offsetWidth</strong></p>
<ul>
<li>获取元素真实的高度和宽度 （内容大小 + border + padding）（关注盒子本身，不关注盒子内部内容）</li>
<li>获取到的是数值类型，方便计算</li>
<li>offsetHeight 与 offsetWidth 是只读属性，不能设置</li>
</ul>
<blockquote>
<p>style.height 与 style.width</p>
<ul>
<li>只能获取和设置行内样式</li>
<li>不包括内边距、边框和外边距</li>
<li>获取到的是字符串类型，需要转换</li>
</ul>
</blockquote>
<p><strong>offsetParent</strong></p>
<ul>
<li>获取离当前元素最近的<strong>定位父元素</strong>(absolute、relative)，如果没有，那就找 body</li>
</ul>
<blockquote>
<p>parentNode : 父节点（没有兼容性问题）</p>
<p>parentElement : 父元素</p>
</blockquote>
<p><strong>offsetLeft 与 offsetTop</strong></p>
<ul>
<li>获取元素自身与 offsetParent 真实的距离</li>
<li>获取到的是数值类型，方便计算</li>
<li>只读属性，只能获取，不能设置</li>
</ul>
<blockquote>
<p>style.left 与 style.top</p>
<ul>
<li>只能获取和设置行内样式</li>
<li>获取到的是字符串，需要转换</li>
</ul>
</blockquote>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102205502.png"></p>
<h3 id="scroll-系列"><a href="#scroll-系列" class="headerlink" title="scroll 系列"></a>scroll 系列</h3><blockquote>
<p>scroll 系列是用来获取<strong>盒子内容的大小和位置</strong></p>
<p>scroll 系列主要有 : scrollWidth、scrollHeight、scrollLeft、scrollTop</p>
</blockquote>
<p><strong>scrollWidth 与 scrollHeight</strong></p>
<ul>
<li>scrollWidth 与 scrollHeight 是盒子内容的宽度和高度。与盒子大小无关，仅仅与<strong>盒子的内容</strong>有关系（padding + 内容）</li>
<li>如果内容没有溢出，scrollHeight 就是盒子高度 (scrollWidth 同理) =&gt; 与 clientHeight、clientWidth 相同</li>
<li>如果内容超过盒子，scrollHieght 就是内容高度 (scrollWidth 同理)</li>
</ul>
<p><strong>scrollTop</strong></p>
<ul>
<li>scrollTop 用于获取内容垂直滚动的像素数。如果没有滚动条，那么 scrollTop 值是 0</li>
<li>内容超过盒子，盒子设置 overflow: scroll 就可出现滚动条</li>
<li>此属性是可读写的</li>
</ul>
<p><strong>scrollLeft</strong></p>
<ul>
<li>scrollLeft 用于获取内容水平滚动的像素数</li>
<li>此属性是可读写的</li>
<li>浏览器切忌这种出现水平滚动条，用户体验极差，避免</li>
</ul>
<p><strong>scrollX 与 scrollY</strong></p>
<ul>
<li><p>只读属性</p>
</li>
<li><p>scrollY：文档在垂直方向已滚动的像素值<br>pageYOffset 属性是 scrollY 属性的别名<br>为了跨浏览器兼容，请使用 window.pageYOffset 代替 window.scrollY</p>
</li>
</ul>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102205527.png"></p>
<p><strong>onscroll 事件</strong></p>
<p>对于有滚动条的盒子，可以使用 onscroll 注册滚动事件，每滚动一像素，就会触发该事件</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> div = doucment.getElementById(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">div.onscroll = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(div.scrollLeft)</span><br><span class="line">  <span class="built_in">console</span>.log(div.scrollTop)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>场景 : 获取页面被卷去的高度和宽度</strong></p>
<blockquote>
<p>通常来说，scroll 家族用的最多的地方就是用来获取页面 <strong>被卷去的高度</strong>，非常的常用</p>
</blockquote>
<ul>
<li>对于老式的浏览器，需要获取 html 或者 body 的 scrollTop</li>
<li>对于现在浏览器，使用 window.pageYOffset 进行获取</li>
</ul>
<p>页面被卷去的高度和宽度的兼容性封装</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 给整个页面注册滚动事件</span></span><br><span class="line"><span class="built_in">document</span>.onscroll = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> scrollTop = <span class="built_in">window</span>.pageYOffset || <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop || <span class="number">0</span></span><br><span class="line">  <span class="keyword">var</span> scrollLeft = <span class="built_in">window</span>.pageXOffset || <span class="built_in">document</span>.documentElement.scrollLeft || <span class="built_in">document</span>.body.scrollLeft || <span class="number">0</span></span><br><span class="line">  <span class="built_in">console</span>.log(scrollLeft, scrollTop)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>[案例 : 固定导航案例]</strong></p>
<h3 id="client-家族"><a href="#client-家族" class="headerlink" title="client 家族"></a>client 家族</h3><blockquote>
<p>clien t 家族用于获取盒子可视区的大小 (内容 + padding)</p>
<p>client 家族有 clientWidth、clientHeight、clientLeft、clientTop</p>
</blockquote>
<p><strong>clientWidth、clientHeight 可视区宽高</strong></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102205558.png"></p>
<p><strong>clientTop</strong> 与 <strong>clientLeft</strong> 完全没有用，他们就是 borderTop 与 borderLeft</p>
<p><strong>onresize 事件：onresize 事件会在窗口被调整大小的时候发生。</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.onresize = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 事件处理程序</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>场景 : client 系列一般用来获取页面的可视区宽高</strong></p>
<blockquote>
<p>低版本浏览器 : 获取的 html 和 body</p>
<p>高版本的浏览器 : window.innerWidth (掌握)（只读属性）</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 因为求的是窗口大小所以用 window</span></span><br><span class="line"><span class="built_in">window</span>.onresize = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> W = <span class="built_in">window</span>.innerWidth || <span class="built_in">document</span>.documentElement.clientWidth || <span class="built_in">document</span>.body.clientWidth</span><br><span class="line">  <span class="built_in">console</span>.log(W)</span><br><span class="line">  <span class="keyword">var</span> H = <span class="built_in">window</span>.innerHeight || <span class="built_in">document</span>.documentElement.clientHeight || <span class="built_in">document</span>.body.clientHeight</span><br><span class="line">  <span class="built_in">console</span>.log(H)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>webapi</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP</title>
    <url>/1663.html</url>
    <content><![CDATA[<h2 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h2><h3 id="什么是服务器？"><a href="#什么是服务器？" class="headerlink" title="什么是服务器？"></a>什么是服务器？</h3><blockquote>
<p>通过安装服务器软件，<strong>提供服务</strong> 的计算机</p>
</blockquote>
<p>服务器可以从硬件、软件(系统软件、应用软件)几个角度描述。</p>
<p>按硬件描述： 服务器就是一台超级计算机(配置很高)。<br>按操作系统划分： 在硬件上安装了什么操作系统，就可以称为该系统的服务器<br>​ 例如: linux 服务器、windows 服务器、unix 服务器等。<br>按软件划分： 在操作系统中安装了什么软件，就可以称作该软件的服务器 iis tomcat<br>​ 例如: <strong>web 服务器</strong>、数据库服务器、邮件服务器等。</p>
<h3 id="什么是-Web-服务器"><a href="#什么是-Web-服务器" class="headerlink" title="什么是 Web 服务器"></a>什么是 Web 服务器</h3><p>Web 服务器就是安装了 Web 服务软件，web 服务器的作用是能够提供网站服务的服务器。淘宝、京东、新浪等等</p>
<p>常见的 Web 软件：<br><strong>Apache</strong>、Nginx、IIS、Tomcat、Node 等。<br>Apache 服务器、Nginx 服务器、IIS 服务器、Tomcat 服务器、Node 服务器</p>
<p>Apache 是世界使用排名第一的 Web 服务器软件。我们将编写好的 html、css、js 等文件存入 apache，就能够通过网络来访问这些文件了</p>
<p>PS: web 服务器又叫做 http/httpd 服务器</p>
<h2 id="phpStudy-介绍"><a href="#phpStudy-介绍" class="headerlink" title="phpStudy 介绍"></a>phpStudy 介绍</h2><blockquote>
<p>phpStudy 是一个 PHP 调试环境的程序集成包</p>
<p>该程序包集成最新的 Apache+PHP+MySQL</p>
<p>安装 phpStudy，一定不能有中文，否则肯定启动不起来</p>
</blockquote>
<p>**注意: **将要访问的文件(html,php,img 等)，放到安装路径下的 <code>www</code> 目录下，通过浏览器就可以访问到了</p>
<h3 id="phpStudy-的错误解决"><a href="#phpStudy-的错误解决" class="headerlink" title="phpStudy 的错误解决"></a>phpStudy 的错误解决</h3><p>如果 phpStudy 启动发生错误，参数下列几点。</p>
<ul>
<li><p>一是防火墙拦截</p>
</li>
<li><p>二是 80 端口已经被别的程序占用，如 IIS 等</p>
</li>
<li><p>三是没有安装 VC9 运行库,php 和 apache 都是 VC9 编译</p>
</li>
</ul>
<h2 id="PHP-基础-重点"><a href="#PHP-基础-重点" class="headerlink" title="PHP 基础(重点)"></a>PHP 基础(重点)</h2><h3 id="PHP-简介"><a href="#PHP-简介" class="headerlink" title="PHP 简介"></a>PHP 简介</h3><p>PHP（外文名:PHP: Hypertext Preprocessor，中文名：“超文本预处理器”）是一种通用开源脚本语言。主要适用于 <strong>Web 领域的开发</strong> ，能够完成 <strong>动态网页</strong> 的制作</p>
<h3 id="PHP-特点"><a href="#PHP-特点" class="headerlink" title="PHP 特点"></a>PHP 特点</h3><ul>
<li>PHP 是目前最流行的网站开发语言（B/S 结构）之一</li>
<li>PHP 是一种在服务器端执行的嵌入 HTML 文档的脚本语言</li>
<li>支持几乎所有流行的 <strong>数据库</strong> 以及操作系统</li>
<li>源码开放、免费（free)</li>
<li>php 是世界上最好的语言</li>
</ul>
<h3 id="动态网站与静态网站-了解"><a href="#动态网站与静态网站-了解" class="headerlink" title="动态网站与静态网站(了解)"></a>动态网站与静态网站(了解)</h3><ul>
<li><p>静态网站：使用浏览器端语言进行编程，网站由静态代码（HTML,CSS,JS）组成。</p>
</li>
<li><p>动态网站  ：网页通过服务器的程序(php 等)动态生成。用户可以和服务器进行交互（可以根据用户输入的不同信息，返回不同的运行结果）</p>
</li>
</ul>
<p><strong>总结</strong></p>
<p>动态网站的 <strong>动</strong> 指的是网站 <strong>数据的动</strong> 而不是 <strong>视觉上的动</strong></p>
<h3 id="软件架构-了解"><a href="#软件架构-了解" class="headerlink" title="软件架构(了解)"></a>软件架构(了解)</h3><blockquote>
<p>软件架构可以分为 BS 架构与 CS 架构</p>
</blockquote>
<h4 id="C-S-架构"><a href="#C-S-架构" class="headerlink" title="C/S 架构"></a>C/S 架构</h4><p>Client/Server 架构，即客户端/服务器架构。需要安装对应的客户端软件，才能获取服务器的服务</p>
<p>常见的 CS 架构：QQ、LOL、微信等</p>
<p>特点：</p>
<ul>
<li><p>需要安装才能使用</p>
</li>
<li><p>性能高效，使用更加稳定和流畅</p>
</li>
</ul>
<h4 id="B-S-架构"><a href="#B-S-架构" class="headerlink" title="B/S 架构"></a>B/S 架构</h4><p>Broswer/Server 架构，即浏览器/服务器架构。随着 Internet 的兴起，无需安装专门客户端软件，通过浏览器去请求服务器</p>
<ul>
<li>不需要安装，只需要浏览器即可。</li>
<li>相比 CS 架构，性能相对较差，没有那么流畅和稳定</li>
</ul>
<h2 id="php-基本语法结构"><a href="#php-基本语法结构" class="headerlink" title="php 基本语法结构"></a>php 基本语法结构</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 避免使用中文目录和中文文件名</span></span><br><span class="line"><span class="comment">// 文件以.php后缀结尾，所有程序包含在<span class="meta">&lt;?php</span> 这里是代码 <span class="meta">?&gt;</span></span></span><br><span class="line"><span class="comment">// php页面无法直接打开需要运行在服务器环境当中</span></span><br><span class="line"><span class="comment">// 末尾必须加分号，不然就报错了（最后一行可以不加分号）</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>输出中文乱码问题：如果使用 echo 输出中文，可能会乱码</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="comment">// 解决中文乱码的问题</span></span><br><span class="line">  header(<span class="string">&quot;content-Type:text/html;charset=utf-8&quot;</span>); <span class="comment">// 返回HTML文档文本并设置编码集</span></span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;大家好，我是一名摄影工作者&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="PHP-运行原理"><a href="#PHP-运行原理" class="headerlink" title="PHP 运行原理"></a>PHP 运行原理</h2><h3 id="HTML-运行原理"><a href="#HTML-运行原理" class="headerlink" title="HTML 运行原理"></a>HTML 运行原理</h3><p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102205640.png"></p>
<ol>
<li>在浏览器的 URL 地址栏中输入 <a href="http://www.baidu.com/index.html">www.baidu.com/index.html</a> 地址，点回车。请求就发送给百度服务器。</li>
<li>百度服务器找到 index.html 文件，并将文件的内容返回给浏览器</li>
<li>浏览器接收到 index.html 中的内容，渲染到页面上。</li>
</ol>
<p>同理: localhost/a.html , 则会返回 本机 web 服务器根目录下 a.html 文件的内容。浏览器拿到内容后进行渲染。</p>
<h3 id="PHP-运行原理-1"><a href="#PHP-运行原理-1" class="headerlink" title="PHP 运行原理"></a>PHP 运行原理</h3><p>apache 不认识 php<br>浏览器也不认识 php</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102205658.png"></p>
<ol>
<li> 在浏览器地址栏中输入 localhost/index.php ,点回车之后。将请求发送给 apache 服务器</li>
<li> 服务器找到 index.php 文件之后，转发给 php 解释器</li>
<li> php 解释器将 index.php 文件中的 php 代码全部转为字符串，再返回给 apache</li>
<li> apache 将处理好的字符串返回给浏览器，浏览器渲染后就可以看到页面</li>
</ol>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><blockquote>
<p>php 是一门弱类型语法，变量的类型可以随意改变。<br>变量其实就是存储数据的容器</p>
</blockquote>
<p><strong>变量的命名规则</strong></p>
<ul>
<li>不需要关键字进行声明，变量在第一次赋值的时候被创建</li>
<li>必须以 <code>$</code> 符号开始</li>
<li><code>$</code> 后面的命名规则与 js 的变量命名规则一致</li>
</ul>
<h3 id="变量操作"><a href="#变量操作" class="headerlink" title="变量操作"></a>变量操作</h3><p><strong>声明变量</strong></p>
<p>声明变量的时候也一定要同时赋值,否则变量无法声明成功</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 变量在声明的时候一定要同时赋值,否则变量无法声明成功</span></span><br><span class="line"><span class="variable">$name</span> = <span class="string">&quot;呵呵&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$name</span>;</span><br></pre></td></tr></table></figure>

<p><strong>删除变量 unset()</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">unset</span>(<span class="variable">$name</span>); <span class="comment">// 销毁指定的变量</span></span><br></pre></td></tr></table></figure>

<p><strong>判断变量是否设置值 isset()</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">isset</span>(<span class="variable">$name</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="keyword">isset</span>(<span class="variable">$name</span>); <span class="comment">// 用 echo 打印，如果为 true 会打印出 1 ， 如果为 false 打印空</span></span><br><span class="line">var_dump(<span class="keyword">isset</span>(<span class="variable">$name</span>)); <span class="comment">// 会打印出 bool(true)/bool(false)</span></span><br></pre></td></tr></table></figure>

<p>变量未设置或者设置为 null，返回 false（认为变量没有设置），其余情况全部为 true。一般用来判断变量是否设置，因为变量未设置，无法直接使用。(变量先赋值，在使用！）</p>
<p><strong>判断变量是否为空 empty()</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">var_dump(<span class="keyword">empty</span>(<span class="variable">$name</span>)); <span class="comment">// 为空打印出 bool(true)，不为空则打印 bool(false)</span></span><br></pre></td></tr></table></figure>

<p>PHP 中认为变量的值为：<code>&quot;&quot;</code>、<code>0</code>、<code>&quot;0&quot;</code>、<code>null</code>、<code>false</code>、<code>[]</code> 时，变量虽然赋值了，但是无实际的意义，为空。</p>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><blockquote>
<p>php 数据类型: 8 种数据类型</p>
<p>基本数据类型: 布尔, 字符串, 整数, 浮点数</p>
<p>复合数据类型:数组, 对象</p>
<p>特殊的类型:resource(资源) null</p>
</blockquote>
<h3 id="简单数据类型"><a href="#简单数据类型" class="headerlink" title="简单数据类型"></a>简单数据类型</h3><h4 id="输出语句"><a href="#输出语句" class="headerlink" title="输出语句"></a>输出语句</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1. echo 输出简单数据类型</span></span><br><span class="line"><span class="comment">//2. print_r 输出数据结构，一般用于输出复杂类型。</span></span><br><span class="line">print_r(<span class="variable">$arr</span>); <span class="comment">// print_r 是一个函数，不要忘记小括号</span></span><br><span class="line"><span class="comment">//3. var_dump 输出完整的数据结构，包括类型，一般用于精准调试</span></span><br><span class="line">var_dump(<span class="variable">$arr</span>);</span><br></pre></td></tr></table></figure>

<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$str</span> = <span class="string">&quot;php是世界上是最好的语言&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$str</span>;</span><br></pre></td></tr></table></figure>

<p><strong>字符串连接符</strong></p>
<p>php 中，<code>+</code> 号只有算数的功能，并不能拼串，拼串使用 <code>.</code></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$name</span> = <span class="string">&quot;大象&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;大家好，我是&quot;</span> . <span class="variable">$name</span> . <span class="string">&quot;，今年18岁&quot;</span>;</span><br></pre></td></tr></table></figure>

<p><strong>php 中的单引号与双引号</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1. 字符串的定义可以使用单引号，也可以使用双引号</span></span><br><span class="line"><span class="comment">//2. 双引号可以解析变量</span></span><br><span class="line"><span class="comment">//3. 单引号的性能会高于双引号（了解）</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$name</span> = <span class="string">&quot;大象&quot;</span>;</span><br><span class="line"><span class="variable">$desc</span> = <span class="string">&#x27;很帅&#x27;</span>;</span><br><span class="line"><span class="variable">$str</span> = <span class="string">&#x27;$name 很帅&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$str</span>; <span class="comment">// $name 很帅</span></span><br><span class="line"><span class="variable">$str</span> = <span class="string">&quot;<span class="subst">$name</span> 很帅&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$str</span>; <span class="comment">// 大象 很帅</span></span><br></pre></td></tr></table></figure>

<h4 id="整数"><a href="#整数" class="headerlink" title="整数"></a>整数</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$num</span> = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$num</span>;</span><br></pre></td></tr></table></figure>

<h4 id="浮点型"><a href="#浮点型" class="headerlink" title="浮点型"></a>浮点型</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$float</span> = <span class="number">11.11</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$float</span>;</span><br></pre></td></tr></table></figure>

<h4 id="布尔类型"><a href="#布尔类型" class="headerlink" title="布尔类型"></a>布尔类型</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$flag</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// 当布尔类型值为true时，输出1</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line"><span class="variable">$flag</span> = <span class="literal">false</span>;</span><br><span class="line"><span class="comment">// 当布尔类型为false时，输出空字符串</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br></pre></td></tr></table></figure>

<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><blockquote>
<p>在 php 中，数组分为两种，<strong>索引数组</strong> 和 <strong>关联数组</strong></p>
<p>计算数组长度的方法：count(数组名)；</p>
</blockquote>
<p><strong>索引数组（类似与 JS 中的数组）</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>(<span class="string">&quot;张飞&quot;</span>,<span class="string">&quot;赵云&quot;</span>,<span class="string">&quot;马超&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$arr</span>; <span class="comment">// Array // echo 只能打印基本数据类型</span></span><br><span class="line"><span class="comment">// 使用 print_r() 打印</span></span><br><span class="line">print_r(<span class="variable">$arr</span>); <span class="comment">// Array ([0] =&gt; 张飞 [1] =&gt; 赵云 [2] =&gt; 马超)</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$arr</span>[<span class="number">0</span>]; <span class="comment">// 张飞</span></span><br></pre></td></tr></table></figure>

<p><strong>关联数组（类似与 JS 中的对象）</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 属性名必须用引号引起来</span></span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>(<span class="string">&quot;name&quot;</span>=&gt;<span class="string">&quot;zhangsan&quot;</span>, <span class="string">&quot;age&quot;</span>=&gt;<span class="number">18</span>);</span><br><span class="line">print_r(<span class="variable">$arr</span>); <span class="comment">// Array ( [name] =&gt; zhangsan [age] =&gt; 18 )</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$arr</span>[<span class="string">&quot;name&quot;</span>];</span><br></pre></td></tr></table></figure>

<p><strong>二维数组与多维数组</strong></p>
<p>数组中的每个元素又是一个数组<br>二维数组的存取元素，需要两次访问，依次确定行和列 <code>$arr[x][y]</code>;</p>
<blockquote>
<p>多维数组数组里面嵌套了两层以上的数组</p>
</blockquote>
<h3 id="对象-了解"><a href="#对象-了解" class="headerlink" title="对象(了解)"></a>对象(了解)</h3><blockquote>
<p>在 php 以及其他高级语言中，都有类的概念，表示一类对象，跟 js 中构造函数类似。</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//定义一个类（类似js的构造函数）</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="variable">$name</span> = <span class="string">&quot;小明&quot;</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="variable">$sex</span> = <span class="string">&quot;男&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$zs</span> = <span class="keyword">new</span> Person;</span><br><span class="line">print_r(<span class="variable">$zs</span>);</span><br><span class="line"><span class="comment">//打印对象的结构信息 Person Object ([name] =&gt; 小明[sex:Person:private] =&gt; 男 )</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$zs</span>-&gt;name; <span class="comment">// 对象中取值用 -&gt;</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$zs</span>-&gt;sex; <span class="comment">// 私有属性，无法获取</span></span><br></pre></td></tr></table></figure>

<h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2><h3 id="分支结构-if-switch"><a href="#分支结构-if-switch" class="headerlink" title="分支结构(if/switch)"></a>分支结构(if/switch)</h3><p>基本上来说，所有语言的 if..else 语法都是一样</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$age</span> = <span class="number">17</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$age</span> &gt;= <span class="number">18</span>) &#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;终于可以抽烟喝酒烫头了&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;哎......&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//===================</span></span><br><span class="line"><span class="keyword">switch</span>(变量)&#123;</span><br><span class="line">	<span class="keyword">case</span> 值<span class="number">1</span>:</span><br><span class="line">		程序块<span class="number">1</span>；</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> 值<span class="number">2</span>:</span><br><span class="line">		程序块<span class="number">2</span>；</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	...</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		程序块</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="循环结构-while-for-do…while"><a href="#循环结构-while-for-do…while" class="headerlink" title="循环结构(while / for / do…while)"></a>循环结构(while / for / do…while)</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span>(判断表达式)&#123;</span><br><span class="line">	程序块;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(赋值表达式; 判断表达式; 步进表达式)&#123;</span><br><span class="line">	程序块;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">	程序块</span><br><span class="line">&#125; <span class="keyword">while</span>(判断表达式)</span><br></pre></td></tr></table></figure>

<p><strong>遍历索引数组</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>(<span class="string">&quot;张三&quot;</span>, <span class="string">&quot;李四&quot;</span>, <span class="string">&quot;王五&quot;</span>, <span class="string">&quot;赵六&quot;</span>, <span class="string">&quot;田七&quot;</span>, <span class="string">&quot;王八&quot;</span>);</span><br><span class="line"><span class="comment">// 获取数组的长度： count($arr)</span></span><br><span class="line"><span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; count(<span class="variable">$arr</span>); <span class="variable">$i</span>++) &#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="variable">$arr</span>[<span class="variable">$i</span>];</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="foreach-语句结构"><a href="#foreach-语句结构" class="headerlink" title="foreach 语句结构"></a>foreach 语句结构</h3><blockquote>
<p>用来遍历数组(关联数组和索引数组均可)。</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">foreach</span>(<span class="variable">$arr</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>)&#123;</span><br><span class="line">	程序体</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$arr</span> <span class="keyword">as</span> <span class="variable">$value</span>)&#123;</span><br><span class="line">	程序体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>$arr</code> : 要遍历的数组</p>
<p><code>$key</code>: 键，可以是任意变量名</p>
<p><code>$value</code>: 值，可以是任意变量名</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//遍历关联数组</span></span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>(</span><br><span class="line">  <span class="string">&quot;name&quot;</span>=&gt;<span class="string">&quot;zs&quot;</span>,</span><br><span class="line">  <span class="string">&quot;age&quot;</span>=&gt;<span class="number">18</span>,</span><br><span class="line">  <span class="string">&quot;sex&quot;</span>=&gt;<span class="number">20</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$arr</span> <span class="keyword">as</span> <span class="variable">$k</span> =&gt; <span class="variable">$v</span>) &#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="variable">$k</span> . <span class="string">&quot;=&quot;</span> . <span class="variable">$v</span> . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><blockquote>
<p>注意，在 php 中函数不能重复声明</p>
</blockquote>
<p>php 中函数的语法与 js 中函数的语法基本一样，不同点在于</p>
<ol>
<li>函数名大小写不敏感</li>
<li>函数的形参可以设置默认值</li>
</ol>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    header(<span class="string">&quot;content-Type:text/html;charset=utf-8&quot;</span>);</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">sayHello</span> (<span class="params"><span class="variable">$name</span>=<span class="string">&quot;周杰伦&quot;</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;大家好，我是<span class="subst">$name</span>&quot;</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">        [<span class="keyword">return</span> 返回值;]</span><br><span class="line">    &#125;</span><br><span class="line">    sayHello(); <span class="comment">// 不传参数，会使用默认值</span></span><br><span class="line">    sayHello(<span class="string">&quot;大象&quot;</span>); <span class="comment">// 传参数，默认值不生效</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>在 php 中函数不能重复声明</li>
<li>函数体内的变量只在函数体内有效</li>
<li>函数体外的变量只在函数体外有效</li>
</ol>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="variable">$age</span> = <span class="number">18</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    	<span class="variable">$name</span> = <span class="string">&#x27;大象&#x27;</span>;</span><br><span class="line">    	<span class="keyword">echo</span> <span class="variable">$name</span>;  <span class="comment">// 有效</span></span><br><span class="line">    	<span class="keyword">echo</span> <span class="variable">$age</span>;  <span class="comment">// 无效</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">fn</span>(<span class="params"></span>)</span>;</span><br><span class="line">	<span class="keyword">echo</span> <span class="variable">$name</span>;  <span class="comment">// 无效</span></span><br><span class="line">  <span class="keyword">echo</span> <span class="variable">$age</span>; <span class="comment">// 有效</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><p>保存不会发生改变的数据(如：3.1415， 路径等)时，最好使用常量。</p>
<p>常量的使用方法：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">define(常量名, 常量值, [是否区分大小写]);</span><br><span class="line"><span class="comment">// 默认 false 区分大小写， true 不区分大小写</span></span><br><span class="line">define(<span class="string">&quot;PI&quot;</span>, <span class="number">3.1415</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="keyword">echo</span> PI;</span><br><span class="line"><span class="keyword">echo</span> pi;</span><br></pre></td></tr></table></figure>

<p><strong>注意:</strong> 一般在实际工作中，常量都用大写，<strong>常量不能被重新赋值</strong></p>
<h2 id="PHP-内置函数"><a href="#PHP-内置函数" class="headerlink" title="PHP 内置函数"></a>PHP 内置函数</h2><h3 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h3><ul>
<li>max(),min() 分别返回一组数的最大值及最小值；</li>
<li>abs() 返回绝对值。</li>
<li>floor() 向下取整。</li>
<li>ceil() 向上取整。</li>
<li>round() 四舍五入。</li>
<li>rand()  返回随机整数，可以取到两端的值。</li>
</ul>
<h3 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h3><ul>
<li><p><code>time()</code> 返回当前的时间戳 (1970 到现在的时间的秒数)</p>
</li>
<li><p><code>date(format,time)</code> 格式化一个本地时间或日期</p>
<p>格式：Y(年) m(月) d(日) H(时) i(分) s 秒</p>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$time</span> = time(); <span class="comment">// 获取时间戳</span></span><br><span class="line"><span class="keyword">echo</span> date(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>,<span class="variable">$time</span>); <span class="comment">// 格式化时间戳</span></span><br><span class="line"><span class="comment">// Y, m, d, H, i, s 分别代表 年 月 日 时 分 秒</span></span><br></pre></td></tr></table></figure>

<p>默认时区会不太正确, 我们在东八区, 比 0 时区会多八小时</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">路径: D:\phpStudy\php\php<span class="number">-5.4</span><span class="number">.45</span></span><br><span class="line">在php.ini里加上找到date.timezone项，设置date.timezone = <span class="string">&quot;PRC&quot;</span>，重启环境就ok了。</span><br><span class="line">PRC: 中华人民共和国</span><br></pre></td></tr></table></figure>

<h3 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h3><ul>
<li><code>str_replace(查找的值，替换的值，执行替换操作的字符)</code> 字符串替换（会把符合的值全部替换）</li>
<li><code>trim(字符串);</code> 去除首尾空白字符</li>
<li><code>explode(分割符，执行分割的字符串);</code> 使用一个字符分割一个字符串，返回一个数组(类似 split)</li>
<li><code>implode(连接符，执行连接的数组);</code> 将数组根据连接符拼接成字符串(类似 join)</li>
<li><code>substr(字符串，起始索引，截取长度);</code> 截取字符串，注意中文占 3 个字节长度</li>
<li><code>strchr(字符串，标识字符);</code> 从左向右找标识字符，返回该字符后全部字符(包括该字符)</li>
<li><code>strrchr(字符串，标识字符);</code> 从右向左找标识字符，返回该字符后全部字符(包括该字符) <strong>主要用于获取后缀名</strong></li>
</ul>
<h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><p><strong>查找数组中是否含有指定内容</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// in_array(查找的内容, 数组)   如果查找到返回 true ，查找不到返回 false</span></span><br><span class="line">result = in_array(<span class="variable">$uname</span>, <span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">// 可用来判断用户名是否已存在数据库中</span></span><br></pre></td></tr></table></figure>

<p><strong>从数组中随机获取数据</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// array_rand(被操作的数据, 数据长度) 返回一个随机的下标</span></span><br><span class="line"><span class="variable">$arr</span> = array_rand(<span class="variable">$results</span>, <span class="number">2</span>); <span class="comment">// 返回一个数组，随机两个下标</span></span><br><span class="line"><span class="variable">$index</span> = array_rand(<span class="variable">$results</span>, <span class="number">1</span>); <span class="comment">// 返回一个随机的下标</span></span><br><span class="line"><span class="variable">$results</span>[<span class="variable">$index</span>]; <span class="comment">// 用来随机获取数组中的一项</span></span><br></pre></td></tr></table></figure>

<h2 id="页面动态渲染"><a href="#页面动态渲染" class="headerlink" title="页面动态渲染"></a>页面动态渲染</h2><ul>
<li><p>PHP 本身支持与 HTML 混编</p>
</li>
<li><p>混编的文件后缀必须为 .php， Apache 才会调用 PHP 解析</p>
</li>
<li><p>PHP 与 HTML 混编时，服务器中的 PHP 引擎 只会执行 php 标签内部的 PHP 代码，非 PHP 的代码(PHP 标签外部的内容)直接忽略，最后会将 PHP 的执行结果和非 PHP 代码 一起返回给浏览器,由浏览器进行解析</p>
</li>
<li><p>一个 php 页面当中,可以写多个 php 语法结构,但是 php 语法结构 <strong>不能嵌套</strong></p>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  header(<span class="string">&#x27;content-type:text/html;charset=utf-8&#x27;</span>);</span><br><span class="line">  <span class="keyword">echo</span> <span class="number">2</span>+<span class="number">3</span>;</span><br><span class="line">  <span class="comment">// php的引擎 只会执行php代码块中代码，代码块外面的代码会被忽略最后 服务器会将php执行的结果和代码块外面的内容一起返回给浏览器，由浏览器进行解析</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="comment">// 在php语法结构外面， 可以写 html ，会直接在浏览器中渲染</span></span><br><span class="line">&lt;a href=<span class="string">&quot;http://www.baidu.com&quot;</span>&gt;百度一下&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<h2 id="include-文件引入"><a href="#include-文件引入" class="headerlink" title="include 文件引入"></a>include 文件引入</h2><p><strong>介绍</strong>：不同的页面中有相同的代码部分，可以将其分离为单个文件。需要调用时，<strong>include 引入对应的文件即可调用</strong>。提高代码的复用率。类似于 js 中 script 标签导入, 可以用于函数复用</p>
<p><strong>语法</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 可以是html、php或其他类型的页面</span></span><br><span class="line">include | include_once   <span class="string">&quot;文件的路径&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>include 与 include_once 区别</strong></p>
<ul>
<li>include 可以重复引入文件</li>
<li>include_once 只引入一次，防止多次引入文件</li>
<li>如果文件中有函数，include 重复引入会报错，include_once 不会报错</li>
</ul>
<h2 id="PHP-数据读写到文件-数据持久化"><a href="#PHP-数据读写到文件-数据持久化" class="headerlink" title="PHP 数据读写到文件(数据持久化)"></a>PHP 数据读写到文件(数据持久化)</h2><p>程序运行过程中，数据存储在内存中的，程序结束, 数据会销毁</p>
<p>如果希望可以永久存储某些数据，可以将数据存储在硬盘上（存储在文件中）</p>
<p>将数据由内存存储到硬盘的过程，称为数据持久化；</p>
<ul>
<li><p><code>file_get_contents(path)</code>   根据路径读取文件内容, 返回一个字符串</p>
</li>
<li><p><code>file_put_contents(path,$str)</code>   将一个字符串写入到一个文件中。(只能存储字符串)</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">file_put_contents(<span class="keyword">string</span> <span class="variable">$file</span>, <span class="keyword">string</span> <span class="variable">$data</span>[, constants flag]);</span><br><span class="line">参数<span class="number">1</span>: 文件路径</span><br><span class="line">参数<span class="number">2</span>: 要写入文件的字符串</span><br><span class="line">参数<span class="number">3</span>: 可选参数，默认不写，新内容覆盖原文件中的内容；FILE_APPEND 是向文件中追加内容</span><br><span class="line">返回值: 写入文件的字符串长度(不用记)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>使用 <code>file_put_contents</code> 存储数组的时候，会丢失数据</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$arr</span> = [<span class="string">&#x27;zs&#x27;</span>, <span class="string">&#x27;ls&#x27;</span>, <span class="string">&#x27;ww&#x27;</span>];</span><br><span class="line"><span class="variable">$arr1</span> = [<span class="string">&#x27;name&#x27;</span>=&gt;<span class="string">&#x27;zs&#x27;</span>, <span class="string">&#x27;age&#x27;</span>=&gt;<span class="number">18</span>];</span><br><span class="line">file_put_contents(<span class="string">&quot;02-test.txt&quot;</span>, <span class="variable">$arr</span>); <span class="comment">// zslsww</span></span><br><span class="line">file_put_contents(<span class="string">&quot;02-test.txt&quot;</span>, <span class="variable">$arr1</span>); <span class="comment">// zs18</span></span><br></pre></td></tr></table></figure>

<p>把一个数组，转成一个 json 格式的字符串</p>
<ul>
<li><code>json_encode($data)</code> 将 PHP 数组转成 JSON 格式字符串。</li>
<li><code>json_decode($str,true)</code> 将 JSON 字符串, 转换为 PHP 数组。（不传 true, 有可能转完之后是个对象, 传了 true,一定是数组）</li>
</ul>
<h2 id="表单处理"><a href="#表单处理" class="headerlink" title="表单处理"></a>表单处理</h2><blockquote>
<p>表单（form）：表单用于收集用户输入信息，并将数据提交给服务器。是一种常见的与服务端数据交互的一种方式</p>
</blockquote>
<ol>
<li><code>action</code>: 指定表单的提交地址（如果提交到当前页面，action 可以为空）</li>
<li><code>method</code>: 指定表单的提交方式，get/post，默认 get</li>
<li><code>input</code> 的数据想要提交到后台，必须指定 name 属性，后台通过 name 属性获取值</li>
<li>想要提交表单，不能使用 <code>input:button</code> 必须使用 <code>input:submit</code></li>
</ol>
<h3 id="php-获取表单数据"><a href="#php-获取表单数据" class="headerlink" title="php 获取表单数据"></a>php 获取表单数据</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// $_GET 是 PHP 系统提供的一个超全局变量，是一个数组，里面存放了表单通过 get 方式提交的数据</span></span><br><span class="line"><span class="comment">// $_POST 是 PHP 系统提供的一个超全局变量，是一个数组，里面存放了表单通过 post 方式提交的数据</span></span><br></pre></td></tr></table></figure>

<p><strong>get 与 post 的区别</strong></p>
<ul>
<li><code>get</code> 方式<br>数据会拼接在 url 地址的后面 (?username=pp&amp;password=123456)<br>地址栏有长度限制，因此 get 方式提交数据大小不会超过 4k</li>
<li><code>post</code> 方式<br>数据不会在 url 中显示，相比 get 方式，post 更安全<br>提交的数据没有大小限制，可用于文件上传</li>
</ul>
<h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3><p><strong>html 要求</strong></p>
<ul>
<li><p>文件上传的提交方式必须是 <code>post</code> 方式</p>
</li>
<li><p>需要给 <code>form</code> 指定 <code>enctype=&quot;multipart/form-data&quot;</code></p>
</li>
<li><p>指定 <code>name</code> 属性，后台才能获取到</p>
</li>
</ul>
<p><strong>php 相关</strong></p>
<ul>
<li>文件上传时，通过 <code>$_FILES</code> 才能获取到，这是一个二维数组。</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">  [photo] =&gt; <span class="keyword">Array</span></span><br><span class="line">    (</span><br><span class="line">      [name] =&gt; <span class="number">001.</span>jpg   <span class="comment">// 文件名字</span></span><br><span class="line">      [type] =&gt; image/jpeg  <span class="comment">// 文件类型</span></span><br><span class="line">      <span class="comment">// 上传图片保存的位置</span></span><br><span class="line">      [tmp_name] =&gt; C:\Users\Jepson\AppData\Local\Temp\phpF2A0.tmp</span><br><span class="line">      [<span class="built_in">error</span>] =&gt; <span class="number">0</span>     <span class="comment">// 上传错误码, 错误码为 0 表示没有错误</span></span><br><span class="line">      [size] =&gt; <span class="number">6000</span>   <span class="comment">// 文件大小, 单位字节, 大小 6kb 左右</span></span><br><span class="line">    )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>上传文件时，文件会临时保存在服务器上，如果文件最终没有保存，那么临时文件会被删除，保证服务器安全。</p>
</li>
<li><p><code>sleep(10)</code> 可以让代码延迟 10 秒钟才执行。</p>
</li>
<li><p><code>move_uploaded_file($path, $newPath);</code> 可以转存临时文件，真正把文件存储起来</p>
</li>
<li><p><code>unlink(filename,context)</code> 删除文件，若成功，则返回 true，失败则返回 false</p>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 保存图片的完整代码</span></span><br><span class="line"><span class="comment">// 思路:</span></span><br><span class="line"><span class="comment">// 1. 在文件上传成功的情况下, 进行图片的保存   error == 0</span></span><br><span class="line"><span class="comment">// 2. 获取临时文件路径</span></span><br><span class="line"><span class="comment">// 3. 随机生成新的文件名, 注意文件中后缀名是不能改变的</span></span><br><span class="line"><span class="comment">// 4. 根据新的文件名, 转移临时文件</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$file</span> = <span class="variable">$_FILES</span>[<span class="string">&#x27;photo&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断上传是否成功</span></span><br><span class="line"><span class="keyword">if</span> ( <span class="variable">$file</span>[<span class="string">&#x27;error&#x27;</span>] == <span class="number">0</span> ) &#123; <span class="comment">// 上传成功</span></span><br><span class="line">  <span class="comment">// 1. 获取临时文件路径</span></span><br><span class="line">  <span class="variable">$ftemp</span> = <span class="variable">$file</span>[<span class="string">&#x27;tmp_name&#x27;</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. 随机生成新的文件名, 后缀不能随便起, 要获取一下</span></span><br><span class="line">  <span class="variable">$name</span> = <span class="variable">$file</span>[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line">  <span class="variable">$text</span> = strrchr(<span class="variable">$name</span>, <span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">  <span class="comment">// 为了防止重复, 生成随机的文件名以当前时间秒数+随机数组成</span></span><br><span class="line">  <span class="variable">$newName</span> = time().rand(<span class="number">10000</span>,<span class="number">99990</span>).<span class="variable">$text</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. 进行转存</span></span><br><span class="line">  move_uploaded_file(<span class="variable">$ftemp</span>, <span class="string">&quot;./upload/<span class="subst">$newName</span>&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="学生信息管理系统-1-0"><a href="#学生信息管理系统-1-0" class="headerlink" title="学生信息管理系统 1.0"></a>学生信息管理系统 1.0</h2><h3 id="基本功能"><a href="#基本功能" class="headerlink" title="基本功能"></a>基本功能</h3><ul>
<li>学生添加功能</li>
<li>展示学生信息功能</li>
<li>删除学生信息</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// array_splice(数组, 开始的下标, 截取长度) 将匹配到的数据截取掉，会改变原来的数组</span></span><br><span class="line">array_splice(<span class="variable">$arr</span>, <span class="variable">$_GET</span>[<span class="string">&quot;index&quot;</span>], <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加内容到数组：将 $stuArr 添加到数组 $arr 中</span></span><br><span class="line"><span class="variable">$arr</span>[] = <span class="variable">$stuArr</span>;</span><br></pre></td></tr></table></figure>

<h2 id="Mysql-数据库"><a href="#Mysql-数据库" class="headerlink" title="Mysql 数据库"></a>Mysql 数据库</h2><h3 id="数据库概念"><a href="#数据库概念" class="headerlink" title="数据库概念"></a>数据库概念</h3><p>专门用来存储、管理数据的仓库 英文：Database, DB。</p>
<h3 id="数据库的分类"><a href="#数据库的分类" class="headerlink" title="数据库的分类"></a>数据库的分类</h3><ul>
<li><p>关系型数据库: 基于表，表与表之间可以存在关系，可以进行多表查询的存储方式，适合较为复杂的存储</p>
<p>如: MySQL, SQL Server, oracle</p>
<p>表结构:</p>
<p>每一行代表一条数据 — <strong>记录</strong></p>
<p>每一列都是一类数据 — <strong>字段</strong></p>
<table>
<thead>
<tr>
<th><strong>订单编号</strong></th>
<th><strong>商品名称</strong></th>
<th><strong>价格</strong></th>
<th><strong>数量</strong></th>
</tr>
</thead>
<tbody><tr>
<td>100123</td>
<td>华为 mate10</td>
<td>4999</td>
<td>2</td>
</tr>
<tr>
<td>100124</td>
<td>花裙子</td>
<td>499</td>
<td>1</td>
</tr>
</tbody></table>
</li>
<li><table>
<thead>
<tr>
<th>订单编号</th>
<th>用户</th>
<th>配送地址</th>
</tr>
</thead>
<tbody><tr>
<td>100123</td>
<td>隔壁老王</td>
<td>北京市京顺路 99 号</td>
</tr>
<tr>
<td>100124</td>
<td>隔壁老宋</td>
<td>北京市清华大学 1 号楼</td>
</tr>
</tbody></table>
</li>
</ul>
<ul>
<li><p>非关系型数据库: 基于键值对的存储方式，数据之间没有耦合性，特点执行效率高</p>
<p>如：mongodb</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 类似对象的键值对形式</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;username&quot;</span>: <span class="string">&quot;gblw&quot;</span>,</span><br><span class="line">    <span class="string">&quot;password&quot;</span>: <span class="number">123456</span>,</span><br><span class="line">    <span class="string">&quot;uid&quot;</span>: <span class="number">007</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="MySQL-数据库软件"><a href="#MySQL-数据库软件" class="headerlink" title="MySQL 数据库软件"></a>MySQL 数据库软件</h3><blockquote>
<p>MySQL 数据库软件中可以有多个数据库,每一个数据库中可以有多个表</p>
</blockquote>
<h4 id="可视化工具-navicat"><a href="#可视化工具-navicat" class="headerlink" title="可视化工具 navicat"></a>可视化工具 navicat</h4><blockquote>
<p>MySQL 只是一个数据库软件，如果我们要创建数据库，或对数据库进行增删改查，刚开始可以用可视化工具来操作，让我们更加直观的了解数据库</p>
</blockquote>
<h5 id="安装-navicat"><a href="#安装-navicat" class="headerlink" title="安装 navicat"></a>安装 navicat</h5><h5 id="让-navicat-和-MySQL-建立连接"><a href="#让-navicat-和-MySQL-建立连接" class="headerlink" title="让 navicat 和 MySQL 建立连接"></a>让 navicat 和 MySQL 建立连接</h5><p>点击左上角 连接 =&gt; MySQL =&gt; 常规 =&gt; 端口 3306 =&gt;</p>
<h4 id="数据库表的操作"><a href="#数据库表的操作" class="headerlink" title="数据库表的操作"></a>数据库表的操作</h4><h5 id="数据库的数据类型"><a href="#数据库的数据类型" class="headerlink" title="数据库的数据类型"></a>数据库的数据类型</h5><blockquote>
<p>也就是数据库中可以存储的数据类型(又叫做字段类型)</p>
</blockquote>
<p><strong>字段类型</strong></p>
<ul>
<li><p>整型 <code>int</code></p>
<p>​ 存储如年龄，产品数量，编号等。</p>
</li>
<li><p>小数类型 <code>float</code> , <code>decimal</code></p>
<blockquote>
<p>重量，工资，奖金，价格等使用 decimal 类型，实现小数的精确存储,一般用来存储与钱有关的数字。3.333333331</p>
</blockquote>
</li>
<li><p>字符串型 <code>varchar(M)</code>，<code>char(M)</code></p>
<ul>
<li><p>M 为该字段可以存储的最多字符数(字节) ，如 varchar(10)最大可以存储 10 个字节</p>
</li>
<li><p>varchar 一般用来存储长度变化比较大的字符串，如文章标题，商品名称</p>
</li>
<li><p>char 存储长度比较固定的字符串，如手机号，身份证号，序列号，邮编</p>
</li>
<li><p>此外可以使用 text 类型，存储较长的字符串，无需指定字符串的具体长度</p>
</li>
</ul>
</li>
<li><p>日期时间型 <code>datetime</code>, <code>date(年月日)</code>，<code>time(时分秒)</code></p>
</li>
</ul>
<p><strong>字段约束</strong></p>
<p>字段约束: 字段数据的属性规则（特征）</p>
<ol>
<li><p><code>not null</code> 不为空，可以限制字段值不能为空</p>
</li>
<li><p><code>default</code> 默认值，可以设置字段的默认值，在没有录入时自动使用默认值填充。</p>
</li>
<li><p><code>primary key</code> 主键 ：唯一标识，不能重复，不能为空</p>
<p>设置字段为主键，主键字段的值不能重复，不能为空。而且一个数据表中只能设置一个字段为主键，作为每行记录的唯一身份信息（索引）。</p>
</li>
<li><p><code>auto_increment</code> 自动增长</p>
<p>设置字段为自动增长，默认从 1 开始自动分配编号。自增长字段必须为一个 key（索引，数据结构，便于快速查找数据，相当于书的目录），一般与 primary key 结合使用。类型必须为整型。</p>
</li>
<li><p><code>unique key</code> 不能重复</p>
<p>唯一键，设置字段的值为唯一的，可以设置多个字段为唯一键。唯一键字段的值可以为空。</p>
</li>
</ol>
<h5 id="创建数据表"><a href="#创建数据表" class="headerlink" title="创建数据表"></a>创建数据表</h5><blockquote>
<p>注意 创建表时，每个表必须有一个主键</p>
</blockquote>
<h2 id="SQL-操作数据库的语言"><a href="#SQL-操作数据库的语言" class="headerlink" title="SQL-操作数据库的语言"></a>SQL-操作数据库的语言</h2><blockquote>
<p>SQL：structured Query Language 结构化查询语言。</p>
</blockquote>
<ul>
<li>通过这个语言可以对数据库进行增删改查</li>
</ul>
<p>SQL 编写注意点: 注释用 <code>--</code> , 语句结束加分号 <code>;</code></p>
<h3 id="基本用法：增删改查"><a href="#基本用法：增删改查" class="headerlink" title="基本用法：增删改查"></a>基本用法：增删改查</h3><ol>
<li>插入数据 <code>insert</code></li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- insert into 表名 (字段列表) values (值列表)</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> book (name, age, sex) <span class="keyword">values</span> (<span class="string">&#x27;zs&#x27;</span>,<span class="string">&#x27;18&#x27;</span>,<span class="string">&#x27;m&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ol>
<li>修改数据 <code>update</code></li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- update 表名 set 字段名称1=值1,字段名称2=值2,... where 条件</span></span><br><span class="line"><span class="comment">-- 如果不加条件会修改表中所有对应的字段</span></span><br><span class="line">update book <span class="keyword">set</span> name<span class="operator">=</span><span class="string">&#x27;ls&#x27;</span>, age<span class="operator">=</span><span class="string">&#x27;30&#x27;</span> <span class="keyword">where</span> id<span class="operator">=</span><span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<ol>
<li>删除数据 <code>delete</code></li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- delete from 表名 where 条件</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> book <span class="comment">-- 会删除所有数据</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> book <span class="keyword">where</span> id<span class="operator">=</span><span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<ol>
<li>查询数据 select</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- select 字段列表 from 表名</span></span><br><span class="line"><span class="keyword">select</span> name, age <span class="keyword">from</span> book <span class="comment">-- 只查询表中 name 和 author 的信息</span></span><br><span class="line"><span class="comment">-- select * from 表名 where 条件  * 表示所有字段</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> book <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> book <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;zs&#x27;</span> <span class="keyword">and</span> age<span class="operator">=</span><span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<h3 id="高级用法"><a href="#高级用法" class="headerlink" title="高级用法"></a>高级用法</h3><ul>
<li><p><code>where</code> 条件</p>
<p>查询时，不添加 where 条件, 返回数据表所有行。需要添加限定条件，只返回需要的行。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- select  字段列表 from  表名 where 条件；</span></span><br><span class="line"><span class="comment">-- 条件 : =, &gt;, &lt;, &gt;=, &lt;=, and, or</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>like</code> 模糊匹配  % 通配符</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 查找姓张的人</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表名 <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;张%&#x27;</span>;​</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>in</code> 语法：一次查询多个符合条件的数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- select * from 表名 where 字段 in (value1,value2,value3);</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stu <span class="keyword">where</span> name <span class="keyword">in</span> (<span class="string">&#x27;zs&#x27;</span>, <span class="string">&#x27;ls&#x27;</span>, <span class="string">&#x27;ww&#x27;</span>); <span class="comment">-- 查找name值为zs, ls, ww 的数据</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>count()</code> 获取返回数据的总条数</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 查询满足条件数据的总条数</span></span><br><span class="line"><span class="comment">-- select count(*) from 表名 where 条件</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>order</code> 排序</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- select * from 表名 order by  字段名称;   	  	默认升序</span></span><br><span class="line"><span class="comment">-- select * from 表名 order by  age;  -- 按照年龄来排序</span></span><br><span class="line"><span class="comment">-- select * from 表名 order by 字段名称 desc;      desc 表示降序</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>limit</code> 对结果集进行截取 一般用于取数据的前几条</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- select *  from  表名  limit 截取的起始索引，截取的长度</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>联合查询（多个表联合查询）</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段列表 <span class="keyword">from</span> 表A <span class="keyword">join</span> 表B <span class="keyword">on</span> 表A.字段<span class="operator">=</span>表B.字段 <span class="keyword">where</span> 条件</span><br><span class="line"><span class="keyword">join</span> 将表A和表B联合起来</span><br><span class="line"><span class="keyword">on</span> 根据什么字段把表A和表B联合起来</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span>  <span class="keyword">from</span>  teacher  <span class="keyword">join</span> class  <span class="keyword">on</span> class.id<span class="operator">=</span>teacher.classid;  <span class="comment">-- 老师表和班级表联合查询</span></span><br><span class="line"><span class="keyword">select</span> teacher.<span class="operator">*</span>, class.classname  <span class="keyword">from</span>  teacher  <span class="keyword">join</span> class  <span class="keyword">on</span> class.id<span class="operator">=</span>teacher.classid;   <span class="comment">-- 老师表和班级表联合查询,但只显示老师表的全部内容和班级表的名称</span></span><br><span class="line"><span class="comment">-- 注意: 多表联合查询时,字段要写明是那个表的字段 如  表.字段名</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="PHP-操作数据库"><a href="#PHP-操作数据库" class="headerlink" title="PHP 操作数据库"></a>PHP 操作数据库</h2><h3 id="连接数据库基本步骤"><a href="#连接数据库基本步骤" class="headerlink" title="连接数据库基本步骤"></a>连接数据库基本步骤</h3><ol>
<li>连接数据库</li>
<li>准备 sql 语句</li>
<li>执行 sql 语句</li>
<li>获取执行的结果并分析</li>
<li>关闭数据库</li>
</ol>
<h3 id="操作数据库常用-API"><a href="#操作数据库常用-API" class="headerlink" title="操作数据库常用 API"></a>操作数据库常用 API</h3><ul>
<li><p><code>mysqli_connect(IP, 用户名，密码，数据库名)，端口号</code> 连接数据库</p>
</li>
<li><p><code>mysqli_query($link, $sql)</code> 执行 SQL 语句</p>
</li>
<li><p><code>mysqli_error($link);</code> 返回错误描述</p>
</li>
<li><p><code>mysqli_close($link);</code> 关闭连接</p>
</li>
<li><p><code>mysqli_fetch_assoc($res);</code> 从结果集中取得一行作为关联数组返回</p>
</li>
<li><p><code>mysqli_num_rows($res);</code> 返回结果集的行数</p>
</li>
</ul>
<h3 id="sql-操作"><a href="#sql-操作" class="headerlink" title="sql 操作"></a>sql 操作</h3><ul>
<li>使用 PHP 发送 SQL 语句前，可以先打印 SQL 语句，检查语句的正确性。</li>
<li>修改数据库的数据时, 使用变量拼接 SQL 语句=，字段的值为字符串类型时，需要在变量的两侧使用单、双引号包裹。可以将所有的字段外面都使用双引号包含。</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 连接数据库</span></span><br><span class="line"><span class="comment">// mysqli_connect(ip地址, 用户名, 密码, 数据库的名称, 端口号);</span></span><br><span class="line"><span class="comment">// 执行结果</span></span><br><span class="line"><span class="comment">//    1. 连接成功, 返回一个数据库连接对象</span></span><br><span class="line"><span class="comment">//    2. 连接失败, 返回 false</span></span><br><span class="line"><span class="comment">// @ 表示错误抑制符, 可以抑制错误的输出</span></span><br><span class="line"><span class="variable">$link</span> = @ mysqli_connect(<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="string">&#x27;root&#x27;</span>, <span class="string">&#x27;root&#x27;</span>, <span class="string">&#x27;study&#x27;</span>, <span class="number">3306</span>);</span><br><span class="line"><span class="comment">// var_dump($link);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果数据库连接失败</span></span><br><span class="line"><span class="keyword">if</span> ( !<span class="variable">$link</span> ) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;数据库连接失败&quot;</span>；</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 程序结束, die 方法, 终止当前程序执行, 输出一段语句</span></span><br><span class="line">	<span class="keyword">die</span>(<span class="string">&quot;数据库连接失败&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;数据库连接成功&lt;br&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 准备 sql 语句: 删除一条数据</span></span><br><span class="line"><span class="variable">$sql</span> = <span class="string">&quot;delete from stu where id = 14&quot;</span>;</span><br><span class="line"><span class="variable">$name</span> = <span class="string">&quot;gblw&quot;</span>;</span><br><span class="line"><span class="variable">$age</span> = <span class="number">31</span>;</span><br><span class="line"><span class="variable">$sq2</span> = <span class="string">&quot;insert into stu (name, age) values (&#x27;<span class="subst">$name</span>&#x27;, <span class="subst">$age</span>)&quot;</span>;</span><br><span class="line"><span class="comment">// sql 语句一般用双引号包裹</span></span><br><span class="line"><span class="comment">// 如果语句中含有拼接的变量，需要用单引号包裹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 让数据库执行 sql 语句, 并分析结果</span></span><br><span class="line"><span class="comment">// mysqli_query(数据库连接对象, 要执行的sql语句)</span></span><br><span class="line"><span class="comment">// 非查询语句：执行成功返回 true, 执行失败返回 false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 根据结果不同做逻辑判断</span></span><br><span class="line"><span class="keyword">if</span> ( mysqli_query( <span class="variable">$link</span>, <span class="variable">$sql</span> ) ) &#123;</span><br><span class="line">    <span class="comment">// 如果删除的数据不存在，也会返回 true，</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;删除成功&quot;</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// sql 语句错误，才会返回 false</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;删除失败&quot;</span>;</span><br><span class="line">    <span class="comment">// mysqli_error 可以查看错误消息</span></span><br><span class="line">    <span class="keyword">echo</span> mysqli_error(<span class="variable">$link</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询语句： 成功返回结果集, 失败返回 false</span></span><br><span class="line"><span class="comment">// 数据查询不到也会返回结果集，只是数据条数为 0，sql 语句有错误才会返回 false</span></span><br><span class="line"><span class="variable">$res2</span> = mysqli_query( <span class="variable">$link</span>, <span class="variable">$sq2</span> );</span><br><span class="line"><span class="comment">// $res2 是返回的结果集,是一个对象，表面上看没有我们要的数据,如果我们想要数据,需要调用mysqli_fetch_assoc($res2)去获取</span></span><br><span class="line"><span class="comment">// 结果集中 field_count 表示字段数，num_rows 表示查询到的数据条数</span></span><br><span class="line"><span class="comment">// 注意: mysqli_fetch_assoc($res2)执行一次,只会从结果集中拿一条数据出来(执行几次就拿出几条数据)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 根据结果不同做逻辑判断</span></span><br><span class="line"><span class="keyword">if</span> ( !<span class="variable">$res</span> ) &#123;</span><br><span class="line">    <span class="keyword">echo</span> mysqli_error( <span class="variable">$link</span> );</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;数据库查询失败&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// mysqli_fetch_assoc 查询成功, 从结果集中取数据, 以关联数组的形式返回</span></span><br><span class="line"><span class="comment">// 一次只取一条数据, 如果没取到, 返回 null</span></span><br><span class="line"><span class="variable">$arr</span> = [];</span><br><span class="line"><span class="keyword">while</span>( <span class="variable">$row</span> = mysqli_fetch_assoc( <span class="variable">$res</span> ) ) &#123;</span><br><span class="line">    <span class="comment">// 将值推到数组中</span></span><br><span class="line">    <span class="variable">$arr</span>[] = <span class="variable">$row</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 也可以采用 for 循环遍历</span></span><br><span class="line"><span class="comment">// mysqli_num_rows($res) 方法返回获取到的数据条数 ，</span></span><br><span class="line"><span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; mysqli_num_rows(<span class="variable">$res</span>); <span class="variable">$i</span>++)&#123;</span><br><span class="line">    <span class="comment">// echo $i;</span></span><br><span class="line">    <span class="variable">$arr</span>[] =  mysqli_fetch_assoc(<span class="variable">$res</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// echo &#x27;&lt;pre&gt;&#x27;;</span></span><br><span class="line"><span class="comment">// print_r($arr);</span></span><br><span class="line"><span class="comment">// echo &#x27;&lt;/pre&gt;&#x27;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. 关闭数据库连接 (挂电话)</span></span><br><span class="line">mysqli_close( <span class="variable">$link</span> );</span><br></pre></td></tr></table></figure>

<h3 id="数据库工具函数的封装"><a href="#数据库工具函数的封装" class="headerlink" title="数据库工具函数的封装"></a>数据库工具函数的封装</h3><blockquote>
<p>为了提高代码的复用性，把数据增删改的操作封装成一个方法</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义常量</span></span><br><span class="line">define( <span class="string">&#x27;HOST&#x27;</span>, <span class="string">&#x27;127.0.0.1&#x27;</span> );</span><br><span class="line">define( <span class="string">&#x27;UNAME&#x27;</span>, <span class="string">&#x27;root&#x27;</span> );</span><br><span class="line">define( <span class="string">&#x27;PWD&#x27;</span>, <span class="string">&#x27;root&#x27;</span> );</span><br><span class="line">define( <span class="string">&#x27;DB&#x27;</span>, <span class="string">&#x27;test02&#x27;</span> );</span><br><span class="line">define( <span class="string">&#x27;PORT&#x27;</span>, <span class="number">3306</span> );</span><br><span class="line"></span><br><span class="line"><span class="comment">// 非查询语句封装</span></span><br><span class="line"><span class="comment">// 封装一个执行非查询语句的方法, 提高代码的复用性</span></span><br><span class="line"><span class="comment">// 参数: $sql 要执行的 sql 语句</span></span><br><span class="line"><span class="comment">// 返回值: true / false</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">my_exec</span>(<span class="params"> <span class="variable">$sql</span> </span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 1. 连接数据库</span></span><br><span class="line">  <span class="variable">$link</span> = @ mysqli_connect( HOST, UNAME, PWD, DB, PORT);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>( !<span class="variable">$link</span> ) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;数据库连接失败&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. 准备 sql 语句, 就是传递过来的 $sql</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. 执行 sql 语句, 分析结果</span></span><br><span class="line">  <span class="keyword">if</span> ( mysqli_query( <span class="variable">$link</span>, <span class="variable">$sql</span> ) ) &#123;</span><br><span class="line">    <span class="comment">// 执行成功</span></span><br><span class="line">    mysqli_close( <span class="variable">$link</span> ); <span class="comment">// 关闭数据库</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 执行失败</span></span><br><span class="line">    mysqli_close( <span class="variable">$link</span> ); <span class="comment">// 关闭数据库</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询语句的封装</span></span><br><span class="line"><span class="comment">// 参数: $sql 要执行的 sql 语句</span></span><br><span class="line"><span class="comment">// 返回值:</span></span><br><span class="line"><span class="comment">//    (1) 成功, 返回数据(二维数组)</span></span><br><span class="line"><span class="comment">//    (2) 失败, 返回 false</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">my_query</span>(<span class="params"> <span class="variable">$sql</span> </span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. 建立连接</span></span><br><span class="line">  <span class="variable">$link</span> = @ mysqli_connect( HOST, UNAME, PWD, DB, PORT );</span><br><span class="line">  <span class="keyword">if</span> ( !<span class="variable">$link</span> ) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;数据库连接失败&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. 准备 sql 语句 $sql</span></span><br><span class="line">  <span class="comment">// 3. 执行 sql 语句, 分析结果</span></span><br><span class="line">  <span class="variable">$res</span> = mysqli_query( <span class="variable">$link</span>, <span class="variable">$sql</span> );  <span class="comment">// 结果集 或者 false</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> ( !<span class="variable">$res</span> ) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;获取数据失败&lt;br&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> mysqli_error(<span class="variable">$link</span>);</span><br><span class="line">    mysqli_close( <span class="variable">$link</span> );</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 得到结果集, 将结果集的所有内容取出到数组中</span></span><br><span class="line">  <span class="variable">$arr</span> = [];</span><br><span class="line">  <span class="keyword">while</span> ( <span class="variable">$row</span> = mysqli_fetch_assoc(<span class="variable">$res</span>) ) &#123;</span><br><span class="line">    <span class="variable">$arr</span>[] = <span class="variable">$row</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  mysqli_close( <span class="variable">$link</span> );</span><br><span class="line">  <span class="keyword">return</span> <span class="variable">$arr</span>; <span class="comment">// 返回结果数组</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="学生管理系统-2-0"><a href="#学生管理系统-2-0" class="headerlink" title="学生管理系统 2.0"></a>学生管理系统 2.0</h2><h3 id="基本功能-1"><a href="#基本功能-1" class="headerlink" title="基本功能"></a>基本功能</h3><ul>
<li>添加学生功能</li>
<li>展示学生列表功能</li>
<li>删除学生功能</li>
<li>查看学生详情</li>
<li>更新学生数据</li>
</ul>
<h3 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h3><p><strong>注册功能思路：</strong></p>
<ol>
<li>表单设计，点击提交按钮向服务器提交表单数据</li>
<li>在后台获取表单提交的数据，保存到数据库中<ul>
<li>先获取表单的标签的数据</li>
<li>保存上传的图片（并保存图片存储的路径）</li>
<li>将表单的数据和图片的路径一起保存到数据库中</li>
</ul>
</li>
<li>保存完成，跳转到列表页，查看新添加的数据</li>
</ol>
<p><strong>展示功能思路：</strong></p>
<ol>
<li>先从数据库中获取数据（二维数组 arr）</li>
<li>遍历二维数组，将数组中数据渲染到页面中</li>
</ol>
<p><strong>删除功能思路：</strong></p>
<ol>
<li>获取要删除数据的 id</li>
<li>根据 id 删除数据库中指定的数据</li>
<li>删除完毕，返回列表页</li>
</ol>
<p><strong>详情展示功能</strong></p>
<ol>
<li>获取要查看详情数据的 id</li>
<li>根据 id 通过联合查询，获取到需要用数据</li>
<li>把数据显示在页面中</li>
<li>点击返回按钮，可以返回到列表页</li>
</ol>
<p><strong>更新数据思路：</strong><br>更新数据的思路=先渲染再提交</p>
<ol>
<li>获取要查看详情数据的 id</li>
<li>把对应 id 的数据填充到修改页面中</li>
<li>点击修改按钮，获取表单的数据，提交给服务器</li>
<li>在服务器更新数据</li>
<li>更新完成后跳转到列表页</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">隐藏域表单：和其他表单标签一样，只是看不到而已</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&lt;?php echo $data[&#x27;id&#x27;] ?&gt;&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>javascript 基础</title>
    <url>/1653.html</url>
    <content><![CDATA[<h1 id="书写位置"><a href="#书写位置" class="headerlink" title="书写位置"></a>书写位置</h1><p>第一种: 写在<code>script</code>标签中</p>
<p>第二种: 引入一个 js 文件</p>
<p><strong>注意：</strong></p>
<ol>
<li>script 可以放在很多地方，但是我们一般规范写在 body 的最后面；</li>
<li>使用 src 引入的标签不能再在标签内写 js 代码 (写了不会执行)</li>
</ol>
<p>!&gt; 通过 <code>src</code> 请求到的 <code>js</code> 文件，会被解析到 <code>script</code> 标签内，并且覆盖原 <code>script</code> 标签内的 <code>js</code> 代码</p>
<p>!&gt; script 标签的 src 属性可以写任何路径或文件，并不仅仅只能写 js 文件</p>
<h1 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h1><blockquote>
<p>注释代码不会被执行，仅仅起到一个提示的作用。注释可以对复杂的代码进行解释，方便后期的维护和开发。</p>
</blockquote>
<ul>
<li><p>单行注释 :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 这是单行注释， 单行注释只能写一行代码</span></span><br><span class="line"><span class="comment">// 快捷键： ctrl + /</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>多行注释 :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	这是多行注释，在多行注释中可以</span></span><br><span class="line"><span class="comment">	换行</span></span><br><span class="line"><span class="comment">	快捷键  ctrl + shift + /</span></span><br><span class="line"><span class="comment">	不可嵌套</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="输出语句-5-种"><a href="#输出语句-5-种" class="headerlink" title="输出语句 (5 种)"></a>输出语句 (5 种)</h1><ul>
<li><p><strong>alert : 警告框</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// alert会弹出一个警告框</span></span><br><span class="line">alert(<span class="string">&#x27;hello world&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>confirm : 确认框</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// confirm弹出一个确定框</span></span><br><span class="line">confirm(<span class="string">&#x27;我帅吗？&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>prompt : 输入框</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// prompt:弹出一个输入框，可以输入值</span></span><br><span class="line">prompt(<span class="string">&#x27;请输入你的真是年龄&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>document.write : 网页中写入内容</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 可以识别标签</span></span><br><span class="line"><span class="built_in">document</span>.write(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line"><span class="built_in">document</span>.write(<span class="string">&#x27;&lt;h1&gt;hello world&lt;/h1&gt;&#x27;</span>)</span><br><span class="line"><span class="built_in">document</span>.write(<span class="built_in">Date</span>()) <span class="comment">// 输出当前时间</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>console.log：控制台输出</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// F12打开控制台，在console中可以看到打印的信息</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;hello word&#x27;</span>)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// var 声明变量</span></span><br><span class="line"><span class="keyword">var</span> age</span><br><span class="line">age = <span class="number">12</span> <span class="comment">// 先声明,后赋值</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">12</span> <span class="comment">// 同时声明+赋值</span></span><br><span class="line"><span class="keyword">var</span> age, name, sex <span class="comment">// 直接声明变量,可一次声明多个，用逗号隔开</span></span><br><span class="line">height = <span class="number">100</span> <span class="comment">// 不声明变量，直接赋值(不会报错，但是不推荐)</span></span><br><span class="line"><span class="built_in">console</span>.log(height) <span class="comment">// 不声明变量，也不赋值变量，直接使用（会报错）v</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2 <span class="comment">// 把两个数字加起来</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">var student = &#123;</span></span><br><span class="line"><span class="comment">	name:&#x27;小明&#x27;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>变量<strong>命名要求</strong>（变量是[标识符][1]的一种）</p>
<ol>
<li>以字母、下划线或美元符号（$）开头</li>
<li>由字母、下划线、美元符号（$）和数字组成</li>
<li>标识符<strong>区分大小写</strong></li>
<li>标识符不能使用关键字和保留字</li>
<li>如果重新声明 JavaScript 变量，该变量的值不会丢失 <code>var car=&#39;yellow&#39;; var car</code> car 的值依然是 ‘yellow’</li>
</ol>
</li>
</ul>
<blockquote>
<p>关键字 (有特殊意义的一些单词)<br><code>break</code> <code>do</code> <code>instanceof</code> <code>typeof</code> <code>case</code> <code>else</code> <code>new</code> <code>var</code> <code>in</code> <code>catch</code> <code>finally</code> <code>return</code> <code>void</code> <code>continue</code> <code>for</code> <code>switch</code> <code>while</code> <code>try</code> <code>debugger</code> <code>function</code> <code>this</code> <code>with</code> <code>default</code> <code>if</code> <code>throw</code> <code>delete</code></p>
<p>保留字<br><code>abstract</code> <code>enum</code> <code>int</code> <code>short</code> <code>boolean</code> <code>export</code> <code>interface</code> <code>static</code> <code>extends</code> <code>long</code> <code>super</code> <code>Char</code> <code>final</code> <code>native</code> <code>Class</code> <code>synchronized</code> <code>package</code> <code>throws</code> <code>Const</code> <code>goto</code> <code>private</code> <code>transient</code> <code>degubber</code> <code>implements</code> <code>volatile</code> <code>double</code> <code>import</code> <code>public</code> <code>byte</code> <code>float</code> <code>protected</code></p>
</blockquote>
<p>交换两个变量的值</p>
<ol>
<li>使用临时变量 <strong>(必须掌握)</strong></li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> temp = a</span><br><span class="line">a = b</span><br><span class="line">b = temp</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>不使用临时变量</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">a = a + b</span><br><span class="line">b = a - b</span><br><span class="line">a = a - b</span><br></pre></td></tr></table></figure>

<h1 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h1><h2 id="Number"><a href="#Number" class="headerlink" title="Number"></a>Number</h2><ul>
<li>浮点数</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">3.1416</span> <span class="comment">// 3.1416</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">3.12e2</span> <span class="comment">// 312</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">3.12e-1</span> <span class="comment">// 0.312</span></span><br></pre></td></tr></table></figure>

<ul>
<li>整数</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">10</span> <span class="comment">// 10</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">070</span> <span class="comment">// 56 (八进制)</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">0xa</span> <span class="comment">// 10 (十六进制)</span></span><br></pre></td></tr></table></figure>

<ul>
<li>特殊值<blockquote>
<p><code>NaN</code> <code>Infinity</code></p>
</blockquote>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">1</span> / <span class="number">0</span> <span class="comment">// Infinity (无穷大)</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>通过 <code>isNaN(num)</code> 可以判断是否是一个数字，返回 false 的时候，表示是一个数字</p>
</blockquote>
<ul>
<li>浮点数精度丢失问题</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在进行浮点数运算的时候，可能会出现精度丢失的问题</span></span><br><span class="line"><span class="number">0.1</span> + <span class="number">0.2</span> = <span class="number">0.30000000000000004</span></span><br><span class="line"><span class="number">0.2</span> + <span class="number">0.2</span> = <span class="number">0.4</span></span><br><span class="line"><span class="comment">// 尽量少用浮点数进行运算，不要让浮点数进行比较</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 解决办法 : 根据小数点后面的位数量 乘以对应的整数</span></span><br><span class="line"><span class="number">0.1</span> + <span class="number">0.2</span>  ==&gt; (<span class="number">0.1</span>*<span class="number">10</span>+<span class="number">0.2</span>*<span class="number">10</span>) / <span class="number">10</span> = <span class="number">0.3</span></span><br></pre></td></tr></table></figure>

<h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><p>只要是在<strong>单引号或双引号</strong>内的就是 <code>String</code> 类型</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> name1 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="keyword">var</span> name2 = <span class="string">&#x27;july&#x27;</span></span><br><span class="line"><span class="keyword">var</span> name3 = <span class="string">&#x27;3.1416&#x27;</span></span><br><span class="line"><span class="comment">// 使用索引位置来访问字符串中的每个字符,字符串的索引从 0 开始</span></span><br><span class="line"><span class="keyword">var</span> character = name1[<span class="number">3</span>] <span class="comment">// l</span></span><br><span class="line"><span class="comment">// 内置属性 length 来计算字符串的长度</span></span><br><span class="line"><span class="built_in">console</span>.log(name1.length) <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>若在字符串中使用引号，字符串中的引号不要与字符串的引号相同，或在字符串添加转义字符 <code>\</code></p>
</blockquote>
<p>字符串可以是对象</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="string">&#x27;john&#x27;</span></span><br><span class="line"><span class="keyword">var</span> y = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&#x27;john&#x27;</span>)</span><br><span class="line"><span class="keyword">typeof</span> x <span class="comment">// String</span></span><br><span class="line"><span class="keyword">typeof</span> y <span class="comment">// Object</span></span><br></pre></td></tr></table></figure>

<h2 id="Boolean"><a href="#Boolean" class="headerlink" title="Boolean"></a>Boolean</h2><p>布尔型，只有 <code>true</code> 和 <code>false</code> 两个值，且是小写</p>
<p>true : <code>1</code>、<code>2</code>、<code>1.1</code>、<code>-1</code>、<code>&#39;0&#39;</code>、<code>&#39;1&#39;</code>、<code>[]</code>、<code>Infinity</code>、<code>-Infinity</code>、…</p>
<p>false : <code>0</code>、<code>&#39;&#39;</code>、<code>null</code>、<code>NaN</code>、<code>undefined</code></p>
<blockquote>
<p>所有非 0 数都是 true，0 是 false</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> sex = <span class="literal">true</span></span><br><span class="line"><span class="keyword">if</span> (sex) &#123;</span><br><span class="line">  <span class="built_in">document</span>.write(<span class="string">&#x27;男&#x27;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">document</span>.write(<span class="string">&#x27;女&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><span class="red">真值：</span> 在 JavaScript 中，**<a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Truthy">Truthy</a>**（真值）指的是在<a href="https://developer.mozilla.org/en-US/docs/Glossary/Boolean">布尔值</a>上下文中，转换后的值为真的值。所有值都是真值，除非它们被定义为 <a href="https://developer.mozilla.org/en-US/docs/Glossary/Falsy">假值</a>（即除 <code>false</code>、<code>0</code>、<code>&quot;&quot;</code>、<code>null</code>、<code>undefined</code> 和 <code>NaN</code> 以外皆为真值）</p>
<h2 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> car = <span class="keyword">new</span> <span class="built_in">Array</span>()</span><br><span class="line">cat[<span class="number">0</span>] = <span class="string">&#x27;yellow&#x27;</span></span><br><span class="line">cat[<span class="number">1</span>] = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">cat[<span class="number">2</span>] = <span class="string">&#x27;blue&#x27;</span></span><br><span class="line"><span class="comment">// 或</span></span><br><span class="line"><span class="keyword">var</span> cat = [<span class="string">&#x27;yellow&#x27;</span>, <span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>关键词 <code>new</code> 用于声明新变量的类型</p>
</blockquote>
<h2 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h2><p>由花括号分隔，属性和方法的容器；对象的属性以名称和值对的形式 (name : value) 来定义；多个属性由逗号分隔。对象的方法定义了一个函数，并作为对象的属性存储。对象方法通过添加 <code>()</code> 调用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">cat.name = <span class="string">&#x27;kitty&#x27;</span></span><br><span class="line">cat.age = <span class="string">&#x27;2&#x27;</span></span><br><span class="line">cat.eat = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="comment">// 或</span></span><br><span class="line"><span class="keyword">var</span> cat = &#123;</span><br><span class="line">  name: <span class="string">&#x27;kitty&#x27;</span>,</span><br><span class="line">  age: <span class="number">2</span>,</span><br><span class="line">  eat: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对象属性有两种访问方式：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">name = cat.name</span><br><span class="line">name = cat[<span class="string">&#x27;name&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>对象方法的访问：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">eat = cat.eat() <span class="comment">// 输出函数执行结果</span></span><br><span class="line">eat = cat.eat <span class="comment">// 输出函数表达式</span></span><br></pre></td></tr></table></figure>

<h2 id="Null"><a href="#Null" class="headerlink" title="Null"></a>Null</h2><p>只有一个值：<code>null</code>，表示对象不存在</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> cat = <span class="literal">null</span> <span class="comment">// 将cat的值清空</span></span><br></pre></td></tr></table></figure>

<ul>
<li>str.match()方法匹配不到返回 null</li>
<li>通过 document.querySelector、getElementById() 获取不到元素返回 null</li>
</ul>
<h2 id="Undefined"><a href="#Undefined" class="headerlink" title="Undefined"></a>Undefined</h2><p>只有一个值：<code>undefined</code></p>
<ul>
<li>已声明未赋值的变量</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a</span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<ul>
<li>没有明确返回值的变量</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取对象不存在的属性</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;</span><br><span class="line"><span class="built_in">console</span>.log(obj.c) <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组下标不存在</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;zs&#x27;</span>, <span class="string">&#x27;ls&#x27;</span>, <span class="string">&#x27;ww&#x27;</span>]</span><br><span class="line"><span class="comment">//           0    1     2      下标从零开始，长度为3</span></span><br><span class="line">arr[<span class="number">5</span>] <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数没有返回值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getSum</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a + b)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// getSum(20, 30) // 50</span></span><br><span class="line"><span class="keyword">var</span> result = getSum(<span class="number">20</span>, <span class="number">30</span>)</span><br><span class="line"><span class="built_in">console</span>.log(result) <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数参数没有传入</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i)</span><br><span class="line">&#125;</span><br><span class="line">f() <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<h2 id="typeof-操作符"><a href="#typeof-操作符" class="headerlink" title="typeof 操作符"></a>typeof 操作符</h2><blockquote>
<p>是一个操作符而不是函数，圆括号可以使用，但不是必需的</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num</span><br><span class="line"><span class="keyword">typeof</span> num <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">typeof</span> num1 <span class="comment">// undefined</span></span><br><span class="line"><span class="comment">// 对未初始化和未声明的变量执行 typeof 操作符都返回 undefined 值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">1</span></span><br><span class="line"><span class="keyword">typeof</span> num <span class="comment">// number</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="string">&#x27;1&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> num <span class="comment">// string</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> flag = <span class="literal">true</span></span><br><span class="line"><span class="keyword">typeof</span> flag <span class="comment">// bollean</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span> <span class="comment">// boolean</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span> <span class="comment">// object ==&gt; null 被认为是一个空的对象引用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cat = &#123; <span class="attr">name</span>: <span class="string">&#x27;kitty&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">typeof</span> cat <span class="comment">// object</span></span><br></pre></td></tr></table></figure>

<h1 id="数据类型转换"><a href="#数据类型转换" class="headerlink" title="数据类型转换"></a>数据类型转换</h1><h2 id="转换成字符串"><a href="#转换成字符串" class="headerlink" title="转换成字符串"></a>转换成字符串</h2><ol>
<li>调用 <code>toString()</code> 方法 （显式转换）</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> result = a.toString()</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> result) <span class="comment">// string</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a) <span class="comment">// number</span></span><br></pre></td></tr></table></figure>

<p>null 、undefined 没有 toString() 方法</p>
<ol start="2">
<li>调用 <code>String()</code> 构造函数（显式转换）</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="built_in">String</span>(a)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> str1) <span class="comment">// string</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>直接和字符串做加法运算(推荐方法) （隐式因式转换）</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 任意数据类型的变量和字符串做加法运算结果都是字符串</span></span><br><span class="line"><span class="keyword">var</span> str2 = a + <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> str2) <span class="comment">// string</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = <span class="literal">true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> (b + <span class="string">&#x27;&#x27;</span>)) <span class="comment">// string</span></span><br></pre></td></tr></table></figure>

<h2 id="转换成数值"><a href="#转换成数值" class="headerlink" title="转换成数值"></a>转换成数值</h2><ol>
<li> <code>Number(a)</code></li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num1 = <span class="built_in">Number</span>(<span class="string">&#x27;123&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> num2 = <span class="built_in">Number</span>(<span class="string">&#x27;123c&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> num1) <span class="comment">// number</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> num2) <span class="comment">// NaN</span></span><br><span class="line"><span class="comment">// 如果字符串不能转换成合法数字，转换结果为 NaN</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>使用 <code>parseInt()</code></li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num2 = <span class="built_in">parseInt</span>(<span class="string">&#x27;12.3&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> num2) <span class="comment">// number</span></span><br><span class="line"><span class="built_in">console</span>.log(num2) <span class="comment">// 12 只保留整数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num3 = <span class="built_in">parseInt</span>(<span class="string">&#x27;15xyz&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> num4 = <span class="built_in">parseInt</span>(<span class="string">&#x27;15x6yz&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> num3) <span class="comment">// number</span></span><br><span class="line"><span class="built_in">console</span>.log(num3) <span class="comment">// 15</span></span><br><span class="line"><span class="built_in">console</span>.log(num4) <span class="comment">// 15</span></span><br><span class="line"><span class="comment">// 如果字符串里有非法的数字，会逐个转换，直到遇到无法转化的字符串为止</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>使用 <code>parseFloat()</code> 完成</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num3 = <span class="built_in">parseFloat</span>(<span class="string">&#x27;12.34&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> num3) <span class="comment">// number</span></span><br><span class="line"><span class="built_in">console</span>.log(num3) <span class="comment">// 12.34 可以保留小数位</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>让字符串和数字做除了加法以外的运算（隐式转换）</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="string">&#x27;345&#x27;</span></span><br><span class="line"><span class="keyword">var</span> num4 = +d <span class="comment">// 前面加 + （正）号也可以转换</span></span><br><span class="line"><span class="comment">// num4 = d - 0</span></span><br><span class="line"><span class="comment">// numb4 = d * 1</span></span><br><span class="line"><span class="comment">// num4 = d / 1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> num4) <span class="comment">// number</span></span><br><span class="line"><span class="built_in">console</span>.log(num4) <span class="comment">// 345</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 数组转换成 数值</span></span><br><span class="line"><span class="comment">// 空数组为 0，存在一个元素且可转换成数字，则转换成该数字，其他情况为 NaN</span></span><br><span class="line"><span class="built_in">Number</span>([]) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">Number</span>([<span class="string">&#x27;2&#x27;</span>]) <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">Number</span>([<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>]) <span class="comment">// naN</span></span><br></pre></td></tr></table></figure>

<h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><blockquote>
<p><code>parseInt()</code> 函数解析一个字符串参数，指定该字符串为指定基数的进制值，并返回一个 10 进制的整数，如果被解析参数的第一个字符无法被转化成数值类型，则返回 <code>NaN</code></p>
<p>参考 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/parseInt">parseInt</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line"><span class="built_in">parseInt</span>(string, radix)</span><br><span class="line"><span class="comment">// string 要被解析的值，如果参数不是一个字符串，则将其转换为字符串</span></span><br><span class="line"><span class="comment">// radix 基数,表示进制，介于 2 和 36 之间的整数，参数 radix 的值为 0，或没有设置该参数时，parseInt() 会根据 string 来判断数字的基数。如果输入的 string 以 &quot;0x&quot;或 &quot;0x&quot;（一个0，后面是小写或大写的X）开头，那么radix被假定为16，字符串的其余部分被解析为十六进制数。如果输入的 string以 &quot;0&quot;（0）开头， radix被假定为10（十进制）。如果输入的 string 以任何其他值开头， radix 是 10 (十进制)。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回解析后的整数值。 如果被解析参数的第一个字符无法被转化成数值类型，则返回 NaN</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;123&#x27;</span>, <span class="number">5</span>) <span class="comment">// 将 &#x27;123&#x27; 看作 5 进制数，返回十进制数 38</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;4215213&#x27;</span>, <span class="number">5</span>)   <span class="comment">// 4 * 5^2 + 2 * 5^1 + 1 * 5^0 = 111 返回 111</span></span><br><span class="line"><span class="comment">// [1, 2, 3].map(parseInt) // [1, NaN, NaN]</span></span><br><span class="line"><span class="comment">// [1, 2, 3].map(parseInt(item, index))</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>parseFloat()</code> 函数解析一个字符串参数并返回一个浮点数，如果给定值不能被转换成数值，则会返回 NaN。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line"><span class="built_in">parseFloat</span>(value) <span class="comment">// value 需要被解析成为浮点数的值</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">&#x27;3.14&#x27;</span>) <span class="comment">// 3.14</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// [1, 2, 3].map(parseFloat) // [1, 2, 3]</span></span><br></pre></td></tr></table></figure>

<h2 id="转换成布尔值"><a href="#转换成布尔值" class="headerlink" title="转换成布尔值"></a>转换成布尔值</h2><ol>
<li>使用 <code>Boolean()</code> 完成</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">45</span></span><br><span class="line"><span class="keyword">var</span> result1 = <span class="built_in">Boolean</span>(a)</span><br><span class="line"><span class="built_in">console</span>.log(result1) <span class="comment">// true</span></span><br><span class="line"><span class="comment">// 对于数字类型来说：一般的数字都转换成为true，0、NaN 会被转换成为false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="comment">// var str = &#x27;&#x27;</span></span><br><span class="line"><span class="comment">// var str = &#x27; &#x27;</span></span><br><span class="line"><span class="keyword">var</span> result2 = <span class="built_in">Boolean</span>(str)</span><br><span class="line"><span class="built_in">console</span>.log(result2) <span class="comment">// true</span></span><br><span class="line"><span class="comment">// 字符串中只有空的字符串会被转换成为 false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result3 = <span class="built_in">Boolean</span>(<span class="literal">undefined</span>)</span><br><span class="line"><span class="built_in">console</span>.log(result3) <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result4 = <span class="built_in">Boolean</span>(<span class="literal">null</span>)</span><br><span class="line"><span class="built_in">console</span>.log(result4) <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = <span class="literal">false</span></span><br><span class="line"><span class="keyword">var</span> result5 = <span class="built_in">Boolean</span>(b)</span><br><span class="line"><span class="built_in">console</span>.log(result5) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p><strong>0, NaN, 空字符串，undefined, null, false 会被转换成为 false</strong></p>
<ol start="2">
<li>使用 <code>!!</code></li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> !!a) <span class="comment">// boolean</span></span><br><span class="line"><span class="built_in">console</span>.log(!!a) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>自动转换</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;哈哈&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="变量转换表"><a href="#变量转换表" class="headerlink" title="变量转换表"></a>变量转换表</h2><table>
<thead>
<tr>
<th>Value</th>
<th>Boolean</th>
<th>Number</th>
<th>String</th>
</tr>
</thead>
<tbody><tr>
<td>undefined</td>
<td>false</td>
<td>NaN</td>
<td>“undefined”</td>
</tr>
<tr>
<td>null</td>
<td>false</td>
<td><strong>0</strong></td>
<td>“null”</td>
</tr>
<tr>
<td>true</td>
<td>true</td>
<td>1</td>
<td>“true”</td>
</tr>
<tr>
<td>false</td>
<td>false</td>
<td>0</td>
<td>“false”</td>
</tr>
<tr>
<td>“”</td>
<td>false</td>
<td>0</td>
<td>“”</td>
</tr>
<tr>
<td>“123”</td>
<td>true</td>
<td>123</td>
<td>“123”</td>
</tr>
<tr>
<td>“1a”</td>
<td>true</td>
<td>NaN</td>
<td>“1a”</td>
</tr>
<tr>
<td>0</td>
<td>false</td>
<td>0</td>
<td>“0”</td>
</tr>
<tr>
<td>1</td>
<td>true</td>
<td>1</td>
<td>“1”</td>
</tr>
<tr>
<td>Infinity</td>
<td>true</td>
<td>Infinity</td>
<td>“Infinity”</td>
</tr>
<tr>
<td>NaN</td>
<td>false</td>
<td>NaN</td>
<td>“NaN”</td>
</tr>
<tr>
<td>{}</td>
<td><strong>true</strong></td>
<td>NaN</td>
<td>“[object Object]”</td>
</tr>
<tr>
<td>数组</td>
<td>true</td>
<td>空数组为 0，存在一个元素且为数字转数字，其他 NaN</td>
<td>[1, ‘123’, [], undefined, null, NaN, true ] =&gt; “1,123,,,,NaN,true”</td>
</tr>
</tbody></table>
<h1 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h1><h2 id="算数操作符"><a href="#算数操作符" class="headerlink" title="算数操作符"></a>算数操作符</h2><blockquote>
<p><code>+</code> 、<code>-</code> 、<code>*</code> 、<code>/</code> 、<code>%</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">5</span> + <span class="number">6</span> <span class="comment">// 11</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">5</span> % <span class="number">2</span> <span class="comment">// 1 取余数</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">5</span> % -<span class="number">2</span> <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">var</span> num = -<span class="number">5</span> % <span class="number">2</span> <span class="comment">// -1 只与左边值的符号有关</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="string">&#x27;5&#x27;</span> + <span class="number">6</span> + <span class="number">7</span> <span class="comment">// &#x27;567&#x27; 数字与字符串相加，返回字符串</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">5</span> + <span class="number">6</span> + <span class="string">&#x27;7&#x27;</span> <span class="comment">// &#x27;117&#x27;</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="string">&#x27;&#x27;</span> + <span class="number">5</span> + <span class="number">6</span> + <span class="string">&#x27;7&#x27;</span> <span class="comment">// &#x27;567&#x27; 字符串 + 数字得到字符串</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="string">&#x27;&#x27;</span> + <span class="number">5</span> + <span class="number">6</span> + <span class="number">7</span> <span class="comment">// &#x27;567&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">5</span> + <span class="literal">true</span> <span class="comment">// 6  返回数值，false 转成 0，true 转成 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="string">&#x27;1&#x27;</span> + <span class="literal">true</span> <span class="comment">// &#x27;1true&#x27; 字符串与布尔值相加,布尔值转化成字符串</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;a&#x27;</span> + +<span class="string">&#x27;b&#x27;</span> <span class="comment">// -&gt; &#x27;a&#x27; + +&#x27;b&#x27; -&gt; &#x27;aNaN&#x27;</span></span><br><span class="line"><span class="number">4</span> * <span class="string">&#x27;3&#x27;</span> <span class="comment">// 12</span></span><br><span class="line"><span class="literal">true</span> + <span class="literal">true</span> <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<h2 id="赋值操作符"><a href="#赋值操作符" class="headerlink" title="赋值操作符"></a>赋值操作符</h2><blockquote>
<p><code>a = a + 1</code> 即 <code>a++</code>, <code>a = a - 1</code> 即 <code>a--</code> &gt; <code>a = a + 5</code> 可简写成 <code>a += 5</code>，类似的还有 <code>a -= 5</code>、<code>a *= 5</code>、<code>a /= 5</code>、<code>x %= y</code></p>
<p>赋值运算符左边不能是常量或表达式</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> age = <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> num = age++ <span class="comment">// num = 10 age = 11 (先将变量中的值取出做赋值操作,再自身+1)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> num = ++age <span class="comment">// num = 11 age = 11 (先自身+1,然后再将+1后的结果赋值)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">5</span></span><br><span class="line"><span class="built_in">console</span>.log(num++) <span class="comment">// 5</span></span><br><span class="line"><span class="built_in">console</span>.log(++num) <span class="comment">// 7</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">3</span></span><br><span class="line"><span class="keyword">var</span> y = x++ + ++x + x * <span class="number">10</span> <span class="comment">// x = 3</span></span><br><span class="line"><span class="comment">// y = 3 + ++x + x * 10  // x = 4</span></span><br><span class="line"><span class="comment">// y = 3 + 5 + x * 10 // x = 5</span></span><br><span class="line"><span class="comment">// y = 58</span></span><br></pre></td></tr></table></figure>

<h2 id="关系操作符"><a href="#关系操作符" class="headerlink" title="关系操作符"></a>关系操作符</h2><blockquote>
<p><code>&gt;</code> 、<code>&lt;</code> 、<code>&gt;=</code> 、<code>&lt;=</code></p>
<p><code>==</code> 相等 、<code>！=</code> 不相等 、<code>===</code> 全等 、<code>！===</code> 不全等</p>
<p><code>in</code> <code>instanceof</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="number">6</span> &gt; <span class="number">4</span></span><br><span class="line">alert(result) <span class="comment">// true 输出Boolean类型</span></span><br></pre></td></tr></table></figure>

<p>运算符的结果类型为 <code>Boolean</code></p>
<ul>
<li><p><code>&gt;</code> 、<code>&lt;</code> 、<code>&gt;=</code> 、<code>&lt;=</code> 、<code>==</code> 相等、<code>!=</code> 不相等 （字面量比较）</p>
<p>在比较前先执行类型转换</p>
<ul>
<li>如果有一个操作数是<strong>布尔值</strong>，则在比较相等性前先将其转换为<strong>数值</strong>—false 转换为 0，true 转换为 1</li>
<li>如果一个操作数是<strong>字符串</strong>，另一个操作数是<strong>数值</strong>，则在比较相等性前将字符串转换为<strong>数值</strong></li>
<li>如果两个值都是字符串，则按照字符串的字符编码进行逐位比较</li>
<li>如果一个操作数是对象，另一个不是，则调用对象的 valueOf()方法，用得到的基本类型值按照前面的规则比较</li>
<li>如果两个操作数都是对象，则比较它们是否指向同一个对象</li>
<li><strong>null 和 undefined 是相等的</strong></li>
<li>在比较相等性之前，不能将 null 和 undefined 转换为其他任何值</li>
<li>如果有一个操作符是 NaN，则相等操作符返回 false，不相等操作符返回 true；即使两个操作数都是 NaN，也一样</li>
</ul>
</li>
</ul>
<ul>
<li><code>===</code> 全等、<code>!==</code> 不全等<br>两个操作数在未经转换的情况下相等返回 true，不相等返回 false</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">0</span> == <span class="literal">false</span> <span class="comment">// true</span></span><br><span class="line"><span class="number">1</span> == <span class="literal">true</span> <span class="comment">// true</span></span><br><span class="line"><span class="number">2</span> == <span class="literal">true</span> <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="literal">false</span> == <span class="string">&#x27;0&#x27;</span> <span class="comment">// true</span></span><br><span class="line"><span class="string">&#x27;&#x27;</span> == <span class="number">0</span> <span class="comment">// true</span></span><br><span class="line"><span class="string">&#x27;4&#x27;</span> == <span class="number">4</span> <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="literal">null</span> == <span class="literal">undefined</span> <span class="comment">// true</span></span><br><span class="line"><span class="literal">undefined</span> == <span class="number">0</span> <span class="comment">// false</span></span><br><span class="line"><span class="literal">null</span> == <span class="number">0</span> <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;NaN&#x27;</span> == <span class="literal">NaN</span> <span class="comment">// false</span></span><br><span class="line"><span class="number">5</span> == <span class="literal">NaN</span> <span class="comment">// false</span></span><br><span class="line"><span class="literal">NaN</span> == <span class="literal">NaN</span> <span class="comment">// false</span></span><br><span class="line"><span class="literal">NaN</span> != <span class="literal">NaN</span> <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">[] != [] <span class="comment">// true</span></span><br><span class="line">[] == [] <span class="comment">// false</span></span><br><span class="line">[] == ![] <span class="comment">// true</span></span><br><span class="line">&#123;&#125; == &#123;&#125; <span class="comment">// false</span></span><br><span class="line"><span class="number">1</span> == [] <span class="comment">// false</span></span><br><span class="line"><span class="number">1</span> == [<span class="number">1</span>] <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">-<span class="number">0</span> === <span class="number">0</span> <span class="comment">// true</span></span><br><span class="line"><span class="string">&#x27;4&#x27;</span> === <span class="number">4</span> <span class="comment">// false</span></span><br><span class="line"><span class="literal">undefined</span> === <span class="literal">null</span> <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>in</code></p>
<p>判断对象是否能够访问到该属性</p>
</li>
<li><p><code>instanceof</code></p>
<p>判断一个对象是否是另一个对象的实例</p>
</li>
</ul>
<h2 id="逻辑操作符"><a href="#逻辑操作符" class="headerlink" title="逻辑操作符"></a>逻辑操作符</h2><blockquote>
<p><code>!</code> 非、<code>&amp;&amp;</code> 与、<code>||</code> 或</p>
</blockquote>
<ul>
<li><code>!</code> 对 Boolean 值取反</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> flag = <span class="literal">true</span></span><br><span class="line">alert(!flag) <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">alert(!<span class="number">0</span>) <span class="comment">// true</span></span><br><span class="line">alert(![]) <span class="comment">// false</span></span><br><span class="line">alert(!<span class="string">&#x27;&#x27;</span>) <span class="comment">// true</span></span><br><span class="line">alert(!![]) <span class="comment">// true</span></span><br><span class="line">alert(!!<span class="number">1</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>&amp;&amp;</code> 如果第一个值转换成 boolean 值之后为 true， 则输出第二个值；如果第一个值转换成 boolean 值之后为 false，则输出第一个值，且第二个值不在执行。（取第一个为 false 的值，如果都为 true ，则输出最后一个值。）</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="literal">true</span> &amp;&amp; <span class="number">3</span> <span class="comment">// 3</span></span><br><span class="line"><span class="keyword">var</span> result = <span class="number">1</span> &amp;&amp; <span class="number">3</span> <span class="comment">// 3</span></span><br><span class="line"><span class="keyword">var</span> result = [] &amp;&amp; <span class="string">&#x27;&#x27;</span> <span class="comment">// &#x27;&#x27;</span></span><br><span class="line"><span class="keyword">var</span> result = <span class="literal">false</span> &amp;&amp; <span class="number">3</span> <span class="comment">// false</span></span><br><span class="line"><span class="keyword">var</span> result = <span class="string">&#x27;&#x27;</span> &amp;&amp; <span class="number">3</span> <span class="comment">// &#x27;&#x27;</span></span><br><span class="line"><span class="keyword">var</span> result = <span class="literal">null</span> &amp;&amp; <span class="literal">true</span> <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">0</span></span><br><span class="line"><span class="keyword">var</span> result = <span class="string">&#x27;&#x27;</span> &amp;&amp; num++ <span class="comment">// &#x27;&#x27;  num = 0</span></span><br></pre></td></tr></table></figure>

<p><code>&amp;&amp;</code> 使用場景</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animate</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  fn &amp;&amp; fn()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 不传参数不会报错</span></span><br><span class="line">animate()</span><br></pre></td></tr></table></figure>

<ul>
<li><code>||</code> 如果第一个值转换成 boolean 值之后为 true， 则输出第一个值，且第二个值不在执行；如果第一个值转换成 boolean 值之后为 false，则输出第二个值，以此类推，（取第一个为 true 的值，如果都为 false ，则输出最后一个值。）</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="literal">true</span> || <span class="number">3</span> <span class="comment">// true</span></span><br><span class="line"><span class="keyword">var</span> result = <span class="number">1</span> || <span class="number">3</span> <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">var</span> result = [] || <span class="string">&#x27;&#x27;</span> <span class="comment">// []</span></span><br><span class="line"><span class="keyword">var</span> result = <span class="literal">false</span> || <span class="number">0</span> <span class="comment">// 0</span></span><br><span class="line"><span class="keyword">var</span> result = <span class="string">&#x27;&#x27;</span> || <span class="number">3</span> <span class="comment">// 3</span></span><br><span class="line"><span class="keyword">var</span> result = num || <span class="literal">true</span> <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">0</span></span><br><span class="line"><span class="keyword">var</span> result = <span class="number">3</span> || num++ <span class="comment">// 3  num=0</span></span><br></pre></td></tr></table></figure>

<p><code>||</code> 使用场景</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.兼容性问题：</span></span><br><span class="line"><span class="keyword">var</span> scrollTop = <span class="built_in">window</span>.pageYOffset || <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 函数的参数默认值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  n = n || <span class="number">10</span> <span class="comment">// 给形参 n 设置默认值</span></span><br><span class="line">  <span class="built_in">console</span>.log(n + <span class="number">10</span>)</span><br><span class="line">&#125;</span><br><span class="line">sum()</span><br></pre></td></tr></table></figure>

<h2 id="操作符的优先级"><a href="#操作符的优先级" class="headerlink" title="操作符的优先级"></a>操作符的优先级</h2><p>从高到低如下：</p>
<ul>
<li><p>() 优先级最高</p>
</li>
<li><p>一元运算符 ++ – !</p>
</li>
<li><p>算数运算符 先 * / % 后 + -</p>
</li>
<li><p>关系运算符 &gt; &gt;= &lt; &lt;=</p>
</li>
<li><p>相等运算符 == != === !==</p>
</li>
<li><p>逻辑运算符 先 &amp;&amp; 后 ||</p>
</li>
<li><p>赋值运算符 =</p>
</li>
</ul>
<h1 id="判断语句"><a href="#判断语句" class="headerlink" title="判断语句"></a>判断语句</h1><h2 id="if-语句"><a href="#if-语句" class="headerlink" title="if 语句"></a>if 语句</h2><ul>
<li>单独的 if 语句</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line"><span class="keyword">if</span> (条件) &#123;</span><br><span class="line">  <span class="comment">// 只有当条件为 true 时,执行代码</span></span><br><span class="line">&#125; <span class="comment">// else部分没有执行语句则 省略</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">10</span></span><br><span class="line"><span class="keyword">if</span> (age &gt;= <span class="number">18</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;可以访问该网站&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>if..else</code> 语句</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line"><span class="keyword">if</span> (条件) &#123;</span><br><span class="line">  <span class="comment">// 当条件为 true 时执行的代码</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// 当条件不为 true 时执行的代码</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">10</span></span><br><span class="line"><span class="keyword">if</span> (age &gt;= <span class="number">18</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;可以玩吃鸡&#x27;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;不可以玩吃鸡&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>if..else if ..else</code> 语句</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (条件<span class="number">1</span>) &#123;</span><br><span class="line">  <span class="comment">// 当条件1为  true 时执行的代码</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (条件<span class="number">2</span>) &#123;</span><br><span class="line">  <span class="comment">// 当条件2 为true 时执行的代码</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// 当条件1和 条件2 都不为true 时执行的代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="三元运算符"><a href="#三元运算符" class="headerlink" title="三元运算符"></a>三元运算符</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">条件 ? 表达式<span class="number">1</span> : 表达式<span class="number">2</span></span><br><span class="line"><span class="number">1.</span> 如果 <span class="string">`条件`</span> 的值为<span class="literal">true</span>，会返回表达式<span class="number">1</span>的值</span><br><span class="line"><span class="number">2.</span> 如果<span class="string">`条件`</span>的值为<span class="literal">false</span>，会返回表达式<span class="number">2</span>的值</span><br><span class="line"><span class="comment">// 求两个数的最大值</span></span><br><span class="line"><span class="keyword">var</span> max = n1 &gt; n2 ? n1 : n2</span><br></pre></td></tr></table></figure>

<h2 id="switch-语句"><a href="#switch-语句" class="headerlink" title="switch 语句"></a>switch 语句</h2><blockquote>
<p>if..else 适用于范围的判断，switch..case 适用于具体的值的判断</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line"><span class="keyword">switch</span> (变量) &#123;</span><br><span class="line">  <span class="keyword">case</span> 值<span class="number">1</span>:</span><br><span class="line">    语句<span class="number">1</span></span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">case</span> 值<span class="number">2</span>:</span><br><span class="line">    语句<span class="number">2</span></span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  …</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    默认语句</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意 :<br>break 可以省略，如果省略，代码会继续执行下一个 case<br>switch 语句在比较值时使用的是 <strong>全等</strong> 操作符, 因此不会发生类型转换（例如，字符串’10’ 不等于数值 10）</p>
</blockquote>
<h1 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h1><h2 id="while-循环"><a href="#while-循环" class="headerlink" title="while 循环"></a>while 循环</h2><p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102205019.png"></p>
<p>基本语法 :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 当循环条件为true时，执行循环体</span></span><br><span class="line"><span class="comment">// 当循环条件为false时，结束循环</span></span><br><span class="line"><span class="keyword">while</span> (循环条件) &#123;</span><br><span class="line">  <span class="comment">// 循环体：需要循环执行的语句</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>代码示例:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 计算1-100之间所有数的和 (讲)</span></span><br><span class="line"><span class="comment">// 初始化变量</span></span><br><span class="line"><span class="keyword">var</span> i = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> sum = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> (i &lt;= <span class="number">100</span>) &#123;</span><br><span class="line">  <span class="comment">// 判断条件</span></span><br><span class="line">  sum += i <span class="comment">// 循环体</span></span><br><span class="line">  i++ <span class="comment">// 自增，修改循环条件（不能省略）</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(sum)</span><br></pre></td></tr></table></figure>

<h2 id="do-while-循环"><a href="#do-while-循环" class="headerlink" title="do..while 循环"></a>do..while 循环</h2><blockquote>
<p>do..while 循环和 while 循环非常像，二者经常可以相互替代，但是 do..while 的特点是不管条件成不成立，都会执行一次。</p>
</blockquote>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102205045.png"></p>
<p>基础语法 :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  <span class="comment">// 循环体</span></span><br><span class="line">&#125; <span class="keyword">while</span> (条件)</span><br></pre></td></tr></table></figure>

<p>代码示例 :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 初始化变量</span></span><br><span class="line"><span class="keyword">var</span> i = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> sum = <span class="number">0</span></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  sum += i <span class="comment">// 循环体</span></span><br><span class="line">  i++ <span class="comment">// 自增</span></span><br><span class="line">&#125; <span class="keyword">while</span> (i &lt;= <span class="number">100</span>) <span class="comment">// 循环条件</span></span><br></pre></td></tr></table></figure>

<h2 id="for-循环"><a href="#for-循环" class="headerlink" title="for 循环"></a>for 循环</h2><p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102205112.png"></p>
<p>for 循环语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. for循环使用分号分隔</span></span><br><span class="line"><span class="comment">// 2. for循环有2个分号，两个分号不能少</span></span><br><span class="line"><span class="keyword">for</span> (初始化语句; 判断语句; 自增语句) &#123;</span><br><span class="line">  <span class="comment">// 循环体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行顺序：1243 —- 243 —–243(直到循环条件变成 false)</p>
<ol>
<li>初始化语句</li>
<li>判断语句</li>
<li>自增或者自减</li>
<li>循环体</li>
</ol>
<p>for 循环代码示例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 打印1-5之间所有数</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(i) <span class="comment">// 6 即便循环已经结束了，我们依然可以访问 i 的值</span></span><br></pre></td></tr></table></figure>

<p>思考 1：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1 求1-100之间所有数的和、平均值</span></span><br><span class="line"><span class="comment">// 2 求1-100之间所有数的乘积</span></span><br><span class="line"><span class="comment">// 3 计算1-100之间能3整除的数的和</span></span><br></pre></td></tr></table></figure>

<p>思考 2：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1 计算1-100之间不能被7整除的数的和</span></span><br><span class="line"><span class="comment">// 2 求1-100之间所有偶数的和</span></span><br><span class="line"><span class="comment">// 3 同时求1-100之间所有偶数和奇数的和</span></span><br></pre></td></tr></table></figure>

<p>思考 3（双重 for 循环）：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1  网页打印5*5方形★阵  document.write()</span></span><br><span class="line"><span class="comment">// 2  网页打印直角三角形</span></span><br><span class="line"><span class="comment">// 3  网页打印9*9乘法表</span></span><br></pre></td></tr></table></figure>

<h2 id="for-in-循环"><a href="#for-in-循环" class="headerlink" title="for ..in 循环"></a>for ..in 循环</h2><p>详见遍历对象</p>
<h2 id="break-和-continue"><a href="#break-和-continue" class="headerlink" title="break 和 continue"></a>break 和 continue</h2><blockquote>
<p><strong>break</strong>: 结束/中止循环（可以用在 switch 语句和循环语句中）</p>
<p>立即跳出当前整个循环，即循环结束，开始执行循环后面的内容（直接跳传出大括号）</p>
<p><strong>continue</strong>: 结束本次循环，进行下一次循环 （只能用在循环语句中）</p>
<p>立即跳出当前循环，继续下一次循环（跳到 i++的地方）</p>
<p>在一个循环里，continue 和 break 后面不能在写任何语句，因为永远无法执行到</p>
</blockquote>
<p>思考 1 :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 输出结果是什么？ 1 2 3 4 6</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">if</span> (i == <span class="number">5</span>) &#123;</span><br><span class="line">    <span class="keyword">continue</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (i == <span class="number">7</span>) &#123;</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结 :"></a>总结 :</h2><ol>
<li>循环有很多种，但是以后用得最多的是 for 循环</li>
<li>当不明确循环次数的时候，可以使用 while 循环</li>
<li>当无论如何都要执行一次代码的时候，可以使用 do..while 循环</li>
<li>循环可以相互替代</li>
</ol>
<h1 id="Array-数组"><a href="#Array-数组" class="headerlink" title="Array 数组"></a>Array 数组</h1><ul>
<li>将多个元素，按一定顺序排列放到一个集合中 ， 那么这个集合我们就称之为数组</li>
<li>可以存放任意类型的数据（一般一个数组只存放一种类型）</li>
<li>特点 : 用逗号隔开，有顺序，有长度，数组长度可以动态调整</li>
<li>用途 : 存储大量的数据</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 为什么要有数组?</span></span><br><span class="line"><span class="comment">// 1. 我们知道,一个变量能够存储一个值, 当我们想要存储多个值的时候, 就可以使用数组。比如存储一个班级里面所有学生的名;</span></span><br><span class="line"><span class="comment">// 2. 使用数组可以对多个相同类型的值统一的管理,存储起来方便,操作的时候,也会很方便</span></span><br></pre></td></tr></table></figure>

<h2 id="创建数组"><a href="#创建数组" class="headerlink" title="创建数组"></a>创建数组</h2><ol>
<li><p>通过 <strong>构造函数</strong> 创建数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>() <span class="comment">// 创建了一个空数组</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">4</span>) <span class="comment">// 创建了一个数组，长度为4,里面全是空值</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">&#x27;4&#x27;</span>) <span class="comment">// 创建了一个数组，长度为1,内容为字符串 &#x27;4&#x27;</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">2</span>, <span class="number">3</span>) <span class="comment">// 创建了一个数组，里面存放了2个数字</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>通过 <strong>数组字面量</strong> 创建数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 = [] <span class="comment">// 创建一个空数组</span></span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="number">4</span>] <span class="comment">// 创建了一个数组，长度为1,内容为数字 4</span></span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="number">2</span>, <span class="number">3</span>] <span class="comment">// 创建一个包含2个数值的数组，多个数组项以逗号隔开</span></span><br><span class="line"><span class="keyword">var</span> arr3 = [<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;b&#x27;</span>] <span class="comment">// 创建一个包含两个字符串的数组</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="数组的长度与下标"><a href="#数组的长度与下标" class="headerlink" title="数组的长度与下标"></a>数组的长度与下标</h2><ul>
<li><p>数组的长度 : 跟字符串一样,数组有一个 length 属性,, 指数组中存放的元素的个数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [] <span class="comment">// 空数组 长度为 0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line">arr.length <span class="comment">// 长度就是3</span></span><br><span class="line"></span><br><span class="line">arr.length = <span class="number">0</span> <span class="comment">// 设置length属性改变数组中元素的个数</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>数组的下标（又称索引） : 因为数组有序的，有序的就应该有自己的序号，而这个序号就是每个元素对应的下标，<strong>下标从 0 开始 , 到 arr.length-1 结束</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 数组取值，如果下标不存在，则返回 undefined</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;zs&#x27;</span>, <span class="string">&#x27;ls&#x27;</span>, <span class="string">&#x27;ww&#x27;</span>]</span><br><span class="line">arr[<span class="number">0</span>] <span class="comment">// zs</span></span><br><span class="line">arr[<span class="number">2</span>] <span class="comment">// ww</span></span><br><span class="line">arr[<span class="number">5</span>] <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组的赋值</span></span><br><span class="line"><span class="comment">// 格式：数组名[下标] = 值</span></span><br><span class="line"><span class="comment">// 如果下标有对应的值，会把原来的值覆盖，如果下标不存在，会给数组新增一个元素。</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>]</span><br><span class="line">arr[<span class="number">0</span>] = <span class="string">&#x27;yellow&#x27;</span> <span class="comment">// 把red替换成了yellow</span></span><br><span class="line">arr[<span class="number">3</span>] = <span class="string">&#x27;pink&#x27;</span> <span class="comment">// 给数组新增加了一个pink的值</span></span><br><span class="line"><span class="comment">// 如果下标有跨度,中间全是empty 不合法</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在数组末尾添加新的元素</span></span><br><span class="line">arr[arr.length] = 值</span><br><span class="line">arr.push(值)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="数组的遍历"><a href="#数组的遍历" class="headerlink" title="数组的遍历"></a>数组的遍历</h2><blockquote>
<p>遍历 : 对数组的每一个元素都访问一次就叫遍历</p>
</blockquote>
<p>数组遍历的基本语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">  <span class="comment">// 数组遍历的固定结构</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 将数组中的数从小到大排列</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>]</span><br><span class="line"><span class="comment">// var arr = [1,2,3,4,5,6,7,8]</span></span><br><span class="line"><span class="keyword">var</span> numi = <span class="number">0</span></span><br><span class="line"><span class="keyword">var</span> numj = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; arr.length - <span class="number">1</span>; j++) &#123;</span><br><span class="line">  numj += <span class="number">1</span></span><br><span class="line">  <span class="keyword">var</span> flag = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span> - j; i++) &#123;</span><br><span class="line">    <span class="comment">// document.write(&#x27;(&#x27; + arr[i] + &#x27;,&#x27; + arr[i + 1] + &#x27;)&#x27;)</span></span><br><span class="line">    numi += <span class="number">1</span></span><br><span class="line">    <span class="comment">// 两两比较，如果前面的大于后面的，交换位置</span></span><br><span class="line">    <span class="keyword">if</span> (arr[i] &gt; arr[i + <span class="number">1</span>]) &#123;</span><br><span class="line">      flag = <span class="literal">false</span></span><br><span class="line">      <span class="keyword">var</span> temp</span><br><span class="line">      temp = arr[i]</span><br><span class="line">      arr[i] = arr[i + <span class="number">1</span>]</span><br><span class="line">      arr[i + <span class="number">1</span>] = temp</span><br><span class="line">      <span class="comment">// document.write(&#x27;交换了&#x27;)</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// document.write(&#x27;，arr=（&#x27; + arr + &#x27;）&#x27;)</span></span><br><span class="line">  <span class="comment">// document.write(&#x27;&lt;br&gt;&#x27;)</span></span><br><span class="line">  <span class="comment">// 如果一趟下来，一次交换都没有做，说明就已经排好序，就不需要继续比</span></span><br><span class="line">  <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// console.log(arr)</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(arr)</span><br><span class="line"><span class="built_in">console</span>.log(numi)</span><br><span class="line"><span class="built_in">console</span>.log(numj)</span><br></pre></td></tr></table></figure>

<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><blockquote>
<p>把一段相对独立的具有特定功能的代码块封装起来，形成一个独立实体，就是函数</p>
<p>函数的作用就是封装一段代码，只需要声明一次，就可以被多次调用</p>
<p>提高代码的复用率，提高可维护性</p>
</blockquote>
<p>函数三要素包括：<strong>函数名、参数、返回值</strong></p>
<h2 id="函数的声明与调用"><a href="#函数的声明与调用" class="headerlink" title="函数的声明与调用"></a>函数的声明与调用</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 函数声明</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 函数名(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 函数体</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数表达式</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> 函数名 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//函数体</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数调用</span></span><br><span class="line">函数名()</span><br></pre></td></tr></table></figure>

<p>特点：</p>
<ol>
<li>函数声明的时候，函数体并不会执行，函数体只有在调用的时候才会执行</li>
<li>可多次调用</li>
</ol>
<p>练习：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 封装一个打招呼的函数</span></span><br><span class="line"><span class="comment">// 2. 封装一个函数，计算两个数的和</span></span><br><span class="line"><span class="comment">// 3. 封装一个函数，计算1-100之间所有数的和</span></span><br></pre></td></tr></table></figure>

<h2 id="函数的参数-arguments"><a href="#函数的参数-arguments" class="headerlink" title="函数的参数(arguments)"></a>函数的参数(arguments)</h2><ul>
<li><strong>形参 ( 形式参数 )</strong> : 在函数声明时, 设置的参数。作用是占位置 。</li>
<li><strong>实参 ( 实际参数 )</strong> : 在函数调用时传入的参数。 作用 : 函数调用时，会把实参的值赋值给形参，这样形参就有了值，在函数体里，可以直接使用形参!</li>
</ul>
<p><strong>语法 :</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 带参数的函数声明</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 函数名 (<span class="params">形参<span class="number">1</span>, 形参<span class="number">2</span>, 形参...</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// 函数体</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 带参数的函数调用</span></span><br><span class="line">函数名(实参<span class="number">1</span>, 实参<span class="number">2</span>, 实参<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在声明函数的时候，碰到不确定的值的时候，就可以定义成形参</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>如果实参的个数大于形参的个数，多余的实参会被 保存到函数的 arguments 对象里，arguments 对象里保存了所有的实参，arguments 是一个伪数组（可以像数组一样使用）</li>
<li>如果实参的个数小于形参的个数，不够的参数会用 undefined 来补充</li>
</ol>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 实参个数大于形参个数</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getSum</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// return a + b // 3</span></span><br><span class="line">  <span class="comment">// 任意多个数相加, 并没有调用形参，即可以省略不写</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>)</span><br><span class="line">  <span class="keyword">var</span> sum = <span class="number">0</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">arguments</span>.length; i++) &#123;</span><br><span class="line">    sum += <span class="built_in">arguments</span>[i]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> result = getSum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>)</span><br><span class="line"><span class="built_in">console</span>.log(result) <span class="comment">// 8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 实参个数小于形参个数</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getSum1</span>(<span class="params">a, b, c, d</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(d) <span class="comment">// undefined</span></span><br><span class="line">  <span class="keyword">return</span> a + b + c + d</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> result1 = getSum1(<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>)</span><br><span class="line"><span class="built_in">console</span>.log(result1) <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure>

<h2 id="函数的返回值"><a href="#函数的返回值" class="headerlink" title="函数的返回值"></a>函数的返回值</h2><blockquote>
<p>当函数执行完的时候，我们期望函数给我一些反馈（比如计算的结果），这个时候可以让函数返回一些东西。也就是返回值。函数通过 return 返回一个返回值</p>
</blockquote>
<p>返回值语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 声明一个带返回值的函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 函数名 (<span class="params">形参<span class="number">1</span>, 形参<span class="number">2</span>, 形参...</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 函数体</span></span><br><span class="line">  <span class="keyword">return</span> 返回值</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以通过变量来接收这个返回值</span></span><br><span class="line"><span class="keyword">var</span> 变量 = 函数名(实参<span class="number">1</span>, 实参<span class="number">2</span>, 实参<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>函数返回值注意事项：</p>
<ul>
<li><strong>return 语句代表一个函数的结束，后面不能再有语句（语句不会执行）</strong></li>
<li>函数可以没有返回值，函数如果没有 return，那么返回结果是 <strong>undefined</strong></li>
<li>函数的参数可以有多个，但是返回值只能有 <strong>1</strong> 个</li>
<li><code>return</code> 在函数包含判断语句时，可以用来直接停掉一个函数的执行</li>
</ul>
<p><strong>练习：</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 求两个数的最大值,并且返回。</span></span><br><span class="line"><span class="comment">// 2. 求三个数的最大值,并且返回。</span></span><br><span class="line"><span class="comment">// 3. 求一个数组的最大值和最小值，并且返回。</span></span><br></pre></td></tr></table></figure>

<h2 id="函数内部调用函数"><a href="#函数内部调用函数" class="headerlink" title="函数内部调用函数"></a>函数内部调用函数</h2><blockquote>
<p>在函数内部是可以继续调用别的函数的。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 求阶乘</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getJc</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> sum = <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    sum *= i</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> result = getJc(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 求阶乘和</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getJcSum</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> sum1 = <span class="number">0</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">    sum1 += getJc(j)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> sum1</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> result1 = getJcSum(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">console</span>.log(result1)</span><br></pre></td></tr></table></figure>

<h2 id="函数是一种数据类型-function"><a href="#函数是一种数据类型-function" class="headerlink" title="函数是一种数据类型(function)"></a>函数是一种数据类型(function)</h2><h3 id="函数可以作为参数"><a href="#函数可以作为参数" class="headerlink" title="函数可以作为参数"></a>函数可以作为参数</h3><blockquote>
<p>通常，我们把作为参数传递的函数叫做回调函数</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  fn()</span><br><span class="line">&#125;</span><br><span class="line">fn1(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;哈哈&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="函数可以作为返回值"><a href="#函数可以作为返回值" class="headerlink" title="函数可以作为返回值"></a>函数可以作为返回值</h3><blockquote>
<p>在 js 高级中，闭包会使用到</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;呵呵&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">fn1()() <span class="comment">// 呵呵</span></span><br></pre></td></tr></table></figure>

<h2 id="匿名函数与自执行函数"><a href="#匿名函数与自执行函数" class="headerlink" title="匿名函数与自执行函数"></a>匿名函数与自执行函数</h2><h3 id="自执行函数"><a href="#自执行函数" class="headerlink" title="自执行函数"></a>自执行函数</h3><p>函数可以自执行</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我可以自己执行哦&#x27;</span>)</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<h3 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h3><blockquote>
<p>匿名函数：没有名字的函数</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 匿名自调用函数 ,用完一次就没了</span></span><br><span class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;哈哈&#x27;</span>)</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<p>匿名函数如何使用：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. 将匿名函数赋值给一个变量，这样就可以通过变量进行调用</span><br><span class="line">2. 自执行（匿名函数自执行）</span><br></pre></td></tr></table></figure>

<p>匿名函数自执行的作用：防止全局变量污染。</p>
<h2 id="函数的断点调试"><a href="#函数的断点调试" class="headerlink" title="函数的断点调试"></a>函数的断点调试</h2><ol>
<li>跳到下个断点, 如果后面没有断点了,那么代码直接执行完</li>
<li>单步调试 : 下一步 没有断点的话,函数就直接跳过</li>
<li>单步调试 : 进入函数</li>
<li>单步调试 : 跳出函数</li>
<li>单步调试 : 下一步 不管有没有断点,都会一步一步的走,纯碎的下一步</li>
<li>让所有的断点失效</li>
<li>自动根据错误断点</li>
</ol>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102205131.png"></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102205150.png"></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102205206.png"></p>
<h2 id="函数的重载"><a href="#函数的重载" class="headerlink" title="函数的重载"></a>函数的重载</h2><p>如果多个函数的函数名相同，但是参数或返回值不同，这些函数是不同的函数</p>
<p>参数不同指 1. 参数的个数不同 2. 参数的数据类型不同</p>
<p>js 中不允许函数的重载，即在 js 中，只要函数名一样，就是同一个函数，如果两个函数名相同，后边的会覆盖前边的</p>
<h1 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h1><ul>
<li><p><strong>对象</strong> : 是一组无序的键（key）值（value）对的集合，有对应的属性和方法</p>
</li>
<li><p><strong>特点 :</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> 声明的变量 = &#123;&#125;</span><br><span class="line"><span class="number">2.</span> 键值对出现</span><br><span class="line"><span class="number">3.</span> 逗号隔开</span><br><span class="line"><span class="number">4.</span> 属性可以是任意类型</span><br></pre></td></tr></table></figure>

</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 数组多个元素之间使用,隔开</span></span><br><span class="line"><span class="comment">// 对象中多个键值对之间也用逗号隔开,键值对的格式： 键:值</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">  age: <span class="number">18</span>,</span><br><span class="line">  sex: <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">  hobby: <span class="string">&#x27;上网&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="this-的基本概念"><a href="#this-的基本概念" class="headerlink" title="this 的基本概念"></a>this 的基本概念</h2><h2 id="创建对象-1-2-种方式-单创"><a href="#创建对象-1-2-种方式-单创" class="headerlink" title="创建对象-1 (2 种方式 单创)"></a>创建对象-1 (2 种方式 单创)</h2><blockquote>
<p>单纯的创建一个对象</p>
</blockquote>
<h3 id="对象字面量"><a href="#对象字面量" class="headerlink" title="对象字面量"></a>对象字面量</h3><blockquote>
<p>字面量 : 直接量，通过看数值，直接看出来类型的</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> p = &#123;&#125;</span><br><span class="line"><span class="keyword">var</span> p = &#123;</span><br><span class="line">  name: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">  age: <span class="number">18</span>,</span><br><span class="line">  sayHi: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="通过-Object-构造函数创建"><a href="#通过-Object-构造函数创建" class="headerlink" title="通过 Object 构造函数创建"></a>通过 Object 构造函数创建</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Object</span>() <span class="comment">// 创建一个空的对象</span></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Object</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;xx&#x27;</span> &#125;)</span><br></pre></td></tr></table></figure>

<p><strong>设置对象的属性</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设置对象的属性 语法  对象名.属性 = 值</span></span><br><span class="line"><span class="comment">// 如果对象有这个属性，修改这个属性</span></span><br><span class="line"><span class="comment">// 如果对象没有这个属性，添加这个属性</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">obj.name = <span class="string">&#x27;zs&#x27;</span></span><br><span class="line">obj.age = <span class="number">18</span></span><br><span class="line">obj.gender = <span class="string">&#x27;男&#x27;</span></span><br><span class="line"><span class="comment">// 添加方法</span></span><br><span class="line">obj.sayHi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;大家好,我是&#x27;</span> + obj.name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="创建对象-2-2-种方式-批量"><a href="#创建对象-2-2-种方式-批量" class="headerlink" title="创建对象-2 (2 种方式 批量)"></a>创建对象-2 (2 种方式 批量)</h2><blockquote>
<p>批量创建对象</p>
<p>在实际开发中，经常需要创建多个相同类型的对象，比如游戏中的怪物，班级的学生等。</p>
</blockquote>
<h3 id="使用工厂函数创建对象"><a href="#使用工厂函数创建对象" class="headerlink" title="使用工厂函数创建对象"></a>使用工厂函数创建对象</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义一个函数，用于创建学生对象</span></span><br><span class="line"><span class="comment">// 工厂函数：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createStudent</span>(<span class="params">name, age, sex</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 创建空对象</span></span><br><span class="line">  <span class="keyword">var</span> stu = &#123;&#125;</span><br><span class="line">  <span class="comment">// 设置对象属性</span></span><br><span class="line">  stu.name = name</span><br><span class="line">  stu.age = age</span><br><span class="line">  stu.sex = sex</span><br><span class="line">  stu.sayHi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;大家好,我是&#x27;</span> + <span class="built_in">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 返回对象</span></span><br><span class="line">  <span class="keyword">return</span> stu</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> stu1 = createStudent(<span class="string">&#x27;zs&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;男&#x27;</span>)</span><br><span class="line">stu1.sayHi()</span><br></pre></td></tr></table></figure>

<p>优点：可以同时创建多个对象</p>
<p>缺点：创建出来的没有具体的类型，都是 object 类型的</p>
<h3 id="自定义构造函数-triangular-flag-on-post"><a href="#自定义构造函数-triangular-flag-on-post" class="headerlink" title="自定义构造函数:triangular_flag_on_post:"></a>自定义构造函数:triangular_flag_on_post:</h3><blockquote>
<p>工厂函数的缺点 就是无法确定对象的具体类型</p>
</blockquote>
<blockquote>
<p>构造函数 ，是一种特殊的函数。主要用来在创建对象时初始化对象， 即为对象成员变量赋初始值，总与 new 运算符一起使用在创建对象的语句中。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Teacher</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 构造函数内部的this指向的是新创建的那个对象</span></span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">  <span class="built_in">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> tea = <span class="keyword">new</span> Teacher(<span class="string">&#x27;zs&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="built_in">console</span>.log(tea)</span><br></pre></td></tr></table></figure>

<ol>
<li>构造函数首字母要大写（推荐做法）</li>
<li>构造函数要和 new 一起使用才有意义</li>
<li>构造函数的作用是用于实例化一个对象，即给对象添加属性和方法</li>
</ol>
<p><strong>new 在执行时会做四件事情</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> <span class="keyword">new</span> 会创建一个新的空对象，类型是Teacher</span><br><span class="line"><span class="number">2.</span> <span class="keyword">new</span> 会让 <span class="built_in">this</span> 指向这个新的对象</span><br><span class="line"><span class="number">3.</span> 执行构造函数  目的：给这个新对象加属性和方法</span><br><span class="line"><span class="number">4.</span> <span class="keyword">new</span> 会返回这个新对象</span><br><span class="line"></span><br><span class="line">构造函数的作用(实例化对象)：给创建出来的对象增加属性和方法</span><br></pre></td></tr></table></figure>

<h2 id="查看一个对象的类型-类型识别"><a href="#查看一个对象的类型-类型识别" class="headerlink" title="查看一个对象的类型(类型识别)"></a>查看一个对象的类型(类型识别)</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="comment">// 只能查看基本数据类型的类型</span></span><br><span class="line"><span class="keyword">instanceof</span> <span class="comment">// 判断对象的具体类型</span></span><br><span class="line"><span class="title">constructor</span>.<span class="title">name</span> // 获取对象的具体类型 适用于任何类型的检测</span><br><span class="line"><span class="title">Object</span>.<span class="title">prototype</span>.<span class="title">toString</span>.<span class="title">call</span>(<span class="params"><span class="string">&#x27;str&#x27;</span></span>) // &#x27;[<span class="title">object</span> <span class="title">String</span>]&#x27; 适用于任何类型的检测</span><br></pre></td></tr></table></figure>

<p><strong>typeof</strong></p>
<p>用于查看基本数据的数据类型， number string boolean undefined</p>
<p>null 比较特殊，结果是 object</p>
<p>如果查看复杂数据类型，返回的都是 object 类型</p>
<p>函数的结果是 function</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// typeof 判断</span></span><br><span class="line"><span class="comment">// 简单类型</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="number">12</span> <span class="comment">// &#x27;number&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">&#x27;abc&#x27;</span> <span class="comment">// &#x27;string&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span> <span class="comment">// &#x27;boolean&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span> <span class="comment">// &#x27;underfined&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span> <span class="comment">// &#x27;object&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 复杂类型 (引用类型)</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125; <span class="comment">// &#x27;function&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> [] <span class="comment">// &#x27;object&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> &#123;&#125; <span class="comment">// &#x27;object&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>instanceof 判断</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line">object <span class="keyword">instanceof</span> <span class="title">constructor</span></span><br></pre></td></tr></table></figure>

<p>用来检测 <code>constructor.prototype</code> 是否存在于参数 <code>object</code> 的原型链中</p>
<p>不能用于类型识别</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// instanceof 判断</span></span><br><span class="line"><span class="keyword">var</span> simpleStr = <span class="string">&#x27;This is a simple string&#x27;</span></span><br><span class="line"><span class="keyword">var</span> myString = <span class="keyword">new</span> <span class="built_in">String</span>()</span><br><span class="line"><span class="keyword">var</span> newStr = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&#x27;String created with constructor&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> myObj = &#123;&#125;</span><br><span class="line"><span class="keyword">var</span> myNonObj = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</span><br><span class="line"><span class="keyword">var</span> myArr = []</span><br><span class="line"><span class="keyword">var</span> myFn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">simpleStr <span class="keyword">instanceof</span> <span class="built_in">String</span> <span class="comment">// 返回 false, 检查原型链会找到 undefined</span></span><br><span class="line">myString <span class="keyword">instanceof</span> <span class="built_in">String</span> <span class="comment">// 返回 true</span></span><br><span class="line">newStr <span class="keyword">instanceof</span> <span class="built_in">String</span> <span class="comment">// 返回 true</span></span><br><span class="line">myString <span class="keyword">instanceof</span> <span class="built_in">Object</span> <span class="comment">// 返回 true</span></span><br><span class="line"></span><br><span class="line">myObj <span class="keyword">instanceof</span> <span class="built_in">Object</span> <span class="comment">// 返回 true, 尽管原型没有定义</span></span><br><span class="line">;(&#123;&#125; <span class="keyword">instanceof</span> <span class="built_in">Object</span>) <span class="comment">// 返回 true, 同上</span></span><br><span class="line">myNonObj <span class="keyword">instanceof</span> <span class="built_in">Object</span> <span class="comment">// 返回 false, 一种创建对象的方法，这种方法创建的对象不</span></span><br><span class="line"></span><br><span class="line">myArr <span class="keyword">instanceof</span> <span class="built_in">Array</span> <span class="comment">// true</span></span><br><span class="line">myArr <span class="keyword">instanceof</span> <span class="built_in">Object</span> <span class="comment">// true</span></span><br><span class="line">myFn <span class="keyword">instanceof</span> <span class="built_in">Object</span> <span class="comment">// true</span></span><br><span class="line">myFn <span class="keyword">instanceof</span> <span class="built_in">Function</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p><strong>constructor.name</strong></p>
<p>Undefined/Null 没有 constructor 属性</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myArr = []</span><br><span class="line"><span class="keyword">var</span> myFn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> myObj = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 原型的构造函数</span></span><br><span class="line">myArr.constructor.name <span class="comment">// Array</span></span><br><span class="line">myFn.constructor.name <span class="comment">// Object</span></span><br><span class="line">myObj.constructor.name <span class="comment">// Function</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Teacher</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">  <span class="built_in">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> tea = <span class="keyword">new</span> Teacher(<span class="string">&#x27;zs&#x27;</span>, <span class="number">18</span>)</span><br><span class="line">tea.constructor.name <span class="comment">// Teacher</span></span><br></pre></td></tr></table></figure>

<p><strong>Object.prototype.toString</strong></p>
<p>适用于任何类型的检测，不能识别自定义对象类型</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="string">&#x27;str&#x27;</span>) <span class="comment">// &#x27;[object String]&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="操作对象的属性"><a href="#操作对象的属性" class="headerlink" title="操作对象的属性"></a>操作对象的属性</h2><p><code>.</code> 语法 —– 对象名.属性名 ( 看似变量，不是字符串 )</p>
<p><code>[]</code> 语法 —- 对象名 <a href="%E5%AD%97%E7%AC%A6%E4%B8%B2"> 属性字符串 </a> ，也叫关联数组的方式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取对象属性的语法：</span></span><br><span class="line">	<span class="comment">// 对象.属性：对象的属性</span></span><br><span class="line">    <span class="comment">// 1. 如果有这个属性，直接返回属性值</span></span><br><span class="line">    <span class="comment">// 2. 如果没有这个属性，返回undefined</span></span><br><span class="line">	<span class="comment">// 3. 如果是方法，可以调用</span></span><br><span class="line"><span class="comment">// 设置对象的属性的语法</span></span><br><span class="line">    <span class="comment">// 对象.属性 = 值</span></span><br><span class="line">    <span class="comment">// 1. 如果对象有这个属性，修改这个属性</span></span><br><span class="line">    <span class="comment">// 2. 如果对象没有这个属性，添加这个属性</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name: <span class="string">&#x27;zs&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj.name) <span class="comment">// ok</span></span><br><span class="line"><span class="built_in">console</span>.log(obj[name]) <span class="comment">// X</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.<span class="string">&#x27;name&#x27;</span>) <span class="comment">// X</span></span><br><span class="line"></span><br><span class="line">obj.age = <span class="number">18</span> <span class="comment">// 增加 age 属性为 18</span></span><br><span class="line">obj.name = <span class="string">&#x27;ls&#x27;</span> <span class="comment">// 修改name属性为 ls</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> key = <span class="string">&#x27;name&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.key) <span class="comment">// X</span></span><br><span class="line"><span class="built_in">console</span>.log(obj[key]) <span class="comment">// ok</span></span><br><span class="line"><span class="built_in">console</span>.log(obj[<span class="string">&#x27;name&#x27;</span>]) <span class="comment">// ok</span></span><br></pre></td></tr></table></figure>

<p>二者的区别：当属性名是一个字符串存储在变量中的时候，只能使用关联数组的方式。</p>
<p>应用场景 : 遍历对象</p>
<p><strong>删除对象属性</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 删除对象属性</span></span><br><span class="line"><span class="keyword">delete</span> obj.name <span class="comment">// 删除obj的name属性</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">delete</span> obj.name) <span class="comment">// 如果删除成功，返回true，删除失败，返回false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// var 声明的全局变量不能被删除</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">12</span></span><br><span class="line">str = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">delete</span> <span class="built_in">window</span>.num) <span class="comment">// false 删除失败</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">delete</span> <span class="built_in">window</span>.str) <span class="comment">// true 删除成功</span></span><br><span class="line"><span class="built_in">console</span>.log(num) <span class="comment">// 12</span></span><br><span class="line"><span class="built_in">console</span>.log(str) <span class="comment">// 报错 str is not undefined</span></span><br></pre></td></tr></table></figure>

<h2 id="遍历对象"><a href="#遍历对象" class="headerlink" title="遍历对象"></a>遍历对象</h2><p>通过 <code>for..in</code> 循环语法可以遍历一个对象</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 遍历对象</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="comment">// 键</span></span><br><span class="line">  <span class="built_in">console</span>.log(key)</span><br><span class="line">  <span class="comment">// 值</span></span><br><span class="line">  <span class="built_in">console</span>.log(obj[key])</span><br><span class="line">  <span class="built_in">console</span>.log(key + <span class="string">&#x27;==&#x27;</span> + obj[key])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断一个属性是否是对象的一个属性</span></span><br><span class="line"><span class="comment">// console.log(&#x27;name&#x27; in obj) 返回布尔值</span></span><br><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;name&#x27;</span> <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;是&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取对象里的所有属性</span></span><br><span class="line"><span class="comment">// 结构: Object.keys(对象)  返回一个包含所有属性的数组</span></span><br><span class="line"><span class="keyword">var</span> keys = <span class="built_in">Object</span>.keys(obj)</span><br></pre></td></tr></table></figure>

<h2 id="原始类型与引用类型"><a href="#原始类型与引用类型" class="headerlink" title="原始类型与引用类型"></a>原始类型与引用类型</h2><ul>
<li>原始类型（简单数据类型/值类型）</li>
</ul>
<blockquote>
<p><code>Number</code> <code>String</code> <code>Boolean</code> <code>Undefined</code> <code>Null</code></p>
</blockquote>
<ul>
<li>引用类型（复杂数据类型）</li>
</ul>
<blockquote>
<p><code>Object</code> <code>Array</code> <code>function</code> <code>自定义的对象</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num1 = <span class="number">123</span></span><br><span class="line"><span class="keyword">var</span> num2 = num1</span><br><span class="line">num2 = <span class="number">456</span></span><br><span class="line"><span class="built_in">console</span>.log(num1) <span class="comment">// 123</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">var</span> obj2 = obj1 <span class="comment">// obj1和obj2，均指向了同一个对象</span></span><br><span class="line">obj2.a = <span class="number">3</span> <span class="comment">// 对obj2的任何操作</span></span><br><span class="line"><span class="built_in">console</span>.log(obj1.a) <span class="comment">// 3  同时也会影响到 obj1</span></span><br></pre></td></tr></table></figure>

<p>原始数据类型和引用数据类型，主要是根据内存存储方式来区分的</p>
<ul>
<li>原始类型储存在栈（Stack）中，存的是<strong>值本身</strong>（值类型），进行赋值的时候，赋值的是值本身</li>
<li>引用类型储存在堆（Heap）中，并非储存变量真实数值而是<strong>引用</strong>（也叫<strong>地址</strong>），进行赋值的时候，赋值的是地址，而不是数据本身</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.</span></span><br><span class="line"><span class="comment">// a -&gt; x</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 相当于</span></span><br><span class="line">  <span class="comment">// var a = 10</span></span><br><span class="line">  <span class="comment">// var b = 20</span></span><br><span class="line">  <span class="comment">// 函数的参数 其实就是函数内部的局部变量</span></span><br><span class="line">  a = a + <span class="number">1</span></span><br><span class="line">  b = b + <span class="number">1</span></span><br><span class="line">  <span class="built_in">console</span>.log(a) <span class="comment">// 11</span></span><br><span class="line">  <span class="built_in">console</span>.log(b) <span class="comment">// 21</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> y = <span class="number">20</span></span><br><span class="line">fn(x, y)</span><br><span class="line"><span class="built_in">console</span>.log(x) <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">console</span>.log(y) <span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.</span></span><br><span class="line"><span class="keyword">var</span> p = &#123;</span><br><span class="line">  name: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">  age: <span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">person</span>) </span>&#123;</span><br><span class="line">  person.name = <span class="string">&#x27;ls&#x27;</span></span><br><span class="line">  <span class="built_in">console</span>.log(person.name) <span class="comment">// ls</span></span><br><span class="line">&#125;</span><br><span class="line">fn(p)</span><br><span class="line"><span class="built_in">console</span>.log(p.name) <span class="comment">// ls</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, salary</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">  <span class="built_in">this</span>.age = age</span><br><span class="line">  <span class="built_in">this</span>.salary = salary</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params">person</span>) </span>&#123;</span><br><span class="line">  person.name = <span class="string">&#x27;ls&#x27;</span></span><br><span class="line">  <span class="built_in">console</span>.log(person.name) <span class="comment">// ls</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person(<span class="string">&#x27;zs&#x27;</span>, <span class="number">18</span>, <span class="number">1000</span>) <span class="comment">// 创建一个新对象</span></span><br><span class="line"><span class="built_in">console</span>.log(p.name) <span class="comment">// zs</span></span><br><span class="line">f1(p)</span><br><span class="line"><span class="built_in">console</span>.log(p.name) <span class="comment">// ls</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, salary</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">  <span class="built_in">this</span>.age = age</span><br><span class="line">  <span class="built_in">this</span>.salary = salary</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params">person</span>) </span>&#123;</span><br><span class="line">  person.name = <span class="string">&#x27;ls&#x27;</span></span><br><span class="line">  <span class="comment">// person 指向新的对象</span></span><br><span class="line">  person = &#123;</span><br><span class="line">    name: <span class="string">&#x27;ww&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(person.name) <span class="comment">// ww</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person(<span class="string">&#x27;zs&#x27;</span>, <span class="number">18</span>, <span class="number">1000</span>) <span class="comment">// 创建一个新对象</span></span><br><span class="line"><span class="built_in">console</span>.log(p.name) <span class="comment">// zs</span></span><br><span class="line">f1(p)</span><br><span class="line"><span class="built_in">console</span>.log(p.name) <span class="comment">// ls</span></span><br></pre></td></tr></table></figure>

<h2 id="object-valueOf"><a href="#object-valueOf" class="headerlink" title="object.valueOf()"></a>object.valueOf()</h2><p>返回值为该对象的原始值，如果对象没有原始值，则 <code>valueOf</code> 将返回对象本身</p>
<table>
<thead>
<tr>
<th><strong>对象</strong></th>
<th><strong>返回值</strong></th>
</tr>
</thead>
<tbody><tr>
<td>Array</td>
<td>返回数组对象本身</td>
</tr>
<tr>
<td>Boolean</td>
<td>布尔值</td>
</tr>
<tr>
<td>Date</td>
<td>存储的时间是从 1970 年 1 月 1 日午夜开始计的毫秒数 UTC</td>
</tr>
<tr>
<td>Function</td>
<td>函数本身</td>
</tr>
<tr>
<td>Number</td>
<td>数字值</td>
</tr>
<tr>
<td>Object</td>
<td>对象本身 （这是默认情况）</td>
</tr>
<tr>
<td>String</td>
<td>字符串值</td>
</tr>
<tr>
<td></td>
<td>Math 和 Error 对象没有 valueOf 方法</td>
</tr>
</tbody></table>
<h1 id="内置对象"><a href="#内置对象" class="headerlink" title="内置对象"></a>内置对象</h1><blockquote>
<p>JS 内置对象就是指 Javascript 自带的一些对象，供开发者使用，这些对象提供了一些常用的的功能。</p>
<p>常见的内置对象有 Math、String、Array、Date 等</p>
</blockquote>
<ul>
<li>跳转到定义<code>ctrl+左键</code></li>
<li><a href="https://developer.mozilla.org/zh-CN/">火狐开发者网站 MDN</a></li>
<li><a href="http://www.w3school.com.cn/jsref/">W3School 网站</a></li>
</ul>
<h2 id="如何学习一个方法？"><a href="#如何学习一个方法？" class="headerlink" title="如何学习一个方法？"></a>如何学习一个方法？</h2><ol>
<li>方法的功能</li>
<li>参数的意义和<strong>类型</strong></li>
<li>返回值意义和<strong>类型</strong></li>
<li>demo 进行测试</li>
</ol>
<h2 id="Math-对象"><a href="#Math-对象" class="headerlink" title="Math 对象"></a>Math 对象</h2><ul>
<li><p>属性 PI</p>
<p><code>Math.PI</code></p>
</li>
<li><p>最大值/最小值</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Math.max()</span><br><span class="line">Math.min()</span><br></pre></td></tr></table></figure>

<ul>
<li>取整</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Math</span>.ceil() <span class="comment">// 向上取整</span></span><br><span class="line"><span class="built_in">Math</span>.floor() <span class="comment">// 向下取整</span></span><br><span class="line"><span class="built_in">Math</span>.round() <span class="comment">// 四舍五入，如果是.5，则取更大的那个数 (-1.5 -&gt; -1)</span></span><br></pre></td></tr></table></figure>

<ul>
<li>随机数</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Math</span>.random() <span class="comment">// 返回一个[0,1)之间的数，能取到0，取不到1</span></span><br><span class="line"><span class="comment">// [0~N]随机数 parseInt(Math.random * (N+1))</span></span><br><span class="line"><span class="comment">// [4~9] ==&gt; [0~5]+4</span></span><br></pre></td></tr></table></figure>

<ul>
<li>绝对值</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Math</span>.abs() <span class="comment">// 求绝对值</span></span><br></pre></td></tr></table></figure>

<ul>
<li>次幂和平方</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Math</span>.pow(num, power) <span class="comment">// 求 num 的 power 次方</span></span><br><span class="line"><span class="built_in">Math</span>.sqrt(num) <span class="comment">// 对 num 开平方</span></span><br></pre></td></tr></table></figure>

<ul>
<li>练习</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 随机生成一个 rgb 颜色?</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomRGB</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> colorA = <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random() * <span class="number">256</span>)</span><br><span class="line">  <span class="keyword">var</span> colorB = <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random() * <span class="number">256</span>)</span><br><span class="line">  <span class="keyword">var</span> colorC = <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random() * <span class="number">256</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;rgb(&#x27;</span> + colorA + <span class="string">&#x27;,&#x27;</span> + colorB + <span class="string">&#x27;,&#x27;</span> + colorC + <span class="string">&#x27;)&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Date-对象"><a href="#Date-对象" class="headerlink" title="Date 对象"></a>Date 对象</h2><blockquote>
<p>Date 对象用来处理日期和时间</p>
</blockquote>
<ul>
<li>创建一个日期对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 不传参数：创建一个当前时间的对象</span></span><br><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 日期格式字符串：创建一个指定时间的日期对象</span></span><br><span class="line"><span class="comment">// &#x27;-&#x27; 在 safari 下不识别，推荐用 /</span></span><br><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&#x27;2018/12/02&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&#x27;2018/12/02 00:02:05&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 日期以逗号分隔：注意月份从0开始</span></span><br><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2018</span>, <span class="number">11</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">5</span>) <span class="comment">// 2018/12/02</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 时间戳</span></span><br><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">1543680125000</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>日期格式化(了解)</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">date.toString() <span class="comment">// 默认的日期格式 ，包括日期和时间</span></span><br><span class="line">date.toLocalString() <span class="comment">// 本地风格的日期格式（兼容性）</span></span><br><span class="line">date.toDateString() <span class="comment">// 只显示日期</span></span><br><span class="line">date.toLocalDateString()</span><br><span class="line">date.toTimeString() <span class="comment">// 只显示时间</span></span><br><span class="line">date.toLocalTimeString()</span><br></pre></td></tr></table></figure>

<ul>
<li>获取日期的指定部分</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">getMilliseconds() <span class="comment">// 获取毫秒值</span></span><br><span class="line">getSeconds() <span class="comment">// 获取秒</span></span><br><span class="line">getMinutes() <span class="comment">// 获取分钟</span></span><br><span class="line">getHours() <span class="comment">// 获取小时</span></span><br><span class="line">getDay() <span class="comment">// 获取星期，0-6    0：星期天</span></span><br><span class="line">getDate() <span class="comment">// 获取日，即当月的第几天</span></span><br><span class="line">getMonth() <span class="comment">// 返回月份，注意月份从0开始</span></span><br><span class="line">getFullYear() <span class="comment">// 返回4位的年份  如 2018</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 思考：</span></span><br><span class="line"><span class="comment">// 封装一个函数，返回当前的时间，格式是：yyyy-MM-dd HH:mm:ss</span></span><br></pre></td></tr></table></figure>

<ul>
<li>时间戳</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> date = +<span class="keyword">new</span> <span class="built_in">Date</span>() <span class="comment">// 1970年01月01日00时00分00秒起至现在的总毫秒数</span></span><br><span class="line"><span class="comment">// 思考</span></span><br><span class="line"><span class="comment">// 如何统计一段代码的执行时间？</span></span><br></pre></td></tr></table></figure>

<h2 id="Array-对象"><a href="#Array-对象" class="headerlink" title="Array 对象"></a>Array 对象</h2><blockquote>
<p>数组对象在 javascript 中非常的常用</p>
</blockquote>
<ul>
<li>数组转换</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法：arr.join(separator)</span></span><br><span class="line"><span class="comment">// 作用：将数组的值拼接成字符串</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">arr.join() <span class="comment">// 不传参数，默认用逗号进行拼接，返回拼接好的字符串</span></span><br><span class="line">arr.join(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">arr.join(<span class="string">&#x27;-&#x27;</span>) <span class="comment">// 用 - 进行拼接</span></span><br></pre></td></tr></table></figure>

<ul>
<li>数组的增删操作</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">arr.push() <span class="comment">// 从后面添加一个或多个元素，逗号隔开，返回新数组的 length</span></span><br><span class="line">arr.pop() <span class="comment">// 从数组的后面删除元素，返回删除的那个元素</span></span><br><span class="line">arr.unshift() <span class="comment">// 从数组的前面的添加元素，返回新数组的 length</span></span><br><span class="line">arr.shift() <span class="comment">// 从数组的最前面删除元素，返回删除的那个元素</span></span><br><span class="line">arr.push(arr1) <span class="comment">// 把 arr1 当成一个整体放到 arr 里</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 练习1</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;刘备&#x27;</span>]</span><br><span class="line"><span class="comment">// 添加数据后变成：[&#x27;赵云&#x27;,&#x27;马超&#x27;,&#x27;刘备&#x27;,&#x27;关羽&#x27;,&#x27;张飞&#x27;]</span></span><br><span class="line"><span class="comment">// 删除数据后变成：[&#x27;关羽&#x27;,&#x27;张飞&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 练习2</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;赵云&#x27;</span>, <span class="string">&#x27;马超&#x27;</span>, <span class="string">&#x27;刘备&#x27;</span>, <span class="string">&#x27;关羽&#x27;</span>, <span class="string">&#x27;张飞&#x27;</span>]</span><br><span class="line"><span class="comment">// 把数组的最后一个元素变成数组的第一个元素</span></span><br><span class="line"><span class="comment">// 把数组的第一个元素变成数组的最后一个元素</span></span><br></pre></td></tr></table></figure>

<ul>
<li>数组的翻转与排序</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">arr.reverse() <span class="comment">// 翻转数组</span></span><br><span class="line">arr.sort() <span class="comment">// 数组的排序，按照首字符依次比较</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// sort 方法可以传递一个函数作为参数，这个参数用来控制数组如何进行排序</span></span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 参数为 true 时，即返回值 &gt; 0 时，交换位置</span></span><br><span class="line">  <span class="comment">// return a - b // 从小到大排序</span></span><br><span class="line">  <span class="keyword">return</span> b - a <span class="comment">// 从大到小排序</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 思考：</span></span><br><span class="line"><span class="comment">// 将[3, 6, 1, 5, 10, 2,11]从小到大排列</span></span><br><span class="line"><span class="comment">// 将字符串数组按照字符长度从小到大排列 a.sort(function (a, b) &#123;return a.length - b.length&#125;)</span></span><br><span class="line"><span class="comment">// 将学生数组按照年龄从小到大排列</span></span><br></pre></td></tr></table></figure>

<ul>
<li>数组的拼接与截取</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// concat：数组合并，返回一个新数组，原数组不受影响</span></span><br><span class="line"><span class="keyword">var</span> newArr = arr.concat(arr2) <span class="comment">// 把 arr 和 arr2 中的所有元素放到 newArr 里</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// slice: 数组切分，复制数组的一部分到一个新数组，并返回这个新数组，原数组不受影响</span></span><br><span class="line"><span class="comment">// slice(begin, end) 包含 begin，不包含 end， begin 和 end 为下标</span></span><br><span class="line"><span class="comment">// slice(begin) 只有一个参数时，为开始参数，截取到末尾</span></span><br><span class="line"><span class="comment">// slice() 没有参数，全部截取</span></span><br><span class="line"><span class="comment">// 可以为负数，会将字符串的长度与对应的负数相加，结果作为参数，-1 表示从后数第一个</span></span><br><span class="line"><span class="keyword">var</span> newArr = arr.slice(begin, end)</span><br><span class="line"></span><br><span class="line"><span class="comment">// splice: 删除或者增加数组元素，修改原数组，返回删除的内容（数组形式）</span></span><br><span class="line"><span class="comment">// start: 开始位置  deletedCount: 删除的个数（如果不删除为 0）items: 替换的内容, 可为多个</span></span><br><span class="line">arr.splice(start) <span class="comment">// 删除原数组 start 位置之后的项（包含 start），返回删除的内容</span></span><br><span class="line">arr.splice(start, deletedCount, [items]) <span class="comment">// items 将作为 arr 的一项</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 练习：</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;赵云&#x27;</span>, <span class="string">&#x27;马超&#x27;</span>, <span class="string">&#x27;刘备&#x27;</span>, <span class="string">&#x27;关羽&#x27;</span>, <span class="string">&#x27;张飞&#x27;</span>]</span><br><span class="line"><span class="comment">// 截取[&#x27;刘备&#x27;,&#x27;关羽&#x27;]</span></span><br><span class="line"><span class="comment">// 在马超后面增加马腾</span></span><br><span class="line">arr.splice(<span class="number">2</span>, <span class="number">0</span>, <span class="string">&#x27;马腾&#x27;</span>)</span><br><span class="line"><span class="comment">// 删除关羽</span></span><br></pre></td></tr></table></figure>

<ul>
<li>数组查找元素</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// indexOf 方法返回数组中某个元素第一次出现的位置，如果找不到，返回 -1</span></span><br><span class="line"><span class="comment">// 可以用来判断元素是否在数组中</span></span><br><span class="line"><span class="comment">// fromIndex 表示从 fromIndex 下标开始查找</span></span><br><span class="line">arr.indexOf(<span class="string">&#x27;zs&#x27;</span>, [fromIndex])</span><br><span class="line"></span><br><span class="line"><span class="comment">// lastIndexOf() 从后面开始查找数组中元素出现位置,即查找某元素最后一次出现的位置</span></span><br><span class="line"><span class="comment">// 如果找不到，返回 -1</span></span><br><span class="line">arr.lastIndexOf(<span class="string">&#x27;zs&#x27;</span>, [fromIndex])</span><br></pre></td></tr></table></figure>

<ul>
<li>清空数组</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. arr.splice(0,arr.length) // 删除数组中所有的元素</span></span><br><span class="line"><span class="comment">// 2．arr.length = 0 // 直接修改数组的长度</span></span><br><span class="line"><span class="comment">// 3．arr = [] // 将数组赋值为一个空数组，推荐</span></span><br></pre></td></tr></table></figure>

<ul>
<li>数组综合练习</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;z&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;z&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;x&#x27;</span>]</span><br><span class="line"><span class="comment">// 1. 找到数组中第一个a出现的位置</span></span><br><span class="line"><span class="comment">// 2. 找到数组中最后一个a出现的位置</span></span><br><span class="line"><span class="comment">// 3. 找到数组中每一个a出现的位置</span></span><br><span class="line"><span class="comment">// 4. 数组去重，返回一个新数组</span></span><br><span class="line"><span class="comment">// 5. 获取数组中每个元素出现的次数</span></span><br></pre></td></tr></table></figure>

<p>!&gt; 补充数组对象方法</p>
<blockquote>
<p><strong>forEach()</strong></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line">arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item, index, arr</span>) </span>&#123;&#125;, thisArg)</span><br><span class="line"><span class="comment">// item 必需。数组中正在处理的当前元素</span></span><br><span class="line"><span class="comment">// index 可选。数组中正在处理的当前元素的索引</span></span><br><span class="line"><span class="comment">// arr 可选。当前数组</span></span><br><span class="line"><span class="comment">// thisArg 可选。当执行回调函数时用作this的值</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;zs&#x27;</span>, <span class="string">&#x27;ls&#x27;</span>, <span class="string">&#x27;ww&#x27;</span>]</span><br><span class="line">arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item, index, arr</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 返回值: undefined</span></span><br><span class="line"><span class="comment">// 不支持 return 操作输出，return 只用于控制循环是否跳出当前循环</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>arr.map()</strong></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line"><span class="keyword">var</span> newArr = arr.map(<span class="function"><span class="keyword">function</span>(<span class="params">item, index</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// item 必需。数组中正在处理的当前元素</span></span><br><span class="line">  <span class="comment">// index 可选。数组中正在处理的当前元素的索引</span></span><br><span class="line">  <span class="comment">// arr 可选。当前数组</span></span><br><span class="line">  <span class="comment">// 使用 return 操作输出，会循环数组每一项，并返回新的每一项组成的数组</span></span><br><span class="line">  <span class="keyword">return</span> item * <span class="number">2</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 不修改原数组</span></span><br><span class="line"><span class="comment">// 返回一个新数组，新数组的每一项乘以 2</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>arr.filter()</strong></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line"><span class="keyword">var</span> newArr = arr.filter(<span class="function"><span class="keyword">function</span>(<span class="params">item, index</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 参数同 map</span></span><br><span class="line">  <span class="comment">// 使用 return 操作输出，会循环数组每一项，并返回判断为 true 的每一项组成的数组</span></span><br><span class="line">  <span class="keyword">return</span> item &gt; <span class="number">2</span> &amp;&amp; item &lt; <span class="number">5</span> <span class="comment">// return 后是判断条件</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 不修改原数组</span></span><br><span class="line"><span class="comment">// 返回一个新数组，新数组每一项满足 2 &lt; item &lt; 5</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>arr.some()</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line"><span class="keyword">var</span> newArr = arr.some(<span class="function"><span class="keyword">function</span>(<span class="params">item, index</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 参数同 map</span></span><br><span class="line">  <span class="comment">// 返回布尔值，只要有一项满足条件就返回 true，否则返回 false</span></span><br><span class="line">  <span class="keyword">return</span> item &gt; <span class="number">2</span> <span class="comment">// return 后是判断条件</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 不修改原数组</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>arr.every()</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line"><span class="keyword">var</span> newArr = arr.every(<span class="function"><span class="keyword">function</span>(<span class="params">item, index</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 参数同 map</span></span><br><span class="line">  <span class="comment">// 返回布尔值，只有所有项都满足条件才返回 true，否则返回f alse</span></span><br><span class="line">  <span class="keyword">return</span> item &gt; <span class="number">2</span> <span class="comment">// return 后是判断条件</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 不修改原数组</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>arr.includes()</strong></p>
</blockquote>
<p>判断数组是否含有某值，输出 true 或 false</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> new1 = arr.includes(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">console</span>.log(new1)</span><br></pre></td></tr></table></figure>

<p>必须完全匹配才会返回 flase（实用性不如正则）</p>
<blockquote>
<p><strong>arr.find()</strong></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line"><span class="keyword">var</span> newArr = arr.find(<span class="function"><span class="keyword">function</span>(<span class="params">item, index</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 参数同 map</span></span><br><span class="line">  <span class="comment">// 使用 return 操作输出，会循环数组每一项，当遍历循环到判断到一个为 true 则跳出循环，输出当前数组元素</span></span><br><span class="line">  <span class="keyword">return</span> item &gt; <span class="number">2</span> <span class="comment">// return 后是判断条件</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 不修改原数组</span></span><br><span class="line"><span class="comment">// 返回一个数组元素，如果全不满足返回 undefined</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>arr.findIndex()</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line"><span class="keyword">var</span> newArr = arr.findIndex(<span class="function"><span class="keyword">function</span>(<span class="params">item, index</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 参数同 map</span></span><br><span class="line">  <span class="comment">// 使用 return 操作输出，会循环数组每一项，当遍历循环到判断到一个为 true 则跳出循环，输出当前数组元素的下标</span></span><br><span class="line">  <span class="keyword">return</span> item &gt; <span class="number">2</span> <span class="comment">// return 后是判断条件</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 不修改原数组</span></span><br><span class="line"><span class="comment">// 返回一个数组元素的下标，如果全不满足返回 -1</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>arr.reduce()</strong></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line"><span class="keyword">var</span> new1 = arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">pre, next, index</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// pre 第一次为数组第一项，之后为上一操作的结果</span></span><br><span class="line">  <span class="comment">// next 数组的下一项</span></span><br><span class="line">  <span class="comment">// index next项的序列</span></span><br><span class="line">  <span class="comment">// arr 可选。当前数组</span></span><br><span class="line">  <span class="comment">// 使用 return 操作输出</span></span><br><span class="line">  <span class="keyword">return</span> pre + next <span class="comment">// 返回数组每一项的和</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 不修改原数组</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 扁平化数组</span></span><br><span class="line"><span class="keyword">var</span> arr2 = [</span><br><span class="line">  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">  [<span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">  [<span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line">]</span><br><span class="line"><span class="keyword">var</span> new2 = arr2.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">pre, next, index</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> pre.concat(next) <span class="comment">// 前数组拼接后数组 .concat()</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 对象数组叠加计算</span></span><br><span class="line"><span class="keyword">var</span> arr3 = [</span><br><span class="line">  &#123; <span class="attr">price</span>: <span class="number">1</span>, <span class="attr">count</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">price</span>: <span class="number">2</span>, <span class="attr">count</span>: <span class="number">2</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">price</span>: <span class="number">3</span>, <span class="attr">count</span>: <span class="number">3</span> &#125;</span><br><span class="line">]</span><br><span class="line"><span class="keyword">var</span> new3 = arr3.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">pre, next, index</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> pre + next.price * next.count</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 当需要操作第一项的时候，利用 reduce(callbreak()&#123;&#125;,往数组第一项前添加一项，如:0)</span></span><br><span class="line">&#125;, <span class="number">0</span>) <span class="comment">// 在原数组第一项添加为 0，不改变原数组</span></span><br></pre></td></tr></table></figure>

<h2 id="基本包装类型"><a href="#基本包装类型" class="headerlink" title="基本包装类型"></a>基本包装类型</h2><blockquote>
<p><strong>简单数据类型是没有方法的</strong>。为了方便操作基本数据类型，JavaScript 还提供了三个特殊的引用类型：String/Number/Boolean</p>
</blockquote>
<p>基本包装类型：把基本类型包装成复杂类型</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;abc&#x27;</span></span><br><span class="line"><span class="keyword">var</span> result = str.indexOf(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 发生了三件事情</span></span><br><span class="line"><span class="comment">// 1. 把简单类型转换成复杂类型：var s = new String(str)</span></span><br><span class="line"><span class="comment">// 2. 调用包装类型的 indexOf 方法：var result = s.indexOf(&#x27;a&#x27;)</span></span><br><span class="line"><span class="comment">// 3. 销毁刚刚创建的复杂类型</span></span><br></pre></td></tr></table></figure>

<h3 id="Number-对象"><a href="#Number-对象" class="headerlink" title="Number 对象"></a>Number 对象</h3><blockquote>
<p>Number 对象是数字的包装类型，数字可以直接使用这些方法</p>
</blockquote>
<p><code>num.toFixed(2)</code> ：返回保留 2 位小数的新数的字符串格式<br><code>num.toString()</code> ：转换成字符串并返回</p>
<h3 id="Boolean-对象"><a href="#Boolean-对象" class="headerlink" title="Boolean 对象"></a>Boolean 对象</h3><blockquote>
<p>Boolean 对象是布尔类型的包装类型</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">toString() <span class="comment">// 转换成字符串并返回</span></span><br></pre></td></tr></table></figure>

<p><strong>undefined 和 null 没有包装类型，所以调用 toString 方法会报错</strong></p>
<h3 id="String-对象"><a href="#String-对象" class="headerlink" title="String 对象"></a>String 对象</h3><blockquote>
<p>字符串可以看成是一个字符数组（伪数组）。因此字符串也有长度，也可以进行遍历。String 对象很多方法的名字和 Array 的一样。</p>
<p>操作字符串的方法<strong>不会改变原来的字符串</strong>，需要新字符串去接收</p>
</blockquote>
<ul>
<li>查找指定字符串</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">str.indexOf(‘‘) <span class="comment">// 获取某个字符串第一次出现的位置，如果没有，返回-1</span></span><br><span class="line">str.lastIndexOf(’’) <span class="comment">// 从后面开始查找第一次出现的位置。如果没有，返回-1</span></span><br><span class="line"></span><br><span class="line">str.search(regexp) <span class="comment">// 查找并输出索引位置,找不到输出-1</span></span><br><span class="line">str.match(regexp) <span class="comment">// 输出匹配到的第一个字符，匹配不到返回 null</span></span><br><span class="line">str.match(regexp/g) <span class="comment">// 全部输出</span></span><br><span class="line"></span><br><span class="line">str.startsWith(str1) <span class="comment">// 判断 str 字符串是否以 str1 字符串开头，若符合返回 true</span></span><br><span class="line">	<span class="comment">// 等价于判断 str.indexOf(str1) === 0</span></span><br><span class="line">str.endsWith(str1) <span class="comment">// 判断 str 字符串是否以 str1 字符串结尾，若符合返回 true</span></span><br><span class="line">	str.indexOf(str1) === str.length - str1.length</span><br></pre></td></tr></table></figure>

<ul>
<li>去除空白</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">str.trim() <span class="comment">// 去除字符串两边的空格，内部空格不会去除</span></span><br></pre></td></tr></table></figure>

<ul>
<li>大小写转换</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">str.toUpperCase() <span class="comment">// 全部转换成大写字母</span></span><br><span class="line">str.toLowerCase() <span class="comment">// 全部转换成小写字母</span></span><br></pre></td></tr></table></figure>

<ul>
<li>字符串拼接与截取</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 字符串拼接 可以用 concat，用法与数组一样，但是字符串拼串我们一般都用 +</span></span><br><span class="line"></span><br><span class="line">str.slice(start, end) <span class="comment">// 从 start 开始，end 结束，并且取不到 end，没有 end 则截取到末尾</span></span><br><span class="line"><span class="comment">// 可以为负数，会将字符串的长度与对应的负数相加，结果作为参数，-1 表示从后数第一个，一次为 -2、-3...</span></span><br><span class="line">str.slice(-<span class="number">3</span>) <span class="comment">// 截取字符串后三位</span></span><br><span class="line"><span class="comment">// str.slice() 与 str.slice(0) 等价 截取全部</span></span><br><span class="line"></span><br><span class="line">str.substring(start, end) <span class="comment">// 以两个参数中较小一个作为起始位置，较大的参数作为结束位置</span></span><br><span class="line"><span class="comment">// 负参数会被直接转换为 0</span></span><br><span class="line"><span class="comment">// str.substring() 与 str.substring(0) 等价 截取全部</span></span><br><span class="line"></span><br><span class="line">str.substr(start, length) <span class="comment">// 从 start 开始，截取 length 个字符，没有 length 则截取到末尾</span></span><br><span class="line"><span class="comment">// 第一个参数为负参数时，会将第一个参数与字符串长度相加后的结果作为第一个参数，</span></span><br><span class="line"><span class="comment">// 第二个参数为负数时，会被转化为 0 ，即截取长度为 0</span></span><br></pre></td></tr></table></figure>

<ul>
<li>字符串切割</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 将字符串分割成数组（很常用）</span></span><br><span class="line">str.split()</span><br><span class="line"><span class="comment">// 功能和数组的 join 正好相反</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;zs,ls,ww&#x27;</span></span><br><span class="line"><span class="keyword">var</span> arr = str.split(<span class="string">&#x27;,&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>字符串替换</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 语法</span><br><span class="line">str.replace(regexp&#x2F;substr, replacement)</span><br><span class="line">&#x2F;&#x2F; 参数：regexp&#x2F;substr: 需要替换的内容    replacement: 替换文本或生成替换文本的函数  默认只替换第一个匹配子串</span><br><span class="line">str.replace(&#x2F;regexp&#x2F;g, replacement) &#x2F;&#x2F; 全部替换</span><br><span class="line"></span><br><span class="line">str.replace(&#x2F; &#x2F;g, &#39;&#39;) &#x2F;&#x2F; 将全部空格去掉</span><br></pre></td></tr></table></figure>

<p>replace() 方法的参数 replacement 可以是函数而不是字符串。在这种情况下，每个匹配都调用该函数，它返回的字符串将作为替换文本使用。该函数的第一个参数是匹配模式的字符串。接下来的参数是与模式中的子表达式匹配的字符串，可以有 0 个或多个这样的参数。接下来的参数是一个整数，声明了匹配在 stringObject 中出现的位置。最后一个参数是 stringObject 本身。</p>
<ul>
<li>访问</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">str[i]</span><br><span class="line">str.charAt(i)</span><br><span class="line"><span class="comment">// i 均为下标</span></span><br></pre></td></tr></table></figure>

<ul>
<li>练习</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. 截取字符串’我爱中华人民共和国’，中的’中华’</span><br><span class="line">2. ’abcoefoxyozzopp’查找字符串中所有o出现的位置</span><br><span class="line">3. 把字符串中所有的o替换成!</span><br><span class="line">4. 把一个字符串中所有的空格全部去掉</span><br><span class="line">5. 统计一个字符串中每个字符出现的次数</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 寻找重复最多的字符以及个数</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;shdshdfjkfjfdgjkjdksgjskdjfsfsfsfjksjkfdkjf&#x27;</span></span><br><span class="line"><span class="keyword">var</span> arr = str.split(<span class="string">&#x27;&#x27;</span>).sort()</span><br><span class="line">str = arr.join(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> count = <span class="number">0</span></span><br><span class="line"><span class="keyword">var</span> char = <span class="number">0</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/(\w)\1+/g</span></span><br><span class="line">str.replace(reg, <span class="function"><span class="keyword">function</span>(<span class="params">a, b, c, d</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a, b, c, d) <span class="comment">// a 匹配模式的字符串 b 与模式中的子表达式匹配的字符串 c 匹配在 str 中出现的位置 d  str 本身</span></span><br><span class="line">  <span class="keyword">if</span> (a.length &gt; count) &#123;</span><br><span class="line">    count = a.length</span><br><span class="line">    char = b</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(str)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;最多的字符为:&#x27;</span> + char + <span class="string">&#x27;;个数为:&#x27;</span> + count)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>javascript 高级</title>
    <url>/1652.html</url>
    <content><![CDATA[<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102204500.png"></p>
<h2 id="面向对象编程"><a href="#面向对象编程" class="headerlink" title="面向对象编程"></a>面向对象编程</h2><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><blockquote>
<p>Everything is object （万物皆对象）</p>
</blockquote>
<p>对象到底是什么，我们可以从两次层次来理解</p>
<p><strong>(1) 对象是具体事物的抽象</strong></p>
<p>一本书、一辆汽车、一个人都可以是对象，当实物被抽象成对象，实物之间的关系就变成了对象之间的关系，从而就可以模拟现实情况，针对对象进行编程</p>
<p>问： 书是对象吗</p>
<p><strong>(2)对象是无序键值对的集合，其属性可以包含基本值、对象或者函数</strong></p>
<p>每个对象都是基于一个引用类型创建的，这些类型可以是系统内置的原生类型，也可以是开发人员自定义的类型</p>
<h3 id="什么是面向对象？"><a href="#什么是面向对象？" class="headerlink" title="什么是面向对象？"></a>什么是面向对象？</h3><p>面向对象编程 —— Object Oriented Programming，简称 OOP ，是一种编程开发思想</p>
<p>在面向对象程序开发思想中，每一个对象都是功能中心，具有明确分工，可以完成接受信息、处理数据、发出信息等任务<br>因此，面向对象编程具有灵活、代码可复用、高度模块化等特点，容易维护和开发，比起由一系列函数或指令组成的传统的过程式编程（procedural programming），更适合多人合作的大型软件项目</p>
<p><strong>面向对象与面向过程：</strong></p>
<ul>
<li>面向过程就是亲历亲为，事无巨细，有条不紊，面向过程是解决问题的一种思维方式，（执行者的角度）<ul>
<li>关注点在于解决问题的过程（先 xx，然后 xx，在 xx）</li>
</ul>
</li>
<li>面向对象就是找一个对象，让她去做这件事情（指挥者的角度）<ul>
<li>关注点在找到能解决问题的对象上</li>
</ul>
</li>
<li>面向对象不是面向过程的替代，而是面向过程的封装</li>
</ul>
<p><strong>面向对象的特性：</strong></p>
<ul>
<li>封装性<ul>
<li>将功能的具体实现，全部封装到对象的内部，外界使用对象时，只需要关注对象提供的方法如何使用，而不需要关心对象的内部具体实现，这就是封装</li>
</ul>
</li>
<li>继承性<ul>
<li>在 js 中，继承的概念很简单，一个对象没有的一些属性和方法，另外一个对象有，拿过来用，就实现了继承</li>
<li><strong>注意：在其他语言里面，继承是类与类之间的关系，在 js 中，是对象与对象之间的关系</strong></li>
</ul>
</li>
<li>[多态性]<ul>
<li>多态是在强类型的语言中才有的；js 是弱类型语言，所以 js 不支持多态</li>
</ul>
</li>
</ul>
<h2 id="创建对象的方式"><a href="#创建对象的方式" class="headerlink" title="创建对象的方式"></a>创建对象的方式</h2><h3 id="内置构造函数创建"><a href="#内置构造函数创建" class="headerlink" title="内置构造函数创建"></a>内置构造函数创建</h3><p>我们可以直接通过 <code>new Object()</code> 创建：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在 js 中，对象有动态特性，可以随时的给一个对象增加属性或者删除属性</span></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">person.name = <span class="string">&#x27;zs&#x27;</span></span><br><span class="line">person.age = <span class="number">18</span></span><br><span class="line">person.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>缺点：麻烦，每个属性都需要添加</p>
<h3 id="对象字面量创建"><a href="#对象字面量创建" class="headerlink" title="对象字面量创建"></a>对象字面量创建</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  name: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">  age: <span class="number">18</span>,</span><br><span class="line">  sayName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>缺点：无法批量生成多个对象，代码冗余</p>
<h3 id="简单改进：工厂函数"><a href="#简单改进：工厂函数" class="headerlink" title="简单改进：工厂函数"></a>简单改进：工厂函数</h3><p>我们可以写一个函数，解决代码重复问题</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createPerson</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    name: name,</span><br><span class="line">    age: age,</span><br><span class="line">    sayName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后生成实例对象：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = createPerson(<span class="string">&#x27;zs&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="keyword">var</span> p2 = createPerson(<span class="string">&#x27;ls&#x27;</span>, <span class="number">18</span>)</span><br></pre></td></tr></table></figure>

<p>缺点：没有解决对象识别的问题，创建出来的对象都是 Object 类型的</p>
<h3 id="继续改进：自定义构造函数"><a href="#继续改进：自定义构造函数" class="headerlink" title="继续改进：自定义构造函数"></a>继续改进：自定义构造函数</h3><p>构造函数是一个函数，用于实例化对象，需要配合 new 操作符使用</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">  <span class="built_in">this</span>.age = age</span><br><span class="line">  <span class="built_in">this</span>.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">&#x27;zs&#x27;</span>, <span class="number">18</span>)</span><br><span class="line">p1.sayName() <span class="comment">// zs</span></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">&#x27;ls&#x27;</span>, <span class="number">23</span>)</span><br><span class="line">p2.sayName() <span class="comment">// ls</span></span><br></pre></td></tr></table></figure>

<h3 id="构造函数的缺点"><a href="#构造函数的缺点" class="headerlink" title="构造函数的缺点"></a>构造函数的缺点</h3><p>使用构造函数带来的最大的好处就是创建对象更方便了，但是其本身也存在一个浪费内存的问题：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">  <span class="built_in">this</span>.age = age</span><br><span class="line">  <span class="built_in">this</span>.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;hello&#x27;</span> + <span class="built_in">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">&#x27;zs&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">&#x27;ls&#x27;</span>, <span class="number">16</span>)</span><br><span class="line"><span class="built_in">console</span>.log(p1.sayHello === p2.sayHello) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>解决方案：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;hello &#x27;</span> + <span class="built_in">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">  <span class="built_in">this</span>.age = age</span><br><span class="line">  <span class="built_in">this</span>.sayHello = sayHello</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">&#x27;zs&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">&#x27;ls&#x27;</span>, <span class="number">16</span>)</span><br><span class="line"><span class="built_in">console</span>.log(p1.sayHello === p2.sayHello) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>缺点：会暴漏很多的函数，容易造成全局变量污染</p>
<blockquote>
<p>术语：</p>
<ol>
<li>实例（实例对象）：通过构造函数创建出来的对象，叫做实例，实例可以有多个</li>
<li>实例化：构造函数创建对象的过程</li>
<li>成员：对象的属性和方法</li>
</ol>
</blockquote>
<h2 id="原型"><a href="#原型" class="headerlink" title="原型"></a>原型</h2><h3 id="原型基本概念"><a href="#原型基本概念" class="headerlink" title="原型基本概念"></a>原型基本概念</h3><p>Javascript 规定，每一个函数都有一个 <code>prototype</code> 属性，属性值是一个对象，这个对象就叫做原型（原型对象），这个对象的所有属性和方法，都会被构造函数的实例继承</p>
<p>这也就意味着，我们可以把所有对象实例需要共享的属性和方法直接定义在 <code>prototype</code> 对象上</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">  <span class="built_in">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Person.prototype)</span><br><span class="line">Person.prototype.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(...)</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(...)</span><br><span class="line"><span class="built_in">console</span>.log(p1.sayName === p2.sayName) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>这时所有实例的 <code>sayName()</code> 方法，其实都指向同一个内存地址</p>
<h3 id="proto"><a href="#proto" class="headerlink" title="__proto__"></a><code>__proto__</code></h3><p>任意对象都有 <code>__proto__</code> 属性，这个属性指向了构造函数的 prototype 属性，也就是原型对象</p>
<p>获取原型对象：</p>
<ul>
<li>通过 <code>构造函数.prototype</code> 可以获取</li>
<li>通过 <code>实例.__proto__</code> 可以获取（隐式原型）</li>
<li>它们指向了同一个对象 <code>构造函数.prototype === 实例.__proto__</code></li>
</ul>
<p><strong>注意：<code>__proto__</code>是浏览器的一个隐藏（私有）属性，IE 浏览器不支持，不要通过它来修改原型里的内容，如果要修改原型中的内容，使用 <code>构造函数.prototype</code> 去修改</strong></p>
<h3 id="constructor-属性"><a href="#constructor-属性" class="headerlink" title="constructor 属性"></a>constructor 属性</h3><p>默认情况下，原型对象中只包含了一个属性：constructor，constructor 属性指向了当前原型对象的构造函数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Person.prototype)</span><br><span class="line"><span class="built_in">console</span>.log(Person.prototype.constructor) <span class="comment">// 构造函数本身</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person()</span><br><span class="line"><span class="built_in">console</span>.log(p)</span><br><span class="line"><span class="comment">// p 实例对象没有constructor 属性， 该属性来源于原型上</span></span><br><span class="line"><span class="built_in">console</span>.log(p.constructor == Person.prototype.constructor) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="构造函数、实例、原型三者之间的关系"><a href="#构造函数、实例、原型三者之间的关系" class="headerlink" title="构造函数、实例、原型三者之间的关系"></a>构造函数、实例、原型三者之间的关系</h3><p>构造函数：构造函数就是一个函数，配合 new 可以新建对象</p>
<p>实例：通过构造函数实例化出来的对象我们把它叫做构造函数的实例。一个构造函数可以有很多实例</p>
<p>原型：每一个构造函数都有一个属性<code>prototype</code>，函数的 prototype 属性值就是原型。通过构造函数创建出来的实例能够直接使用原型上的属性和方法</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102204519.png"></p>
<p>原型三角关系：</p>
<ul>
<li><p>构造函数和原型：配偶关系</p>
<ul>
<li>构造函数（妈妈），通过 prototype 属性访问原型（爸爸）</li>
<li>原型通过 constructor 属性访问到构造函数</li>
</ul>
</li>
<li><p>构造函数 和 实例对象：母子关系</p>
<ul>
<li>构造函数可以创建实例对象</li>
<li>实例对象不能直接访问到构造函数</li>
</ul>
</li>
<li><p>原型 和 实例对象关系：父子关系</p>
<ul>
<li>实例对象可以直接访问到原型上的所有成员</li>
<li>实例对象可以间接的访问到构造函数（通过原型上的 constructor 属性）</li>
</ul>
</li>
</ul>
<h2 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h2><h3 id="原型链概念"><a href="#原型链概念" class="headerlink" title="原型链概念"></a>原型链概念</h3><p>任何一个对象，都有原型对象，原型对象本身又是一个对象，所以原型对象也有自己的原型对象，这样形成的链式结构，就是原型链</p>
<p>绘制对象的原型链结构：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person()</span><br><span class="line"><span class="comment">// p ==&gt; Person.prototype  ==&gt; Object.prototype ==&gt; null</span></span><br><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line"><span class="comment">// o ==&gt; Object.prototype ==&gt; null</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>()</span><br><span class="line"><span class="comment">// arr ==&gt; Array.prototype ==&gt; Object.prototype ==&gt; null</span></span><br><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line"><span class="comment">// date ==&gt; Date.prototype ==&gt; Object.prototype ==&gt; null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Math 是个内置对象，不是个构造函数</span></span><br><span class="line"><span class="comment">// Math ==&gt; Object.prototype ==&gt; null</span></span><br></pre></td></tr></table></figure>

<p>总结：Object.prototype 是原型链的尽头，Object.prototype 的原型是 null</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102204539.png"></p>
<h3 id="属性查找原则"><a href="#属性查找原则" class="headerlink" title="属性查找原则"></a>属性查找原则</h3><p><strong>属性搜索（查找）原则： 沿着原型链进行查找</strong></p>
<ol>
<li>首先在当前对象上查找是否有该属性，如果有，直接返回属性值</li>
<li>如果没有，去对象的原型上查找，如果有，直接返回属性值</li>
<li>如果也没有， 沿着原型链进行查找，直到 Object.prototype ，如果找到了，就返回属性值，如果还没有，返回 undefined</li>
</ol>
<p><strong>属性修改（设置）原则：</strong></p>
<ol>
<li>只会修改对象自身的属性</li>
<li>如果自身没有这个属性，那么就会添加这个属性，并不会修改原型中的属性</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">  <span class="built_in">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.name = <span class="string">&#x27;zs&#x27;</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.gender = <span class="string">&#x27;male&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person(<span class="string">&#x27;ls&#x27;</span>, <span class="number">19</span>)</span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person()</span><br><span class="line"><span class="built_in">console</span>.log(p)</span><br><span class="line"></span><br><span class="line"><span class="comment">// p 的原型链：</span></span><br><span class="line"><span class="comment">// p ==&gt; Person.prototype ==&gt; Object.prototype ==&gt; null</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(p.name) <span class="comment">// ls</span></span><br><span class="line"><span class="built_in">console</span>.log(p.age) <span class="comment">// 19</span></span><br><span class="line"><span class="built_in">console</span>.log(p.gender) <span class="comment">// male</span></span><br><span class="line"><span class="built_in">console</span>.log(p.sex) <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(p1.name) <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(p1.age) <span class="comment">// undefined</span></span><br><span class="line"><span class="comment">// p1 对象依旧有 name 和age 属性， 只不过属性值都是 undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(p1.gender) <span class="comment">// male</span></span><br><span class="line"><span class="built_in">console</span>.log(p1.sex) <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line">p.gender = <span class="string">&#x27;不详&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(p.gender) <span class="comment">// 不详</span></span><br><span class="line"></span><br><span class="line">p.name = <span class="string">&#x27;ww&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(p.name) <span class="comment">// ww</span></span><br></pre></td></tr></table></figure>

<h3 id="Object-prototype-成员介绍"><a href="#Object-prototype-成员介绍" class="headerlink" title="Object.prototype 成员介绍"></a>Object.prototype 成员介绍</h3><blockquote>
<p>任何对象的原型链上都有 Object.prototype，根据属性搜索原则(沿着原型链进行查找)，任何对象都可以访问到 Object.prototype 上的成员</p>
</blockquote>
<p>constructor：指向了构造函数 Object</p>
<h4 id="hasOwnProperty-NaN"><a href="#hasOwnProperty-NaN" class="headerlink" title="hasOwnProperty"></a><code>hasOwnProperty</code></h4><p><code>hasOwnProperty()</code> 方法会返回一个布尔值，判断对象自身是否具有该属性</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">&#x27;zs&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 判断name属性是不是obj自己提供的</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.hasOwnProperty(<span class="string">&#x27;name&#x27;</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.hasOwnProperty(<span class="string">&#x27;toString&#x27;</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p><strong><code>hasOwnProperty</code> 与 <code>in</code> 的区别</strong></p>
<ol>
<li><p><code>in</code> 操作符：判断对象能否访问到该属性（不管这个属性是自己提供的，还是从原型上继承来的），如果可以访问到， 都会返回 true</p>
</li>
<li><p><code>hasOwnProperty</code>：该属性必须是自己提供，才返回 true，否则返回 false</p>
</li>
</ol>
<p><strong>hasOwnProperty 的使用场景</strong>：用在 for…in 循环中</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> p) &#123;</span><br><span class="line">  <span class="comment">// 可以遍历到对象自身的属性以及对象原型链上的属性</span></span><br><span class="line">  <span class="built_in">console</span>.log(k)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 只遍历得到对象自身的属性，if 条件过滤下</span></span><br><span class="line">  <span class="comment">// if (p.hasOwnProperty(k)) &#123;</span></span><br><span class="line">  <span class="comment">// 		console.log(k)</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="isPrototypeOf-NaN"><a href="#isPrototypeOf-NaN" class="headerlink" title="isPrototypeOf"></a><code>isPrototypeOf</code></h4><p><code>isPrototypeOf()</code> 方法用于测试一个对象是否存在于另一个对象的原型链上</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 判断 A 对象是否在 B 对象的原型链上</span></span><br><span class="line"><span class="comment">// 返回值：true，在原型链上  false：不在原型链上</span></span><br><span class="line">A.isPrototetypeOf(B)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person()</span><br><span class="line"></span><br><span class="line"><span class="comment">// p 的原型链：</span></span><br><span class="line"><span class="comment">// p ==&gt; Person.prototype ==&gt; Object.prototype ==&gt; null</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Person.isPrototypeOf(p)) <span class="comment">// false Person 是构造函数</span></span><br><span class="line"><span class="built_in">console</span>.log(Person.prototype.isPrototypeOf(p)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.isPrototypeOf(p)) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p><strong><code>isPropertyOf</code> 与 <code>instanceof</code> 运算符的区别</strong></p>
<p><code>instanceof</code> 运算符用来测试一个对象的原型链中是否存在一个构造函数的 <code>prototype</code> 属性。作用和 isPrototypeOf 类似</p>
<p>语法： 实例对象 instanceof 构造函数</p>
<p>作用：构造函数的 prototype 属性是否在实例对象的原型链上</p>
<ul>
<li>A.isPrototypeOf(B) 判断 A 是否在 B 的原型链上 A： 是一个原型对象</li>
<li>B instanceof A 判断 A 的 prototype 是否在 B 的原型链上 A：是一个构造函数</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.isPrototypeOf([])) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype.isPrototypeOf([])) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log([] <span class="keyword">instanceof</span> <span class="built_in">Array</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log([] <span class="keyword">instanceof</span> <span class="built_in">Array</span>.prototype) <span class="comment">// 语法错误，instanceof 的右边是个构造函数</span></span><br></pre></td></tr></table></figure>

<h4 id="propertyIsEnumerable-NaN"><a href="#propertyIsEnumerable-NaN" class="headerlink" title="propertyIsEnumerable"></a><code>propertyIsEnumerable</code></h4><p><code>propertyIsEnumerable()</code> 方法返回一个布尔值，表明指定的属性名是否是当前对象可枚举的自身属性</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.age = <span class="number">19</span></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person(<span class="string">&#x27;lw&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(p.propertyIsEnumerable(<span class="string">&#x27;name&#x27;</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(p.propertyIsEnumerable(<span class="string">&#x27;age&#x27;</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>拓展：给对象添加不可遍历的属性 : <code>Object.defineProperty()</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法： Object.defineProperty(obj, prop, desc)</span></span><br><span class="line"><span class="comment">// 参数：</span></span><br><span class="line"><span class="comment">// obj： 给哪个对象添加属性</span></span><br><span class="line"><span class="comment">// prop：属性， 类型是字符串</span></span><br><span class="line"><span class="comment">// desc： 属性描述符， 类型是个对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 作用： 定义对象的属性特征</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">  age: <span class="number">19</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 给obj 添加一个不可遍历的 gender 属性</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj, <span class="string">&#x27;gender&#x27;</span>, &#123;</span><br><span class="line">  value: <span class="string">&#x27;female&#x27;</span>, <span class="comment">// 配置该属性的默认值</span></span><br><span class="line">  writable: <span class="literal">true</span>, <span class="comment">// 配置该属性是否可以被修改， 默认值是false， 不可修改</span></span><br><span class="line">  enumerable: <span class="literal">true</span> <span class="comment">// 配置该属性是否可遍历， 默认值是false， 不可遍历</span></span><br><span class="line">&#125;)</span><br><span class="line">obj.gender = <span class="string">&#x27;male&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj)</span><br><span class="line"><span class="built_in">console</span>.log(obj.propertyIsEnumerable(<span class="string">&#x27;gender&#x27;</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h4 id="toString-toLocaleString"><a href="#toString-toLocaleString" class="headerlink" title="toString/toLocaleString"></a>toString/toLocaleString</h4><p>返回对象的字符串格式</p>
<blockquote>
<p>每个内置对象的原型上都有属于自己的 toString 方法</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">  age: <span class="number">19</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// obj ==&gt; Object.prototype ==&gt; null</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.toString()) <span class="comment">// &#x27;[object Object]&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.toLocaleString()) <span class="comment">// &#x27;[object Object]&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="comment">// arr ==&gt;  Array.prototype ==&gt; Object.prototype ==&gt; null</span></span><br><span class="line"><span class="comment">//           toString()         toString()</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype) <span class="comment">// 含有自己的 toString 方法</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.toString()) <span class="comment">// &#x27;1,2,3&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.toLocaleString()) <span class="comment">// &#x27;1,2,3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line"><span class="comment">//  date ==&gt; Date.prototype ==&gt; Object.prototype ==&gt; null</span></span><br><span class="line"><span class="comment">//           toString()          toString()</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Date</span>.prototype) <span class="comment">// 含有自己的 toString 方法</span></span><br><span class="line"><span class="built_in">console</span>.log(date.toString()) <span class="comment">// Wed Oct 10 2018 16:00:51 GMT+0800 (中国标准时间)</span></span><br><span class="line"><span class="built_in">console</span>.log(date.toLocaleString()) <span class="comment">// 2018/10/10 下午4:00:51 得到的是本地时间格式</span></span><br></pre></td></tr></table></figure>

<h4 id="valueOf-NaN"><a href="#valueOf-NaN" class="headerlink" title="valueOf"></a>valueOf</h4><p>语法：对象.valueOf()</p>
<p>作用： 返回对象的原始值（简单数据类型），默认的 valueOf 方法（Object.prototype 上的 valueOf 方法）只会返回对象自身；日期对象的 valueOf 方法返回的是时间戳，因为 Date 的原型链上有自己的 valueOf 方法，该 valueOf 的作用就是返回日期的时间戳</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">  age: <span class="number">19</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// obj ==&gt; Object.prototype ==&gt; null</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.valueOf()) <span class="comment">// obj</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="comment">// arr ==&gt;  Array.prototype ==&gt; Object.prototype ==&gt; null</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.valueOf()) <span class="comment">// arr</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line"><span class="comment">// date 原型链</span></span><br><span class="line"><span class="comment">// date ==&gt; Date.prototype ==&gt; Object.prototype ==&gt; null</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Date</span>.prototype) <span class="comment">// 含有 valueOf 方法</span></span><br><span class="line"><span class="built_in">console</span>.log(date.valueOf()) <span class="comment">// 时间戳</span></span><br></pre></td></tr></table></figure>

<h4 id="valueOf-和-toString-的应用"><a href="#valueOf-和-toString-的应用" class="headerlink" title="valueOf 和 toString 的应用"></a>valueOf 和 toString 的应用</h4><p>当对象在参与运算和比较的时候，js 内部会自动的调用 valueOf 和 toString 方法</p>
<p>调用规则：</p>
<ol>
<li><p>默认先调用 vauleOf， 尝试将对象转成简单数据类型， 如果没有转成简单数据类型， 会继续在调用 toString 方法</p>
</li>
<li><p>如果 valueOf 和 toString 方法都没有转成简单数据类型，会报错</p>
</li>
</ol>
<h2 id="沙箱模式"><a href="#沙箱模式" class="headerlink" title="沙箱模式"></a>沙箱模式</h2><p>沙箱其实就是一个独立的环境，这个环境中任何的改变，都不会对外部环境产生影响</p>
<p>函数自调用一样，在自调用函数内部的变量是不会影响到外部的，因此<strong>函数自调用模式也叫沙箱模式</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="built_in">window</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;这是fn函数&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)(<span class="built_in">window</span>)</span><br></pre></td></tr></table></figure>

<ol>
<li>代码写在自调用函数里面，减少全局污染</li>
<li>想要在外面使用 fn 函数，可将 fn 暴露到全局 <code>window.fn = fn;</code> 将 fn 函数的地址赋值给了 window 上的 fn 属性</li>
<li>一般，我们一个 js 文件只会暴露一个核心的功能（函数、方法）： 目的还是为了减少全局污染</li>
</ol>
<h2 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h2><ul>
<li>语法：<code>&#39;use strict&#39;</code></li>
<li>作用：让 js 引擎以更加严格的模式执行 js 代码</li>
<li>最佳实践：在某个函数内部开启严格模式，而不是在全局环境中开启</li>
<li>注意：<ul>
<li>严格模式只对当前作用域起作用</li>
<li>应该<strong>在当前作用域最顶端使用<code>use strict</code>，否则严格模式无效</strong></li>
</ul>
</li>
<li>使用严格模式好处：<ul>
<li>规范</li>
<li>提高代码执行效率</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 严格模式应该配合沙箱模式一起使用。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 沙箱模式 + 严格模式：</span></span><br><span class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">  &#x27;use strict&#x27;</span></span><br><span class="line"></span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<h3 id="严格模式规定"><a href="#严格模式规定" class="headerlink" title="严格模式规定"></a>严格模式规定</h3><ul>
<li>变量必须显示声明</li>
<li>函数参数不能重名</li>
<li>禁止使用八进制</li>
<li>不能使用保留字作为变量名称：<code>implements, interface, let, package, private, protected, public, static, yield</code></li>
<li>如果不符合上述规范，会直接报错</li>
</ul>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><blockquote>
<p>继承：子承父业</p>
</blockquote>
<p>在 js 中的继承概念非常简单，拿来主义：一个对象自己没有的属性和方法，另一个对象有，拿过来使用，就实现了继承。</p>
<p>继承的目的：让一个对象可以使用另一个对象的属性和方法。</p>
<h3 id="混入式继承（mixin）"><a href="#混入式继承（mixin）" class="headerlink" title="混入式继承（mixin）"></a>混入式继承（mixin）</h3><blockquote>
<p>把一个对象中的属性和方法拷贝到另一个对象中。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ls = &#123;</span><br><span class="line">  name: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">  extend: <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 只拷贝对象obj自身的成员，原型链上的成员不用拷贝给this</span></span><br><span class="line">    <span class="keyword">if</span> (obj.hasOwnProperty(k)) &#123;</span><br><span class="line">      <span class="built_in">this</span>[k] = obj[k]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="原型链继承"><a href="#原型链继承" class="headerlink" title="原型链继承"></a>原型链继承</h3><p>一个对象可以访问构造函数的原型中的属性和方法，那么如果想要让一个对象增加某些属性和方法，</p>
<p>只需要把这些属性和方法放到原型对象中即可。这样就实现了继承, 称之为原型链继承</p>
<ul>
<li>直接给原型增加属性和方法</li>
<li>原型替换（注意：constructor）</li>
<li>mixin+原型替换</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 直接给原型增加属性和方法（麻烦）</span></span><br><span class="line">Person.prototype.color = <span class="string">&#x27;lime&#x27;</span></span><br><span class="line">Person.prototype.legs = <span class="number">2</span></span><br><span class="line">Person.prototype.sayHi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;sayHi&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2. 原型替换，将原型替换成一个对象</span></span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">  <span class="comment">// 手动添加一个constructor属性，如果不手动添加，会找到 Object 的 constructor 属性</span></span><br><span class="line">  <span class="title">constructor</span>: <span class="title">Person</span>,</span><br><span class="line"></span><br><span class="line">  <span class="title">color</span>: &#x27;<span class="title">lime</span>&#x27;,</span><br><span class="line">  <span class="title">legs</span>: 2,</span><br><span class="line">  <span class="title">sayHi</span>: <span class="title">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;sayHi&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 3. 原型链 + 混入式继承</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> lw = &#123;</span><br><span class="line">  skill: <span class="string">&#x27;翻墙&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 给原型添加 extend 方法  -- 混入式继承</span></span><br><span class="line">Person.prototype.extend = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.hasOwnProperty(k)) &#123;</span><br><span class="line">      <span class="built_in">this</span>[k] = obj[k]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 把 lw 的成员添加到了 Person 的原型上， Person 的实例就可以访问到原型上的这个成员</span></span><br><span class="line">Person.prototype.extend(lw)</span><br><span class="line"><span class="built_in">console</span>.log(Person.prototype)</span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person()</span><br><span class="line"><span class="built_in">console</span>.log(p.skill)</span><br></pre></td></tr></table></figure>

<h3 id="Object-create"><a href="#Object-create" class="headerlink" title="Object.create"></a>Object.create</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create">MDN</a></p>
<blockquote>
<p>最初是由道格拉斯丶克罗克福德发布的一篇文章提出的，ECMAScript5 新增了 Object.create() 方法来规范化了这种继承</p>
</blockquote>
<p>ES5 中新增 <code>Object.create()</code> 创建新对象， 使用指定的原型对象来提供新创建的对象的 <code>__proto__</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line"><span class="built_in">Object</span>.create(proto[, propertiesObject])</span><br><span class="line"><span class="comment">// 参数：proto 一个对象,新创建对象的原型对象</span></span><br><span class="line"><span class="comment">// 参数：propertiesObject 要添加到新创建对象的可枚举属性</span></span><br><span class="line"><span class="comment">// 返回值：一个新对象，带着指定的原型对象和属性</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = <span class="built_in">Object</span>.create(proto)</span><br><span class="line"><span class="built_in">console</span>.log(obj)</span><br></pre></td></tr></table></figure>

<p>使用 <code>Object.create()</code> 来实现继承</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Shape - 父类(superclass)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Shape</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.x = <span class="number">0</span></span><br><span class="line">  <span class="built_in">this</span>.y = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 父类的方法</span></span><br><span class="line">Shape.prototype.move = <span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.x += x</span><br><span class="line">  <span class="built_in">this</span>.y += y</span><br><span class="line">  <span class="built_in">console</span>.info(<span class="string">&#x27;Shape moved.&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Rectangle - 子类(subclass)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Rectangle</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  Shape.call(<span class="built_in">this</span>) <span class="comment">// call super constructor. 继承父类的属性</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子类续承父类</span></span><br><span class="line">Rectangle.prototype = <span class="built_in">Object</span>.create(Shape.prototype) <span class="comment">// 将父类的原型赋值给了子类</span></span><br><span class="line">Rectangle.prototype.constructor = Rectangle</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> rect = <span class="keyword">new</span> Rectangle()</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;Is rect an instance of Rectangle?&#x27;</span>, rect <span class="keyword">instanceof</span> Rectangle) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;Is rect an instance of Shape?&#x27;</span>, rect <span class="keyword">instanceof</span> Shape) <span class="comment">// true</span></span><br><span class="line">rect.move(<span class="number">1</span>, <span class="number">1</span>) <span class="comment">// Outputs, &#x27;Shape moved.&#x27;</span></span><br></pre></td></tr></table></figure>

<p>如果你希望能继承到多个对象，则可以使用混入的方式。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyClass</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  SuperClass.call(<span class="built_in">this</span>)</span><br><span class="line">  OtherSuperClass.call(<span class="built_in">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 继承一个类</span></span><br><span class="line">MyClass.prototype = <span class="built_in">Object</span>.create(SuperClass.prototype)</span><br><span class="line"><span class="comment">// 混合其它</span></span><br><span class="line"><span class="built_in">Object</span>.assign(MyClass.prototype, OtherSuperClass.prototype)</span><br><span class="line"><span class="comment">// 重新指定constructor</span></span><br><span class="line">MyClass.prototype.constructor = MyClass</span><br><span class="line"></span><br><span class="line">MyClass.prototype.myMethod = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// do a thing</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="函数进阶"><a href="#函数进阶" class="headerlink" title="函数进阶"></a>函数进阶</h2><h3 id="定义函数的三种方式"><a href="#定义函数的三种方式" class="headerlink" title="定义函数的三种方式"></a>定义函数的三种方式</h3><h4 id="函数声明"><a href="#函数声明" class="headerlink" title="函数声明"></a>函数声明</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">fn() <span class="comment">// 函数声明可以先调用，在声明</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;这是函数声明&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="函数表达式"><a href="#函数表达式" class="headerlink" title="函数表达式"></a>函数表达式</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;这是函数表达式&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">fn() <span class="comment">// 函数表达式必须先声明，再调用</span></span><br></pre></td></tr></table></figure>

<h4 id="构造函数-Function"><a href="#构造函数-Function" class="headerlink" title="构造函数 Function"></a>构造函数 Function</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 函数也是对象，可以使用 Function 构造函数 new 出来</span></span><br><span class="line"><span class="comment">// 相当于var fn = function () &#123;&#125;</span></span><br><span class="line"><span class="keyword">var</span> fn = <span class="keyword">new</span> <span class="built_in">Function</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 语法：new Function(arg1,arg2,arg3..,body)</span></span><br><span class="line"><span class="comment">// 1. 所有的参数都是字符串类型</span></span><br><span class="line"><span class="comment">// 2. 前面可以定义任意多个形参，最后一个参数是代码体</span></span><br><span class="line"><span class="keyword">var</span> fn = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">&#x27;alert(1)&#x27;</span>)</span><br><span class="line">fn()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fn1 = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">&#x27;a1&#x27;</span>, <span class="string">&#x27;a2&#x27;</span>, <span class="string">&#x27;alert(a1 + a2)&#x27;</span>)</span><br><span class="line">fn1(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>【案例：代码实时预览效果.html】</p>
<h4 id="eval-函数–了解"><a href="#eval-函数–了解" class="headerlink" title="eval 函数–了解"></a>eval 函数–了解</h4><blockquote>
<p>eval 可以和 new Function 一样，执行字符串代码</p>
</blockquote>
<p>注意：eval 函数的功能非常的强大，但是实际使用的情况并不多。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">eval</span>(<span class="string">&#x27;var num = 10; console.log(num)&#x27;</span>) <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>

<ul>
<li>eval 形式的代码难以阅读</li>
<li>eval 形式的代码无法打断点，因为本质还是还是一个字符串</li>
<li>在浏览器端执行任意的 JavaScript 会带来潜在的安全风险，恶意的 JavaScript 代码可能会破坏应用，特别是在用它执行用户输入数据的情况下。可能会有恶意用户输入威胁你的站点或应用程序安全的代码（即所谓的代码注入）<br><a href="http://qingbob.com/Excess-XSS/">推荐了解下 xss 攻击</a></li>
</ul>
<h3 id="函数的四种调用模式"><a href="#函数的四种调用模式" class="headerlink" title="函数的四种调用模式"></a>函数的四种调用模式</h3><p>分析 this 指向问题</p>
<ol>
<li>任何函数都有属于自己的 this</li>
<li>this 是动态的，this 在函数声明的时候是确定不了的，只有当函数被调用了才能够确定 this 的指向，this 的指向和函数在哪被调用没有关系</li>
</ol>
<p>分析 this 的问题的思路：</p>
<ol>
<li>this 是属于哪个函数</li>
<li><strong>这个函数是何种调用模式</strong></li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">函数：当一个函数不是一个对象的属性时，我们称之为函数</span><br><span class="line">方法：当一个函数被保存为对象的一个属性时，我们称之为方法</span><br></pre></td></tr></table></figure>

<h4 id="函数调用模式"><a href="#函数调用模式" class="headerlink" title="函数调用模式"></a>函数调用模式</h4><p><font color="red">如果一个函数不是一个对象的属性时，就是被当做一个函数来进行调用的。此时 this 指向了 window</font></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 函数名() 的调用方式</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>) <span class="comment">// 指向window</span></span><br><span class="line">&#125;</span><br><span class="line">fn()</span><br></pre></td></tr></table></figure>

<h4 id="方法调用模式"><a href="#方法调用模式" class="headerlink" title="方法调用模式"></a>方法调用模式</h4><p><font color="red">当一个函数被保存为对象的一个属性时，我们称之为一个方法。当一个方法被调用时，this 被绑定到当前对象</font></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过点语法或者中括号语法来访问方法，都是属于方法调用模式</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  fn: f</span><br><span class="line">&#125;</span><br><span class="line">obj.fn() <span class="comment">// obj</span></span><br><span class="line">obj[<span class="string">&#x27;fn&#x27;</span>]() <span class="comment">// obj</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [f, <span class="number">10</span>, <span class="number">30</span>]</span><br><span class="line"><span class="comment">// 也是方法调用模式</span></span><br><span class="line">arr[<span class="number">0</span>]() <span class="comment">// arr</span></span><br></pre></td></tr></table></figure>

<h4 id="构造函数调用模式"><a href="#构造函数调用模式" class="headerlink" title="构造函数调用模式"></a>构造函数调用模式</h4><p><font color="red">如果函数是通过 new 关键字进行调用的，此时 this 被绑定到创建出来的新对象上</font></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">&#125;</span><br><span class="line">Person() <span class="comment">// this 指向 window</span></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person() <span class="comment">// this 指向 p</span></span><br></pre></td></tr></table></figure>

<p><strong>总结：分析 this 的问题，主要就是区分函数的调用模式，看函数是怎么被调用的</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 分析思路：1. 看 this 是哪个函数的  2. 看这个函数是怎么调用的，处于什么调用模式</span></span><br><span class="line"><span class="comment">// 1.</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">38</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  age: <span class="number">18</span>,</span><br><span class="line">  getAge: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.age)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f = obj.getAge</span><br><span class="line">f() <span class="comment">// window ==&gt; 38</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">38</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  age: <span class="number">18</span>,</span><br><span class="line">  getAge: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.age) <span class="comment">// obj ==&gt; 18</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.age) <span class="comment">// window ==&gt; 38</span></span><br><span class="line">    &#125;</span><br><span class="line">    foo()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.getAge()</span><br><span class="line"><span class="comment">// obj[&#x27;getAg&#x27;]()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.</span></span><br><span class="line"><span class="keyword">var</span> length = <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">18</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.length)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [fn, <span class="string">&#x27;222&#x27;</span>]</span><br><span class="line">fn() <span class="comment">// 10</span></span><br><span class="line">arr[<span class="number">0</span>]() <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.</span></span><br><span class="line"><span class="keyword">var</span> length = <span class="number">10</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.length)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  length: <span class="number">5</span>,</span><br><span class="line">  method: <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    fn() <span class="comment">// window ==&gt; 10</span></span><br><span class="line">    <span class="built_in">arguments</span>[<span class="number">0</span>]() <span class="comment">// argument ==&gt; 3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.method(fn, <span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5.</span></span><br><span class="line"><span class="keyword">let</span> len = <span class="number">10</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.len)</span><br><span class="line">&#125;</span><br><span class="line">fn() <span class="comment">// window ==&gt; undefined</span></span><br><span class="line"><span class="keyword">let</span> Person = &#123;</span><br><span class="line">  len: <span class="number">5</span>,</span><br><span class="line">  say: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    fn() <span class="comment">// window ==&gt; undefined</span></span><br><span class="line">    <span class="built_in">arguments</span>[<span class="number">0</span>]() <span class="comment">// arguments ==&gt; undefined</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">Person.say(fn)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6.</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  bar: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="function">() =&gt;</span> <span class="built_in">this</span></span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 作为obj对象的一个方法来调用bar，把它的this绑定到obj。</span></span><br><span class="line"><span class="comment">// 将返回的函数的引用赋值给fn。</span></span><br><span class="line"><span class="keyword">var</span> fn = obj.bar()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 直接调用fn而不设置this，</span></span><br><span class="line"><span class="comment">// 通常(即不使用箭头函数的情况)默认为全局对象</span></span><br><span class="line"><span class="comment">// 若在严格模式则为undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(fn() === obj) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 但是注意，如果你只是引用obj的方法，</span></span><br><span class="line"><span class="comment">// 而没有调用它</span></span><br><span class="line"><span class="keyword">var</span> fn2 = obj.bar</span><br><span class="line"><span class="comment">// 那么调用箭头函数后，this指向window，因为它从 bar 继承了this。</span></span><br><span class="line"><span class="built_in">console</span>.log(fn2()() == <span class="built_in">window</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="方法借用模式"><a href="#方法借用模式" class="headerlink" title="方法借用模式"></a>方法借用模式</h4><blockquote>
<p>上下文调用模式也叫方法借用模式，分为 apply，call ，bind</p>
<p>使用方法：<code>函数.call()</code> 或者 <code>函数.apply()</code></p>
</blockquote>
<p>任何函数都可以调用 apply，call ，bind 这三个方法</p>
<h5 id="call-方法"><a href="#call-方法" class="headerlink" title="call 方法"></a>call 方法</h5><p>call 方法可以调用一个函数，并且可以指定这个函数的 <code>this</code> 指向</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// call 方法也可以和 () 一样，进行函数调用</span></span><br><span class="line"><span class="comment">// 第一个参数：指定函数的 this，如果不传，则 this 指向 window</span></span><br><span class="line"><span class="comment">// 其余参数：和函数的参数列表一模一样</span></span><br><span class="line"><span class="keyword">var</span> zs = &#123;</span><br><span class="line">  name: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">  sayHi: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;hello ,我是&#x27;</span> + <span class="built_in">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// zs.sayHi()</span></span><br><span class="line"><span class="keyword">var</span> ls = &#123;</span><br><span class="line">  name: <span class="string">&#x27;ls&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ls 借用 zs 的 sayHi 方法</span></span><br><span class="line">zs.sayHi.call(ls)</span><br></pre></td></tr></table></figure>

<h5 id="伪数组与数组"><a href="#伪数组与数组" class="headerlink" title="伪数组与数组"></a>伪数组与数组</h5><blockquote>
<p>伪数组也叫类数组</p>
</blockquote>
<ol>
<li>伪数组其实就是一个对象，但是跟数组一样，伪数组也会有<code>length</code>属性，也有<code>0, 1, 2, 3</code>等属性</li>
<li>伪数组并没有数组的方法，不能使用<code>push/pop</code>等方法</li>
<li>伪数组可以跟数组一样进行遍历，通过下标操作</li>
<li>常见的伪数组：<code>arguments</code>、<code>document.getElementsByTagName的返回值</code>、<code>jQuery对象</code></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="number">0</span>: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">  <span class="number">1</span>: <span class="string">&#x27;ls&#x27;</span>,</span><br><span class="line">  <span class="number">2</span>: <span class="string">&#x27;ww&#x27;</span>,</span><br><span class="line">  length: <span class="number">3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>伪数组借用数组的方法</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 给 obj 添加一项 3: &#x27;zl&#x27;</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.push.call(obj, <span class="string">&#x27;zl&#x27;</span>)</span><br><span class="line"><span class="comment">// 把 obj 中的每一项使用 &#x27;-&#x27; 拼接起来返回一个字符串</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.join.call(obj, <span class="string">&#x27;-&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>将伪数组转换成真数组</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="built_in">Array</span>.prototype.slice.call(obj)</span><br></pre></td></tr></table></figure>

<h5 id="apply-方法"><a href="#apply-方法" class="headerlink" title="apply 方法"></a>apply 方法</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">apply 的语法：</span><br><span class="line">apply(thisArg, 实参列表)</span><br><span class="line">thisArg &#x3D;&#x3D;&gt; 改变函数内的 this 指向的</span><br><span class="line">实参列表 &#x3D;&#x3D;&gt; 是一个数组或者是伪数组</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>apply()</code>方法的作用和 <code>call()</code>方法类似，只有一个区别，就是<code>apply()</code>方法接受的是<strong>一个包含多个参数的数组</strong>。而<code>call()</code>方法接受的是<strong>若干个参数的列表</strong></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. apply 能够调用函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line">fn.apply() <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. apply 改变 this 指向</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">&#125;</span><br><span class="line">fn.apply([<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>]) <span class="comment">// [10, 20, 30]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. apply 第二个参数是数组</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">n1, n2</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(n1 + n2)</span><br><span class="line">&#125;</span><br><span class="line">fn.apply(&#123; <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span> &#125;, [<span class="number">10</span>, <span class="number">20</span>]) <span class="comment">// &#123;name: &#x27;zs&#x27;&#125;, 30</span></span><br><span class="line"><span class="comment">// apply 的特性： 平铺性，把数组中的每一项取出来作为函数的实参</span></span><br><span class="line"><span class="comment">// fn.call(&#123;name: &#x27;ls&#x27;&#125;, 10, 20) // &#123;&#125;, 30</span></span><br></pre></td></tr></table></figure>

<p>call 和 apply 的使用场景：</p>
<ul>
<li>如果参数比较少，使用 call 会更加简洁</li>
<li>如果参数存放在数组中，此时需要使用 apply</li>
</ul>
<p>课后练习：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">求数组的最大值和最小值</span><br><span class="line">封装一个函数，能够打印出来所有的参数</span><br></pre></td></tr></table></figure>

<h5 id="bind-方法"><a href="#bind-方法" class="headerlink" title="bind 方法"></a>bind 方法</h5><p><strong>bind()</strong> 方法创建一个新的函数、可以绑定新的函数的 <code>this</code> 指向</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 返回值：新的函数(不会被调用)</span></span><br><span class="line"><span class="comment">// 参数：新函数的 this 指向，当绑定了新函数的 this 指向后，无论使用何种调用模式，this 都不会改变</span></span><br><span class="line"><span class="comment">// var newFn = fn.bind(window)</span></span><br><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> newFn = fn.bind([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="comment">// newFn 是 bind 创建并返回出来的</span></span><br><span class="line"><span class="built_in">console</span>.log(newFn)</span><br><span class="line">newFn() <span class="comment">// this ==&gt; [1,2,3]</span></span><br></pre></td></tr></table></figure>

<p>如果对一个函数进行多次 bind，那么上下文会是什么呢</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">&#125;</span><br><span class="line">fn.bind().bind(a)() <span class="comment">// =&gt; ?</span></span><br></pre></td></tr></table></figure>

<p>如果你认为输出结果是 a，那么你就错了，其实我们可以把上述代码转换成另一种形式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// fn.bind().bind(a) 等于</span></span><br><span class="line"><span class="keyword">let</span> fn2 = <span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> fn.apply()</span><br><span class="line">  &#125;.apply(a)</span><br><span class="line">&#125;</span><br><span class="line">fn2()</span><br></pre></td></tr></table></figure>

<p>可以从上述代码中发现，不管我们给函数 bind 几次，fn 中的 this 永远由第一次 bind 决定，所以结果永远是 window。</p>
<h4 id="特殊的-this-指向"><a href="#特殊的-this-指向" class="headerlink" title="特殊的 this 指向"></a>特殊的 this 指向</h4><ul>
<li>定时器中的 this 指向了 window，因为定时器的 function 最终是由 window 来调用的</li>
<li>事件中的 this 指向的是当前的元素，在事件触发的时候，浏览器让当前元素调用了 function</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">call apply bind 第一个参数表示要绑定的 this</span><br><span class="line">不传，传 null，或者 undefined ，this 均指向 window</span><br><span class="line">但在严格模式下，不传指向 undefined，传 null 指向 null，传 undefined 指向 undefined</span><br></pre></td></tr></table></figure>

<h3 id="函数也是对象"><a href="#函数也是对象" class="headerlink" title="函数也是对象"></a>函数也是对象</h3><blockquote>
<p>函数是由 new Function 创建出来的，因此函数也是一个对象，<code>所有的函数都是 new Function 的实例</code></p>
</blockquote>
<h4 id="函数的原型链结构"><a href="#函数的原型链结构" class="headerlink" title="函数的原型链结构"></a>函数的原型链结构</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 内部：var Person = new Function()</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="comment">// Person 实例对象的原型链：</span></span><br><span class="line"><span class="comment">// Person ==&gt; Function.prototype ==&gt; Object.prototype ==&gt; null</span></span><br><span class="line"><span class="comment">// Function.prototype 原型类型是个函数</span></span><br><span class="line"><span class="built_in">console</span>.dir(<span class="built_in">Function</span>.prototype)</span><br></pre></td></tr></table></figure>

<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102204558.jpeg"></p>
<h4 id="Function-prototype-成员"><a href="#Function-prototype-成员" class="headerlink" title="Function.prototype 成员"></a>Function.prototype 成员</h4><ul>
<li>arguments：获取函数的实参，已经被废弃了，现在推荐的做法是使用函数内部可用的  <code>arguments</code>对象来访问函数的实参<ul>
<li>（废弃的意思：已经从 Web 标准中删除，虽然一些浏览器目前仍然支持它，但也许会在未来的某个时间停止支持，请尽量不要使用该特性）</li>
</ul>
</li>
<li>length：获取形参的长度</li>
<li>name：获取函数的名字，此属性不允许修改</li>
<li>caller: 用于获取当前函数是在哪个函数中调用的，已经被废弃了</li>
<li>constructor：指向当前构造函数，Function</li>
<li>call：调用函数，重新指定 this</li>
<li>apply：调用函数，重新指定 this</li>
<li>bind：重新指向 this，返回一个新的函数，不调用</li>
<li>toString : 得到函数的字符串格式</li>
</ul>
<p>案例【封装 getType 函数（获取数据类型）】</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getType</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj).slice(<span class="number">8</span>, -<span class="number">1</span>) <span class="comment">// &#x27;[object 构造函数]&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="完整版原型链"><a href="#完整版原型链" class="headerlink" title="完整版原型链"></a>完整版原型链</h4><blockquote>
<p>绘制完整版原型链的目的是辅助大家理解 js 中对象的继承关系</p>
</blockquote>
<p>图一<br><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102204647.png"></p>
<p>图二<br><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102204701.jpeg"></p>
<p>总结：</p>
<ol>
<li>所有函数都是 new Function 创建出来的，因此 <code>所有函数.__proto__</code> 都是 <code>Function.prototype</code></li>
<li>所有对象都是 new Object 创建出来的，因此 <code>所有对象.__proto__</code> 都是 <code>Object.prototype</code></li>
</ol>
<p><a href="https://github.com/creeperyang/blog/issues/9">参考链接</a></p>
<h3 id="作用域与预解析"><a href="#作用域与预解析" class="headerlink" title="作用域与预解析"></a>作用域与预解析</h3><h4 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h4><blockquote>
<p>作用域：变量起作用的区域，也就是说：变量定义后，可以在哪个范围内使用该变量</p>
</blockquote>
<p><strong>全局作用域</strong> ：在 script 标签内，<strong>函数外</strong>的区域就是全局作用域，在全局作用内声明的变量叫做<strong>全局变量</strong> 。全局变量可以在任意地方访问。（if/while/for 语句中声明的变量也是全局变量）</p>
<p><strong>函数作用域</strong> ：在函数内的区域叫做函数作用域，在函数作用域内声明的变量叫做<strong>局部变量</strong> ，局部变量只有在当前函数内才能访问到。</p>
<p>自由变量：对于一个函数来说，函数内部没有声明该变量，但在函数内部有访问该变量。对于这个函数来说， 该变量就是一个自由变量。</p>
<p>隐式全局变量：没有使用 var 定义的变量也是全局变量，叫做隐式全局变量。(不要使用)</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">11</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> num1 = <span class="number">22</span></span><br><span class="line">  num2 = <span class="number">33</span></span><br><span class="line">  num = <span class="number">33</span></span><br><span class="line">  <span class="built_in">console</span>.log(num1)</span><br><span class="line">&#125;</span><br><span class="line">fn()</span><br><span class="line"><span class="built_in">console</span>.log(num)</span><br><span class="line"><span class="comment">// console.log(num1)</span></span><br><span class="line"><span class="built_in">console</span>.log(num2)</span><br></pre></td></tr></table></figure>

<p>变量的查找规则：</p>
<ul>
<li>函数内部可以使用函数外部的变量</li>
<li>有局部变量就用局部变量，没有局部变量就用全局变量。</li>
</ul>
<p><strong>函数作用域是在函数定义的时候作用域就确定下来了，和函数在哪调用无关</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">123</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(num)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> num = <span class="number">456</span></span><br><span class="line">  f1()</span><br><span class="line">&#125;</span><br><span class="line">f2() <span class="comment">// 123</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> num1 = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> num = <span class="number">20</span></span><br><span class="line">  num = <span class="number">30</span> <span class="comment">// num 在局部声明过，只能修改局部的 num 值</span></span><br><span class="line">  num1 = <span class="number">20</span> <span class="comment">// 修改全局的 num1 值</span></span><br><span class="line">  <span class="keyword">var</span> num2 = <span class="number">40</span></span><br><span class="line">  num3 = <span class="number">50</span> <span class="comment">// 隐式全局</span></span><br><span class="line">  <span class="built_in">console</span>.log(num) <span class="comment">// 30</span></span><br><span class="line">  <span class="built_in">console</span>.log(num1) <span class="comment">// 20</span></span><br><span class="line">  <span class="built_in">console</span>.log(num2) <span class="comment">// 40</span></span><br><span class="line">  <span class="built_in">console</span>.log(num3) <span class="comment">// 50</span></span><br><span class="line">&#125;</span><br><span class="line">test()</span><br><span class="line"><span class="built_in">console</span>.log(num) <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">console</span>.log(num1) <span class="comment">// 20</span></span><br><span class="line"><span class="comment">// 如果 test 函数没执行过，则 num1 值为 10</span></span><br><span class="line"><span class="built_in">console</span>.log(num3) <span class="comment">// 50</span></span><br><span class="line"><span class="built_in">console</span>.log(num2) <span class="comment">// 报错</span></span><br></pre></td></tr></table></figure>

<h4 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h4><p>作用域链：只要是函数，就会形成一个作用域，如果这个函数被嵌套在其他函数中，那么外部函数也有自己的作用域，这个一直往上到全局环境，就形成了一个作用域链</p>
<p><code>变量的搜索原则</code>：</p>
<ol>
<li>从当前作用域开始查找是否声明了该变量，如果存在，那么就直接返回这个变量的值</li>
<li>如果不存在，就会往上一层作用域查询，如果存在，就返回</li>
<li>如果不存在，一直查询到全局作用域，如果存在，就返回。如果在全局中也没有找到该变量会<strong>报错</strong></li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">10</span></span><br><span class="line">fn1()</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(num) <span class="comment">// undefined</span></span><br><span class="line">  <span class="keyword">var</span> num = <span class="number">20</span></span><br><span class="line">  <span class="built_in">console</span>.log(num) <span class="comment">// 20</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(num) <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 -- 改造上面的面试题</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">10</span></span><br><span class="line">fn1()</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(num) <span class="comment">// 10</span></span><br><span class="line">  num = <span class="number">20</span></span><br><span class="line">  <span class="built_in">console</span>.log(num) <span class="comment">// 20</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(num) <span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">123</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(num) <span class="comment">// 456 undefined</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> num = <span class="number">456</span></span><br><span class="line">  f1(num)</span><br><span class="line">  f1()</span><br><span class="line">&#125;</span><br><span class="line">f2()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4</span></span><br><span class="line"><span class="keyword">var</span> num1 = <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> num2 = <span class="number">20</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">num1</span>) </span>&#123;</span><br><span class="line">  num1 = <span class="number">100</span></span><br><span class="line">  num2 = <span class="number">200</span></span><br><span class="line">  num3 = <span class="number">300</span></span><br><span class="line">  <span class="built_in">console</span>.log(num1) <span class="comment">// 100</span></span><br><span class="line">  <span class="built_in">console</span>.log(num2) <span class="comment">// 200</span></span><br><span class="line">  <span class="built_in">console</span>.log(num3) <span class="comment">// 300</span></span><br><span class="line">  <span class="keyword">var</span> num3</span><br><span class="line">&#125;</span><br><span class="line">fn()</span><br><span class="line"><span class="built_in">console</span>.log(num1) <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">console</span>.log(num2) <span class="comment">// 200</span></span><br><span class="line"><span class="built_in">console</span>.log(num3) <span class="comment">// error</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> num = <span class="number">100</span></span><br><span class="line">  num++</span><br><span class="line">  <span class="built_in">console</span>.log(num)</span><br><span class="line">&#125;</span><br><span class="line">fn() <span class="comment">// 101</span></span><br><span class="line">fn() <span class="comment">// 101</span></span><br><span class="line"><span class="built_in">console</span>.log(num) <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 6.</span></span><br><span class="line"><span class="keyword">var</span> color = <span class="string">&#x27;red&#x27;</span> <span class="comment">// blue</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> anotherColor = <span class="string">&#x27;blue&#x27;</span> <span class="comment">// red</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">inner</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> tmpColor = color <span class="comment">// red</span></span><br><span class="line">    color = anotherColor</span><br><span class="line">    anotherColor = tmpColor <span class="comment">// red</span></span><br><span class="line">    <span class="built_in">console</span>.log(anotherColor) <span class="comment">// red</span></span><br><span class="line">  &#125;</span><br><span class="line">  inner()</span><br><span class="line">&#125;</span><br><span class="line">outer()</span><br><span class="line"><span class="built_in">console</span>.log(color) <span class="comment">// blue</span></span><br></pre></td></tr></table></figure>

<h4 id="预解析"><a href="#预解析" class="headerlink" title="预解析"></a>预解析</h4><blockquote>
<p>预解析：预先解析</p>
</blockquote>
<p>js 执行代码分为两个过程：</p>
<ul>
<li>预解析过程（变量与函数提升）</li>
<li>代码一行一行执行</li>
</ul>
<p>预解析过程：JavaScript 解析器在执行代码前，会把所有变量的声明和函数的声明提升到当前作用域的顶部。例如<code>var a = 11</code>其实会分为<code>var a</code> 和<code>a = 11</code>两部分，其中<code>var a;</code>会被提升</p>
<p>预解析规则 :</p>
<ol>
<li>var 声明的变量：只提升声明，不会提升赋值</li>
<li>函数声明：整体提升</li>
<li>先提升 var 声明的变量，后提升函数声明</li>
<li>遇到重名的 var 声明， var 声明会被忽略，值会保留</li>
<li>遇到重名的函数声明，后者会覆盖前者</li>
<li>如果 var 声明和函数声明同名，函数声明会把 var 声明覆盖</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 函数预解析</span></span><br><span class="line"><span class="comment">// 1.</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a) <span class="comment">// undefined</span></span><br><span class="line">&#125;</span><br><span class="line">fn()</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.</span></span><br><span class="line"><span class="keyword">var</span> n = <span class="number">45</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn5</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(n) <span class="comment">// undefined</span></span><br><span class="line">  n = <span class="number">20</span></span><br><span class="line">  <span class="built_in">console</span>.log(n) <span class="comment">// 20</span></span><br><span class="line">  <span class="keyword">var</span> n = <span class="number">0</span></span><br><span class="line">  <span class="built_in">console</span>.log(n) <span class="comment">// 0</span></span><br><span class="line">&#125;</span><br><span class="line">fn5()</span><br><span class="line"><span class="built_in">console</span>.log(n) <span class="comment">// 45</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.</span></span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// 函数体</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">23</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(b)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// 23</span></span><br><span class="line"><span class="comment">// b() // 报错</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.</span></span><br><span class="line"><span class="built_in">console</span>.log(c) <span class="comment">// 函数体</span></span><br><span class="line">c() <span class="comment">// 嘿嘿</span></span><br><span class="line"><span class="keyword">var</span> c = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  comsole.log(<span class="string">&#x27;哈哈&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;嘿嘿&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5.</span></span><br><span class="line"><span class="built_in">console</span>.log(fn1) <span class="comment">// 函数体</span></span><br><span class="line">fn1()</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;哈哈&#x27;</span>) <span class="comment">// 哈哈</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(fn2) <span class="comment">// undefined</span></span><br><span class="line">fn2() <span class="comment">// 报错</span></span><br><span class="line"><span class="keyword">var</span> fn2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;嘿嘿&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 对于函数表达式，函数的调用必须在表达式声明之后</span></span><br><span class="line">fn2() <span class="comment">// 嘿嘿</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 6.</span></span><br><span class="line"><span class="comment">// 只有用 var 声明的变量才会预解析</span></span><br><span class="line"><span class="built_in">console</span>.log(d) <span class="comment">// 报错</span></span><br><span class="line">d = <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 7.</span></span><br><span class="line"><span class="built_in">console</span>.log(e)</span><br><span class="line"><span class="built_in">console</span>.log(f) <span class="comment">// 报错 f is not defined</span></span><br><span class="line"><span class="keyword">var</span> e = (f = <span class="number">10</span>)</span><br><span class="line"><span class="built_in">console</span>.log(f) <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 8.</span></span><br><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;a&#x27;</span> <span class="keyword">in</span> <span class="built_in">window</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="string">&#x27;abc&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// abc</span></span><br></pre></td></tr></table></figure>

<p><strong>不要在一个作用域内重复的声明相同的变量和函数</strong></p>
<h3 id="递归函数"><a href="#递归函数" class="headerlink" title="递归函数"></a>递归函数</h3><blockquote>
<p>递归函数：函数内部直接或者间接的调用自己</p>
</blockquote>
<p>递归的要求：</p>
<ol>
<li>自己调用自己（直接或者间接）</li>
<li>要有结束条件（出口）</li>
</ol>
<p>递归函数主要是<code>化归思想</code>，将一个复杂的问题简单化，主要用于解决数学中的一些问题居多。</p>
<ul>
<li>把要解决的问题，归结为已经解决的问题上。</li>
<li>一定要考虑什么时候结束让函数结束，也就是停止递归（一定要有已知条件）</li>
</ul>
<p>练习：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 计算1-100之间所有数的和</span></span><br><span class="line"><span class="comment">// 2. 计算斐波那契数列</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n == <span class="number">1</span> || n == <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> fn(n - <span class="number">1</span>) + fn(n - <span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(fn(<span class="number">12</span>))</span><br></pre></td></tr></table></figure>

<h4 id="实现缓存"><a href="#实现缓存" class="headerlink" title="实现缓存"></a>实现缓存</h4><blockquote>
<p>缓存（cache）：数据的缓冲区，当要读取数据时，先从缓冲中获取数据，如果找到了，直接获取，如果找不到，重新去请求数据</p>
</blockquote>
<p>计算斐波那契数列，会有很大的性能问题，因为重复的计算了很多次，因此我们可以使用缓存来解决这个性能问题。</p>
<p>初级优化：</p>
<p>使用缓存的基本步骤：</p>
<ul>
<li>如果要获取数据，先查询缓存，如果有就直接使用</li>
<li>如果没有，就进行计算，并且将计算后的结果放到缓存中，方便下次使用。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 缓存</span></span><br><span class="line"><span class="keyword">var</span> arr = []</span><br><span class="line"><span class="keyword">var</span> fbi = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  count++</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span> || n === <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (arr[n]) &#123;</span><br><span class="line">    <span class="keyword">return</span> arr[n]</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> temp = fbi(n - <span class="number">1</span>) + fbi(n - <span class="number">2</span>)</span><br><span class="line">    arr[n] = temp <span class="comment">// 存入缓存</span></span><br><span class="line">    <span class="keyword">return</span> temp</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>缺点：既然使用缓存，就需要保证缓存的数据的安全，不能被别人修改，因此，需要使用闭包来实现缓存的私有化。</p>
<h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><h3 id="闭包的基本概念"><a href="#闭包的基本概念" class="headerlink" title="闭包的基本概念"></a>闭包的基本概念</h3><p><code>闭包（closure）</code>是 JavaScript 语言的一个难点，也是 JavaScript 的一个特色，很多高级的应用都要依靠闭包来实现</p>
<blockquote>
<p>闭包是函数和声明该函数的词法环境的组合</p>
</blockquote>
<p>在 JavaScript 中，在函数中可以（嵌套）定义另一个函数时，如果内部的函数引用了外部的函数的变量，产生闭包</p>
<p>**闭包中包含了内部函数的代码，以及所需外部函数中的变量的引用 **</p>
<p>产生闭包的条件：有两个函数，是嵌套关系，内部函数引用了外部函数的变量，这样就会形成闭包</p>
<p>闭包的作用：</p>
<ul>
<li>私有变量，保护数据安全</li>
<li>持久化维持数据</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 闭包的基本模型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> num = <span class="number">10</span></span><br><span class="line">  <span class="comment">// function inner () &#123;</span></span><br><span class="line">  <span class="comment">//   num++</span></span><br><span class="line">  <span class="comment">//   console.log(num)</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  <span class="comment">// return inner  // 把inner函数给返回出去，让外部能够调用inner函数</span></span><br><span class="line">  <span class="comment">// 上面的简写</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    num++</span><br><span class="line">    <span class="built_in">console</span>.log(num)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 并不一定是有返回函数才算是产生了闭包</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f3</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">2</span></span><br><span class="line">  f3 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">f1()</span><br><span class="line">f3() <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<h3 id="闭包的应用"><a href="#闭包的应用" class="headerlink" title="闭包的应用"></a>闭包的应用</h3><h4 id="计数器"><a href="#计数器" class="headerlink" title="计数器"></a>计数器</h4><p>需求：统计一个函数的调用次数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> count = <span class="number">0</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  count++</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;我被调用了，调用次数是&#x27;</span> + count)</span><br><span class="line">&#125;</span><br><span class="line">fn()</span><br><span class="line">fn()</span><br><span class="line">fn()</span><br><span class="line"><span class="comment">// 缺点：count是全局变量，不安全</span></span><br></pre></td></tr></table></figure>

<p>使用闭包解决这个问题！！！！</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> count = <span class="number">0</span> <span class="comment">// 私有变量, 将 count 保护起来了</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    count++</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;当前count&#x27;</span> + count)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> add</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> result = outer()</span><br><span class="line">result()</span><br></pre></td></tr></table></figure>

<p>【案例：银行存钱取钱】</p>
<h4 id="缓存的私有化"><a href="#缓存的私有化" class="headerlink" title="缓存的私有化"></a>缓存的私有化</h4><blockquote>
<p>缓存（cache）：数据的缓冲区，当要读取数据时，先从缓冲中获取数据，如果找到了，直接获取，如果找不到，重新去请求数据。</p>
</blockquote>
<p>计算斐波那契数列，会有很大的性能问题，因为重复的计算了很多次，因此我们可以使用缓存来解决这个性能问题。</p>
<p>缺点：既然使用缓存，就需要保证缓存的数据的安全，不能被别人修改，因此，需要使用闭包来实现缓存的私有化。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 缓存</span></span><br><span class="line">  <span class="keyword">var</span> arr = []</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> fbi = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span> || n == <span class="number">2</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (arr[n]) &#123;</span><br><span class="line">      <span class="keyword">return</span> arr[n]</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> temp = fbi(n - <span class="number">1</span>) + fbi(n - <span class="number">2</span>)</span><br><span class="line">      arr[n] = temp <span class="comment">//存入缓存</span></span><br><span class="line">      <span class="keyword">return</span> temp</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> fbi</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fbi = outer()</span><br><span class="line"><span class="built_in">console</span>.log(fbi(<span class="number">40</span>))</span><br></pre></td></tr></table></figure>

<h3 id="闭包存在的问题"><a href="#闭包存在的问题" class="headerlink" title="闭包存在的问题"></a>闭包存在的问题</h3><blockquote>
<p>正常情况下：函数在调用的时候，去开辟一块内存空间用来执行内部的代码，当函数调用结束的时候，要销毁开辟的空间，节省内存</p>
<p>闭包占用的内存是不会被释放的，因此，如果滥用闭包，会造成内存泄漏的问题。闭包很强大，但是只有在必须使用闭包的时候才使用</p>
</blockquote>
<h4 id="js-的垃圾回收机制-了解"><a href="#js-的垃圾回收机制-了解" class="headerlink" title="js 的垃圾回收机制(了解)"></a>js 的垃圾回收机制(了解)</h4><ul>
<li>内存：计算机中所有程序的运行都是在<code>内存</code> 中进行的，因此内存的性能对计算机的影响非常大，运行程序需要消耗内存，当程序结束时，内存会得到释放。</li>
<li>javascript 分配内存：当我们定义变量，javascript 自动分配内存存储数据。无论是值类型或者是引用类型，都需要存储在内存中。</li>
<li>垃圾回收：当代码执行结束，分配的内存已经不需要了，这时候需要将内存进行回收，在 javascript 语言中，<code>垃圾回收机器</code>会帮我们回收<code>不再需要使用</code>的内存。</li>
</ul>
<h5 id="引用记数法清除"><a href="#引用记数法清除" class="headerlink" title="引用记数法清除"></a>引用记数法清除</h5><p>引用记数垃圾收集：如果没有引用指向某个对象（或者是函数作用域），那么这个对象或者函数作用域就会被垃圾回收机制回收。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">  name: <span class="string">&#x27;zs&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 对象被 o 变量引用，引用记数 1</span></span><br><span class="line"><span class="keyword">var</span> obj = o <span class="comment">// 变量被 o 和 obj 引用，引用记数 2</span></span><br><span class="line">o = <span class="number">1</span> <span class="comment">// o 不在引用对象了，引用记数 1</span></span><br><span class="line">obj = <span class="literal">null</span> <span class="comment">// obj 不在引用对象了，引用记数 0，可以被垃圾回收了</span></span><br></pre></td></tr></table></figure>

<p>引用计数法无法解决循环引用导致的内存泄露</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> obj1 = &#123;&#125; <span class="comment">// 引用计数为 2</span></span><br><span class="line">  <span class="keyword">var</span> obj2 = &#123;&#125; <span class="comment">// 引用计数为 2</span></span><br><span class="line">  obj1.a = obj2</span><br><span class="line">  obj2.b = obj1</span><br><span class="line">&#125;</span><br><span class="line">fn() <span class="comment">// 销毁fn调用开辟的空间， 但是由于引用计数考虑到两个对象都不是零引用的对象，就不能够被垃圾回收机制给回收掉</span></span><br></pre></td></tr></table></figure>

<h5 id="标记清除法清除"><a href="#标记清除法清除" class="headerlink" title="标记清除法清除"></a>标记清除法清除</h5><p>使用引用计数法进行垃圾回收的时候，会出现循环引用导致内存泄漏的问题。因此现代的浏览器都采用标记清除法来进行垃圾回收。</p>
<p>这个算法假定设置一个叫做根（root）的对象（在 Javascript 里，根是全局对象 Window）。定期的，垃圾回收器将从根开始，找所有从根开始引用的对象，然后找这些对象引用的对象……从根开始，垃圾回收器将找到所有可以获得的对象和所有不能获得的对象。</p>
<p><strong>从 2012 年起，所有现代浏览器都使用了标记 - 清除垃圾回收算法。</strong></p>
<h4 id="闭包占用内存释放"><a href="#闭包占用内存释放" class="headerlink" title="闭包占用内存释放"></a>闭包占用内存释放</h4><p>当闭包的功能不在需要使用了，将这个变量指向 <code>null</code>， 这样闭包占用的内存就可以被回收掉了</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> count = <span class="number">0</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    count++</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;执行次数&#x27;</span> + count)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> fn</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> result = outer()</span><br><span class="line">result()</span><br><span class="line">result = <span class="literal">null</span> <span class="comment">// 当函数 fn 没有被变量引用了，那么函数 fn 就会被回收，函数 fn 一旦被回收，那么 outer调用形成的作用域也就得到了释放</span></span><br></pre></td></tr></table></figure>

<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><blockquote>
<p>正则表达式(regular expression)描述了一种字符串匹配的模式（pattern），可以用来检查一个串是否含有某种子串（数据验证）、将匹配的子串替换（数据删除或替换）或者从某个串中取出符合某个条件的子串等（数据提取）</p>
</blockquote>
<h3 id="创建正则表达式"><a href="#创建正则表达式" class="headerlink" title="创建正则表达式"></a>创建正则表达式</h3><ul>
<li>构造函数的方式</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// RegExp(regular expression)</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="regexp">/a/</span>) <span class="comment">// 匹配字母中有 a</span></span><br></pre></td></tr></table></figure>

<ul>
<li>正则字面量</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/a/</span></span><br></pre></td></tr></table></figure>

<p>正则有 test 方法，作用是测试字符串是否符合正则表达式的规律，如果符合， 返回 true</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(reg.test(<span class="string">&#x27;abc&#x27;</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.test(<span class="string">&#x27;def&#x27;</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h3><blockquote>
<p>正则表达式由一些普通字符和元字符组成，普通字符包括大小写字母、数字等，而元字符则具有特殊的含义</p>
</blockquote>
<h4 id="常见元字符"><a href="#常见元字符" class="headerlink" title="常见元字符"></a>常见元字符</h4><p><code>\d</code> 匹配一个数字字符。等价于 <code>[0-9]</code></p>
<p><code>\D</code> 匹配一个非数字字符。等价于 <code>[^0-9]</code></p>
<p><code>\w</code> 匹配包括下划线的任何单词字符。等价于<code>[A-Za-z0-9_]</code></p>
<p><code>\W</code> 匹配任何非单词字符。等价于 <code>[^A-Za-z0-9_]</code></p>
<p><code>\s</code> 匹配任何空白字符，包括空格、制表符、换页符等等。等价于 <code>[\f\n\r\t\v]</code></p>
<p><code>\S</code> 匹配任何非空白字符。等价于 <code>[^\f\n\r\t\v]</code></p>
<p><code>\</code> 将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。例如， <code>n</code> 匹配字符 <code>n</code>。<code>\n</code> 匹配换行符。<code>\\</code> 匹配 <code>\</code>，<code>\(</code> 则匹配 <code>(</code>。</p>
<p><code>.</code> 匹配除换行符 <code>\n</code> 之外的任何单字符。要匹配包括 ‘\n’ 在内的任何字符，可用<code>(.|\n)</code></p>
<p><code>|</code> 指明两项之间的一个选择。，优先级最低，| 的左右都是单独的整体</p>
<p><code>()</code> 优先级最高，标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。使用 $0…$9 属性。要匹配这些字符，请使用 <code>\(</code> 和 <code>\)</code> 。每个()就是一个子匹配 ‘\1’和’$1’用来指定第一个子匹配</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">/f|boot/ <span class="comment">// 匹配 `f` 和 `boot`</span></span><br><span class="line">/(f|b)oot/ <span class="comment">// 匹配 `foot` 和 `boot`</span></span><br></pre></td></tr></table></figure>

<h4 id="空白字符"><a href="#空白字符" class="headerlink" title="空白字符"></a>空白字符</h4><ul>
<li><code>\f</code> 匹配一个换页符</li>
<li><code>\n</code> 匹配一个换行符</li>
<li><code>\r</code> 匹配一个回车符</li>
<li><code>\t</code> 匹配一个制表符</li>
<li><code>\v</code> 匹配一个垂直制表符</li>
</ul>
<h4 id="字符类的元字符"><a href="#字符类的元字符" class="headerlink" title="字符类的元字符"></a>字符类的元字符</h4><ul>
<li><code>[]</code> 在正则表达式中表示 <strong>单个</strong> 字符的位置，[] 里面写这个位置可以出现的字符</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">;<span class="regexp">/[abc]/</span> <span class="comment">// 匹配 a,b,c 任意一个字符</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>[^]</code> 在中扩号中的 <code>^</code> 表示非的意思</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ^ 在方括号表达式开头中使用，此时它表示不接受该字符集合</span></span><br><span class="line">;<span class="regexp">/[^abc]/</span> <span class="comment">// 匹配除了a, b, c以外的其他字符</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>[a-z]</code> <code>[1-9]</code>表示范围</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">;<span class="regexp">/[a-z]/</span> <span class="comment">// 小写字母</span></span><br><span class="line">;<span class="regexp">/[A-Z]/</span> <span class="comment">// 大写字母</span></span><br><span class="line">;<span class="regexp">/[0-9]/</span> <span class="comment">// 数字</span></span><br><span class="line">;<span class="regexp">/[a-zA-Z0-9]/</span> <span class="comment">// 所有的小写字母和大写字母以及数字</span></span><br></pre></td></tr></table></figure>

<h4 id="边界类元字符"><a href="#边界类元字符" class="headerlink" title="边界类元字符"></a>边界类元字符</h4><blockquote>
<p>我们前面学习的正则只要有满足的条件的就会返回 true，并不能做到精确的匹配。</p>
</blockquote>
<ul>
<li><p><code>^</code> 匹配输入字符串的开始位置</p>
</li>
<li><p><code>$</code> 匹配输入字符串的结尾位置</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">;<span class="regexp">/^chuan/</span> <span class="comment">// 以chuan开头</span></span><br><span class="line">;<span class="regexp">/chuan$/</span> <span class="comment">// 以chuan结尾</span></span><br><span class="line">;<span class="regexp">/^chuan$/</span> <span class="comment">// 精确匹配 chuan</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 精确匹配chuan,表示必须是这个</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="regexp">/^chuan$/</span>.test(<span class="string">&#x27;chuanchuan&#x27;</span>)) <span class="comment">// fasle</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>以后表单校验要精确匹配</p>
</blockquote>
<ul>
<li><code>\b</code> 匹配一个字边界，即字与空格间的位置。如果它位于要匹配的字符串的开始，它在单词的开始处查找匹配项。如果它位于字符串的结尾，它在单词的结尾处查找匹配项。<br><code>/\bCha/</code> : 匹配 Chapter 的开头三个字符<br><code>/ter\b/</code> : 匹配 Chapter 的结尾三个字符</li>
<li><code>\B</code> 表示非单词边界。位置并不重要，因为匹配不关心究竟是单词的开头还是结尾。<br><code>/\Bapt/</code> 表达式匹配 Chapter 中的字符串 apt，但不匹配 aptitude 中的字符串 apt</li>
</ul>
<h4 id="量词类元字符"><a href="#量词类元字符" class="headerlink" title="量词类元字符"></a>量词类元字符</h4><blockquote>
<p>量词用来控制出现的次数，一般来说量词和边界会一起使用</p>
</blockquote>
<ul>
<li><code>*</code> 匹配前面的子表达式零次或多次，等价于 <code>&#123;0,&#125;</code></li>
<li><code>+</code> 匹配前面的子表达式一次或多次，等价于 <code>&#123;1,&#125;</code></li>
<li><code>?</code> 匹配前面的子表达式零次或一次，等价于 <code>&#123;0,1&#125;</code> 。当该字符紧跟在任何一个其他限制符 (<code>*</code>, <code>+</code>,<code>?</code>, <code>&#123;n&#125;</code>, <code>&#123;n,&#125;</code>, <code>&#123;n,m&#125;)</code> 后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串</li>
<li><code>&#123;n&#125;</code> n 是一个非负整数。匹配确定的 <code>n</code> 次</li>
<li><code>&#123;n,&#125;</code> n 是一个非负整数。至少匹配 <code>n</code> 次</li>
<li><code>&#123;n,m&#125;</code> <code>m</code> 和 <code>n</code> 均为非负整数，其中<code>n</code> &lt;= <code>m</code>。最少匹配 <code>n</code> 次且最多匹配 <code>m</code> 次</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &#123;&#125; 就近修饰单个字符</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="regexp">/chuan&#123;2&#125;/</span>.test(<span class="string">&#x27;chuanchuan&#x27;</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="regexp">/(chuan)&#123;2&#125;/</span>.test(<span class="string">&#x27;chuanchuan&#x27;</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="regexp">/chuan&#123;2&#125;/</span>.test(<span class="string">&#x27;chuann&#x27;</span>)) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="其他字符"><a href="#其他字符" class="headerlink" title="其他字符"></a>其他字符</h4><ul>
<li><code>g</code> 全局标记，指定将该表达式应用到输入字符串中能够查找到的尽可能多的匹配</li>
<li><code>i</code> 标记指定不区分大小写。表达式的结尾处</li>
<li><code>m</code> 表明可以进行多行匹配，但是这个只有当使用^和$模式时才会起作用，在其他的模式中，加不加入 m 都可以进行多行匹配</li>
</ul>
<h3 id="优先级"><a href="#优先级" class="headerlink" title="优先级"></a>优先级</h3><p>从高到低的优先级顺序：</p>
<ol>
<li><strong><code>\</code></strong> 转义符</li>
<li><strong><code>()</code></strong>, <strong><code>(?:)</code></strong> , <strong><code>(?=)</code></strong>, <strong><code>[]</code></strong> 圆括号和方括号</li>
<li><strong><code>*</code></strong>, <strong><code>+</code></strong> , <strong><code>?</code></strong>, <strong><code>&#123;n&#125;</code></strong>, <strong><code>&#123;n,&#125;</code></strong>, <strong><code>&#123;n,m&#125;</code></strong> 限定符</li>
<li><strong><code>^</code></strong>, <strong><code>$</code></strong>, <strong><code>\任何元字符、任何字符</code></strong> 定位点和序列（即：位置和顺序）</li>
<li><strong><code>|</code></strong> 替换，”或”操作</li>
</ol>
<blockquote>
<p>字符具有高于替换运算符的优先级，使得”m|food”匹配”m”或”food”。若要匹配”mood”或”food”，请使用括号创建子表达式，从而产生”(m|f)ood”。</p>
</blockquote>
<h3 id="正则的使用"><a href="#正则的使用" class="headerlink" title="正则的使用"></a>正则的使用</h3><h4 id="字符串使用正则"><a href="#字符串使用正则" class="headerlink" title="字符串使用正则"></a>字符串使用正则</h4><ul>
<li><code>replace()</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;   123AD  asadf   asadfasf  adf  &#x27;</span></span><br><span class="line"><span class="comment">// 1. 替换掉字符串中的所有空白</span></span><br><span class="line"><span class="keyword">var</span> str2 = str.replace(<span class="regexp">/\s/g</span>, <span class="string">&#x27;&#x27;</span>) <span class="comment">// g: global, 全局搜索</span></span><br><span class="line"><span class="comment">// 2. 将所有的ad替换成xx</span></span><br><span class="line"><span class="keyword">var</span> str2 = str.replace(<span class="regexp">/ad/g</span>, <span class="string">&#x27;xx&#x27;</span>)</span><br><span class="line"><span class="comment">// 3. 将所有的ad/AD替换成xx</span></span><br><span class="line"><span class="keyword">var</span> str2 = str.replace(<span class="regexp">/ad/gi</span>, <span class="string">&#x27;xx&#x27;</span>) <span class="comment">// i： ignore 忽略大小写</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;abc,efg,123,abc,123,a&#x27;</span></span><br><span class="line"><span class="comment">// 4. 所有的逗号替换成句号</span></span><br><span class="line"><span class="keyword">var</span> str2 = str.replace(<span class="regexp">/,/g</span>, <span class="string">&#x27;。&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> jsonStr = <span class="string">&#x27;[&#123;&quot;name&quot;:&quot;张三&quot;,score:80&#125;,&#123;&quot;name&quot;:&quot;张三&quot;,score:90&#125;,&#123;&quot;name&quot;:&quot;张三&quot;,score:81&#125;]&#x27;</span></span><br><span class="line"><span class="comment">// 5. 把所有成绩都修改成100分</span></span><br><span class="line"><span class="keyword">var</span> str2 = jsonStr.replace(<span class="regexp">/\d&#123;1,2&#125;/g</span>, <span class="string">&#x27;100&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>match()</code> ==&gt; 匹配， 匹配符合正则表达式的字符</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str2 = <span class="string">&#x27;zs的手机号是18938383838, ls的手机号13989907890， ww的手机号是13848962389，zl的手机号是18970890908&#x27;</span></span><br><span class="line"><span class="comment">// 需求： 匹配出来所有的手机号, 返回一个数组</span></span><br><span class="line"><span class="keyword">var</span> str3 = str2.match(<span class="regexp">/1[3-9]\d&#123;9&#125;/g</span>)</span><br><span class="line"><span class="built_in">console</span>.log(str3)</span><br></pre></td></tr></table></figure>

<h4 id="正则的方法"><a href="#正则的方法" class="headerlink" title="正则的方法"></a>正则的方法</h4><ul>
<li><p>test() ==&gt; 测试字符串是否符合正则表达式的规律，符合，就返回 true</p>
</li>
<li><p>exec() ==&gt; 提取，提取字符串中符合正则表达式的字符，需要用括号分组， 如果没有进行分组，返回的是符合整个正则表达式的字符</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;今天是2018-10-16，我这里的需求是提取出年月日&#x27;</span></span><br><span class="line"><span class="comment">// var reg = /\d&#123;4&#125;-\d&#123;2&#125;-\d&#123;2&#125;/;  ==&gt;  符合整个正则表达式的字符</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/(\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)/</span> <span class="comment">// ==&gt; 有分组存在 ，默认组名为 undefined</span></span><br><span class="line"><span class="keyword">var</span> reg2 = <span class="regexp">/(?&lt;year&gt;\d&#123;4&#125;)-(?&lt;month&gt;\d&#123;2&#125;)-(?&lt;day&gt;\d&#123;2&#125;)/</span> <span class="comment">// ?&lt;组名&gt; 添加组名</span></span><br><span class="line"><span class="keyword">var</span> ret = reg.exec(str) <span class="comment">// 提取出分组的内容以下标的形式存在返回的数组里面</span></span><br><span class="line"><span class="keyword">var</span> ret2 = reg2.exec(str)</span><br><span class="line"><span class="built_in">console</span>.log(ret)</span><br><span class="line"><span class="built_in">console</span>.log(ret2)</span><br><span class="line"><span class="comment">// index 代表 匹配到 ret 在 str 中的下标</span></span><br></pre></td></tr></table></figure>

<h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><ul>
<li><code>[xyz]</code> 字符集合。匹配所包含的任意一个字符。例如， <code>[abc]</code> 可以匹配 “plain” 中的 ‘a’</li>
<li><code>[^xyz]</code> 负值字符集合。匹配未包含的任意字符。例如， <code>[^abc]</code> 可以匹配 “plain” 中的’p’、’l’、’i’、’n’</li>
<li><code>[a-z]</code> 匹配所有小写字母</li>
<li><code>[-a-z]</code> 或 <code>[a-z-]</code> 匹配所有小写字母和 <code>-</code></li>
<li><code>[A-Za-z0-9]</code> 匹配任何大写字母小写字母和数字</li>
<li><code>\b([a-z]+)\1\b/gi</code> 一个单词连续出现的位置</li>
<li>将通用资源指示符 (URI) 分解为其组件</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;https://www.baidu.com:80/index.html&#x27;</span></span><br><span class="line"><span class="keyword">var</span> patt1 = <span class="regexp">/(\w+):\/\/([^/:]+)(:\d*)?([^# ]*)/</span></span><br><span class="line">arr = str.match(patt1)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">  <span class="built_in">document</span>.write(arr[i])</span><br><span class="line">  <span class="built_in">document</span>.write(<span class="string">&#x27;&lt;br&gt;&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// https://www.baidu.com:80/index.html</span></span><br><span class="line"><span class="comment">// https</span></span><br><span class="line"><span class="comment">// www.baidu.com</span></span><br><span class="line"><span class="comment">// :80</span></span><br><span class="line"><span class="comment">// /index.html</span></span><br></pre></td></tr></table></figure>

<h4 id="后向引用"><a href="#后向引用" class="headerlink" title="后向引用"></a>后向引用</h4><p><strong><code>后向引用</code></strong> 正则表达式一个最重要的特性就是将匹配成功的模式的某部分进行存储供以后使用这一能力</p>
<p>对一个正则表达式模式或部分模式两边添加圆括号将导致相关匹配存储到一个临时缓冲区中，所捕获的每个子匹配都按照在正则表达式模式中从左到右出现的顺序存储。缓冲区编号从 1 开始，最多可存储 99 个捕获的子表达式。每个缓冲区都可以使用 <code>\n</code> 访问，其中 n 为一个标识特定缓冲区的一位或两位十进制数。</p>
<p>可以使用非捕获元字符 <code>?:</code>、<code>?=</code> 或 <code>?!</code> 来忽略对这部分正则表达式的保存</p>
<p><code>?:</code> 非获取匹配。匹配但不获取匹配结果，不存储供以后使用。这在使用 “或” 字符 (|) 来组合一个模式的各个部分是很有用。例如， <code>industr(?:y|ies)</code> 就是一个比 <code>industry|industries</code> 更简略的表达式</p>
<p><code>?=</code> 正向预查。在任何匹配的字符串开始处匹配查找字符串。非获取匹配，不获取供以后使用。例如，’Windows (?=95|98|NT|2000)’ 能匹配 “Windows 2000” 中的 “Windows” ，但不能匹配 “Windows 3.1” 中的 “Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始</p>
<p><code>?!</code> 负向预查，在任何不匹配的字符串开始处匹配查找字符串。非获取匹配，不获取供以后使用。例如’Windows (?!95|98|NT|2000)’ 能匹配 “Windows 3.1” 中的 “Windows”，但不能匹配 “Windows 2000” 中的 “Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始</p>
<p>后向引用一个最简单，最有用的应用是提供了确定文字中连续出现两个相同单词的位置的能力。请看下面的句子： Is is the cost of of gasoline going up up? 根据所写内容，上面的句子明显存在单词多次重复的问题。如果能有一种方法无需查找每个单词的重复现象就能修改该句子就好了。下面的 JScript 正则表达式使用一个子表达式就可以实现这一功能</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ss = <span class="string">&#x27;Is is the cost of of gasoline going up up?&#x27;</span></span><br><span class="line"><span class="keyword">var</span> re = <span class="regexp">/\b([a-z]+) \1\b/gim</span></span><br><span class="line"><span class="keyword">var</span> rv = ss.replace(re, <span class="string">&#x27;$1&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>在这个示例中，子表达式就是圆括号之间的每一项。所捕获的表达式包括一个或多个字母字符，即由<code>[a-z]+</code>所指定的。该正则表达式的第二部分是对前面所捕获的子匹配的引用，也就是由附加表达式所匹配的第二次出现的单词。<code>\1</code>用来指定第一个子匹配。单词边界元字符确保只检测单独的单词。如果不这样，则诸如 “is issued” 或 “this is” 这样的短语都会被该表达式不正确地识别。</p>
<h4 id="常用正则表达式"><a href="#常用正则表达式" class="headerlink" title="常用正则表达式"></a>常用正则表达式</h4><p>校验数字的表达式</p>
<ul>
<li>n 位的数字：<code>^\d&#123;n&#125;$</code></li>
<li>至少 n 位的数字：<code>^\d&#123;n,&#125;$</code></li>
<li>m-n 位的数字：<code>^\d&#123;m,n&#125;$</code></li>
<li>零和非零开头的数字：<code>^(0|[1-9][0-9]*)$</code></li>
<li>非零开头的最多带两位小数的数字：<code>^([1-9][0-9]*)+(.[0-9]&#123;1,2&#125;)?$</code></li>
<li>带 1-2 位小数的正数或负数：<code>^(\-)?\d+(\.\d&#123;1,2&#125;)$</code></li>
<li>正数、负数、和小数：<code>^(\-|\+)?\d+(\.\d+)?$</code></li>
<li>有两位小数的正实数：<code>^[0-9]+(\.[0-9]&#123;2&#125;)?$</code></li>
<li>非零的正整数：<code>^[1-9]\d*$</code></li>
<li>非零的负整数：<code>^-[1-9]\d*$</code></li>
<li>非负整数：<code>^\d+$</code></li>
<li>非正整数：<code>^-[1-9]\d*|0$</code></li>
</ul>
<p>校验字符的表达式</p>
<ul>
<li>汉字：<code>^[\u4e00-\u9fa5]&#123;0,&#125;$</code></li>
<li>英文和数字：<code>^[A-Za-z0-9]+$</code></li>
<li>长度为 3-20 的所有字符：<code>^\.&#123;3,20&#125;$</code></li>
<li>由 26 个英文字母组成的字符串：<code>^[A-Za-z]+$</code></li>
<li>由 26 个大写英文字母组成的字符串：<code>^[A-Z]+$</code></li>
<li>由 26 个小写英文字母组成的字符串：<code>^[a-z]+$</code></li>
<li>由数字和 26 个英文字母组成的字符串：<code>^[A-Za-z0-9]+$</code></li>
<li>由数字、26 个英文字母或者下划线组成的字符串：<code>^\w+$</code></li>
<li>中文、英文、数字包括下划线：<code>^[\u4E00-\u9FA5A-Za-z0-9_]+$</code></li>
<li>中文、英文、数字但不包括下划线等符号：<code>^[\u4E00-\u9FA5A-Za-z0-9]+$</code></li>
</ul>
<p>特殊需求表达式(待验证)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Email地址：^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$</span><br><span class="line">域名：[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;(&#x2F;.[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;)+&#x2F;.?</span><br><span class="line">InternetURL：[a-zA-z]+:&#x2F;&#x2F;[^\s]* 或 ^http:&#x2F;&#x2F;([\w-]+\.)+[\w-]+(&#x2F;[\w-.&#x2F;?%&amp;&#x3D;]*)?$</span><br><span class="line">手机号码：^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d&#123;8&#125;$</span><br><span class="line">电话号码(&quot;XXX-XXXXXXX&quot;、&quot;XXXX-XXXXXXXX&quot;、&quot;XXX-XXXXXXX&quot;、&quot;XXX-XXXXXXXX&quot;、&quot;XXXXXXX&quot;和&quot;XXXXXXXX)：^(\(\d&#123;3,4&#125;-)|\d&#123;3.4&#125;-)?\d&#123;7,8&#125;$</span><br><span class="line">国内电话号码(0511-4405222、021-87888822)：\d&#123;3&#125;-\d&#123;8&#125;|\d&#123;4&#125;-\d&#123;7&#125;</span><br><span class="line">电话号码正则表达式（支持手机号码，3-4位区号，7-8位直播号码，1－4位分机号）: ((\d&#123;11&#125;)|^((\d&#123;7,8&#125;)|(\d&#123;4&#125;|\d&#123;3&#125;)-(\d&#123;7,8&#125;)|(\d&#123;4&#125;|\d&#123;3&#125;)-(\d&#123;7,8&#125;)-(\d&#123;4&#125;|\d&#123;3&#125;|\d&#123;2&#125;|\d&#123;1&#125;)|(\d&#123;7,8&#125;)-(\d&#123;4&#125;|\d&#123;3&#125;|\d&#123;2&#125;|\d&#123;1&#125;))$)</span><br><span class="line">身份证号(15位、18位数字)，最后一位是校验位，可能为数字或字符X：(^\d&#123;15&#125;$)|(^\d&#123;18&#125;$)|(^\d&#123;17&#125;(\d|X|x)$)</span><br><span class="line">帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]&#123;4,15&#125;$</span><br><span class="line">密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)：^[a-zA-Z]\w&#123;5,17&#125;$</span><br><span class="line">强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间)：^(?&#x3D;.*\d)(?&#x3D;.*[a-z])(?&#x3D;.*[A-Z]).&#123;8,10&#125;$</span><br><span class="line">日期格式：^\d&#123;4&#125;-\d&#123;1,2&#125;-\d&#123;1,2&#125;</span><br><span class="line">一年的12个月(01～09和1～12)：^(0?[1-9]|1[0-2])$</span><br><span class="line">一个月的31天(01～09和1～31)：^((0?[1-9])|((1|2)[0-9])|30|31)$</span><br><span class="line">钱的输入格式：</span><br><span class="line">有四种钱的表示形式我们可以接受:&quot;10000.00&quot; 和 &quot;10,000.00&quot;, 和没有 &quot;分&quot; 的 &quot;10000&quot; 和 &quot;10,000&quot;：^[1-9][0-9]*$</span><br><span class="line">这表示任意一个不以0开头的数字,但是,这也意味着一个字符&quot;0&quot;不通过,所以我们采用下面的形式：^(0|[1-9][0-9]*)$</span><br><span class="line">一个0或者一个不以0开头的数字.我们还可以允许开头有一个负号：^(0|-?[1-9][0-9]*)$</span><br><span class="line">这表示一个0或者一个可能为负的开头不为0的数字.让用户以0开头好了.把负号的也去掉,因为钱总不能是负的吧。下面我们要加的是说明可能的小数部分：^[0-9]+(.[0-9]+)?$</span><br><span class="line">必须说明的是,小数点后面至少应该有1位数,所以&quot;10.&quot;是不通过的,但是 &quot;10&quot; 和 &quot;10.2&quot; 是通过的：^[0-9]+(.[0-9]&#123;2&#125;)?$</span><br><span class="line">这样我们规定小数点后面必须有两位,如果你认为太苛刻了,可以这样：^[0-9]+(.[0-9]&#123;1,2&#125;)?$</span><br><span class="line">这样就允许用户只写一位小数.下面我们该考虑数字中的逗号了,我们可以这样：^[0-9]&#123;1,3&#125;(,[0-9]&#123;3&#125;)*(.[0-9]&#123;1,2&#125;)?$</span><br><span class="line">1到3个数字,后面跟着任意个 逗号+3个数字,逗号成为可选,而不是必须：^([0-9]+|[0-9]&#123;1,3&#125;(,[0-9]&#123;3&#125;)*)(.[0-9]&#123;1,2&#125;)?$</span><br><span class="line">备注：这就是最终结果了,别忘了&quot;+&quot;可以用&quot;*&quot;替代如果你觉得空字符串也可以接受的话(奇怪,为什么?)最后,别忘了在用函数时去掉去掉那个反斜杠,一般的错误都在这里</span><br><span class="line">xml文件：^([a-zA-Z]+-?)+[a-zA-Z0-9]+\\.[x|X][m|M][l|L]$</span><br><span class="line">中文字符的正则表达式：[\u4e00-\u9fa5]</span><br><span class="line">双字节字符：[^\x00-\xff] (包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计2，ASCII字符计1))</span><br><span class="line">空白行的正则表达式：\n\s*\r (可以用来删除空白行)</span><br><span class="line">HTML标记的正则表达式：&lt;(\S*?)[^&gt;]*&gt;.*?|&lt;.*? &#x2F;&gt; ( 首尾空白字符的正则表达式：^\s*|\s*$或(^\s*)|(\s*$) (可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)</span><br><span class="line">腾讯QQ号：[1-9][0-9]&#123;4,&#125; (腾讯QQ号从10000开始)</span><br><span class="line">中国邮政编码：[1-9]\d&#123;5&#125;(?!\d) (中国邮政编码为6位数字)</span><br><span class="line">IP地址：((?:(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d)\\.)&#123;3&#125;(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d))</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue</title>
    <url>/2010.html</url>
    <content><![CDATA[<h1 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h1><ul>
<li><p><a href="https://cn.vuejs.org/">vue 中文网</a></p>
</li>
<li><p><a href="https://github.com/vuejs/vue">github 下载地址</a></p>
</li>
<li><p>Vue.js (读音 /vju:/ view)</p>
</li>
<li><p>渐进式 JavaScript 框架</p>
<ul>
<li><p>渐进式：小型项目使用 vue 就够了，随着页面的复杂程度提高，就要学习 vue-rouer 来管理更多的页面，再随着项目的数据越来越多，管理数据也变得麻烦起来了，就开始使用 vuex 来管理数据</p>
</li>
<li><p>框架 : 一整套的解决方案</p>
</li>
</ul>
</li>
</ul>
<h2 id="框架和库的区别"><a href="#框架和库的区别" class="headerlink" title="框架和库的区别"></a>框架和库的区别</h2><h3 id="库-Library-，代表-jquery"><a href="#库-Library-，代表-jquery" class="headerlink" title="库(Library) ，代表 : jquery"></a>库(Library) ，代表 : jquery</h3><ul>
<li>库就是一系列函数的集合，我们开发人员在使用库的时候，想要完成什么样的功能，就调用库中提供的某个方法</li>
</ul>
<p>比如：想要添加样式，就调用 jquery 中的 .css() / .addClass()</p>
<ul>
<li>库起到了一个辅助的作用，在使用库的是时候，是由开发人员说了算，也是由开发人员起主导作用</li>
</ul>
<h3 id="框架-Framework-，代表-vue"><a href="#框架-Framework-，代表-vue" class="headerlink" title="框架 (Framework)，代表 : vue"></a>框架 (Framework)，代表 : vue</h3><ul>
<li><p>在使用框架的时候，是由框架说了算，由框架起到了主导作用</p>
</li>
<li><p>框架是一套完整的解决方案，框架中制定了一套规则，使用框架的时候，只需要按照规则把代码放到合适的地方，然后框架会在合适的时机，主动调用开发人员的代码</p>
</li>
</ul>
<p>比如 : 想用 vue 组件里遍历就得使用 v-for，使用 for 不行</p>
<h3 id="主要区别：控制反转"><a href="#主要区别：控制反转" class="headerlink" title="主要区别：控制反转"></a>主要区别：控制反转</h3><blockquote>
<p>也就是 : 谁起到了主导作用</p>
</blockquote>
<ul>
<li><p>使用库的时候：开发人员起主导作用</p>
</li>
<li><p>使用框架的时候：框架起到了主导作用</p>
</li>
<li><p>从体量上看，框架一般比库大</p>
</li>
<li><p>会发现使用框架的时候，会受到很多限制</p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/26078359?group_id=830801800406917120">我们所说的前端框架与库的区别？</a></p>
</li>
</ul>
<h2 id="MVC-MVVM"><a href="#MVC-MVVM" class="headerlink" title="MVC + MVVM"></a>MVC + MVVM</h2><h3 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h3><ol>
<li><p>MVC 是一种软件架构模式，也有人叫做设计模式</p>
</li>
<li><p>M : Model 数据模型 (专门用来操作数据，数据的 CRUD)</p>
</li>
<li><p>V : View 视图 (对于前端来说就是页面)</p>
</li>
<li><p>C : Controller 控制器 (是视图和数据模型沟通的桥梁，用于处理业务逻辑)</p>
</li>
</ol>
<h3 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h3><blockquote>
<p>Vue 使用的是 MVVM 模式</p>
</blockquote>
<ul>
<li><p>MVVM ===&gt; M / V / VM</p>
</li>
<li><p>M : model 数据层</p>
</li>
<li><p>V : view 视图层</p>
</li>
<li><p>VM : ViewModel 视图模型</p>
</li>
<li><p>核心 : M &lt;===&gt; VM &lt;===&gt; V</p>
</li>
</ul>
<h3 id="MVVM-优势"><a href="#MVVM-优势" class="headerlink" title="MVVM 优势"></a>MVVM 优势</h3><ul>
<li><p>MVC 模式将应用程序划为三个部分，实现职责分离</p>
<ul>
<li><p>但是，在前端中，经常要通过 js 代码来进行一些逻辑操作，最终还要把这些逻辑操作展示页面中，也需要<code>频繁的操作DOM</code></p>
</li>
<li><p>比如 : ajax 请求、添加、修改、设置样式、动画</p>
</li>
</ul>
</li>
<li><p>MVVM 的思想通过 <code>数据双向绑定</code> 让数据自动的双向同步</p>
<ul>
<li><p>V (修改视图) –&gt; M</p>
</li>
<li><p>M (修改数据) –&gt; V</p>
</li>
</ul>
</li>
<li><p>采用的是 : <strong>数据驱动视图</strong>的思想，<strong>数据是核心</strong>。不要再想着怎么操作 DOM，而是想着如何操作数据</p>
</li>
</ul>
<h3 id="Vue-中的-MVVM"><a href="#Vue-中的-MVVM" class="headerlink" title="Vue 中的 MVVM"></a>Vue 中的 MVVM</h3><ul>
<li>注意 : 不推荐直接手动操作 DOM</li>
</ul>
<blockquote>
<p>每个人操作 DOM 的方法不一样，会造成性能不一样<br>官网 : 虽然没有完全遵循 MVVM 模型，但是 Vue 的设计也受到了它的启发。因此在文档中经常会使用 vm (ViewModel 的缩写) 这个变量名表示 Vue 实例</p>
</blockquote>
<h2 id="Vue-基本使用"><a href="#Vue-基本使用" class="headerlink" title="Vue 基本使用"></a>Vue 基本使用</h2><ol>
<li><p>安装 : <code>npm i vue</code></p>
</li>
<li><p>导入 : <code>&lt;script src=&#39;./vue.js&#39;&gt;&lt;/script&gt;</code></p>
</li>
<li><p>实例化 vue</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="comment">// 指定 vue 管理的边界，不能是 body 或 html 节点</span></span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="comment">// 提供视图中需要的数据</span></span><br><span class="line">  <span class="comment">// 视图可以直接使用 data 中的数据</span></span><br><span class="line">  data: &#123;</span><br><span class="line">    msg: <span class="string">&#x27;xxx&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="使用注意点"><a href="#使用注意点" class="headerlink" title="使用注意点"></a>使用注意点</h3><p>使用 vm 表示 vue 实例</p>
<p>Vue 构造函数首字母大写</p>
<p>参数是一个对象</p>
<p>id=’#app’，其他也可以</p>
<p>边界外无法使用 msg</p>
<h3 id="插值表达式"><a href="#插值表达式" class="headerlink" title="插值表达式"></a>插值表达式</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. &#123;&#123;&#125;&#125; : mustache 语法，小胡子语法，插值表达式</span><br><span class="line">2. 作用 : 使用&#96;&#123;&#123;&#125;&#125;&#96; 从&#96;data&#96;中获取数据，并展示在模板中</span><br><span class="line">3. 说明 : &#96;&#123;&#123;&#125;&#125;&#96; 中只能出现 js 表达式</span><br><span class="line">4. &#96;&#123;&#123;&#125;&#125;&#96; 语法不能作用在 HTML 元素的属性上</span><br></pre></td></tr></table></figure>

<p>表达式 (有返回值的)：</p>
<ul>
<li>基本的数据类型 <code>1 &#39;abc&#39; false [] &#123;&#125;</code></li>
<li>数据类型 和 运算符结合在一起<code>1+2 arr.join(&#39;-&#39;) true ? 123 : 321</code></li>
</ul>
<p>语句： <code>if 语句 for 语句</code></p>
<h2 id="双向数据绑定"><a href="#双向数据绑定" class="headerlink" title="双向数据绑定"></a>双向数据绑定</h2><h3 id="input-v-model"><a href="#input-v-model" class="headerlink" title="input + v-model"></a>input + v-model</h3><p>v-model 指令：数据双向绑定的指令</p>
<ul>
<li>作用：把 data 中的 num 值 和 input 上的值绑定到一起，一方的值发生了改变，另 一方也会跟着改变</li>
<li>注意：v-model 只能用在表单控件上（input checkbox 等）</li>
</ul>
<h3 id="Object-defineProperty"><a href="#Object-defineProperty" class="headerlink" title="Object.defineProperty()"></a>Object.defineProperty()</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> temp</span><br><span class="line"><span class="comment">// 参数1：要给哪个对象设置属性</span></span><br><span class="line"><span class="comment">// 参数2：给对象设置什么属性</span></span><br><span class="line"><span class="comment">// 参数3：属性的修饰符</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj, <span class="string">&#x27;name&#x27;</span>, &#123;</span><br><span class="line">  set: <span class="function"><span class="keyword">function</span> (<span class="params">newVal</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;赋值了&#x27;</span>, newVal)</span><br><span class="line">  &#125;,</span><br><span class="line">  get: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;取值了&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> temp</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="数据双向绑定的原理"><a href="#数据双向绑定的原理" class="headerlink" title="数据双向绑定的原理"></a>数据双向绑定的原理</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;input&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> temp</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj, <span class="string">&#x27;name&#x27;</span>, &#123;</span><br><span class="line">  set: <span class="function"><span class="keyword">function</span> (<span class="params">newVal</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 设置属性时会触发该函数</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;设置&#x27;</span>, newVal)</span><br><span class="line">    temp = newVal</span><br><span class="line">    input.value = newVal</span><br><span class="line">  &#125;,</span><br><span class="line">  get: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 获取属性时会触发该函数</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;获取&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> temp</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">input.oninput = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// console.log(this.value)</span></span><br><span class="line">  obj.name = <span class="built_in">this</span>.value</span><br><span class="line">  <span class="built_in">console</span>.log(obj.name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="深入响应式原理"><a href="#深入响应式原理" class="headerlink" title="深入响应式原理"></a>深入响应式原理</h3><p>检测变化注意：受现代 JavaScript 的限制 (而且 <code>Object.observe</code> 也已经被废弃)，Vue <strong>不能检测到对象属性的添加或删除</strong>。由于 Vue 会在初始化实例时对属性执行 <code>getter/setter</code> 转化过程，所以属性必须在 <code>data</code> 对象上存在才能让 Vue 转换它，这样才能让它是响应的</p>
<p><strong>Vue 不允许在已经创建的实例上动态添加新的根级响应式属性</strong>，可以使用 <code>Vue.set(object, key, value)</code> 方法将响应属性添加到嵌套的对象上，或者创建一个包含原对象属性和新属性的对象替换掉原对象</p>
<h3 id="列表渲染数组更新检测"><a href="#列表渲染数组更新检测" class="headerlink" title="列表渲染数组更新检测"></a>列表渲染数组更新检测</h3><p>数组的方法可以触发视图更新：方法如下：</p>
<p><code>push()</code>、<code>pop()</code>、<code>shift()</code>、<code>unshift()</code>、<code>splice()</code>、<code>sort()</code>、<code>reverse()</code></p>
<p>替换数组</p>
<p>用一个含有相同元素的数组去替换原来的数组并不会导致 Vue 丢弃现有 DOM 并重新渲染整个列表</p>
<p>注意：由于 JavaScript 的限制，Vue 不能检测以下变动的数组：</p>
<ol>
<li>当你利用索引直接设置一个项时，例如：<code>vm.items[indexOfItem] = newValue</code></li>
<li>当你修改数组的长度时，例如：<code>vm.items.length = newLength</code></li>
</ol>
<p>解决第一类问题：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Vue.set</span></span><br><span class="line">Vue.set(vm.items, indexOfItem, newValue)</span><br><span class="line"><span class="comment">// Array.prototype.splice</span></span><br><span class="line">vm.items.splice(indexOfItem, <span class="number">1</span>, newValue)</span><br></pre></td></tr></table></figure>

<p>解决第二类问题：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">vm.items.splice(newLength)</span><br></pre></td></tr></table></figure>

<h2 id="指令学习"><a href="#指令学习" class="headerlink" title="指令学习"></a>指令学习</h2><h3 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h3><ul>
<li>指令：就是一个特殊的标记，起一个辅助作用，使 html 具备原来没有的功能</li>
<li>vue 中所有的指令都是以 <code>v-</code> 开头的，比如 : v-model v-bind v-if v-for 等等</li>
</ul>
<h3 id="v-model-常用"><a href="#v-model-常用" class="headerlink" title="v-model (常用)"></a>v-model (常用)</h3><blockquote>
<p>说明：用在<code>表单</code>元素中，用来实现<code>数据双向绑定</code> (input checkbox 等等)<br>作用：将 <code>数据</code> 和 <code>文本框的值</code> 绑定到一起，任何一方发生改变，都会引起对方的改变<br>注意：v-model 在不同类型的表单元素中作用不同<br><code>v-model</code> 会忽略所有表单元素的 <code>value</code>、<code>checked</code>、<code>selected</code> 的初始值而总是将 Vue 实例的数据作为数据来源</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 文本输入框 绑定的是值 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;num&quot;</span> /&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 多选框  绑定的选中状态 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;isChecked&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    num: <span class="number">0</span>,</span><br><span class="line">    isChecked: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="v-text-和-v-html"><a href="#v-text-和-v-html" class="headerlink" title="v-text 和 v-html"></a>v-text 和 v-html</h3><blockquote>
<p>说明 : 设置文本内容</p>
</blockquote>
<p>v-text : 相当于之前的 innerText</p>
<p>v-html : 相当于之前的 innerHTML，会解析 html 标签，（已经废弃三大括号的插值）</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-text</span>=<span class="string">&quot;msg1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-html</span>=<span class="string">&quot;msg2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    msg1: <span class="string">&#x27;&lt;a href=&quot;#&quot;&gt;haha&lt;/a&gt;&#x27;</span>,</span><br><span class="line">    msg2: <span class="string">&#x27;&lt;a href=&quot;#&quot;&gt;haha&lt;/a&gt;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="v-bind-常用"><a href="#v-bind-常用" class="headerlink" title="v-bind (常用)"></a>v-bind (常用)</h3><blockquote>
<p>说明：动态绑定数据 (单向)<br>出现原因：在 HTML 属性中，无法使用插值表达式</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">&quot;href&quot;</span>&gt;</span>hahaha<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- v-bind 可以直接省略 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">:href</span>=<span class="string">&quot;href&quot;</span>&gt;</span>hahaha<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// v-bind：</span></span><br><span class="line"><span class="comment">// 说明：动态数据绑定 (单向)，因为html的`属性`不能使用&#123;&#123;&#125;&#125; 来动态的读取数据, 需要使用 v-bind</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    href: <span class="string">&#x27;https://www.baidu.com&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="v-bind-和-v-model-的区别"><a href="#v-bind-和-v-model-的区别" class="headerlink" title="v-bind 和 v-model 的区别"></a>v-bind 和 v-model 的区别</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- v-model 数据双向绑定 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--场景：表单元素中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;isChecked1&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--  v-bind 数据动态绑定 (单向) --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--场景：主要用在属性中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">:checked</span>=<span class="string">&quot;isChecked2&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="操作样式"><a href="#操作样式" class="headerlink" title="操作样式"></a>操作样式</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 操作样式 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 1. 动态添加类，但不符合 vue 数据是核心的思想 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">:class</span>=<span class="string">&quot;cls&quot;</span>&gt;</span>hahaha<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 2. class 值是一个对象 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 属性名为类名 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 属性值为布尔值 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;red: isRed, fz: isFz&#125;&quot;</span>&gt;</span>hahaha<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 3. style --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;backgroundColor: &#x27;red&#x27;, fontSize: fz + &#x27;px&#x27;&#125;&quot;</span>&gt;</span>hahaha<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// v-bind :</span></span><br><span class="line"><span class="comment">// 说明 : 动态数据绑定 (单向)，因为 html 的`属性`不能使用&#123;&#123;&#125;&#125; 来动态的读取数据 , 需要使用 v-bind</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    href: <span class="string">&#x27;https://www.baidu.com&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>其他操作</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;[&#x27;red&#x27;, &#x27;fz&#x27;]&quot;</span>&gt;</span>heheheh<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ===&gt; &lt;div class=&quot;red fz&quot;&gt;&lt;/div&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 多个样式对象写成数组的形式，如果有相同样式后面会覆盖前面 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;[&#123;red: true&#125;, &#x27;fz&#x27;]&quot;</span>&gt;</span>hehehe<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ===&gt; &lt;div class=&quot;red fz&quot;&gt;&lt;/div&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="v-on"><a href="#v-on" class="headerlink" title="v-on"></a>v-on</h3><blockquote>
<p>注册事件/绑定事件</p>
</blockquote>
<ol>
<li><p>v-on:click 绑定了一个 click 事件</p>
</li>
<li><p>缩写 : @click=’fn’</p>
</li>
<li><p>函数写在 <code>methods</code> 里面</p>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;fn&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 简写 @ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;fn1&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 传参 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;fn2(123)&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// v-on 注册事件</span></span><br><span class="line"><span class="comment">// v-on:click =&gt; 绑定点击事件</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  data: &#123;&#125;,</span><br><span class="line">  <span class="comment">// 事件函数写在 methods 中</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    fn () &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;haha&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    fn1 () &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;haha&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    fn2 (ref) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(ref)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>函数里面的 this 指的就是 vm 实例</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">this</span> === vm <span class="comment">// true</span></span><br><span class="line"><span class="built_in">this</span>.msg <span class="comment">// 获取数据</span></span><br><span class="line"><span class="built_in">this</span>.msg = <span class="string">&#x27;XXX&#x27;</span> <span class="comment">// 修改数据</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>事件对象 $event</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 绑定事件对象的时候, 没有添加小括号，此时，直接在方法中，通过参数 e 就可以获取到事件对象 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;fn&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 如果绑定事件的地方,事件函数有()  @click=&#x27;fn()&#x27; 则需要通过 $event 获取 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;fn1($event, 123)&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  data: &#123;&#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    fn (e) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(e)</span><br><span class="line">    &#125;,</span><br><span class="line">    fn1 (e, ref) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(e)</span><br><span class="line">      <span class="built_in">console</span>.log(ref)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="v-for"><a href="#v-for" class="headerlink" title="v-for"></a>v-for</h3><p>遍历数据，为数据中的每一项生成一个指令所在的标签</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1: 最常用 遍历数组 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in list1&quot;</span>&gt;</span>&#123;&#123; item &#125;&#125; - &#123;&#123; index &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 2: 遍历元素是对象的数组 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in list2&quot;</span>&gt;</span>&#123;&#123; item.name &#125;&#125; - id:&#123;&#123; item.id &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 3: 遍历对象 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- item 是 属性值，key 是属性名 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, key) in obj&quot;</span>&gt;</span>&#123;&#123; item &#125;&#125;-&#123;&#123;key&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 4: 生成10个h1 （item是1-10）--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-for</span>=<span class="string">&quot;item in 10&quot;</span>&gt;</span>我是h1 &#123;&#123; item &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="v-if-和-v-show"><a href="#v-if-和-v-show" class="headerlink" title="v-if 和 v-show"></a>v-if 和 v-show</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-if</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>我是h1 v-if<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>我是h1 v-show<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>v-if 和 v-show 都可以切换元素的显示与隐藏，不同的是 v-if 通过创建删除节点来控制元素的显示与隐藏， v-show 的元素始终会被渲染并保留在 DOM 中，只是简单地切换元素的 CSS 属性 <code>display</code>，<code>v-show</code> 不支持 <code>&lt;template&gt;</code> 元素，也不支持 <code>v-else</code></p>
<p>使用场景 :</p>
<ul>
<li>v-if 因为要不断的创建和删除来切换显示与隐藏，所以性能不高</li>
<li>v-if：切换次数不频繁的时候</li>
<li>v-show：切换次数频繁的时候</li>
</ul>
<h3 id="v-else-if-和-v-else"><a href="#v-else-if-和-v-else" class="headerlink" title="v-else-if 和 v-else"></a>v-else-if 和 v-else</h3><p>v-else：两种情况的</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-if</span>=<span class="string">&quot;num &gt; 40&quot;</span>&gt;</span>第一个<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-else</span>&gt;</span>第三个<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>v-else-if：三种以上情况</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-if</span>=<span class="string">&quot;num &gt;= 40&quot;</span>&gt;</span>第一个<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-else-if</span>=<span class="string">&quot;num &gt;= 30 &amp;&amp; num &lt; 40&quot;</span>&gt;</span>第二个<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-else</span>&gt;</span>第三个<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="v-once"><a href="#v-once" class="headerlink" title="v-once"></a>v-once</h3><p>作用：告诉 vue 这个标签中的内容只需要解析一次，即便是数据再发送改变，这个标签中的内容也不会被更新</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; num &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-once</span>&gt;</span>带 onece 的 &#123;&#123; num &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="v-pre"><a href="#v-pre" class="headerlink" title="v-pre"></a>v-pre</h3><p>作用：告诉 vue 这段节点中没有指令或表达式，不需要解析，从而，提升性能</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; num &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-pre</span>&gt;</span>带 v-pre &#123;&#123; num &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="v-cloak"><a href="#v-cloak" class="headerlink" title="v-cloak"></a>v-cloak</h3><p>使用遮盖</p>
<ul>
<li>给要遮盖的元素添加一个 v-cloak 指令：</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-cloak</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>使用属性选择器，添加样式：<code>[v-cloak] &#123; display: none &#125;</code></p>
</li>
<li><p>vue 会在解析模板后将 v-cloak 指令从页面中移除，移除指令的时候，差值表达式已经变为对应的数据</p>
</li>
</ul>
<h2 id="按键修饰符"><a href="#按键修饰符" class="headerlink" title="按键修饰符"></a>按键修饰符</h2><p>在监听键盘事件时，我们经常需要检查常见的键值。Vue 允许为 <code>v-on</code> 在监听键盘事件时添加按键修饰符</p>
<p>Vue 为最常用的按键提供了别名：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 只有在 `keyCode` 是 13 时调用 `vm.submit()` --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-on:keyup.13</span>=<span class="string">&quot;submit&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 同上 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-on:keyup.enter</span>=<span class="string">&quot;submit&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 缩写语法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;submit&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>全部的按键别名：</p>
<ul>
<li><code>.enter</code></li>
<li><code>.tab</code></li>
<li><code>.delete</code> (捕获“删除”和“退格”键)</li>
<li><code>.esc</code></li>
<li><code>.space</code></li>
<li><code>.up</code></li>
<li><code>.down</code></li>
<li><code>.left</code></li>
<li><code>.right</code></li>
</ul>
<h2 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a>事件修饰符</h2><p>在事件处理程序中调用 <code>event.preventDefault()</code> 或 <code>event.stopPropagation()</code> 是非常常见的需求。尽管我们可以在方法中轻松实现这点，但更好的方式是：方法只有纯粹的数据逻辑，而不是去处理 DOM 事件细节。</p>
<p>为了解决这个问题，Vue.js 为 <code>v-on</code> 提供了<strong>事件修饰符</strong>。之前提过，修饰符是由点开头的指令后缀来表示的。</p>
<ul>
<li><code>.stop</code></li>
<li><code>.prevent</code></li>
<li><code>.capture</code></li>
<li><code>.self</code></li>
<li><code>.once</code></li>
<li><code>.passive</code></li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 阻止单击事件继续传播 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click.stop</span>=<span class="string">&quot;doThis&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 提交事件不再重载页面 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">v-on:submit.prevent</span>=<span class="string">&quot;onSubmit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 修饰符可以串联 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click.stop.prevent</span>=<span class="string">&quot;doThat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 只有修饰符 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">v-on:submit.prevent</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 添加事件监听器时使用事件捕获模式 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 即元素自身触发的事件先在此处理，然后才交由内部元素进行处理 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-on:click.capture</span>=<span class="string">&quot;doThis&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 只当在 event.target 是当前元素自身时触发处理函数 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 即事件不是从内部元素触发的 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-on:click.self</span>=<span class="string">&quot;doThat&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 点击事件将只会触发一次 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click.once</span>=<span class="string">&quot;doThis&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用修饰符时，顺序很重要；相应的代码会以同样的顺序产生。因此，用 <code>v-on:click.prevent.self</code> 会阻止<strong>所有的点击</strong>，而 <code>v-on:click.self.prevent</code> 只会阻止对元素自身的点击。</p>
<h2 id="系统修饰键"><a href="#系统修饰键" class="headerlink" title="系统修饰键"></a>系统修饰键</h2><p>可以用如下修饰符来实现仅在按下相应按键时才触发鼠标或键盘事件的监听器</p>
<ul>
<li><code>.ctrl</code></li>
<li><code>.alt</code></li>
<li><code>.shift</code></li>
<li><code>.meta</code></li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Alt + C --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> @<span class="attr">keyup.alt.67</span>=<span class="string">&quot;clear&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Ctrl + Click --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">click.ctrl</span>=<span class="string">&quot;doSomething&quot;</span>&gt;</span>Do something<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="鼠标按钮修饰符"><a href="#鼠标按钮修饰符" class="headerlink" title="鼠标按钮修饰符"></a>鼠标按钮修饰符</h3><ul>
<li><code>.left</code></li>
<li><code>.right</code></li>
<li><code>.middle</code></li>
</ul>
<p>这些修饰符会限制处理函数仅响应特定的鼠标按钮</p>
<h2 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  message () &#123;&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>特点：<strong>计算属性是基于它们的响应式依赖进行缓存的</strong>，只有跟计算属性相关的数据发生了改变，计算属性才会重新计算</p>
<p>注意点:</p>
<p>计算属性必须返回一个值</p>
<p>计算属性只能当属性用，不能当方法用</p>
<p>不能和 data 中的属性名重名</p>
<h2 id="key"><a href="#key" class="headerlink" title="key"></a>key</h2><p>当 Vue.js 用 <code>v-for</code> 正在更新已渲染过的元素列表时，它默认用“就地复用”策略。如果数据项的顺序被改变，Vue 将不会移动 DOM 元素来匹配数据项的顺序， 而是简单复用此处每个元素，并且确保它在特定索引下显示已被渲染过的每个元素。</p>
<p>为了给 Vue 一个提示，以便它能跟踪每个节点的身份，从而重用和重新排序现有元素，你需要为每项提供一个唯一 <code>key</code> 属性。它的工作方式类似于一个属性，所以你需要用 <code>v-bind</code> 来绑定动态值</p>
<p>建议尽可能在使用 <code>v-for</code> 时提供 <code>key</code>，除非遍历输出的 DOM 内容非常简单，或者是刻意依赖默认行为以获取性能上的提升</p>
<ul>
<li><code>就地复用</code></li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 显示组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123; item.name &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 数据 --&gt;</span></span><br><span class="line">data: &#123;list: [&#123;id: 1, name: &#x27;zs&#x27;&#125;, &#123;id: 2, name: &#x27;ls&#x27;&#125;, &#123;id: 3, name: &#x27;ww&#x27;&#125;]</span><br><span class="line"><span class="comment">&lt;!-- 演示  --&gt;</span></span><br><span class="line">vm.list.unshift(&#123;id:4, name:&#x27;zl&#x27;&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>使用 key<ul>
<li>如果数组的元素是一个对象，使用对象里固定属性，一般情况下，对象里都有 id</li>
<li>如果数组的元素是一个简单类型，不是一个对象，就可以取索引作为 key</li>
</ul>
</li>
</ul>
<h2 id="异步-DOM-更新"><a href="#异步-DOM-更新" class="headerlink" title="异步 DOM 更新"></a>异步 DOM 更新</h2><ol>
<li>Vue 中采用了 <code>异步DOM更新</code> 的机制</li>
<li>数据发生改变后，vue 没有立即将数据的改变更新到视图中，而是等到数据不再变化的时候 一次性的将数据的改变更新到视图中</li>
</ol>
<p>为什么是异步 DOM 更新?</p>
<ul>
<li>性能的考虑</li>
<li>因为对于前端来说，修改数据进行 DOM 操作是常有的事情，如果频繁操作 DOM，会严重影响页面的加载性能</li>
<li>DOM 操作这是前端的性能的瓶颈</li>
<li>比如 : for (let i = 1; i &lt; 10000; i++&gt;) 如果同步 就要重新渲染 1000 次</li>
</ul>
<p>验证异步 DOM 更新：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过dom来获取count的值</span></span><br><span class="line"><span class="comment">// this.$el ==&gt; vue 边界元素</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.$el.children[<span class="number">0</span>].innerText) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">this</span>.count = <span class="number">100</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.$el.children[<span class="number">0</span>].innerText) <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>

<p>需求：在数据更新后，立即获取到更新后的内容</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// DOM 更新后，会执行 this.$nextTick() 的回调函数，所以能拿到值</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.$el.children[<span class="number">0</span>].innerText) <span class="comment">// 100</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="监听-watch"><a href="#监听-watch" class="headerlink" title="监听 watch"></a>监听 watch</h2><p>vue 中可以通过 watch 配置项来监听 vue 实例中数据的变化</p>
<p>基本使用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">data: &#123;</span><br><span class="line">  num: <span class="number">0</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//  监听</span></span><br><span class="line">watch: &#123;</span><br><span class="line">  <span class="comment">// 监听 num 属性的数据变化</span></span><br><span class="line">  <span class="comment">// 作用: 只要 num 的值发生变化，这个方法就会被调用</span></span><br><span class="line">  <span class="comment">// 第一个参数: 新值</span></span><br><span class="line">  <span class="comment">// 第二个参数: 旧值</span></span><br><span class="line">  num (newVal, oldVal) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;新:&#x27;</span>, newVal)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;旧:&#x27;</span>, oldVal)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>监听对象</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">data: &#123;</span><br><span class="line">  msg: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  obj: &#123;</span><br><span class="line">    age: <span class="number">18</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">watch: &#123;</span><br><span class="line">  <span class="comment">// 监听对象</span></span><br><span class="line">  obj (newVal) &#123;</span><br><span class="line">    <span class="comment">// 虽然 obj 中的属性值发生改变了，但 obj 引用的地址没有发生改变，所以不会触发事件</span></span><br><span class="line">    <span class="built_in">console</span>.log(newVal)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 监听对象的属性</span></span><br><span class="line">  <span class="comment">// 从对象的角度来监听的</span></span><br><span class="line">  obj: &#123;</span><br><span class="line">    <span class="comment">// 深度监听 监听对象里面的属性</span></span><br><span class="line">    deep: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 页面刚进入立即触发监听，以表达式的当前值触发回调</span></span><br><span class="line">    immediate: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 对象里的属性值发生变化，调用 handler 方法</span></span><br><span class="line">    handler (newVal) &#123;</span><br><span class="line">      <span class="built_in">this</span>.msg = <span class="string">`obj.age 值变化了，新值：<span class="subst">$&#123;newVal.age&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 从属性的角度来监听</span></span><br><span class="line">  <span class="string">&#x27;obj.age&#x27;</span> (newVal) &#123;</span><br><span class="line">    <span class="built_in">this</span>.msg = <span class="string">`obj.age 值变化了，新值：<span class="subst">$&#123;newVal&#125;</span>`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用案例：需求 : 监听文本框字符个数，并显示格式验证码</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;val&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">v-show</span>=<span class="string">&quot;isTrue&quot;</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">data: &#123;</span><br><span class="line">  val: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  msg: <span class="string">&#x27;请输入 6-12 位&#x27;</span>,</span><br><span class="line">  isTrue: <span class="literal">false</span></span><br><span class="line">&#125;,</span><br><span class="line">watch: &#123;</span><br><span class="line">  val (newVal) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="regexp">/^[0-9a-zA-z]&#123;6,12&#125;$/</span>.test(newVal)) &#123;</span><br><span class="line">      <span class="built_in">this</span>.isTrue = <span class="literal">false</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.isTrue = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="生命周期函数"><a href="#生命周期函数" class="headerlink" title="生命周期函数"></a>生命周期函数</h2><ul>
<li>所有的 vue 组件，都是 vue 实例，一个组件对应一个实例，并且接收相同的选项对象（一些根实例特有的选项除外）</li>
<li>实例生命周期也叫做：组件生命周期</li>
<li>声明周期图：<a href="/zh-cn/_vue/Vue%E5%AE%9E%E4%BE%8B%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%BE">01</a></li>
</ul>
<h3 id="生命周期介绍"><a href="#生命周期介绍" class="headerlink" title="生命周期介绍"></a>生命周期介绍</h3><p><a href="https://cn.vuejs.org/v2/api/#%E9%80%89%E9%A1%B9-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90">vue 生命周期钩子函数</a></p>
<ul>
<li>简单说：一个组件（实例）从开始到最后消化所经历的各种状态，就是一个组件的生命周期</li>
<li>生命周期钩子函数的定义：从组件被创建，到组件挂在到页面上运行，再到页面关闭组件被销毁，这三个阶段总是伴随着组件的各种事件，这些事件，统称为组件的生命周期函数（简称 : 钩子函数）</li>
<li>开发人员可以通过 vue 提供的钩子函数，让我们写的代码参与到 vue 的生命周期里面来，让我们的代码在合适的阶段起到相应的作用</li>
</ul>
<p>注意：</p>
<ul>
<li>vue 在执行过程中会 <strong>自动调用</strong> <code>生命周期钩子函数</code>，我们只需要提供这些钩子函数即可</li>
<li>钩子函数的名称都是 vue 中规定好的</li>
</ul>
<p><a href="https://segmentfault.com/a/1190000008879966">vue 实例生命周期 参考 1</a></p>
<p><a href="https://segmentfault.com/a/1190000008010666">vue 实例生命周期 参考 2</a></p>
<h3 id="钩子函数-beforeCreate"><a href="#钩子函数-beforeCreate" class="headerlink" title="钩子函数 - beforeCreate"></a>钩子函数 - beforeCreate</h3><ul>
<li>在实例初始化之后，数据观测 (data observer) 和 event/watcher 事件配置之前被调用</li>
<li>此时组件的选项还未挂载，因此无法访问 methods，data，computed 上的方法或数据</li>
<li>使用场景 : 几乎不用</li>
</ul>
<h3 id="钩子函数-created-掌握"><a href="#钩子函数-created-掌握" class="headerlink" title="钩子函数 - created (掌握)"></a>钩子函数 - created (掌握)</h3><ul>
<li>在实例创建完成后被立即调用。在这一步，实例已完成以下的配置：数据观测 (data observer)，属性和方法的运算，watch/event 事件回调。然而，挂载阶段还没开始，<code>$el</code> 属性目前不可见</li>
<li>可以调用 methods 中的方法、改变 data 中的数据，并且修改可以通过 vue 的响应式绑定体现在页面上、获取 computed 中的计算属性等</li>
<li>使用场景：发送 ajax、本地存储获取数据</li>
</ul>
<h3 id="钩子函数-beforeMounted"><a href="#钩子函数-beforeMounted" class="headerlink" title="钩子函数 - beforeMounted()"></a>钩子函数 - beforeMounted()</h3><ul>
<li>在挂载开始之前被调用（挂载：DOM 渲染）</li>
</ul>
<h3 id="钩子函数-mounted-掌握"><a href="#钩子函数-mounted-掌握" class="headerlink" title="钩子函数 - mounted() (掌握)"></a>钩子函数 - mounted() (掌握)</h3><ul>
<li><code>el</code> 被新创建的 <code>vm.$el</code> 替换，并挂载到实例上去之后调用该钩子。如果 root 实例挂载了一个文档内元素，当 <code>mounted</code> 被调用时 <code>vm.$el</code> 也在文档内。</li>
<li>这个周期可以获取 DOM</li>
<li>指令的生效在 mounted 周期之前</li>
<li>在这个周期内，对 data 的改变可以生效。但是要进下一轮的 DOM 更新，DOM 上的数据才会更新</li>
<li>使用场景：发送 ajax、操作 DOM</li>
</ul>
<h3 id="钩子函数-beforeUpdate"><a href="#钩子函数-beforeUpdate" class="headerlink" title="钩子函数 - beforeUpdate()"></a>钩子函数 - beforeUpdate()</h3><ul>
<li><p>数据更新时调用，发生在虚拟 DOM 重新渲染和打补丁之前。你可以在这个钩子中进一步地更改状态，这不会触发附加的重渲染过程</p>
</li>
<li><p>此处获取的数据是更新后的数据，但是获取页面中的 DOM 元素是更新之前的</p>
<blockquote>
<p>小提示 : 打印 this.$el ，打开小三角是之后的，是因为打印是有监听的功能，展示的是后面更改之后的</p>
</blockquote>
</li>
</ul>
<h3 id="钩子函数-updated"><a href="#钩子函数-updated" class="headerlink" title="钩子函数 - updated()"></a>钩子函数 - updated()</h3><ul>
<li>由于数据更改导致的虚拟 DOM 重新渲染和打补丁，在这之后会调用该钩子</li>
<li>组件 DOM 已经更新，所以你现在可以执行依赖于 DOM 的操作</li>
<li>应该避免在此期间更改状态。如果要相应状态改变，通常最好使用 <strong>计算属性</strong> 或 <strong>watcher</strong> 取而代之</li>
</ul>
<h3 id="钩子函数-beforeDestroy"><a href="#钩子函数-beforeDestroy" class="headerlink" title="钩子函数 - beforeDestroy()"></a>钩子函数 - beforeDestroy()</h3><ul>
<li>实例销毁之前调用。在这一步，实例仍然完全可用。</li>
<li>使用场景：实例销毁之前，执行清理任务，比如：清除定时器等</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">created () &#123;</span><br><span class="line">  <span class="built_in">this</span>.timerId = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1111</span>)</span><br><span class="line">  &#125;, <span class="number">500</span>)</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"> <span class="comment">// 如果当组件销毁了,还不清除定时器会出现性能问题</span></span><br><span class="line"> <span class="comment">// 在浏览器中可以尝试销毁 vm.$destroy()</span></span><br><span class="line"> <span class="comment">// 最后销毁</span></span><br><span class="line">beforeDestroy () &#123;</span><br><span class="line">  <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timerId)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="钩子函数-destroyed"><a href="#钩子函数-destroyed" class="headerlink" title="钩子函数 - destroyed()"></a>钩子函数 - destroyed()</h3><ul>
<li>Vue 实例销毁后调用。调用后，Vue 实例指示的所有东西都会解绑定，所有的事件监听器会被移除，所有的子实例也会被销毁。</li>
</ul>
<h2 id="使用接口的形式发送数据"><a href="#使用接口的形式发送数据" class="headerlink" title="使用接口的形式发送数据"></a>使用接口的形式发送数据</h2><h3 id="json-server-提供假数据接口"><a href="#json-server-提供假数据接口" class="headerlink" title="json-server 提供假数据接口"></a>json-server 提供假数据接口</h3><ul>
<li>作用：根据指定的 JSON 文件，提供假数据接口</li>
<li>地址：<a href="https://github.com/typicode/json-server">json-server</a></li>
<li>使用步骤</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> 全局安装 json-server: <span class="string">`npm i -g json-server`</span></span><br><span class="line"><span class="number">2.</span> 准备一个json数据</span><br><span class="line"><span class="number">3.</span> 执行：<span class="string">`json-server data.json`</span></span><br><span class="line"></span><br><span class="line">data.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;todos&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">      <span class="string">&quot;age&quot;</span>: <span class="number">20</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>REST API 格式</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> 查询：GET</span><br><span class="line"><span class="number">2.</span> 添加：POST</span><br><span class="line"><span class="number">3.</span> 删除：DELETE</span><br><span class="line"><span class="number">4.</span> 更新：</span><br><span class="line">	PUT：需要将对象里的所有属性提交</span><br><span class="line">  PATCH(打补丁)：只需要提交需要修改的属性</span><br></pre></td></tr></table></figure>

<ul>
<li>具体接口<ul>
<li>查询全部数据 <a href="http://localhost:3000/todos">http://localhost:3000/todos</a><br>查询指定数据 <a href="http://localhost:3000/todos/2">http://localhost:3000/todos/2</a></li>
<li>添加一个对象 <a href="http://localhost:3000/todos">http://localhost:3000/todos</a><br>POST<br>id 会自动帮我们添加</li>
<li>更新数据 <a href="http://localhost:3000/todos/3">http://localhost:3000/todos/3</a><br>PUT 或者 PATCH<br>PUT 需要提供该对象的所有数据<br>PATCH 只需要提供要修改的数据即可</li>
<li>删除数据<a href="http://localhost:3000/todos/3">http://localhost:3000/todos/3</a><br>DELETE</li>
</ul>
</li>
<li>可以借助 <code>postman</code> 测试接口</li>
</ul>
<h3 id="axios-发送请求"><a href="#axios-发送请求" class="headerlink" title="axios 发送请求"></a>axios 发送请求</h3><ul>
<li><strong>作用</strong> : 一个专门用来发送 ajax 请求的库, 可以在浏览器或者 node.js 中使用</li>
<li><strong>使用步骤</strong><ul>
<li>本地安装 axios : <code>npm i -g axios</code></li>
<li>导入 axios</li>
</ul>
</li>
<li><a href="https://github.com/axios/axios">axios 使用说明</a></li>
<li><strong>GTE 方式发送请求</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 方式1</span></span><br><span class="line">axios.get(<span class="string">&#x27;http://localhost:3000/todoList/1&#x27;</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;获取到数据了：&#x27;</span>, res.data)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 方式2</span></span><br><span class="line">axios</span><br><span class="line">  .get(<span class="string">&#x27;http://localhost:3000/todoList&#x27;</span>, &#123;</span><br><span class="line">    params: &#123;</span><br><span class="line">      id: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;获取到数据了：&#x27;</span>, res.data)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>POST 方式发送请求</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// post 请求</span></span><br><span class="line">axios</span><br><span class="line">  <span class="comment">// 第一个参数：表示接口地址</span></span><br><span class="line">  <span class="comment">// 第二个参数：表示接口需要的参数</span></span><br><span class="line">  .post(<span class="string">&#x27;http://localhost:3000/todoList&#x27;</span>, &#123;</span><br><span class="line">    name: <span class="string">&#x27;haha&#x27;</span>,</span><br><span class="line">    done: <span class="literal">true</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h2><p><strong>概念 :</strong></p>
<ul>
<li>vue 中的过滤器(filter)：<strong>数据格式化</strong>，让数据按照我们规定的格式输出</li>
<li>比如 : 对于日期来说，将日期格式化转化为 <code>年-月-日 小时:分:秒</code></li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 直接显示 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; date &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">显示：2019-01-11T10:11:19.566Z 不是我们想要的 我们想要的：2019-01-11 18-11-53</span><br></pre></td></tr></table></figure>

<p><strong>全局过滤器 和 局部过滤器</strong></p>
<ul>
<li>全局方式创建的过滤器，在任何一个 Vue 实例中都可以使用 (一般情况下，为了项目方便管理，都是一个 vue 实例)</li>
<li>局部创建的过滤器只能在当前 vue 实例中使用</li>
<li>全局过滤器应在 Vue 实例创建之前创建</li>
</ul>
<p><strong>注册全局过滤器</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 第一个参数：过滤器的名字</span></span><br><span class="line"><span class="comment">// 第二个参数：是一个回调函数，只要使用过滤器的时候，这个回调函数就会执行，res =&gt; 原始数据</span></span><br><span class="line"><span class="comment">// 必须要有返回值：通过回调函数的返回值得到格式化后的数据</span></span><br><span class="line">Vue.filter(<span class="string">&#x27;date&#x27;</span>, <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>注册局部过滤器</strong></p>
<p>在 vm 的配置项里写一个 <code>filters</code>，对应的是一个对象</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">filters: &#123;</span><br><span class="line">  date (res) &#123;</span><br><span class="line">		<span class="keyword">return</span> res</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>moment 插件</strong></p>
<ul>
<li><p><a href="http://momentjs.cn/">moment</a></p>
</li>
<li><p>使用：<code>npm i moment</code></p>
</li>
<li><p>日期 =&gt; 指定格式<code>moment(res).format(&#39;YYYY-MM-DD HH-mm-ss&#39;)</code></p>
</li>
<li><p>时间戳 =&gt; 指定格式<code>moment(res).format(&#39;YYYY-MM-DD HH-mm-ss&#39;)</code></p>
</li>
<li><pre><code class="js">Vue.filter(&#39;dataFilter&#39;, res =&gt; &#123;
  return moment(res).format(&#39;YYYY-MM-DD HH-mm-ss&#39;)
&#125;)
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">**使用过滤器**</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;html</span><br><span class="line">&lt;!-- data: 原始数据  dataFilter: 过滤器名称  |：管道--&gt;</span><br><span class="line">&lt;h1&gt;&#123;&#123; date | dataFilter &#125;&#125;&lt;&#x2F;h1&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 全局</span></span><br><span class="line">Vue.filter(<span class="string">&#x27;dataFilter&#x27;</span>, <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> moment(res).format(<span class="string">&#x27;YYYY-MM-DD HH-mm-ss&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 局部</span></span><br><span class="line">filters: &#123;</span><br><span class="line">  date (res, format = <span class="string">&#x27;YYYY-MM-DD&#x27;</span>, arg) &#123;</span><br><span class="line">    <span class="keyword">return</span> moment(res).format(format)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>参数问题</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; date | dateFilter(&#x27;YYYY-MM-DD HH-mm-ss&#x27;, 888) &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.filter(<span class="string">&#x27;dateFilter&#x27;</span>, <span class="function">(<span class="params">res, format = <span class="string">&#x27;YYYY-MM-DD&#x27;</span>, arg</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// res: 原始数据</span></span><br><span class="line">  <span class="comment">// format：dateFilter 中的第一个参数，等号后面为默认值</span></span><br><span class="line">  <span class="comment">// arg: dateFilter 中的第二个参数</span></span><br><span class="line">  <span class="built_in">console</span>.log(arg) <span class="comment">// 888</span></span><br><span class="line">  <span class="keyword">return</span> moment(res).format(format)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><blockquote>
<p>组件系统是 Vue 的另一个重要概念，因为它是一种抽象，允许我们使用小型、独立和通常 <strong>可复用</strong> 的组件构建大型应用。仔细想想，几乎任意类型的应用界面都可以抽象为一个组件树</p>
</blockquote>
<p><img data-src="vue/components.png" alt="组件化图释"></p>
<ul>
<li>注册组件的两种方式：全局组件、局部组件</li>
<li>Vue 实例中的配置项（如：methods、filters、watch、computed、directives、生命周期钩子函数）都可以在组件中使用</li>
</ul>
<h3 id="全局组件"><a href="#全局组件" class="headerlink" title="全局组件"></a>全局组件</h3><ul>
<li>说明：全局组件在所有的 vue 实例中都可以使用</li>
<li>注意：<ul>
<li>注册全局组件应放在 vm 实例之前</li>
<li>模板只允许有一个根节点</li>
<li>组件中的 <code>data</code> 必须是函数，并且要返回一个对象</li>
<li>组件复用时如果 data 为对象，所有复用的组件的 data 指向同一片内存空间，一个组件被修改了会影响其他组件，这不是我们想要的</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 注册全局组件</span></span><br><span class="line">Vue.component(<span class="string">&#x27;hello&#x27;</span>, &#123;</span><br><span class="line">  template: <span class="string">&#x27;&lt;p&gt;A custom component!&lt;/p&gt;&#x27;</span>,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">&#x27;注意：组件的data必须是一个函数！！！&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 给组件指定返回值</span></span><br><span class="line"><span class="comment">// 组件名称为 One</span></span><br><span class="line"><span class="keyword">const</span> One = Vue.component(<span class="string">&#x27;hello&#x27;</span>, &#123;</span><br><span class="line">  template: <span class="string">&#x27;&lt;p&gt;A custom component!&lt;/p&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 可以简写为 ==&gt;</span></span><br><span class="line"><span class="keyword">const</span> One = &#123;</span><br><span class="line">  template: <span class="string">&#x27;&lt;p&gt;A custom component!&lt;/p&gt;&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用：以自定义元素的方式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;example&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hello</span>&gt;</span><span class="tag">&lt;/<span class="name">hello</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 渲染结果 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;example&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>A custom component!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="局部组件"><a href="#局部组件" class="headerlink" title="局部组件"></a>局部组件</h3><ul>
<li>局部组件是在某一个具体的 vue 实例（组件）中定义的，只能在当前 vue 实例（组件）中使用</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 局部组件</span></span><br><span class="line">  components: &#123;</span><br><span class="line">    <span class="comment">// 子组件 com-a</span></span><br><span class="line">    <span class="string">&#x27;com-a&#x27;</span>: &#123;</span><br><span class="line">      template: <span class="string">`&lt;h1&gt;局部组件：&#123;&#123; num &#125;&#125;&lt;/h1&gt;`</span>,</span><br><span class="line">      data () &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          num: <span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="组件通讯"><a href="#组件通讯" class="headerlink" title="组件通讯"></a>组件通讯</h3><ul>
<li>组件是一个独立、封闭的个体</li>
<li>也就是说：组件中的数据默认情况下，只能在组件内部使用，无法直接在组件外部使用</li>
<li>可以将 vue 实例看做一个组件</li>
<li>对于组件之间需要相互使用彼此的情况，应该使用 <strong>组件通讯机制</strong> 来解决</li>
<li>组件通讯的三种情况 :<ul>
<li>父组件将数据传递给子组件(父 -&gt; 子)</li>
<li>子组件将数据传递给父组件 (子 =&gt; 父)</li>
<li>非父子组件(兄弟组件)</li>
</ul>
</li>
</ul>
<h4 id="父组件到子组件"><a href="#父组件到子组件" class="headerlink" title="父组件到子组件"></a>父组件到子组件</h4><ul>
<li>将要传递的数据，通过属性传递给子组件</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">child</span> <span class="attr">:msg</span>=<span class="string">&quot;pmsg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>子组件通过 <code>props</code> 配置项来指定要接收的数据，props 是一个数组<ul>
<li>在使用 DOM 中的模板时，camelCase (驼峰命名法) 的 prop 名需要使用其等价的 kebab-case (短横线分隔命名) 命名代替</li>
<li>如果使用字符串模板，那么这个限制就不存在了</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">props: [<span class="string">&#x27;msg&#x27;</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>传递过来的 <code>props</code> 属性的用法与 <code>data</code> 属性的用法相同</li>
<li>子组件不能直接修改父组件传过来的数据，可以将父组件传过来的值保存在一个临时变量中</li>
<li>如果 props 传过来的数据为引用类型，只要不是重新赋值，修改数据不会报错，但不推荐这样做</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 第一步：将你要传递的数据,作为属性传递给子组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hello</span> <span class="attr">:num</span>=<span class="string">&quot;pnum&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">hello</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.component(<span class="string">&#x27;hello&#x27;</span>, &#123;</span><br><span class="line">  template: <span class="string">`&lt;div&gt;&#123;&#123; num &#125;&#125;&lt;/div&gt;`</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 第二部：子组件通过 props 配置项来指定要接收的数据</span></span><br><span class="line">  props: [<span class="string">&#x27;num&#x27;</span>]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="子组件到父组件"><a href="#子组件到父组件" class="headerlink" title="子组件到父组件"></a>子组件到父组件</h4><ul>
<li>方式：父组件给子组件传递一个函数，由子组件调用这个函数</li>
<li>说明：借助 vue 中的自定义事件(v-on:cunstomFn=”fn”)</li>
<li><code>$emit()</code>：触发事件</li>
<li>第一步：父组件了里准备一个方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    pnum: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    pfn (num) &#123;</span><br><span class="line">      <span class="built_in">this</span>.pnum += num</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>第二步：把这个方法作为事件传递给子组件</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">hello</span> @<span class="attr">fn</span>=<span class="string">&quot;pfn&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">hello</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 或</span></span><br><span class="line"><span class="comment">&lt;hello @fn=&quot;num += $event&quot;&gt;&lt;/hello&gt;</span></span><br><span class="line"><span class="comment">$event 为传过来的参数</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>第三步：子组件调用父组件传过来的方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.component(<span class="string">&#x27;hello&#x27;</span>, &#123;</span><br><span class="line">  template: <span class="string">`&lt;button @click=&#x27;click&#x27;&gt;按钮&lt;/button&gt;`</span>,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">num</span>: <span class="number">5</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    click () &#123;</span><br><span class="line">      <span class="comment">// 第一个参数：表示要触发的自定义事件名称，也就是 @fn</span></span><br><span class="line">      <span class="comment">// 第二个参数：表示要传递给父组件的数据</span></span><br><span class="line">      <span class="built_in">this</span>.$emit(<span class="string">&#x27;fn&#x27;</span>, <span class="built_in">this</span>.num)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="非父子组件通讯"><a href="#非父子组件通讯" class="headerlink" title="非父子组件通讯"></a>非父子组件通讯</h4><ul>
<li><p>是通过 <code>事件总线 (event bus 公交车) 机制</code> 来实现的</p>
</li>
<li><p>事件总线：实际上就是一个 <code>空 Vue 实例</code></p>
</li>
<li><p>可以实现任意两个组件之间的通讯而不管两个组件到底有什么样的层级关系</p>
</li>
<li><p><code>$emit()</code>：发送数据</p>
</li>
<li><p><code>$on()</code>：接收数据</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 第一步：实例化事件总线 bus</span></span><br><span class="line"><span class="keyword">const</span> bus = <span class="keyword">new</span> Vue()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 触发组件 A 中的事件</span></span><br><span class="line">bus.$emit(<span class="string">&#x27;id&#x27;</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在组件 B 创建的钩子中监听事件</span></span><br><span class="line">bus.$on(<span class="string">&#x27;id&#x27;</span>, <span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>示例：组件 A —&gt; 组件 B</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">com-a</span>&gt;</span><span class="tag">&lt;/<span class="name">com-a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">com-b</span>&gt;</span><span class="tag">&lt;/<span class="name">com-b</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 第一步：实例化事件总线 bus</span></span><br><span class="line"><span class="keyword">const</span> bus = <span class="keyword">new</span> Vue()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 组件 A</span></span><br><span class="line">Vue.component(<span class="string">&#x27;com-a&#x27;</span>, &#123;</span><br><span class="line">  template: <span class="string">`&lt;h1 @click=&quot;click&quot;&gt;组件A&lt;/h1&gt;`</span>,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    click () &#123;</span><br><span class="line">      <span class="comment">// 第二部：发送数据</span></span><br><span class="line">      bus.$emit(<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;你好&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 组件 B</span></span><br><span class="line">Vue.component(<span class="string">&#x27;com-b&#x27;</span>, &#123;</span><br><span class="line">  template: <span class="string">`&lt;h1&gt;组件B&lt;/h1&gt;`</span>,</span><br><span class="line">  created () &#123;</span><br><span class="line">    <span class="comment">// 第三步：接收数据</span></span><br><span class="line">    bus.$on(<span class="string">&#x27;hello&#x27;</span>, <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;接收到数据&#x27;</span>, res)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  data: &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>[开关灯案例]</p>
<h3 id="单向数据流-组件与组件之间"><a href="#单向数据流-组件与组件之间" class="headerlink" title="单向数据流(组件与组件之间)"></a>单向数据流(组件与组件之间)</h3><p>所有的 prop 都使得其父子 prop 之间形成了一个<code>单向下行绑定</code>：父级 prop 的更新会向下流动到子组件中，但是反过来则不行。这样会防止从子组件意外改变父级组件的状态，从而导致你的应用的数据流向难以理解。</p>
<p>当 todo-head 中的 todoName 设置数据后回车添加到 todoList，todoList 的长度就会发生变化，然后就会根据(组件与组件之间的)单向数据流，把数据单向下流到子组件中<br>而且必须是通过 props 往下传递的才可以</p>
<h2 id="refs"><a href="#refs" class="headerlink" title="refs"></a>refs</h2><p><code>vm.$refs</code> 一个对象，持有已注册过 ref 的所有子组件 ( HTML 元素)</p>
<ul>
<li>使用 :</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 在 HTML元素 中，添加ref属性 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&quot;div&quot;</span>&gt;</span>哈哈<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">child</span> <span class="attr">ref</span>=<span class="string">&quot;child&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在JS中通过 $refs.属性 来获取</span></span><br><span class="line"><span class="comment">// 在 mounted 函数中使用</span></span><br><span class="line">Vue.component(<span class="string">&#x27;child&#x27;</span>, &#123;</span><br><span class="line">  template: <span class="string">`&lt;h1&gt;组件A&lt;/h1&gt;`</span>,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">num</span>: <span class="number">100</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    fn () &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  data: &#123;&#125;,</span><br><span class="line">  mounted () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$refs)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$refs.div) <span class="comment">// div 标签</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$refs.child) <span class="comment">// child 组件</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>如果获取的是一个子组件，那么通过 ref 就能获取到子组件中的 <code>data</code> 和 <code>methods</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.$refs.child.num) <span class="comment">// 100</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.$refs.child.fn) <span class="comment">// fn</span></span><br></pre></td></tr></table></figure>

<ul>
<li>一般在第三方的组件中， 可能会用到这个功能</li>
</ul>
<h2 id="单页面应用程序"><a href="#单页面应用程序" class="headerlink" title="单页面应用程序"></a>单页面应用程序</h2><p>SPA : <strong>Single Page Application</strong> 单页面应用程序</p>
<p>MPA : <strong>Multiple Page Application</strong> 多页面应用程序</p>
<ul>
<li>单页 web 应用，就是只有一个 web 页面的应用，是加载单个 HTML 页面，并在用户与应用程序交互时动态更新该页面的 web 应用程序</li>
</ul>
<ul>
<li>区别<ul>
<li>对于传统的多页面应用程序来说，每次请求服务器返回的都是一个完整的页面</li>
<li>对于单页应用程序来说，只有第一次会加载页面，以后的每次请求，仅仅是获取必要的数据，然后由页面中 js 解析获取的数据展示在页面中</li>
</ul>
</li>
</ul>
<ul>
<li>优势 :<ul>
<li>减少了请求体积，加快页面响应速度，降低了对服务器的压力</li>
<li>更好的用户体验，让用户在 web app 感受 native app 的流畅</li>
</ul>
</li>
</ul>
<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><ul>
<li><strong>路由</strong> : 是浏览器 URL 中的<code>哈希值</code>( # hash) 与 <code>展示视图内容</code> 之间的<code>对应规则</code><ul>
<li>在 web App 中，通过一个页面来展示和管理整个应用的功能。SPA 往往是功能复杂的应用，为了有效管理所有视图内容，前端路由应运而生。简单来说，路由就是一套映射规则(一对一的对应规则)，由开发人员制定规则。当 URL 中的哈希值( <code>#</code> hash) 发生改变后，路由会根据制定好的规则，展示对应的视图内容。</li>
</ul>
</li>
<li><strong>vue 中的路由</strong>；是 <strong>hash</strong> 和 <strong>component</strong> 的对应关系，一个哈希值对应一个组件</li>
</ul>
<h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><p>安装路由 : <code>npm i vue-router</code></p>
<p>引入路由</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./node_modules/vue-router/dist/vue-router.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>详细使用步骤</p>
<ul>
<li>实例路由对象并挂载到 vue 实例 上</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 路由实例 与 Vue 实例 关联到一起</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter()</span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  router</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>入口 (#哈希值)</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">方式1 : url地址为入口 输入url地址改变哈希值</span></span><br><span class="line"><span class="comment">router.html#/one</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">方式2 : router-link+to</span></span><br><span class="line"><span class="comment">to 属性：实际上就是哈希值，将来要参与路由规则中进行与组件匹配</span></span><br><span class="line"><span class="comment">router-link 标签最终会转化为 a 标签，to 属性转化为 a 标签的 href 属性</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/one&quot;</span>&gt;</span>One<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/two&quot;</span>&gt;</span>Tow<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>注册组件并设置返回值</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> One = &#123;</span><br><span class="line">  template: <span class="string">`&lt;div&gt;组件 One&lt;/div&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Two = &#123;</span><br><span class="line">  template: <span class="string">`&lt;div&gt;组件 Two&lt;/div&gt;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>设置规则</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// path : 路由路径</span></span><br><span class="line"><span class="comment">// component : 将来要展示的路由组件</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [&#123; <span class="attr">path</span>: <span class="string">&#x27;/one&#x27;</span>, <span class="attr">component</span>: One &#125;, &#123; <span class="attr">path</span>: <span class="string">&#x27;/two&#x27;</span>, <span class="attr">component</span>: Two &#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>出口</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--  出口：组件要展示的地方--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>示例 ：</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 入口 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 可以直接通过url地址访问路由 --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- to 属性：路由匹配路径</span></span><br><span class="line"><span class="comment">router-link 最终会转化为 a 标签</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/one&quot;</span>&gt;</span>One<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/two&quot;</span>&gt;</span>Tow<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 5. 出口 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 3. 注册组件并设置返回值</span></span><br><span class="line"><span class="keyword">const</span> One = &#123;</span><br><span class="line">  template: <span class="string">`&lt;div&gt;组件 One&lt;/div&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Two = &#123;</span><br><span class="line">  template: <span class="string">`&lt;div&gt;组件 Two&lt;/div&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 实例化路由对象</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    <span class="comment">// 4. 配置路由规则，路由和实例一一对应</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/one&#x27;</span>, <span class="attr">component</span>: One &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/two&#x27;</span>, <span class="attr">component</span>: Two &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  data: &#123;&#125;,</span><br><span class="line">  <span class="comment">// 2. 将路由挂载到 vue 实例上，让 vue 和路由关联在一起</span></span><br><span class="line">  router</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>多出口情况</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 多个出口的形式 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-view</span> <span class="attr">name</span>=<span class="string">&quot;one&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-view</span> <span class="attr">name</span>=<span class="string">&quot;two&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> One = &#123;</span><br><span class="line">  template: <span class="string">`&lt;div&gt;组件 One&lt;/div&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Two = &#123;</span><br><span class="line">  template: <span class="string">`&lt;div&gt;组件 Two&lt;/div&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    <span class="comment">// 配置路由规则，一个路由对应多个实例</span></span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      <span class="comment">// conponents 为一个对象</span></span><br><span class="line">      components: &#123;</span><br><span class="line">        <span class="comment">// key 为出口的 name 属性值</span></span><br><span class="line">        <span class="comment">// value 为组件实例</span></span><br><span class="line">        one: One,</span><br><span class="line">        two: Two</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="入口菜单高亮处理"><a href="#入口菜单高亮处理" class="headerlink" title="入口菜单高亮处理"></a>入口菜单高亮处理</h3><p>点击导航会给链接添加两个类名：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/one&quot;</span> <span class="attr">class</span>=<span class="string">&quot;router-link-exact-active router-link-active&quot;</span>&gt;</span>One<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/two&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span>Two<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>修改方式 1：直接修改类的内容</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.router-link-exact-active</span>,</span><br><span class="line"><span class="selector-class">.router-link-active</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修饰方式 2：给默认高亮类名设置别名，别名为已经定义好样式的类名 (推荐)</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 修改默认高亮的a标签的类名</span></span><br><span class="line">  linkActiveClass: <span class="string">&#x27;red&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="精确匹配和模糊匹配"><a href="#精确匹配和模糊匹配" class="headerlink" title="精确匹配和模糊匹配"></a>精确匹配和模糊匹配</h3><ul>
<li>精确匹配：router-link-exact-active 类名 : 只有当浏览器地址栏中的哈希值 与 router-link 的 to 属性值完全匹配才会添加该类</li>
<li>模糊匹配：router-link-active 类名 : 只要浏览器地址栏中的哈希值包含 router-link 的 to 属性值就会添加该类名</li>
<li>解决办法：加个 exact</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span> <span class="attr">exact</span>&gt;</span></span><br><span class="line">  One</span><br><span class="line"><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>注意：精确匹配和模糊匹配，只对添加类名这个机制有效，与路由的匹配规则无关</li>
</ul>
<h3 id="路由参数"><a href="#路由参数" class="headerlink" title="路由参数"></a>路由参数</h3><p>入口</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1. 入口  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/detail/1&quot;</span>&gt;</span>手机1<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/detail/2&quot;</span>&gt;</span>手机2<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/detail/3&quot;</span>&gt;</span>手机3<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>传参</p>
<p><a href="https://router.vuejs.org/zh/guide/essentials/dynamic-matching.html#%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E5%8C%B9%E9%85%8D">动态路由匹配</a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> Detail = Vue.component(<span class="string">&#x27;detail&#x27;</span>, &#123;</span><br><span class="line">  template: <span class="string">`&lt;div&gt;&#123;&#123; $route.path &#125;&#125;&lt;/div&gt;`</span></span><br><span class="line">&#125;)</span><br><span class="line">routes: [</span><br><span class="line">  <span class="comment">// 方式1：手动一个一个配置</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/detail/1&#x27;</span>, <span class="attr">component</span>: Detail &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/detail/2&#x27;</span>, <span class="attr">component</span>: Detail &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/detail/3&#x27;</span>, <span class="attr">component</span>: Detail &#125;，</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 正确的方式：把传过去的 1/2/3 当成参数</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/detail/:id?&#x27;</span>, <span class="attr">component</span>: Detail &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><code>?</code> 代表参数可传可不传，即可识别的路径包括：<code>detail</code>、<code>detail/1</code>、<code>detail2</code>、<code>detail3</code></p>
<p>获取参数的三种正确方式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// $route =&gt; 路由配置对象</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Detail = Vue.component(<span class="string">&#x27;detail&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">// 方式1：组件中直接读取</span></span><br><span class="line">  <span class="comment">// $route.path 为路由路径</span></span><br><span class="line">  <span class="comment">// $route.params.id 为路由参数</span></span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;&#123;&#123; $route.path &#125;&#125;&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div&gt;&#123;&#123; $route.params.id &#125;&#125;&lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 方式2：js直接读取</span></span><br><span class="line">    <span class="comment">// 打印只会打印一次，因为组件是复用的，每次进来钩子函数只会执行一次</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// #/detail/2?name=zs</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$route) <span class="comment">// 路由配置对象</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$route.path) <span class="comment">// #/detail/2</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$route.params) <span class="comment">// &#123;id: &quot;2&quot;&#125;</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$route.query) <span class="comment">// &#123;name: &#x27;zs&#x27;&#125;</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$route.params.id) <span class="comment">// 2</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 方式3：监听路由的参数变化(因为不是 data 中的数据，不需要深度监听)</span></span><br><span class="line">  watch: &#123;</span><br><span class="line">    <span class="comment">// to：新值</span></span><br><span class="line">    <span class="comment">// from：旧值</span></span><br><span class="line">    $route(to, <span class="keyword">from</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(to.params.id)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><a href="https://router.vuejs.org/zh/guide/essentials/navigation.html#%E7%BC%96%E7%A8%8B%E5%BC%8F%E7%9A%84%E5%AF%BC%E8%88%AA">编程式导航</a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> userId = <span class="string">&#x27;123&#x27;</span></span><br><span class="line"><span class="comment">// 字符串</span></span><br><span class="line">router.push(<span class="string">&#x27;/user&#x27;</span>) <span class="comment">// -&gt; /user</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象, path为路由的path属性值</span></span><br><span class="line">router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/user&#x27;</span> &#125;) <span class="comment">// -&gt; /user</span></span><br><span class="line">router.push(&#123; <span class="attr">path</span>: <span class="string">`/user/<span class="subst">$&#123;userId&#125;</span>`</span> &#125;) <span class="comment">// -&gt; /user/123</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 命名的路由，name 为路由的 name 属性值</span></span><br><span class="line">router.push(&#123; <span class="attr">name</span>: <span class="string">&#x27;user&#x27;</span>, <span class="attr">params</span>: &#123; userId &#125;&#125;) <span class="comment">// -&gt; /user/123</span></span><br><span class="line"><span class="comment">// 如果提供了 path，params 会被忽略</span></span><br><span class="line"><span class="comment">// 这里的 params 不生效</span></span><br><span class="line">router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;/user&#x27;</span>, <span class="attr">params</span>: &#123; userId &#125;&#125;) <span class="comment">// -&gt; /user</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 带查询参数</span></span><br><span class="line">router.push(&#123; <span class="attr">path</span>: <span class="string">&#x27;register&#x27;</span>, <span class="attr">query</span>: &#123; <span class="attr">plan</span>: <span class="string">&#x27;private&#x27;</span> &#125;&#125;) <span class="comment">// -&gt; /register?plan=private</span></span><br><span class="line"></span><br><span class="line">routes: [&#123; <span class="attr">path</span>: <span class="string">&#x27;/user/:id?&#x27;</span>, name=<span class="string">&#x27;user&#x27;</span>, <span class="attr">component</span>: User &#125;]</span><br></pre></td></tr></table></figure>

<h3 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h3><p><code>redirect</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 将 / 重定向到 /home</span></span><br><span class="line">&#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span> &#125;</span><br></pre></td></tr></table></figure>

<h2 id="单文件组件"><a href="#单文件组件" class="headerlink" title="单文件组件"></a>单文件组件</h2><h3 id="vue-是单文件组件"><a href="#vue-是单文件组件" class="headerlink" title="vue 是单文件组件"></a>vue 是单文件组件</h3><p>后缀为 .vue 的文件</p>
<p>单文件组件，无法直接在浏览器中使用，必须经过 webpack 这种打包工具处理后，才能在浏览器中使用</p>
<p>单文件组件的三个组成部分</p>
<ul>
<li>template (模板结构)</li>
<li>script 组件的代码逻辑</li>
<li>style 样式</li>
</ul>
<h3 id="脚手架介绍"><a href="#脚手架介绍" class="headerlink" title="脚手架介绍"></a>脚手架介绍</h3><p><strong>vue-cli</strong> 是 vue 的脚手架工具</p>
<p>因为 webpack 配置繁琐，阻止一批想用 vue 但是不会 webpack 的开发人员</p>
<p>vue-cli 提供了一条命令，我们直接通过这条命令就可以快速的生成一个 vue 项目 (<code>vue init XX</code>)，项目的基本结构、以及 webpack 配置项 <strong>全部配置</strong> 好了</p>
<p><a href="https://vue-loader.vuejs.org/zh/">Vue Loader</a> 手动配置置 <code>webpack</code></p>
<p><a href="https://cli.vuejs.org/zh/">Vue CLI3</a></p>
<p><a href="https://vuejs-templates.github.io/webpack/">Vue webpack 配置</a></p>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><p>安装：<code>npm i -g vue-cli</code></p>
<p>初始化 vue 项目：<code>vue init webpack 项目名称</code></p>
<p>进入到项目根目录运行项目：<code>npm run dev</code></p>
<p>项目安装过程：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">? Project name demo</span><br><span class="line">? Project description A Vue.js project</span><br><span class="line">? Author</span><br><span class="line">? Vue build standalone  =&gt; 运行时+编译</span><br><span class="line">? Install vue-router? Yes</span><br><span class="line">? Use ESLint to lint your code? Yes? Pick an ESLint preset Standard</span><br><span class="line">? <span class="built_in">Set</span> up unit tests No</span><br><span class="line">? Setup e2e tests <span class="keyword">with</span> Nightwatch? No</span><br></pre></td></tr></table></figure>

<h4 id="项目目录介绍"><a href="#项目目录介绍" class="headerlink" title="项目目录介绍"></a>项目目录介绍</h4><p><a href="https://vuejs-templates.github.io/webpack/structure.html">https://vuejs-templates.github.io/webpack/structure.html</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">├── build&#x2F;                      # webpack config files</span><br><span class="line">├── config&#x2F;index.js             # main project config</span><br><span class="line">├── src&#x2F;</span><br><span class="line">│   ├── main.js                 # app entry file</span><br><span class="line">│   ├── App.vue                 # main app component</span><br><span class="line">│   ├── components&#x2F;             # ui components</span><br><span class="line">│   └── assets&#x2F;                 # module assets (processed by webpack)</span><br><span class="line">├── static&#x2F;                     # pure static assets (directly copied)</span><br><span class="line">├── test&#x2F;</span><br><span class="line">│   └── unit&#x2F;                   # unit tests</span><br><span class="line">│   └── e2e&#x2F;                    # e2e tests</span><br><span class="line">├── .babelrc                    # babel config</span><br><span class="line">├── .editorconfig               # settings for your editor</span><br><span class="line">├── .eslintrc.js                # eslint config</span><br><span class="line">├── .eslintignore               # eslint ignore rules</span><br><span class="line">├── .gitignore                  # sensible defaults for gitignore</span><br><span class="line">├── .postcssrc.js               # postcss config</span><br><span class="line">├── index.html                  # index.html template</span><br><span class="line">├── package.json                # build scripts and dependencies</span><br><span class="line">└── README.md                   # Default README file</span><br></pre></td></tr></table></figure>

<ul>
<li>build 和 config 不要动，都是一些配置好的，还有一些他们之间的约定</li>
<li>.gitkeep：static 为预留的文件夹，空文件夹默认不会上传到 github，添加这个文件让 static 文件夹被 git 上传</li>
<li><code>.editorconfig</code> 编译器配置，需要安装 vscode 插件：Editorconfig</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">charset &#x3D; utf-8   utf-8 格式编码</span><br><span class="line">indent_style &#x3D; space   空格和tab都可以缩进</span><br><span class="line">indent_size &#x3D; 2    缩进为2个</span><br><span class="line">end_of_line &#x3D; lf  回车换行</span><br><span class="line">insert_final_newline &#x3D; true   结束最后一行+一个空白</span><br><span class="line">trim_trailing_whitespace &#x3D; true   开头去除空白</span><br></pre></td></tr></table></figure>

<ul>
<li><code>eslint</code> 校验<ul>
<li>忽略文件中有这个 =&gt; /*.js =&gt; 意思是根目录下的.js 文件不校验,,但是发现根目录就没有.js 文件</li>
<li><code>/* eslint-disable no-new */</code> eslint 忽略 no-new 规则</li>
<li><code>/* eslint-disable */</code> 也可以</li>
<li>如果去掉,就会提示你 不要以 new 开头</li>
<li>可以前面给个变量 var vm = new Vue()</li>
<li>但是又提示没有用,还要打印一下,其实这个赋值是没有意义的</li>
<li>不要去掉.这是 eslint 的<code>不校验下一行代码</code></li>
<li><a href="https://standardjs.com/readme-zhcn.html">standard 代码规范</a></li>
</ul>
</li>
<li>postcssrc 处理 less css 等</li>
<li>src<ul>
<li>assets 静态资源</li>
<li>components 组件</li>
<li>router 路由</li>
<li>App.vue 根组件 =&gt; 指定路由出口</li>
<li>脚手架之后，所有的组件都将渲染到 app.vue 中</li>
<li>vm 中的 #app 还是 index.html 中的 #app， app.vue 中的会覆盖前者<br>可以通过分别添加 title 属性验证一下</li>
<li><code>&lt;router-view/&gt;</code> 路由出口要写在 app.vue 组件模板中</li>
<li>main.js<ul>
<li>入口 js 文件</li>
<li>作用：创建 vue 实例，导入其他组件并挂在到 vue 实例上</li>
<li><code>Vue.config.productionTip = false</code> 不要打印提示</li>
</ul>
</li>
<li>route/index.js：路由<ul>
<li><code>@</code>：build/ webpack.base.config.js =&gt; <code>&#39;@&#39;: resolve(&#39;src&#39;)</code></li>
<li>如果在一个模块化工程中使用它，必须要通过 <code>Vue.use()</code> 明确地安装路由功能</li>
<li><code>https://router.vuejs.org/zh/installation.html</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="两种编译模式"><a href="#两种编译模式" class="headerlink" title="两种编译模式"></a>两种编译模式</h3><p>完整版和运行时版</p>
<p><a href="https://cn.vuejs.org/v2/guide/installation.html#%E5%AF%B9%E4%B8%8D%E5%90%8C%E6%9E%84%E5%BB%BA%E7%89%88%E6%9C%AC%E7%9A%84%E8%A7%A3%E9%87%8A">参考官网</a></p>
<p>编译器：用来将模板字符串编译成为 JavaScript 渲染函数的代码</p>
<p>运行时：用来创建 Vue 实例、渲染并处理虚拟 DOM 等的代码。基本上就是除去编译器的其它一切</p>
<ul>
<li>使用 完整版 (包含编译器)</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  router,</span><br><span class="line">  components: &#123; App &#125;,</span><br><span class="line">  template: <span class="string">&#x27;&lt;App/&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>只使用运行时</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  router,</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>查看编译模式：build =&gt; webpack.base.config.js =&gt; <code>&#39;vue\$&#39;: &#39;vue/dist/vue.esm.js&#39;,</code></p>
<h3 id="手动配置路由"><a href="#手动配置路由" class="headerlink" title="手动配置路由"></a>手动配置路由</h3><p>安装路由 <code>npm i vue-router</code></p>
<p>准备工作：创建一个文件夹 router/router.js</p>
<p>具体配置：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* router.js */</span></span><br><span class="line"><span class="comment">// 引入路由</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入组件</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">&#x27;@/components/home/Home&#x27;</span>   (template + script + style)</span><br><span class="line"><span class="keyword">import</span> Login <span class="keyword">from</span> <span class="string">&#x27;@/components/login/Login&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 把路由当成插件安装</span></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建路由，配置路由</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  <span class="comment">// 路由规则</span></span><br><span class="line">routes: [</span><br><span class="line">  &#123;</span><br><span class="line">    path : <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">    component : Home</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path : <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    component : Login</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导出路由</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 main.js 中绑定路由</span></span><br><span class="line">router</span><br><span class="line"></span><br><span class="line">在跟组件 App.vue 下配置出口</span><br><span class="line">&lt;router-view&gt;&lt;/router-view&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* main.js */</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="comment">// 绑定路由</span></span><br><span class="line">  router</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- App.vue --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 配置出口 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="编辑器配置插件"><a href="#编辑器配置插件" class="headerlink" title="编辑器配置插件"></a>编辑器配置插件</h3><ul>
<li><p><code>vetur</code>：vue 单文件组件的高亮</p>
</li>
<li><p>eslint</p>
<ul>
<li>关闭 <strong>eslint</strong>：打开 config/index.js，将 26 行 : <code>dev.useEslint</code>设置为 false，重启项目 ( npm run dev)</li>
</ul>
</li>
<li><p><code>Prettier</code>：格式化插件</p>
</li>
</ul>
<h2 id="TODOMVC-案例"><a href="#TODOMVC-案例" class="headerlink" title="TODOMVC 案例"></a>TODOMVC 案例</h2><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><ol>
<li><a href="http://todomvc.com/examples/vue/">Vue-TodoMVC</a></li>
<li><a href="https://github.com/tastejs/todomvc-app-template">下载模板地址</a> <code>git clone https://github.com/tastejs/todomvc-app-template.git</code></li>
<li>安装依赖包 : <code>npm i</code></li>
<li>安装 vue : <code>npm i vue</code></li>
<li>开始 <a href="https://github.com/cuilongjin/todomvc-app-template/tree/master">https://github.com/cuilongjin/todomvc-app-template/tree/master</a></li>
</ol>
<h3 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h3><ul>
<li>渲染任务列表：<code>&lt;label&gt;&#123;&#123; item.name &#125;&#125;&lt;/label&gt;</code></li>
<li>任务完成 : <code>:class=&quot;&#123; completed : item.done &#125;&quot;</code></li>
<li>多选框选中状态 : <code>v-model=&#39;item.done&#39;</code></li>
</ul>
<h3 id="添加任务"><a href="#添加任务" class="headerlink" title="添加任务"></a>添加任务</h3><ul>
<li>获取文本输入框的内容 (关键点)<ul>
<li>把 input 通过 v-model 双向数据绑定 == todoName</li>
<li>@keyup.enter 触发事件 addTodo =&gt; 拿到 todoName 的值</li>
<li>判断文本框不能为空</li>
<li>按回车添加任务</li>
</ul>
</li>
<li>对象{done: false, id: , name : todoName}<ul>
<li>获取数组里最后一个元素的 id+1</li>
<li>如果数组之前一个元素都没有 , id = 1</li>
</ul>
</li>
<li>将对象添加进数组</li>
<li>添加完，清除文本框内容</li>
</ul>
<h3 id="删除任务"><a href="#删除任务" class="headerlink" title="删除任务"></a>删除任务</h3><ul>
<li>传索引<br><code>this.todoList.splice(index, 1)</code></li>
<li>传 id</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 根据 id  找到对应的元素索引</span></span><br><span class="line"><span class="keyword">const</span> index = <span class="built_in">this</span>.todoList.findIndex(<span class="function"><span class="params">item</span> =&gt;</span> item.id === id)</span><br><span class="line"><span class="comment">// 根据索引删除</span></span><br><span class="line"><span class="built_in">this</span>.todoList.splice(index, <span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>传 id 过滤</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 传过来一个 id, 过滤出来不等于这个 id 的元素，重新赋值给 todoList</span></span><br><span class="line"><span class="built_in">this</span>.todoList = <span class="built_in">this</span>.todoList.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.id !== id)</span><br></pre></td></tr></table></figure>

<h3 id="编辑任务"><a href="#编辑任务" class="headerlink" title="编辑任务"></a>编辑任务</h3><ul>
<li><p>显示<code>编辑框</code> ( editing : true) (难点)</p>
<ul>
<li>在 data 中添加一个 editId : -1</li>
<li>在 :class<br>editing: item.id === editId</li>
<li>双击 : 接收过来双击元素的 id<br>this.editId = id</li>
<li>关键点 :<br>vue 中 data 中的数据一旦发生改变，当前页面的指令和表达式都会重新计算</li>
</ul>
</li>
<li><p>读取内容<br><code>&lt;input class=&quot;edit&quot; v-model=&quot;item.name&quot;&gt;</code></p>
</li>
<li><p>回车隐藏编辑框</p>
</li>
</ul>
<h3 id="底部的显示与隐藏"><a href="#底部的显示与隐藏" class="headerlink" title="底部的显示与隐藏"></a>底部的显示与隐藏</h3><ul>
<li>v-if/v-show</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 组件部分</span></span><br><span class="line">&lt;footer <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;footer&quot;</span> v-show=<span class="string">&quot;isFooter()&quot;</span>&gt;</span><br><span class="line"><span class="comment">// js</span></span><br><span class="line">  <span class="function"><span class="title">isFooter</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.todoList.length &gt; <span class="number">0</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>因为 vue 中 data 的数据发送了改变，当前页面中的指令和表达式都会重新计算，所以只要文本框里的内容发生改变，todoName 也会发送改变，isFooter 会一直被调用，性能不好。我们需要的是数组列表的个数改变才会影响底部的变化，所以需要用到计算属性</p>
</li>
<li><p>计算属性</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">footer</span> <span class="attr">class</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;isFooter&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  <span class="comment">// 计算属性 判断底部是否显示</span></span><br><span class="line">  <span class="comment">// 1. 计算属性只会跟着相关属性的值发生变化而变化</span></span><br><span class="line">  <span class="comment">// 2. 一定要有返回值</span></span><br><span class="line">  <span class="comment">// 3. 一定要写在 computed 里面</span></span><br><span class="line">  <span class="comment">// 4. 写起来像一个方法，用起来像一个属性</span></span><br><span class="line">  isFooter () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.todoList.length &gt; <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="数据持久化"><a href="#数据持久化" class="headerlink" title="数据持久化"></a>数据持久化</h3><ul>
<li>存储数据<ul>
<li>监听 list 数据的改变，只要 list 数据变了，就调用保存数据的方法</li>
<li>使用 vue 的 watch 监听 list 的数据改变</li>
<li>保存值，记得把对象转化为字符串(存的快省空间)</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">  <span class="comment">// 监听 todoList</span></span><br><span class="line">  todoList: &#123;</span><br><span class="line">    deep: <span class="literal">true</span>,</span><br><span class="line">    handler (newVal) &#123;</span><br><span class="line">   		<span class="built_in">localStorage</span>.setItem(<span class="string">&#x27;todoList&#x27;</span>, <span class="built_in">JSON</span>.stringify(newVal))</span><br><span class="line">  	&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>获取数据</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在 data 中可以初始值</span></span><br><span class="line"><span class="comment">// 设置一个默认值 空数组 []</span></span><br><span class="line">todoList: <span class="built_in">JSON</span>.parse(<span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;todoList&#x27;</span>)) || []</span><br></pre></td></tr></table></figure>

<h3 id="使用钩子函数来完善数据存储"><a href="#使用钩子函数来完善数据存储" class="headerlink" title="使用钩子函数来完善数据存储"></a>使用钩子函数来完善数据存储</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">created () &#123;</span><br><span class="line">  <span class="built_in">this</span>.todoList = <span class="built_in">JSON</span>.parse(<span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;todoList&#x27;</span>)) || []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="获取接口数据"><a href="#获取接口数据" class="headerlink" title="获取接口数据"></a>获取接口数据</h3><p><a href="https://github.com/typicode/json-server">json-server</a> 提供假数据接口</p>
<p><a href="https://github.com/axios/axios">axios</a> 发送请求</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i -g json-server</span><br><span class="line">npm i axios</span><br><span class="line">json-server data.json</span><br></pre></td></tr></table></figure>

<h3 id="组件化-TODOMVC"><a href="#组件化-TODOMVC" class="headerlink" title="组件化 TODOMVC"></a>组件化 TODOMVC</h3><p><a href="https://github.com/cuilongjin/todomvc-app-template/tree/zujianhua">https://github.com/cuilongjin/todomvc-app-template/tree/zujianhua</a></p>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS 基础</title>
    <url>/1616.html</url>
    <content><![CDATA[<h2 id="1-CSS-初识"><a href="#1-CSS-初识" class="headerlink" title="1.CSS 初识"></a>1.CSS 初识</h2><ul>
<li><p>概念：CSS(Cascading Style Sheets) ，通常称为 CSS 样式表或层叠样式表（级联样式表）</p>
</li>
<li><p>作用：</p>
<ul>
<li>主要用于<strong>设置</strong> HTML 页面中的文本内容（字体、大小、对齐方式等）、图片的外形（宽高、边框样式、边距等）以及<strong>版面的布局和外观显示样式。</strong></li>
<li>CSS 以 HTML 为基础，提供了丰富的功能，如字体、颜色、背景的控制及整体排版等，而且还可以针对不同的浏览器设置不同的样式。</li>
</ul>
</li>
</ul>
<h2 id="2-引入-CSS-样式表（书写位置）"><a href="#2-引入-CSS-样式表（书写位置）" class="headerlink" title="2. 引入 CSS 样式表（书写位置）"></a>2. 引入 CSS 样式表（书写位置）</h2><h3 id="2-1-行内式（内联样式）"><a href="#2-1-行内式（内联样式）" class="headerlink" title="2.1 行内式（内联样式）"></a>2.1 行内式（内联样式）</h3><ul>
<li>又称行内样式、行间样式。是通过标签的 style 属性来设置元素的样式</li>
</ul>
<ul>
<li>其基本语法格式如下：</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;属性1:属性值1; 属性2:属性值2; 属性3:属性值3;&quot;</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>实际上任何 HTML 标签都拥有 style 属性，用来设置行内式</p>
<ul>
<li>案例：</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;div style=&quot;color: red; font-size: 12px;&quot;&gt;青春不常在，抓紧谈恋爱&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>注意：<ul>
<li>style 其实就是标签的属性</li>
<li>样式属性和值中间是 <code>:</code></li>
<li>多组属性值之间用 <code>;</code> 隔开</li>
<li>只能控制当前的标签和以及嵌套在其中的子标签，造成代码冗余</li>
</ul>
</li>
<li>缺点：<ul>
<li>没有实现样式和结构相分离</li>
</ul>
</li>
</ul>
<h3 id="2-2-内部样式表（内嵌样式表）"><a href="#2-2-内部样式表（内嵌样式表）" class="headerlink" title="2.2 内部样式表（内嵌样式表）"></a>2.2 内部样式表（内嵌样式表）</h3><ul>
<li><p>又称内嵌式，是将 CSS 代码集中写在 HTML 文档的 head 头部标签中，并且用 style 标签定义</p>
</li>
<li><p>其基本语法格式如下：</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>注意：</p>
<ul>
<li>style 标签一般位于 head 标签中</li>
<li>type=”text/css” 在 html5 中可以省略</li>
<li>只能控制当前的页面</li>
</ul>
</li>
<li><p>缺点：</p>
<p>没有彻底分离</p>
</li>
</ul>
<h3 id="2-3-外部样式表（外链式）"><a href="#2-3-外部样式表（外链式）" class="headerlink" title="2.3 外部样式表（外链式）"></a>2.3 外部样式表（外链式）</h3><ul>
<li><p>又称链入式，是将所有的样式放在一个或多个以 .CSS 为扩展名的外部样式表文件中，通过 link 标签将外部样式表文件链接到 HTML 文档中</p>
</li>
<li><p>其基本语法格式如下：</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css文件路径&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>注意：<ul>
<li>link 是个单标签</li>
<li>link 标签需要放在 head 头部标签中，并且指定 link 标签的三个属性</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>属性</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td>rel</td>
<td align="left">定义当前文档与被链接文档之间的关系，在这里需要指定为“stylesheet”，表示被链接的文档是一个样式表文件。</td>
</tr>
<tr>
<td>type</td>
<td align="left">定义所链接文档的类型，在这里需要指定为“text/CSS”，表示链接的外部文件为 CSS 样式表。我们都可以省略</td>
</tr>
<tr>
<td>href</td>
<td align="left">定义所链接外部样式表文件的 URL，可以是相对路径，也可以是绝对路径。</td>
</tr>
</tbody></table>
<h3 id="2-4-三种样式表总结（位置）"><a href="#2-4-三种样式表总结（位置）" class="headerlink" title="2.4 三种样式表总结（位置）"></a>2.4 三种样式表总结（位置）</h3><table>
<thead>
<tr>
<th>样式表</th>
<th>优点</th>
<th>缺点</th>
<th>使用情况</th>
<th>控制范围</th>
</tr>
</thead>
<tbody><tr>
<td>行内样式表</td>
<td>书写方便，权重高</td>
<td>没有实现样式和结构相分离</td>
<td>较少</td>
<td>控制一个标签（少）</td>
</tr>
<tr>
<td>内部样式表</td>
<td>部分结构和样式相分离</td>
<td>没有彻底分离</td>
<td>较多</td>
<td>控制一个页面（中）</td>
</tr>
<tr>
<td>外部样式表</td>
<td>完全实现结构和样式相分离</td>
<td>需要引入</td>
<td>最多，强烈推荐</td>
<td>控制整个站点（多）</td>
</tr>
</tbody></table>
<h2 id="3-CSS-样式规则"><a href="#3-CSS-样式规则" class="headerlink" title="3. CSS 样式规则"></a>3. CSS 样式规则</h2><ol>
<li>选择器用于指定 CSS 样式作用的 HTML 标签，花括号内是对该对象设置的具体样式。</li>
<li>属性和属性值以“键值对”的形式出现。</li>
<li>属性是对指定的对象设置的样式属性，例如字体大小、文本颜色等。</li>
<li>属性和属性值之间用英文 <code>:</code> 连接。</li>
<li>多个“键值对”之间用英文 <code>;</code> 进行区分。</li>
</ol>
<h2 id="4-CSS-选择器（重点）"><a href="#4-CSS-选择器（重点）" class="headerlink" title="4. CSS 选择器（重点）"></a>4. CSS 选择器（重点）</h2><h3 id="4-1-CSS-基础选择器"><a href="#4-1-CSS-基础选择器" class="headerlink" title="4.1 CSS 基础选择器"></a>4.1 CSS 基础选择器</h3><h4 id="4-1-1-标签选择器"><a href="#4-1-1-标签选择器" class="headerlink" title="4.1.1 标签选择器"></a>4.1.1 标签选择器</h4><ul>
<li><p>概念：</p>
<p>标签选择器（元素选择器）是指用<strong>HTML 标签名</strong>称作为选择器，按标签名称分类，为页面中某一类标签指定统一的 CSS 样式。</p>
</li>
<li><p>语法：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">标签名&#123;属性1:属性值1; 属性2:属性值2; 属性3:属性值3;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-1-2-类选择器"><a href="#4-1-2-类选择器" class="headerlink" title="4.1.2 类选择器"></a>4.1.2 类选择器</h4><p>类选择器使用 <code>.</code>（英文点号）进行标识，后面紧跟类名.</p>
<ul>
<li><p>语法：</p>
<ul>
<li>类名选择器</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.类名  &#123;</span><br><span class="line">    属性1:属性值1;</span><br><span class="line">    属性2:属性值2;</span><br><span class="line">    属性3:属性值3;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>标签</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;类名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>优点：</p>
<ul>
<li>可以为元素对象定义单独或相同的样式。 可以选择一个或者多个标签</li>
</ul>
</li>
<li><p>注意</p>
<ul>
<li>可以使用字母，数字，<code>-</code> ，<code>_</code></li>
<li>必须以字母开头，区分大小写，不要纯数字、中文等命名</li>
<li>一个 class 可以出现多次，一个元素可以有多个 class，<strong>各个类名中间用空格隔开</strong></li>
</ul>
</li>
</ul>
<h4 id="4-1-3-id-选择器"><a href="#4-1-3-id-选择器" class="headerlink" title="4.1.3 id 选择器"></a>4.1.3 id 选择器</h4><p>id 选择器使用 <code>#</code> 进行标识，后面紧跟 id 名</p>
<ul>
<li><p>其基本语法格式如下：</p>
</li>
<li><p>id 选择器</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#id名 &#123;属性1:属性值1; 属性2:属性值2; 属性3:属性值3;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>注意</p>
<ul>
<li>必须以字母开头</li>
<li>区分大小写</li>
<li>只可出现一次</li>
</ul>
</li>
</ul>
<h4 id="4-1-4-通配符选择器"><a href="#4-1-4-通配符选择器" class="headerlink" title="4.1.4 通配符选择器"></a>4.1.4 通配符选择器</h4><p>通配符选择器用 <code>*</code> 号表示，选择所有的标签。</p>
<ul>
<li>其基本语法格式如下：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123; 属性1:属性值1; 属性2:属性值2; 属性3:属性值3; &#125;</span><br></pre></td></tr></table></figure>

<p>例如下面的代码，使用通配符选择器定义 CSS 样式，清除所有 HTML 标记的默认边距。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>; <span class="comment">/* 定义外边距*/</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>; <span class="comment">/* 定义内边距*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>注意：</p>
<p>会匹配页面所有的元素，降低页面响应速度，不建议随便使用</p>
</li>
</ul>
<h3 id="4-2-CSS-复合选择器"><a href="#4-2-CSS-复合选择器" class="headerlink" title="4.2 CSS 复合选择器"></a>4.2 CSS 复合选择器</h3><h4 id="4-2-1-后代选择器（重点）"><a href="#4-2-1-后代选择器（重点）" class="headerlink" title="4.2.1 后代选择器（重点）"></a>4.2.1 后代选择器（重点）</h4><ul>
<li>后代选择器又称为包含选择器（标签有<strong>直接或间接嵌套</strong>关系，可隔代选择）</li>
<li>中间用 <code>空格</code> 连接</li>
<li>语法：</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">父级 子级 &#123;</span><br><span class="line">  属性: 属性值;</span><br><span class="line">  属性: 属性值;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class</span> <span class="selector-tag">h3</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-2-2-子元素-子代-选择器"><a href="#4-2-2-子元素-子代-选择器" class="headerlink" title="4.2.2 子元素(子代)选择器"></a>4.2.2 子元素(子代)选择器</h4><ul>
<li>子元素选择器只能选择作为某元素**子元素(亲儿子)**的元素（直接嵌套，不能隔代）。</li>
<li>其写法就是把父级标签写在前面，子级标签写在后面，中间跟一个 <code>&gt;</code> 进行连接</li>
<li>语法：</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.class</span> &gt; <span class="selector-tag">h3</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>白话：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">比如:  .demo &gt; h3 &#123;color: red;&#125;   说明 <span class="selector-tag">h3</span> 一定是 demo 亲儿子  demo 元素包含着<span class="selector-tag">h3</span></span><br></pre></td></tr></table></figure>

<h4 id="4-2-3-交集选择器"><a href="#4-2-3-交集选择器" class="headerlink" title="4.2.3 交集选择器"></a>4.2.3 交集选择器</h4><ul>
<li><p>由两个选择器构成，找到的标签必须满足：既有标签一的特点，也有标签二的特点。</p>
</li>
<li><p>两个选择器之间 <strong>不能有空格</strong>，如 h3.special。</p>
</li>
</ul>
<p><strong>记忆技巧：</strong></p>
<p>交集选择器 是 并且的意思。 即…又…的意思</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">比如: p.one 选择的是类名为 .one 的 p 标签;</span><br></pre></td></tr></table></figure>

<p>用的相对来说比较少，不太建议使用。</p>
<h4 id="4-2-4-并集选择器（重点）"><a href="#4-2-4-并集选择器（重点）" class="headerlink" title="4.2.4 并集选择器（重点）"></a>4.2.4 并集选择器（重点）</h4><ul>
<li><p>并集选择器（CSS 选择器分组）是各个选择器通过<code>,</code>连接而成的，通常用于集体声明。</p>
</li>
<li><p>任何形式的选择器（包括标签选择器、class 类选择器 id 选择器等），都可以作为并集选择器的一部分。</p>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">比如  <span class="selector-class">.one</span>, <span class="selector-tag">p</span> , <span class="selector-id">#test</span> &#123;<span class="attribute">color</span>: <span class="number">#F00</span>;&#125;</span><br><span class="line">表示   <span class="selector-class">.one</span> 和 <span class="selector-tag">p</span> 和 <span class="selector-id">#test</span> 这三个选择器都会执行颜色为红色</span><br><span class="line">通常用于集体声明</span><br></pre></td></tr></table></figure>

<h4 id="4-2-5-伪类选择器"><a href="#4-2-5-伪类选择器" class="headerlink" title="4.2.5 伪类选择器"></a>4.2.5 伪类选择器</h4><p>伪类选择器实质上是让设计师可以根据元素特定的状态，设置不同的视觉效果。具体有<code>:link</code>、<code>:visited</code>、<code>:hover</code>、<code>:active</code>、<code>:focus</code>、<code>:focus-within</code>、<code>:target</code>、<code>:root</code>和<code>:checked</code>。</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>a:link</td>
<td></td>
<td>用于设置链接初始状态时的样式</td>
</tr>
<tr>
<td>a:visited</td>
<td></td>
<td>用于设置链接被点击过后的样式 设置 font-size 不起作用</td>
</tr>
<tr>
<td>a:hover</td>
<td></td>
<td>用于设置鼠标悬停在链接上方时，链接的样式</td>
</tr>
<tr>
<td>a:active</td>
<td></td>
<td>用于设置鼠标按键按下，但未释放时，链接的样式</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>:first-child</td>
<td>li:first-child</td>
<td>选择属于其父元素的第一个子元素(不一定是 li 元素)</td>
</tr>
<tr>
<td>:last-child</td>
<td>li:last-child</td>
<td>选择属于其父元素的最后一个子元素</td>
</tr>
<tr>
<td>:nth-child(2)</td>
<td>li:nth-child(2)</td>
<td>选择属于其父元素的第二个子元素</td>
</tr>
<tr>
<td>:nth-child(even)</td>
<td>li:nth-child(even)</td>
<td>选择属于其父元素的偶数项的子元素</td>
</tr>
<tr>
<td>:nth-child(3n+1)</td>
<td>li:nth-child(3n+1)</td>
<td>选择属于其父元素的正向 3n+1 项(n 从 0 开始)的子元素</td>
</tr>
<tr>
<td>nth-last-child(3n+1)</td>
<td>li:nth-last-child(-n+5)</td>
<td>选择属于其父元素的反向-n+5 项(n 从 0 开始)的子元素<br>(即选择最后五个 li 元素)</td>
</tr>
<tr>
<td>:only-child</td>
<td>li:only-child</td>
<td>选择属于其父元素的唯一子元素的每个 <code>&lt;li&gt;</code> 元素</td>
</tr>
<tr>
<td>:only-of-type</td>
<td>li:only-of-type</td>
<td>选择属于其父元素唯一 <code>&lt;li&gt;</code> 元素的每个 <code>&lt;li&gt;</code> 元素</td>
</tr>
<tr>
<td>:first-of-type</td>
<td>li:first-of-type</td>
<td>选择属于其父元素的第一个<code>&lt;li&gt;</code> 元素</td>
</tr>
<tr>
<td>:last-of-type</td>
<td>li:last-of-type</td>
<td>选择属于其父元素的最后一个 <code>&lt;li&gt;</code> 元素</td>
</tr>
<tr>
<td>:nth-of-type(2)</td>
<td>li:nth-of-type(2)</td>
<td>选择属于其父元素的第二个 <code>&lt;li&gt;</code> 元素</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>:enabled</td>
<td>input:enabled</td>
<td>选择每个启用的 <code>&lt;input&gt;</code> 元素</td>
</tr>
<tr>
<td>:disabled</td>
<td>input:disabled</td>
<td>选择每个禁用的 <code>input&gt;</code> 元素</td>
</tr>
<tr>
<td>:checked</td>
<td>input:checked</td>
<td>选择每个被选中的 <code>&lt;input&gt;</code> 元素</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>:focus</td>
<td></td>
<td>用于设置元素处于 focus 状态下的样式。</td>
</tr>
<tr>
<td>:focus-within</td>
<td></td>
<td>用于设置当子元素处于 focus 状态时，该元素的样式。</td>
</tr>
<tr>
<td>:empty</td>
<td>p:empty</td>
<td>选择没有子元素的每个 <code>&lt;p&gt;</code> 元素（包括文本节点）</td>
</tr>
<tr>
<td>:target</td>
<td><code>#news:target</code></td>
<td>选择当前活动的 <code>#news</code> 元素</td>
</tr>
<tr>
<td>:root</td>
<td></td>
<td>选择文档的根元素</td>
</tr>
<tr>
<td>:not(p)</td>
<td>li:not(:last-of-type)</td>
<td>选择最后一个 li 之外其他所有 li</td>
</tr>
<tr>
<td>:placeholder-shown</td>
<td></td>
<td>用于设置元素 placeholder 显示时的样式</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>伪元素</td>
<td></td>
<td></td>
</tr>
<tr>
<td>::selection</td>
<td>::selection</td>
<td>选择被用户选取的元素部分</td>
</tr>
<tr>
<td>::first-letter</td>
<td>p::first-letter</td>
<td>选择每个 <code>&lt;p&gt;</code> 元素的首字母。</td>
</tr>
<tr>
<td>::first-line</td>
<td>p::first-line</td>
<td>选择每个 <code>&lt;p&gt;</code> 元素的首行</td>
</tr>
<tr>
<td>::placeholder</td>
<td>input::placeholder</td>
<td>选择 input 内部的占位符，给其设置样式</td>
</tr>
<tr>
<td>::before</td>
<td>div::before</td>
<td>在每个 <code>&lt;div&gt;</code> 元素的内容之前插入内容</td>
</tr>
<tr>
<td>::after</td>
<td>div::after</td>
<td>在每个 <code>&lt;div&gt;</code> 元素的内容之后插入内容</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>属性选择器</td>
<td></td>
<td></td>
</tr>
<tr>
<td>[attribute]</td>
<td>[disabled]</td>
<td>选择带有 disabled 属性所有元素。</td>
</tr>
<tr>
<td>[attribute=value]</td>
<td>[target=_blank]</td>
<td>选择 target=”_blank” 的所有元素。</td>
</tr>
<tr>
<td>[attribute~=value]</td>
<td>[title~=flower]</td>
<td>选择 title 属性包含单词 “flower” 的所有元素。</td>
</tr>
<tr>
<td>[attribute|=value]</td>
<td>[lang|=en]</td>
<td>选择 lang 属性值以 “en” 开头后续以-分隔的所有元素。</td>
</tr>
<tr>
<td>:lang(language)</td>
<td>p:lang(it)</td>
<td>选择带有以 “it” 开头的 lang 属性值的每个 <code>&lt;p&gt;</code> 元素</td>
</tr>
<tr>
<td>[attribute^=value]</td>
<td>a[src^=”https”]</td>
<td>选择其 src 属性值以 “https” 开头的每个 <code>&lt;a&gt;</code> 元素</td>
</tr>
<tr>
<td>[attribute$=value]</td>
<td>a[src$=”.pdf”]</td>
<td>选择其 src 属性以 “.pdf” 结尾的所有 <code>&lt;a&gt;</code> 元素</td>
</tr>
<tr>
<td>[attribute*=value]</td>
<td>a[src*=”abc”]</td>
<td>选择其 src 属性中包含 “abc” 子串的每个 <code>&lt;a&gt;</code> 元素</td>
</tr>
</tbody></table>
<p><code>#nav == [id=nav]</code> 选择 id=nav 的所有元素</p>
<blockquote>
<p><code>li:last-child</code> 是选择 li 元素的父元素下的最后一个子元素，不一定是 li</p>
<p><code>li:last-of-type</code> 是选择 li 元素的父元素的最后一个 li 元素</p>
<p><code>li:not(:last-of-type)</code> 选择最后一个 li 之外其他所有 li</p>
<p><code>::before</code> <code>::after</code> 必须指定 content 属性，否则无效；生成的伪元素默认是行内样式；生成的伪元素无法被找到，更不能被 hover 等；一般用来清除浮动(只有::after 可以)或添加小图标</p>
</blockquote>
<p>关于单冒号和双冒号问题：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">关于:before与::before的区别</span><br><span class="line">:before是css2中伪元素的写法，但是呢，在css3中严格规定，伪类采用单冒号，伪元素需要使用双冒号。为了兼容旧的代码，当浏览器碰到了:before之后，会自动的转换成::before。</span><br><span class="line">如果需要兼容老的浏览器，比如IE678，推荐使用:before</span><br><span class="line">如果不需要兼容老的浏览器，比如移动端，推荐使用::before</span><br></pre></td></tr></table></figure>

<h4 id="链接伪类注意"><a href="#链接伪类注意" class="headerlink" title="链接伪类注意"></a>链接伪类注意</h4><ul>
<li>写的时候，他们的顺序尽量不要颠倒 按照 lvha 的顺序。否则可能引起错误。</li>
<li>记忆法<ul>
<li><strong>l</strong>o<strong>v</strong>e <strong>ha</strong>te 爱上了讨厌</li>
<li>**lv **包包 非常 <strong>ha</strong>o</li>
</ul>
</li>
<li>因为叫链接伪类，所以都是 利用交集选择器 a:link a:hover</li>
<li>因为 a 链接浏览器具有默认样式，所以我们实际工作中都需要给链接单独指定样式。</li>
<li>实际工作开发中，我们很少写全四个状态，一般我们写法如下：</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="comment">/* a是标签选择器  所有的链接 */</span></span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">color</span>: gray;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="comment">/* :hover 是链接伪类选择器 鼠标经过 */</span></span><br><span class="line">  <span class="attribute">color</span>: red; <span class="comment">/*  鼠标经过的时候，由原来的 灰色 变成了红色 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-CSS-属性"><a href="#5-CSS-属性" class="headerlink" title="5. CSS 属性"></a>5. CSS 属性</h2><h3 id="5-1-font-字体"><a href="#5-1-font-字体" class="headerlink" title="5.1 font:字体"></a>5.1 font:字体</h3><h4 id="5-1-1-font-size-大小"><a href="#5-1-1-font-size-大小" class="headerlink" title="5.1.1 font-size:大小"></a>5.1.1 font-size:大小</h4><ul>
<li><p>作用：</p>
<p>font-size 属性用于设置字号</p>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>谷歌浏览器默认的文字大小为 16px，最小为 12px。</li>
<li>em、百分比 相对父元素大小</li>
<li>设置 body 默认字体大小为 100%，其他文字大小以此为基础设置百分比值</li>
</ul>
</blockquote>
<h4 id="5-1-2-font-family-字体"><a href="#5-1-2-font-family-字体" class="headerlink" title="5.1.2 font-family:字体"></a>5.1.2 font-family:字体</h4><ul>
<li><p>作用：</p>
<p>font-family 属性用于设置哪一种字体。</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">p&#123; font-family:&quot;微软雅黑&quot;;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>可以同时指定多个字体，<strong>中间以逗号隔开</strong>，表示如果浏览器不支持第一个字体，则会尝试下一个，直到找到合适的字体， 如果都没有，则以我们电脑默认的字体为准。</li>
<li>中文字体需要加英文状态下的引号，英文字体一般不需要加引号。当需要设置英文字体时，英文字体名必须位于中文字体名之前。</li>
<li>如果字体名中包含空格、#、$ 等符号，则该字体必须加英文状态下的单引号或双引号，例如 font-family: “Times New Roman”;。</li>
<li>尽量使用系统默认字体，保证在任何用户的浏览器中都能正确显示。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">p&#123;font-family: Arial,&quot;Microsoft Yahei&quot;, &quot;微软雅黑&quot;;&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>CSS Unicode 字体</p>
<ul>
<li><p>为什么使用 Unicode 字体</p>
</li>
<li><p>在 CSS 中设置字体名称，直接写中文是可以的。但是在文件编码（GB2312、UTF-8 等）不匹配时会产生乱码的错误。</p>
</li>
<li><p>xp 系统不支持 类似微软雅黑的中文。</p>
</li>
</ul>
<p>解决：</p>
<ul>
<li><p>方案一： 你可以使用英文来替代。 比如<code>font-family:&quot;Microsoft Yahei&quot;</code>。</p>
</li>
<li><p>方案二： 在 CSS 直接使用 Unicode 编码来写字体名称可以避免这些错误。使用 Unicode 写中文字体名称，浏览器是可以正确的解析的。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">font-family: &quot;\5FAE\8F6F\96C5\9ED1&quot;;   表示设置字体为“微软雅黑”。</span><br></pre></td></tr></table></figure>

</li>
</ul>
<table>
<thead>
<tr>
<th>字体名称</th>
<th>英文名称</th>
<th>Unicode 编码</th>
</tr>
</thead>
<tbody><tr>
<td>宋体</td>
<td>SimSun</td>
<td>\5B8B\4F53</td>
</tr>
<tr>
<td>新宋体</td>
<td>NSimSun</td>
<td>\65B0\5B8B\4F53</td>
</tr>
<tr>
<td>黑体</td>
<td>SimHei</td>
<td>\9ED1\4F53</td>
</tr>
<tr>
<td>微软雅黑</td>
<td>Microsoft YaHei</td>
<td>\5FAE\8F6F\96C5\9ED1</td>
</tr>
<tr>
<td>楷体_GB2312</td>
<td>KaiTi_GB2312</td>
<td>\6977\4F53_GB2312</td>
</tr>
<tr>
<td>隶书</td>
<td>LiSu</td>
<td>\96B6\4E66</td>
</tr>
<tr>
<td>幼园</td>
<td>YouYuan</td>
<td>\5E7C\5706</td>
</tr>
<tr>
<td>华文细黑</td>
<td>STXihei</td>
<td>\534E\6587\7EC6\9ED1</td>
</tr>
<tr>
<td>细明体</td>
<td>MingLiU</td>
<td>\7EC6\660E\4F53</td>
</tr>
<tr>
<td>新细明体</td>
<td>PMingLiU</td>
<td>\65B0\7EC6\660E\4F53</td>
</tr>
</tbody></table>
</blockquote>
<h4 id="5-1-3-font-weight-字体粗细"><a href="#5-1-3-font-weight-字体粗细" class="headerlink" title="5.1.3 font-weight:字体粗细"></a>5.1.3 font-weight:字体粗细</h4><ul>
<li>在 html 中如何将字体加粗我们可以用标签来实现<ul>
<li>使用 b 和 strong 标签是文本加粗。</li>
</ul>
</li>
<li>可以使用 CSS 来实现，但是 CSS 是没有语义的。</li>
</ul>
<table>
<thead>
<tr>
<th>属性值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td>normal</td>
<td align="left">默认值（不加粗的）</td>
</tr>
<tr>
<td>bold</td>
<td align="left">定义粗体（加粗的）</td>
</tr>
<tr>
<td>100~900</td>
<td align="left">400 等同于 normal，而 700 等同于 bold 我们重点记住这句话</td>
</tr>
</tbody></table>
<h4 id="5-1-4-font-style-字体风格"><a href="#5-1-4-font-style-字体风格" class="headerlink" title="5.1.4 font-style:字体风格"></a>5.1.4 font-style:字体风格</h4><ul>
<li>在 html 中如何将字体倾斜我们可以用标签来实现<ul>
<li>字体倾斜除了用 i 和 em 标签，</li>
</ul>
</li>
<li>可以使用 CSS 来实现，但是 CSS 是没有语义的</li>
</ul>
<p>font-style 属性用于定义字体风格，如设置斜体、倾斜或正常字体，其可用属性值如下：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td>normal</td>
<td align="left">默认值，浏览器会显示标准的字体样式 font-style: normal;</td>
</tr>
<tr>
<td>italic</td>
<td align="left">浏览器会显示斜体的字体样式。</td>
</tr>
</tbody></table>
<h4 id="5-1-5-line-height-文字行高"><a href="#5-1-5-line-height-文字行高" class="headerlink" title="5.1.5 line-height:文字行高"></a>5.1.5 line-height:文字行高</h4><ul>
<li><p>作用：</p>
<p>设置行间距，就是行与行之间的距离，即字符的垂直间距，一般称为行高。</p>
<p>使用行高实现<strong>单行文字垂直居中</strong></p>
</li>
<li><p>单位：</p>
<ul>
<li>line-height 常用的属性值单位有三种，分别为像素 px，相对值 em 和百分比%，实际工作中使用最多的是像素 px</li>
</ul>
</li>
</ul>
<blockquote>
<p>技巧：</p>
<ul>
<li>一般情况下，行距比字号大 7.8 像素左右就可以了。line-height: 24px;</li>
<li>文字垂直居中就设置行高等于他外部元素的高度</li>
<li>line-height 不要代替 height ，height 不写 line-height 会把盒子撑起来，不建议这样， height 该写也得写</li>
</ul>
</blockquote>
<p><strong>行高测量</strong></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102183819.png"></p>
<p><strong>行高和高度的三种关系</strong></p>
<ul>
<li>如果 行高 等 高度 文字会 垂直居中</li>
<li>如果行高 大于 高度 文字会 偏下</li>
<li>如果行高小于高度 文字会 偏上</li>
</ul>
<p><strong>300%、3em、3 之间区别</strong></p>
<ul>
<li>300% 先计算后继承</li>
<li>3 先继承后计算</li>
<li>3em</li>
</ul>
<h4 id="5-1-6-font-综合设置字体样式-重点"><a href="#5-1-6-font-综合设置字体样式-重点" class="headerlink" title="5.1.6 font: 综合设置字体样式 (重点)"></a>5.1.6 font: 综合设置字体样式 (重点)</h4><p>font 属性用于对字体样式进行综合设置</p>
<ul>
<li>基本语法格式如下：</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">font</span>: [&lt;font-style&gt;||&lt;font-weight&gt;]?&lt;font-size&gt;[/&lt;line-height&gt;]?&lt;font-family&gt;(必不可少，否则无效)</span><br><span class="line"></span><br><span class="line">font:italic bold <span class="number">20px</span>/<span class="number">2</span> arial,serif;</span><br><span class="line">//表示<span class="attribute">font-style</span>:italic  font-weight:bold    font-size:<span class="number">20px</span>  line-height:<span class="number">2</span>   font-family:arial,serif</span><br></pre></td></tr></table></figure>

<ul>
<li>注意：<ul>
<li>使用 font 属性时，必须按上面语法格式中的顺序书写，不能更换顺序，各个属性以<strong>空格</strong>隔开。</li>
<li>其中不需要设置的属性可以省略（取默认值），但必须保留 font-size 和 font-family 属性，否则 font 属性将不起作用。</li>
<li>line-height 值如果不写，浏览器会默认添加 <code>normal</code></li>
</ul>
</li>
</ul>
<h3 id="5-2-text-属性"><a href="#5-2-text-属性" class="headerlink" title="5.2 text 属性"></a>5.2 text 属性</h3><h4 id="5-2-1-color-文本颜色"><a href="#5-2-1-color-文本颜色" class="headerlink" title="5.2.1 color:文本颜色"></a>5.2.1 color:文本颜色</h4><ul>
<li><p>作用：</p>
<p>color 属性用于定义文本的颜色，</p>
</li>
<li><p>其取值方式有如下 3 种：</p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="left">表示表示</th>
<th align="left">属性值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">预定义的颜色值</td>
<td align="left">red，green，blue 等等</td>
</tr>
<tr>
<td align="left">十六进制</td>
<td align="left">#FF0000，#FF6600，#29D794</td>
</tr>
<tr>
<td align="left">RGB 代码</td>
<td align="left">rgb(255,0,0)或 rgb(100%,0%,0%)<br />rgba(255,0,0,1)1 表示不透明，0 表示全透明<br />全透明也可以用 color：transparent</td>
</tr>
</tbody></table>
<ul>
<li><p>注意</p>
<p>我们实际工作中， 用 16 进制的写法是最多的，而且我们更喜欢简写方式比如 #f00 代表红色</p>
</li>
</ul>
<h4 id="5-2-2-text-align-文本水平对齐方式"><a href="#5-2-2-text-align-文本水平对齐方式" class="headerlink" title="5.2.2 text-align:文本水平对齐方式"></a>5.2.2 text-align:文本水平对齐方式</h4><ul>
<li><p>作用：</p>
<p>text-align 属性用于设置当前这个标签内部的 <strong>内容</strong>（可以是文字 、行内标签、行内块标签）的水平对齐方式</p>
</li>
<li><p>其可用属性值如下：</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>属性</th>
<th align="center">解释</th>
</tr>
</thead>
<tbody><tr>
<td>left</td>
<td align="center">左对齐（默认值）</td>
</tr>
<tr>
<td>right</td>
<td align="center">右对齐</td>
</tr>
<tr>
<td>center</td>
<td align="center">居中对齐</td>
</tr>
<tr>
<td>justify</td>
<td align="center">两端对齐</td>
</tr>
</tbody></table>
<ul>
<li><p>注意：</p>
<p>是让盒子里面的 <strong>内容水平居中</strong> ， 而不是让盒子居中对齐</p>
</li>
</ul>
<h4 id="5-2-3-text-indent-首行缩进"><a href="#5-2-3-text-indent-首行缩进" class="headerlink" title="5.2.3 text-indent:首行缩进"></a>5.2.3 text-indent:首行缩进</h4><ul>
<li><p>作用：</p>
<p>text-indent 属性用于设置首行文本的缩进，</p>
</li>
<li><p>属性值</p>
<ul>
<li>其属性值可为不同单位的数值、em 字符宽度的倍数、或相对于父元素宽度的百分比%，允许使用负值（设置成很大的负值可以用来隐藏文字）</li>
<li>建议使用 em 作为设置单位。</li>
<li>可以继承</li>
</ul>
</li>
</ul>
<p><strong>1em 就是一个字的宽度 如果是汉字的段落， 1em 就是一个汉字的宽度</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="comment">/*行间距*/</span></span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">25px</span>;</span><br><span class="line">  <span class="comment">/*首行缩进2个字  em  1个em 就是1个字的大小*/</span></span><br><span class="line">  <span class="attribute">text-indent</span>: <span class="number">2em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-2-4-text-decoration-文本的装饰"><a href="#5-2-4-text-decoration-文本的装饰" class="headerlink" title="5.2.4 text-decoration 文本的装饰"></a>5.2.4 text-decoration 文本的装饰</h4><p>text-decoration 通常我们用于给链接修改装饰效果</p>
<table>
<thead>
<tr>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>none</td>
<td>默认。定义标准的文本。 取消下划线（最常用）</td>
</tr>
<tr>
<td>underline</td>
<td>定义文本下的一条线。下划线 也是我们链接自带的（常用）</td>
</tr>
<tr>
<td>overline</td>
<td>定义文本上的一条线。（不用）</td>
</tr>
<tr>
<td>line-through</td>
<td>定义穿过文本的一条线。（不常用）</td>
</tr>
</tbody></table>
<blockquote>
<p>多个属性值写在同一个 text-decoration 里会叠加<br>多个属性值写在不同的 text-decoration 里，<strong>属性不会累加</strong>，优先级高的会完全取代优先级低的</p>
</blockquote>
<h4 id="5-2-5-CSS-外观属性总结"><a href="#5-2-5-CSS-外观属性总结" class="headerlink" title="5.2.5 CSS 外观属性总结"></a>5.2.5 CSS 外观属性总结</h4><table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">表示</th>
<th align="left">注意点</th>
</tr>
</thead>
<tbody><tr>
<td align="left">color</td>
<td align="left">颜色</td>
<td align="left">我们通常用 十六进制 比如 而且是简写形式 #fff</td>
</tr>
<tr>
<td align="left">line-height</td>
<td align="left">行高</td>
<td align="left">控制行与行之间的距离</td>
</tr>
<tr>
<td align="left">text-align</td>
<td align="left">水平对齐</td>
<td align="left">可以设定文字水平的对齐方式</td>
</tr>
<tr>
<td align="left">text-indent</td>
<td align="left">首行缩进</td>
<td align="left">通常我们用于段落首行缩进 2 个字的距离 text-indent: 2em;</td>
</tr>
<tr>
<td align="left">text-decoration</td>
<td align="left">文本修饰</td>
<td align="left">记住 添加 下划线 underline 取消下划线 none</td>
</tr>
</tbody></table>
<h3 id="5-3-背景-background-属性"><a href="#5-3-背景-background-属性" class="headerlink" title="5.3 背景(background)属性"></a>5.3 背景(background)属性</h3><h4 id="color"><a href="#color" class="headerlink" title="color"></a>color</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 背景颜色 */</span></span><br><span class="line"><span class="attribute">background-color</span>: 颜色值; <span class="comment">/* 默认的值是transparent透明的inherit继承 */</span></span><br><span class="line"><span class="comment">/* 半透明背景 */</span></span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>);</span><br><span class="line"><span class="comment">/* 只作用于盒子背景颜色，不会影响文本和背景图片 */</span></span><br><span class="line"><span class="comment">/* 最后一个参数是 alpha 透明度 取值范围 0~1 之间 */</span></span><br><span class="line"><span class="comment">/* 0.3 的 0 可以省略 */</span></span><br><span class="line"><span class="comment">/* C3 属性，低于 ie9 的版本不支持 */</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>opacity</strong> 属性 设置整个标签的透明度，取值范围 <code>0~1</code>之间</p>
</blockquote>
<h4 id="image"><a href="#image" class="headerlink" title="image"></a>image</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 背景图片 */</span></span><br><span class="line"><span class="attribute">background-image</span>: <span class="built_in">none</span>(默认) <span class="built_in">url</span>(<span class="string">图片地址</span>) <span class="built_in">url</span>(<span class="string">&#x27;demo1.png&#x27;</span>), <span class="built_in">url</span>(<span class="string">&#x27;demo2.png&#x27;</span>); <span class="comment">/* demo1 在 demo2 上层 */</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>在 background-color 上层</p>
</li>
<li><p>推荐背景图片 url 加引号</p>
</li>
<li><p>多个背景图片，使用逗号隔开</p>
</li>
</ul>
<p><strong>img 和背景图片的区别：</strong></p>
<ul>
<li>img 直接可以显示在页面，不需要设置宽高，但是背景图片必须要给盒子设置宽高才能显示，背景图片撑不开容器</li>
<li>img 上面写不了内容（除非后期使用定位），而背景图片完全可以</li>
<li>在实际工作中：img 一般用来做产品图片展示（经常更新），而背景图片一般用来做背景或者一些很少更新的小 icon</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>; <span class="comment">/* 插入图片更改大小 width 和 height */</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">30px</span>; <span class="comment">/* 插入图片更改位置 可以用 margin 或 padding  盒模型 */</span></span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">50px</span>; <span class="comment">/* 插入的图片也是一个盒子 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid purple;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span> <span class="built_in">url</span>(<span class="string">&#x27;images/sun.jpg&#x27;</span>) no-repeat;</span><br><span class="line">  <span class="attribute">background-position</span>: <span class="number">30px</span> <span class="number">50px</span>; <span class="comment">/* 背景图片更改位置用 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="repeat"><a href="#repeat" class="headerlink" title="repeat"></a>repeat</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 背景平铺 */</span></span><br><span class="line"><span class="attribute">background-repeat</span>: repeat：背景图像在纵向和横向上平铺（默认的） no-repeat：背景图像不平铺（常用） repeat-x：背景图像在横向上平铺 repeat-y：背景图像在纵向平铺 space：中间有空白，保证显示每个图片完整 round：通过缩放保证每个图片显示完整，有可能图片会被拉伸;</span><br></pre></td></tr></table></figure>

<h4 id="position"><a href="#position" class="headerlink" title="position"></a>position</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 背景位置 */</span></span><br><span class="line"><span class="attribute">background-position</span>: length：百分数 | 由浮点数字和单位标识符组成的长度值 position：top | center | bottom | left | center | right 方位名词;</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li>必须先指定 background-image 属性</li>
<li>x 轴向右为正方向，y 轴向下为正方向，z 轴向屏幕外是正方向</li>
<li>如果 position 后面是精确坐标， 那么第一个是 x ，第二的一定是 y</li>
<li>如果指定的两个值是精确单位和方位名字混合使用，则第一个值是 x 坐标，第二个值是 y 坐标</li>
<li>如果指定两个值都是方位名字，则两个值前后顺序无关，比如 left top 和 top left 效果一致</li>
<li>如果只指定了一个方位名词，另一个值默认<strong>居中对齐</strong>。如果只指定一个数值，那该数值一定是 x 坐标，另一个默认<strong>垂直居中</strong></li>
<li>可设置像素值或百分比（百分比对应容器百分比位置，50% 50% 等价于 center center 即居中）</li>
<li>right 10px top 20px 表示距离右边 10px 距离上边 20px</li>
</ul>
<h4 id="attachment"><a href="#attachment" class="headerlink" title="attachment"></a>attachment</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 背景附着就是解释背景是滚动的还是固定的 */</span></span><br><span class="line"><span class="attribute">background-attachment</span>: scroll：背景图像是随对象内容滚动 fixed：背景图像固定 inherit;</span><br></pre></td></tr></table></figure>

<h4 id="size"><a href="#size" class="headerlink" title="size"></a>size</h4><ul>
<li>跟  width  或者  height  属性是一致的，其实就是设置背景图片的宽高</li>
<li>设置百分比则是相对于容器的百分比，而不是图片，50% 不是将图片缩小一半</li>
<li>特殊值：cover 和 contain 图片等比缩放恰好覆盖整个元素<ul>
<li>cover 某一边正好 100%，另一边等于或者大于元素对应方向的长度</li>
<li>contain 某一边正好 100%，另一边等于或者小于元素对应方向的长度</li>
</ul>
</li>
</ul>
<h4 id="origin"><a href="#origin" class="headerlink" title="origin"></a>origin</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 设置背景零点参考的盒模型即设置（0.0）坐标位置 */</span></span><br><span class="line"><span class="attribute">background-origin</span>: padding-box（默认值） | border-box | content-box;</span><br></pre></td></tr></table></figure>

<h4 id="clip"><a href="#clip" class="headerlink" title="clip"></a>clip</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 设置背景裁剪参考的盒模型 */</span></span><br><span class="line"><span class="attribute">background-clip</span>: border-box （默认值）背景区域：border + padding + content padding-box 背景区域：padding + content content-box 背景区域：content text (需要加 -webkit- 前缀) 背景区域 ：文字;</span><br></pre></td></tr></table></figure>

<h4 id="背景属性简写"><a href="#背景属性简写" class="headerlink" title="背景属性简写"></a>背景属性简写</h4><p>!&gt; background: bg-image || bg-position/bg-size || repeat-style || bg-attachment || bg-origin|| bg-clip(origin 和 clip 只设置一个值时则他俩为同一个值) || bg-color</p>
<p>多重背景：background 设置背景的时候，可以设置多个背景图片，使用逗号隔开。注意颜色只能设置一次，并且颜色通常都是在最后面进行设置。</p>
<p>background 是一个合写的属性，如果在 background 之前设置了 background 相关的样式，会被覆盖掉</p>
<h3 id="5-4-display-属性（重点）"><a href="#5-4-display-属性（重点）" class="headerlink" title="5.4 display 属性（重点）"></a>5.4 display 属性（重点）</h3><p>属性值：<br>​ none  此元素不会被显示，不占空间，后续元素会补充上去（visibility：hidden    不显示，但空间保留）<br>​ block  显示为块级元素<br>​ inline  显示为内联元素<br>​ inline-block   显示为行内块</p>
<h4 id="5-4-1-块级元素-block"><a href="#5-4-1-块级元素-block" class="headerlink" title="5.4.1 块级元素(block)"></a>5.4.1 块级元素(block)</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">display</span>: block;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>常见的块元素有 <code>&lt;h1&gt;~&lt;h6&gt;</code> 、<code>&lt;p&gt;</code>、<code>&lt;div&gt;</code>、<code>&lt;ul&gt;</code>、<code>&lt;ol&gt;</code>、<code>&lt;li&gt;</code> 、<code>dl</code>、 <code>dt</code> 、<code>dd</code>、 <code>header</code> 、 <code>footer</code> 、<code>aside</code>、 <code>nav</code> 、 <code>article</code> 、 <code>section</code> …等，其中<code>&lt;div&gt;</code>标签是最典型的块元素。</p>
</blockquote>
<ul>
<li>块级元素的特点</li>
</ul>
<p>（1）独占一行</p>
<p>（2）高度，宽度、外边距以及内边距都可以控制。</p>
<p>（3）继承父元素的宽度，高度不继承</p>
<p>（4）是一个容器及盒子，里面可以放行内或者块级元素。</p>
<ul>
<li>注意：<ul>
<li>只有文字才能组成段落 因此 p 里面不能放块级元素，特别是 p 不能放 div</li>
<li>同理还有这些标签 h1,h2,h3,h4,h5,h6,dt，他们都是文字类块级标签，里面不能放其他块级元素。</li>
</ul>
</li>
</ul>
<h4 id="5-4-2-行内元素-inline"><a href="#5-4-2-行内元素-inline" class="headerlink" title="5.4.2 行内元素(inline)"></a>5.4.2 行内元素(inline)</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">display</span>: inline;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>常见的行内元素有<code>&lt;a&gt;</code>、<code>&lt;strong&gt;</code>、<code>&lt;b&gt;</code>、<code>&lt;em&gt;</code>、<code>&lt;i&gt;</code>、<code>&lt;del&gt;</code>、<code>&lt;s&gt;</code>、<code>&lt;ins&gt;</code>、<code>&lt;u&gt;</code>、<code>lable</code> 、<code>&lt;span&gt;</code> 等，其中 <code>&lt;span&gt;</code> 标签最典型的行内元素。有的地方也成内联元素</p>
</blockquote>
<p><strong>行内元素的特点：</strong></p>
<p>（1）相邻行内元素在一行上，一行可以显示多个。</p>
<p>（2）高、宽直接设置是无效的。</p>
<p>（3）默认宽度就是它本身内容的宽度。</p>
<p>（4）<strong>不可设置竖直方向的 marging 和 padding</strong>,但是可以设置水平方向的 margin 和 padding</p>
<p>（5）<strong>行内元素只能容纳文本或则其他行内元素。</strong></p>
<p>注意：</p>
<ul>
<li><code>&lt;a&gt;</code> 不能直接嵌套 <code>&lt;a&gt;</code></li>
<li>特殊情况 a 里面可以放块级元素，但是给 a 转换一下块级模式最安全。</li>
</ul>
<h4 id="5-4-3-行内块元素（inline-block）"><a href="#5-4-3-行内块元素（inline-block）" class="headerlink" title="5.4.3 行内块元素（inline-block）"></a>5.4.3 行内块元素（inline-block）</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">display</span>: inline-block;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在行内元素中有几个特殊的标签——<code>&lt;img&gt;</code>、<code>&lt;input&gt;</code>、<code>&lt;td&gt;</code>、<code>textarea</code> ，<code>select</code> ，<code>button</code>，可以对它们设置宽高和对齐属性，这些元素把它们称为行内块元素。</p>
</blockquote>
<ul>
<li><p>行内块元素的特点：</p>
<p>（1）和相邻行内元素（行内块）在一行上。一行可以显示多个，超出范围会整块换行<br>（2）默认宽度就是它本身内容的宽度。<br>（3）高度，行高、外边距以及内边距都可以控制。<br>（4）可以设置垂直居中  {vertical-align：middle；}</p>
</li>
</ul>
<h3 id="5-5-盒子阴影-box-shadow-CSS3"><a href="#5-5-盒子阴影-box-shadow-CSS3" class="headerlink" title="5.5 盒子阴影 box-shadow (CSS3)"></a>5.5 盒子阴影 box-shadow (CSS3)</h3><ul>
<li>语法:</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">box-shadow</span>: 水平阴影 垂直阴影 模糊距离（虚实） 阴影尺寸（影子大小） 阴影颜色 内/外阴影；;</span><br></pre></td></tr></table></figure>

<ul>
<li>前两个属性是必须写的，其余的可以省略。</li>
<li>水平阴影、垂直阴影、阴影尺寸可为负值，模糊距离不能为负</li>
<li>外阴影 (outset) 是默认的 但是不能写 想要内阴影可以写 inset</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> solid red;</span><br><span class="line">  <span class="comment">/* box-shadow: 5px 5px 3px 4px rgba(0, 0, 0, .4);  */</span></span><br><span class="line">  <span class="comment">/* box-shadow:水平位置 垂直位置 模糊距离 阴影尺寸（影子大小） 阴影颜色  内/外阴影； */</span></span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">15px</span> <span class="number">30px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.4</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>颜色如果没设置则为 border 或文字颜色，阴影不占空间，内外阴影可以叠加，中间用逗号隔开</p>
<h2 id="6-CSS-三大特性"><a href="#6-CSS-三大特性" class="headerlink" title="6. CSS 三大特性"></a>6. CSS 三大特性</h2><p>目标：</p>
<ul>
<li>理解<ul>
<li>能说出 css 样式冲突采取的原则</li>
<li>能说出哪些常见的样式会有继承</li>
</ul>
</li>
<li>应用<ul>
<li>能写出 CSS 优先级的算法</li>
<li>能会计算常见选择器的叠加值</li>
</ul>
</li>
</ul>
<h3 id="6-1-CSS-层叠性"><a href="#6-1-CSS-层叠性" class="headerlink" title="6.1 CSS 层叠性"></a>6.1 CSS 层叠性</h3><ul>
<li><p>概念：</p>
<p>所谓层叠性是指多种 CSS 样式的叠加。</p>
<p>是浏览器处理冲突的一个能力,如果一个属性通过两个相同选择器设置到同一个元素上，那么这个时候一个属性就会将另一个属性层叠掉</p>
</li>
<li><p>原则：</p>
<ul>
<li>样式冲突，遵循的原则是<strong>就近原则。</strong></li>
<li>同一标签同一属性，后面的会覆盖前面的</li>
<li>样式不冲突，不会层叠</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CSS层叠性最后的执行口诀：  长江后浪推前浪，前浪死在沙滩上。</span><br></pre></td></tr></table></figure>

<h3 id="6-2-CSS-继承性"><a href="#6-2-CSS-继承性" class="headerlink" title="6.2 CSS 继承性"></a>6.2 CSS 继承性</h3><p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102183947.png"></p>
<ul>
<li><p>概念：</p>
<p>子标签会继承父标签的某些样式，如文本颜色和字号。</p>
<p>想要设置一个可继承的属性，只需将它应用于父元素即可。</p>
</li>
</ul>
<p>简单的理解就是： 子承父业。</p>
<ul>
<li><strong>注意</strong>：<ul>
<li>恰当地使用继承可以简化代码，降低 CSS 样式的复杂性。比如有很多子级孩子都需要某个样式，可以给父级指定一个，这些孩子继承过来就好了。</li>
<li>子元素可以继承父元素的样式（<strong>text-，font-，line- 这些元素开头的可以继承，以及 color 属性</strong>）</li>
<li>a 标签不会继承 color， text-decoration <code>none</code> 属性值不会继承，其他属性值会继承</li>
<li>h 标签会继承的父元素的 font-size，但是具体的值是继承下来的 font-size 的值* 2</li>
</ul>
</li>
</ul>
<h3 id="6-3-CSS-优先级（重点）"><a href="#6-3-CSS-优先级（重点）" class="headerlink" title="6.3 CSS 优先级（重点）"></a>6.3 CSS 优先级（重点）</h3><p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102184033.png"></p>
<ul>
<li><p>概念：</p>
<p>定义 CSS 样式时，经常出现两个或更多规则应用在同一元素上，此时，</p>
<ul>
<li>选择器相同，则执行层叠性</li>
<li>选择器不同，就会出现优先级的问题。</li>
</ul>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">!important &gt; style &gt; id &gt; 类/伪类 &gt; 标签 &gt; * &gt; 继承</span><br></pre></td></tr></table></figure>

<h4 id="1-权重计算公式"><a href="#1-权重计算公式" class="headerlink" title="1). 权重计算公式"></a>1). 权重计算公式</h4><p>关于 CSS 权重，我们需要一套计算公式来去计算，这个就是 CSS Specificity（特殊性）</p>
<table>
<thead>
<tr>
<th>标签选择器</th>
<th>计算权重公式</th>
</tr>
</thead>
<tbody><tr>
<td>继承或者 *</td>
<td>0,0,0,0</td>
</tr>
<tr>
<td>每个元素（标签选择器），伪元素选择器</td>
<td>0,0,0,1</td>
</tr>
<tr>
<td>每个类，伪类，属性选择器</td>
<td>0,0,1,0</td>
</tr>
<tr>
<td>每个 ID</td>
<td>0,1,0,0</td>
</tr>
<tr>
<td>每个行内样式 style=””</td>
<td>1,0,0,0</td>
</tr>
<tr>
<td>每个!important 重要的</td>
<td>∞ 无穷大</td>
</tr>
</tbody></table>
<ul>
<li><p>值从左到右，左面的最大，一级大于一级，数位之间没有进制，级别之间不可超越。</p>
</li>
<li><p>关于 CSS 权重，我们需要一套计算公式来去计算，这个就是 CSS Specificity（特殊性）</p>
</li>
<li><p>div { color: pink!important; }</p>
</li>
</ul>
<h4 id="2-权重叠加"><a href="#2-权重叠加" class="headerlink" title="2). 权重叠加"></a>2). 权重叠加</h4><p>我们经常用交集选择器，后代选择器等，是有多个基础选择器组合而成，那么此时，就会出现权重叠加。</p>
<p>就是一个简单的加法计算</p>
<ul>
<li>div ul li ——&gt; 0,0,0,3</li>
<li>.nav ul li ——&gt; 0,0,1,2</li>
<li>a:hover —–—&gt; 0,0,1,1</li>
<li>.nav a ——&gt; 0,0,1,1</li>
</ul>
<p>注意：</p>
<ol>
<li>数位之间没有进制 比如说： 0,0,0,5 + 0,0,0,5 =0,0,0,10 而不是 0,0, 1, 0， 所以不会存在 10 个 div 能赶上一个类选择器的情况。</li>
</ol>
<h4 id="3-继承的权重是-0"><a href="#3-继承的权重是-0" class="headerlink" title="3). 继承的权重是 0"></a>3). 继承的权重是 0</h4><p>这个不难，但是忽略很容易绕晕。其实，我们修改样式，一定要看该标签有没有被选中。</p>
<p>1） 如果选中了，那么以上面的公式来计权重。谁大听谁的。<br>2） 如果没有选中，那么权重是 0，因为继承的权重为 0.（**!important 也无效**）</p>
<h2 id="7-盒子模型（CSS-重点）"><a href="#7-盒子模型（CSS-重点）" class="headerlink" title="7. 盒子模型（CSS 重点）"></a>7. 盒子模型（CSS 重点）</h2><p>css 学习三大重点： css 盒子模型 、 浮动 、 定位</p>
<p>主题思路：</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102184059.png"></p>
<p>目标：</p>
<ul>
<li>理解：<ul>
<li>能说出盒子模型有哪四部分组成</li>
<li>能说出内边距的作用以及对盒子的影响</li>
<li>能说出 padding 设置不同数值个数分别代表的意思</li>
<li>能说出块级盒子居中对齐需要的 2 个条件</li>
<li>能说出外边距合并的解决方法</li>
</ul>
</li>
<li>应用：<ul>
<li>能利用边框复合写法给元素添加边框</li>
<li>能计算盒子的实际大小</li>
<li>能利用盒子模型布局模块案例</li>
</ul>
</li>
</ul>
<h3 id="7-1-盒子模型（Box-Model）"><a href="#7-1-盒子模型（Box-Model）" class="headerlink" title="7.1 盒子模型（Box Model）"></a>7.1 盒子模型（Box Model）</h3><ul>
<li><p>所谓盒子模型：</p>
<ul>
<li>就是把 HTML 页面中的布局元素看作是一个矩形的盒子，也就是一个盛装内容的容器。</li>
</ul>
</li>
</ul>
<p><strong>总结:</strong></p>
<ul>
<li>盒子模型有元素的内容（）、边框（border）、内边距（padding）、和外边距（margin）组成。</li>
<li>盒子里面的文字和图片等元素是 内容区域</li>
<li>盒子的厚度 我们成为 盒子的边框</li>
<li>盒子内容与边框的距离是内边距（类似单元格的 cellpadding)</li>
<li>盒子与盒子之间的距离是外边距（类似单元格的 cellspacing）</li>
<li>css 中设置的宽高默认是内容部分</li>
</ul>
<h3 id="7-2-盒子边框（border）​"><a href="#7-2-盒子边框（border）​" class="headerlink" title="7.2 盒子边框（border）​"></a>7.2 盒子边框（border）​</h3><ul>
<li>语法：</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">border</span>: border-width || border-style || border-color || none;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性</th>
<th align="center">作用</th>
</tr>
</thead>
<tbody><tr>
<td>border-width</td>
<td align="center">定义边框粗细，单位是 px</td>
</tr>
<tr>
<td>border-style</td>
<td align="center">边框的样式</td>
</tr>
<tr>
<td>border-color</td>
<td align="center">边框颜色</td>
</tr>
</tbody></table>
<ul>
<li>边框的样式：<ul>
<li>none：没有边框即忽略所有边框的宽度（默认值）</li>
<li>solid：边框为单实线(最为常用的)</li>
<li>dashed：边框为虚线</li>
<li>dotted：边框为点线</li>
</ul>
</li>
</ul>
<h4 id="7-2-1-盒子边框写法总结表"><a href="#7-2-1-盒子边框写法总结表" class="headerlink" title="7.2.1 盒子边框写法总结表"></a>7.2.1 盒子边框写法总结表</h4><p>很多情况下，我们不需要指定 4 个边框，我们是可以单独给 4 个边框分别指定的。</p>
<table>
<thead>
<tr>
<th align="left">上边框</th>
<th align="left">下边框</th>
<th align="left">左边框</th>
<th align="left">右边框</th>
</tr>
</thead>
<tbody><tr>
<td align="left">border-top-style:样式;</td>
<td align="left">border-bottom-style:样式;</td>
<td align="left">border-left-style:样式;</td>
<td align="left">border-right-style:样式;</td>
</tr>
<tr>
<td align="left">border-top-width:宽度;</td>
<td align="left">border- bottom-width:宽度;</td>
<td align="left">border-left-width:宽度;</td>
<td align="left">border-right-width:宽度;</td>
</tr>
<tr>
<td align="left">border-top-color:颜色;</td>
<td align="left">border- bottom-color:颜色;</td>
<td align="left">border-left-color:颜色;</td>
<td align="left">border-right-color:颜色;</td>
</tr>
<tr>
<td align="left">border-top:宽度 样式 颜色;</td>
<td align="left">border-bottom:宽度 样式 颜色;</td>
<td align="left">border-left:宽度 样式 颜色;</td>
<td align="left">border-right:宽度 样式 颜色;</td>
</tr>
</tbody></table>
<h4 id="7-2-2-表格的细线边框"><a href="#7-2-2-表格的细线边框" class="headerlink" title="7.2.2 表格的细线边框"></a>7.2.2 表格的细线边框</h4><ul>
<li><p>通过表格的<code>cellspacing=&quot;0&quot;</code>,将单元格与单元格之间的距离设置为 0，</p>
</li>
<li><p>但是两个单元格之间的边框会出现重叠，从而使边框变粗</p>
</li>
<li><p>通过 css 属性：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">table&#123; border-collapse:collapse; &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>collapse 单词是合并的意思</li>
<li>border-collapse:collapse; 表示相邻边框合并在一起。</li>
</ul>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">	<span class="selector-tag">table</span> &#123;</span><br><span class="line">		<span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">		<span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">		<span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">td</span> &#123;</span><br><span class="line">		<span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">		<span class="attribute">text-align</span>: center;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">table</span>, <span class="selector-tag">td</span> &#123;</span><br><span class="line">		<span class="attribute">border-collapse</span>: collapse;  <span class="comment">/*合并相邻边框*/</span></span><br><span class="line">	&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="7-2-3-圆角边框-CSS3"><a href="#7-2-3-圆角边框-CSS3" class="headerlink" title="7.2.3 圆角边框(CSS3)"></a>7.2.3 圆角边框(CSS3)</h4><ul>
<li>语法：</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">border-radius</span>: length; <span class="comment">/*圆角的半径*/</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>其中每一个值可以为数值或百分比的形式。</p>
</li>
<li><p>四个值的顺序是：左上、右上、右下、左下，依旧是顺时针旋转。每个角又有水平半径垂直半径，前四个代表水平，后四个代表垂直，中间用/隔开</p>
</li>
<li><p>技巧：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">border-radius</span>: <span class="number">50%</span>; <span class="comment">/*让一个正方形  变成圆圈 */</span></span><br><span class="line"><span class="attribute">border-top-left-radius</span>：<span class="number">10px</span>; <span class="comment">/*单独设置一个角*/</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="7-3-内边距（padding）"><a href="#7-3-内边距（padding）" class="headerlink" title="7.3 内边距（padding）"></a>7.3 内边距（padding）</h3><h4 id="7-3-1-内边距"><a href="#7-3-1-内边距" class="headerlink" title="7.3.1 内边距"></a>7.3.1 内边距</h4><p>padding 属性用于设置内边距。 <strong>是指 边框与内容之间的距离。</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td>padding-left</td>
<td align="left">左内边距</td>
</tr>
<tr>
<td>padding-right</td>
<td align="left">右内边距</td>
</tr>
<tr>
<td>padding-top</td>
<td align="left">上内边距</td>
</tr>
<tr>
<td>padding-bottom</td>
<td align="left">下内边距</td>
</tr>
</tbody></table>
<p>当我们给盒子指定 padding 值之后， 发生了 2 件事情：</p>
<ol>
<li>内容和边框 有了距离，添加了内边距。</li>
<li>盒子会变大。</li>
</ol>
<blockquote>
<p>如果没有给一个盒子指定宽度， 此时，如果给这个盒子指定 padding， 则不会撑开盒子。</p>
</blockquote>
<p><strong>注意： 后面跟几个数值表示的意思是不一样的。</strong></p>
<table>
<thead>
<tr>
<th>值的个数</th>
<th>表达意思</th>
</tr>
</thead>
<tbody><tr>
<td>1 个值</td>
<td>padding：上下左右内边距;</td>
</tr>
<tr>
<td>2 个值</td>
<td>padding: 上下内边距 左右内边距 ；</td>
</tr>
<tr>
<td>3 个值</td>
<td>padding：上内边距 左右内边距 下内边距；</td>
</tr>
<tr>
<td>4 个值</td>
<td>padding: 上内边距 右内边距 下内边距 左内边距 ；</td>
</tr>
</tbody></table>
<h4 id="7-3-2-内盒尺寸计算（元素实际大小）"><a href="#7-3-2-内盒尺寸计算（元素实际大小）" class="headerlink" title="7.3.2 内盒尺寸计算（元素实际大小）"></a>7.3.2 内盒尺寸计算（元素实际大小）</h4><ul>
<li><p>宽度</p>
<p>Element Height = content height + padding + border （Height 为内容高度）</p>
</li>
<li><p>高度</p>
<p>Element Width = content width + padding + border （Width 为内容宽度）</p>
</li>
<li><p>盒子的实际的大小 = 内容的宽度和高度 + 内边距 + 边框</p>
<blockquote>
<p>会撑大原来的盒子</p>
</blockquote>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">box-sizing</span>: content-box（为默认，宽高不包含padding和border）</span><br><span class="line">box-sizing: border-box; 此时宽高包含<span class="attribute">border</span>在内</span><br></pre></td></tr></table></figure>

<h3 id="7-4-外边距（margin）"><a href="#7-4-外边距（margin）" class="headerlink" title="7.4 外边距（margin）"></a>7.4 外边距（margin）</h3><h4 id="7-4-1-外边距"><a href="#7-4-1-外边距" class="headerlink" title="7.4.1 外边距"></a>7.4.1 外边距</h4><p>margin 属性用于设置外边距。 margin 就是控制<strong>盒子和盒子之间的距离</strong>，可以为负值</p>
<table>
<thead>
<tr>
<th>属性</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td>margin-left</td>
<td align="left">左外边距</td>
</tr>
<tr>
<td>margin-right</td>
<td align="left">右外边距</td>
</tr>
<tr>
<td>margin-top</td>
<td align="left">上外边距</td>
</tr>
<tr>
<td>margin-bottom</td>
<td align="left">下外边距</td>
</tr>
</tbody></table>
<blockquote>
<p>margin 值的简写 （复合写法）代表意思 跟 padding 完全相同。</p>
</blockquote>
<p><strong>行内元素设置 margin-top/bottom 无效</strong></p>
<h4 id="7-4-2-块级盒子水平居中"><a href="#7-4-2-块级盒子水平居中" class="headerlink" title="7.4.2 块级盒子水平居中"></a>7.4.2 块级盒子水平居中</h4><ul>
<li>可以让一个块级盒子实现水平居中必须：<ul>
<li>盒子必须指定了宽度（width）</li>
<li>然后就给<strong>左右的外边距都设置为 auto</strong>，</li>
</ul>
</li>
</ul>
<p>实际工作中常用这种方式进行网页布局，示例代码如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>常见的写法，以下下三种都可以。</p>
<ul>
<li>margin-left: auto; margin-right: auto;</li>
<li>margin: auto;</li>
<li>margin: 0 auto;</li>
</ul>
<h4 id="7-4-3-文字居中和盒子居中区别"><a href="#7-4-3-文字居中和盒子居中区别" class="headerlink" title="7.4.3 文字居中和盒子居中区别"></a>7.4.3 文字居中和盒子居中区别</h4><ol>
<li>盒子内的文字水平居中是 text-align: center, 而且还可以让 行内元素和行内块居中对齐</li>
<li>块级盒子水平居中 左右 margin 改为 auto</li>
</ol>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">text-align</span>: center; <span class="comment">/*  文字 行内元素 行内块元素水平居中 */</span></span><br><span class="line"><span class="attribute">margin</span>: <span class="number">10px</span> auto; <span class="comment">/* 块级盒子水平居中  左右margin 改为 auto 就阔以了 上下margin都可以 */</span></span><br></pre></td></tr></table></figure>

<h4 id="7-4-4-外边距合并（塌陷）"><a href="#7-4-4-外边距合并（塌陷）" class="headerlink" title="7.4.4 外边距合并（塌陷）"></a>7.4.4 外边距合并（塌陷）</h4><p>使用 margin 定义块元素的<strong>垂直外边距</strong>时，可能会出现外边距的合并。</p>
<p><strong>(1). 相邻块元素垂直外边距的合并</strong></p>
<ul>
<li>当上下相邻的两个块元素相遇时，如果上面的元素有下外边距 margin-bottom，下面的元素有上外边距 margin-top，则他们之间的垂直间距不是 margin-bottom 与 margin-top 之和而是<strong>取两个值中的较大者</strong>，这种现象被称为相邻块元素垂直外边距的合并（也称外边距塌陷）。</li>
</ul>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102184124.png"></p>
<p><strong>解决方案：尽量只给一个盒子添加 margin 值</strong>。</p>
<p><strong>(2). 嵌套块元素垂直外边距的合并（塌陷）</strong></p>
<ul>
<li>对于两个嵌套关系的块元素，如果父元素没有上内边距及边框，父元素的上外边距会与子元素的上外边距发生合并（父元素会跟着下来），合并后的外边距为两者中的较大者</li>
</ul>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102184202.png"></p>
<p><strong>解决方案：</strong></p>
<ol>
<li>可以为父元素定义上边框。</li>
<li>可以为父元素定义上内边距</li>
<li>可以为父元素添加 overflow:hidden。</li>
</ol>
<p>还有其他方法，比如浮动、固定、绝对定位的盒子不会有问题，后面咱们再总结。。。</p>
<h4 id="7-4-5-清除元素的默认内外边距-重要"><a href="#7-4-5-清除元素的默认内外边距-重要" class="headerlink" title="7.4.5 清除元素的默认内外边距(重要)"></a>7.4.5 清除元素的默认内外边距(重要)</h4><p>为了更灵活方便地控制网页中的元素，制作网页时，我们需要将元素的默认内外边距清除</p>
<p>代码：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>; <span class="comment">/* 清除内边距 */</span></span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>; <span class="comment">/* 清除外边距 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li>行内元素为了照顾兼容性， 尽量只设置左右内外边距， 不要设置上下内外边距。</li>
</ul>
<h2 id="8-CSS-浮动-float"><a href="#8-CSS-浮动-float" class="headerlink" title="8. CSS 浮动(float)"></a>8. CSS 浮动(float)</h2><h3 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h3><ul>
<li><strong>记忆</strong><ul>
<li>能够说出 CSS 的布局的三种机制</li>
</ul>
</li>
<li><strong>理解</strong><ul>
<li>能够说出普通流在布局中的特点</li>
<li>能够说出我们为什么用浮动</li>
<li>能够说出我们为什么要清除浮动</li>
</ul>
</li>
<li><strong>应用</strong><ul>
<li>能够利用浮动完成导航栏案例</li>
<li>能够清除浮动</li>
</ul>
</li>
</ul>
<h3 id="8-1-浮动"><a href="#8-1-浮动" class="headerlink" title="8.1 浮动"></a>8.1 浮动</h3><h4 id="8-1-1-CSS-布局的三种机制"><a href="#8-1-1-CSS-布局的三种机制" class="headerlink" title="8.1.1 CSS 布局的三种机制"></a>8.1.1 CSS 布局的三种机制</h4><p>CSS 提供了 <strong>3 种机制</strong>来设置盒子的摆放位置，分别是<strong>普通流</strong>（标准流）、<strong>浮动</strong>和<strong>定位</strong>，其中：</p>
<ol>
<li><strong>普通流</strong>（标准流）<ul>
<li><strong>块级元素</strong>会独占一行，<strong>从上向下</strong>顺序排列；<ul>
<li>常用元素：div、hr、p、h1~h6、ul、ol、dl</li>
</ul>
</li>
<li><strong>行内元素</strong>会按照顺序，<strong>从左到右</strong>顺序排列，碰到父元素边缘则自动换行；<ul>
<li>常用元素：span、a、i、em 等</li>
</ul>
</li>
</ul>
</li>
<li><strong>浮动</strong><ul>
<li>让盒子从普通流中<strong>浮</strong>起来,主要作用让多个块级盒子一行显示。</li>
</ul>
</li>
<li><strong>定位</strong><ul>
<li>将盒子<strong>定</strong>在浏览器的某一个<strong>位</strong>置——CSS 离不开定位，特别是后面的 js 特效。</li>
</ul>
</li>
</ol>
<h4 id="8-1-2-为什么需要浮动？"><a href="#8-1-2-为什么需要浮动？" class="headerlink" title="8.1.2 为什么需要浮动？"></a>8.1.2 为什么需要浮动？</h4><p>思考题：</p>
<p>我们首先要思考以下 2 个布局中最常见的问题？</p>
<ol>
<li>如何让多个盒子(div)水平排列成一行？</li>
<li>如何实现盒子的左右对齐？</li>
</ol>
<p>虽然我们前面学过行内块（inline-block） 但是他却有自己的缺陷：</p>
<ol>
<li>它可以实现多个元素一行显示，但是中间会有空白缝隙，不能满足以上第一个问题。</li>
<li>它不能实现以上第二个问题，盒子左右对齐</li>
</ol>
<p><strong>pink 老师一句话总结他们</strong></p>
<blockquote>
<p>因为一些网页布局要求，标准流不能满足我们的需要了，因此我们需要浮动来完成网页布局。</p>
</blockquote>
<h4 id="8-1-3-什么是浮动-float"><a href="#8-1-3-什么是浮动-float" class="headerlink" title="8.1.3 什么是浮动(float)"></a>8.1.3 什么是浮动(float)</h4><p><strong>概念</strong>：元素的浮动是指<strong>设置了浮动属性的元素</strong>会</p>
<ol>
<li>脱离标准普通流的控制</li>
<li>移动到指定位置。</li>
</ol>
<h5 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h5><ol>
<li><strong>让多个盒子(div)水平排列成一行</strong>，使得浮动成为布局的重要手段。</li>
<li>可以实现盒子的左右对齐等等..</li>
<li>浮动最早是用来<strong>控制图片</strong>，实现<strong>文字环绕图片的效果</strong>。</li>
</ol>
<h5 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h5><p>在 CSS 中，通过 <code>float</code> 属性定义浮动，语法如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">选择器 &#123; float: 属性值; &#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><strong>none</strong></td>
<td>元素不浮动（<strong>默认值</strong>）</td>
</tr>
<tr>
<td><strong>left</strong></td>
<td>元素向<strong>左</strong>浮动</td>
</tr>
<tr>
<td><strong>right</strong></td>
<td>元素向<strong>右</strong>浮动</td>
</tr>
</tbody></table>
<h5 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h5><ul>
<li><code>float</code> 属性会让盒子漂浮在标准流的上面，所以第二个标准流的盒子跑到浮动盒子的底下，遮挡起来了</li>
<li>原来的位置漏给下面标准流的盒子，就是不占有原来位置，是脱离标准流的，我们俗称 “脱标”。</li>
<li>元素不在受标准流显示模式的限制,<strong>块级元素不再继承父元素的宽度，行内元素可以直接设置宽高</strong></li>
<li><strong>浮动的元素互相贴靠一起的，中间没有空白，但是如果父级宽度装不下这些浮动的盒子， 多出的盒子会</strong>掉下来（掉下来的位置会根据上一个浮动盒子的高度决定, 会以<strong>上一个盒子的底边线为基准线</strong>水平移动，如果在移动的过程里面被挡住了，那么就会卡在这里地方）</li>
<li>左浮从左往右排，右浮从右往左排</li>
<li>文字和 img 标签不会和浮动元素重叠</li>
<li>margin 的 auto 值对于脱标元素没有作用</li>
</ul>
<blockquote>
<p>实际重要的导航栏中，我们不会直接用链接 a 而是用 li 包含链接(li+a)的做法。</p>
<ol>
<li>li+a 语义更清晰，一看这就是有条理的列表型内容。</li>
<li>如果直接用 a，搜索引擎容易辨别为有堆砌关键字嫌疑（故意堆砌关键字容易被搜索引擎有降权的风险），从而影响网站排名</li>
</ol>
</blockquote>
<h3 id="8-2-清除浮动"><a href="#8-2-清除浮动" class="headerlink" title="8.2 清除浮动"></a>8.2 清除浮动</h3><ul>
<li>由于浮动元素不再占用原文档流的位置，所以它会对后面的元素排版产生影响</li>
<li>准确地说，所谓的清除浮动，是<strong>清除浮动后造成的影响</strong></li>
<li>清除浮动主要为了解决父级元素因为子级浮动引起内部高度为 0 的问题。清除浮动之后， 父级就会根据浮动的子盒子自动检测高度。父级有了高度，就不会影响下面的标准流了</li>
</ul>
<h4 id="8-2-1-清除浮动的方法"><a href="#8-2-1-清除浮动的方法" class="headerlink" title="8.2.1 清除浮动的方法"></a>8.2.1 清除浮动的方法</h4><p>在 CSS 中，clear 属性用于清除浮动</p>
<ul>
<li>语法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">选择器&#123;clear:属性值;&#125;   clear 清除</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>left</td>
<td>不允许左侧有浮动元素（清除左侧浮动的影响）</td>
</tr>
<tr>
<td>right</td>
<td>不允许右侧有浮动元素（清除右侧浮动的影响）</td>
</tr>
<tr>
<td>both</td>
<td>同时清除左右两侧浮动的影响</td>
</tr>
</tbody></table>
<p>但是我们实际工作中， 几乎只用 clear: both;</p>
<h5 id="1-额外标签法-隔墙法"><a href="#1-额外标签法-隔墙法" class="headerlink" title="1).额外标签法(隔墙法)"></a>1).额外标签法(隔墙法)</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">是W3C推荐的做法是通过在浮动元素末尾添加一个空的标签例如</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;”clear:both”&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>优点： 通俗易懂，书写方便</li>
<li>缺点： 添加许多无意义的标签，结构化较差。</li>
</ul>
<h5 id="2-父级添加-overflow-属性方法"><a href="#2-父级添加-overflow-属性方法" class="headerlink" title="2).父级添加 overflow 属性方法"></a>2).父级添加 overflow 属性方法</h5><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">可以给父级添加: overflow为 hidden| auto| scroll 都可以实现。;</span><br></pre></td></tr></table></figure>

<p>优点： 代码简洁</p>
<p>缺点： 内容增多时候容易造成不会自动换行导致内容被隐藏掉，无法显示需要溢出的元素。</p>
<h5 id="3-使用-after-伪元素清除浮动"><a href="#3-使用-after-伪元素清除浮动" class="headerlink" title="3).使用 after 伪元素清除浮动"></a>3).使用 after 伪元素清除浮动</h5><p><strong>::after 方式为空元素额外标签法的升级版，好处是不用单独加标签了</strong></p>
<p>使用方法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">  <span class="attribute">visibility</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*content: &quot;&quot;; display: block; clear: both; 这三个必须写*/</span></span><br><span class="line"><span class="selector-class">.clearfix</span> &#123;</span><br><span class="line">  *zoom: <span class="number">1</span>;</span><br><span class="line">&#125; <span class="comment">/* IE6、7 专有 */</span></span><br></pre></td></tr></table></figure>

<ul>
<li>优点： 符合闭合浮动思想 结构语义化正确</li>
<li>缺点： 由于 IE6-7 不支持:after，使用 zoom:1 触发 hasLayout。</li>
</ul>
<h4 id="8-2-2-清除浮动总结"><a href="#8-2-2-清除浮动总结" class="headerlink" title="8.2.2 清除浮动总结"></a>8.2.2 清除浮动总结</h4><ol>
<li>父级没高度</li>
<li>子盒子浮动了</li>
<li>影响下面布局了，我们就应该清除浮动了。</li>
</ol>
<table>
<thead>
<tr>
<th>清除浮动的方式</th>
<th align="left">优点</th>
<th align="left">缺点</th>
</tr>
</thead>
<tbody><tr>
<td>额外标签法（隔墙法）</td>
<td align="left">通俗易懂，书写方便</td>
<td align="left">添加许多无意义的标签，结构化较差。</td>
</tr>
<tr>
<td>父级 overflow:hidden;</td>
<td align="left">书写简单</td>
<td align="left">溢出隐藏</td>
</tr>
<tr>
<td>父级 after 伪元素</td>
<td align="left">结构语义化正确</td>
<td align="left">由于 IE6-7 不支持:after，兼容性问题</td>
</tr>
</tbody></table>
<h2 id="9-定位-position"><a href="#9-定位-position" class="headerlink" title="9. 定位(position)"></a>9. 定位(position)</h2><p>定位也是用来布局的，它有两部分组成：</p>
<blockquote>
<p><code>定位 = 定位模式 + 边偏移</code></p>
</blockquote>
<h3 id="9-1-边偏移"><a href="#9-1-边偏移" class="headerlink" title="9.1 边偏移"></a>9.1 边偏移</h3><p>通过 <code>top</code>、<code>bottom</code>、<code>left</code> 和 <code>right</code> 属性定义元素的<strong>边偏移</strong>：</p>
<table>
<thead>
<tr>
<th>边偏移属性</th>
<th align="left">示例</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>top</code></td>
<td align="left"><code>top: 80px</code></td>
<td><strong>顶端</strong>偏移量，定义元素相对于其父元素<strong>上边线的距离</strong>。</td>
</tr>
<tr>
<td><code>bottom</code></td>
<td align="left"><code>bottom: 80px</code></td>
<td><strong>底部</strong>偏移量，定义元素相对于其父元素<strong>下边线的距离</strong>。</td>
</tr>
<tr>
<td><code>left</code></td>
<td align="left"><code>left: 80px</code></td>
<td><strong>左侧</strong>偏移量，定义元素相对于其父元素<strong>左边线的距离</strong>。</td>
</tr>
<tr>
<td><code>right</code></td>
<td align="left"><code>right: 80px</code></td>
<td><strong>右侧</strong>偏移量，定义元素相对于其父元素<strong>右边线的距离</strong></td>
</tr>
</tbody></table>
<p>定位的盒子有了边偏移才有价值。 一般情况下，凡是有定位地方必定有边偏移。</p>
<h3 id="9-2-定位模式-position"><a href="#9-2-定位模式-position" class="headerlink" title="9.2 定位模式 (position)"></a>9.2 定位模式 (position)</h3><p>在 CSS 中，通过 <code>position</code> 属性定义元素的<strong>定位模式</strong>，语法如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">选择器 &#123;</span><br><span class="line">  <span class="attribute">position</span>: 属性值;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定位模式是有不同分类的，在不同情况下，我们用到不同的定位模式。</p>
<table>
<thead>
<tr>
<th>值</th>
<th align="center">语义</th>
</tr>
</thead>
<tbody><tr>
<td><code>static</code></td>
<td align="center"><strong>静态</strong>定位</td>
</tr>
<tr>
<td><code>relative</code></td>
<td align="center"><strong>相对</strong>定位</td>
</tr>
<tr>
<td><code>absolute</code></td>
<td align="center"><strong>绝对</strong>定位</td>
</tr>
<tr>
<td><code>fixed</code></td>
<td align="center"><strong>固定</strong>定位</td>
</tr>
</tbody></table>
<h4 id="9-2-1-静态定位-static-了解"><a href="#9-2-1-静态定位-static-了解" class="headerlink" title="9.2.1 静态定位(static) - 了解"></a>9.2.1 静态定位(static) - 了解</h4><ul>
<li><strong>静态定位</strong>是元素的默认定位方式，无定位的意思。它相当于 border 里面的 none， 不要定位的时候用。</li>
<li>静态定位 按照标准流特性摆放位置，它没有边偏移。</li>
<li>静态定位在布局时我们几乎不用的</li>
</ul>
<h4 id="9-2-2-相对定位-relative-重要"><a href="#9-2-2-相对定位-relative-重要" class="headerlink" title="9.2.2 相对定位(relative) - 重要"></a>9.2.2 相对定位(relative) - 重要</h4><ul>
<li><strong>相对定位</strong>是元素<strong>相对</strong>于它原来在标准流中的位置来说的。（自恋型）</li>
<li>原来<strong>在标准流的区域继续占有</strong>，后面的盒子仍然以标准流的方式对待它。</li>
</ul>
<h4 id="9-2-3-绝对定位-absolute-重要"><a href="#9-2-3-绝对定位-absolute-重要" class="headerlink" title="9.2.3 绝对定位(absolute) - 重要"></a>9.2.3 绝对定位(absolute) - 重要</h4><ul>
<li>依据最近的已经定位的父级元素（<strong>默认父元素的 padding 部分</strong>）来进行定位（拼爹型）</li>
<li>不保留原来的位置，完全是脱标的。</li>
</ul>
<p>因为绝对定位的盒子是拼爹的，所以要和父级搭配一起来使用。</p>
<p><strong>定位口诀</strong> —— <strong>子绝父相</strong>—— <strong>子级</strong>是<strong>绝对</strong>定位，<strong>父级</strong>要用<strong>相对</strong>定位。</p>
<blockquote>
<p>子元素的 0 点为 margin-box 右上角，父元素的 0 点为 padding-box 右上角</p>
</blockquote>
<h4 id="9-2-4-固定定位-fixed-重要"><a href="#9-2-4-固定定位-fixed-重要" class="headerlink" title="9.2.4 固定定位(fixed) - 重要"></a>9.2.4 固定定位(fixed) - 重要</h4><ol>
<li><strong>完全脱标</strong> —— 完全不占位置；</li>
<li>只认<strong>浏览器的可视窗口</strong> —— <code>浏览器可视窗口 + 边偏移属性</code> 来设置元素的位置；<ul>
<li>跟父元素没有任何关系；单独使用的</li>
<li>不随滚动条滚动。</li>
</ul>
</li>
</ol>
<h3 id="9-3-定位-position-的扩展"><a href="#9-3-定位-position-的扩展" class="headerlink" title="9.3 定位(position)的扩展"></a>9.3 定位(position)的扩展</h3><h4 id="9-3-1-绝对定位的盒子居中"><a href="#9-3-1-绝对定位的盒子居中" class="headerlink" title="9.3.1 绝对定位的盒子居中"></a>9.3.1 绝对定位的盒子居中</h4><blockquote>
<p><strong>注意</strong>：<strong>绝对定位/固定定位的盒子</strong>不能通过设置 <code>margin: auto</code> 设置<strong>水平居中</strong>。</p>
</blockquote>
<p>在使用<strong>绝对定位</strong>时要想实现水平居中，可以按照如下方法（垂直居中同理）：</p>
<ol>
<li><code>left: 50%;</code>：让<strong>盒子的左侧</strong>移动到<strong>父级元素的水平中心位置</strong>；</li>
<li><code>margin-left: -100px;</code>：让盒子<strong>向左</strong>移动<strong>自身宽度的一半</strong>。</li>
</ol>
<p>居中还可以这样：{margin: auto; left: 0; right: 0; top: 0; bottom: 0;}</p>
<h4 id="9-3-2-堆叠顺序（z-index）"><a href="#9-3-2-堆叠顺序（z-index）" class="headerlink" title="9.3.2 堆叠顺序（z-index）"></a>9.3.2 堆叠顺序（z-index）</h4><p>在使用<strong>定位</strong>布局时，可能会<strong>出现盒子重叠的情况</strong>。加了定位的盒子，默认<strong>后来者居上</strong>， 后面的盒子会压住前面的盒子。</p>
<p>应用 <code>z-index</code> 层叠等级属性可以<strong>调整盒子的堆叠顺序</strong>。</p>
<p><code>z-index</code> 的特性如下：</p>
<ol>
<li><strong>属性值</strong>：<strong>正整数</strong>、<strong>负整数</strong>或 <strong>0</strong>，默认值是 0，数值越大，盒子越靠上；</li>
<li>如果<strong>属性值相同</strong>，则按照书写顺序，<strong>后来居上</strong>；</li>
<li><strong>数字后面不能加单位</strong>。</li>
<li>兄弟元素间相互比较（若 A 在 B 上面，B 的子元素不管怎么设置都不可能覆盖 A）</li>
</ol>
<p><strong>注意</strong>：<code>z-index</code> 只能应用于<strong>相对定位</strong>、<strong>绝对定位</strong>和<strong>固定定位</strong>的元素，其他<strong>标准流</strong>、<strong>浮动</strong>和<strong>静态定位</strong>无效。</p>
<h4 id="9-3-3-定位改变-display-属性"><a href="#9-3-3-定位改变-display-属性" class="headerlink" title="9.3.3 定位改变 display 属性"></a>9.3.3 定位改变 display 属性</h4><p>前面我们讲过，display 是显示模式， 可以改变显示模式有以下方式:</p>
<ul>
<li>可以用 inline-block 转换为行内块</li>
<li>可以用浮动 float 默认转换为行内块（类似，并不完全一样，因为浮动是脱标的）</li>
<li>绝对定位和固定定位也和浮动类似， 默认转换的特性转换为<strong>行内块</strong>。</li>
</ul>
<p>所以说， 一个行内的盒子，如果加了<strong>浮动</strong>、<strong>固定定位</strong>和<strong>绝对定位</strong>，不用转换，就可以给这个盒子直接设置宽度和高度等。</p>
<p><strong>同时注意：</strong></p>
<p>浮动元素、绝对定位(固定定位）元素不再有外边距合并（塌陷）的问题。</p>
<h3 id="9-4-定位小结"><a href="#9-4-定位小结" class="headerlink" title="9.4 定位小结"></a>9.4 定位小结</h3><table>
<thead>
<tr>
<th>定位模式</th>
<th>是否脱标占有位置</th>
<th align="left">移动位置基准</th>
<th>模式转换（行内块）</th>
<th>使用情况</th>
</tr>
</thead>
<tbody><tr>
<td>静态 static</td>
<td>不脱标，正常模式</td>
<td align="left">正常模式</td>
<td>不能</td>
<td>几乎不用</td>
</tr>
<tr>
<td>相对定位 relative</td>
<td>不脱标，占有位置</td>
<td align="left">相对自身位置移动</td>
<td>不能</td>
<td>基本单独使用</td>
</tr>
<tr>
<td>绝对定位 absolute</td>
<td>完全脱标，不占有位置</td>
<td align="left">相对于定位父级移动位置</td>
<td>能</td>
<td>要和定位父级元素搭配使用</td>
</tr>
<tr>
<td>固定定位 fixed</td>
<td>完全脱标，不占有位置</td>
<td align="left">相对于浏览器移动位置</td>
<td>能</td>
<td>单独使用，不需要父级</td>
</tr>
</tbody></table>
<h2 id="10-CSS-书写规范"><a href="#10-CSS-书写规范" class="headerlink" title="10. CSS 书写规范"></a>10. CSS 书写规范</h2><h3 id="空格规范"><a href="#空格规范" class="headerlink" title="空格规范"></a>空格规范</h3><p>【强制】 选择器 与 { 之间必须包含空格。</p>
<p>示例：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.selector</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>【强制】 属性名与之后的 : 之间不允许包含空格， : 与 属性值之间必须包含空格。</p>
<p>示例：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br></pre></td></tr></table></figure>

<h3 id="选择器规范"><a href="#选择器规范" class="headerlink" title="选择器规范"></a>选择器规范</h3><p>【强制】 并集选择器，每个选择器声明必须独占一行。</p>
<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;* good *&#x2F;</span><br><span class="line">.post,</span><br><span class="line">.page,</span><br><span class="line">.comment &#123;</span><br><span class="line">    line-height: 1.5;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;* bad *&#x2F;</span><br><span class="line">.post, .page, .comment &#123;</span><br><span class="line">    line-height: 1.5;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>【建议】 一般情况下，选择器的嵌套层级应不大于 3 级，位置靠后的限定条件应尽可能精确。</p>
<p>示例：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* good */</span></span><br><span class="line"><span class="selector-id">#username</span> <span class="selector-tag">input</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comment</span> <span class="selector-class">.avatar</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* bad */</span></span><br><span class="line"><span class="selector-class">.page</span> <span class="selector-class">.header</span> <span class="selector-class">.login</span> <span class="selector-tag">input</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.comment</span> <span class="selector-tag">div</span> * &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="属性规范"><a href="#属性规范" class="headerlink" title="属性规范"></a>属性规范</h3><p>【强制】 属性定义必须另起一行。以分号结尾</p>
<p>示例：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* good */</span></span><br><span class="line"><span class="selector-class">.selector</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* bad */</span></span><br><span class="line"><span class="selector-class">.selector</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="11-CSS-补充知识"><a href="#11-CSS-补充知识" class="headerlink" title="11. CSS 补充知识"></a>11. CSS 补充知识</h2><h3 id="11-1-元素的显示与隐藏"><a href="#11-1-元素的显示与隐藏" class="headerlink" title="11.1 元素的显示与隐藏"></a>11.1 元素的显示与隐藏</h3><ul>
<li><p>目的</p>
<p>让一个元素在页面中消失或者显示出来</p>
</li>
<li><p>场景</p>
<p>类似网站广告，当我们点击关闭就不见了，但是我们重新刷新页面，会重新出现！</p>
</li>
</ul>
<h4 id="11-1-1-display-显示（重点）"><a href="#11-1-1-display-显示（重点）" class="headerlink" title="11.1.1 display 显示（重点）"></a>11.1.1 display 显示（重点）</h4><ul>
<li>display 设置或检索对象是否及如何显示。</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">display</span>: none; <span class="comment">/*隐藏对象*/</span></span><br><span class="line"><span class="attribute">display</span>: block; <span class="comment">/*除了转换为块级元素之外，同时还有显示元素的意思。*/</span></span><br></pre></td></tr></table></figure>

<ul>
<li>特点： 隐藏之后，不再保留位置。</li>
</ul>
<p>实际开发场景：</p>
<blockquote>
<p>配合后面 js 做特效，比如下拉菜单，原先没有，鼠标经过，显示下拉菜单， 应用极为广泛</p>
</blockquote>
<h4 id="11-1-2-visibility-可见性-了解"><a href="#11-1-2-visibility-可见性-了解" class="headerlink" title="11.1.2 visibility 可见性 (了解)"></a>11.1.2 visibility 可见性 (了解)</h4><ul>
<li>设置或检索是否显示对象。</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">visibility</span>: visible; 　<span class="comment">/*对象可视*/</span></span><br><span class="line"><span class="attribute">visibility</span>: hidden; 　  <span class="comment">/*对象隐藏*/</span></span><br></pre></td></tr></table></figure>

<ul>
<li>特点： 隐藏之后，继续保留原有位置。（停职留薪）</li>
</ul>
<h4 id="11-1-3-overflow-溢出-重点"><a href="#11-1-3-overflow-溢出-重点" class="headerlink" title="11.1.3 overflow 溢出(重点)"></a>11.1.3 overflow 溢出(重点)</h4><ul>
<li>检索或设置当对象的内容超过其指定高度及宽度时如何管理内容。</li>
</ul>
<table>
<thead>
<tr>
<th>属性值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><strong>visible</strong></td>
<td>不剪切内容也不添加滚动条（默认）</td>
</tr>
<tr>
<td><strong>hidden</strong></td>
<td>不显示超过对象尺寸的内容，超出的部分隐藏掉</td>
</tr>
<tr>
<td><strong>scroll</strong></td>
<td>不管超出内容否，总是显示滚动条，包括上下和左右</td>
</tr>
<tr>
<td><strong>auto</strong></td>
<td>超出自动显示滚动条，不超出不显示滚动条</td>
</tr>
</tbody></table>
<p>实际开发场景：</p>
<ol>
<li>清除浮动</li>
<li>隐藏超出内容，隐藏掉, 不允许内容超过父盒子。</li>
</ol>
<h4 id="11-1-4-显示与隐藏总结"><a href="#11-1-4-显示与隐藏总结" class="headerlink" title="11.1.4 显示与隐藏总结"></a>11.1.4 显示与隐藏总结</h4><table>
<thead>
<tr>
<th>属性</th>
<th>区别</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td><strong>display</strong></td>
<td>隐藏对象，不保留位置</td>
<td>配合后面 js 做特效，比如下拉菜单，原先没有，鼠标经过，显示下拉菜单， 应用极为广泛</td>
</tr>
<tr>
<td><strong>visibility</strong></td>
<td>隐藏对象，保留位置</td>
<td>使用较少</td>
</tr>
<tr>
<td><strong>overflow</strong></td>
<td>只是隐藏超出大小的部分</td>
<td>1. 可以清除浮动 2. 保证盒子里面的内容不会超出该盒子范围</td>
</tr>
</tbody></table>
<h3 id="11-2-鼠标样式-cursor"><a href="#11-2-鼠标样式-cursor" class="headerlink" title="11.2 鼠标样式 cursor"></a>11.2 鼠标样式 cursor</h3><p>设置或检索在对象上移动的鼠标指针采用何种系统预定义的光标形状。</p>
<table>
<thead>
<tr>
<th>属性值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><strong>default</strong></td>
<td>小白 默认</td>
</tr>
<tr>
<td><strong>pointer</strong></td>
<td>小手</td>
</tr>
<tr>
<td><strong>move</strong></td>
<td>移动</td>
</tr>
<tr>
<td><strong>text</strong></td>
<td>文本</td>
</tr>
<tr>
<td><strong>not-allowed</strong></td>
<td>禁止</td>
</tr>
<tr>
<td>url()</td>
<td>图片</td>
</tr>
<tr>
<td>none</td>
<td>鼠标消失</td>
</tr>
<tr>
<td>help</td>
<td>问号</td>
</tr>
<tr>
<td>zoom-in</td>
<td>放大镜</td>
</tr>
<tr>
<td>zoom-out</td>
<td>缩小镜</td>
</tr>
</tbody></table>
<h3 id="11-3-轮廓线-outline"><a href="#11-3-轮廓线-outline" class="headerlink" title="11.3 轮廓线 outline"></a>11.3 轮廓线 outline</h3><p>是绘制于元素周围的一条线，位于 border 的外围，不占空间，不影响元素布局，可起到突出元素的作用。如 input 输入框</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">outline</span>: outline-color ||outline-style || outline-width;</span><br></pre></td></tr></table></figure>

<p>四个边不能单独设置</p>
<p>但是我们都不关心可以设置多少，我们平时都是去掉的。</p>
<p>最直接的写法是 ： outline: 0; 或者 outline: none;</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">style</span>=<span class="string">&quot;outline: 0;&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="11-4-防止拖拽文本域-resize"><a href="#11-4-防止拖拽文本域-resize" class="headerlink" title="11.4 防止拖拽文本域 resize"></a>11.4 防止拖拽文本域 resize</h3><p>实际开发中，我们文本域右下角是不可以拖拽：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">style</span>=<span class="string">&quot;resize: none;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="11-5-vertical-align-了解不推荐使用"><a href="#11-5-vertical-align-了解不推荐使用" class="headerlink" title="11.5 vertical-align (了解不推荐使用)"></a>11.5 vertical-align (了解不推荐使用)</h3><p><strong>行内</strong>、<strong>行内块</strong>、表单元格 垂直方向的对齐方式: vertical-align</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102184232.jpg"></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">vertical-align</span>: baseline | sub | super | <span class="built_in">top</span>(对齐line) | <span class="built_in">text-top</span>(对齐文字) | middle | bottom | text-bottom | &lt;percentage&gt;(参照line-height向上) | &lt;length&gt;(参照baseline向上);</span><br><span class="line">baseline: 当前元素的基线和父元素的基线对齐;</span><br><span class="line">middle: 当前元素的中线和父元素的基线加上x高度的一半对齐;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>注意：</p>
<p>vertical-align 不影响块级元素中的内容对齐，它只针对于<strong>行内元素</strong>或者<strong>行内块元素</strong>，</p>
<p>但是由于操作非常复杂,我们工作中基本不使用</p>
</li>
</ul>
<p><strong>去除图片底侧空白缝隙</strong></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/cuilongjin/static@main/img/20210102184254.png"></p>
<ul>
<li><p>原因：</p>
<pre><code>图片或者表单等行内块元素，他的基线会和父级盒子的基线对齐。就是图片底侧会有一个空白缝隙。
</code></pre>
</li>
<li><p>解决方法：</p>
<ul>
<li>给 img vertical-align:middle 等等。 让图片不要和基线对齐。</li>
<li>给 img 添加 display：block; 转换为块级元素就不会存在问题了。<strong>推荐使用</strong></li>
</ul>
</li>
</ul>
<h3 id="文字溢出省略号显示"><a href="#文字溢出省略号显示" class="headerlink" title="文字溢出省略号显示"></a>文字溢出省略号显示</h3><h4 id="white-space"><a href="#white-space" class="headerlink" title="white-space"></a><code>white-space</code></h4><p>设置或检索对象内文本显示方式。通常我们使用于强制一行显示内容</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">white-space</span>:</span><br><span class="line">  normal;  <span class="comment">/* 默认处理方式 */</span></span><br><span class="line">  nowrap;　<span class="comment">/* 强制在同一行内显示所有文本，直到文本结束或者遭遇 br 标签才换行 */</span></span><br></pre></td></tr></table></figure>

<h4 id="text-overflow"><a href="#text-overflow" class="headerlink" title="text-overflow"></a><code>text-overflow</code></h4><p>设置或检索是否使用一个省略标记（…）标示对象内文本的溢出</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">text-overflow</span>:</span><br><span class="line">  clip; 不显示省略标记(...)，而是简单的裁切</span><br><span class="line">  ellipsis; 当对象内文本溢出时显示省略标记(...)</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：一定要首先强制一行内显示，再次和 overflow 属性搭配使用</p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 强制一行内显示文本 */</span></span><br><span class="line"><span class="attribute">white-space</span>: nowrap;</span><br><span class="line"><span class="comment">/* 超出的部分隐藏 */</span></span><br><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line"><span class="comment">/* 文字用省略号替代超出的部分 */</span></span><br><span class="line"><span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 强制最多三行显示文本 */</span></span><br><span class="line"><span class="attribute">display</span>: -webkit-box;</span><br><span class="line">-webkit-box-orient: vertical;</span><br><span class="line">-webkit-line-clamp: <span class="number">3</span>;</span><br><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line"><span class="attribute">text-overflow</span>: ellipsis;</span><br></pre></td></tr></table></figure>

<h3 id="换行方式"><a href="#换行方式" class="headerlink" title="换行方式"></a>换行方式</h3><p>浏览器默认情况下，如果一个单词很长，导致一行中剩下的空间已经放不下时，浏览器会把这个单词挪到下一行去</p>
<p>word-wrap: break-word 标明是否允许浏览器在单词内进行断句，他会首先尝试挪到下一行，看看下一行的宽度够不够，不够的话就进行单词内的断句。</p>
<p>word-break 属性规定自动换行的处理方法</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">word-break: normal|break-all|keep-all</span><br><span class="line">normal：使用浏览器默认的换行规则</span><br><span class="line">break-all：允许在单词内换行，它不会尝试把长单词挪到下一行，而是直接进行单词内的断句</span><br><span class="line">keep-all：只能在半角空格或连字符处换行</span><br></pre></td></tr></table></figure>

<p>white-space：normal | pre | nowrap | pre-wrap | pre-line</p>
<p>normal：连续的空白符会被合并，换行符会被当作空白符来处理。填充 line 盒子时，必要的话会换行。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">nowrap：和 normal 一样，连续的空白符会被合并。但换行符无效，除非手动添加换行标签</span><br><span class="line">pre：所有空白符都会被保留。不会自动换行，原样输出</span><br><span class="line">pre-wrap：保留空白符序列，但是正常地进行换行</span><br><span class="line">pre-line：合并空白符序列，但是保留换行符</span><br></pre></td></tr></table></figure>

<h3 id="pre-标签换行"><a href="#pre-标签换行" class="headerlink" title="pre 标签换行"></a>pre 标签换行</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">pre &#123;</span><br><span class="line">  <span class="attribute">white-space</span>: pre-wrap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="11-7-CSS-精灵技术（sprite-重点"><a href="#11-7-CSS-精灵技术（sprite-重点" class="headerlink" title="11.7 CSS 精灵技术（sprite) 重点"></a>11.7 CSS 精灵技术（sprite) 重点</h3><p>CSS 精灵技术（也称 CSS Sprites、CSS 雪碧）。</p>
<p>CSS 精灵其实是将网页中的一些背景图像整合到一张大图中（精灵图），通过 background 属性精确定位到精灵图中的某个小图。</p>
<h3 id="11-8-滑动门"><a href="#11-8-滑动门" class="headerlink" title="11.8 滑动门"></a>11.8 滑动门</h3><p>各种特殊形状的背景能够自由拉伸滑动，以适应元素内部的文本内容，可用性更强。 核心技术就是利用 CSS 精灵（主要是背景位置）和 盒子 padding 撑开宽度, 以便能适应不同字数的导航栏。</p>
<p>一般的经典布局都是这样的：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>导航栏内容<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>css 样式</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">images/wx.jpg</span>) repeat-x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">33px</span>;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">33px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">./images/to.png</span>) no-repeat left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">33px</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">./images/to.png</span>) no-repeat right;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">./images/ao.png</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总结：</p>
<ol>
<li>a 设置 背景左侧，padding 撑开合适宽度。</li>
<li>span 设置背景右侧， padding 撑开合适宽度 剩下由文字继续撑开宽度。</li>
<li>之所以 a 包含 span 就是因为 整个导航都是可以点击的。</li>
</ol>
<h2 id="12-CSS-三角形"><a href="#12-CSS-三角形" class="headerlink" title="12. CSS 三角形"></a>12. CSS 三角形</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>; <span class="comment">/*宽度高度为0*/</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">0</span>; <span class="comment">/*照顾兼容性 低版本的浏览器，加上 font-size: 0;  line-height: 0;*/</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">10px</span> solid red;</span><br><span class="line">  <span class="attribute">border-right</span>: <span class="number">10px</span> solid green;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">10px</span> solid blue;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">10px</span> solid <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>web前端</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
</search>
